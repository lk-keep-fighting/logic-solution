"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[1978],{81978:function(g,p,s){s.r(p),s.d(p,{FormulaControlRenderer:function(){return y},default:function(){return c}});var l=s(15767),m=s(87363),v=s.n(m),a=s(42977),c=function(d){(0,l.ZT)(i,d);function i(){var t=d!==null&&d.apply(this,arguments)||this;return t.inited=!1,t}return i.prototype.componentDidMount=function(){var t=this.props,n=t.formInited,e=t.initSet,o=t.addHook;this.unHook=o?o(this.handleFormInit,"init"):void 0,n!==!1&&(this.inited=!0,e===!1||this.initSet())},i.prototype.componentDidUpdate=function(t){var n=this.props,e=n.formInited,o=n.initSet,r=n.autoSet;this.inited?r===!1||this.autoSet(t):typeof e=="undefined"&&(this.inited=!0,o===!1||this.initSet())},i.prototype.componentWillUnmount=function(){var t;(t=this.unHook)===null||t===void 0||t.call(this)},i.prototype.handleFormInit=function(t){this.inited=!0;var n=this.props,e=n.name,o=n.initSet;if(o!==!1){var r=this.initSet();typeof e=="string"&&typeof r!="undefined"&&(0,a.NI0)(t,e,r)}},i.prototype.initSet=function(){var t=this.props,n=t.formula,e=t.data,o=t.setPrinstineValue,r=t.initSet,f=t.condition;if(n){if(f&&!~f.indexOf("$")&&!~f.indexOf("<%")&&!(0,a.qZw)(f,e))return}else return;var u=(0,a.qZw)(n,e);return u!==null&&(o==null||o(u)),u},i.prototype.autoSet=function(t){var n=this.props,e=t.formula,o=t.data,r=t.onChange,f=t.value,u=t.condition;if(e&&n.formula&&(0,a.RjM)(o,n.data,!1)&&f===n.value){var h=(0,a.qZw)(n.formula,n.data);if(u&&n.condition)~u.indexOf("$")||~u.indexOf("<%")?(0,a.hXT)(u,o)!==(0,a.hXT)(n.condition,n.data)&&r(h):(0,a.qZw)(n.condition,n.data)&&r(h);else{var S=(0,a.qZw)(e,o);JSON.stringify(S)!==JSON.stringify(h)&&r(h!=null?h:"")}}},i.prototype.doAction=function(){var t=this.props,n=t.formula,e=t.data,o=t.onChange,r=t.autoSet,f=t.value,u=(0,a.qZw)(n,e);o(u)},i.prototype.render=function(){return null},(0,l.gn)([a.NjZ,(0,l.w6)("design:type",Function),(0,l.w6)("design:paramtypes",[Object]),(0,l.w6)("design:returntype",void 0)],i.prototype,"handleFormInit",null),i}(v().Component),y=function(d){(0,l.ZT)(i,d);function i(){return d!==null&&d.apply(this,arguments)||this}return i=(0,l.gn)([(0,a.xJW)({type:"formula",wrap:!1,strictMode:!1,sizeMutable:!1})],i),i}(c)}}]);
