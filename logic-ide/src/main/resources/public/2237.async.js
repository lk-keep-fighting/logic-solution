(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2237],{50410:function(at,At,ne){"use strict";ne.d(At,{Z:function(){return Tn}});var re=ne(52003),on=ne(87363),Mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},ot=Mt,Qt=ne(6481),bt=function(Vt,Qn){return on.createElement(Qt.Z,(0,re.Z)({},Vt,{ref:Qn,icon:ot}))},_e=on.forwardRef(bt),Tn=_e},8674:function(at,At,ne){"use strict";ne.d(At,{Z:function(){return Tn}});var re=ne(52003),on=ne(87363),Mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},ot=Mt,Qt=ne(6481),bt=function(Vt,Qn){return on.createElement(Qt.Z,(0,re.Z)({},Vt,{ref:Qn,icon:ot}))},_e=on.forwardRef(bt),Tn=_e},16020:function(at,At,ne){"use strict";ne.d(At,{Z:function(){return Tn}});var re=ne(52003),on=ne(87363),Mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},ot=Mt,Qt=ne(6481),bt=function(Vt,Qn){return on.createElement(Qt.Z,(0,re.Z)({},Vt,{ref:Qn,icon:ot}))},_e=on.forwardRef(bt),Tn=_e},81465:function(at,At,ne){"use strict";ne.d(At,{Vq:function(){return ys}});var re={};ne.r(re),ne.d(re,{postorder:function(){return us},preorder:function(){return Ws}});const on=e=>typeof e=="string",Mt=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},ot=/-(\w)/g,Qt=Mt(e=>e.replace(ot,(t,n)=>n?n.toUpperCase():"")),bt=Array.isArray,_e=e=>typeof e=="number",Tn=e=>Number.isNaN(Number(e)),lr=e=>{const t=parseFloat(e);return Tn(t)?e:t},Vt=e=>e!==null&&typeof e=="object",Qn=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Qn(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Qn(t[n])}),t}return e},ut=(e,t)=>{const n=e[t];return Vt(n)?n.cell:n},Gn=(e,t,n)=>{const r=[];for(let o=0;o<e;o++)r[o]={in:0,out:0,all:0};return n&&n.forEach(o=>{const i=ut(o,"source"),a=ut(o,"target");i&&r[t[i]]&&(r[t[i]].out+=1,r[t[i]].all+=1),a&&r[t[a]]&&(r[t[a]].in+=1,r[t[a]].all+=1)}),r},_n=(e,t)=>{const n={};return e.forEach(r=>{n[r.id]={in:0,out:0,all:0}}),t&&t.forEach(r=>{const o=ut(r,"source"),i=ut(r,"target");o&&(n[o].out+=1,n[o].all+=1),i&&(n[i].in+=1,n[i].all+=1)}),n},Jn=e=>{const t=[],n=e.length;for(let r=0;r<n;r+=1){t[r]=[];for(let o=0;o<n;o+=1)r===o?t[r][o]=0:e[r][o]===0||!e[r][o]?t[r][o]=1/0:t[r][o]=e[r][o]}for(let r=0;r<n;r+=1)for(let o=0;o<n;o+=1)for(let i=0;i<n;i+=1)t[o][i]>t[o][r]+t[r][i]&&(t[o][i]=t[o][r]+t[r][i]);return t},nn=(e,t)=>{const{nodes:n,edges:r}=e,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((a,s)=>{i[a.id]=s;const u=[];o.push(u)}),r==null||r.forEach(a=>{const s=ut(a,"source"),u=ut(a,"target"),c=i[s],f=i[u];c===void 0||f===void 0||(o[c][f]=1,t||(o[f][c]=1))}),o},bo=(e,t)=>{const n=[];return e.forEach(r=>{const o=[];r.forEach(i=>{o.push(i*t)}),n.push(o)}),n},Pn=(e,t)=>{if(e&&e.children){for(let n=e.children.length-1;n>=0;n--)if(!Pn(e.children[n],t))return}return!!t(e)},wn=(e,t)=>{typeof t=="function"&&Pn(e,t)},xo=e=>{let t=1/0,n=1/0,r=-1/0,o=-1/0;return e.forEach(i=>{let a=i.size;bt(a)?a.length===1&&(a=[a[0],a[0]]):_e(a)?a=[a,a]:(a===void 0||isNaN(a))&&(a=[30,30]);const s=[a[0]/2,a[1]/2],u=i.x-s[0],c=i.x+s[0],f=i.y-s[1],l=i.y+s[1];t>u&&(t=u),n>f&&(n=f),r<c&&(r=c),o<l&&(o=l)}),{minX:t,minY:n,maxX:r,maxY:o}},eo=e=>{const t={x:0,y:0};e.forEach(r=>{t.x+=r.x||0,t.y+=r.y||0});const n=e.length||1;return{x:t.x/n,y:t.y/n}},Ur=(e,t,n)=>{var r,o;return e==="source"?((r=n==null?void 0:n.find(i=>i.target===t.id))===null||r===void 0?void 0:r.source)||{}:((o=n==null?void 0:n.find(i=>i.source===t.id))===null||o===void 0?void 0:o.target)||{}},vo=(e,t,n)=>{let r=[];switch(e){case"source":r=n==null?void 0:n.filter(i=>i.source===t.id).map(i=>i.target);break;case"target":r=n==null?void 0:n.filter(i=>i.target===t.id).map(i=>i.source);break;case"both":r=n==null?void 0:n.filter(i=>i.source===t.id).map(i=>i.target).concat(n==null?void 0:n.filter(i=>i.target===t.id).map(i=>i.source));break;default:break}const o=new Set(r);return Array.from(o)},Zo=(e,t,n,r,o)=>{const i=n[t]||"";let a=(r==null?void 0:r.filter(s=>s[t]===i))||[];return e==="leaf"&&(a=a.filter(s=>{var u,c;return((u=o[s.id])===null||u===void 0?void 0:u.in)===0||((c=o[s.id])===null||c===void 0?void 0:c.out)===0})),a},_o=(e,t,n,r,o,i)=>{const{in:a,out:s}=o[t.id];let u=t,c=[];a===0?(u=Ur("source",t,n),c=vo("both",u,n).map(l=>i[l])):s===0&&(u=Ur("target",t,n),c=vo("both",u,n).map(l=>i[l])),c=c.filter(l=>o[l.id]&&(o[l.id].in===0||o[l.id].out===0));const f=Zo(e,r,t,c,o);return{coreNode:u,relativeLeafNodes:c,sameTypeLeafNodes:f}},it=e=>typeof e=="function",Ar=(e,t,n)=>{let r;return n?r=n:_e(e)?r=()=>e:r=()=>t,r},er=(e,t,n=!0)=>!t&&t!==0?r=>r.size?bt(r.size)?r.size[0]>r.size[1]?r.size[0]:r.size[1]:Vt(r.size)?r.size.width>r.size.height?r.size.width:r.size.height:r.size:e:it(t)?t:_e(t)?()=>t:bt(t)?()=>{if(n){const r=Math.max(...t);return isNaN(r)?e:r}return t}:Vt(t)?()=>{if(n){const r=Math.max(t.width,t.height);return isNaN(r)?e:r}return[t.width,t.height]}:()=>e,tr=new Map,uo=(e,t)=>{if(tr.get(e)&&console.warn(`The layout with the name ${e} exists already, it will be overridden`),isObject(t)){class n extends Base{constructor(o){var i;super();const a=this,s={},u=Object.assign({},a.getDefaultCfg(),((i=t.getDefaultCfg)===null||i===void 0?void 0:i.call(t))||{});Object.assign(s,u,t,o),Object.keys(s).forEach(c=>{const f=s[c];a[c]=f})}}tr.set(e,n)}else tr.set(e,t);return tr.get(e)},Vr=e=>{tr.has(e)&&tr.delete(e)},Nr=e=>tr.has(e)?tr.get(e):null;class Yt{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class Cr extends Yt{constructor(t){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const t=this,{nodes:n,edges:r,begin:o}=t,i=n.length;if(i===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r};if(i===1)return n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r};let{sortBy:a,width:s,height:u}=t;const{condense:c,preventOverlapPadding:f,preventOverlap:l,nodeSpacing:d,nodeSize:h}=t,v=[];n.forEach(g=>{v.push(g)});const m={};if(v.forEach((g,b)=>{m[g.id]=b}),(a==="degree"||!on(a)||v[0][a]===void 0)&&(a="degree",Tn(n[0].degree))){const g=Gn(v.length,m,r);v.forEach((b,_)=>{b.degree=g[_].all})}v.sort((g,b)=>b[a]-g[a]),!s&&typeof window!="undefined"&&(s=window.innerWidth),!u&&typeof window!="undefined"&&(u=window.innerHeight);const y=t.rows,E=t.cols!=null?t.cols:t.columns;if(t.cells=i,y!=null&&E!=null?(t.rows=y,t.cols=E):y!=null&&E==null?(t.rows=y,t.cols=Math.ceil(t.cells/t.rows)):y==null&&E!=null?(t.cols=E,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells){const g=t.small(),b=t.large();(g-1)*b>=t.cells?t.small(g-1):(b-1)*g>=t.cells&&t.large(b-1)}else for(;t.cols*t.rows<t.cells;){const g=t.small(),b=t.large();(b+1)*g>=t.cells?t.large(b+1):t.small(g+1)}if(t.cellWidth=s/t.cols,t.cellHeight=u/t.rows,c&&(t.cellWidth=0,t.cellHeight=0),l||d){const g=er(10,d),b=er(30,h,!1);v.forEach(_=>{(!_.x||!_.y)&&(_.x=0,_.y=0);const S=b(_)||30;let V,fe;bt(S)?(V=S[0],fe=S[1]):(V=S,fe=S);const ee=g!==void 0?g(_):f,j=V+ee,q=fe+ee;t.cellWidth=Math.max(t.cellWidth,j),t.cellHeight=Math.max(t.cellHeight,q)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(let g=0;g<v.length;g++){const b=v[g];let _;if(t.position&&(_=t.position(b)),_&&(_.row!==void 0||_.col!==void 0)){const S={row:_.row,col:_.col};if(S.col===void 0)for(S.col=0;t.used(S.row,S.col);)S.col++;else if(S.row===void 0)for(S.row=0;t.used(S.row,S.col);)S.row++;t.id2manPos[b.id]=S,t.use(S.row,S.col)}t.getPos(b)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:r,nodes:v}}small(t){const n=this;let r;const o=n.rows||5,i=n.cols||5;return t==null?r=Math.min(o,i):Math.min(o,i)===n.rows?n.rows=t:n.cols=t,r}large(t){const n=this;let r;const o=n.rows||5,i=n.cols||5;return t==null?r=Math.max(o,i):Math.max(o,i)===n.rows?n.rows=t:n.cols=t,r}used(t,n){return this.cellUsed[`c-${t}-${n}`]||!1}use(t,n){const r=this;r.cellUsed[`c-${t}-${n}`]=!0}moveToNextCell(){const t=this,n=t.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)}getPos(t){const n=this,{begin:r,cellWidth:o,cellHeight:i}=n;let a,s;const u=n.id2manPos[t.id];if(u)a=u.col*o+o/2+r[0],s=u.row*i+i/2+r[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();a=n.col*o+o/2+r[0],s=n.row*i+i/2+r[1],n.use(n.row,n.col),n.moveToNextCell()}t.x=a,t.y=s}getType(){return"grid"}}const Ve=(e,t)=>{let n;return e?_e(e)?n=r=>e:n=e:n=r=>t||1,n};class Re extends Yt{constructor(t){super(),this.maxIteration=500,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.collideStrength=1,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.animate=!0,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){var t,n;const r=this,o=r.nodes;if(r.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(r.timeInterval),!o||o.length===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const i=r.center;if(o.length===1){o[0].x=i[0],o[0].y=i[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const a={},s={};o.forEach((l,d)=>{_e(l.x)||(l.x=Math.random()*r.width),_e(l.y)||(l.y=Math.random()*r.height),a[l.id]=l,s[l.id]=d}),r.nodeMap=a,r.nodeIdxMap=s,r.linkDistance=Ve(r.linkDistance,1),r.nodeStrength=Ve(r.nodeStrength,1),r.edgeStrength=Ve(r.edgeStrength,1);const u=r.nodeSize;let c;if(r.preventOverlap){const l=r.nodeSpacing;let d;_e(l)?d=()=>l:it(l)?d=l:d=()=>0,u?bt(u)?c=h=>Math.max(u[0],u[1])+d(h):c=h=>u+d(h):c=h=>h.size?bt(h.size)?Math.max(h.size[0],h.size[1])+d(h):Vt(h.size)?Math.max(h.size.width,h.size.height)+d(h):h.size+d(h):10+d(h)}r.nodeSize=c;const f=r.edges;r.degrees=Gn(o.length,r.nodeIdxMap,f),r.getMass||(r.getMass=l=>l.mass||r.degrees[r.nodeIdxMap[l.id]].all||1),r.run()}run(){var t;const n=this,{maxIteration:r,nodes:o,workerEnabled:i,minMovement:a,animate:s}=n;if(o)if(i||!s){for(let u=0;u<r;u++){const c=n.runOneStep(u);if(n.reachMoveThreshold(o,c,a))break}(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window=="undefined")return;let u=0;this.timeInterval=window.setInterval(()=>{var c,f;if(!o)return;const l=n.runOneStep(u)||[];n.reachMoveThreshold(o,l,a)&&((c=n.onLayoutEnd)===null||c===void 0||c.call(n),window.clearInterval(n.timeInterval)),u++,u>=r&&((f=n.onLayoutEnd)===null||f===void 0||f.call(n),window.clearInterval(n.timeInterval))},0)}}reachMoveThreshold(t,n,r){let o=0;return t.forEach((i,a)=>{const s=i.x-n[a].x,u=i.y-n[a].y;o+=Math.sqrt(s*s+u*u)}),o/=t.length,o<r}runOneStep(t){var n;const r=this,{nodes:o,edges:i}=r,a=[],s=[];if(!o)return;o.forEach((f,l)=>{a[2*l]=0,a[2*l+1]=0,s[2*l]=0,s[2*l+1]=0}),r.calRepulsive(a,o),i&&r.calAttractive(a,i),r.calGravity(a,o);const u=Math.max(.02,r.interval-t*.002);r.updateVelocity(a,s,u,o);const c=[];return o.forEach(f=>{c.push({x:f.x,y:f.y})}),r.updatePosition(s,u,o),(n=r.tick)===null||n===void 0||n.call(r),c}calRepulsive(t,n){const r=this,{getMass:o,factor:i,coulombDisScale:a,preventOverlap:s,collideStrength:u=1}=r,c=r.nodeStrength,f=r.nodeSize;n.forEach((l,d)=>{const h=o?o(l):1;n.forEach((v,m)=>{if(d>=m)return;let y=l.x-v.x,E=l.y-v.y;y===0&&E===0&&(y=Math.random()*.01,E=Math.random()*.01);const g=y*y+E*E,b=Math.sqrt(g),_=(b+.1)*a,S=y/b,V=E/b,fe=(c(l)+c(v))*.5*i/(_*_),ee=o?o(v):1;if(t[2*d]+=S*fe,t[2*d+1]+=V*fe,t[2*m]-=S*fe,t[2*m+1]-=V*fe,s&&(f(l)+f(v))/2>b){const j=u*(c(l)+c(v))*.5/g;t[2*d]+=S*j/h,t[2*d+1]+=V*j/h,t[2*m]-=S*j/ee,t[2*m+1]-=V*j/ee}})})}calAttractive(t,n){const r=this,{nodeMap:o,nodeIdxMap:i,linkDistance:a,edgeStrength:s}=r,u=r.nodeSize,c=r.getMass;n.forEach((f,l)=>{const d=ut(f,"source"),h=ut(f,"target"),v=o[d],m=o[h];let y=m.x-v.x,E=m.y-v.y;y===0&&E===0&&(y=Math.random()*.01,E=Math.random()*.01);const g=Math.sqrt(y*y+E*E),b=y/g,_=E/g,fe=((a(f,v,m)||1+(u(v)+u(m)||0)/2)-g)*s(f),ee=i[d],j=i[h],q=c?c(v):1,me=c?c(m):1;t[2*ee]-=b*fe/q,t[2*ee+1]-=_*fe/q,t[2*j]+=b*fe/me,t[2*j+1]+=_*fe/me})}calGravity(t,n){const r=this,o=r.center,i=r.gravity,a=r.degrees,s=n.length;for(let u=0;u<s;u++){const c=n[u];let f=c.x-o[0],l=c.y-o[1],d=i;if(r.getCenter){const h=r.getCenter(c,a[u].all);h&&_e(h[0])&&_e(h[1])&&_e(h[2])&&(f=c.x-h[0],l=c.y-h[1],d=h[2])}d&&(t[2*u]-=d*f,t[2*u+1]-=d*l)}}updateVelocity(t,n,r,o){const i=this,a=r*i.damping;o.forEach((s,u)=>{let c=t[2*u]*a||.01,f=t[2*u+1]*a||.01;const l=Math.sqrt(c*c+f*f);if(l>i.maxSpeed){const d=i.maxSpeed/l;c=d*c,f=d*f}n[2*u]=c,n[2*u+1]=f})}updatePosition(t,n,r){r.forEach((o,i)=>{if(_e(o.fx)&&_e(o.fy)){o.x=o.fx,o.y=o.fy;return}const a=t[2*i]*n,s=t[2*i+1]*n;o.x+=a,o.y+=s})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"gForce"}}function ke(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return et(this.cover(t,n),t,n,e)}function et(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var o,i=e._root,a={data:r},s=e._x0,u=e._y0,c=e._x1,f=e._y1,l,d,h,v,m,y,E,g;if(!i)return e._root=a,e;for(;i.length;)if((m=t>=(l=(s+c)/2))?s=l:c=l,(y=n>=(d=(u+f)/2))?u=d:f=d,o=i,!(i=i[E=y<<1|m]))return o[E]=a,e;if(h=+e._x.call(null,i.data),v=+e._y.call(null,i.data),t===h&&n===v)return a.next=i,o?o[E]=a:e._root=a,e;do o=o?o[E]=new Array(4):e._root=new Array(4),(m=t>=(l=(s+c)/2))?s=l:c=l,(y=n>=(d=(u+f)/2))?u=d:f=d;while((E=y<<1|m)===(g=(v>=d)<<1|h>=l));return o[g]=i,o[E]=a,e}function St(e){var t,n,r=e.length,o,i,a=new Array(r),s=new Array(r),u=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<r;++n)isNaN(o=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=o,s[n]=i,o<u&&(u=o),o>f&&(f=o),i<c&&(c=i),i>l&&(l=i));if(u>f||c>l)return this;for(this.cover(u,c).cover(f,l),n=0;n<r;++n)et(this,a[n],s[n],e[n]);return this}function vt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var a=o-n||1,s=this._root,u,c;n>e||e>=o||r>t||t>=i;)switch(c=(t<r)<<1|e<n,u=new Array(4),u[c]=s,s=u,a*=2,c){case 0:o=n+a,i=r+a;break;case 1:n=o-a,i=r+a;break;case 2:o=n+a,r=i-a;break;case 3:n=o-a,r=i-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this}function In(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function nr(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function rn(e,t,n,r,o){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=o}function to(e,t,n){var r,o=this._x0,i=this._y0,a,s,u,c,f=this._x1,l=this._y1,d=[],h=this._root,v,m;for(h&&d.push(new rn(h,o,i,f,l)),n==null?n=1/0:(o=e-n,i=t-n,f=e+n,l=t+n,n*=n);v=d.pop();)if(!(!(h=v.node)||(a=v.x0)>f||(s=v.y0)>l||(u=v.x1)<o||(c=v.y1)<i))if(h.length){var y=(a+u)/2,E=(s+c)/2;d.push(new rn(h[3],y,E,u,c),new rn(h[2],a,E,y,c),new rn(h[1],y,s,u,E),new rn(h[0],a,s,y,E)),(m=(t>=E)<<1|e>=y)&&(v=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=v)}else{var g=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),_=g*g+b*b;if(_<n){var S=Math.sqrt(n=_);o=e-S,i=t-S,f=e+S,l=t+S,r=h.data}}return r}function Lr(e){if(isNaN(f=+this._x.call(null,e))||isNaN(l=+this._y.call(null,e)))return this;var t,n=this._root,r,o,i,a=this._x0,s=this._y0,u=this._x1,c=this._y1,f,l,d,h,v,m,y,E;if(!n)return this;if(n.length)for(;;){if((v=f>=(d=(a+u)/2))?a=d:u=d,(m=l>=(h=(s+c)/2))?s=h:c=h,t=n,!(n=n[y=m<<1|v]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,E=y)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(i=n.next)&&delete n.next,o?(i?o.next=i:delete o.next,this):t?(i?t[y]=i:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[E]=n:this._root=n),this):(this._root=i,this)}function $r(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function vi(){return this._root}function wa(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function pi(e){var t=[],n,r=this._root,o,i,a,s,u;for(r&&t.push(new rn(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,i=n.x0,a=n.y0,s=n.x1,u=n.y1)&&r.length){var c=(i+s)/2,f=(a+u)/2;(o=r[3])&&t.push(new rn(o,c,f,s,u)),(o=r[2])&&t.push(new rn(o,i,f,c,u)),(o=r[1])&&t.push(new rn(o,c,a,s,f)),(o=r[0])&&t.push(new rn(o,i,a,c,f))}return this}function mi(e){var t=[],n=[],r;for(this._root&&t.push(new rn(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var o=r.node;if(o.length){var i,a=r.x0,s=r.y0,u=r.x1,c=r.y1,f=(a+u)/2,l=(s+c)/2;(i=o[0])&&t.push(new rn(i,a,s,f,l)),(i=o[1])&&t.push(new rn(i,f,s,u,l)),(i=o[2])&&t.push(new rn(i,a,l,f,c)),(i=o[3])&&t.push(new rn(i,f,l,u,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function dr(e){return e[0]}function co(e){return arguments.length?(this._x=e,this):this._x}function gi(e){return e[1]}function Sa(e){return arguments.length?(this._y=e,this):this._y}function yi(e,t,n){var r=new I(t==null?dr:t,n==null?gi:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function I(e,t,n,r,o,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function Ei(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Fn=yi.prototype=I.prototype;Fn.copy=function(){var e=new I(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Ei(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var o=0;o<4;++o)(r=t.source[o])&&(r.length?n.push({source:r,target:t.target[o]=new Array(4)}):t.target[o]=Ei(r));return e},Fn.add=ke,Fn.addAll=St,Fn.cover=vt,Fn.data=In,Fn.extent=nr,Fn.find=to,Fn.remove=Lr,Fn.removeAll=$r,Fn.root=vi,Fn.size=wa,Fn.visit=pi,Fn.visitAfter=mi,Fn.x=co,Fn.y=Sa;const jo=.81,Vi=.1;function fo(e,t,n,r,o){const i=n/r,a=e.map((u,c)=>{const f=t[u.id],{data:l,x:d,y:h,size:v}=f,{nodeStrength:m}=l.layout.force;return{x:d,y:h,size:v,index:c,vx:0,vy:0,weight:i*m}}),s=yi(a,u=>u.x,u=>u.y).visitAfter(Ta);return a.forEach(u=>{Ia(u,s)}),a.map((u,c)=>{const f=t[e[c].id],{mass:l=1}=f.data.layout.force;o[2*c]=u.vx/l,o[2*c+1]=u.vy/l}),o}function Ta(e){let t=0,n=0,r=0;if(e.length){for(let o=0;o<4;o++){const i=e[o];i&&i.weight&&(t+=i.weight,n+=i.x*i.weight,r+=i.y*i.weight)}e.x=n/t,e.y=r/t,e.weight=t}else{const o=e;e.x=o.data.x,e.y=o.data.y,e.weight=o.data.weight}}const wo=(e,t,n,r,o,i)=>{const a=i.x-e.x||Vi,s=i.y-e.y||Vi,u=r-t,c=a*a+s*s,f=Math.sqrt(c)*c;if(u*u*jo<c){const l=e.weight/f;return i.vx+=a*l,i.vy+=s*l,!0}if(e.length)return!1;if(e.data!==i){const l=e.data.weight/f;i.vx+=a*l,i.vy+=s*l}};function Ia(e,t){t.visit((n,r,o,i,a)=>wo(n,r,o,i,a,e))}const $i=(e,t)=>{let n;return e?_e(e)?n=r=>e:n=e:n=r=>t||1,n};class is extends Yt{constructor(t){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=500,this.minMovement=.4,this.interval=.02,this.factor=1,this.linkDistance=200,this.gravity=0,this.clusterNodeStrength=20,this.preventOverlap=!0,this.distanceThresholdMode="mean",this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.judgingDistance=0,this.centripetalOptions={leaf:2,single:2,others:1,center:r=>({x:this.width/2,y:this.height/2})};const{getMass:n}=t;this.propsGetMass=n,this.updateCfg(t)}getCentripetalOptions(){const{leafCluster:t,clustering:n,nodeClusterBy:r,nodes:o,nodeMap:i,clusterNodeStrength:a}=this,s=h=>typeof a=="function"?a(h):a;let u={},c;if(t){c=this.getSameTypeLeafMap()||{};const h=Array.from(new Set(o==null?void 0:o.map(v=>v[r])))||[];u={single:100,leaf:(v,m,y)=>{const{relativeLeafNodes:E,sameTypeLeafNodes:g}=c[v.id]||{};return(g==null?void 0:g.length)===(E==null?void 0:E.length)||(h==null?void 0:h.length)===1?1:s(v)},others:1,center:(v,m,y)=>{var E;const{degree:g}=((E=v.data)===null||E===void 0?void 0:E.layout)||{};if(!g)return{x:100,y:100};let b;if(g===1){const{sameTypeLeafNodes:_=[]}=c[v.id]||{};_.length===1?b=void 0:_.length>1&&(b=eo(_))}else b=void 0;return{x:b==null?void 0:b.x,y:b==null?void 0:b.y}}}}if(n){c||(c=this.getSameTypeLeafMap());const h=Array.from(new Set(o.map((m,y)=>m[r]))).filter(m=>m!==void 0),v={};h.forEach(m=>{const y=o.filter(E=>E[r]===m).map(E=>i[E.id]);v[m]=eo(y)}),u={single:m=>s(m),leaf:m=>s(m),others:m=>s(m),center:(m,y,E)=>{const g=v[m[r]];return{x:g==null?void 0:g.x,y:g==null?void 0:g.y}}}}this.centripetalOptions=Object.assign(Object.assign({},this.centripetalOptions),u);const{leaf:f,single:l,others:d}=this.centripetalOptions;f&&typeof f!="function"&&(this.centripetalOptions.leaf=()=>f),l&&typeof l!="function"&&(this.centripetalOptions.single=()=>l),d&&typeof d!="function"&&(this.centripetalOptions.others=()=>d)}updateCfg(t){t&&Object.assign(this,t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){const t=this;t.stop();const{nodes:n,edges:r,defSpringLen:o}=t;if(t.judgingDistance=0,!n||n.length===0){t.onLayoutEnd([]);return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd([Object.assign({},n[0])]);return}t.degreesMap=_n(n,r),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=f=>{let l=1;_e(f.mass)&&(l=f.mass);const d=t.degreesMap[f.id].all;return!d||d<5?l:d*5*l};const a=t.nodeSize;let s;if(t.preventOverlap){const f=t.nodeSpacing;let l;_e(f)?l=()=>f:it(f)?l=f:l=()=>0,a?bt(a)?s=d=>Math.max(a[0],a[1])+l(d):s=d=>a+l(d):s=d=>d.size?bt(d.size)?Math.max(d.size[0],d.size[1])+l(d):Vt(d.size)?Math.max(d.size.width,d.size.height)+l(d):d.size+l(d):10+l(d)}t.nodeSize=s,t.linkDistance=$i(t.linkDistance,1),t.nodeStrength=$i(t.nodeStrength,1),t.edgeStrength=$i(t.edgeStrength,1);const u={},c={};n.forEach((f,l)=>{_e(f.x)||(f.x=Math.random()*t.width),_e(f.y)||(f.y=Math.random()*t.height);const d=t.degreesMap[f.id];u[f.id]=Object.assign(Object.assign({},f),{data:Object.assign(Object.assign({},f.data),{size:t.nodeSize(f)||30,layout:{inDegree:d.in,outDegree:d.out,degree:d.all,tDegree:d.in,sDegree:d.out,force:{mass:t.getMass(f),nodeStrength:t.nodeStrength(f,r)}}})}),c[f.id]=l}),t.nodeMap=u,t.nodeIdxMap=c,t.edgeInfos=[],r==null||r.forEach(f=>{const l=u[f.source],d=u[f.target];!l||!d?elf.edgeInfos.push({}):t.edgeInfos.push({edgeStrength:t.edgeStrength(f),linkDistance:o?o(Object.assign(Object.assign({},f),{source:l,target:d}),l,d):t.linkDistance(f,l,d)||1+(a(l)+a(l)||0)/2})}),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||(()=>{}),t.run()}run(){const t=this,{maxIteration:n,nodes:r,edges:o,workerEnabled:i,minMovement:a,animate:s,nodeMap:u,height:c}=t;if(t.currentMinY=0,t.currentMaxY=c,!r)return;const f=[];if(r.forEach((h,v)=>{f[2*v]=0,f[2*v+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){const h={};o.forEach(v=>{const{source:m,target:y}=v;h[m]=h[m]||[],h[m].push(v),h[y]=h[y]||[],h[y].push(v)}),this.relatedEdges=h}const l=n;if(i||!s){let h=0;for(let v=0;(t.judgingDistance>a||v<1)&&v<l;v++)h=v,t.runOneStep(v,f);t.onLayoutEnd(Object.values(u))}else{if(typeof window=="undefined")return;let h=0;this.timeInterval=window.setInterval(()=>{r&&(t.runOneStep(h,f),h++,(h>=l||t.judgingDistance<a)&&(t.onLayoutEnd(Object.values(u)),window.clearInterval(t.timeInterval)))},0)}}runOneStep(t,n){var r;const o=this,{nodes:i,edges:a,nodeMap:s,monitor:u}=o,c=[];if(!(i!=null&&i.length))return;o.calRepulsive(c),a&&o.calAttractive(c),o.calGravity(c),o.attractToSide(c);const f=o.interval;if(o.updateVelocity(c,n,f),o.updatePosition(n,f),(r=o.tick)===null||r===void 0||r.call(o),u){const l=this.calTotalEnergy(c);u({energy:l,nodes:i,edges:a,iterations:t})}}calTotalEnergy(t){const{nodes:n,nodeMap:r}=this;if(!(n!=null&&n.length))return 0;let o=0;return n.forEach((i,a)=>{const s=t[2*a],u=t[2*a+1],c=s*s+u*u,{mass:f=1}=r[i.id].data.layout.force;o+=f*c*.5}),o}calRepulsive(t){const n=this,{nodes:r,nodeMap:o,factor:i,coulombDisScale:a}=n,s=n.nodeSize;fo(r,o,i,a*a,t)}calAttractive(t){const n=this,{edges:r,nodeMap:o,nodeIdxMap:i,edgeInfos:a}=n,s=n.nodeSize;r.forEach((u,c)=>{const f=ut(u,"source"),l=ut(u,"target"),d=o[f],h=o[l];if(!d||!h)return;let v=h.x-d.x,m=h.y-d.y;!v&&!m&&(v=Math.random()*.01,m=Math.random()*.01);const y=Math.sqrt(v*v+m*m),E=v/y,g=m/y,{linkDistance:b=200,edgeStrength:_=200}=a[c]||{},V=(b-y)*_,fe=d.data.layout.force.mass||1,ee=h.data.layout.force.mass||1,j=1/fe,q=1/ee,me=E*V,G=g*V,ye=2*i[f],Ge=2*i[l];t[ye]-=me*j,t[ye+1]-=G*j,t[Ge]+=me*q,t[Ge+1]+=G*q})}calGravity(t){var n;const r=this,{nodes:o,edges:i=[],nodeMap:a,width:s,height:u,center:c,gravity:f,degreesMap:l,centripetalOptions:d}=r;if(!o)return;const h=o.length;for(let v=0;v<h;v++){const m=2*v,y=a[o[v].id],{mass:E=1}=y.data.layout.force;let g=0,b=0,_=f;const{in:S,out:V,all:fe}=l[y.id],ee=(n=r.getCenter)===null||n===void 0?void 0:n.call(r,y,fe);if(ee){const[j,q,me]=ee;g=y.x-j,b=y.y-q,_=me}else g=y.x-c[0],b=y.y-c[1];if(_&&(t[m]-=_*g/E,t[m+1]-=_*b/E),d){const{leaf:j,single:q,others:me,center:G}=d,{x:ye,y:Ge,centerStrength:Ue}=(G==null?void 0:G(y,o,i,s,u))||{x:0,y:0,centerStrength:0};if(!_e(ye)||!_e(Ge))continue;const pt=(y.x-ye)/E,Ke=(y.y-Ge)/E;if(Ue&&(t[m]-=Ue*pt,t[m+1]-=Ue*Ke),fe===0){const dt=q(y);if(!dt)continue;t[m]-=dt*pt,t[m+1]-=dt*Ke;continue}if(S===0||V===0){const dt=j(y,o,i);if(!dt)continue;t[m]-=dt*pt,t[m+1]-=dt*Ke;continue}const Et=me(y);if(!Et)continue;t[m]-=Et*pt,t[m+1]-=Et*Ke}}}attractToSide(t){const{defSideCoe:n,height:r,nodes:o,relatedEdges:i,currentMinY:a=0,currentMaxY:s=this.height}=this;!n||typeof n!="function"||!(o!=null&&o.length)||o.forEach((u,c)=>{const f=n(u,i[u.id]||[]);if(f===0)return;const l=f<0?a:s,d=Math.abs(f);t[2*c+1]-=d*(u.y-l)})}updateVelocity(t,n,r){const o=this,{nodes:i,damping:a,maxSpeed:s}=o;i!=null&&i.length&&i.forEach((u,c)=>{let f=(n[2*c]+t[2*c]*r)*a||.01,l=(n[2*c+1]+t[2*c+1]*r)*a||.01;const d=Math.sqrt(f*f+l*l);if(d>s){const h=s/d;f=h*f,l=h*l}n[2*c]=f,n[2*c+1]=l})}updatePosition(t,n){const r=this,{nodes:o,distanceThresholdMode:i,nodeMap:a}=r;if(!(o!=null&&o.length)){this.judgingDistance=0;return}let s=0;i==="max"?r.judgingDistance=-1/0:i==="min"&&(r.judgingDistance=1/0);let u=1/0,c=-1/0;o.forEach((f,l)=>{const d=a[f.id];if(_e(f.fx)&&_e(f.fy)){f.x=f.fx,f.y=f.fy,d.x=f.x,d.y=f.y;return}const h=t[2*l]*n,v=t[2*l+1]*n;f.x+=h,f.y+=v,d.x=f.x,d.y=f.y,f.y<u&&(u=f.y),f.y>c&&(c=f.y);const m=Math.sqrt(h*h+v*v);switch(i){case"max":r.judgingDistance<m&&(r.judgingDistance=m);break;case"min":r.judgingDistance>m&&(r.judgingDistance=m);break;default:s=s+m;break}}),this.currentMinY=u,this.currentMaxY=c,(!i||i==="mean")&&(r.judgingDistance=s/o.length)}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"force2"}getSameTypeLeafMap(){const{nodeClusterBy:t,nodes:n,edges:r,nodeMap:o,degreesMap:i}=this;if(!(n!=null&&n.length))return;const a={};return n.forEach((s,u)=>{i[s.id].all===1&&(a[s.id]=_o("leaf",s,r,t,i,o))}),a}}function hr(e){return function(){return e}}function Dn(e){return(e()-.5)*1e-6}var So={value:function(){}};function Xr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new To(n)}function To(e){this._=e}function qc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}To.prototype=Xr.prototype={constructor:To,on:function(t,n){var r=this._,o=qc(t+"",r),i,a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((i=(t=o[a]).type)&&(i=Pu(r[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<s;)if(i=(t=o[a]).type)r[i]=ks(r[i],t.name,n);else if(n==null)for(i in r)r[i]=ks(r[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new To(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var r=new Array(i),o=0,i,a;o<i;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],o=0,i=a.length;o<i;++o)a[o].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,a=o.length;i<a;++i)o[i].value.apply(n,r)}};function Pu(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function ks(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=So,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Gs=Xr,Yo=0,bi=0,Xi=0,Ps=1e3,yr,Wi,Aa=0,Ko=0,Na=0,Hi=typeof performance=="object"&&performance.now?performance:Date,Fs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zs(){return Ko||(Fs(Fu),Ko=Hi.now()+Na)}function Fu(){Ko=0}function Pt(){this._call=this._time=this._next=null}Pt.prototype=po.prototype={constructor:Pt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zs():+n)+(t==null?0:+t),!this._next&&Wi!==this&&(Wi?Wi._next=this:yr=this,Wi=this),this._call=e,this._time=n,as()},stop:function(){this._call&&(this._call=null,this._time=1/0,as())}};function po(e,t,n){var r=new Pt;return r.restart(e,t,n),r}function $n(){zs(),++Yo;for(var e=yr,t;e;)(t=Ko-e._time)>=0&&e._call.call(null,t),e=e._next;--Yo}function Bs(){Ko=(Aa=Hi.now())+Na,Yo=bi=0;try{$n()}finally{Yo=0,Qc(),Ko=0}}function Us(){var e=Hi.now(),t=e-Aa;t>Ps&&(Na-=t,Aa=e)}function Qc(){for(var e,t=yr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yr=n);Wi=e,as(r)}function as(e){if(!Yo){bi&&(bi=clearTimeout(bi));var t=e-Ko;t>24?(e<1/0&&(bi=setTimeout(Bs,e-Hi.now()-Na)),Xi&&(Xi=clearInterval(Xi))):(Xi||(Aa=Hi.now(),Xi=setInterval(Us,Ps)),Yo=1,Fs(Bs))}}var zu=1664525,Bu=1013904223,Vs=4294967296;function Uu(){var e=1;return function(){return(e=(zu*e+Bu)%Vs)/Vs}}function Vu(e){return e.x}function $u(e){return e.y}var Xu=10,Wu=Math.PI*(3-Math.sqrt(5));function ss(e){var t,n=1,r=.001,o=1-Math.pow(r,1/300),i=0,a=.6,s=new Map,u=po(l),c=Gs("tick","end"),f=Uu();e==null&&(e=[]);function l(){d(),c.call("tick",t),n<r&&(u.stop(),c.call("end",t))}function d(m){var y,E=e.length,g;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(i-n)*o,s.forEach(function(_){_(n)}),y=0;y<E;++y)g=e[y],g.fx==null?g.x+=g.vx*=a:(g.x=g.fx,g.vx=0),g.fy==null?g.y+=g.vy*=a:(g.y=g.fy,g.vy=0);return t}function h(){for(var m=0,y=e.length,E;m<y;++m){if(E=e[m],E.index=m,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),isNaN(E.x)||isNaN(E.y)){var g=Xu*Math.sqrt(.5+m),b=m*Wu;E.x=g*Math.cos(b),E.y=g*Math.sin(b)}(isNaN(E.vx)||isNaN(E.vy))&&(E.vx=E.vy=0)}}function v(m){return m.initialize&&m.initialize(e,f),m}return h(),t={tick:d,restart:function(){return u.restart(l),t},stop:function(){return u.stop(),t},nodes:function(y){return arguments.length?(e=y,h(),s.forEach(v),t):e},alpha:function(y){return arguments.length?(n=+y,t):n},alphaMin:function(y){return arguments.length?(r=+y,t):r},alphaDecay:function(y){return arguments.length?(o=+y,t):+o},alphaTarget:function(y){return arguments.length?(i=+y,t):i},velocityDecay:function(y){return arguments.length?(a=1-y,t):1-a},randomSource:function(y){return arguments.length?(f=y,s.forEach(v),t):f},force:function(y,E){return arguments.length>1?(E==null?s.delete(y):s.set(y,v(E)),t):s.get(y)},find:function(y,E,g){var b=0,_=e.length,S,V,fe,ee,j;for(g==null?g=1/0:g*=g,b=0;b<_;++b)ee=e[b],S=y-ee.x,V=E-ee.y,fe=S*S+V*V,fe<g&&(j=ee,g=fe);return j},on:function(y,E){return arguments.length>1?(c.on(y,E),t):c.on(y)}}}function $s(){var e,t,n,r,o=hr(-30),i,a=1,s=1/0,u=.81;function c(h){var v,m=e.length,y=yi(e,Vu,$u).visitAfter(l);for(r=h,v=0;v<m;++v)t=e[v],y.visit(d)}function f(){if(e){var h,v=e.length,m;for(i=new Array(v),h=0;h<v;++h)m=e[h],i[m.index]=+o(m,h,e)}}function l(h){var v=0,m,y,E=0,g,b,_;if(h.length){for(g=b=_=0;_<4;++_)(m=h[_])&&(y=Math.abs(m.value))&&(v+=m.value,E+=y,g+=y*m.x,b+=y*m.y);h.x=g/E,h.y=b/E}else{m=h,m.x=m.data.x,m.y=m.data.y;do v+=i[m.data.index];while(m=m.next)}h.value=v}function d(h,v,m,y){if(!h.value)return!0;var E=h.x-t.x,g=h.y-t.y,b=y-v,_=E*E+g*g;if(b*b/u<_)return _<s&&(E===0&&(E=Dn(n),_+=E*E),g===0&&(g=Dn(n),_+=g*g),_<a&&(_=Math.sqrt(a*_)),t.vx+=E*h.value*r/_,t.vy+=g*h.value*r/_),!0;if(h.length||_>=s)return;(h.data!==t||h.next)&&(E===0&&(E=Dn(n),_+=E*E),g===0&&(g=Dn(n),_+=g*g),_<a&&(_=Math.sqrt(a*_)));do h.data!==t&&(b=i[h.data.index]*r/_,t.vx+=E*b,t.vy+=g*b);while(h=h.next)}return c.initialize=function(h,v){e=h,n=v,f()},c.strength=function(h){return arguments.length?(o=typeof h=="function"?h:hr(+h),f(),c):o},c.distanceMin=function(h){return arguments.length?(a=h*h,c):Math.sqrt(a)},c.distanceMax=function(h){return arguments.length?(s=h*h,c):Math.sqrt(s)},c.theta=function(h){return arguments.length?(u=h*h,c):Math.sqrt(u)},c}function Xs(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function o(){var i,a=n.length,s,u=0,c=0;for(i=0;i<a;++i)s=n[i],u+=s.x,c+=s.y;for(u=(u/a-e)*r,c=(c/a-t)*r,i=0;i<a;++i)s=n[i],s.x-=u,s.y-=c}return o.initialize=function(i){n=i},o.x=function(i){return arguments.length?(e=+i,o):e},o.y=function(i){return arguments.length?(t=+i,o):t},o.strength=function(i){return arguments.length?(r=+i,o):r},o}var Hu=ne(31759),Er=ne.n(Hu);function Zu(e){return e.index}function A(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function D(e){var t=Zu,n=l,r,o=hr(30),i,a,s,u,c,f=1;e==null&&(e=[]);function l(y){return 1/Math.min(s[y.source.index],s[y.target.index])}function d(y){for(var E=0,g=e.length;E<f;++E)for(var b=0,_,S,V,fe,ee,j,q;b<g;++b)_=e[b],S=_.source,V=_.target,fe=V.x+V.vx-S.x-S.vx||Dn(c),ee=V.y+V.vy-S.y-S.vy||Dn(c),j=Math.sqrt(fe*fe+ee*ee),j=(j-i[b])/j*y*r[b],fe*=j,ee*=j,V.vx-=fe*(q=u[b]),V.vy-=ee*q,S.vx+=fe*(q=1-q),S.vy+=ee*q}function h(){if(a){var y,E=a.length,g=e.length,b=new Map(a.map(function(S,V){return[t(S,V,a),S]})),_;for(y=0,s=new Array(E);y<g;++y)_=e[y],_.index=y,Er()(_.source)!=="object"&&(_.source=A(b,_.source)),Er()(_.target)!=="object"&&(_.target=A(b,_.target)),s[_.source.index]=(s[_.source.index]||0)+1,s[_.target.index]=(s[_.target.index]||0)+1;for(y=0,u=new Array(g);y<g;++y)_=e[y],u[y]=s[_.source.index]/(s[_.source.index]+s[_.target.index]);r=new Array(g),v(),i=new Array(g),m()}}function v(){if(a)for(var y=0,E=e.length;y<E;++y)r[y]=+n(e[y],y,e)}function m(){if(a)for(var y=0,E=e.length;y<E;++y)i[y]=+o(e[y],y,e)}return d.initialize=function(y,E){a=y,c=E,h()},d.links=function(y){return arguments.length?(e=y,h(),d):e},d.id=function(y){return arguments.length?(t=y,d):t},d.iterations=function(y){return arguments.length?(f=+y,d):f},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:hr(+y),v(),d):n},d.distance=function(y){return arguments.length?(o=typeof y=="function"?y:hr(+y),m(),d):o},d}function we(e){return e.x+e.vx}function Ie(e){return e.y+e.vy}function Me(e){var t,n,r,o=1,i=1;typeof e!="function"&&(e=hr(e==null?1:+e));function a(){for(var c,f=t.length,l,d,h,v,m,y,E=0;E<i;++E)for(l=yi(t,we,Ie).visitAfter(s),c=0;c<f;++c)d=t[c],m=n[d.index],y=m*m,h=d.x+d.vx,v=d.y+d.vy,l.visit(g);function g(b,_,S,V,fe){var ee=b.data,j=b.r,q=m+j;if(ee){if(ee.index>d.index){var me=h-ee.x-ee.vx,G=v-ee.y-ee.vy,ye=me*me+G*G;ye<q*q&&(me===0&&(me=Dn(r),ye+=me*me),G===0&&(G=Dn(r),ye+=G*G),ye=(q-(ye=Math.sqrt(ye)))/ye*o,d.vx+=(me*=ye)*(q=(j*=j)/(y+j)),d.vy+=(G*=ye)*q,ee.vx-=me*(q=1-q),ee.vy-=G*q)}return}return _>h+q||V<h-q||S>v+q||fe<v-q}}function s(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function u(){if(t){var c,f=t.length,l;for(n=new Array(f),c=0;c<f;++c)l=t[c],n[l.index]=+e(l,c,t)}}return a.initialize=function(c,f){t=c,r=f,u()},a.iterations=function(c){return arguments.length?(i=+c,a):i},a.strength=function(c){return arguments.length?(o=+c,a):o},a.radius=function(c){return arguments.length?(e=typeof c=="function"?c:hr(+c),u(),a):e},a}function Ze(e){var t=hr(.1),n,r,o;typeof e!="function"&&(e=hr(e==null?0:+e));function i(s){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vx+=(o[u]-f.x)*r[u]*s}function a(){if(n){var s,u=n.length;for(r=new Array(u),o=new Array(u),s=0;s<u;++s)r[s]=isNaN(o[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return i.initialize=function(s){n=s,a()},i.strength=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),a(),i):t},i.x=function(s){return arguments.length?(e=typeof s=="function"?s:hr(+s),a(),i):e},i}function Ye(e){var t=hr(.1),n,r,o;typeof e!="function"&&(e=hr(e==null?0:+e));function i(s){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vy+=(o[u]-f.y)*r[u]*s}function a(){if(n){var s,u=n.length;for(r=new Array(u),o=new Array(u),s=0;s<u;++s)r[s]=isNaN(o[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return i.initialize=function(s){n=s,a()},i.strength=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),a(),i):t},i.y=function(s){return arguments.length?(e=typeof s=="function"?s:hr(+s),a(),i):e},i}function Be(){function e(We){return()=>We}let t=We=>We.cluster,n=e(1),r=e(-1),o=e(100),i=e(.1),a=[0,0],s=[],u={},c=[],f=100,l=100,d={none:{x:0,y:0}},h=[],v,m="force",y=!0,E=.1;function g(We){if(!y)return g;v.tick(),ee();for(let tn=0,fr=s.length,mn,Vn=We*E;tn<fr;++tn)mn=s[tn],mn.vx+=(d[t(mn)].x-mn.x)*Vn,mn.vy+=(d[t(mn)].y-mn.y)*Vn}function b(){s&&_()}function _(){if(!s||!s.length)return;if(t(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const We=S();v=ss(We.nodes).force("x",Ze(f).strength(.1)).force("y",Ye(l).strength(.1)).force("collide",Me(tn=>tn.r).iterations(4)).force("charge",$s().strength(r)).force("links",D(We.nodes.length?We.links:[]).distance(o).strength(i)),h=v.nodes(),ee()}function S(){const We=[],tn=[],fr={};let mn=[],Vn={},$e=[];return Vn=V(s),$e=fe(c),mn=Object.keys(Vn),mn.forEach((ft,Mn)=>{const Ut=Vn[ft];We.push({id:ft,size:Ut.count,r:Math.sqrt(Ut.sumforceNodeSize/Math.PI)}),fr[ft]=Mn}),$e.forEach(ft=>{const Mn=ut(ft,"source"),Ut=ut(ft,"target"),Wn=fr[Mn],cn=fr[Ut];Wn!==void 0&&cn!==void 0&&tn.push({source:Wn,target:cn,count:ft.count})}),{nodes:We,links:tn}}function V(We){const tn={};return We.forEach(fr=>{const mn=t(fr);tn[mn]||(tn[mn]={count:0,sumforceNodeSize:0})}),We.forEach(fr=>{const mn=t(fr),Vn=n(fr),$e=tn[mn];$e.count=$e.count+1,$e.sumforceNodeSize=$e.sumforceNodeSize+Math.PI*(Vn*Vn)*1.3,tn[mn]=$e}),tn}function fe(We){const tn={},fr=[];return We.forEach(Vn=>{const $e=j(Vn);let ft=0;tn[$e]!==void 0&&(ft=tn[$e]),ft+=1,tn[$e]=ft}),Object.entries(tn).forEach(([Vn,$e])=>{const ft=Vn.split("~")[0],Mn=Vn.split("~")[1];ft!==void 0&&Mn!==void 0&&fr.push({source:ft,target:Mn,count:$e})}),fr}function ee(){return d={none:{x:0,y:0}},h.forEach(We=>{d[We.id]={x:We.x-a[0],y:We.y-a[1]}}),d}function j(We){const tn=ut(We,"source"),fr=ut(We,"target"),mn=t(u[tn]),Vn=t(u[fr]);return mn<=Vn?`${mn}~${Vn}`:`${Vn}~${mn}`}function q(We){u={},We.forEach(tn=>{u[tn.id]=tn})}function me(We){return arguments.length?(m=We,b(),g):m}function G(We){return arguments.length?typeof We=="string"?(t=tn=>tn[We],g):(t=We,g):t}function ye(We){return arguments.length?(y=We,g):y}function Ge(We){return arguments.length?(E=We,g):E}function Ue(We){return arguments.length?(f=We,g):f}function pt(We){return arguments.length?(l=We,g):l}function Ke(We){return arguments.length?(q(We||[]),s=We||[],g):s}function Et(We){return arguments.length?(c=We||[],b(),g):c}function dt(We){return arguments.length?(typeof We=="function"?n=We:n=e(+We),b(),g):n}function Bt(We){return arguments.length?(typeof We=="function"?r=We:r=e(+We),b(),g):r}function un(We){return arguments.length?(typeof We=="function"?o=We:o=e(+We),b(),g):o}function qn(We){return arguments.length?(typeof We=="function"?i=We:i=e(+We),b(),g):i}function ar(We){return arguments.length?(a=We,g):a}return g.initialize=We=>{s=We,b()},g.template=me,g.groupBy=G,g.enableGrouping=ye,g.strength=Ge,g.centerX=Ue,g.centerY=pt,g.nodes=Ke,g.links=Et,g.forceNodeSize=dt,g.nodeSize=g.forceNodeSize,g.forceCharge=Bt,g.forceLinkDistance=un,g.forceLinkStrength=qn,g.offset=ar,g.getFocis=ee,g}const tt={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},Je={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};class kt extends Yt{constructor(t){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,t&&this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(t){const n=this;n.nodes=t.nodes||[];const r=t.edges||[];n.edges=r.map(o=>{const i={},a=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(o).forEach(s=>{a.indexOf(s)>-1||(i[s]=o[s])}),i}),n.ticking=!1}execute(t){const n=this,r=n.nodes,o=n.edges;if(n.ticking)return;let i=n.forceSimulation;const a=n.alphaMin,s=n.alphaDecay,u=n.alpha;if(i){if(t){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(r),n.clusterForce.links(o)),i.nodes(r),o&&n.edgeForce)n.edgeForce.links(o);else if(o&&!n.edgeForce){const c=D().id(f=>f.id).links(o);n.edgeStrength&&c.strength(n.edgeStrength),n.linkDistance&&c.distance(n.linkDistance),n.edgeForce=c,i.force("link",c)}}n.preventOverlap&&n.overlapProcess(i),i.alpha(u).restart(),this.ticking=!0}else try{const c=$s();if(n.nodeStrength&&c.strength(n.nodeStrength),i=ss().nodes(r),n.clustering){const f=Be();f.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),o&&f.links(o),r&&f.nodes(r),f.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=f,i.force("group",f)}if(i.force("center",Xs(n.center[0],n.center[1])).force("charge",c).alpha(u).alphaDecay(s).alphaMin(a),n.preventOverlap&&n.overlapProcess(i),o){const f=D().id(l=>l.id).links(o);n.edgeStrength&&f.strength(n.edgeStrength),n.linkDistance&&f.distance(n.linkDistance),n.edgeForce=f,i.force("link",f)}if(n.workerEnabled&&!an()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)i.on("tick",()=>{n.tick()}).on("end",()=>{n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{i.stop();const f=Gt(i);for(let l=1;l<=f;l++)i.tick(),postMessage({nodes:r,currentTick:l,totalTicks:f,type:tt.TICK},void 0);n.ticking=!1}n.forceSimulation=i,n.ticking=!0}catch(c){n.ticking=!1,console.warn(c)}}overlapProcess(t){const n=this,r=n.nodeSize,o=n.nodeSpacing;let i,a;const s=n.collideStrength;if(_e(o)?a=()=>o:it(o)?a=o:a=()=>0,!r)i=u=>u.size?bt(u.size)?(u.size[0]>u.size[1]?u.size[0]:u.size[1])/2+a(u):Vt(u.size)?(u.size.width>u.size.height?u.size.width:u.size.height)/2+a(u):u.size/2+a(u):10+a(u);else if(it(r))i=u=>r(u)+a(u);else if(bt(r)){const c=(r[0]>r[1]?r[0]:r[1])/2;i=f=>c+a(f)}else if(_e(r)){const u=r/2;i=c=>u+a(c)}else i=()=>10;t.force("collisionForce",Me(i).strength(s))}updateCfg(t){const n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,t)}destroy(){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0}}function Gt(e){const t=e.alphaMin(),n=e.alphaTarget(),r=e.alpha(),o=Math.log((t-n)/(r-n))/Math.log(1-e.alphaDecay());return Math.ceil(o)}function an(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function fn(e,t,n,r){e.forEach((o,i)=>{e[i].children=[],e[i].parent=[]}),r?t.forEach(o=>{const i=ut(o,"source"),a=ut(o,"target");let s=0;i&&(s=n[i]);let u=0;a&&(u=n[a]);const c=e[s].children,f=e[u].parent;c.push(e[u].id),f.push(e[s].id)}):t.forEach(o=>{const i=ut(o,"source"),a=ut(o,"target");let s=0;i&&(s=n[i]);let u=0;a&&(u=n[a]);const c=e[s].children,f=e[u].children;c.push(e[u].id),f.push(e[s].id)})}function zn(e,t,n){const r=n.length;for(let o=0;o<r;o++){const i=ut(n[o],"source"),a=ut(n[o],"target");if(e.id===i&&t.id===a||t.id===i&&e.id===a)return!0}return!1}function ln(e,t){const n=e.degree,r=t.degree;return n<r?-1:n>r?1:0}class An extends Yt{constructor(t){super(),this.radius=null,this.nodeSize=void 0,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(t)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){var t;const n=this,r=n.nodes,o=n.edges,i=r.length;if(i===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);const a=n.center;if(i===1){r[0].x=a[0],r[0].y=a[1],n.onLayoutEnd&&n.onLayoutEnd();return}let{radius:s,startRadius:u,endRadius:c}=n;const{divisions:f,startAngle:l,endAngle:d,angleRatio:h,ordering:v,clockwise:m,nodeSpacing:y,nodeSize:E}=n,g=(d-l)/i,b={};r.forEach((ee,j)=>{b[ee.id]=j}),n.nodeMap=b;const _=Gn(r.length,b,o);if(n.degrees=_,y){const ee=er(10,y),j=er(10,E);let q=-1/0;r.forEach(G=>{const ye=j(G);q<ye&&(q=ye)});let me=0;r.forEach((G,ye)=>{ye===0?me+=q||10:me+=(ee(G)||0)+(q||10)}),s=me/(2*Math.PI)}else!s&&!u&&!c?s=n.height>n.width?n.width/2:n.height/2:!u&&c?u=c:u&&!c&&(c=u);const S=g*h;let V=[];v==="topology"?V=n.topologyOrdering():v==="topology-directed"?V=n.topologyOrdering(!0):v==="degree"?V=n.degreeOrdering():V=r;const fe=Math.ceil(i/f);for(let ee=0;ee<i;++ee){let j=s;!j&&u!==null&&c!==null&&(j=u+ee*(c-u)/(i-1)),j||(j=10+ee*100/(i-1));let q=l+ee%fe*S+2*Math.PI/f*Math.floor(ee/fe);m||(q=d-ee%fe*S-2*Math.PI/f*Math.floor(ee/fe)),V[ee].x=a[0]+Math.cos(q)*j,V[ee].y=a[1]+Math.sin(q)*j,V[ee].weight=_[ee].all}return(t=n.onLayoutEnd)===null||t===void 0||t.call(n),{nodes:V,edges:this.edges}}topologyOrdering(t=!1){const n=this,r=n.degrees,o=n.edges,i=n.nodes,a=Qn(i),s=n.nodeMap,u=[a[0]],c=[i[0]],f=[],l=i.length;f[0]=!0,fn(a,o,s,t);let d=0;return a.forEach((h,v)=>{if(v!==0)if((v===l-1||r[v].all!==r[v+1].all||zn(u[d],h,o))&&!f[v])u.push(h),c.push(i[s[h.id]]),f[v]=!0,d++;else{const m=u[d].children;let y=!1;for(let g=0;g<m.length;g++){const b=s[m[g]];if(r[b].all===r[v].all&&!f[b]){u.push(a[b]),c.push(i[s[a[b].id]]),f[b]=!0,y=!0;break}}let E=0;for(;!y&&(f[E]||(u.push(a[E]),c.push(i[s[a[E].id]]),f[E]=!0,y=!0),E++,E!==l););}}),c}degreeOrdering(){const t=this,n=t.nodes,r=[],o=t.degrees;return n.forEach((i,a)=>{i.degree=o[a].all,r.push(i)}),r.sort(ln),r}getType(){return"circular"}}const Ht=(e,t)=>{if(e!=="next"&&e!=="prev")return t},Ft=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};class yn{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return Ft(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&Ft(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let r=n.prev;for(;r!==n;)t.push(JSON.stringify(r,Ht)),r=r==null?void 0:r.prev;return`[${t.join(", ")}]`}}var Sn;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(Sn||(Sn={}));function dn(e,t){var n=e.get(t)||0;e.set(t,n+1)}function sn(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function Xn(e,t,n,r){var o=String(t),i=String(n);if(!e&&o>i){var a=o;o=i,i=a}return o+Sn.EDGE_KEY_DELIM+i+Sn.EDGE_KEY_DELIM+(r===void 0?Sn.DEFAULT_EDGE_NAME:r)}function Nn(e,t,n,r){var o=String(t),i=String(n),a={v:t,w:n};if(!e&&o>i){var s=a.v;a.v=a.w,a.w=s}return r!==void 0&&(a.name=r),a}function Jt(e,t){return Xn(e,t.v,t.w,t.name)}function hn(e){return typeof e=="function"}var Nt=function(t){return t.nodes().map(function(n){var r=t.node(n),o=t.parent(n),i={id:n,value:r,parent:o};return i.value===void 0&&delete i.value,i.parent===void 0&&delete i.parent,i})},en=function(t){return t.edges().map(function(n){var r=t.edge(n),o={v:n.v,w:n.w,value:r,name:n.name};return o.name===void 0&&delete o.name,o.value===void 0&&delete o.value,o})},$t=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Nt(t),edges:en(t),value:t.graph()};return n.value===void 0&&delete n.value,n},Zt=function(t){var n=new no(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(r){n.setNode(r.id,r.value),r.parent&&n.setParent(r.id,r.parent)}),t.edges.forEach(function(r){n.setEdge(r.v,r.w,r.value,r.name)}),n};function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?br(Object(n),!0).forEach(function(r){Ot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _r(e,t,n){return t&&mo(e.prototype,t),n&&mo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Pr={compound:!1,multigraph:!1,directed:!0},no=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Or(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Sn.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(o){return t.label=o,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(o){return hn(o)?t.defaultNodeLabelFn=o:t.defaultNodeLabelFn=function(){return o},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(o){return t.nodesLabelMap.get(o)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(o){var i;return!(!((i=t.inEdgesMap.get(o))===null||i===void 0)&&i.size)})},this.sinks=function(){return t.nodes().filter(function(o){var i;return!(!((i=t.outEdgesMap.get(o))===null||i===void 0)&&i.size)})},this.setNodes=function(o,i){return o.map(function(a){return t.setNode(a,i)}),t},this.hasNode=function(o){return t.nodesLabelMap.has(o)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(o){if(t.isCompound()){var i,a=(i=t.parentMap)===null||i===void 0?void 0:i.get(o);if(a!==t.GRAPH_NODE)return a}},this.removeFromParentsChildList=function(o){var i=t.parentMap.get(o);t.childrenMap.get(i).delete(o)},this.setParent=function(o,i){var a,s;t.checkCompound();for(var u=i===void 0?t.GRAPH_NODE:i,c=t.parent(u);c;){if(o===c)throw new Error("Setting "+i+" as parent of "+o+" would create a cycle");c=t.parent(c)}i&&t.setNode(i),t.setNode(o),t.removeFromParentsChildList(o),(a=t.parentMap)===null||a===void 0||a.set(o,u);var f=t.childrenMap.get(u);return f.set(o,!0),(s=t.childrenMap)===null||s===void 0||s.set(u,f),t},this.children=function(o){var i=o===void 0?t.GRAPH_NODE:o;if(t.isCompound()){var a,s=(a=t.childrenMap)===null||a===void 0?void 0:a.get(i);return s?Array.from(s.keys()):void 0}if(i===t.GRAPH_NODE)return t.nodes();if(o&&t.hasNode(o))return[]},this.predecessors=function(o){var i=t.predecessorsMap.get(o);return i?Array.from(i.keys()):void 0},this.successors=function(o){var i=t.successorsMap.get(o);return i?Array.from(i.keys()):void 0},this.neighbors=function(o){var i;if(t.hasNode(o))return Array.from(new Set((i=t.predecessors(o))===null||i===void 0?void 0:i.concat(t.successors(o))))},this.isLeaf=function(o){var i;if(t.isDirected()){var a;return!(!((a=t.successors(o))===null||a===void 0)&&a.length)}return!(!((i=t.neighbors(o))===null||i===void 0)&&i.length)},this.filterNodes=function(o){var i=t.directed,a=t.multigraph,s=t.compound,u=new e({directed:i,multigraph:a,compound:s});if(u.setGraph(t.graph()),t.nodes().forEach(function(f){o(f)&&u.setNode(f,t.node(f))}),t.edges().forEach(function(f){u.hasNode(f.v)&&u.hasNode(f.w)&&u.setEdgeObj(f,t.edge(f))}),s){var c=function(l){for(var d=t.parent(l);d!==void 0&&!u.hasNode(d);)d=t.parent(d);return d};u.nodes().forEach(function(f){u.setParent(f,c(f))})}return u},this.setDefaultEdgeLabel=function(o){return hn(o)?t.defaultEdgeLabelFn=o:t.defaultEdgeLabelFn=function(){return o},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(o,i){return t.setEdge(o.v,o.w,i,o.name)},this.setPath=function(o,i){return o.reduce(function(a,s){return t.setEdge(a,s,i),s}),t},this.edgeFromArgs=function(o,i,a){return t.edge({v:o,w:i,name:a})},this.edge=function(o){return t.edgesLabelsMap.get(Jt(t.isDirected(),o))},this.hasEdge=function(o,i,a){return t.edgesLabelsMap.has(Jt(t.isDirected(),{v:o,w:i,name:a}))},this.removeEdgeObj=function(o){var i=o.v,a=o.w,s=o.name;return t.removeEdge(i,a,s)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(o,i){var a=t.inEdgesMap.get(o);if(a)return Array.from(a.values()).filter(function(s){return!i||s.v===i})},this.outEdges=function(o,i){var a=t.outEdgesMap.get(o);if(a)return Array.from(a.values()).filter(function(s){return!i||s.w===i})},this.nodeEdges=function(o,i){var a;if(t.hasNode(o))return(a=t.inEdges(o,i))===null||a===void 0?void 0:a.concat(t.outEdges(o,i))},this.toJSON=function(){return $t(t)},this.nodeInDegree=function(o){var i=t.inEdgesMap.get(o);return i?i.size:0},this.nodeOutDegree=function(o){var i=t.outEdgesMap.get(o);return i?i.size:0},this.nodeDegree=function(o){return t.nodeInDegree(o)+t.nodeOutDegree(o)},this.source=function(o){return o.v},this.target=function(o){return o.w};var r=xr(xr({},Pr),n);this.compound=r.compound,this.directed=r.directed,this.multigraph=r.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return _r(e,[{key:"setNode",value:function(n,r){var o=this.nodesLabelMap,i=this.defaultNodeLabelFn,a=this.isCompound,s=this.parentMap,u=this.childrenMap,c=this.inEdgesMap,f=this.outEdgesMap,l=this.predecessorsMap,d=this.successorsMap;if(o.has(n))return r!==void 0&&o.set(n,r),this;if(o.set(n,r||i(n)),a()){var h;s==null||s.set(n,this.GRAPH_NODE),u==null||u.set(n,new Map),u!=null&&u.has(this.GRAPH_NODE)||u==null||u.set(this.GRAPH_NODE,new Map),u==null||(h=u.get(this.GRAPH_NODE))===null||h===void 0||h.set(n,!0)}return[c,f,l,d].forEach(function(v){return v.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var r=this;if(this.hasNode(n)){var o=function(y){r.removeEdge(y.v,y.w,y.name)},i=this.inEdgesMap,a=this.outEdgesMap,s=this.predecessorsMap,u=this.successorsMap,c=this.nodesLabelMap;if(this.isCompound()){var f,l,d;this.removeFromParentsChildList(n),(f=this.parentMap)===null||f===void 0||f.delete(n),(l=this.children(n))===null||l===void 0||l.forEach(function(m){return r.setParent(m)}),(d=this.childrenMap)===null||d===void 0||d.delete(n)}var h=i.get(n),v=a.get(n);Array.from(h.values()).forEach(function(m){return o(m)}),Array.from(v.values()).forEach(function(m){return o(m)}),c.delete(n),i.delete(n),a.delete(n),s.delete(n),u.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,r,o,i){var a,s,u=Nn(this.isDirected(),n,r,i),c=Jt(this.isDirected(),u),f=u.v,l=u.w;if(this.edgesLabelsMap.has(c))return this.edgesLabelsMap.set(c,o),this;if(i!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(l),this.edgesLabelsMap.set(c,o||this.defaultEdgeLabelFn(f,l,i)),Object.freeze(u),this.edgesMap.set(c,u);var d=this.predecessorsMap.get(l),h=this.successorsMap.get(f);return dn(d,f),dn(h,l),(a=this.inEdgesMap.get(l))===null||a===void 0||a.set(c,u),(s=this.outEdgesMap.get(f))===null||s===void 0||s.set(c,u),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,r,o){var i=Xn(this.isDirected(),n,r,o),a=this.edgesMap.get(i);if(a){var s=Nn(this.isDirected(),n,r,o),u=s.v,c=s.w;this.edgesLabelsMap.delete(i),this.edgesMap.delete(i);var f=this.predecessorsMap.get(c),l=this.successorsMap.get(u);sn(f,u),sn(l,c),this.inEdgesMap.get(c).delete(i),this.outEdgesMap.get(u).delete(i),this.edgeCountNum-=1}return this}}]),e}();no.fromJSON=Zt;function Xt(e){"@babel/helpers - typeof";return Xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(e)}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e,t,n){return t&&vr(e.prototype,t),n&&vr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pr(){return typeof Reflect!="undefined"&&Reflect.get?pr=Reflect.get:pr=function(t,n,r){var o=ro(t,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(arguments.length<3?t:r):i.value}},pr.apply(this,arguments)}function ro(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Fr(e),e!==null););return e}function oo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Go(e,t)}function Go(e,t){return Go=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},Go(e,t)}function Io(e){var t=gn();return function(){var r=Fr(e),o;if(t){var i=Fr(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return Ao(this,o)}}function Ao(e,t){if(t&&(Xt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wr(e)}function Wr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Fr(e){return Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Fr(e)}var Zi=null,ju=function(t,n){var r=new Graph,o=new Map,i=new PriorityQueue,a;function s(f){var l=f.v===a?f.w:f.v,d=i.priority(l);if(d!==void 0){var h=n(f);h<d&&(o.set(l,a),i.decrease(l,h))}}if(t.nodeCount()===0)return r;t.nodes().forEach(function(f){i.add(f,Number.POSITIVE_INFINITY),r.setNode(f)}),i.decrease(t.nodes()[0],0);for(var u=!1;i.size()>0;){var c;if(a=i.removeMin(),o.has(a))r.setEdge(a,o.get(a));else{if(u)throw new Error("Input graph is not connected: "+t.graph());u=!0}(c=t.nodeEdges(a))===null||c===void 0||c.forEach(s)}return r},Jc=null,Yu=function e(t,n,r,o,i,a){o.includes(n)||(o.push(n),r||a.push(n),i(n).forEach(function(s){return e(t,s,r,o,i,a)}),r&&a.push(n))},Ra=function(t,n,r){var o=Array.isArray(n)?n:[n],i=function(c){return t.isDirected()?t.successors(c):t.neighbors(c)},a=[],s=[];return o.forEach(function(u){if(t.hasNode(u))Yu(t,u,r==="post",s,i,a);else throw new Error("Graph does not have node: "+u)}),a},Da=Ra,ji=function(t,n){return Da(t,n,"post")},us=ji,qo=function(t,n){return Da(t,n,"pre")},Ws=qo;function go(e,t){return Fo(e)||Ca(e,t)||Po(e,t)||Yi()}function Yi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Po(e,t){if(e){if(typeof e=="string")return Hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hr(e,t)}}function Hr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ca(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,a,s;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));o=!0);}catch(u){i=!0,s=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function Fo(e){if(Array.isArray(e))return e}function Ku(e){return e instanceof Graph}function Qo(e){if(e.isMultigraph())return!1;for(var t=e.edges(),n=new Map,r=0;r<t.length;r++){var o=t[r];if(o.v===o.w)return!1;var i=[o.v,o.w].sort(),a=go(i,2),s=a[0],u=a[1],c="".concat(s,"-").concat(u);if(n.has(c))return!1;n.set(c,!0)}return!0}function Ki(e){return e.nodes().length===0}function qu(e){for(var t=e.edges(),n=0;n<t.length;n++){var r=t[n];if(r.v===r.w)return!0}return!1}var Hs=function(t,n){if(!isSimpleGraph(t)||!isSimpleGraph(n)||!containAllSameNodes(t,n)||containSameEdges(t,n))return!1;var r=t.nodeCount();return t.edgeCount()+n.edgeCount()===r*(r-1)/2},Zs=function(t){if(!isSimpleGraph(t))return null;for(var n=t.nodeCount(),r=new Graph({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),o=t.nodes(),i=0;i<n;i++){var a=o[i];r.setNode(a,t.node(a));for(var s=i+1;s<n;s++){var u=o[s];t.hasEdge(a,u)||r.setEdge(a,u)}}return r};class js extends yn{}class Ys extends no{}const Qu=()=>1,Ks=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const r=qs(e,t||Qu);return(n=Cn(r.graph,r.buckets,r.zeroIdx).map(i=>e.outEdges(i.v,i.w)))===null||n===void 0?void 0:n.flat()},Cn=(e,t,n)=>{let r=[];const o=t[t.length-1],i=t[0];let a;for(;e.nodeCount();){for(;a=i.dequeue();)La(e,t,n,a);for(;a=o.dequeue();)La(e,t,n,a);if(e.nodeCount()){for(let s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){r=r.concat(La(e,t,n,a,!0));break}}}return r},La=(e,t,n,r,o)=>{var i,a;const s=[];return(i=e.inEdges(r.v))===null||i===void 0||i.forEach(u=>{const c=e.edge(u),f=e.node(u.v);o&&s.push({v:u.v,w:u.w,in:0,out:0}),f.out===void 0&&(f.out=0),f.out-=c,Sr(t,n,f)}),(a=e.outEdges(r.v))===null||a===void 0||a.forEach(u=>{const c=e.edge(u),f=u.w,l=e.node(f);l.in===void 0&&(l.in=0),l.in-=c,Sr(t,n,l)}),e.removeNode(r.v),o?s:void 0},qs=(e,t)=>{const n=new Ys;let r=0,o=0;e.nodes().forEach(u=>{n.setNode(u,{v:u,in:0,out:0})}),e.edges().forEach(u=>{const c=n.edge(u)||0,f=(t==null?void 0:t(u))||1,l=c+f;n.setEdge(u.v,u.w,l),o=Math.max(o,n.node(u.v).out+=f),r=Math.max(r,n.node(u.w).in+=f)});const i=[],a=o+r+3;for(let u=0;u<a;u++)i.push(new js);const s=r+1;return n.nodes().forEach(u=>{Sr(i,s,n.node(u))}),{buckets:i,zeroIdx:s,graph:n}},Sr=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)};var Jo=Ks;const Oa=e=>{const t=r=>o=>{var i;return((i=r.edge(o))===null||i===void 0?void 0:i.weight)||1},n=e.graph().acyclicer==="greedy"?Jo(e,t(e)):zo(e);n==null||n.forEach(r=>{const o=e.edge(r);e.removeEdgeObj(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,`rev-${Math.random()}`)})},zo=e=>{const t=[],n={},r={},o=i=>{var a;r[i]||(r[i]=!0,n[i]=!0,(a=e.outEdges(i))===null||a===void 0||a.forEach(s=>{n[s.w]?t.push(s):o(s.w)}),delete n[i])};return e.nodes().forEach(o),t};var xi={run:Oa,undo:e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}};class Hn extends no{}const No=(e,t)=>Number(e)-Number(t),ei=(e,t,n,r)=>{let o;do o=`${r}${Math.random()}`;while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o},_i=e=>{const t=new Hn().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const r=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},Ma=e=>{const t=new Hn({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var r;!((r=e.children(n))===null||r===void 0)&&r.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},cs=(e,t)=>e==null?void 0:e.reduce((n,r,o)=>(n[r]=t[o],n),{}),fs=e=>{const t={};return e.nodes().forEach(n=>{var r;const o={};(r=e.outEdges(n))===null||r===void 0||r.forEach(i=>{var a;o[i.w]=(o[i.w]||0)+(((a=e.edge(i))===null||a===void 0?void 0:a.weight)||0)}),t[n]=o}),t},ef=e=>{const t=e.nodes(),n=t.map(r=>{var o;const i={};return(o=e.inEdges(r))===null||o===void 0||o.forEach(a=>{i[a.v]=(i[a.v]||0)+e.edge(a).weight}),i});return cs(t,n)},Js=(e,t)=>{const n=Number(e.x),r=Number(e.y),o=Number(t.x)-n,i=Number(t.y)-r;let a=Number(e.width)/2,s=Number(e.height)/2;if(!o&&!i)return{x:0,y:0};let u,c;return Math.abs(i)*a>Math.abs(o)*s?(i<0&&(s=-s),u=s*o/i,c=s):(o<0&&(a=-a),u=a,c=a*i/o),{x:n+u,y:r+c}},Bo=e=>{const t=[],n=Uo(e)+1;for(let r=0;r<n;r++)t.push([]);e.nodes().forEach(r=>{const o=e.node(r);if(!o)return;const i=o.rank;i!==void 0&&t[i]&&t[i].push(r)});for(let r=0;r<n;r++)t[r]=t[r].sort((o,i)=>{var a,s;return No((a=e.node(o))===null||a===void 0?void 0:a.order,(s=e.node(i))===null||s===void 0?void 0:s.order)});return t},qi=e=>{const t=e.nodes().filter(r=>{var o;return((o=e.node(r))===null||o===void 0?void 0:o.rank)!==void 0}).map(r=>e.node(r).rank),n=Math.min(...t);e.nodes().forEach(r=>{const o=e.node(r);o.hasOwnProperty("rank")&&n!==1/0&&(o.rank-=n)})},ls=e=>{const t=e.nodes(),n=t.filter(s=>{var u;return((u=e.node(s))===null||u===void 0?void 0:u.rank)!==void 0}).map(s=>e.node(s).rank),r=Math.min(...n),o=[];t.forEach(s=>{var u;const c=(((u=e.node(s))===null||u===void 0?void 0:u.rank)||0)-r;o[c]||(o[c]=[]),o[c].push(s)});let i=0;const a=e.graph().nodeRankFactor||0;for(let s=0;s<o.length;s++){const u=o[s];u===void 0?s%a!==0&&(i-=1):i&&(u==null||u.forEach(c=>{const f=e.node(c);f&&(f.rank=f.rank||0,f.rank+=i)}))}},ka=(e,t,n,r)=>{const o={width:0,height:0};return _e(n)&&_e(r)&&(o.rank=n,o.order=r),ei(e,"border",o,t)},Uo=e=>{let t;return e.nodes().forEach(n=>{var r;const o=(r=e.node(n))===null||r===void 0?void 0:r.rank;o!==void 0&&(t===void 0||o>t)&&(t=o)}),t||(t=0),t},ti=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(r=>{t(r)?n.lhs.push(r):n.rhs.push(r)}),n},wi=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},Si=(e,t)=>t(),Ti=(e,t)=>e.reduce((n,r)=>{const o=t(n),i=t(r);return o>i?r:n}),ds=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>pn(e,t))},pn=(e,t)=>{let n=t.v,r=e.node(n).rank;const o=t.w,i=e.node(o).rank,a=t.name,s=e.edge(t),u=s.labelRank;if(i===r+1)return;e.removeEdgeObj(t);const c=e.graph();let f,l,d;for(d=0,++r;r<i;++d,++r)s.points=[],l={edgeLabel:s,width:0,height:0,edgeObj:t,rank:r},f=ei(e,"edge",l,"_d"),r===u&&(l.width=s.width,l.height=s.height,l.dummy="edge-label",l.labelpos=s.labelpos),e.setEdge(n,f,{weight:s.weight},a),d===0&&(c.dummyChains||(c.dummyChains=[]),c.dummyChains.push(f)),n=f;e.setEdge(n,o,{weight:s.weight},a)};var En={run:ds,undo:e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let r=e.node(n);const o=r.edgeLabel;let i;r.edgeObj&&e.setEdgeObj(r.edgeObj,o);let a=n;for(;r.dummy;)i=e.successors(a)[0],e.removeNode(a),o.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),a=i,r=e.node(a)})}};const Rn=e=>{var t;const n={},r=o=>{var i;const a=e.node(o);if(!a)return 0;if(n[o])return a.rank;n[o]=!0;let s;return(i=e.outEdges(o))===null||i===void 0||i.forEach(u=>{const c=r(u.w),f=e.edge(u).minlen,l=c-f;l&&(s===void 0||l<s)&&(s=l)}),s||(s=0),a.rank=s,s};(t=e.sources())===null||t===void 0||t.forEach(o=>r(o))},Zr=e=>{var t;const n={};let r;const o=s=>{var u;const c=e.node(s);if(!c)return 0;if(n[s])return c.rank;n[s]=!0;let f;return(u=e.outEdges(s))===null||u===void 0||u.forEach(l=>{const d=o(l.w),h=e.edge(l).minlen,v=d-h;v&&(f===void 0||v<f)&&(f=v)}),f||(f=0),(r===void 0||f<r)&&(r=f),c.rank=f,f};(t=e.sources())===null||t===void 0||t.forEach(s=>{e.node(s)&&o(s)}),r===void 0&&(r=0);const i={},a=(s,u)=>{var c;const f=e.node(s),l=isNaN(f.layer)?u:f.layer;(f.rank===void 0||f.rank<l)&&(f.rank=l),!i[s]&&(i[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.map(d=>{a(d.w,l+e.edge(d).minlen)}))};e.nodes().forEach(s=>{const u=e.node(s);u&&(isNaN(u.layer)?u.rank-=r:a(s,u.layer))})},Zn=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen;var Ii={longestPath:Rn,longestPathWithLayer:Zr,slack:Zn};const mr=e=>{const t=new Hn({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});let o,i;for(;Qi(t,e)<r;)o=eu(t,e),i=t.hasNode(o.v)?Zn(e,o):-Zn(e,o),tu(t,e,i);return t},Qi=(e,t)=>{const n=r=>{t.nodeEdges(r).forEach(o=>{const i=o.v,a=r===i?o.w:i;!e.hasNode(a)&&!Zn(t,o)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})};return e.nodes().forEach(n),e.nodeCount()},Ro=e=>{const t=new Hn({directed:!1}),n=e.nodes()[0],r=e.nodes().filter(a=>!!e.node(a)).length;t.setNode(n,{});let o,i;for(;Ji(t,e)<r;)o=eu(t,e),i=t.hasNode(o.v)?Zn(e,o):-Zn(e,o),tu(t,e,i);return t},Ji=(e,t)=>{const n=r=>{var o;(o=t.nodeEdges(r))===null||o===void 0||o.forEach(i=>{const a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&(t.node(s).layer!==void 0||!Zn(t,i))&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})};return e.nodes().forEach(n),e.nodeCount()},eu=(e,t)=>Ti(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Zn(t,n):1/0),tu=(e,t,n)=>{e.nodes().forEach(r=>{t.node(r).rank||(t.node(r).rank=0),t.node(r).rank+=n})};var tf={feasibleTree:mr,feasibleTreeWithLayer:Ro};const{preorder:Ju,postorder:Nl}=re,Rl=e=>{const t=_i(e);Rn(t);const n=mr(t);nu(n),nf(n,t);let r,o;for(;r=rf(n);)o=nc(n,t,r),Cl(n,t,r,o)},nf=(e,t)=>{let n=Nl(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(r=>{ec(e,t,r)})},ec=(e,t,n)=>{const o=e.node(n).parent;e.edgeFromArgs(n,o).cutvalue=Dl(e,t,n)},Dl=(e,t,n)=>{var r;const i=e.node(n).parent;let a=!0,s=t.edgeFromArgs(n,i),u=0;return s||(a=!1,s=t.edgeFromArgs(i,n)),u=s.weight,(r=t.nodeEdges(n))===null||r===void 0||r.forEach(c=>{const f=c.v===n,l=f?c.w:c.v;if(l!==i){const d=f===a,h=t.edge(c).weight;if(u+=d?h:-h,Ll(e,n,l)){const v=e.edgeFromArgs(n,l).cutvalue;u+=d?-v:v}}}),u},nu=(e,t=e.nodes()[0])=>{tc(e,{},1,t)},tc=(e,t,n,r,o)=>{var i;const a=n;let s=n;const u=e.node(r);return t[r]=!0,(i=e.neighbors(r))===null||i===void 0||i.forEach(c=>{t[c]||(s=tc(e,t,s,c,r))}),u.low=a,u.lim=s++,o?u.parent=o:delete u.parent,s},rf=e=>e.edges().find(t=>e.edge(t).cutvalue<0),nc=(e,t,n)=>{let r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);const i=e.node(r),a=e.node(o);let s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);const c=t.edges().filter(f=>u===of(e,e.node(f.v),s)&&u!==of(e,e.node(f.w),s));return Ti(c,f=>Zn(t,f))},Cl=(e,t,n,r)=>{const o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),nu(e),nf(e,t),ru(e,t)},ru=(e,t)=>{const n=e.nodes().find(o=>{var i;return!(!((i=t.node(o))===null||i===void 0)&&i.parent)});let r=Ju(e,n);r=r==null?void 0:r.slice(1),r==null||r.forEach(o=>{const i=e.node(o).parent;let a=t.edgeFromArgs(o,i),s=!1;a||(a=t.edgeFromArgs(i,o),s=!0),t.node(o).rank=t.node(i).rank+(s?a.minlen:-a.minlen)})},Ll=(e,t,n)=>e.hasEdge(t,n),of=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim;var Ol=Rl;const Ml=e=>{switch(e.graph().ranker){case"network-simplex":Gl(e);break;case"tight-tree":af(e);break;case"longest-path":kl(e);break;default:af(e)}},kl=Rn,af=e=>{Zr(e),Ro(e)},Gl=e=>{Ol(e)};var sf=Ml;const hs=e=>{var t;const n={};let r=0;const o=i=>{var a;const s=r;(a=e.children(i))===null||a===void 0||a.forEach(o),n[i]={low:s,lim:r++}};return(t=e.children())===null||t===void 0||t.forEach(o),n},Pl=(e,t,n,r)=>{const o=[],i=[],a=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim);let u,c;u=n;do u=e.parent(u),o.push(u);while(u&&(t[u].low>a||s>t[u].lim));for(c=u,u=r;u&&u!==c;)i.push(u),u=e.parent(u);return{lca:c,path:o.concat(i.reverse())}};var yo=e=>{var t;const n=hs(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(r=>{var o,i;let a=r,s=e.node(a);const u=s.edgeObj;if(!u)return;const c=Pl(e,n,u.v,u.w),f=c.path,l=c.lca;let d=0,h=f[d],v=!0;for(;a!==u.w;){if(s=e.node(a),v){for(;h!==l&&((o=e.node(h))===null||o===void 0?void 0:o.maxRank)<s.rank;)d++,h=f[d];h===l&&(v=!1)}if(!v){for(;d<f.length-1&&((i=e.node(f[d+1]))===null||i===void 0?void 0:i.minRank)<=s.rank;)d++;h=f[d]}e.setParent(a,h),a=e.successors(a)[0]}})};const Ga=e=>{var t;const n=ei(e,"root",{},"_root"),r=uf(e);let o=Math.max(...Object.values(r));Math.abs(o)===1/0&&(o=1);const i=o-1,a=2*i+1;e.graph().nestingRoot=n,e.edges().forEach(u=>{e.edge(u).minlen*=a});const s=cf(e)+1;(t=e.children())===null||t===void 0||t.forEach(u=>{oc(e,n,a,s,i,r,u)}),e.graph().nodeRankFactor=a},oc=(e,t,n,r,o,i,a)=>{const s=e.children(a);if(!(s!=null&&s.length)){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}const u=ka(e,"_bt"),c=ka(e,"_bb"),f=e.node(a);e.setParent(u,a),f.borderTop=u,e.setParent(c,a),f.borderBottom=c,s==null||s.forEach(l=>{oc(e,t,n,r,o,i,l);const d=e.node(l),h=d.borderTop?d.borderTop:l,v=d.borderBottom?d.borderBottom:l,m=d.borderTop?r:2*r,y=h!==v?1:o-i[a]+1;e.setEdge(u,h,{minlen:y,weight:m,nestingEdge:!0}),e.setEdge(v,c,{minlen:y,weight:m,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:o+i[a]})},uf=e=>{var t;const n={},r=(o,i)=>{const a=e.children(o);a==null||a.forEach(s=>r(s,i+1)),n[o]=i};return(t=e.children())===null||t===void 0||t.forEach(o=>r(o,1)),n},cf=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t};var ic={run:Ga,cleanup:e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})}};const ff=e=>{var t;const n=r=>{const o=e.children(r),i=e.node(r);if(o!=null&&o.length&&o.forEach(a=>n(a)),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let a=i.minRank,s=i.maxRank+1;a<s;a+=1)lf(e,"borderLeft","_bl",r,i,a),lf(e,"borderRight","_br",r,i,a)}};(t=e.children())===null||t===void 0||t.forEach(r=>n(r))},lf=(e,t,n,r,o,i)=>{const a={rank:i,borderType:t,width:0,height:0},s=o[t][i-1],u=ei(e,"border",a,n);o[t][i]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})};var Pa=ff;const Rr=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&ac(e)},df=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&hf(e),(n==="lr"||n==="rl")&&(zl(e),ac(e))},ac=e=>{e.nodes().forEach(t=>{Ai(e.node(t))}),e.edges().forEach(t=>{Ai(e.edge(t))})},Ai=e=>{const t=e.width;e.width=e.height,e.height=t},hf=e=>{e.nodes().forEach(t=>{ou(e.node(t))}),e.edges().forEach(t=>{var n;const r=e.edge(t);(n=r.points)===null||n===void 0||n.forEach(o=>ou(o)),r.hasOwnProperty("y")&&ou(r)})},ou=e=>{e!=null&&e.y&&(e.y=-e.y)},zl=e=>{e.nodes().forEach(t=>{sc(e.node(t))}),e.edges().forEach(t=>{var n;const r=e.edge(t);(n=r.points)===null||n===void 0||n.forEach(o=>sc(o)),r.hasOwnProperty("x")&&sc(r)})},sc=e=>{const t=e.x;e.x=e.y,e.y=t};var vf={adjust:Rr,undo:df};function uc(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],r=1;r<t;r++)n=Math.max(n,e[r]);return n}var cc=e=>{const t={},n=e.nodes().filter(f=>{var l;return!(!((l=e.children(f))===null||l===void 0)&&l.length)}),r=n.map(f=>e.node(f).rank),o=uc(r),i=[];for(let f=0;f<o+1;f++)i.push([]);const a=f=>{var l;if(t.hasOwnProperty(f))return;t[f]=!0;const d=e.node(f);isNaN(d.rank)||i[d.rank].push(f),(l=e.successors(f))===null||l===void 0||l.forEach(h=>a(h))},s=n.sort((f,l)=>e.node(f).rank-e.node(l).rank),c=s.filter(f=>e.node(f).fixorder!==void 0).sort((f,l)=>e.node(f).fixorder-e.node(l).fixorder);return c==null||c.forEach(f=>{isNaN(e.node(f).rank)||i[e.node(f).rank].push(f),t[f]=!0}),s==null||s.forEach(a),i};const Bl=(e,t,n)=>{const r=cs(n,n.map((f,l)=>l)),i=t.map(f=>{var l;const d=(l=e.outEdges(f))===null||l===void 0?void 0:l.map(h=>({pos:r[h.w]||0,weight:e.edge(h).weight}));return d==null?void 0:d.sort((h,v)=>h.pos-v.pos)}).flat().filter(f=>f!==void 0);let a=1;for(;a<n.length;)a<<=1;const s=2*a-1;a-=1;const u=Array(s).fill(0,0,s);let c=0;return i==null||i.forEach(f=>{if(f){let l=f.pos+a;u[l]+=f.weight;let d=0;for(;l>0;)l%2&&(d+=u[l+1]),l=l-1>>1,u[l]+=f.weight;c+=f.weight*d}}),c};var fc=(e,t)=>{let n=0;for(let r=1;r<(t==null?void 0:t.length);r+=1)n+=Bl(e,t[r-1],t[r]);return n};const Vl=(e,t,n)=>{const r=iu(e),o=new Hn({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{var a;const s=e.node(i),u=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(o.setNode(i),o.setParent(i,u||r),(a=e[n](i))===null||a===void 0||a.forEach(c=>{const f=c.v===i?c.w:c.v,l=o.edgeFromArgs(f,i),d=l!==void 0?l.weight:0;o.setEdge(f,i,{weight:e.edge(c).weight+d})}),s.hasOwnProperty("minRank")&&o.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),o},iu=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t};var $l=Vl,au=(e,t,n)=>{const r={};let o;n==null||n.forEach(i=>{let a=e.parent(i),s,u;for(;a;){if(s=e.parent(a),s?(u=r[s],r[s]=a):(u=o,o=a),u&&u!==a){t.setEdge(u,a);return}a=s}})},mf=(e,t)=>t.map(n=>{const r=e.inEdges(n);if(!(r!=null&&r.length))return{v:n};{const o={sum:0,weight:0};return r==null||r.forEach(i=>{const a=e.edge(i),s=e.node(i.v);o.sum+=a.weight*s.order,o.weight+=a.weight}),{v:n,barycenter:o.sum/o.weight,weight:o.weight}}});const gf=(e,t)=>{var n,r,o;const i={};e==null||e.forEach((s,u)=>{i[s.v]={i:u,indegree:0,in:[],out:[],vs:[s.v]};const c=i[s.v];s.barycenter!==void 0&&(c.barycenter=s.barycenter,c.weight=s.weight)}),(n=t.edges())===null||n===void 0||n.forEach(s=>{const u=i[s.v],c=i[s.w];u!==void 0&&c!==void 0&&(c.indegree++,u.out.push(i[s.w]))});const a=(o=(r=Object.values(i)).filter)===null||o===void 0?void 0:o.call(r,s=>!s.indegree);return yf(a)},yf=e=>{var t,n;const r=[],o=u=>c=>{c.merged||(c.barycenter===void 0||u.barycenter===void 0||c.barycenter>=u.barycenter)&&Ef(u,c)},i=u=>c=>{c.in.push(u),--c.indegree===0&&e.push(c)};for(;e!=null&&e.length;){const u=e.pop();r.push(u),(t=u.in.reverse())===null||t===void 0||t.forEach(c=>o(u)(c)),(n=u.out)===null||n===void 0||n.forEach(c=>i(u)(c))}const a=r.filter(u=>!u.merged),s=["vs","i","barycenter","weight"];return a.map(u=>{const c={};return s==null||s.forEach(f=>{u[f]!==void 0&&(c[f]=u[f])}),c})},Ef=(e,t)=>{var n;let r=0,o=0;e.weight&&(r+=e.barycenter*e.weight,o+=e.weight),t.weight&&(r+=t.barycenter*t.weight,o+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=r/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0};var bf=gf;const xf=(e,t,n,r)=>{const o=ti(e,d=>{const h=d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder);return r?!h&&d.hasOwnProperty("barycenter"):h||d.hasOwnProperty("barycenter")}),i=o.lhs,a=o.rhs.sort((d,h)=>-d.i- -h.i),s=[];let u=0,c=0,f=0;i==null||i.sort(_f(!!t,!!n)),f=lc(s,a,f),i==null||i.forEach(d=>{var h;f+=(h=d.vs)===null||h===void 0?void 0:h.length,s.push(d.vs),u+=d.barycenter*d.weight,c+=d.weight,f=lc(s,a,f)});const l={vs:s.flat()};return c&&(l.barycenter=u/c,l.weight=c),l},lc=(e,t,n)=>{let r=n,o;for(;t.length&&(o=t[t.length-1]).i<=r;)t.pop(),e==null||e.push(o.vs),r++;return r},_f=(e,t)=>(n,r)=>{if(n.fixorder!==void 0&&r.fixorder!==void 0)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(t&&n.order!==void 0&&r.order!==void 0){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return e?r.i-n.i:n.i-r.i};var Do=xf;const dc=(e,t,n,r,o,i)=>{var a,s,u,c;let f=e.children(t);const l=e.node(t),d=l?l.borderLeft:void 0,h=l?l.borderRight:void 0,v={};d&&(f=f==null?void 0:f.filter(g=>g!==d&&g!==h));const m=mf(e,f||[]);m==null||m.forEach(g=>{var b;if(!((b=e.children(g.v))===null||b===void 0)&&b.length){const _=dc(e,g.v,n,r,i);v[g.v]=_,_.hasOwnProperty("barycenter")&&ni(g,_)}});const y=bf(m,n);Wl(y,v),(a=y.filter(g=>g.vs.length>0))===null||a===void 0||a.forEach(g=>{const b=e.node(g.vs[0]);b&&(g.fixorder=b.fixorder,g.order=b.order)});const E=Do(y,r,o,i);if(d&&(E.vs=[d,E.vs,h].flat(),!((s=e.predecessors(d))===null||s===void 0)&&s.length)){const g=e.node(((u=e.predecessors(d))===null||u===void 0?void 0:u[0])||""),b=e.node(((c=e.predecessors(h))===null||c===void 0?void 0:c[0])||"");E.hasOwnProperty("barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+g.order+b.order)/(E.weight+2),E.weight+=2}return E},Wl=(e,t)=>{e==null||e.forEach(n=>{var r;const o=(r=n.vs)===null||r===void 0?void 0:r.map(i=>t[i]?t[i].vs:i);n.vs=o.flat()})},ni=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)};var hc=dc;const ta=(e,t)=>{const n=Uo(e),r=[],o=[];for(let f=1;f<n+1;f++)r.push(f);for(let f=n-1;f>-1;f--)o.push(f);const i=vs(e,r,"inEdges"),a=vs(e,o,"outEdges");let s=cc(e);su(e,s);let u=Number.POSITIVE_INFINITY,c;for(let f=0,l=0;l<4;++f,++l){vc(f%2?i:a,f%4>=2,!1,t),s=Bo(e);const d=fc(e,s);d<u&&(l=0,c=Qn(s),u=d)}s=cc(e),su(e,s);for(let f=0,l=0;l<4;++f,++l){vc(f%2?i:a,f%4>=2,!0,t),s=Bo(e);const d=fc(e,s);d<u&&(l=0,c=Qn(s),u=d)}su(e,c)},vs=(e,t,n)=>t.map(r=>$l(e,r,n)),vc=(e,t,n,r)=>{const o=new Hn;e==null||e.forEach(i=>{var a;const s=i.graph().root,u=hc(i,s,o,t,n,r);for(let c=0;c<((a=u.vs)===null||a===void 0?void 0:a.length);c++){const f=i.node(u.vs[c]);f&&(f.order=c)}au(i,o,u.vs)})},su=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((r,o)=>{e.node(r).order=o})})};var wf=ta;function Sf(e){return Array.isArray(e)}var pc=function(e){if(Sf(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])};class Hl extends no{}const Tf=(e,t)=>{const n={},r=(o,i)=>{let a=0,s=0;const u=o.length,c=i==null?void 0:i[(i==null?void 0:i.length)-1];return i==null||i.forEach((f,l)=>{var d;const h=Zl(e,f),v=h?e.node(h).order:u;(h||f===c)&&((d=i.slice(s,l+1))===null||d===void 0||d.forEach(m=>{var y;(y=e.predecessors(m))===null||y===void 0||y.forEach(E=>{var g;const b=e.node(E),_=b.order;(_<a||v<_)&&!(b.dummy&&(!((g=e.node(m))===null||g===void 0)&&g.dummy))&&Af(n,E,m)})}),s=l+1,a=v)}),i};return t!=null&&t.length&&t.reduce(r),n},If=(e,t)=>{const n={};function r(s,u,c,f,l){var d,h;let v;for(let m=u;m<c;m++)v=s[m],!((d=e.node(v))===null||d===void 0)&&d.dummy&&((h=e.predecessors(v))===null||h===void 0||h.forEach(y=>{const E=e.node(y);E.dummy&&(E.order<f||E.order>l)&&Af(n,y,v)}))}function o(s){return JSON.stringify(s.slice(1))}function i(s,u){const c=o(s);u.get(c)||(r(...s),u.set(c,!0))}const a=(s,u)=>{let c=-1,f,l=0;const d=new Map;return u==null||u.forEach((h,v)=>{var m;if(((m=e.node(h))===null||m===void 0?void 0:m.dummy)==="border"){const y=e.predecessors(h)||[];y.length&&(f=e.node(y[0]).order,i([u,l,v,c,f],d),l=v,c=f)}i([u,l,u.length,f,s.length],d)}),u};return t!=null&&t.length&&t.reduce(a),n},Zl=(e,t)=>{var n,r;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(r=e.predecessors(t))===null||r===void 0?void 0:r.find(o=>e.node(o).dummy)},Af=(e,t,n)=>{let r=t,o=n;if(r>o){const a=r;r=o,o=a}let i=e[r];i||(e[r]=i={}),i[o]=!0},jl=(e,t,n)=>{let r=t,o=n;if(r>o){const i=t;r=o,o=i}return!!e[r]},Nf=(e,t,n,r)=>{const o={},i={},a={};return t==null||t.forEach(s=>{s==null||s.forEach((u,c)=>{o[u]=u,i[u]=u,a[u]=c})}),t==null||t.forEach(s=>{let u=-1;s==null||s.forEach(c=>{let f=r(c);if(f.length){f=f.sort((d,h)=>a[d]-a[h]);const l=(f.length-1)/2;for(let d=Math.floor(l),h=Math.ceil(l);d<=h;++d){const v=f[d];i[c]===c&&u<a[v]&&!jl(n,c,v)&&(i[v]=c,i[c]=o[c]=o[v],u=a[v])}}})}),{root:o,align:i}},mc=(e,t,n,r,o)=>{var i;const a={},s=Rf(e,t,n,o),u=o?"borderLeft":"borderRight",c=(d,h)=>{let v=s.nodes(),m=v.pop();const y={};for(;m;)y[m]?d(m):(y[m]=!0,v.push(m),v=v.concat(h(m))),m=v.pop()},f=d=>{a[d]=(s.inEdges(d)||[]).reduce((h,v)=>Math.max(h,(a[v.v]||0)+s.edge(v)),0)},l=d=>{const h=(s.outEdges(d)||[]).reduce((m,y)=>Math.min(m,(a[y.w]||0)-s.edge(y)),Number.POSITIVE_INFINITY),v=e.node(d);h!==Number.POSITIVE_INFINITY&&v.borderType!==u&&(a[d]=Math.max(a[d],h))};return c(f,s.predecessors.bind(s)),c(l,s.successors.bind(s)),(i=Object.values(r))===null||i===void 0||i.forEach(d=>{a[d]=a[n[d]]}),a},Rf=(e,t,n,r)=>{const o=new Hl,i=e.graph(),a=Yl(i.nodesep,i.edgesep,r);return t==null||t.forEach(s=>{let u;s==null||s.forEach(c=>{const f=n[c];if(o.setNode(f),u){const l=n[u],d=o.edgeFromArgs(l,f);o.setEdge(l,f,Math.max(a(e,c,u),d||0))}u=c})}),o},Df=(e,t)=>Ti(Object.values(t),n=>{var r;let o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return(r=Object.keys(n))===null||r===void 0||r.forEach(a=>{const s=n[a],u=Kl(e,a)/2;o=Math.max(s+u,o),i=Math.min(s-u,i)}),o-i});function Cf(e,t){const n=Object.values(t),r=pc(n),o=uc(n);["u","d"].forEach(i=>{["l","r"].forEach(a=>{const s=i+a,u=e[s];let c;if(u===t)return;const f=Object.values(u);c=a==="l"?r-pc(f):o-uc(f),c&&(e[s]={},Object.keys(u).forEach(l=>{e[s][l]=u[l]+c}))})})}const uu=(e,t)=>{const n={};return Object.keys(e.ul).forEach(r=>{if(t)n[r]=e[t.toLowerCase()][r];else{const o=Object.values(e).map(i=>i[r]);n[r]=(o[0]+o[1])/2}}),n},gc=e=>{const t=buildLayerMatrix(e),n=Object.assign(Tf(e,t),If(e,t)),r={};let o;["u","d"].forEach(a=>{o=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(s=>{s==="r"&&(o=o.map(l=>Object.values(l).reverse()));const u=(a==="u"?e.predecessors:e.successors).bind(e),c=Nf(e,o,n,u),f=mc(e,o,c.root,c.align,s==="r");s==="r"&&Object.keys(f).forEach(l=>{f[l]=-f[l]}),r[a+s]=f})});const i=Df(e,r);return Cf(r,i),uu(r,e.graph().align)},Yl=(e,t,n)=>(r,o,i)=>{const a=r.node(o),s=r.node(i);let u=0,c;if(u+=a.width/2,a.hasOwnProperty("labelpos"))switch((a.labelpos||"").toLowerCase()){case"l":c=-a.width/2;break;case"r":c=a.width/2;break}if(c&&(u+=n?c:-c),c=0,u+=(a.dummy?t:e)/2,u+=(s.dummy?t:e)/2,u+=s.width/2,s.labelpos)switch((s.labelpos||"").toLowerCase()){case"l":c=s.width/2;break;case"r":c=-s.width/2;break}return c&&(u+=n?c:-c),c=0,u},Kl=(e,t)=>e.node(t).width||0,ql=e=>{const t=Bo(e),n=e.graph().ranksep;let r=0;t==null||t.forEach(o=>{const i=o.map(s=>e.node(s).height),a=Math.max(...i,0);o==null||o.forEach(s=>{e.node(s).y=r+a/2}),r+=a+n})},Ql=e=>{const t=Bo(e),n=Object.assign(Tf(e,t),If(e,t)),r={};let o=[];["u","d"].forEach(a=>{o=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(s=>{s==="r"&&(o=o.map(l=>Object.values(l).reverse()));const u=(a==="u"?e.predecessors:e.successors).bind(e),c=Nf(e,o,n,u),f=mc(e,o,c.root,c.align,s==="r");s==="r"&&Object.keys(f).forEach(l=>f[l]=-f[l]),r[a+s]=f})});const i=Df(e,r);return i&&Cf(r,i),uu(r,e.graph().align)};var Lf=e=>{var t;const n=Ma(e);ql(n);const r=Ql(n);(t=Object.keys(r))===null||t===void 0||t.forEach(o=>{n.node(o).x=r[o]})},Jl=(e,t)=>{const r=e.nodes().filter(a=>{var s;return!(!((s=e.children(a))===null||s===void 0)&&s.length)}).map(a=>e.node(a).rank),o=Math.max(...r),i=[];for(let a=0;a<o+1;a++)i[a]=[];t==null||t.forEach(a=>{const s=e.node(a);!s||s!=null&&s.dummy||isNaN(s.rank)||(s.fixorder=i[s.rank].length,i[s.rank].push(a))})};const ed=(e,t)=>{const n=t&&t.debugTiming?wi:Si;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{nd(e,t.prevGraph)});const r=n("  buildLayoutGraph",()=>sd(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{ud(r)});try{n("  runLayout",()=>{td(r,n,t)})}catch(o){if(o.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,o);return}throw o}n("  updateInputGraph",()=>{Fa(e,r)})})},td=(e,t,n)=>{t("    removeSelfEdges",()=>{Ua(e)}),t("    acyclic",()=>{xi.run(e)}),t("    nestingGraph.run",()=>{ic.run(e)}),t("    rank",()=>{sf(Ma(e))}),t("    injectEdgeLabelProxies",()=>{cd(e)}),t("    removeEmptyRanks",()=>{ls(e)}),t("    nestingGraph.cleanup",()=>{ic.cleanup(e)}),t("    normalizeRanks",()=>{qi(e)}),t("    assignRankMinMax",()=>{ps(e)}),t("    removeEdgeLabelProxies",()=>{fd(e)}),t("    normalize.run",()=>{En.run(e)}),t("    parentDummyChains",()=>{yo(e)}),t("    addBorderSegments",()=>{Pa(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{Jl(e,n.nodeOrder)}),t("    order",()=>{wf(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{Mf(e)}),t("    adjustCoordinateSystem",()=>{vf.adjust(e)}),t("    position",()=>{Lf(e)}),t("    positionSelfEdges",()=>{Va(e)}),t("    removeBorderNodes",()=>{dd(e)}),t("    normalize.undo",()=>{En.undo(e)}),t("    fixupEdgeLabelCoords",()=>{za(e)}),t("    undoCoordinateSystem",()=>{vf.undo(e)}),t("    translateGraph",()=>{fu(e)}),t("    assignNodeIntersects",()=>{ld(e)}),t("    reversePoints",()=>{Ba(e)}),t("    acyclic.undo",()=>{xi.undo(e)})},nd=(e,t)=>{e.nodes().forEach(n=>{const r=e.node(n),o=t.node(n);o!==void 0?(r.fixorder=o._order,delete o._order):delete r.fixorder})},Fa=(e,t)=>{e.nodes().forEach(n=>{var r;const o=e.node(n);if(o){const i=t.node(n);o.x=i.x,o.y=i.y,o._order=i.order,o._rank=i.rank,!((r=t.children(n))===null||r===void 0)&&r.length&&(o.width=i.width,o.height=i.height)}}),e.edges().forEach(n=>{const r=e.edge(n),o=t.edge(n);r.points=o?o.points:[],o&&o.hasOwnProperty("x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},rd=["nodesep","edgesep","ranksep","marginx","marginy"],od={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},cu=["acyclicer","ranker","rankdir","align"],yc=["width","height","layer","fixorder"],id={width:0,height:0},Of=["minlen","weight","width","height","labeloffset"],ad={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ec=["labelpos"],sd=e=>{const t=new Hn({multigraph:!0,compound:!0}),n=gs(e.graph()),r={};return cu==null||cu.forEach(o=>{n[o]!==void 0&&(r[o]=n[o])}),t.setGraph(Object.assign({},od,ms(n,rd),r)),e.nodes().forEach(o=>{const i=gs(e.node(o)),a=Object.assign(Object.assign({},id),i),s=ms(a,yc);t.setNode(o,s),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{const i=gs(e.edge(o)),a={};Ec==null||Ec.forEach(s=>{i[s]!==void 0&&(a[s]=i[s])}),t.setEdgeObj(o,Object.assign({},ad,ms(i,Of),a))}),t},ud=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const r=e.node(n);isNaN(r.layer)||r.layer||(r.layer=0)}),e.edges().forEach(n=>{var r;const o=e.edge(n);o.minlen*=2,((r=o.labelpos)===null||r===void 0?void 0:r.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})},cd=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const r=e.node(t.v),o=e.node(t.w),i={e:t,rank:(o.rank-r.rank)/2+r.rank};ei(e,"edge-proxy",i,"_ep")}})},ps=e=>{let t=0;e.nodes().forEach(n=>{var r,o;const i=e.node(n);i.borderTop&&(i.minRank=(r=e.node(i.borderTop))===null||r===void 0?void 0:r.rank,i.maxRank=(o=e.node(i.borderBottom))===null||o===void 0?void 0:o.rank,t=Math.max(t,i.maxRank||-1/0))}),e.graph().maxRank=t},fd=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},fu=e=>{let t,n=0,r,o=0;const i=e.graph(),a=i.marginx||0,s=i.marginy||0,u=c=>{if(!c)return;const f=c.x,l=c.y,d=c.width,h=c.height;!isNaN(f)&&!isNaN(d)&&(t===void 0&&(t=f-d/2),t=Math.min(t,f-d/2),n=Math.max(n,f+d/2)),!isNaN(l)&&!isNaN(h)&&(r===void 0&&(r=l-h/2),r=Math.min(r,l-h/2),o=Math.max(o,l+h/2))};e.nodes().forEach(c=>{u(e.node(c))}),e.edges().forEach(c=>{const f=e.edge(c);f!=null&&f.hasOwnProperty("x")&&u(f)}),t-=a,r-=s,e.nodes().forEach(c=>{const f=e.node(c);f&&(f.x-=t,f.y-=r)}),e.edges().forEach(c=>{var f;const l=e.edge(c);(f=l.points)===null||f===void 0||f.forEach(d=>{d.x-=t,d.y-=r}),l.hasOwnProperty("x")&&(l.x-=t),l.hasOwnProperty("y")&&(l.y-=r)}),i.width=n-t+a,i.height=o-r+s},ld=e=>{e.edges().forEach(t=>{const n=e.edge(t),r=e.node(t.v),o=e.node(t.w);let i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=o,a=r),n.points.unshift(Js(r,i)),n.points.push(Js(o,a))})},za=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},Ba=e=>{e.edges().forEach(t=>{var n;const r=e.edge(t);r.reversed&&((n=r.points)===null||n===void 0||n.reverse())})},dd=e=>{e.nodes().forEach(t=>{var n,r,o;if(!((n=e.children(t))===null||n===void 0)&&n.length){const i=e.node(t),a=e.node(i.borderTop),s=e.node(i.borderBottom),u=e.node(i.borderLeft[((r=i.borderLeft)===null||r===void 0?void 0:r.length)-1]),c=e.node(i.borderRight[((o=i.borderRight)===null||o===void 0?void 0:o.length)-1]);i.width=Math.abs((c==null?void 0:c.x)-(u==null?void 0:u.x))||10,i.height=Math.abs((s==null?void 0:s.y)-(a==null?void 0:a.y))||10,i.x=((u==null?void 0:u.x)||0)+i.width/2,i.y=((a==null?void 0:a.y)||0)+i.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},Ua=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},Mf=e=>{const t=Bo(e);t==null||t.forEach(n=>{let r=0;n==null||n.forEach((o,i)=>{var a;const s=e.node(o);s.order=i+r,(a=s.selfEdges)===null||a===void 0||a.forEach(u=>{ei(e,"selfedge",{width:u.label.width,height:u.label.height,rank:s.rank,order:i+ ++r,e:u.e,label:u.label},"_se")}),delete s.selfEdges})})},Va=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const r=e.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,s=r.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{y:i,x:o+a},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})},ms=(e,t)=>{const n={};return t==null||t.forEach(r=>{e[r]!==void 0&&(n[r]=+e[r])}),n},gs=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t};var bc=ed,xc={layout:bc,util:{time:wi,notime:Si}};class ys extends Yt{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const r=this,{nodes:o}=r,i=o.find(a=>a.id===n);return i?i.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,r,o;const i=this,{nodes:a,nodeSize:s,rankdir:u,combos:c,begin:f,radial:l,comboEdges:d=[],vedges:h=[]}=i;if(!a)return;const v=i.edges||[],m=new Hn({multigraph:!0,compound:!0});i.nodeMap={};const y={};a.forEach(G=>{i.nodeMap[G.id]=G,G.comboId&&(y[G.comboId]=y[G.comboId]||[],y[G.comboId].push(G.id))});let E=[];const g={};!((t=i.nodeOrder)===null||t===void 0)&&t.length?(i.nodeOrder.forEach(G=>{g[G]=!0,E.push(i.nodeMap[G])}),a.forEach(G=>{g[G.id]||E.push(G)})):E=a;let b;s?bt(s)?b=()=>s:b=()=>[s,s]:b=G=>G.size?bt(G.size)?G.size:Vt(G.size)?[G.size.width||40,G.size.height||40]:[G.size,G.size]:[40,40];const _=Ar(i.ranksep,50,i.ranksepFunc),S=Ar(i.nodesep,50,i.nodesepFunc);let V=S,fe=_;(u==="LR"||u==="RL")&&(V=_,fe=S),m.setDefaultEdgeLabel(()=>({})),m.setGraph(i);const ee={};this.sortByCombo&&c&&c.forEach(G=>{if(ee[G.id]=G,G.collapsed){const ye=b(G),Ge=fe(G),Ue=V(G),pt=ye[0]+2*Ue,Ke=ye[1]+2*Ge;m.setNode(G.id,{width:pt,height:Ke})}G.parentId&&(ee[G.parentId]||m.setNode(G.parentId,{}),m.setParent(G.id,G.parentId))}),E.filter(G=>G.layout!==!1).forEach(G=>{const ye=b(G),Ge=fe(G),Ue=V(G),pt=ye[0]+2*Ue,Ke=ye[1]+2*Ge,Et=G.layer;_e(Et)?m.setNode(G.id,{width:pt,height:Ke,layer:Et}):m.setNode(G.id,{width:pt,height:Ke}),this.sortByCombo&&G.comboId&&(ee[G.comboId]||(ee[G.comboId]={id:G.comboId},m.setNode(G.comboId,{})),m.setParent(G.id,G.comboId))}),v.forEach(G=>{const ye=ut(G,"source"),Ge=ut(G,"target");this.layoutNode(ye)&&this.layoutNode(Ge)&&m.setEdge(ye,Ge,{weight:G.weight||1})}),(n=d==null?void 0:d.concat(h||[]))===null||n===void 0||n.forEach(G=>{var ye,Ge;const{source:Ue,target:pt}=G,Ke=!((ye=ee[Ue])===null||ye===void 0)&&ye.collapsed?[Ue]:y[Ue]||[Ue],Et=!((Ge=ee[pt])===null||Ge===void 0)&&Ge.collapsed?[pt]:y[pt]||[pt];Ke.forEach(dt=>{Et.forEach(Bt=>{m.setEdge(dt,Bt,{weight:G.weight||1})})})});let j;!((r=i.preset)===null||r===void 0)&&r.nodes&&(j=new Hn({multigraph:!0,compound:!0}),i.preset.nodes.forEach(G=>{j==null||j.setNode(G.id,G)})),xc.layout(m,{prevGraph:j,edgeLabelSpace:i.edgeLabelSpace,keepNodeOrder:!!i.nodeOrder,nodeOrder:i.nodeOrder});const q=[0,0];if(f){let G=1/0,ye=1/0;m.nodes().forEach(Ge=>{const Ue=m.node(Ge);G>Ue.x&&(G=Ue.x),ye>Ue.y&&(ye=Ue.y)}),m.edges().forEach(Ge=>{var Ue;(Ue=m.edge(Ge).points)===null||Ue===void 0||Ue.forEach(Ke=>{G>Ke.x&&(G=Ke.x),ye>Ke.y&&(ye=Ke.y)})}),q[0]=f[0]-G,q[1]=f[1]-ye}const me=u==="LR"||u==="RL";if(l){const{focusNode:G,ranksep:ye,getRadialPos:Ge}=this,Ue=on(G)?G:G==null?void 0:G.id,pt=Ue?(o=m.node(Ue))===null||o===void 0?void 0:o._rank:0,Ke=[],Et=me?"y":"x",dt=me?"height":"width";let Bt=1/0,un=-1/0;m.nodes().forEach($e=>{const ft=m.node($e);if(!i.nodeMap[$e])return;const Mn=S(i.nodeMap[$e]);if(pt===0)Ke[ft._rank]||(Ke[ft._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ke[ft._rank].nodes.push($e),Ke[ft._rank].totalWidth+=Mn*2+ft[dt],Ke[ft._rank].maxSize<Math.max(ft.width,ft.height)&&(Ke[ft._rank].maxSize=Math.max(ft.width,ft.height));else{const cn=ft._rank-pt;if(cn===0)Ke[cn]||(Ke[cn]={nodes:[],totalWidth:0,maxSize:-1/0}),Ke[cn].nodes.push($e),Ke[cn].totalWidth+=Mn*2+ft[dt],Ke[cn].maxSize<Math.max(ft.width,ft.height)&&(Ke[cn].maxSize=Math.max(ft.width,ft.height));else{const kn=Math.abs(cn);Ke[kn]||(Ke[kn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ke[kn].totalWidth+=Mn*2+ft[dt],Ke[kn].maxSize<Math.max(ft.width,ft.height)&&(Ke[kn].maxSize=Math.max(ft.width,ft.height)),cn<0?Ke[kn].left.push($e):Ke[kn].right.push($e)}}const Ut=ft[Et]-ft[dt]/2-Mn,Wn=ft[Et]+ft[dt]/2+Mn;Ut<Bt&&(Bt=Ut),Wn>un&&(un=Wn)});let qn=ye||50;const ar={},We=(un-Bt)/.9,tn=[(Bt+un-We)*.5,(Bt+un+We)*.5],fr=($e,ft,Mn=-1/0,Ut=[0,1])=>{let Wn=Mn;return $e.forEach(cn=>{const kn=m.node(cn);ar[cn]=ft;const{x:Gr,y:Ir}=Ge(kn[Et],tn,We,ft,Ut);if(!i.nodeMap[cn])return;i.nodeMap[cn].x=Gr+q[0],i.nodeMap[cn].y=Ir+q[1],i.nodeMap[cn]._order=kn._order;const Qr=_(i.nodeMap[cn]);Wn<Qr&&(Wn=Qr)}),Wn};let mn=!0;const Vn=0;Ke.forEach($e=>{var ft,Mn,Ut,Wn,cn,kn,Gr;if(!(!((ft=$e==null?void 0:$e.nodes)===null||ft===void 0)&&ft.length)&&!(!((Mn=$e==null?void 0:$e.left)===null||Mn===void 0)&&Mn.length)&&!(!((Ut=$e==null?void 0:$e.right)===null||Ut===void 0)&&Ut.length))return;if(mn&&$e.nodes.length===1){const Qr=$e.nodes[0];if(!i.nodeMap[Qr])return;i.nodeMap[Qr].x=q[0],i.nodeMap[Qr].y=q[1],ar[$e.nodes[0]]=0,qn=_(i.nodeMap[Qr]),mn=!1;return}qn=Math.max(qn,$e.totalWidth/(2*Math.PI));let Ir=-1/0;if(pt===0||!((Wn=$e.nodes)===null||Wn===void 0)&&Wn.length)Ir=fr($e.nodes,qn,Ir,[0,1]);else{const Qr=((cn=$e.left)===null||cn===void 0?void 0:cn.length)/(((kn=$e.left)===null||kn===void 0?void 0:kn.length)+((Gr=$e.right)===null||Gr===void 0?void 0:Gr.length));Ir=fr($e.left,qn,Ir,[0,Qr]),Ir=fr($e.right,qn,Ir,[Qr+.05,1])}qn+=Ir,mn=!1,Vn-$e.maxSize}),m.edges().forEach($e=>{var ft,Mn,Ut;const Wn=m.edge($e),cn=v.findIndex(kn=>{const Gr=ut(kn,"source"),Ir=ut(kn,"target");return Gr===$e.v&&Ir===$e.w});if(!(cn<=-1)&&i.edgeLabelSpace&&i.controlPoints&&v[cn].type!=="loop"){const kn=Et==="x"?"y":"x",Gr=(ft=Wn==null?void 0:Wn.points)===null||ft===void 0?void 0:ft.slice(1,Wn.points.length-1),Ir=[],Qr=(Mn=m.node($e.v))===null||Mn===void 0?void 0:Mn[kn],Xc=Qr-((Ut=m.node($e.w))===null||Ut===void 0?void 0:Ut[kn]),Jr=ar[$e.v],Cs=Jr-ar[$e.w];Gr==null||Gr.forEach(Ls=>{const Lu=(Ls[kn]-Qr)/Xc*Cs+Jr,es=Ge(Ls[Et],tn,We,Lu);Ir.push({x:es.x+q[0],y:es.y+q[1]})}),v[cn].controlPoints=Ir}})}else{const G=new Set,Ge=u==="BT"||u==="RL"?(Et,dt)=>dt-Et:(Et,dt)=>Et-dt;m.nodes().forEach(Et=>{const dt=m.node(Et);if(!dt)return;let Bt=this.nodeMap[Et];Bt||(Bt=c==null?void 0:c.find(un=>un.id===Et)),Bt&&(Bt.x=dt.x+q[0],Bt.y=dt.y+q[1],Bt._order=dt._order,G.add(me?Bt.x:Bt.y))});const Ue=Array.from(G).sort(Ge),pt=me?(Et,dt)=>Et.x!==dt.x:(Et,dt)=>Et.y!==dt.y,Ke=me?(Et,dt,Bt)=>{const un=Math.max(dt.y,Bt.y),qn=Math.min(dt.y,Bt.y);return Et.filter(ar=>ar.y<=un&&ar.y>=qn)}:(Et,dt,Bt)=>{const un=Math.max(dt.x,Bt.x),qn=Math.min(dt.x,Bt.x);return Et.filter(ar=>ar.x<=un&&ar.x>=qn)};m.edges().forEach(Et=>{var dt;const Bt=m.edge(Et),un=v.findIndex(qn=>{const ar=ut(qn,"source"),We=ut(qn,"target");return ar===Et.v&&We===Et.w});if(!(un<=-1)&&i.edgeLabelSpace&&i.controlPoints&&v[un].type!=="loop"){(dt=Bt==null?void 0:Bt.points)===null||dt===void 0||dt.forEach(We=>{We.x+=q[0],We.y+=q[1]});const qn=i.nodeMap[Et.v],ar=i.nodeMap[Et.w];v[un].controlPoints=lu(Bt==null?void 0:Bt.points,qn,ar,Ue,me,pt,Ke)}})}return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:a,edges:v}}getRadialPos(t,n,r,o,i=[0,1]){let a=(t-n[0])/r;a=a*(i[1]-i[0])+i[0];const s=a*2*Math.PI;return{x:Math.cos(s)*o,y:Math.sin(s)*o}}getType(){return"dagre"}}const lu=(e,t,n,r,o,i,a)=>{let s=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:u,y:c}=t,{x:f,y:l}=n;if(o&&(u=t.y,c=t.x,f=n.y,l=n.x),l!==c&&u!==f){const d=r.indexOf(c),h=r[d+1];if(h){const y=s[0],E=o?{x:(c+h)/2,y:(y==null?void 0:y.y)||f}:{x:(y==null?void 0:y.x)||f,y:(c+h)/2};(!y||i(y,E))&&s.unshift(E)}const v=r.indexOf(l),m=Math.abs(v-d);if(m===1)s=a(s,t,n),s.length||s.push(o?{x:(c+l)/2,y:u}:{x:u,y:(c+l)/2});else if(m>1){const y=r[v-1];if(y){const E=s[s.length-1],g=o?{x:(l+y)/2,y:(E==null?void 0:E.y)||f}:{x:(E==null?void 0:E.x)||u,y:(l+y)/2};(!E||i(E,g))&&s.push(g)}}}}return s},Es={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function bs(e={},t=Es){var n,r,o,i;const a=JSON.parse(JSON.stringify(t)),s=((n=e==null?void 0:e.graph)===null||n===void 0?void 0:n.meta)||{},u=((r=e==null?void 0:e.subScene)===null||r===void 0?void 0:r.meta)||{},c=((o=e==null?void 0:e.nodeSize)===null||o===void 0?void 0:o.meta)||{},f=((i=e==null?void 0:e.nodeSize)===null||i===void 0?void 0:i.node)||{},l=a.nodeSize.bridge;return{graph:{meta:Object.assign(a.graph.meta,s)},subScene:{meta:Object.assign(a.subScene.meta,u)},nodeSize:{meta:Object.assign(a.nodeSize.meta,c),node:Object.assign(a.nodeSize.node,f),bridge:l}}}function _c(e){return`\u25EC${e}\u25EC`}const na=_c("ROOT"),kf=_c("BRIDGE_GRAPH");var Mr,Ni,$a,xs;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(Mr||(Mr={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(Ni||(Ni={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}($a||($a={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(xs||(xs={}));var _s=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ne.g!="undefined"?ne.g:typeof self!="undefined"?self:{};function du(e,t){return e(t={exports:{}},t.exports),t.exports}var wc=function(){this.__data__=[],this.size=0},ra=function(e,t){return e===t||e!=e&&t!=t},ws=function(e,t){for(var n=e.length;n--;)if(ra(e[n][0],t))return n;return-1},Sc=Array.prototype.splice,Tc=function(e){var t=this.__data__,n=ws(t,e);return!(n<0)&&(n==t.length-1?t.pop():Sc.call(t,n,1),--this.size,!0)},Gf=function(e){var t=this.__data__,n=ws(t,e);return n<0?void 0:t[n][1]},Ic=function(e){return ws(this.__data__,e)>-1},Pf=function(e,t){var n=this.__data__,r=ws(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function oa(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}oa.prototype.clear=wc,oa.prototype.delete=Tc,oa.prototype.get=Gf,oa.prototype.has=Ic,oa.prototype.set=Pf;var Xa=oa,Ff=function(){this.__data__=new Xa,this.size=0},zf=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ac=function(e){return this.__data__.get(e)},Nc=function(e){return this.__data__.has(e)},Wa=typeof _s=="object"&&_s&&_s.Object===Object&&_s,Bf=typeof self=="object"&&self&&self.Object===Object&&self,io=Wa||Bf||Function("return this")(),gr=io.Symbol,Ha=Object.prototype,ia=Ha.hasOwnProperty,Ss=Ha.toString,ri=gr?gr.toStringTag:void 0,aa=function(e){var t=ia.call(e,ri),n=e[ri];try{e[ri]=void 0;var r=!0}catch(i){}var o=Ss.call(e);return r&&(t?e[ri]=n:delete e[ri]),o},sa=Object.prototype.toString,ua=function(e){return sa.call(e)},Ts=gr?gr.toStringTag:void 0,Co=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Ts&&Ts in Object(e)?aa(e):ua(e)},Dr=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},hu,ca=function(e){if(!Dr(e))return!1;var t=Co(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Ri=io["__core-js_shared__"],fa=(hu=/[^.]+$/.exec(Ri&&Ri.keys&&Ri.keys.IE_PROTO||""))?"Symbol(src)_1."+hu:"",hd=function(e){return!!fa&&fa in e},vd=Function.prototype.toString,Di=function(e){if(e!=null){try{return vd.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Uf=/^\[object .+?Constructor\]$/,Vf=Function.prototype,pd=Object.prototype,Za=Vf.toString,md=pd.hasOwnProperty,gd=RegExp("^"+Za.call(md).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yd=function(e){return!(!Dr(e)||hd(e))&&(ca(e)?gd:Uf).test(Di(e))},$f=function(e,t){return e==null?void 0:e[t]},la=function(e,t){var n=$f(e,t);return yd(n)?n:void 0},Is=la(io,"Map"),As=la(Object,"create"),Ed=function(){this.__data__=As?As(null):{},this.size=0},bd=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xd=Object.prototype.hasOwnProperty,_d=function(e){var t=this.__data__;if(As){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return xd.call(t,e)?t[e]:void 0},wd=Object.prototype.hasOwnProperty,Sd=function(e){var t=this.__data__;return As?t[e]!==void 0:wd.call(t,e)},Td=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=As&&t===void 0?"__lodash_hash_undefined__":t,this};function Ci(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ci.prototype.clear=Ed,Ci.prototype.delete=bd,Ci.prototype.get=_d,Ci.prototype.has=Sd,Ci.prototype.set=Td;var Ns=Ci,vu=function(){this.size=0,this.__data__={hash:new Ns,map:new(Is||Xa),string:new Ns}},pu=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},ja=function(e,t){var n=e.__data__;return pu(t)?n[typeof t=="string"?"string":"hash"]:n.map},mu=function(e){var t=ja(this,e).delete(e);return this.size-=t?1:0,t},gu=function(e){return ja(this,e).get(e)},yu=function(e){return ja(this,e).has(e)},Rc=function(e,t){var n=ja(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function oi(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}oi.prototype.clear=vu,oi.prototype.delete=mu,oi.prototype.get=gu,oi.prototype.has=yu,oi.prototype.set=Rc;var da=oi,Eu=function(e,t){var n=this.__data__;if(n instanceof Xa){var r=n.__data__;if(!Is||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new da(r)}return n.set(e,t),this.size=n.size,this};function Vo(e){var t=this.__data__=new Xa(e);this.size=t.size}Vo.prototype.clear=Ff,Vo.prototype.delete=zf,Vo.prototype.get=Ac,Vo.prototype.has=Nc,Vo.prototype.set=Eu;var $o=Vo,ha=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e},Li=function(){try{var e=la(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Oi=function(e,t,n){t=="__proto__"&&Li?Li(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Xf=Object.prototype.hasOwnProperty,Mi=function(e,t,n){var r=e[t];Xf.call(e,t)&&ra(r,n)&&(n!==void 0||t in e)||Oi(e,t,n)},Lo=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;u===void 0&&(u=e[s]),o?Oi(n,s,u):Mi(n,s,u)}return n},Wf=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},lo=function(e){return e!=null&&typeof e=="object"},Hf=function(e){return lo(e)&&Co(e)=="[object Arguments]"},Zf=Object.prototype,Id=Zf.hasOwnProperty,ki=Zf.propertyIsEnumerable,va=Hf(function(){return arguments}())?Hf:function(e){return lo(e)&&Id.call(e,"callee")&&!ki.call(e,"callee")},jn=Array.isArray,jf=function(){return!1},pa=du(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?io.Buffer:void 0,i=(o?o.isBuffer:void 0)||jf;e.exports=i}),Yf=/^(?:0|[1-9]\d*)$/,bu=function(e,t){var n=typeof e;return!!(t=t==null?9007199254740991:t)&&(n=="number"||n!="symbol"&&Yf.test(e))&&e>-1&&e%1==0&&e<t},Eo=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Ln={};Ln["[object Float32Array]"]=Ln["[object Float64Array]"]=Ln["[object Int8Array]"]=Ln["[object Int16Array]"]=Ln["[object Int32Array]"]=Ln["[object Uint8Array]"]=Ln["[object Uint8ClampedArray]"]=Ln["[object Uint16Array]"]=Ln["[object Uint32Array]"]=!0,Ln["[object Arguments]"]=Ln["[object Array]"]=Ln["[object ArrayBuffer]"]=Ln["[object Boolean]"]=Ln["[object DataView]"]=Ln["[object Date]"]=Ln["[object Error]"]=Ln["[object Function]"]=Ln["[object Map]"]=Ln["[object Number]"]=Ln["[object Object]"]=Ln["[object RegExp]"]=Ln["[object Set]"]=Ln["[object String]"]=Ln["[object WeakMap]"]=!1;var Ya=function(e){return lo(e)&&Eo(e.length)&&!!Ln[Co(e)]},Oo=function(e){return function(t){return e(t)}},ma=du(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&Wa.process,i=function(){try{var a=r&&r.require&&r.require("util").types;return a||o&&o.binding&&o.binding("util")}catch(s){}}();e.exports=i}),xu=ma&&ma.isTypedArray,Gi=xu?Oo(xu):Ya,Kf=Object.prototype.hasOwnProperty,zr=function(e,t){var n=jn(e),r=!n&&va(e),o=!n&&!r&&pa(e),i=!n&&!r&&!o&&Gi(e),a=n||r||o||i,s=a?Wf(e.length,String):[],u=s.length;for(var c in e)!t&&!Kf.call(e,c)||a&&(c=="length"||o&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||bu(c,u))||s.push(c);return s},Pi=Object.prototype,Bn=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||Pi)},jr=function(e,t){return function(n){return e(t(n))}},qf=jr(Object.keys,Object),Ad=Object.prototype.hasOwnProperty,Dc=function(e){if(!Bn(e))return qf(e);var t=[];for(var n in Object(e))Ad.call(e,n)&&n!="constructor"&&t.push(n);return t},ii=function(e){return e!=null&&Eo(e.length)&&!ca(e)},Fi=function(e){return ii(e)?zr(e):Dc(e)},Qf=function(e,t){return e&&Lo(t,Fi(t),e)},Nd=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},Rd=Object.prototype.hasOwnProperty,Dd=function(e){if(!Dr(e))return Nd(e);var t=Bn(e),n=[];for(var r in e)(r!="constructor"||!t&&Rd.call(e,r))&&n.push(r);return n},ga=function(e){return ii(e)?zr(e,!0):Dd(e)},Cd=function(e,t){return e&&Lo(t,ga(t),e)},Cc=du(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?io.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(a,s){if(s)return a.slice();var u=a.length,c=i?i(u):new a.constructor(u);return a.copy(c),c}}),Lc=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Oc=function(e,t){for(var n=-1,r=e==null?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i},Jf=function(){return[]},Ld=Object.prototype.propertyIsEnumerable,Mc=Object.getOwnPropertySymbols,kc=Mc?function(e){return e==null?[]:(e=Object(e),Oc(Mc(e),function(t){return Ld.call(e,t)}))}:Jf,p=function(e,t){return Lo(e,kc(e),t)},w=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},L=jr(Object.getPrototypeOf,Object),Y=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)w(t,kc(e)),e=L(e);return t}:Jf,ie=function(e,t){return Lo(e,Y(e),t)},Z=function(e,t,n){var r=t(e);return jn(e)?r:w(r,n(e))},Q=function(e){return Z(e,Fi,kc)},he=function(e){return Z(e,ga,Y)},ge=la(io,"DataView"),xe=la(io,"Promise"),de=la(io,"Set"),Te=la(io,"WeakMap"),Le=Di(ge),ve=Di(Is),Ae=Di(xe),X=Di(de),J=Di(Te),pe=Co;(ge&&pe(new ge(new ArrayBuffer(1)))!="[object DataView]"||Is&&pe(new Is)!="[object Map]"||xe&&pe(xe.resolve())!="[object Promise]"||de&&pe(new de)!="[object Set]"||Te&&pe(new Te)!="[object WeakMap]")&&(pe=function(e){var t=Co(e),n=t=="[object Object]"?e.constructor:void 0,r=n?Di(n):"";if(r)switch(r){case Le:return"[object DataView]";case ve:return"[object Map]";case Ae:return"[object Promise]";case X:return"[object Set]";case J:return"[object WeakMap]"}return t});var Oe=pe,ue=Object.prototype.hasOwnProperty,Fe=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ue.call(e,"index")&&(n.index=e.index,n.input=e.input),n},ce=io.Uint8Array,Ne=function(e){var t=new e.constructor(e.byteLength);return new ce(t).set(new ce(e)),t},le=function(e,t){var n=t?Ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},De=/\w*$/,Qe=function(e){var t=new e.constructor(e.source,De.exec(e));return t.lastIndex=e.lastIndex,t},lt=gr?gr.prototype:void 0,Ce=lt?lt.valueOf:void 0,Se=function(e){return Ce?Object(Ce.call(e)):{}},se=function(e,t){var n=t?Ne(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},st=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Ne(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return le(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return se(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Qe(e);case"[object Set]":return new r;case"[object Symbol]":return Se(e)}},gt=Object.create,Xe=function(){function e(){}return function(t){if(!Dr(t))return{};if(gt)return gt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Tt=function(e){return typeof e.constructor!="function"||Bn(e)?{}:Xe(L(e))},ht=function(e){return lo(e)&&Oe(e)=="[object Map]"},wt=ma&&ma.isMap,jt=wt?Oo(wt):ht,or=function(e){return lo(e)&&Oe(e)=="[object Set]"},sr=ma&&ma.isSet,Lt=sr?Oo(sr):or,Rt={};Rt["[object Arguments]"]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object DataView]"]=Rt["[object Boolean]"]=Rt["[object Date]"]=Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt["[object Object]"]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object Symbol]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Error]"]=Rt["[object Function]"]=Rt["[object WeakMap]"]=!1;var bn=function e(t,n,r,o,i,a){var s,u=1&n,c=2&n,f=4&n;if(r&&(s=i?r(t,o,i,a):r(t)),s!==void 0)return s;if(!Dr(t))return t;var l=jn(t);if(l){if(s=Fe(t),!u)return Lc(t,s)}else{var d=Oe(t),h=d=="[object Function]"||d=="[object GeneratorFunction]";if(pa(t))return Cc(t,u);if(d=="[object Object]"||d=="[object Arguments]"||h&&!i){if(s=c||h?{}:Tt(t),!u)return c?ie(t,Cd(s,t)):p(t,Qf(s,t))}else{if(!Rt[d])return i?t:{};s=st(t,d,u)}}a||(a=new $o);var v=a.get(t);if(v)return v;a.set(t,s),Lt(t)?t.forEach(function(y){s.add(e(y,n,r,y,t,a))}):jt(t)&&t.forEach(function(y,E){s.set(E,e(y,n,r,E,t,a))});var m=l?void 0:(f?c?he:Q:c?ga:Fi)(t);return ha(m||t,function(y,E){m&&(y=t[E=y]),Mi(s,E,e(y,n,r,E,t,a))}),s},ir=function(e){return bn(e,4)},Yn=function(e){return function(){return e}},Kn=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(n(i[u],u,i)===!1)break}return t}}(),ur=function(e,t){return e&&Kn(e,t,Fi)},cr=function(e,t){return function(n,r){if(n==null)return n;if(!ii(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}(ur),xn=function(e){return e},yt=function(e){return typeof e=="function"?e:xn},Tr=function(e,t){return(jn(e)?ha:cr)(e,yt(t))},Kt=Tr,nt=function(e,t){var n=[];return cr(e,function(r,o,i){t(r,o,i)&&n.push(r)}),n},Dt=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},zt=function(e){return this.__data__.has(e)};function On(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new da;++t<n;)this.add(e[t])}On.prototype.add=On.prototype.push=Dt,On.prototype.has=zt;var Mo=On,ya=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},C=function(e,t){return e.has(t)},K=function(e,t,n,r,o,i){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e),f=i.get(t);if(c&&f)return c==t&&f==e;var l=-1,d=!0,h=2&n?new Mo:void 0;for(i.set(e,t),i.set(t,e);++l<s;){var v=e[l],m=t[l];if(r)var y=a?r(m,v,l,t,e,i):r(v,m,l,e,t,i);if(y!==void 0){if(y)continue;d=!1;break}if(h){if(!ya(t,function(E,g){if(!C(h,g)&&(v===E||o(v,E,n,r,i)))return h.push(g)})){d=!1;break}}else if(v!==m&&!o(v,m,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d},H=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n},ze=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n},It=gr?gr.prototype:void 0,N=It?It.valueOf:void 0,x=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new ce(e),new ce(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ra(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=H;case"[object Set]":var u=1&r;if(s||(s=ze),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var f=K(s(e),s(t),r,o,i,a);return a.delete(e),f;case"[object Symbol]":if(N)return N.call(e)==N.call(t)}return!1},M=Object.prototype.hasOwnProperty,U=function(e,t,n,r,o,i){var a=1&n,s=Q(e),u=s.length;if(u!=Q(t).length&&!a)return!1;for(var c=u;c--;){var f=s[c];if(!(a?f in t:M.call(t,f)))return!1}var l=i.get(e),d=i.get(t);if(l&&d)return l==t&&d==e;var h=!0;i.set(e,t),i.set(t,e);for(var v=a;++c<u;){var m=e[f=s[c]],y=t[f];if(r)var E=a?r(y,m,f,t,e,i):r(m,y,f,e,t,i);if(!(E===void 0?m===y||o(m,y,n,r,i):E)){h=!1;break}v||(v=f=="constructor")}if(h&&!v){var g=e.constructor,b=t.constructor;g==b||!("constructor"in e)||!("constructor"in t)||typeof g=="function"&&g instanceof g&&typeof b=="function"&&b instanceof b||(h=!1)}return i.delete(e),i.delete(t),h},$=Object.prototype.hasOwnProperty,F=function(e,t,n,r,o,i){var a=jn(e),s=jn(t),u=a?"[object Array]":Oe(e),c=s?"[object Array]":Oe(t),f=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",l=(c=c=="[object Arguments]"?"[object Object]":c)=="[object Object]",d=u==c;if(d&&pa(e)){if(!pa(t))return!1;a=!0,f=!1}if(d&&!f)return i||(i=new $o),a||Gi(e)?K(e,t,n,r,o,i):x(e,t,u,n,r,o,i);if(!(1&n)){var h=f&&$.call(e,"__wrapped__"),v=l&&$.call(t,"__wrapped__");if(h||v){var m=h?e.value():e,y=v?t.value():t;return i||(i=new $o),o(m,y,n,r,i)}}return!!d&&(i||(i=new $o),U(e,t,n,r,o,i))},k=function e(t,n,r,o,i){return t===n||(t==null||n==null||!lo(t)&&!lo(n)?t!=t&&n!=n:F(t,n,r,o,e,i))},z=function(e,t,n,r){var o=n.length,i=o,a=!r;if(e==null)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var u=(s=n[o])[0],c=e[u],f=s[1];if(a&&s[2]){if(c===void 0&&!(u in e))return!1}else{var l=new $o;if(r)var d=r(c,f,u,e,t,l);if(!(d===void 0?k(f,c,3,r,l):d))return!1}}return!0},R=function(e){return e==e&&!Dr(e)},O=function(e){for(var t=Fi(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,R(o)]}return t},T=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},B=function(e){var t=O(e);return t.length==1&&t[0][2]?T(t[0][0],t[0][1]):function(n){return n===e||z(n,e,t)}},W=function(e){return typeof e=="symbol"||lo(e)&&Co(e)=="[object Symbol]"},oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ae=/^\w*$/,te=function(e,t){if(jn(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!W(e))||ae.test(e)||!oe.test(e)||t!=null&&e in Object(t)};function Ee(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Ee.Cache||da),n}Ee.Cache=da;var qe=Ee,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/\\(\\)?/g,rt=function(e){var t=qe(e,function(r){return n.size===500&&n.clear(),r}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(xt,function(n,r,o,i){t.push(o?i.replace(He,"$1"):r||n)}),t}),ct=function(e,t){for(var n=-1,r=e==null?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},Wt=gr?gr.prototype:void 0,Un=Wt?Wt.toString:void 0,Yr=function e(t){if(typeof t=="string")return t;if(jn(t))return ct(t,e)+"";if(W(t))return Un?Un.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},_u=function(e){return e==null?"":Yr(e)},Kr=function(e,t){return jn(e)?e:te(e,t)?[e]:rt(_u(e))},Ka=function(e){if(typeof e=="string"||W(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},ao=function(e,t){for(var n=0,r=(t=Kr(t,e)).length;e!=null&&n<r;)e=e[Ka(t[n++])];return n&&n==r?e:void 0},el=function(e,t,n){var r=e==null?void 0:ao(e,t);return r===void 0?n:r},mp=function(e,t){return e!=null&&t in Object(e)},mh=function(e,t,n){for(var r=-1,o=(t=Kr(t,e)).length,i=!1;++r<o;){var a=Ka(t[r]);if(!(i=e!=null&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=e==null?0:e.length)&&Eo(o)&&bu(a,o)&&(jn(e)||va(e))},gh=function(e,t){return e!=null&&mh(e,t,mp)},gp=function(e,t){return te(e)&&R(t)?T(Ka(e),t):function(n){var r=el(n,e);return r===void 0&&r===t?gh(n,e):k(t,r,3)}},yh=function(e){return function(t){return t==null?void 0:t[e]}},yp=function(e){return function(t){return ao(t,e)}},Ep=function(e){return te(e)?yh(Ka(e)):yp(e)},Ea=function(e){return typeof e=="function"?e:e==null?xn:typeof e=="object"?jn(e)?gp(e[0],e[1]):B(e):Ep(e)},Eh=function(e,t){return(jn(e)?Oc:nt)(e,Ea(t))},bp=Object.prototype.hasOwnProperty,xp=function(e,t){return e!=null&&bp.call(e,t)},bh=function(e,t){return e!=null&&mh(e,t,xp)},_p=Object.prototype.hasOwnProperty,wp=function(e){if(e==null)return!0;if(ii(e)&&(jn(e)||typeof e=="string"||typeof e.splice=="function"||pa(e)||Gi(e)||va(e)))return!e.length;var t=Oe(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Bn(e))return!Dc(e).length;for(var n in e)if(_p.call(e,n))return!1;return!0},xh=function(e){return e===void 0},_h=function(e,t){var n=-1,r=ii(e)?Array(e.length):[];return cr(e,function(o,i,a){r[++n]=t(o,i,a)}),r},wh=function(e,t){return(jn(e)?ct:_h)(e,Ea(t))},Sp=function(e,t,n,r){var o=-1,i=e==null?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n},Tp=function(e,t,n,r,o){return o(e,function(i,a,s){n=r?(r=!1,i):t(n,i,a,s)}),n},Sh=function(e,t,n){var r=jn(e)?Sp:Tp,o=arguments.length<3;return r(e,Ea(t),n,o,cr)},Ip=function(e){return typeof e=="string"||!jn(e)&&lo(e)&&Co(e)=="[object String]"},Ap=yh("length"),Np=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Rp=function(e){return Np.test(e)},Dp="[\\ud800-\\udfff]",Od="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Md="\\ud83c[\\udffb-\\udfff]",Th="[^\\ud800-\\udfff]",Ih="(?:\\ud83c[\\udde6-\\uddff]){2}",Ah="[\\ud800-\\udbff][\\udc00-\\udfff]",Nh="(?:"+Od+"|"+Md+")?",Cp="[\\ufe0e\\ufe0f]?"+Nh+("(?:\\u200d(?:"+[Th,Ih,Ah].join("|")+")[\\ufe0e\\ufe0f]?"+Nh+")*"),Lp="(?:"+[Th+Od+"?",Od,Ih,Ah,Dp].join("|")+")",Rh=RegExp(Md+"(?="+Md+")|"+Lp+Cp,"g"),Op=function(e){for(var t=Rh.lastIndex=0;Rh.test(e);)++t;return t},Mp=function(e){return Rp(e)?Op(e):Ap(e)},kp=function(e){if(e==null)return 0;if(ii(e))return Ip(e)?Mp(e):e.length;var t=Oe(e);return t=="[object Map]"||t=="[object Set]"?e.size:Dc(e).length},Gp=function(e,t,n){var r=jn(e),o=r||pa(e)||Gi(e);if(t=Ea(t),n==null){var i=e&&e.constructor;n=o?r?new i:[]:Dr(e)&&ca(i)?Xe(L(e)):{}}return(o?ha:ur)(e,function(a,s,u){return t(n,a,s,u)}),n},Dh=gr?gr.isConcatSpreadable:void 0,Pp=function(e){return jn(e)||va(e)||!!(Dh&&e&&e[Dh])},kd=function e(t,n,r,o,i){var a=-1,s=t.length;for(r||(r=Pp),i||(i=[]);++a<s;){var u=t[a];n>0&&r(u)?n>1?e(u,n-1,r,o,i):w(i,u):o||(i[i.length]=u)}return i},Fp=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Ch=Math.max,Lh=function(e,t,n){return t=Ch(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Ch(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),Fp(e,this,s)}},zp=Li?function(e,t){return Li(e,"toString",{configurable:!0,enumerable:!1,value:Yn(t),writable:!0})}:xn,Bp=Date.now,Oh=function(e){var t=0,n=0;return function(){var r=Bp(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(zp),tl=function(e,t){return Oh(Lh(e,t,xn),e+"")},Mh=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1},Up=function(e){return e!=e},Vp=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1},$p=function(e,t,n){return t==t?Vp(e,t,n):Mh(e,Up,n)},Xp=function(e,t){return!!(e!=null&&e.length)&&$p(e,t,0)>-1},Wp=function(e,t,n){for(var r=-1,o=e==null?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1},Hp=function(){},Zp=de&&1/ze(new de([,-0]))[1]==1/0?function(e){return new de(e)}:Hp,jp=function(e,t,n){var r=-1,o=Xp,i=e.length,a=!0,s=[],u=s;if(n)a=!1,o=Wp;else if(i>=200){var c=t?null:Zp(e);if(c)return ze(c);a=!1,o=C,u=new Mo}else u=t?[]:s;e:for(;++r<i;){var f=e[r],l=t?t(f):f;if(f=n||f!==0?f:0,a&&l==l){for(var d=u.length;d--;)if(u[d]===l)continue e;t&&u.push(l),s.push(f)}else o(u,l,n)||(u!==s&&u.push(l),s.push(f))}return s},kh=function(e){return lo(e)&&ii(e)},Yp=tl(function(e){return jp(kd(e,1,kh,!0))}),Kp=function(e,t){return ct(t,function(n){return e[n]})},nl,Gh=function(e){return e==null?[]:Kp(e,Fi(e))};try{nl={clone:ir,constant:Yn,each:Kt,filter:Eh,has:bh,isArray:jn,isEmpty:wp,isFunction:ca,isUndefined:xh,keys:Fi,map:wh,reduce:Sh,size:kp,transform:Gp,union:Yp,values:Gh}}catch(e){}nl||(nl=window._);var je=nl,Gd=qt;function qt(e){this._isDirected=!je.has(e,"directed")||e.directed,this._isMultigraph=!!je.has(e,"multigraph")&&e.multigraph,this._isCompound=!!je.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=je.constant(void 0),this._defaultEdgeLabelFn=je.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Ph(e,t){e[t]?e[t]++:e[t]=1}function Fh(e,t){--e[t]||delete e[t]}function Gc(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}return o+""+i+""+(je.isUndefined(r)?"\0":r)}function qp(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};return r&&(s.name=r),s}function Pd(e,t){return Gc(e,t.v,t.w,t.name)}qt.prototype._nodeCount=0,qt.prototype._edgeCount=0,qt.prototype.isDirected=function(){return this._isDirected},qt.prototype.isMultigraph=function(){return this._isMultigraph},qt.prototype.isCompound=function(){return this._isCompound},qt.prototype.setGraph=function(e){return this._label=e,this},qt.prototype.graph=function(){return this._label},qt.prototype.setDefaultNodeLabel=function(e){return je.isFunction(e)||(e=je.constant(e)),this._defaultNodeLabelFn=e,this},qt.prototype.nodeCount=function(){return this._nodeCount},qt.prototype.nodes=function(){return je.keys(this._nodes)},qt.prototype.sources=function(){var e=this;return je.filter(this.nodes(),function(t){return je.isEmpty(e._in[t])})},qt.prototype.sinks=function(){var e=this;return je.filter(this.nodes(),function(t){return je.isEmpty(e._out[t])})},qt.prototype.setNodes=function(e,t){var n=arguments,r=this;return je.each(e,function(o){n.length>1?r.setNode(o,t):r.setNode(o)}),this},qt.prototype.setNode=function(e,t){return je.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},qt.prototype.node=function(e){return this._nodes[e]},qt.prototype.hasNode=function(e){return je.has(this._nodes,e)},qt.prototype.removeNode=function(e){var t=this;if(je.has(this._nodes,e)){var n=function(r){t.removeEdge(t._edgeObjs[r])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],je.each(this.children(e),function(r){t.setParent(r)}),delete this._children[e]),je.each(je.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],je.each(je.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},qt.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(je.isUndefined(t))t="\0";else{for(var n=t+="";!je.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},qt.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},qt.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},qt.prototype.children=function(e){if(je.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return je.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},qt.prototype.predecessors=function(e){var t=this._preds[e];if(t)return je.keys(t)},qt.prototype.successors=function(e){var t=this._sucs[e];if(t)return je.keys(t)},qt.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return je.union(t,this.successors(e))},qt.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},qt.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;je.each(this._nodes,function(i,a){e(a)&&t.setNode(a,i)}),je.each(this._edgeObjs,function(i){t.hasNode(i.v)&&t.hasNode(i.w)&&t.setEdge(i,n.edge(i))});var r={};function o(i){var a=n.parent(i);return a===void 0||t.hasNode(a)?(r[i]=a,a):a in r?r[a]:o(a)}return this._isCompound&&je.each(t.nodes(),function(i){t.setParent(i,o(i))}),t},qt.prototype.setDefaultEdgeLabel=function(e){return je.isFunction(e)||(e=je.constant(e)),this._defaultEdgeLabelFn=e,this},qt.prototype.edgeCount=function(){return this._edgeCount},qt.prototype.edges=function(){return je.values(this._edgeObjs)},qt.prototype.setPath=function(e,t){var n=this,r=arguments;return je.reduce(e,function(o,i){return r.length>1?n.setEdge(o,i,t):n.setEdge(o,i),i}),this},qt.prototype.setEdge=function(){var e,t,n,r,o=!1,i=arguments[0];typeof i=="object"&&i!==null&&"v"in i?(e=i.v,t=i.w,n=i.name,arguments.length===2&&(r=arguments[1],o=!0)):(e=i,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),e=""+e,t=""+t,je.isUndefined(n)||(n=""+n);var a=Gc(this._isDirected,e,t,n);if(je.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=r),this;if(!je.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=o?r:this._defaultEdgeLabelFn(e,t,n);var s=qp(this._isDirected,e,t,n);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,Ph(this._preds[t],e),Ph(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this},qt.prototype.edge=function(e,t,n){var r=arguments.length===1?Pd(this._isDirected,arguments[0]):Gc(this._isDirected,e,t,n);return this._edgeLabels[r]},qt.prototype.hasEdge=function(e,t,n){var r=arguments.length===1?Pd(this._isDirected,arguments[0]):Gc(this._isDirected,e,t,n);return je.has(this._edgeLabels,r)},qt.prototype.removeEdge=function(e,t,n){var r=arguments.length===1?Pd(this._isDirected,arguments[0]):Gc(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Fh(this._preds[t],e),Fh(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},qt.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var r=je.values(n);return t?je.filter(r,function(o){return o.v===t}):r}},qt.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var r=je.values(n);return t?je.filter(r,function(o){return o.w===t}):r}},qt.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var zh={Graph:Gd,version:"2.1.8"},Qp={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Jp(e),edges:e0(e)};return je.isUndefined(e.graph())||(t.value=je.clone(e.graph())),t},read:function(e){var t=new Gd(e.options).setGraph(e.value);return je.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),je.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Jp(e){return je.map(e.nodes(),function(t){var n=e.node(t),r=e.parent(t),o={v:t};return je.isUndefined(n)||(o.value=n),je.isUndefined(r)||(o.parent=r),o})}function e0(e){return je.map(e.edges(),function(t){var n=e.edge(t),r={v:t.v,w:t.w};return je.isUndefined(t.name)||(r.name=t.name),je.isUndefined(n)||(r.value=n),r})}var t0=function(e){var t,n={},r=[];function o(i){je.has(n,i)||(n[i]=!0,t.push(i),je.each(e.successors(i),o),je.each(e.predecessors(i),o))}return je.each(e.nodes(),function(i){t=[],o(i),t.length&&r.push(t)}),r},Bh=Xo;function Xo(){this._arr=[],this._keyIndices={}}Xo.prototype.size=function(){return this._arr.length},Xo.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Xo.prototype.has=function(e){return je.has(this._keyIndices,e)},Xo.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Xo.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Xo.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!je.has(n,e)){var r=this._arr,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this._decrease(o),!0}return!1},Xo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Xo.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Xo.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},Xo.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;e!==0&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},Xo.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],i=n[t];n[e]=i,n[t]=o,r[i.key]=e,r[o.key]=t};var Uh=function(e,t,n,r){return function(o,i,a,s){var u,c,f={},l=new Bh,d=function(h){var v=h.v!==u?h.v:h.w,m=f[v],y=a(h),E=c.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+y);E<m.distance&&(m.distance=E,m.predecessor=u,l.decrease(v,E))};for(o.nodes().forEach(function(h){var v=h===i?0:Number.POSITIVE_INFINITY;f[h]={distance:v},l.add(h,v)});l.size()>0&&(u=l.removeMin(),(c=f[u]).distance!==Number.POSITIVE_INFINITY);)s(u).forEach(d);return f}(e,String(t),n||n0,r||function(o){return e.outEdges(o)})},n0=je.constant(1),r0=function(e,t,n){return je.transform(e.nodes(),function(r,o){r[o]=Uh(e,o,t,n)},{})},Vh=function(e){var t=0,n=[],r={},o=[];function i(a){var s=r[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(f){je.has(r,f)?r[f].onStack&&(s.lowlink=Math.min(s.lowlink,r[f].index)):(i(f),s.lowlink=Math.min(s.lowlink,r[f].lowlink))}),s.lowlink===s.index){var u,c=[];do u=n.pop(),r[u].onStack=!1,c.push(u);while(a!==u);o.push(c)}}return e.nodes().forEach(function(a){je.has(r,a)||i(a)}),o},o0=function(e){return je.filter(Vh(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},i0=function(e,t,n){return function(r,o,i){var a={},s=r.nodes();return s.forEach(function(u){a[u]={},a[u][u]={distance:0},s.forEach(function(c){u!==c&&(a[u][c]={distance:Number.POSITIVE_INFINITY})}),i(u).forEach(function(c){var f=c.v===u?c.w:c.v,l=o(c);a[u][f]={distance:l,predecessor:u}})}),s.forEach(function(u){var c=a[u];s.forEach(function(f){var l=a[f];s.forEach(function(d){var h=l[u],v=c[d],m=l[d],y=h.distance+v.distance;y<m.distance&&(m.distance=y,m.predecessor=v.predecessor)})})}),a}(e,t||a0,n||function(r){return e.outEdges(r)})},a0=je.constant(1),Fd=$h;function $h(e){var t={},n={},r=[];if(je.each(e.sinks(),function o(i){if(je.has(n,i))throw new rl;je.has(t,i)||(n[i]=!0,t[i]=!0,je.each(e.predecessors(i),o),delete n[i],r.push(i))}),je.size(t)!==e.nodeCount())throw new rl;return r}function rl(){}$h.CycleException=rl,rl.prototype=new Error;var Xh=function(e,t,n){je.isArray(t)||(t=[t]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return je.each(t,function(a){if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);Wh(e,a,n==="post",i,r,o)}),o};function Wh(e,t,n,r,o,i){je.has(r,t)||(r[t]=!0,n||i.push(t),je.each(o(t),function(a){Wh(e,a,n,r,o,i)}),n&&i.push(t))}var ol,s0={Graph:zh.Graph,json:Qp,alg:{components:t0,dijkstra:Uh,dijkstraAll:r0,findCycles:o0,floydWarshall:i0,isAcyclic:function(e){try{Fd(e)}catch(t){if(t instanceof Fd.CycleException)return!1;throw t}return!0},postorder:function(e,t){return Xh(e,t,"post")},preorder:function(e,t){return Xh(e,t,"pre")},prim:function(e,t){var n,r=new Gd,o={},i=new Bh;function a(u){var c=u.v===n?u.w:u.v,f=i.priority(c);if(f!==void 0){var l=t(u);l<f&&(o[c]=n,i.decrease(c,l))}}if(e.nodeCount()===0)return r;je.each(e.nodes(),function(u){i.add(u,Number.POSITIVE_INFINITY),r.setNode(u)}),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){if(n=i.removeMin(),je.has(o,n))r.setEdge(n,o[n]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(n).forEach(a)}return r},tarjan:Vh,topsort:Fd},version:zh.version};try{ol=s0}catch(e){}ol||(ol=window.graphlib);var ai=ol,u0=function(e){return bn(e,5)},Pc=function(e,t,n){if(!Dr(n))return!1;var r=typeof t;return!!(r=="number"?ii(n)&&bu(t,n.length):r=="string"&&t in n)&&ra(n[t],e)},Hh=Object.prototype,c0=Hh.hasOwnProperty,f0=tl(function(e,t){e=Object(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&Pc(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=ga(i),s=-1,u=a.length;++s<u;){var c=a[s],f=e[c];(f===void 0||ra(f,Hh[c])&&!c0.call(e,c))&&(e[c]=i[c])}return e}),l0=function(e){return function(t,n,r){var o=Object(t);if(!ii(t)){var i=Ea(n);t=Fi(t),n=function(s){return i(o[s],s,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}},d0=/^\s+|\s+$/g,h0=/^[-+]0x[0-9a-f]+$/i,v0=/^0b[01]+$/i,p0=/^0o[0-7]+$/i,m0=parseInt,g0=function(e){if(typeof e=="number")return e;if(W(e))return NaN;if(Dr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Dr(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(d0,"");var n=v0.test(e);return n||p0.test(e)?m0(e.slice(2),n?2:8):h0.test(e)?NaN:+e},il=function(e){return e?(e=g0(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},y0=function(e){var t=il(e),n=t%1;return t==t?n?t-n:t:0},E0=Math.max,b0=l0(function(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:y0(n);return o<0&&(o=E0(r+o,0)),Mh(e,Ea(t),o)}),Zh=function(e){return e!=null&&e.length?kd(e,1):[]},x0=function(e,t){return e==null?e:Kn(e,yt(t),ga)},_0=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},w0=function(e,t){var n={};return t=Ea(t),ur(e,function(r,o,i){Oi(n,o,t(r,o,i))}),n},zd=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(a!=null&&(s===void 0?a==a&&!W(a):n(a,s)))var s=a,u=i}return u},S0=function(e,t){return e>t},T0=function(e){return e&&e.length?zd(e,xn,S0):void 0},Bd=function(e,t,n){(n!==void 0&&!ra(e[t],n)||n===void 0&&!(t in e))&&Oi(e,t,n)},I0=Function.prototype,A0=Object.prototype,jh=I0.toString,N0=A0.hasOwnProperty,R0=jh.call(Object),D0=function(e){if(!lo(e)||Co(e)!="[object Object]")return!1;var t=L(e);if(t===null)return!0;var n=N0.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&jh.call(n)==R0},Ud=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},C0=function(e){return Lo(e,ga(e))},L0=function(e,t,n,r,o,i,a){var s=Ud(e,n),u=Ud(t,n),c=a.get(u);if(c)Bd(e,n,c);else{var f=i?i(s,u,n+"",e,t,a):void 0,l=f===void 0;if(l){var d=jn(u),h=!d&&pa(u),v=!d&&!h&&Gi(u);f=u,d||h||v?jn(s)?f=s:kh(s)?f=Lc(s):h?(l=!1,f=Cc(u,!0)):v?(l=!1,f=se(u,!0)):f=[]:D0(u)||va(u)?(f=s,va(s)?f=C0(s):Dr(s)&&!ca(s)||(f=Tt(u))):l=!1}l&&(a.set(u,f),o(f,u,r,i,a),a.delete(u)),Bd(e,n,f)}},O0=function e(t,n,r,o,i){t!==n&&Kn(n,function(a,s){if(i||(i=new $o),Dr(a))L0(t,n,s,r,e,o,i);else{var u=o?o(Ud(t,s),a,s+"",t,n,i):void 0;u===void 0&&(u=a),Bd(t,s,u)}},ga)},M0=function(e){return tl(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,a&&Pc(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}(function(e,t,n){O0(e,t,n)}),Yh=function(e,t){return e<t},k0=function(e){return e&&e.length?zd(e,xn,Yh):void 0},G0=function(e,t){return e&&e.length?zd(e,Ea(t),Yh):void 0},P0=function(){return io.Date.now()},F0=function(e,t,n,r){if(!Dr(e))return e;for(var o=-1,i=(t=Kr(t,e)).length,a=i-1,s=e;s!=null&&++o<i;){var u=Ka(t[o]),c=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(o!=a){var f=s[u];(c=r?r(f,u,s):void 0)===void 0&&(c=Dr(f)?f:bu(t[o+1])?[]:{})}Mi(s,u,c),s=s[u]}return e},z0=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=ao(e,a);n(s,a)&&F0(i,Kr(a,e),s)}return i},B0=function(e,t){return z0(e,t,function(n,r){return gh(e,r)})},U0=function(e){return Oh(Lh(e,void 0,Zh),e+"")}(function(e,t){return e==null?{}:B0(e,t)}),V0=Math.ceil,$0=Math.max,X0=function(e,t,n,r){for(var o=-1,i=$0(V0((t-e)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=e,e+=n;return a},W0=function(e){return function(t,n,r){return r&&typeof r!="number"&&Pc(t,n,r)&&(n=r=void 0),t=il(t),n===void 0?(n=t,t=0):n=il(n),r=r===void 0?t<n?1:-1:il(r),X0(t,n,r,e)}}(),H0=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Z0=function(e,t){if(e!==t){var n=e!==void 0,r=e===null,o=e==e,i=W(e),a=t!==void 0,s=t===null,u=t==t,c=W(t);if(!s&&!c&&!i&&e>t||i&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!o)return 1;if(!r&&!i&&!c&&e<t||c&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!u)return-1}return 0},j0=function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var u=Z0(o[r],i[r]);if(u)return r>=s?u:u*(n[r]=="desc"?-1:1)}return e.index-t.index},Y0=function(e,t,n){t=t.length?ct(t,function(i){return jn(i)?function(a){return ao(a,i.length===1?i[0]:i)}:i}):[xn];var r=-1;t=ct(t,Oo(Ea));var o=_h(e,function(i,a,s){return{criteria:ct(t,function(u){return u(i)}),index:++r,value:i}});return H0(o,function(i,a){return j0(i,a,n)})},K0=tl(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Pc(e,t[0],t[1])?t=[]:n>2&&Pc(t[0],t[1],t[2])&&(t=[t[0]]),Y0(e,kd(t,1),[])}),q0=0,Q0=function(e){var t=++q0;return _u(e)+t},J0=function(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var s=r<i?t[r]:void 0;n(a,e[r],s)}return a},al,em=function(e,t){return J0(e||[],t||[],Mi)};try{al={cloneDeep:u0,constant:Yn,defaults:f0,each:Kt,filter:Eh,find:b0,flatten:Zh,forEach:Tr,forIn:x0,has:bh,isUndefined:xh,last:_0,map:wh,mapValues:w0,max:T0,merge:M0,min:k0,minBy:G0,now:P0,pick:U0,range:W0,reduce:Sh,sortBy:K0,uniqueId:Q0,values:Gh,zipObject:em}}catch(e){}al||(al=window._);var P=al,tm=sl;function sl(){var e={};e._next=e._prev=e,this._sentinel=e}function Kh(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function nm(e,t){if(e!=="_next"&&e!=="_prev")return t}sl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Kh(t),t},sl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Kh(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},sl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,nm)),n=n._prev;return"["+e.join(", ")+"]"};var rm=ai.Graph,om=function(e,t){if(e.nodeCount()<=1)return[];var n=function(o,i){var a=new rm,s=0,u=0;P.forEach(o.nodes(),function(l){a.setNode(l,{v:l,in:0,out:0})}),P.forEach(o.edges(),function(l){var d=a.edge(l.v,l.w)||0,h=i(l),v=d+h;a.setEdge(l.v,l.w,v),u=Math.max(u,a.node(l.v).out+=h),s=Math.max(s,a.node(l.w).in+=h)});var c=P.range(u+s+3).map(function(){return new tm}),f=s+1;return P.forEach(a.nodes(),function(l){$d(c,f,a.node(l))}),{graph:a,buckets:c,zeroIdx:f}}(e,t||im),r=function(o,i,a){for(var s,u=[],c=i[i.length-1],f=i[0];o.nodeCount();){for(;s=f.dequeue();)Vd(o,i,a,s);for(;s=c.dequeue();)Vd(o,i,a,s);if(o.nodeCount()){for(var l=i.length-2;l>0;--l)if(s=i[l].dequeue()){u=u.concat(Vd(o,i,a,s,!0));break}}}return u}(n.graph,n.buckets,n.zeroIdx);return P.flatten(P.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)},im=P.constant(1);function Vd(e,t,n,r,o){var i=o?[]:void 0;return P.forEach(e.inEdges(r.v),function(a){var s=e.edge(a),u=e.node(a.v);o&&i.push({v:a.v,w:a.w}),u.out-=s,$d(t,n,u)}),P.forEach(e.outEdges(r.v),function(a){var s=e.edge(a),u=a.w,c=e.node(u);c.in-=s,$d(t,n,c)}),e.removeNode(r.v),i}function $d(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var qh={run:function(e){var t=e.graph().acyclicer==="greedy"?om(e,function(n){return function(r){return n.edge(r).weight}}(e)):function(n){var r=[],o={},i={};function a(s){P.has(i,s)||(i[s]=!0,o[s]=!0,P.forEach(n.outEdges(s),function(u){P.has(o,u.w)?r.push(u):a(u.w)}),delete o[s])}return P.forEach(n.nodes(),a),r}(e);P.forEach(t,function(n){var r=e.edge(n);e.removeEdge(n),r.forwardName=n.name,r.reversed=!0,e.setEdge(n.w,n.v,r,P.uniqueId("rev"))})},undo:function(e){P.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}},Qh=ai.Graph,Br={addDummyNode:Jh,simplify:function(e){var t=new Qh().setGraph(e.graph());return P.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),P.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},asNonCompoundGraph:function(e){var t=new Qh({multigraph:e.isMultigraph()}).setGraph(e.graph());return P.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),P.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t},successorWeights:function(e){var t=P.map(e.nodes(),function(n){var r={};return P.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return P.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=P.map(e.nodes(),function(n){var r={};return P.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return P.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,i=e.y,a=t.x-o,s=t.y-i,u=e.width/2,c=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a),{x:o+n,y:i+r}},buildLayerMatrix:function(e){var t=P.map(P.range(ev(e)+1),function(){return[]});return P.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;P.isUndefined(o)||(t[o][r.order]=n)}),t},normalizeRanks:function(e){var t=P.min(P.map(e.nodes(),function(n){return e.node(n).rank}));P.forEach(e.nodes(),function(n){var r=e.node(n);P.has(r,"rank")&&(r.rank-=t)})},removeEmptyRanks:function(e){var t=P.min(P.map(e.nodes(),function(i){return e.node(i).rank})),n=[];P.forEach(e.nodes(),function(i){var a=e.node(i).rank-t;n[a]||(n[a]=[]),n[a].push(i)});var r=0,o=e.graph().nodeRankFactor;P.forEach(n,function(i,a){P.isUndefined(i)&&a%o!=0?--r:r&&P.forEach(i,function(s){e.node(s).rank+=r})})},addBorderNode:function(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),Jh(e,"border",o,t)},maxRank:ev,partition:function(e,t){var n={lhs:[],rhs:[]};return P.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n},time:function(e,t){var n=P.now();try{return t()}finally{console.log(e+" time: "+(P.now()-n)+"ms")}},notime:function(e,t){return t()}};function Jh(e,t,n,r){var o;do o=P.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function ev(e){return P.max(P.map(e.nodes(),function(t){var n=e.node(t).rank;if(!P.isUndefined(n))return n}))}var tv={run:function(e){e.graph().dummyChains=[],P.forEach(e.edges(),function(t){(function(n,r){var o,i,a,s=r.v,u=n.node(s).rank,c=r.w,f=n.node(c).rank,l=r.name,d=n.edge(r),h=d.labelRank;if(f!==u+1){for(n.removeEdge(r),a=0,++u;u<f;++a,++u)d.points=[],i={width:0,height:0,edgeLabel:d,edgeObj:r,rank:u},o=Br.addDummyNode(n,"edge",i,"_d"),u===h&&(i.width=d.width,i.height=d.height,i.dummy="edge-label",i.labelpos=d.labelpos),n.setEdge(s,o,{weight:d.weight},l),a===0&&n.graph().dummyChains.push(o),s=o;n.setEdge(s,c,{weight:d.weight},l)}})(e,t)})},undo:function(e){P.forEach(e.graph().dummyChains,function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)})}},nv=function(e){var t={};P.forEach(e.sources(),function n(r){var o=e.node(r);if(P.has(t,r))return o.rank;t[r]=!0;var i=P.min(P.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return i!==Number.POSITIVE_INFINITY&&i!=null||(i=0),o.rank=i})},rv=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen},am=ai.Graph,ul=rv,ov=function(e){var t,n,r=new am({directed:!1}),o=e.nodes()[0],i=e.nodeCount();for(r.setNode(o,{});sm(r,e)<i;)t=um(r,e),n=r.hasNode(t.v)?ul(e,t):-ul(e,t),cm(r,e,n);return r};function sm(e,t){return P.forEach(e.nodes(),function n(r){P.forEach(t.nodeEdges(r),function(o){var i=o.v,a=r===i?o.w:i;e.hasNode(a)||ul(t,o)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}),e.nodeCount()}function um(e,t){return P.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return ul(t,n)})}function cm(e,t,n){P.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var fm=rv,lm=nv,dm=ai.alg.preorder,hm=ai.alg.postorder,vm=Br.simplify,pm=Rs;function Rs(e){e=vm(e),lm(e);var t,n=ov(e);for(Wd(n),Xd(n,e);t=sv(n);)cv(n,e,t,uv(n,e,t))}function Xd(e,t){var n=hm(e,e.nodes());n=n.slice(0,n.length-1),P.forEach(n,function(r){(function(o,i,a){var s=o.node(a).parent;o.edge(a,s).cutvalue=iv(o,i,a)})(e,t,r)})}function iv(e,t,n){var r=e.node(n).parent,o=!0,i=t.edge(n,r),a=0;return i||(o=!1,i=t.edge(r,n)),a=i.weight,P.forEach(t.nodeEdges(n),function(s){var u,c,f=s.v===n,l=f?s.w:s.v;if(l!==r){var d=f===o,h=t.edge(s).weight;if(a+=d?h:-h,u=n,c=l,e.hasEdge(u,c)){var v=e.edge(n,l).cutvalue;a+=d?-v:v}}}),a}function Wd(e,t){arguments.length<2&&(t=e.nodes()[0]),av(e,{},1,t)}function av(e,t,n,r,o){var i=n,a=e.node(r);return t[r]=!0,P.forEach(e.neighbors(r),function(s){P.has(t,s)||(n=av(e,t,n,s,r))}),a.low=i,a.lim=n++,o?a.parent=o:delete a.parent,n}function sv(e){return P.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function uv(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var i=e.node(r),a=e.node(o),s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);var c=P.filter(t.edges(),function(f){return u===fv(e,e.node(f.v),s)&&u!==fv(e,e.node(f.w),s)});return P.minBy(c,function(f){return fm(t,f)})}function cv(e,t,n,r){var o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),Wd(e),Xd(e,t),function(a,s){var u=P.find(a.nodes(),function(f){return!s.node(f).parent}),c=dm(a,u);c=c.slice(1),P.forEach(c,function(f){var l=a.node(f).parent,d=s.edge(f,l),h=!1;d||(d=s.edge(l,f),h=!0),s.node(f).rank=s.node(l).rank+(h?d.minlen:-d.minlen)})}(e,t)}function fv(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}Rs.initLowLimValues=Wd,Rs.initCutValues=Xd,Rs.calcCutValue=iv,Rs.leaveEdge=sv,Rs.enterEdge=uv,Rs.exchangeEdges=cv;var lv=nv,mm=function(e){switch(e.graph().ranker){case"network-simplex":dv(e);break;case"tight-tree":(function(t){lv(t),ov(t)})(e);break;case"longest-path":gm(e);break;default:dv(e)}},gm=lv;function dv(e){pm(e)}var ym=function(e){var t=function(n){var r={},o=0;function i(a){var s=o;P.forEach(n.children(a),i),r[a]={low:s,lim:o++}}return P.forEach(n.children(),i),r}(e);P.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,i=function(l,d,h,v){var m,y,E=[],g=[],b=Math.min(d[h].low,d[v].low),_=Math.max(d[h].lim,d[v].lim);m=h;do m=l.parent(m),E.push(m);while(m&&(d[m].low>b||_>d[m].lim));for(y=m,m=v;(m=l.parent(m))!==y;)g.push(m);return{path:E.concat(g.reverse()),lca:y}}(e,t,o.v,o.w),a=i.path,s=i.lca,u=0,c=a[u],f=!0;n!==o.w;){if(r=e.node(n),f){for(;(c=a[u])!==s&&e.node(c).maxRank<r.rank;)u++;c===s&&(f=!1)}if(!f){for(;u<a.length-1&&e.node(c=a[u+1]).minRank<=r.rank;)u++;c=a[u]}e.setParent(n,c),n=e.successors(n)[0]}})},hv={run:function(e){var t=Br.addDummyNode(e,"root",{},"_root"),n=function(a){var s={};function u(c,f){var l=a.children(c);l&&l.length&&P.forEach(l,function(d){u(d,f+1)}),s[c]=f}return P.forEach(a.children(),function(c){u(c,1)}),s}(e),r=P.max(P.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,P.forEach(e.edges(),function(a){e.edge(a).minlen*=o});var i=function(a){return P.reduce(a.edges(),function(s,u){return s+a.edge(u).weight},0)}(e)+1;P.forEach(e.children(),function(a){vv(e,t,o,i,r,n,a)}),e.graph().nodeRankFactor=o},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,P.forEach(e.edges(),function(n){e.edge(n).nestingEdge&&e.removeEdge(n)})}};function vv(e,t,n,r,o,i,a){var s=e.children(a);if(s.length){var u=Br.addBorderNode(e,"_bt"),c=Br.addBorderNode(e,"_bb"),f=e.node(a);e.setParent(u,a),f.borderTop=u,e.setParent(c,a),f.borderBottom=c,P.forEach(s,function(l){vv(e,t,n,r,o,i,l);var d=e.node(l),h=d.borderTop?d.borderTop:l,v=d.borderBottom?d.borderBottom:l,m=d.borderTop?r:2*r,y=h!==v?1:o-i[a]+1;e.setEdge(u,h,{weight:m,minlen:y,nestingEdge:!0}),e.setEdge(v,c,{weight:m,minlen:y,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:o+i[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:n})}var Em=function(e){P.forEach(e.children(),function t(n){var r=e.children(n),o=e.node(n);if(r.length&&P.forEach(r,t),P.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,a=o.maxRank+1;i<a;++i)pv(e,"borderLeft","_bl",n,o,i),pv(e,"borderRight","_br",n,o,i)}})};function pv(e,t,n,r,o,i){var a={width:0,height:0,rank:i,borderType:t},s=o[t][i-1],u=Br.addDummyNode(e,"border",a,n);o[t][i]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})}var mv={adjust:function(e){var t=e.graph().rankdir.toLowerCase();t!=="lr"&&t!=="rl"||gv(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();t!=="bt"&&t!=="rl"||function(n){P.forEach(n.nodes(),function(r){Hd(n.node(r))}),P.forEach(n.edges(),function(r){var o=n.edge(r);P.forEach(o.points,Hd),P.has(o,"y")&&Hd(o)})}(e),t!=="lr"&&t!=="rl"||(function(n){P.forEach(n.nodes(),function(r){Zd(n.node(r))}),P.forEach(n.edges(),function(r){var o=n.edge(r);P.forEach(o.points,Zd),P.has(o,"x")&&Zd(o)})}(e),gv(e))}};function gv(e){P.forEach(e.nodes(),function(t){yv(e.node(t))}),P.forEach(e.edges(),function(t){yv(e.edge(t))})}function yv(e){var t=e.width;e.width=e.height,e.height=t}function Hd(e){e.y=-e.y}function Zd(e){var t=e.x;e.x=e.y,e.y=t}var bm=function(e){var t={},n=P.filter(e.nodes(),function(s){return!e.children(s).length}),r=P.max(P.map(n,function(s){return e.node(s).rank})),o=P.map(P.range(r+1),function(){return[]});function i(s){if(!P.has(t,s)){t[s]=!0;var u=e.node(s);o[u.rank].push(s),P.forEach(e.successors(s),i)}}var a=P.sortBy(n,function(s){return e.node(s).rank});return P.forEach(a,i),o},xm=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=_m(e,t[r-1],t[r]);return n};function _m(e,t,n){for(var r=P.zipObject(n,P.map(n,function(c,f){return f})),o=P.flatten(P.map(t,function(c){return P.sortBy(P.map(e.outEdges(c),function(f){return{pos:r[f.w],weight:e.edge(f).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var a=2*i-1;i-=1;var s=P.map(new Array(a),function(){return 0}),u=0;return P.forEach(o.forEach(function(c){var f=c.pos+i;s[f]+=c.weight;for(var l=0;f>0;)f%2&&(l+=s[f+1]),s[f=f-1>>1]+=c.weight;u+=c.weight*l})),u}var wm=function(e,t){return P.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=P.reduce(r,function(i,a){var s=e.edge(a),u=e.node(a.v);return{sum:i.sum+s.weight*u.order,weight:i.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}return{v:n}})},Sm=function(e,t){var n={};return P.forEach(e,function(r,o){var i=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i:o};P.isUndefined(r.barycenter)||(i.barycenter=r.barycenter,i.weight=r.weight)}),P.forEach(t.edges(),function(r){var o=n[r.v],i=n[r.w];P.isUndefined(o)||P.isUndefined(i)||(i.indegree++,o.out.push(n[r.w]))}),function(r){var o=[];function i(u){return function(c){c.merged||(P.isUndefined(c.barycenter)||P.isUndefined(u.barycenter)||c.barycenter>=u.barycenter)&&function(f,l){var d=0,h=0;f.weight&&(d+=f.barycenter*f.weight,h+=f.weight),l.weight&&(d+=l.barycenter*l.weight,h+=l.weight),f.vs=l.vs.concat(f.vs),f.barycenter=d/h,f.weight=h,f.i=Math.min(l.i,f.i),l.merged=!0}(u,c)}}function a(u){return function(c){c.in.push(u),--c.indegree==0&&r.push(c)}}for(;r.length;){var s=r.pop();o.push(s),P.forEach(s.in.reverse(),i(s)),P.forEach(s.out,a(s))}return P.map(P.filter(o,function(u){return!u.merged}),function(u){return P.pick(u,["vs","i","barycenter","weight"])})}(P.filter(n,function(r){return!r.indegree}))},Tm=function(e,t){var n=Br.partition(e,function(l){return P.has(l,"barycenter")}),r=n.lhs,o=P.sortBy(n.rhs,function(l){return-l.i}),i=[],a=0,s=0,u=0;r.sort((c=!!t,function(l,d){return l.barycenter<d.barycenter?-1:l.barycenter>d.barycenter?1:c?d.i-l.i:l.i-d.i})),u=Ev(i,o,u),P.forEach(r,function(l){u+=l.vs.length,i.push(l.vs),a+=l.barycenter*l.weight,s+=l.weight,u=Ev(i,o,u)});var c,f={vs:P.flatten(i,!0)};return s&&(f.barycenter=a/s,f.weight=s),f};function Ev(e,t,n){for(var r;t.length&&(r=P.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}var Im=function e(t,n,r,o){var i=t.children(n),a=t.node(n),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,c={};s&&(i=P.filter(i,function(m){return m!==s&&m!==u}));var f=wm(t,i);P.forEach(f,function(m){if(t.children(m.v).length){var y=e(t,m.v,r,o);c[m.v]=y,P.has(y,"barycenter")&&(E=m,g=y,P.isUndefined(E.barycenter)?(E.barycenter=g.barycenter,E.weight=g.weight):(E.barycenter=(E.barycenter*E.weight+g.barycenter*g.weight)/(E.weight+g.weight),E.weight+=g.weight))}var E,g});var l=Sm(f,r);(function(m,y){P.forEach(m,function(E){E.vs=P.flatten(E.vs.map(function(g){return y[g]?y[g].vs:g}),!0)})})(l,c);var d=Tm(l,o);if(s&&(d.vs=P.flatten([s,d.vs,u],!0),t.predecessors(s).length)){var h=t.node(t.predecessors(s)[0]),v=t.node(t.predecessors(u)[0]);P.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+v.order)/(d.weight+2),d.weight+=2}return d},Am=ai.Graph,Nm=function(e,t,n){var r=function(i){for(var a;i.hasNode(a=P.uniqueId("_root")););return a}(e),o=new Am({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(i){return e.node(i)});return P.forEach(e.nodes(),function(i){var a=e.node(i),s=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(o.setNode(i),o.setParent(i,s||r),P.forEach(e[n](i),function(u){var c=u.v===i?u.w:u.v,f=o.edge(c,i),l=P.isUndefined(f)?0:f.weight;o.setEdge(c,i,{weight:e.edge(u).weight+l})}),P.has(a,"minRank")&&o.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),o},Rm=function(e,t,n){var r,o={};P.forEach(n,function(i){for(var a,s,u=e.parent(i);u;){if((a=e.parent(u))?(s=o[a],o[a]=u):(s=r,r=u),s&&s!==u)return void t.setEdge(s,u);u=a}})},Dm=ai.Graph,Cm=function(e){var t=Br.maxRank(e),n=bv(e,P.range(1,t+1),"inEdges"),r=bv(e,P.range(t-1,-1,-1),"outEdges"),o=bm(e);xv(e,o);for(var i,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){Lm(s%2?n:r,s%4>=2),o=Br.buildLayerMatrix(e);var c=xm(e,o);c<a&&(u=0,i=P.cloneDeep(o),a=c)}xv(e,i)};function bv(e,t,n){return P.map(t,function(r){return Nm(e,r,n)})}function Lm(e,t){var n=new Dm;P.forEach(e,function(r){var o=r.graph().root,i=Im(r,o,n,t);P.forEach(i.vs,function(a,s){r.node(a).order=s}),Rm(r,n,i.vs)})}function xv(e,t){P.forEach(t,function(n){P.forEach(n,function(r,o){e.node(r).order=o})})}var Om=ai.Graph,Mm=function(e){var t,n=Br.buildLayerMatrix(e),r=P.merge(km(e,n),Gm(e,n)),o={};P.forEach(["u","d"],function(a){t=a==="u"?n:P.values(n).reverse(),P.forEach(["l","r"],function(s){s==="r"&&(t=P.map(t,function(l){return P.values(l).reverse()}));var u=(a==="u"?e.predecessors:e.successors).bind(e),c=Fm(e,t,r,u),f=zm(e,t,c.root,c.align,s==="r");s==="r"&&(f=P.mapValues(f,function(l){return-l})),o[a+s]=f})});var i=Bm(e,o);return Um(o,i),Vm(o,e.graph().align)};function km(e,t){var n={};return P.reduce(t,function(r,o){var i=0,a=0,s=r.length,u=P.last(o);return P.forEach(o,function(c,f){var l=function(h,v){if(h.node(v).dummy)return P.find(h.predecessors(v),function(m){return h.node(m).dummy})}(e,c),d=l?e.node(l).order:s;(l||c===u)&&(P.forEach(o.slice(a,f+1),function(h){P.forEach(e.predecessors(h),function(v){var m=e.node(v),y=m.order;!(y<i||d<y)||m.dummy&&e.node(h).dummy||_v(n,v,h)})}),a=f+1,i=d)}),o}),n}function Gm(e,t){var n={};function r(o,i,a,s,u){var c;P.forEach(P.range(i,a),function(f){c=o[f],e.node(c).dummy&&P.forEach(e.predecessors(c),function(l){var d=e.node(l);d.dummy&&(d.order<s||d.order>u)&&_v(n,l,c)})})}return P.reduce(t,function(o,i){var a,s=-1,u=0;return P.forEach(i,function(c,f){if(e.node(c).dummy==="border"){var l=e.predecessors(c);l.length&&(a=e.node(l[0]).order,r(i,u,f,s,a),u=f,s=a)}r(i,u,i.length,a,o.length)}),i}),n}function _v(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function Pm(e,t,n){if(t>n){var r=t;t=n,n=r}return P.has(e[t],n)}function Fm(e,t,n,r){var o={},i={},a={};return P.forEach(t,function(s){P.forEach(s,function(u,c){o[u]=u,i[u]=u,a[u]=c})}),P.forEach(t,function(s){var u=-1;P.forEach(s,function(c){var f=r(c);if(f.length)for(var l=((f=P.sortBy(f,function(m){return a[m]})).length-1)/2,d=Math.floor(l),h=Math.ceil(l);d<=h;++d){var v=f[d];i[c]===c&&u<a[v]&&!Pm(n,c,v)&&(i[v]=c,i[c]=o[c]=o[v],u=a[v])}})}),{root:o,align:i}}function zm(e,t,n,r,o){var i={},a=function(c,f,l,d){var h=new Om,v=c.graph(),m=function(y,E,g){return function(b,_,S){var V,fe=b.node(_),ee=b.node(S),j=0;if(j+=fe.width/2,P.has(fe,"labelpos"))switch(fe.labelpos.toLowerCase()){case"l":V=-fe.width/2;break;case"r":V=fe.width/2}if(V&&(j+=g?V:-V),V=0,j+=(fe.dummy?E:y)/2,j+=(ee.dummy?E:y)/2,j+=ee.width/2,P.has(ee,"labelpos"))switch(ee.labelpos.toLowerCase()){case"l":V=ee.width/2;break;case"r":V=-ee.width/2}return V&&(j+=g?V:-V),V=0,j}}(v.nodesep,v.edgesep,d);return P.forEach(f,function(y){var E;P.forEach(y,function(g){var b=l[g];if(h.setNode(b),E){var _=l[E],S=h.edge(_,b);h.setEdge(_,b,Math.max(m(c,g,E),S||0))}E=g})}),h}(e,t,n,o),s=o?"borderLeft":"borderRight";function u(c,f){for(var l=a.nodes(),d=l.pop(),h={};d;)h[d]?c(d):(h[d]=!0,l.push(d),l=l.concat(f(d))),d=l.pop()}return u(function(c){i[c]=a.inEdges(c).reduce(function(f,l){return Math.max(f,i[l.v]+a.edge(l))},0)},a.predecessors.bind(a)),u(function(c){var f=a.outEdges(c).reduce(function(d,h){return Math.min(d,i[h.w]-a.edge(h))},Number.POSITIVE_INFINITY),l=e.node(c);f!==Number.POSITIVE_INFINITY&&l.borderType!==s&&(i[c]=Math.max(i[c],f))},a.successors.bind(a)),P.forEach(r,function(c){i[c]=i[n[c]]}),i}function Bm(e,t){return P.minBy(P.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return P.forIn(n,function(i,a){var s=function(u,c){return u.node(c).width}(e,a)/2;r=Math.max(i+s,r),o=Math.min(i-s,o)}),r-o})}function Um(e,t){var n=P.values(t),r=P.min(n),o=P.max(n);P.forEach(["u","d"],function(i){P.forEach(["l","r"],function(a){var s,u=i+a,c=e[u];if(c!==t){var f=P.values(c);(s=a==="l"?r-P.min(f):o-P.max(f))&&(e[u]=P.mapValues(c,function(l){return l+s}))}})})}function Vm(e,t){return P.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=P.sortBy(P.map(e,r));return(o[1]+o[2])/2})}var $m=Mm,Xm=function(e){(function(t){var n=Br.buildLayerMatrix(t),r=t.graph().ranksep,o=0;P.forEach(n,function(i){var a=P.max(P.map(i,function(s){return t.node(s).height}));P.forEach(i,function(s){t.node(s).y=o+a/2}),o+=a+r})})(e=Br.asNonCompoundGraph(e)),P.forEach($m(e),function(t,n){e.node(n).x=t})},Wm=Br.normalizeRanks,Hm=Br.removeEmptyRanks,qa=Br,Zm=ai.Graph,jm=function(e,t){var n=t&&t.debugTiming?qa.time:qa.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return function(o){var i=new Zm({multigraph:!0,compound:!0}),a=Yd(o.graph());return i.setGraph(P.merge({},Km,jd(a,Ym),P.pick(a,qm))),P.forEach(o.nodes(),function(s){var u=Yd(o.node(s));i.setNode(s,P.defaults(jd(u,Qm),Jm)),i.setParent(s,o.parent(s))}),P.forEach(o.edges(),function(s){var u=Yd(o.edge(s));i.setEdge(s,P.merge({},tg,jd(u,eg),P.pick(u,ng)))}),i}(e)});n("  runLayout",function(){(function(o,i){i("    makeSpaceForEdgeLabels",function(){(function(a){var s=a.graph();s.ranksep/=2,P.forEach(a.edges(),function(u){var c=a.edge(u);c.minlen*=2,c.labelpos.toLowerCase()!=="c"&&(s.rankdir==="TB"||s.rankdir==="BT"?c.width+=c.labeloffset:c.height+=c.labeloffset)})})(o)}),i("    removeSelfEdges",function(){(function(a){P.forEach(a.edges(),function(s){if(s.v===s.w){var u=a.node(s.v);u.selfEdges||(u.selfEdges=[]),u.selfEdges.push({e:s,label:a.edge(s)}),a.removeEdge(s)}})})(o)}),i("    acyclic",function(){qh.run(o)}),i("    nestingGraph.run",function(){hv.run(o)}),i("    rank",function(){mm(qa.asNonCompoundGraph(o))}),i("    injectEdgeLabelProxies",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);if(u.width&&u.height){var c=a.node(s.v),f={rank:(a.node(s.w).rank-c.rank)/2+c.rank,e:s};qa.addDummyNode(a,"edge-proxy",f,"_ep")}})})(o)}),i("    removeEmptyRanks",function(){Hm(o)}),i("    nestingGraph.cleanup",function(){hv.cleanup(o)}),i("    normalizeRanks",function(){Wm(o)}),i("    assignRankMinMax",function(){(function(a){var s=0;P.forEach(a.nodes(),function(u){var c=a.node(u);c.borderTop&&(c.minRank=a.node(c.borderTop).rank,c.maxRank=a.node(c.borderBottom).rank,s=P.max(s,c.maxRank))}),a.graph().maxRank=s})(o)}),i("    removeEdgeLabelProxies",function(){(function(a){P.forEach(a.nodes(),function(s){var u=a.node(s);u.dummy==="edge-proxy"&&(a.edge(u.e).labelRank=u.rank,a.removeNode(s))})})(o)}),i("    normalize.run",function(){tv.run(o)}),i("    parentDummyChains",function(){ym(o)}),i("    addBorderSegments",function(){Em(o)}),i("    order",function(){Cm(o)}),i("    insertSelfEdges",function(){(function(a){var s=qa.buildLayerMatrix(a);P.forEach(s,function(u){var c=0;P.forEach(u,function(f,l){var d=a.node(f);d.order=l+c,P.forEach(d.selfEdges,function(h){qa.addDummyNode(a,"selfedge",{width:h.label.width,height:h.label.height,rank:d.rank,order:l+ ++c,e:h.e,label:h.label},"_se")}),delete d.selfEdges})})})(o)}),i("    adjustCoordinateSystem",function(){mv.adjust(o)}),i("    position",function(){Xm(o)}),i("    positionSelfEdges",function(){(function(a){P.forEach(a.nodes(),function(s){var u=a.node(s);if(u.dummy==="selfedge"){var c=a.node(u.e.v),f=c.x+c.width/2,l=c.y,d=u.x-f,h=c.height/2;a.setEdge(u.e,u.label),a.removeNode(s),u.label.points=[{x:f+2*d/3,y:l-h},{x:f+5*d/6,y:l-h},{x:f+d,y:l},{x:f+5*d/6,y:l+h},{x:f+2*d/3,y:l+h}],u.label.x=u.x,u.label.y=u.y}})})(o)}),i("    removeBorderNodes",function(){(function(a){P.forEach(a.nodes(),function(s){if(a.children(s).length){var u=a.node(s),c=a.node(u.borderTop),f=a.node(u.borderBottom),l=a.node(P.last(u.borderLeft)),d=a.node(P.last(u.borderRight));u.width=Math.abs(d.x-l.x),u.height=Math.abs(f.y-c.y),u.x=l.x+u.width/2,u.y=c.y+u.height/2}}),P.forEach(a.nodes(),function(s){a.node(s).dummy==="border"&&a.removeNode(s)})})(o)}),i("    normalize.undo",function(){tv.undo(o)}),i("    fixupEdgeLabelCoords",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);if(P.has(u,"x"))switch(u.labelpos!=="l"&&u.labelpos!=="r"||(u.width-=u.labeloffset),u.labelpos){case"l":u.x-=u.width/2+u.labeloffset;break;case"r":u.x+=u.width/2+u.labeloffset}})})(o)}),i("    undoCoordinateSystem",function(){mv.undo(o)}),i("    translateGraph",function(){(function(a){var s=Number.POSITIVE_INFINITY,u=0,c=Number.POSITIVE_INFINITY,f=0,l=a.graph(),d=l.marginx||0,h=l.marginy||0;function v(m){var y=m.x,E=m.y,g=m.width,b=m.height;s=Math.min(s,y-g/2),u=Math.max(u,y+g/2),c=Math.min(c,E-b/2),f=Math.max(f,E+b/2)}P.forEach(a.nodes(),function(m){v(a.node(m))}),P.forEach(a.edges(),function(m){var y=a.edge(m);P.has(y,"x")&&v(y)}),s-=d,c-=h,P.forEach(a.nodes(),function(m){var y=a.node(m);y.x-=s,y.y-=c}),P.forEach(a.edges(),function(m){var y=a.edge(m);P.forEach(y.points,function(E){E.x-=s,E.y-=c}),P.has(y,"x")&&(y.x-=s),P.has(y,"y")&&(y.y-=c)}),l.width=u-s+d,l.height=f-c+h})(o)}),i("    assignNodeIntersects",function(){(function(a){P.forEach(a.edges(),function(s){var u,c,f=a.edge(s),l=a.node(s.v),d=a.node(s.w);f.points?(u=f.points[0],c=f.points[f.points.length-1]):(f.points=[],u=d,c=l),f.points.unshift(qa.intersectRect(l,u)),f.points.push(qa.intersectRect(d,c))})})(o)}),i("    reversePoints",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);u.reversed&&u.points.reverse()})})(o)}),i("    acyclic.undo",function(){qh.undo(o)})})(r,n)}),n("  updateInputGraph",function(){(function(o,i){P.forEach(o.nodes(),function(a){var s=o.node(a),u=i.node(a);s&&(s.x=u.x,s.y=u.y,i.children(a).length&&(s.width=u.width,s.height=u.height))}),P.forEach(o.edges(),function(a){var s=o.edge(a),u=i.edge(a);s.points=u.points,P.has(u,"x")&&(s.x=u.x,s.y=u.y)}),o.graph().width=i.graph().width,o.graph().height=i.graph().height})(e,r)})})},Ym=["nodesep","edgesep","ranksep","marginx","marginy"],Km={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},qm=["acyclicer","ranker","rankdir","align"],Qm=["width","height"],Jm={width:0,height:0},eg=["minlen","weight","width","height","labeloffset"],tg={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ng=["labelpos"];function jd(e,t){return P.mapValues(P.pick(e,t),Number)}function Yd(e){var t={};return P.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var rg=ai.Graph,wv={graphlib:ai,layout:jm,debug:{debugOrdering:function(e){var t=Br.buildLayerMatrix(e),n=new rg({compound:!0,multigraph:!0}).setGraph({});return P.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),P.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),P.forEach(t,function(r,o){var i="layer"+o;n.setNode(i,{rank:"same"}),P.reduce(r,function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}},util:{time:Br.time,notime:Br.notime},version:"0.8.5"},og=wv.graphlib,ig=wv.layout;class ag{constructor(t){this.cardinality=1,this.include=Ni.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=Mr.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class sg{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function ug(e){const t=new sg;return e.nodes.map(n=>new ag(n)).forEach(n=>{t.nodes[n.name]=n,n.inputs.forEach(r=>{(function(o,i,a){a.name!==i.name&&o.edges.push(Object.assign(Object.assign({},a.attr),{v:a.name,w:i.name}))})(t,n,r)})}),t}class cg{constructor(t,n={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=Ni.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=Mr.META,this.path=[],this.name=t,this.metaGraph=Kd(t,$a.META,n)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(t=>this.metaGraph.node(t))}leaves(){let t,n=[],r=[this];for(;r.length;){let o=r.shift();o.isGroupNode?(t=o.metaGraph,t.nodes().forEach(i=>r.push(t.node(i)))):n.push(o.name)}return n}}class fg{constructor(t,n){this.v=t,this.w=n,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,n){this.baseEdgeList.push(t)}}function Sv(e,t={}){return new cg(e,t)}function Tv(e,t){return new fg(e,t)}function Kd(e,t,n){const r=n||{},o=new og.Graph(r);return o.setGraph({name:e,rankdir:r.rankdir,type:t,align:r.align}),o}class lg{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=Sv(na,this.graphOptions),this.index[na]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,n){this.index[t]=n}getBridgeGraph(t){const n=this.index[t];if(!n)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in n))return null;const r=n;if(r.bridgeGraph)return r.bridgeGraph;const o=Kd(kf,$a.BRIDGE,this.graphOptions);if(r.bridgeGraph=o,!n.parentNode||!("metaGraph"in n.parentNode))return o;const i=n.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach(a=>{a.edges().filter(s=>s.v===t||s.w===t).forEach(s=>{const u=s.w===t;a.edge(s).baseEdgeList.forEach(c=>{const[f,l]=u?[c.w,s.v]:[c.v,s.w],d=this.getChildName(t,f),h={v:u?l:d,w:u?d:l};let v=o.edge(h);v||(v=Tv(h.v,h.w),v.inbound=u,o.setEdge(h.v,h.w,v)),v.addBaseEdge(c,this)})})}),o}getChildName(t,n){let r=this.index[n];for(;r;){if(r.parentNode&&r.parentNode.name===t)return r.name;r=r.parentNode}throw Error("Could not find immediate child for descendant: "+n)}getPredecessors(t){const n=this.index[t];if(!n)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(n,!0)}getSuccessors(t){const n=this.index[t];if(!n)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(n,!1)}getOneWayEdges(t,n){const r=[];if(!t.parentNode||!t.parentNode.isGroupNode)return r;const o=t.parentNode,i=o.metaGraph,a=this.getBridgeGraph(o.name);return Iv(i,t,n,r),Iv(a,t,n,r),r}}function dg(e,t){const{rankDirection:n,align:r}=t,o=new lg({rankdir:n,align:r});return function(i,a){Object.keys(a.nodes).forEach(s=>{const u=a.nodes[s],c=u.path;let f=i.root;f.depth=Math.max(c.length,f.depth);for(let l=0;l<c.length&&(f.depth=Math.max(f.depth,c.length-l),f.cardinality+=u.cardinality,l!==c.length-1);l++){const d=c[l];let h=i.node(d);h||(h=Sv(d,i.graphOptions),h.path=u.path.slice(0,l+1),h.parentNode=f,i.setNode(d,h),f.metaGraph.setNode(d,h)),f=h}i.setNode(u.name,u),u.parentNode=f,f.metaGraph.setNode(u.name,u)})}(o,e),function(i,a){const s=i.getNodeMap();let u=[],c=[];const f=(l,d)=>{let h=0;for(;l;)d[h++]=l.name,l=l.parentNode;return h-1};a.edges.forEach(l=>{u=[],c=[];let d=f(a.nodes[l.v],u),h=f(a.nodes[l.w],c);for(;u[d]===c[h];)if(d--,h--,d<0||h<0)throw Error("No difference found between ancestor paths.");const v=s[u[d+1]],m=u[d],y=c[h];let E=v.metaGraph.edge(m,y);E||(E=Tv(m,y),v.metaGraph.setEdge(m,y,E)),E.addBaseEdge(l,i)})}(o,e),o}function Iv(e,t,n,r){(n?e.inEdges(t.name):e.outEdges(t.name)).forEach(o=>{const i=e.edge(o);r.push(i)})}class hg{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new Nv(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(t){if(t in this.hasSubHierarchy)return;this.hasSubHierarchy[t]=!0;const n=this.index[t];if(n.node.type!==Mr.META)return;const r=n,o=r.node.metaGraph,i=r.coreGraph;o.nodes().forEach(f=>{const l=this.getOrCreateRenderNodeByName(f);i.setNode(f,l)}),o.edges().forEach(f=>{const l=o.edge(f),d=new Av(l);i.setEdge(f.v,f.w,d)});const a=r.node.parentNode;if(!a)return;const s=this.getRenderNodeByName(a.name),u=(f,...l)=>l.concat([f?"IN":"OUT"]).join("~~"),c=this.hierarchy.getBridgeGraph(t);c.edges().forEach(f=>{const l=c.edge(f),d=!!o.node(f.w),[h,v]=d?[f.w,f.v]:[f.v,f.w],m=S=>{const V=d?{v:S,w:t}:{v:t,w:S};return s.coreGraph.edge(V)};let y=m(v);y||(y=m(u(d,v,a.name)));const E=u(d,t),g=u(d,v,t);let b=i.node(g);if(!b){let S=i.node(E);if(!S){const fe={name:E,type:Mr.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:Ni.UNSPECIFIED,inbound:d,attr:{}};S=new cl(fe),this.index[E]=S,i.setNode(E,S)}const V={name:g,type:Mr.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:Ni.UNSPECIFIED,inbound:d,attr:{}};b=new cl(V),this.index[g]=b,i.setNode(g,b),i.setParent(g,E),S.node.cardinality++}const _=new Av(l);_.adjoiningMetaEdge=y,d?i.setEdge(g,h,_):i.setEdge(h,g,_)})}getOrCreateRenderNodeByName(t){if(!t)return null;if(t in this.index)return this.index[t];const n=this.getNodeByName(t);return n?(this.index[t]=n.isGroupNode?new Nv(n,this.hierarchy.graphOptions):new cl(n),this.index[t]):null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class cl{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class Av{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Nv extends cl{constructor(t,n){super(t);const r=t.metaGraph.graph();n.compound=!0,this.coreGraph=Kd(r.name,$a.CORE,n)}}function Rv(e,t){e.node.isGroupNode&&function(n,r){const o=bs(r);n.coreGraph.nodes().map(i=>n.coreGraph.node(i)).forEach(i=>{var a,s,u,c,f,l;const{height:d,width:h}=i;switch(i.node.type){case Mr.NODE:Object.assign(i,o.nodeSize.node),i.height=d||o.nodeSize.node.height,i.width=h||o.nodeSize.node.width;break;case Mr.BRIDGE:Object.assign(i,o.nodeSize.bridge);break;case Mr.META:i.expanded?Rv(i,r):(Object.assign(i,o.nodeSize.meta),i.height=o.nodeSize.meta.height,i.width=o.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+i.node.type)}if(!i.expanded){const v=i.attr;(function(m,y=!1){if(m.coreBox.width=m.width,m.coreBox.height=m.height,!y){const E=`${m.displayName}`.length,g=3;m.width=Math.max(m.coreBox.width,E*g)}})(i,r&&(i.node.type===0&&!!(!((s=(a=r==null?void 0:r.nodeSize)===null||a===void 0?void 0:a.meta)===null||s===void 0)&&s.width)||i.node.type===1&&(!!(!((c=(u=r==null?void 0:r.nodeSize)===null||u===void 0?void 0:u.node)===null||c===void 0)&&c.width)||!!v.width)||i.node.type===2&&!!(!((l=(f=r==null?void 0:r.nodeSize)===null||f===void 0?void 0:f.bridge)===null||l===void 0)&&l.width)))}})}(e,t),e.node.type===Mr.META&&function(n,r){const o=bs(r),i=o.subScene.meta;Object.assign(n,i);const{nodeSep:a,rankSep:s,edgeSep:u,align:c}=o.graph.meta,f={nodesep:a,ranksep:s,edgesep:u,align:c};Object.assign(n.coreBox,function(h,v){const{ranksep:m,nodesep:y,edgesep:E,align:g}=v;Object.assign(h.graph(),{ranksep:m,nodesep:y,edgesep:E,align:g});const b=[];if(h.nodes().forEach(ee=>{h.node(ee).node.type!==Mr.BRIDGE&&b.push(ee)}),!b.length)return{width:0,height:0};ig(h);let _=1/0,S=1/0,V=-1/0,fe=-1/0;return b.forEach(ee=>{const j=h.node(ee),q=.5*j.width,me=j.x-q,G=j.x+q;_=me<_?me:_,V=G>V?G:V;const ye=.5*j.height,Ge=j.y-ye,Ue=j.y+ye;S=Ge<S?Ge:S,fe=Ue>fe?Ue:fe}),h.edges().forEach(ee=>{const j=h.edge(ee),q=h.node(j.metaEdge.v),me=h.node(j.metaEdge.w);if(j.points.length===3&&function(Ge){let Ue=Dv(Ge[0],Ge[1]);for(let pt=1;pt<Ge.length-1;pt++){const Ke=Dv(Ge[pt],Ge[pt+1]);if(Math.abs(Ke-Ue)>1)return!1;Ue=Ke}return!0}(j.points)){if(q!=null){const Ge=q.expanded?q.x:qd(q);j.points[0].x=Ge}if(me!=null){const Ge=me.expanded?me.x:qd(me);j.points[2].x=Ge}j.points=[j.points[0],j.points[1]]}const G=j.points[j.points.length-2];me!=null&&(j.points[j.points.length-1]=Cv(G,me));const ye=j.points[1];q!=null&&(j.points[0]=Cv(ye,q)),j.points.forEach(Ge=>{_=Ge.x<_?Ge.x:_,V=Ge.x>V?Ge.x:V,S=Ge.y<S?Ge.y:S,fe=Ge.y>fe?Ge.y:fe})}),h.nodes().forEach(ee=>{const j=h.node(ee);j.x-=_,j.y-=S}),h.edges().forEach(ee=>{h.edge(ee).points.forEach(j=>{j.x-=_,j.y-=S})}),{width:V-_,height:fe-S}}(n.coreGraph,f));let l=0;n.coreGraph.nodeCount()>0&&l++;const d=l<=1?0:l;n.coreBox.width+=d+d,n.coreBox.height=i.labelHeight+n.coreBox.height,n.width=n.coreBox.width+i.paddingLeft+i.paddingRight,n.height=n.paddingTop+n.coreBox.height+n.paddingBottom}(e,t)}function Dv(e,t){const n=t.x-e.x,r=t.y-e.y;return 180*Math.atan(r/n)/Math.PI}function qd(e){return e.expanded?e.x:e.x-e.width/2+0+e.coreBox.width/2}function Cv(e,t){const n=t.expanded?t.x:qd(t),r=t.y,o=e.x-n,i=e.y-r;let a,s,u=t.expanded?t.width:t.coreBox.width,c=t.expanded?t.height:t.coreBox.height;return Math.abs(i)*u/2>Math.abs(o)*c/2?(i<0&&(c=-c),a=i===0?0:c/2*o/i,s=c/2):(o<0&&(u=-u),a=u/2,s=o===0?0:u/2*i/o),{x:n+a,y:r+s}}function vg(e,t,n){var r,o,i,a;const s=e.nodes.filter((l,d,h)=>h.findIndex(v=>v.id===l.id)!==d).map(l=>l.id);if(s.length)throw new Error(`Duplicated ids found: ${s.join(", ")}`);const u=function(l){const d={nodes:[]},h=l.compound,v=Object.keys(h||{}),m=new Map,y=(g,b=[])=>{if(m.has(g))return m.get(g);for(let _=0;_<v.length;_++){let S=v[_];if(h&&h[S].indexOf(g)!==-1)return b.unshift(S),y(S,b)}return b.length===0&&m.set(g,b),b},E=g=>l.edges.filter(b=>b.w===g).map(b=>({name:b.v}));return l.nodes.forEach(g=>{const b=g.id,_=[...y(b),b];let S=E(b);d.nodes.push({name:b,path:_,inputs:S,width:g.width,height:g.height,attr:Object.assign({},g)})}),d}(e),c=function(l,d){const h=(m,y)=>{for(let E of y.values())if(E.includes(m))return!0;return!1},v=(m,y=[])=>{if(Object.keys(m).length===0)return[...new Set(y)];const E=new Map(Object.keys(m).map(b=>[b,m[b]])),g={};for(let[b,_]of E)h(b,E)?g[b]=_:y=y.concat(b,_);return v(g,y)};return v(l).filter(m=>d.includes(m))}(e.compound||{},(t==null?void 0:t.expanded)||[]),f=function(l,d){return function(h){return new hg(h)}(dg(ug(l),d))}(u,{rankDirection:((o=(r=n==null?void 0:n.graph)===null||r===void 0?void 0:r.meta)===null||o===void 0?void 0:o.rankDir)||(t==null?void 0:t.rankDirection)||Es.graph.meta.rankDir,align:((a=(i=n==null?void 0:n.graph)===null||i===void 0?void 0:i.meta)===null||a===void 0?void 0:a.align)||Es.graph.meta.align});return function(l,d){d.forEach(h=>{const v=l.getRenderInfoNodes().find(E=>E.displayName===h);let m=v&&v.node&&v.node.name||"";const y=l.getRenderNodeByName(m);if(!y)throw new Error(`No nodes found: ${m}`);y.expanded=!0,l.buildSubHierarchy(m)})}(f,c),Rv(f.root,n),Ov(f.root)}function pg(e,t=!1){const n=JSON.parse(JSON.stringify(e)),r={nodes:[n],edges:[...n.edges]};return n.nodes.forEach(function o(i){(i.type===0||i.type===1)&&r.nodes.push(i),i.type===0&&(r.edges=r.edges.concat(i.edges)),Array.isArray(i.nodes)&&i.nodes.forEach(o)}),t&&r.nodes.forEach(o=>{const i=r.nodes.find(a=>a.id===o.parentNodeName);if(i){const a=i.x-i.width/2+i.paddingLeft,s=i.y-i.height/2+i.labelHeight+i.paddingTop;i.id!==na&&(o.x+=a,o.y+=s),o.type===0&&o.edges.forEach(u=>{u.points.forEach(c=>{c.x+=o.x-o.width/2+o.paddingLeft,c.y+=o.y-o.height/2+o.labelHeight+o.paddingTop})})}}),r}function Lv(e,t,n,r){var o,i;let a=[];const s=((o=n.find(l=>l.id===e))===null||o===void 0?void 0:o.path)||[],u=((i=n.find(l=>l.id===t))===null||i===void 0?void 0:i.path)||[],c=[na,...s].slice(0,s.length).reverse(),f=[na,...u].slice(0,u.length);return c.forEach(l=>{const d=n.find(h=>h.id===l);a=a.concat(d.edges.filter(h=>h.baseEdgeList.some(v=>v.v===((r==null?void 0:r.v)||e)&&v.w===((r==null?void 0:r.w)||t))))}),f.filter(l=>!c.includes(l)).forEach(l=>{const d=n.find(h=>h.id===l);a=a.concat(d.edges.filter(h=>h.baseEdgeList.some(v=>v.v===((r==null?void 0:r.v)||e)&&v.w===((r==null?void 0:r.w)||t))))}),a}function Ov(e){const t=e.coreGraph.nodes().map(r=>e.coreGraph.node(r));return Object.assign(Object.assign({},Mv(e)),{expanded:e.expanded,nodes:e.expanded?(n=t,n.map(r=>r.node.type===Mr.META?Ov(r):Mv(r))):[],edges:e.expanded?mg(e):[]});var n}function Mv(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}function mg(e){return e.coreGraph.edges().map(t=>({renderInfoEdge:e.coreGraph.edge(t),edge:t})).filter(({renderInfoEdge:t})=>t.metaEdge).map(({edge:t,renderInfoEdge:n})=>{const r=function(o,i){const a=i.points.map(s=>Object.assign({},s));if(i.adjoiningMetaEdge){const s=i.adjoiningMetaEdge.points,u=i.metaEdge.inbound,c=u?s[s.length-1]:s[0],f=a[u?0:a.length-1],l=o.x-o.width/2,d=o.y-o.height/2,h=c.x-l,v=c.y-d,m=-o.paddingLeft,y=-(o.paddingTop+o.labelHeight);f.x=h+m,f.y=v+y}return a}(e,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:t.w,v:t.v,points:r,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:e.node.name}})}class gg extends Yt{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.edgesep=5,this.ranksep=50,this.controlPoints=!0,this.anchorPoint=!0,this.nodes=[],this.edges=[],this.combos=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}}init(t){const n=t.hiddenNodes||[],r=t.hiddenEdges||[],o=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(n)),this.edges=this.getDataByOrder((t.edges||[]).concat(r)),this.combos=(t.combos||[]).concat(o.map(i=>Object.assign(Object.assign({},i),{collapsed:!0})))}execute(){const t=this,{nodes:n,edges:r}=t;if(!n)return;const{graphDef:o,graphOption:i,graphSettings:a}=t.getLayoutConfig(),s=vg(o,i,a),u=pg(s,!0);return this.updatePosition(u),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}getNodePath(t){const n=this,{nodes:r,combos:o}=n,i=r.find(s=>s.id===t),a=(s,u=[])=>{const c=o.find(f=>f.id===s);return c?(u.unshift(s),c.parentId?a(c.parentId,u):u):u};return i&&i.comboId?a(i.comboId,[t]):[t]}getLayoutConfig(){var t,n,r;const o=this,{nodes:i,edges:a,combos:s,nodeSize:u,rankdir:c,align:f,edgesep:l,nodesep:d,ranksep:h,settings:v}=o,m=(s||[]).reduce((ye,Ge)=>{const Ue=i.filter(Ke=>Ke.comboId===Ge.id).map(Ke=>Ke.id),pt=(s||[]).filter(Ke=>Ke.parentId===Ge.id).map(Ke=>Ke.id);return(Ue.length||pt.length)&&(ye[Ge.id]=[...Ue,...pt]),ye},{});let y;u?bt(u)?y=()=>u:y=()=>[u,u]:y=ye=>ye&&ye.size?bt(ye.size)?ye.size:Vt(ye.size)?[ye.size.width||40,ye.size.height||40]:[ye.size,ye.size]:[40,40];const E=ye=>ye&&ye.size?bt(ye.size)?ye.size:[ye.size,ye.size]:[80,40],[g,b]=E(s==null?void 0:s[0]),_=(n=(t=o.graphSettings)===null||t===void 0?void 0:t.subScene)===null||n===void 0?void 0:n.meta,[S,V,fe,ee]=((r=s.find(ye=>!ye.collapsed))===null||r===void 0?void 0:r.padding)||[20,20,20,20],j={compound:m,nodes:[...(i||[]).map(ye=>{const Ge=y(ye),Ue=Ge[0],pt=Ge[1];return Object.assign(Object.assign({},ye),{width:Ue,height:pt})})],edges:[...(a||[]).map(ye=>Object.assign(Object.assign({},ye),{v:ye.source,w:ye.target}))]},q={expanded:(s||[]).filter(ye=>!ye.collapsed).map(ye=>ye.id)},me={graph:{meta:{align:f,rankDir:c,nodeSep:d,edgeSep:l,rankSep:h}},subScene:{meta:{paddingTop:S||(_==null?void 0:_.paddingTop)||20,paddingRight:V||(_==null?void 0:_.paddingRight)||20,paddingBottom:fe||(_==null?void 0:_.paddingBottom)||20,paddingLeft:ee||(_==null?void 0:_.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:g,height:b}}},G=bs(v,Object.assign({},bs(me,Es)));return o.graphSettings=G,{graphDef:j,graphOption:q,graphSettings:G}}updatePosition(t){const{nodes:n,edges:r}=t;this.updateNodePosition(n,r),this.updateEdgePosition(n,r)}getBegin(t,n){const r=this,{begin:o}=r,i=[0,0];if(o){let a=1/0,s=1/0;t.forEach(u=>{a>u.x&&(a=u.x),s>u.y&&(s=u.y)}),n.forEach(u=>{u.points.forEach(c=>{a>c.x&&(a=c.x),s>c.y&&(s=c.y)})}),i[0]=o[0]-a,i[1]=o[1]-s}return i}updateNodePosition(t,n){const r=this,{combos:o,nodes:i,edges:a,anchorPoint:s,graphSettings:u}=r,c=this.getBegin(t,n);t.forEach(f=>{var l;const{x:d,y:h,id:v,type:m,coreBox:y}=f;if(m===xs.META&&v!==na){const E=o.findIndex(b=>b.id===v),g=(l=u==null?void 0:u.subScene)===null||l===void 0?void 0:l.meta;o[E].offsetX=d+c[0],o[E].offsetY=h+c[1],o[E].fixSize=[y.width,y.height],o[E].fixCollapseSize=[y.width,y.height],f.expanded?o[E].padding=[g==null?void 0:g.paddingTop,g==null?void 0:g.paddingRight,g==null?void 0:g.paddingBottom,g==null?void 0:g.paddingLeft]:o[E].padding=[0,0,0,0]}else if(m===xs.OP){const E=i.findIndex(g=>g.id===v);if(i[E].x=d+c[0],i[E].y=h+c[1],s){const g=[],b=n.filter(S=>S.v===v),_=n.filter(S=>S.w===v);b.length>0&&b.forEach(S=>{const V=S.points[0],fe=(V.x-d)/f.width+.5,ee=(V.y-h)/f.height+.5;g.push([fe,ee]),S.baseEdgeList.forEach(j=>{const q=a.find(me=>me.source===j.v&&me.target===j.w);q&&(q.sourceAnchor=g.length-1)})}),_.length>0&&_.forEach(S=>{const V=S.points[S.points.length-1],fe=(V.x-d)/f.width+.5,ee=(V.y-h)/f.height+.5;g.push([fe,ee]),S.baseEdgeList.forEach(j=>{const q=a.find(me=>me.source===j.v&&me.target===j.w);q&&(q.targetAnchor=g.length-1)})}),i[E].anchorPoints=g.length>0?g:i[E].anchorPoints||[]}}})}updateEdgePosition(t,n){const r=this,{combos:o,edges:i,controlPoints:a}=r,s=this.getBegin(t,n);a&&(o.forEach(u=>{u.inEdges=[],u.outEdges=[]}),i.forEach(u=>{var c,f,l,d;let h=t.find(E=>E.id===u.source),v=t.find(E=>E.id===u.target),m=[],y=[];if(h&&v)y=Lv(h==null?void 0:h.id,v==null?void 0:v.id,t);else if(!h||!v){const E=r.getNodePath(u.source),g=r.getNodePath(u.target),b=E.reverse().slice(h?0:1).find(S=>t.find(V=>V.id===S)),_=g.reverse().slice(v?0:1).find(S=>t.find(V=>V.id===S));h=t.find(S=>S.id===b),v=t.find(S=>S.id===_),y=Lv(h==null?void 0:h.id,v==null?void 0:v.id,t,{v:u.source,w:u.target})}if(m=y.reduce((E,g)=>[...E,...g.points.map(b=>Object.assign(Object.assign({},b),{x:b.x+s[0],y:b.y+s[1]}))],[]),m=m.slice(1,-1),u.controlPoints=m,(v==null?void 0:v.type)===Mr.META){const E=o.findIndex(g=>g.id===(v==null?void 0:v.id));if(!o[E]||!((c=o[E].inEdges)===null||c===void 0)&&c.some(g=>g.source===h.id&&g.target===v.id))return;(f=o[E].inEdges)===null||f===void 0||f.push({source:h.id,target:v.id,controlPoints:m})}if((h==null?void 0:h.type)===Mr.META){const E=o.findIndex(g=>g.id===(h==null?void 0:h.id));if(!o[E]||!((l=o[E].outEdges)===null||l===void 0)&&l.some(g=>g.source===h.id&&g.target===v.id))return;(d=o[E].outEdges)===null||d===void 0||d.push({source:h.id,target:v.id,controlPoints:m})}}))}getType(){return"dagreCompound"}getDataByOrder(t){return t.every(n=>n.layoutOrder!==void 0)||t.forEach((n,r)=>{n.layoutOrder=r}),t.sort((n,r)=>n.layoutOrder-r.layoutOrder)}}var yg=ne(75254),kv=ne.n(yg),Eg=ne(62657),bg=ne.n(Eg),xg=ne(21742),Gv=ne.n(xg),_g=ne(83136),Pv=ne.n(_g),wg=ne(25298),fl=ne.n(wg),Sg=ne(17069),ll=ne.n(Sg);const Tg=Object.prototype.toString;function dl(e){const t=Tg.call(e);return t.endsWith("Array]")&&!t.includes("Big")}function Ig(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!dl(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var n=t.fromIndex,r=n===void 0?0:n,o=t.toIndex,i=o===void 0?e.length:o;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>e.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<i;s++)e[s]>a&&(a=e[s]);return a}function Ag(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!dl(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var n=t.fromIndex,r=n===void 0?0:n,o=t.toIndex,i=o===void 0?e.length:o;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>e.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<i;s++)e[s]<a&&(a=e[s]);return a}function Fv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(dl(e)){if(e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(t.output!==void 0){if(!dl(t.output))throw new TypeError("output option must be an array if specified");n=t.output}else n=new Array(e.length);var r=Ag(e),o=Ig(e);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=t.min,a=i===void 0?t.autoMinMax?r:0:i,s=t.max,u=s===void 0?t.autoMinMax?o:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var c=(u-a)/(o-r),f=0;f<e.length;f++)n[f]=(e[f]-r)*c+a;return n}var hl=" ".repeat(2),zv=" ".repeat(4);function Ng(){return Bv(this)}function Bv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxRows,r=n===void 0?15:n,o=t.maxColumns,i=o===void 0?10:o,a=t.maxNumSize,s=a===void 0?8:a;return"".concat(e.constructor.name,` {
`).concat(hl,`[
`).concat(zv).concat(Rg(e,r,i,s),`
`).concat(hl,`]
`).concat(hl,"rows: ").concat(e.rows,`
`).concat(hl,"columns: ").concat(e.columns,`
}`)}function Rg(e,t,n,r){for(var o=e.rows,i=e.columns,a=Math.min(o,t),s=Math.min(i,n),u=[],c=0;c<a;c++){for(var f=[],l=0;l<s;l++)f.push(Dg(e.get(c,l),r));u.push("".concat(f.join(" ")))}return s!==i&&(u[u.length-1]+=" ... ".concat(i-n," more columns")),a!==o&&u.push("... ".concat(o-t," more rows")),u.join(`
`.concat(zv))}function Dg(e,t){var n=String(e);if(n.length<=t)return n.padEnd(t," ");var r=e.toPrecision(t-2);if(r.length<=t)return r;var o=e.toExponential(t-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,t-a.length)+a}function Cg(e,t){e.prototype.add=function(r){return typeof r=="number"?this.addS(r):this.addM(r)},e.prototype.addS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)+r);return this},e.prototype.addM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)+r.get(o,i));return this},e.add=function(r,o){var i=new t(r);return i.add(o)},e.prototype.sub=function(r){return typeof r=="number"?this.subS(r):this.subM(r)},e.prototype.subS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)-r);return this},e.prototype.subM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)-r.get(o,i));return this},e.sub=function(r,o){var i=new t(r);return i.sub(o)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(r){return typeof r=="number"?this.mulS(r):this.mulM(r)},e.prototype.mulS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)*r);return this},e.prototype.mulM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)*r.get(o,i));return this},e.mul=function(r,o){var i=new t(r);return i.mul(o)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(r){return typeof r=="number"?this.divS(r):this.divM(r)},e.prototype.divS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)/r);return this},e.prototype.divM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)/r.get(o,i));return this},e.div=function(r,o){var i=new t(r);return i.div(o)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(r){return typeof r=="number"?this.modS(r):this.modM(r)},e.prototype.modS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)%r);return this},e.prototype.modM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)%r.get(o,i));return this},e.mod=function(r,o){var i=new t(r);return i.mod(o)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(r){return typeof r=="number"?this.andS(r):this.andM(r)},e.prototype.andS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)&r);return this},e.prototype.andM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)&r.get(o,i));return this},e.and=function(r,o){var i=new t(r);return i.and(o)},e.prototype.or=function(r){return typeof r=="number"?this.orS(r):this.orM(r)},e.prototype.orS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)|r);return this},e.prototype.orM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)|r.get(o,i));return this},e.or=function(r,o){var i=new t(r);return i.or(o)},e.prototype.xor=function(r){return typeof r=="number"?this.xorS(r):this.xorM(r)},e.prototype.xorS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)^r);return this},e.prototype.xorM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)^r.get(o,i));return this},e.xor=function(r,o){var i=new t(r);return i.xor(o)},e.prototype.leftShift=function(r){return typeof r=="number"?this.leftShiftS(r):this.leftShiftM(r)},e.prototype.leftShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)<<r);return this},e.prototype.leftShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)<<r.get(o,i));return this},e.leftShift=function(r,o){var i=new t(r);return i.leftShift(o)},e.prototype.signPropagatingRightShift=function(r){return typeof r=="number"?this.signPropagatingRightShiftS(r):this.signPropagatingRightShiftM(r)},e.prototype.signPropagatingRightShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>r);return this},e.prototype.signPropagatingRightShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>r.get(o,i));return this},e.signPropagatingRightShift=function(r,o){var i=new t(r);return i.signPropagatingRightShift(o)},e.prototype.rightShift=function(r){return typeof r=="number"?this.rightShiftS(r):this.rightShiftM(r)},e.prototype.rightShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>>r);return this},e.prototype.rightShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>>r.get(o,i));return this},e.rightShift=function(r,o){var i=new t(r);return i.rightShift(o)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,~this.get(r,o));return this},e.not=function(r){var o=new t(r);return o.not()},e.prototype.abs=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.abs(this.get(r,o)));return this},e.abs=function(r){var o=new t(r);return o.abs()},e.prototype.acos=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.acos(this.get(r,o)));return this},e.acos=function(r){var o=new t(r);return o.acos()},e.prototype.acosh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.acosh(this.get(r,o)));return this},e.acosh=function(r){var o=new t(r);return o.acosh()},e.prototype.asin=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.asin(this.get(r,o)));return this},e.asin=function(r){var o=new t(r);return o.asin()},e.prototype.asinh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.asinh(this.get(r,o)));return this},e.asinh=function(r){var o=new t(r);return o.asinh()},e.prototype.atan=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.atan(this.get(r,o)));return this},e.atan=function(r){var o=new t(r);return o.atan()},e.prototype.atanh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.atanh(this.get(r,o)));return this},e.atanh=function(r){var o=new t(r);return o.atanh()},e.prototype.cbrt=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cbrt(this.get(r,o)));return this},e.cbrt=function(r){var o=new t(r);return o.cbrt()},e.prototype.ceil=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.ceil(this.get(r,o)));return this},e.ceil=function(r){var o=new t(r);return o.ceil()},e.prototype.clz32=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.clz32(this.get(r,o)));return this},e.clz32=function(r){var o=new t(r);return o.clz32()},e.prototype.cos=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cos(this.get(r,o)));return this},e.cos=function(r){var o=new t(r);return o.cos()},e.prototype.cosh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cosh(this.get(r,o)));return this},e.cosh=function(r){var o=new t(r);return o.cosh()},e.prototype.exp=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.exp(this.get(r,o)));return this},e.exp=function(r){var o=new t(r);return o.exp()},e.prototype.expm1=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.expm1(this.get(r,o)));return this},e.expm1=function(r){var o=new t(r);return o.expm1()},e.prototype.floor=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.floor(this.get(r,o)));return this},e.floor=function(r){var o=new t(r);return o.floor()},e.prototype.fround=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.fround(this.get(r,o)));return this},e.fround=function(r){var o=new t(r);return o.fround()},e.prototype.log=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log(this.get(r,o)));return this},e.log=function(r){var o=new t(r);return o.log()},e.prototype.log1p=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log1p(this.get(r,o)));return this},e.log1p=function(r){var o=new t(r);return o.log1p()},e.prototype.log10=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log10(this.get(r,o)));return this},e.log10=function(r){var o=new t(r);return o.log10()},e.prototype.log2=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log2(this.get(r,o)));return this},e.log2=function(r){var o=new t(r);return o.log2()},e.prototype.round=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.round(this.get(r,o)));return this},e.round=function(r){var o=new t(r);return o.round()},e.prototype.sign=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sign(this.get(r,o)));return this},e.sign=function(r){var o=new t(r);return o.sign()},e.prototype.sin=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sin(this.get(r,o)));return this},e.sin=function(r){var o=new t(r);return o.sin()},e.prototype.sinh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sinh(this.get(r,o)));return this},e.sinh=function(r){var o=new t(r);return o.sinh()},e.prototype.sqrt=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sqrt(this.get(r,o)));return this},e.sqrt=function(r){var o=new t(r);return o.sqrt()},e.prototype.tan=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.tan(this.get(r,o)));return this},e.tan=function(r){var o=new t(r);return o.tan()},e.prototype.tanh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.tanh(this.get(r,o)));return this},e.tanh=function(r){var o=new t(r);return o.tanh()},e.prototype.trunc=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.trunc(this.get(r,o)));return this},e.trunc=function(r){var o=new t(r);return o.trunc()},e.pow=function(r,o){var i=new t(r);return i.pow(o)},e.prototype.pow=function(r){return typeof r=="number"?this.powS(r):this.powM(r)},e.prototype.powS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,Math.pow(this.get(o,i),r));return this},e.prototype.powM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,Math.pow(this.get(o,i),r.get(o,i)));return this}}function si(e,t,n){var r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function ui(e,t,n){var r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function wu(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function Su(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function Lg(e,t,n){return{row:Og(e,t),column:Mg(e,n)}}function Og(e,t){if(Er()(t)!=="object")throw new TypeError("unexpected type for row indices");var n=t.some(function(r){return r<0||r>=e.rows});if(n)throw new RangeError("row indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function Mg(e,t){if(Er()(t)!=="object")throw new TypeError("unexpected type for column indices");var n=t.some(function(r){return r<0||r>=e.columns});if(n)throw new RangeError("column indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function Uv(e,t,n,r,o){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(pl("startRow",t),pl("endRow",n),pl("startColumn",r),pl("endColumn",o),t>n||r>o||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||o<0||o>=e.columns)throw new RangeError("Submatrix indices are out of range")}function vl(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],r=0;r<e;r++)n.push(t);return n}function pl(e,t){if(typeof t!="number")throw new TypeError("".concat(e," must be a number"))}function kg(e){for(var t=vl(e.rows),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}function Gg(e){for(var t=vl(e.columns),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}function Pg(e){for(var t=0,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t+=e.get(n,r);return t}function Fg(e){for(var t=vl(e.rows,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}function zg(e){for(var t=vl(e.columns,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}function Bg(e){for(var t=1,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t*=e.get(n,r);return t}function Ug(e,t,n){for(var r=e.rows,o=e.columns,i=[],a=0;a<r;a++){for(var s=0,u=0,c=0,f=0;f<o;f++)c=e.get(a,f)-n[a],s+=c,u+=c*c;t?i.push((u-s*s/o)/(o-1)):i.push((u-s*s/o)/o)}return i}function Vg(e,t,n){for(var r=e.rows,o=e.columns,i=[],a=0;a<o;a++){for(var s=0,u=0,c=0,f=0;f<r;f++)c=e.get(f,a)-n[a],s+=c,u+=c*c;t?i.push((u-s*s/r)/(r-1)):i.push((u-s*s/r)/r)}return i}function $g(e,t,n){for(var r=e.rows,o=e.columns,i=r*o,a=0,s=0,u=0,c=0;c<r;c++)for(var f=0;f<o;f++)u=e.get(c,f)-n,a+=u,s+=u*u;return t?(s-a*a/i)/(i-1):(s-a*a/i)/i}function Xg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}function Wg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}function Hg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}function Zg(e){for(var t=[],n=0;n<e.rows;n++){for(var r=0,o=0;o<e.columns;o++)r+=Math.pow(e.get(n,o),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}function jg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}function Yg(e){for(var t=[],n=0;n<e.columns;n++){for(var r=0,o=0;o<e.rows;o++)r+=Math.pow(e.get(o,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}function Kg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}function qg(e){for(var t=e.size-1,n=0,r=0;r<e.columns;r++)for(var o=0;o<e.rows;o++)n+=Math.pow(e.get(o,r),2)/t;return Math.sqrt(n)}function Qg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}var kr=function(){function e(){fl()(this,e)}return ll()(e,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(n){if(typeof n!="function")throw new TypeError("callback must be a function");for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.call(this,r,o);return this}},{key:"to1DArray",value:function(){for(var n=[],r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.push(this.get(r,o));return n}},{key:"to2DArray",value:function(){for(var n=[],r=0;r<this.rows;r++){n.push([]);for(var o=0;o<this.columns;o++)n[r].push(this.get(r,o))}return n}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var n=0;n<this.rows;n++)for(var r=0;r<=n;r++)if(this.get(n,r)!==this.get(r,n))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var n=0,r=0,o=-1,i=!0,a=!1;n<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(n,r)===0?r++:this.get(n,r)===1&&r>o?(a=!0,o=r):(i=!1,a=!0);n++}return i}},{key:"isReducedEchelonForm",value:function(){for(var n=0,r=0,o=-1,i=!0,a=!1;n<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(n,r)===0?r++:this.get(n,r)===1&&r>o?(a=!0,o=r):(i=!1,a=!0);for(var s=r+1;s<this.rows;s++)this.get(n,s)!==0&&(i=!1);n++}return i}},{key:"echelonForm",value:function(){for(var n=this.clone(),r=0,o=0;r<n.rows&&o<n.columns;){for(var i=r,a=r;a<n.rows;a++)n.get(a,o)>n.get(i,o)&&(i=a);if(n.get(i,o)===0)o++;else{n.swapRows(r,i);for(var s=n.get(r,o),u=o;u<n.columns;u++)n.set(r,u,n.get(r,u)/s);for(var c=r+1;c<n.rows;c++){var f=n.get(c,o)/n.get(r,o);n.set(c,o,0);for(var l=o+1;l<n.columns;l++)n.set(c,l,n.get(c,l)-n.get(r,l)*f)}r++,o++}}return n}},{key:"reducedEchelonForm",value:function(){for(var n=this.echelonForm(),r=n.columns,o=n.rows,i=o-1;i>=0;)if(n.maxRow(i)===0)i--;else{for(var a=0,s=!1;a<o&&s===!1;)n.get(i,a)===1?s=!0:a++;for(var u=0;u<i;u++)for(var c=n.get(u,a),f=a;f<r;f++){var l=n.get(u,f)-c*n.get(i,f);n.set(u,f,l)}i--}return n}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Er()(n)!=="object")throw new TypeError("options must be an object");var r=n.rows,o=r===void 0?1:r,i=n.columns,a=i===void 0?1:i;if(!Number.isInteger(o)||o<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");for(var s=new Ct(this.rows*o,this.columns*a),u=0;u<o;u++)for(var c=0;c<a;c++)s.setSubMatrix(this,this.rows*u,this.columns*c);return s}},{key:"fill",value:function(n){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,n);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(n){si(this,n);for(var r=[],o=0;o<this.columns;o++)r.push(this.get(n,o));return r}},{key:"getRowVector",value:function(n){return Ct.rowVector(this.getRow(n))}},{key:"setRow",value:function(n,r){si(this,n),r=wu(this,r);for(var o=0;o<this.columns;o++)this.set(n,o,r[o]);return this}},{key:"swapRows",value:function(n,r){si(this,n),si(this,r);for(var o=0;o<this.columns;o++){var i=this.get(n,o);this.set(n,o,this.get(r,o)),this.set(r,o,i)}return this}},{key:"getColumn",value:function(n){ui(this,n);for(var r=[],o=0;o<this.rows;o++)r.push(this.get(o,n));return r}},{key:"getColumnVector",value:function(n){return Ct.columnVector(this.getColumn(n))}},{key:"setColumn",value:function(n,r){ui(this,n),r=Su(this,r);for(var o=0;o<this.rows;o++)this.set(o,n,r[o]);return this}},{key:"swapColumns",value:function(n,r){ui(this,n),ui(this,r);for(var o=0;o<this.rows;o++){var i=this.get(o,n);this.set(o,n,this.get(o,r)),this.set(o,r,i)}return this}},{key:"addRowVector",value:function(n){n=wu(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)+n[o]);return this}},{key:"subRowVector",value:function(n){n=wu(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)-n[o]);return this}},{key:"mulRowVector",value:function(n){n=wu(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)*n[o]);return this}},{key:"divRowVector",value:function(n){n=wu(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)/n[o]);return this}},{key:"addColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)+n[r]);return this}},{key:"subColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)-n[r]);return this}},{key:"mulColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)*n[r]);return this}},{key:"divColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)/n[r]);return this}},{key:"mulRow",value:function(n,r){si(this,n);for(var o=0;o<this.columns;o++)this.set(n,o,this.get(n,o)*r);return this}},{key:"mulColumn",value:function(n,r){ui(this,n);for(var o=0;o<this.rows;o++)this.set(o,n,this.get(o,n)*r);return this}},{key:"max",value:function(){for(var n=this.get(0,0),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.get(r,o)>n&&(n=this.get(r,o));return n}},{key:"maxIndex",value:function(){for(var n=this.get(0,0),r=[0,0],o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.get(o,i)>n&&(n=this.get(o,i),r[0]=o,r[1]=i);return r}},{key:"min",value:function(){for(var n=this.get(0,0),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.get(r,o)<n&&(n=this.get(r,o));return n}},{key:"minIndex",value:function(){for(var n=this.get(0,0),r=[0,0],o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.get(o,i)<n&&(n=this.get(o,i),r[0]=o,r[1]=i);return r}},{key:"maxRow",value:function(n){si(this,n);for(var r=this.get(n,0),o=1;o<this.columns;o++)this.get(n,o)>r&&(r=this.get(n,o));return r}},{key:"maxRowIndex",value:function(n){si(this,n);for(var r=this.get(n,0),o=[n,0],i=1;i<this.columns;i++)this.get(n,i)>r&&(r=this.get(n,i),o[1]=i);return o}},{key:"minRow",value:function(n){si(this,n);for(var r=this.get(n,0),o=1;o<this.columns;o++)this.get(n,o)<r&&(r=this.get(n,o));return r}},{key:"minRowIndex",value:function(n){si(this,n);for(var r=this.get(n,0),o=[n,0],i=1;i<this.columns;i++)this.get(n,i)<r&&(r=this.get(n,i),o[1]=i);return o}},{key:"maxColumn",value:function(n){ui(this,n);for(var r=this.get(0,n),o=1;o<this.rows;o++)this.get(o,n)>r&&(r=this.get(o,n));return r}},{key:"maxColumnIndex",value:function(n){ui(this,n);for(var r=this.get(0,n),o=[0,n],i=1;i<this.rows;i++)this.get(i,n)>r&&(r=this.get(i,n),o[0]=i);return o}},{key:"minColumn",value:function(n){ui(this,n);for(var r=this.get(0,n),o=1;o<this.rows;o++)this.get(o,n)<r&&(r=this.get(o,n));return r}},{key:"minColumnIndex",value:function(n){ui(this,n);for(var r=this.get(0,n),o=[0,n],i=1;i<this.rows;i++)this.get(i,n)<r&&(r=this.get(i,n),o[0]=i);return o}},{key:"diag",value:function(){for(var n=Math.min(this.rows,this.columns),r=[],o=0;o<n;o++)r.push(this.get(o,o));return r}},{key:"norm",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",r=0;if(n==="max")return this.max();if(n==="frobenius"){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)r=r+this.get(o,i)*this.get(o,i);return Math.sqrt(r)}else throw new RangeError("unknown norm type: ".concat(n))}},{key:"cumulativeSum",value:function(){for(var n=0,r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n+=this.get(r,o),this.set(r,o,n);return this}},{key:"dot",value:function(n){e.isMatrix(n)&&(n=n.to1DArray());var r=this.to1DArray();if(r.length!==n.length)throw new RangeError("vectors do not have the same size");for(var o=0,i=0;i<r.length;i++)o+=r[i]*n[i];return o}},{key:"mmul",value:function(n){n=Ct.checkMatrix(n);for(var r=this.rows,o=this.columns,i=n.columns,a=new Ct(r,i),s=new Float64Array(o),u=0;u<i;u++){for(var c=0;c<o;c++)s[c]=n.get(c,u);for(var f=0;f<r;f++){for(var l=0,d=0;d<o;d++)l+=this.get(f,d)*s[d];a.set(f,u,l)}}return a}},{key:"strassen2x2",value:function(n){n=Ct.checkMatrix(n);var r=new Ct(2,2),o=this.get(0,0),i=n.get(0,0),a=this.get(0,1),s=n.get(0,1),u=this.get(1,0),c=n.get(1,0),f=this.get(1,1),l=n.get(1,1),d=(o+f)*(i+l),h=(u+f)*i,v=o*(s-l),m=f*(c-i),y=(o+a)*l,E=(u-o)*(i+s),g=(a-f)*(c+l),b=d+m-y+g,_=v+y,S=h+m,V=d-h+v+E;return r.set(0,0,b),r.set(0,1,_),r.set(1,0,S),r.set(1,1,V),r}},{key:"strassen3x3",value:function(n){n=Ct.checkMatrix(n);var r=new Ct(3,3),o=this.get(0,0),i=this.get(0,1),a=this.get(0,2),s=this.get(1,0),u=this.get(1,1),c=this.get(1,2),f=this.get(2,0),l=this.get(2,1),d=this.get(2,2),h=n.get(0,0),v=n.get(0,1),m=n.get(0,2),y=n.get(1,0),E=n.get(1,1),g=n.get(1,2),b=n.get(2,0),_=n.get(2,1),S=n.get(2,2),V=(o+i+a-s-u-l-d)*E,fe=(o-s)*(-v+E),ee=u*(-h+v+y-E-g-b+S),j=(-o+s+u)*(h-v+E),q=(s+u)*(-h+v),me=o*h,G=(-o+f+l)*(h-m+g),ye=(-o+f)*(m-g),Ge=(f+l)*(-h+m),Ue=(o+i+a-u-c-f-l)*g,pt=l*(-h+m+y-E-g-b+_),Ke=(-a+l+d)*(E+b-_),Et=(a-d)*(E-_),dt=a*b,Bt=(l+d)*(-b+_),un=(-a+u+c)*(g+b-S),qn=(a-c)*(g-S),ar=(u+c)*(-b+S),We=i*y,tn=c*_,fr=s*m,mn=f*v,Vn=d*S,$e=me+dt+We,ft=V+j+q+me+Ke+dt+Bt,Mn=me+G+Ge+Ue+dt+un+ar,Ut=fe+ee+j+me+dt+un+qn,Wn=fe+j+q+me+tn,cn=dt+un+qn+ar+fr,kn=me+G+ye+pt+Ke+Et+dt,Gr=Ke+Et+dt+Bt+mn,Ir=me+G+ye+Ge+Vn;return r.set(0,0,$e),r.set(0,1,ft),r.set(0,2,Mn),r.set(1,0,Ut),r.set(1,1,Wn),r.set(1,2,cn),r.set(2,0,kn),r.set(2,1,Gr),r.set(2,2,Ir),r}},{key:"mmulStrassen",value:function(n){n=Ct.checkMatrix(n);var r=this.clone(),o=r.rows,i=r.columns,a=n.rows,s=n.columns;i!==a&&console.warn("Multiplying ".concat(o," x ").concat(i," and ").concat(a," x ").concat(s," matrix: dimensions do not match."));function u(d,h,v){var m=d.rows,y=d.columns;if(m===h&&y===v)return d;var E=e.zeros(h,v);return E=E.setSubMatrix(d,0,0),E}var c=Math.max(o,a),f=Math.max(i,s);r=u(r,c,f),n=u(n,c,f);function l(d,h,v,m){if(v<=512||m<=512)return d.mmul(h);v%2===1&&m%2===1?(d=u(d,v+1,m+1),h=u(h,v+1,m+1)):v%2===1?(d=u(d,v+1,m),h=u(h,v+1,m)):m%2===1&&(d=u(d,v,m+1),h=u(h,v,m+1));var y=parseInt(d.rows/2,10),E=parseInt(d.columns/2,10),g=d.subMatrix(0,y-1,0,E-1),b=h.subMatrix(0,y-1,0,E-1),_=d.subMatrix(0,y-1,E,d.columns-1),S=h.subMatrix(0,y-1,E,h.columns-1),V=d.subMatrix(y,d.rows-1,0,E-1),fe=h.subMatrix(y,h.rows-1,0,E-1),ee=d.subMatrix(y,d.rows-1,E,d.columns-1),j=h.subMatrix(y,h.rows-1,E,h.columns-1),q=l(e.add(g,ee),e.add(b,j),y,E),me=l(e.add(V,ee),b,y,E),G=l(g,e.sub(S,j),y,E),ye=l(ee,e.sub(fe,b),y,E),Ge=l(e.add(g,_),j,y,E),Ue=l(e.sub(V,g),e.add(b,S),y,E),pt=l(e.sub(_,ee),e.add(fe,j),y,E),Ke=e.add(q,ye);Ke.sub(Ge),Ke.add(pt);var Et=e.add(G,Ge),dt=e.add(me,ye),Bt=e.sub(q,me);Bt.add(G),Bt.add(Ue);var un=e.zeros(2*Ke.rows,2*Ke.columns);return un=un.setSubMatrix(Ke,0,0),un=un.setSubMatrix(Et,Ke.rows,0),un=un.setSubMatrix(dt,0,Ke.columns),un=un.setSubMatrix(Bt,Ke.rows,Ke.columns),un.subMatrix(0,v-1,0,m-1)}return l(r,n,c,f)}},{key:"scaleRows",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Er()(n)!=="object")throw new TypeError("options must be an object");var r=n.min,o=r===void 0?0:r,i=n.max,a=i===void 0?1:i;if(!Number.isFinite(o))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(o>=a)throw new RangeError("min must be smaller than max");for(var s=new Ct(this.rows,this.columns),u=0;u<this.rows;u++){var c=this.getRow(u);Fv(c,{min:o,max:a,output:c}),s.setRow(u,c)}return s}},{key:"scaleColumns",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Er()(n)!=="object")throw new TypeError("options must be an object");var r=n.min,o=r===void 0?0:r,i=n.max,a=i===void 0?1:i;if(!Number.isFinite(o))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(o>=a)throw new RangeError("min must be smaller than max");for(var s=new Ct(this.rows,this.columns),u=0;u<this.columns;u++){var c=this.getColumn(u);Fv(c,{min:o,max:a,output:c}),s.setColumn(u,c)}return s}},{key:"flipRows",value:function(){for(var n=Math.ceil(this.columns/2),r=0;r<this.rows;r++)for(var o=0;o<n;o++){var i=this.get(r,o),a=this.get(r,this.columns-1-o);this.set(r,o,a),this.set(r,this.columns-1-o,i)}return this}},{key:"flipColumns",value:function(){for(var n=Math.ceil(this.rows/2),r=0;r<this.columns;r++)for(var o=0;o<n;o++){var i=this.get(o,r),a=this.get(this.rows-1-o,r);this.set(o,r,a),this.set(this.rows-1-o,r,i)}return this}},{key:"kroneckerProduct",value:function(n){n=Ct.checkMatrix(n);for(var r=this.rows,o=this.columns,i=n.rows,a=n.columns,s=new Ct(r*i,o*a),u=0;u<r;u++)for(var c=0;c<o;c++)for(var f=0;f<i;f++)for(var l=0;l<a;l++)s.set(i*u+f,a*c+l,this.get(u,c)*n.get(f,l));return s}},{key:"transpose",value:function(){for(var n=new Ct(this.columns,this.rows),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.set(o,r,this.get(r,o));return n}},{key:"sortRows",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vv,r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(n));return this}},{key:"sortColumns",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vv,r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(n));return this}},{key:"subMatrix",value:function(n,r,o,i){Uv(this,n,r,o,i);for(var a=new Ct(r-n+1,i-o+1),s=n;s<=r;s++)for(var u=o;u<=i;u++)a.set(s-n,u-o,this.get(s,u));return a}},{key:"subMatrixRow",value:function(n,r,o){if(r===void 0&&(r=0),o===void 0&&(o=this.columns-1),r>o||r<0||r>=this.columns||o<0||o>=this.columns)throw new RangeError("Argument out of range");for(var i=new Ct(n.length,o-r+1),a=0;a<n.length;a++)for(var s=r;s<=o;s++){if(n[a]<0||n[a]>=this.rows)throw new RangeError("Row index out of range: ".concat(n[a]));i.set(a,s-r,this.get(n[a],s))}return i}},{key:"subMatrixColumn",value:function(n,r,o){if(r===void 0&&(r=0),o===void 0&&(o=this.rows-1),r>o||r<0||r>=this.rows||o<0||o>=this.rows)throw new RangeError("Argument out of range");for(var i=new Ct(o-r+1,n.length),a=0;a<n.length;a++)for(var s=r;s<=o;s++){if(n[a]<0||n[a]>=this.columns)throw new RangeError("Column index out of range: ".concat(n[a]));i.set(s-r,a,this.get(s,n[a]))}return i}},{key:"setSubMatrix",value:function(n,r,o){n=Ct.checkMatrix(n);var i=r+n.rows-1,a=o+n.columns-1;Uv(this,r,i,o,a);for(var s=0;s<n.rows;s++)for(var u=0;u<n.columns;u++)this.set(r+s,o+u,n.get(s,u));return this}},{key:"selection",value:function(n,r){for(var o=Lg(this,n,r),i=new Ct(n.length,r.length),a=0;a<o.row.length;a++)for(var s=o.row[a],u=0;u<o.column.length;u++){var c=o.column[u];i.set(a,u,this.get(s,c))}return i}},{key:"trace",value:function(){for(var n=Math.min(this.rows,this.columns),r=0,o=0;o<n;o++)r+=this.get(o,o);return r}},{key:"clone",value:function(){for(var n=new Ct(this.rows,this.columns),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.set(r,o,this.get(r,o));return n}},{key:"sum",value:function(n){switch(n){case"row":return kg(this);case"column":return Gg(this);case void 0:return Pg(this);default:throw new Error("invalid option: ".concat(n))}}},{key:"product",value:function(n){switch(n){case"row":return Fg(this);case"column":return zg(this);case void 0:return Bg(this);default:throw new Error("invalid option: ".concat(n))}}},{key:"mean",value:function(n){var r=this.sum(n);switch(n){case"row":{for(var o=0;o<this.rows;o++)r[o]/=this.columns;return r}case"column":{for(var i=0;i<this.columns;i++)r[i]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error("invalid option: ".concat(n))}}},{key:"variance",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Er()(n)==="object"&&(r=n,n=void 0),Er()(r)!=="object")throw new TypeError("options must be an object");var o=r,i=o.unbiased,a=i===void 0?!0:i,s=o.mean,u=s===void 0?this.mean(n):s;if(typeof a!="boolean")throw new TypeError("unbiased must be a boolean");switch(n){case"row":{if(!Array.isArray(u))throw new TypeError("mean must be an array");return Ug(this,a,u)}case"column":{if(!Array.isArray(u))throw new TypeError("mean must be an array");return Vg(this,a,u)}case void 0:{if(typeof u!="number")throw new TypeError("mean must be a number");return $g(this,a,u)}default:throw new Error("invalid option: ".concat(n))}}},{key:"standardDeviation",value:function(n,r){Er()(n)==="object"&&(r=n,n=void 0);var o=this.variance(n,r);if(n===void 0)return Math.sqrt(o);for(var i=0;i<o.length;i++)o[i]=Math.sqrt(o[i]);return o}},{key:"center",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Er()(n)==="object"&&(r=n,n=void 0),Er()(r)!=="object")throw new TypeError("options must be an object");var o=r,i=o.center,a=i===void 0?this.mean(n):i;switch(n){case"row":{if(!Array.isArray(a))throw new TypeError("center must be an array");return Xg(this,a),this}case"column":{if(!Array.isArray(a))throw new TypeError("center must be an array");return Wg(this,a),this}case void 0:{if(typeof a!="number")throw new TypeError("center must be a number");return Hg(this,a),this}default:throw new Error("invalid option: ".concat(n))}}},{key:"scale",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Er()(n)==="object"&&(r=n,n=void 0),Er()(r)!=="object")throw new TypeError("options must be an object");var o=r.scale;switch(n){case"row":{if(o===void 0)o=Zg(this);else if(!Array.isArray(o))throw new TypeError("scale must be an array");return jg(this,o),this}case"column":{if(o===void 0)o=Yg(this);else if(!Array.isArray(o))throw new TypeError("scale must be an array");return Kg(this,o),this}case void 0:{if(o===void 0)o=qg(this);else if(typeof o!="number")throw new TypeError("scale must be a number");return Qg(this,o),this}default:throw new Error("invalid option: ".concat(n))}}},{key:"toString",value:function(n){return Bv(this,n)}}],[{key:"from1DArray",value:function(n,r,o){var i=n*r;if(i!==o.length)throw new RangeError("data length does not match given dimensions");for(var a=new Ct(n,r),s=0;s<n;s++)for(var u=0;u<r;u++)a.set(s,u,o[s*r+u]);return a}},{key:"rowVector",value:function(n){for(var r=new Ct(1,n.length),o=0;o<n.length;o++)r.set(0,o,n[o]);return r}},{key:"columnVector",value:function(n){for(var r=new Ct(n.length,1),o=0;o<n.length;o++)r.set(o,0,n[o]);return r}},{key:"zeros",value:function(n,r){return new Ct(n,r)}},{key:"ones",value:function(n,r){return new Ct(n,r).fill(1)}},{key:"rand",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Er()(o)!=="object")throw new TypeError("options must be an object");for(var i=o.random,a=i===void 0?Math.random:i,s=new Ct(n,r),u=0;u<n;u++)for(var c=0;c<r;c++)s.set(u,c,a());return s}},{key:"randInt",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Er()(o)!=="object")throw new TypeError("options must be an object");var i=o.min,a=i===void 0?0:i,s=o.max,u=s===void 0?1e3:s,c=o.random,f=c===void 0?Math.random:c;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(a>=u)throw new RangeError("min must be smaller than max");for(var l=u-a,d=new Ct(n,r),h=0;h<n;h++)for(var v=0;v<r;v++){var m=a+Math.round(f()*l);d.set(h,v,m)}return d}},{key:"eye",value:function(n,r,o){r===void 0&&(r=n),o===void 0&&(o=1);for(var i=Math.min(n,r),a=this.zeros(n,r),s=0;s<i;s++)a.set(s,s,o);return a}},{key:"diag",value:function(n,r,o){var i=n.length;r===void 0&&(r=i),o===void 0&&(o=r);for(var a=Math.min(i,r,o),s=this.zeros(r,o),u=0;u<a;u++)s.set(u,u,n[u]);return s}},{key:"min",value:function(n,r){n=this.checkMatrix(n),r=this.checkMatrix(r);for(var o=n.rows,i=n.columns,a=new Ct(o,i),s=0;s<o;s++)for(var u=0;u<i;u++)a.set(s,u,Math.min(n.get(s,u),r.get(s,u)));return a}},{key:"max",value:function(n,r){n=this.checkMatrix(n),r=this.checkMatrix(r);for(var o=n.rows,i=n.columns,a=new this(o,i),s=0;s<o;s++)for(var u=0;u<i;u++)a.set(s,u,Math.max(n.get(s,u),r.get(s,u)));return a}},{key:"checkMatrix",value:function(n){return e.isMatrix(n)?n:new Ct(n)}},{key:"isMatrix",value:function(n){return n!=null&&n.klass==="Matrix"}}]),e}();kr.prototype.klass="Matrix",typeof Symbol!="undefined"&&(kr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ng);function Vv(e,t){return e-t}kr.random=kr.rand,kr.randomInt=kr.randInt,kr.diagonal=kr.diag,kr.prototype.diagonal=kr.prototype.diag,kr.identity=kr.eye,kr.prototype.negate=kr.prototype.neg,kr.prototype.tensorProduct=kr.prototype.kroneckerProduct;var Ct=function(e){Gv()(n,e);var t=Pv()(n);function n(r,o){var i;if(fl()(this,n),i=t.call(this),n.isMatrix(r))return kv()(i,r.clone());if(Number.isInteger(r)&&r>0)if(i.data=[],Number.isInteger(o)&&o>0)for(var a=0;a<r;a++)i.data.push(new Float64Array(o));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(r)){var s=r;if(r=s.length,o=s[0].length,typeof o!="number"||o===0)throw new TypeError("Data must be a 2D array with at least one element");i.data=[];for(var u=0;u<r;u++){if(s[u].length!==o)throw new RangeError("Inconsistent array dimensions");i.data.push(Float64Array.from(s[u]))}}else throw new TypeError("First argument must be a positive number or an array");return i.rows=r,i.columns=o,kv()(i,bg()(i))}return ll()(n,[{key:"set",value:function(o,i,a){return this.data[o][i]=a,this}},{key:"get",value:function(o,i){return this.data[o][i]}},{key:"removeRow",value:function(o){if(si(this,o),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(o,1),this.rows-=1,this}},{key:"addRow",value:function(o,i){return i===void 0&&(i=o,o=this.rows),si(this,o,!0),i=Float64Array.from(wu(this,i,!0)),this.data.splice(o,0,i),this.rows+=1,this}},{key:"removeColumn",value:function(o){if(ui(this,o),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(var i=0;i<this.rows;i++){for(var a=new Float64Array(this.columns-1),s=0;s<o;s++)a[s]=this.data[i][s];for(var u=o+1;u<this.columns;u++)a[u-1]=this.data[i][u];this.data[i]=a}return this.columns-=1,this}},{key:"addColumn",value:function(o,i){typeof i=="undefined"&&(i=o,o=this.columns),ui(this,o,!0),i=Su(this,i);for(var a=0;a<this.rows;a++){for(var s=new Float64Array(this.columns+1),u=0;u<o;u++)s[u]=this.data[a][u];for(s[u++]=i[a];u<this.columns+1;u++)s[u]=this.data[a][u-1];this.data[a]=s}return this.columns+=1,this}}]),n}(kr);Cg(kr,Ct);var Jg=function(e){Gv()(n,e);var t=Pv()(n);function n(r){var o;return fl()(this,n),o=t.call(this),o.data=r,o.rows=r.length,o.columns=r[0].length,o}return ll()(n,[{key:"set",value:function(o,i,a){return this.data[o][i]=a,this}},{key:"get",value:function(o,i){return this.data[o][i]}}]),n}(kr);function Tu(e,t){var n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):t!==0?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}var $v=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fl()(this,e),t=Jg.checkMatrix(t);var r=t.rows,o=t.columns,i=n.computeLeftSingularVectors,a=i===void 0?!0:i,s=n.computeRightSingularVectors,u=s===void 0?!0:s,c=n.autoTranspose,f=c===void 0?!1:c,l=!!a,d=!!u,h=!1,v;if(r<o)if(!f)v=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{v=t.transpose(),r=v.rows,o=v.columns,h=!0;var m=l;l=d,d=m}else v=t.clone();for(var y=Math.min(r,o),E=Math.min(r+1,o),g=new Float64Array(E),b=new Ct(r,y),_=new Ct(o,o),S=new Float64Array(o),V=new Float64Array(r),fe=new Float64Array(E),ee=0;ee<E;ee++)fe[ee]=ee;for(var j=Math.min(r-1,o),q=Math.max(0,Math.min(o-2,r)),me=Math.max(j,q),G=0;G<me;G++){if(G<j){g[G]=0;for(var ye=G;ye<r;ye++)g[G]=Tu(g[G],v.get(ye,G));if(g[G]!==0){v.get(G,G)<0&&(g[G]=-g[G]);for(var Ge=G;Ge<r;Ge++)v.set(Ge,G,v.get(Ge,G)/g[G]);v.set(G,G,v.get(G,G)+1)}g[G]=-g[G]}for(var Ue=G+1;Ue<o;Ue++){if(G<j&&g[G]!==0){for(var pt=0,Ke=G;Ke<r;Ke++)pt+=v.get(Ke,G)*v.get(Ke,Ue);pt=-pt/v.get(G,G);for(var Et=G;Et<r;Et++)v.set(Et,Ue,v.get(Et,Ue)+pt*v.get(Et,G))}S[Ue]=v.get(G,Ue)}if(l&&G<j)for(var dt=G;dt<r;dt++)b.set(dt,G,v.get(dt,G));if(G<q){S[G]=0;for(var Bt=G+1;Bt<o;Bt++)S[G]=Tu(S[G],S[Bt]);if(S[G]!==0){S[G+1]<0&&(S[G]=0-S[G]);for(var un=G+1;un<o;un++)S[un]/=S[G];S[G+1]+=1}if(S[G]=-S[G],G+1<r&&S[G]!==0){for(var qn=G+1;qn<r;qn++)V[qn]=0;for(var ar=G+1;ar<r;ar++)for(var We=G+1;We<o;We++)V[ar]+=S[We]*v.get(ar,We);for(var tn=G+1;tn<o;tn++)for(var fr=-S[tn]/S[G+1],mn=G+1;mn<r;mn++)v.set(mn,tn,v.get(mn,tn)+fr*V[mn])}if(d)for(var Vn=G+1;Vn<o;Vn++)_.set(Vn,G,S[Vn])}}var $e=Math.min(o,r+1);if(j<o&&(g[j]=v.get(j,j)),r<$e&&(g[$e-1]=0),q+1<$e&&(S[q]=v.get(q,$e-1)),S[$e-1]=0,l){for(var ft=j;ft<y;ft++){for(var Mn=0;Mn<r;Mn++)b.set(Mn,ft,0);b.set(ft,ft,1)}for(var Ut=j-1;Ut>=0;Ut--)if(g[Ut]!==0){for(var Wn=Ut+1;Wn<y;Wn++){for(var cn=0,kn=Ut;kn<r;kn++)cn+=b.get(kn,Ut)*b.get(kn,Wn);cn=-cn/b.get(Ut,Ut);for(var Gr=Ut;Gr<r;Gr++)b.set(Gr,Wn,b.get(Gr,Wn)+cn*b.get(Gr,Ut))}for(var Ir=Ut;Ir<r;Ir++)b.set(Ir,Ut,-b.get(Ir,Ut));b.set(Ut,Ut,1+b.get(Ut,Ut));for(var Qr=0;Qr<Ut-1;Qr++)b.set(Qr,Ut,0)}else{for(var Xc=0;Xc<r;Xc++)b.set(Xc,Ut,0);b.set(Ut,Ut,1)}}if(d)for(var Jr=o-1;Jr>=0;Jr--){if(Jr<q&&S[Jr]!==0)for(var Cs=Jr+1;Cs<o;Cs++){for(var Ls=0,Lu=Jr+1;Lu<o;Lu++)Ls+=_.get(Lu,Jr)*_.get(Lu,Cs);Ls=-Ls/_.get(Jr+1,Jr);for(var es=Jr+1;es<o;es++)_.set(es,Cs,_.get(es,Cs)+Ls*_.get(es,Jr))}for(var ih=0;ih<o;ih++)_.set(ih,Jr,0);_.set(Jr,Jr,1)}for(var hp=$e-1,ah=0,vp=Number.EPSILON;$e>0;){var mt=void 0,Wc=void 0;for(mt=$e-2;mt>=-1&&mt!==-1;mt--){var hE=Number.MIN_VALUE+vp*Math.abs(g[mt]+Math.abs(g[mt+1]));if(Math.abs(S[mt])<=hE||Number.isNaN(S[mt])){S[mt]=0;break}}if(mt===$e-2)Wc=4;else{var ko=void 0;for(ko=$e-1;ko>=mt&&ko!==mt;ko--){var vE=(ko!==$e?Math.abs(S[ko]):0)+(ko!==mt+1?Math.abs(S[ko-1]):0);if(Math.abs(g[ko])<=vp*vE){g[ko]=0;break}}ko===mt?Wc=3:ko===$e-1?Wc=1:(Wc=2,mt=ko)}switch(mt++,Wc){case 1:{var sh=S[$e-2];S[$e-2]=0;for(var Ho=$e-2;Ho>=mt;Ho--){var Hc=Tu(g[Ho],sh),uh=g[Ho]/Hc,ch=sh/Hc;if(g[Ho]=Hc,Ho!==mt&&(sh=-ch*S[Ho-1],S[Ho-1]=uh*S[Ho-1]),d)for(var ts=0;ts<o;ts++)Hc=uh*_.get(ts,Ho)+ch*_.get(ts,$e-1),_.set(ts,$e-1,-ch*_.get(ts,Ho)+uh*_.get(ts,$e-1)),_.set(ts,Ho,Hc)}break}case 2:{var fh=S[mt-1];S[mt-1]=0;for(var li=mt;li<$e;li++){var Zc=Tu(g[li],fh),lh=g[li]/Zc,dh=fh/Zc;if(g[li]=Zc,fh=-dh*S[li],S[li]=lh*S[li],l)for(var ns=0;ns<r;ns++)Zc=lh*b.get(ns,li)+dh*b.get(ns,mt-1),b.set(ns,mt-1,-dh*b.get(ns,li)+lh*b.get(ns,mt-1)),b.set(ns,li,Zc)}break}case 3:{var jc=Math.max(Math.abs(g[$e-1]),Math.abs(g[$e-2]),Math.abs(S[$e-2]),Math.abs(g[mt]),Math.abs(S[mt])),Ou=g[$e-1]/jc,pp=g[$e-2]/jc,Tl=S[$e-2]/jc,hh=g[mt]/jc,pE=S[mt]/jc,Os=((pp+Ou)*(pp-Ou)+Tl*Tl)/2,Il=Ou*Tl*(Ou*Tl),Yc=0;(Os!==0||Il!==0)&&(Os<0?Yc=0-Math.sqrt(Os*Os+Il):Yc=Math.sqrt(Os*Os+Il),Yc=Il/(Os+Yc));for(var Ms=(hh+Ou)*(hh-Ou)+Yc,Mu=hh*pE,vn=mt;vn<$e-1;vn++){var ho=Tu(Ms,Mu);ho===0&&(ho=Number.MIN_VALUE);var di=Ms/ho,hi=Mu/ho;if(vn!==mt&&(S[vn-1]=ho),Ms=di*g[vn]+hi*S[vn],S[vn]=di*S[vn]-hi*g[vn],Mu=hi*g[vn+1],g[vn+1]=di*g[vn+1],d)for(var rs=0;rs<o;rs++)ho=di*_.get(rs,vn)+hi*_.get(rs,vn+1),_.set(rs,vn+1,-hi*_.get(rs,vn)+di*_.get(rs,vn+1)),_.set(rs,vn,ho);if(ho=Tu(Ms,Mu),ho===0&&(ho=Number.MIN_VALUE),di=Ms/ho,hi=Mu/ho,g[vn]=ho,Ms=di*S[vn]+hi*g[vn+1],g[vn+1]=-hi*S[vn]+di*g[vn+1],Mu=hi*S[vn+1],S[vn+1]=di*S[vn+1],l&&vn<r-1)for(var os=0;os<r;os++)ho=di*b.get(os,vn)+hi*b.get(os,vn+1),b.set(os,vn+1,-hi*b.get(os,vn)+di*b.get(os,vn+1)),b.set(os,vn,ho)}S[$e-2]=Ms,ah=ah+1;break}case 4:{if(g[mt]<=0&&(g[mt]=g[mt]<0?-g[mt]:0,d))for(var Al=0;Al<=hp;Al++)_.set(Al,mt,-_.get(Al,mt));for(;mt<hp&&!(g[mt]>=g[mt+1]);){var Kc=g[mt];if(g[mt]=g[mt+1],g[mt+1]=Kc,d&&mt<o-1)for(var ku=0;ku<o;ku++)Kc=_.get(ku,mt+1),_.set(ku,mt+1,_.get(ku,mt)),_.set(ku,mt,Kc);if(l&&mt<r-1)for(var Gu=0;Gu<r;Gu++)Kc=b.get(Gu,mt+1),b.set(Gu,mt+1,b.get(Gu,mt)),b.set(Gu,mt,Kc);mt++}ah=0,$e--;break}}}if(h){var mE=_;_=b,b=mE}this.m=r,this.n=o,this.s=g,this.U=b,this.V=_}return ll()(e,[{key:"solve",value:function(n){for(var r=n,o=this.threshold,i=this.s.length,a=Ct.zeros(i,i),s=0;s<i;s++)Math.abs(this.s[s])<=o?a.set(s,s,0):a.set(s,s,1/this.s[s]);for(var u=this.U,c=this.rightSingularVectors,f=c.mmul(a),l=c.rows,d=u.rows,h=Ct.zeros(l,d),v=0;v<l;v++)for(var m=0;m<d;m++){for(var y=0,E=0;E<i;E++)y+=f.get(v,E)*u.get(m,E);h.set(v,m,y)}return h.mmul(r)}},{key:"solveForDiagonal",value:function(n){return this.solve(Ct.diag(n))}},{key:"inverse",value:function(){for(var n=this.V,r=this.threshold,o=n.rows,i=n.columns,a=new Ct(o,this.s.length),s=0;s<o;s++)for(var u=0;u<i;u++)Math.abs(this.s[u])>r&&a.set(s,u,n.get(s,u)/this.s[u]);for(var c=this.U,f=c.rows,l=c.columns,d=new Ct(o,f),h=0;h<o;h++)for(var v=0;v<f;v++){for(var m=0,y=0;y<l;y++)m+=a.get(h,y)*c.get(v,y);d.set(h,v,m)}return d}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var n=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,o=this.s,i=0,a=o.length;i<a;i++)o[i]>n&&r++;return r}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Ct.diag(this.s)}}]),e}();class ey{constructor(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}layout(){const t=this,{dimension:n,distances:r,linkDistance:o}=t;try{const i=Ct.mul(Ct.pow(r,2),-.5),a=i.mean("row"),s=i.mean("column"),u=i.mean();i.add(u).subRowVector(a).subColumnVector(s);const c=new $v(i),f=Ct.sqrt(c.diagonalMatrix).diagonal();return c.leftSingularVectors.toJSON().map(l=>Ct.mul([l],[f]).toJSON()[0].splice(0,n))}catch(i){const a=[];for(let s=0;s<r.length;s++){const u=Math.random()*o,c=Math.random()*o;a.push([u,c])}return a}}}const ty=800;class ny{constructor(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}layout(){const t=this,n=t.positions,r=[],o=t.iterations,i=t.width/10;t.maxDisplace=i,t.disp=r;for(let a=0;a<o;a++)n.forEach((s,u)=>{r[u]={x:0,y:0}}),t.getRepulsion(),t.updatePositions();return n}getRepulsion(){const t=this,n=t.positions,r=t.nodes,o=t.disp,i=t.k,a=t.radii||[];n.forEach((s,u)=>{o[u]={x:0,y:0},n.forEach((c,f)=>{if(u===f||a[u]!==a[f])return;let l=s[0]-c[0],d=s[1]-c[1],h=Math.sqrt(l*l+d*d);if(h===0){h=1;const v=u>f?1:-1;l=.01*v,d=.01*v}if(h<t.nodeSizeFunc(r[u])/2+t.nodeSizeFunc(r[f])/2){const v=i*i/h;o[u].x+=l/h*v,o[u].y+=d/h*v}})})}updatePositions(){const t=this,n=t.positions,r=t.disp,o=t.speed,i=t.strictRadial,a=t.focusID,s=t.maxDisplace||t.width/10;i&&r.forEach((c,f)=>{const l=n[f][0]-n[a][0],d=n[f][1]-n[a][1],h=Math.sqrt(l*l+d*d);let v=d/h,m=-l/h;const y=Math.sqrt(c.x*c.x+c.y*c.y);let E=Math.acos((v*c.x+m*c.y)/y);E>Math.PI/2&&(E-=Math.PI/2,v*=-1,m*=-1);const g=Math.cos(E)*y;c.x=v*g,c.y=m*g});const u=t.radii;n.forEach((c,f)=>{if(f===a)return;const l=Math.sqrt(r[f].x*r[f].x+r[f].y*r[f].y);if(l>0&&f!==a){const d=Math.min(s*(o/ty),l);if(c[0]+=r[f].x/l*d,c[1]+=r[f].y/l*d,i){let h=c[0]-n[a][0],v=c[1]-n[a][1];const m=Math.sqrt(h*h+v*v);h=h/m*u[f],v=v/m*u[f],c[0]=n[a][0]+h,c[1]=n[a][1]+v}}})}}function ry(e){const t=e.length,n=e[0].length,r=[];for(let o=0;o<t;o++){const i=[];for(let a=0;a<n;a++)e[o][a]!==0?i.push(1/(e[o][a]*e[o][a])):i.push(0);r.push(i)}return r}function oy(e,t){let n=-1;return e.forEach((r,o)=>{r.id===t&&(n=o)}),n}function Xv(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}class iy extends Yt{constructor(t){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const t=this,n=t.nodes,r=t.edges||[];if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const o=t.center;if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i=t.linkDistance;let a=null;if(on(t.focusNode)){let me=!1;for(let G=0;G<n.length;G++)n[G].id===t.focusNode&&(a=n[G],t.focusNode=a,me=!0,G=n.length);me||(a=null)}else a=t.focusNode;a||(a=n[0],t.focusNode=a);let s=oy(n,a.id);s<0&&(s=0),t.focusIndex=s;const u=nn({nodes:n,edges:r},!1),c=Jn(u),f=t.maxToFocus(c,s);t.handleInfinity(c,s,f+1),t.distances=c;const l=c[s],d=t.width||500,h=t.height||500;let v=d-o[0]>o[0]?o[0]:d-o[0],m=h-o[1]>o[1]?o[1]:h-o[1];v===0&&(v=d/2),m===0&&(m=h/2);const y=m>v?v:m,E=Math.max(...l),g=[];l.forEach((me,G)=>{t.unitRadius||(t.unitRadius=y/E),g[G]=me*t.unitRadius}),t.radii=g;const b=t.eIdealDisMatrix();t.eIdealDistances=b;const _=ry(b);t.weights=_;let V=new ey({linkDistance:i,distances:b}).layout();V.forEach(me=>{Tn(me[0])&&(me[0]=Math.random()*i),Tn(me[1])&&(me[1]=Math.random()*i)}),t.positions=V,V.forEach((me,G)=>{n[G].x=me[0]+o[0],n[G].y=me[1]+o[1]}),V.forEach(me=>{me[0]-=V[s][0],me[1]-=V[s][1]}),t.run();const fe=t.preventOverlap,ee=t.nodeSize;let j;const q=t.strictRadial;if(fe){const me=t.nodeSpacing;let G;_e(me)?G=()=>me:it(me)?G=me:G=()=>0,ee?bt(ee)?j=Ue=>(ee[0]>ee[1]?ee[0]:ee[1])+G(Ue):j=Ue=>ee+G(Ue):j=Ue=>Ue.size?bt(Ue.size)?(Ue.size[0]>Ue.size[1]?Ue.size[0]:Ue.size[1])+G(Ue):Vt(Ue.size)?(Ue.size.width>Ue.size.height?Ue.size.width:Ue.size.height)+G(Ue):Ue.size+G(Ue):10+G(Ue);const ye={nodes:n,nodeSizeFunc:j,adjMatrix:u,positions:V,radii:g,height:h,width:d,strictRadial:q,focusID:s,iterations:t.maxPreventOverlapIteration||200,k:V.length/4.5};V=new ny(ye).layout()}return V.forEach((me,G)=>{n[G].x=me[0]+o[0],n[G].y=me[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}run(){const t=this,n=t.maxIteration,r=t.positions||[],o=t.weights||[],i=t.eIdealDistances||[],a=t.radii||[];for(let s=0;s<=n;s++){const u=s/n;t.oneIteration(u,r,a,i,o)}}oneIteration(t,n,r,o,i){const a=this,s=1-t,u=a.focusIndex;n.forEach((c,f)=>{const l=Xv(c,[0,0]),d=l===0?0:1/l;if(f===u)return;let h=0,v=0,m=0;n.forEach((E,g)=>{if(f===g)return;const b=Xv(c,E),_=b===0?0:1/b,S=o[g][f];m+=i[f][g],h+=i[f][g]*(E[0]+S*(c[0]-E[0])*_),v+=i[f][g]*(E[1]+S*(c[1]-E[1])*_)});const y=r[f]===0?0:1/r[f];m*=s,m+=t*y*y,h*=s,h+=t*y*c[0]*d,c[0]=h/m,v*=s,v+=t*y*c[1]*d,c[1]=v/m})}eIdealDisMatrix(){const t=this,n=t.nodes;if(!n)return[];const r=t.distances,o=t.linkDistance,i=t.radii||[],a=t.unitRadius||50,s=[];return r&&r.forEach((u,c)=>{const f=[];u.forEach((l,d)=>{if(c===d)f.push(0);else if(i[c]===i[d])if(t.sortBy==="data")f.push(l*(Math.abs(c-d)*t.sortStrength)/(i[c]/a));else if(t.sortBy){let h=n[c][t.sortBy]||0,v=n[d][t.sortBy]||0;on(h)&&(h=h.charCodeAt(0)),on(v)&&(v=v.charCodeAt(0)),f.push(l*(Math.abs(h-v)*t.sortStrength)/(i[c]/a))}else f.push(l*o/(i[c]/a));else{const h=(o+a)/2;f.push(l*h)}}),s.push(f)}),s}handleInfinity(t,n,r){const o=t.length;for(let i=0;i<o;i++)if(t[n][i]===1/0){t[n][i]=r,t[i][n]=r;for(let a=0;a<o;a++)t[i][a]!==1/0&&t[n][a]===1/0&&(t[n][a]=r+t[i][a],t[a][n]=r+t[i][a])}for(let i=0;i<o;i++)if(i!==n){for(let a=0;a<o;a++)if(t[i][a]===1/0){let s=Math.abs(t[n][i]-t[n][a]);s=s===0?1:s,t[i][a]=s}}}maxToFocus(t,n){let r=0;for(let o=0;o<t[n].length;o++)t[n][o]!==1/0&&(r=t[n][o]>r?t[n][o]:r);return r}getType(){return"radial"}}class Wv extends Yt{constructor(t){super(),this.nodeSize=30,this.minNodeSpacing=10,this.nodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){var t,n;const r=this,{nodes:o,edges:i}=r,a=o.length;if(a===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(a===1){o[0].x=s[0],o[0].y=s[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const{nodeSize:u,nodeSpacing:c}=r,f=[];let l,d=0;bt(u)?l=Math.max(u[0],u[1]):l=u,bt(c)?d=Math.max(c[0],c[1]):_e(c)&&(d=c),o.forEach(b=>{f.push(b);let _=l;bt(b.size)?_=Math.max(b.size[0],b.size[1]):_e(b.size)?_=b.size:Vt(b.size)&&(_=Math.max(b.size.width,b.size.height)),l=Math.max(l,_),it(c)&&(d=Math.max(c(b),d))}),r.clockwise=r.counterclockwise!==void 0?!r.counterclockwise:r.clockwise;const h={},v={};if(f.forEach((b,_)=>{h[b.id]=b,v[b.id]=_}),(r.sortBy==="degree"||!on(r.sortBy)||f[0][r.sortBy]===void 0)&&(r.sortBy="degree",!_e(o[0].degree))){const b=Gn(o.length,v,i);f.forEach((_,S)=>{_.degree=b[S].all})}f.sort((b,_)=>_[r.sortBy]-b[r.sortBy]),r.maxValueNode=f[0],r.maxLevelDiff=r.maxLevelDiff||r.maxValueNode[r.sortBy]/4;const m=[[]];let y=m[0];f.forEach(b=>{if(y.length>0){const _=Math.abs(y[0][r.sortBy]-b[r.sortBy]);r.maxLevelDiff&&_>=r.maxLevelDiff&&(y=[],m.push(y))}y.push(b)});let E=l+(d||r.minNodeSpacing);if(!r.preventOverlap){const b=m.length>0&&m[0].length>1,S=(Math.min(r.width,r.height)/2-E)/(m.length+(b?1:0));E=Math.min(E,S)}let g=0;if(m.forEach(b=>{let _=r.sweep;_===void 0&&(_=2*Math.PI-2*Math.PI/b.length);const S=b.dTheta=_/Math.max(1,b.length-1);if(b.length>1&&r.preventOverlap){const V=Math.cos(S)-Math.cos(0),fe=Math.sin(S)-Math.sin(0),ee=Math.sqrt(E*E/(V*V+fe*fe));g=Math.max(ee,g)}b.r=g,g+=E}),r.equidistant){let b=0,_=0;for(let S=0;S<m.length;S++){const fe=m[S].r-_;b=Math.max(b,fe)}_=0,m.forEach((S,V)=>{V===0&&(_=S.r),S.r=_,_+=b})}return m.forEach(b=>{const _=b.dTheta,S=b.r;b.forEach((V,fe)=>{const ee=r.startAngle+(r.clockwise?1:-1)*_*fe;V.x=s[0]+S*Math.cos(ee),V.y=s[1]+S*Math.sin(ee)})}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:i}}getType(){return"concentric"}}class Hv extends Yt{constructor(t){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const t=this,{nodes:n,edges:r=[]}=t,o=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i=t.linkDistance,a=nn({nodes:n,edges:r},!1),s=Jn(a);t.handleInfinity(s);const u=bo(s,i);t.scaledDistances=u;const c=t.runMDS();return t.positions=c,c.forEach((f,l)=>{n[l].x=f[0]+o[0],n[l].y=f[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}runMDS(){const t=this,n=2,r=t.scaledDistances,o=Ct.mul(Ct.pow(r,2),-.5),i=o.mean("row"),a=o.mean("column"),s=o.mean();o.add(s).subRowVector(i).subColumnVector(a);const u=new $v(o),c=Ct.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(f=>Ct.mul([f],[c]).toJSON()[0].splice(0,n))}handleInfinity(t){let n=-999999;t.forEach(r=>{r.forEach(o=>{o!==1/0&&n<o&&(n=o)})}),t.forEach((r,o)=>{r.forEach((i,a)=>{i===1/0&&(t[o][a]=n)})})}getType(){return"mds"}}const ay=800;class sy extends Yt{constructor(t){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.animate=!0,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}}execute(){var t,n;const r=this,o=r.nodes;if(r.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(r.timeInterval),!o||o.length===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const i=r.center;if(o.length===1){o[0].x=i[0],o[0].y=i[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const a={},s={};return o.forEach((u,c)=>{_e(u.x)||(u.x=Math.random()*this.width),_e(u.y)||(u.y=Math.random()*this.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,r.run()}run(){var t;const n=this,r=n.nodes;if(!r)return;const{edges:o,maxIteration:i,workerEnabled:a,clustering:s,animate:u}=n,c={};if(s&&r.forEach(f=>{c[f.cluster]===void 0&&(c[f.cluster]={name:f.cluster,cx:0,cy:0,count:0})}),a||!u){for(let f=0;f<i;f++)n.runOneStep(c);(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window=="undefined")return;let f=0;this.timeInterval=window.setInterval(()=>{var l;n.runOneStep(c),f++,f>=i&&((l=n.onLayoutEnd)===null||l===void 0||l.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:r,edges:o}}runOneStep(t){var n;const r=this,o=r.nodes;if(!o)return;const{edges:i,center:a,gravity:s,speed:u,clustering:c}=r,f=r.height*r.width,l=Math.sqrt(f)/10,d=f/(o.length+1),h=Math.sqrt(d),v=[];if(o.forEach((m,y)=>{v[y]={x:0,y:0}}),r.applyCalculate(o,i,v,h,d),c){for(const y in t)t[y].cx=0,t[y].cy=0,t[y].count=0;o.forEach(y=>{const E=t[y.cluster];_e(y.x)&&(E.cx+=y.x),_e(y.y)&&(E.cy+=y.y),E.count++});for(const y in t)t[y].cx/=t[y].count,t[y].cy/=t[y].count;const m=r.clusterGravity||s;o.forEach((y,E)=>{if(!_e(y.x)||!_e(y.y))return;const g=t[y.cluster],b=Math.sqrt((y.x-g.cx)*(y.x-g.cx)+(y.y-g.cy)*(y.y-g.cy)),_=h*m;v[E].x-=_*(y.x-g.cx)/b,v[E].y-=_*(y.y-g.cy)/b})}o.forEach((m,y)=>{if(!_e(m.x)||!_e(m.y))return;const E=.01*h*s;v[y].x-=E*(m.x-a[0]),v[y].y-=E*(m.y-a[1])}),o.forEach((m,y)=>{if(_e(m.fx)&&_e(m.fy)){m.x=m.fx,m.y=m.fy;return}if(!_e(m.x)||!_e(m.y))return;const E=Math.sqrt(v[y].x*v[y].x+v[y].y*v[y].y);if(E>0){const g=Math.min(l*(u/ay),E);m.x+=v[y].x/E*g,m.y+=v[y].y/E*g}}),(n=r.tick)===null||n===void 0||n.call(r)}applyCalculate(t,n,r,o,i){const a=this;a.calRepulsive(t,r,i),n&&a.calAttractive(n,r,o)}calRepulsive(t,n,r){t.forEach((o,i)=>{n[i]={x:0,y:0},t.forEach((a,s)=>{if(i===s||!_e(o.x)||!_e(a.x)||!_e(o.y)||!_e(a.y))return;let u=o.x-a.x,c=o.y-a.y,f=u*u+c*c;if(f===0){f=1;const d=i>s?1:-1;u=.01*d,c=.01*d}const l=r/f;n[i].x+=u*l,n[i].y+=c*l})})}calAttractive(t,n,r){t.forEach(o=>{const i=ut(o,"source"),a=ut(o,"target");if(!i||!a)return;const s=this.nodeIdxMap[i],u=this.nodeIdxMap[a];if(s===u)return;const c=this.nodeMap[i],f=this.nodeMap[a];if(!_e(f.x)||!_e(c.x)||!_e(f.y)||!_e(c.y))return;const l=f.x-c.x,d=f.y-c.y,h=Math.sqrt(l*l+d*d),v=h*h/r;n[u].x-=l/h*v,n[u].y-=d/h*v,n[s].x+=l/h*v,n[s].y+=d/h*v})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"fruchterman"}}var Qa=ne(86669),Pe=ne(65213),ci=ne(34706),fi=ne(89364),uy=ne(73806),ml=ne.n(uy),cy=ne(59933),fy=ne.n(cy),ly=ne(24669),dy=ne.n(ly),hy=ne(3702),so=ne.n(hy),gE=null,vy=1;function Zv(){return vy++}var yE=null,EE=null,be;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(be||(be={}));var py=function(){function e(){(0,ci.Z)(this,e),this.config=void 0}return(0,fi.Z)(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(n){this.config=n}}]),e}(),bE=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Fc;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(Fc||(Fc={}));var jv;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(jv||(jv={}));var Iu;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(Iu||(Iu={}));var zc;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(zc||(zc={}));var my="__DefineValuePlaceholder__";function gy(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Yv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Kv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yv(Object(n),!0).forEach(function(r){(0,Pe.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yv(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var yy=function(){function e(t,n){(0,ci.Z)(this,e),this.engine=t,this.configService=n,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,fi.Z)(e,[{key:"init",value:function(){var n=this.configService.get(),r=n.canvas,o=n.engineOptions;this.initPromise=this.engine.init(Kv({canvas:r||gy(),antialiasing:!1},o))}},{key:"setBundle",value:function(n){this.compiledBundle=JSON.parse(JSON.stringify(n))}},{key:"setDispatch",value:function(n){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=n),this}},{key:"setMaxIteration",value:function(n){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=n),this}},{key:"setBinding",value:function(n,r){var o=this;if(typeof n=="string"){var i=fy()(r)||ml()(r)||dy()(r);if(this.compiledBundle&&this.compiledBundle.context){var a=this.compiledBundle.context.defines.find(function(u){return u.name===n});if(a)return a.value=r,this;var s=this.compiledBundle.context.uniforms.find(function(u){return u.name===n});s&&(i?(s.data=r,s.isReferer=!1,s.storageClass===Iu.Uniform?this.model&&this.model.updateUniform(n,r):this.model&&this.model.updateBuffer(n,r)):(s.isReferer=!0,s.data=r))}}else Object.keys(n).forEach(function(u){o.setBinding(u,n[u])});return this}},{key:"execute",value:function(){var t=(0,Qa.Z)(so().mark(function r(){var o=this,i,a,s=arguments;return so().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){c.next=6;break}return this.compiledBundle.context&&(i>1?this.compiledBundle.context.maxIteration=i:this.compiledBundle.context.maxIteration++),c.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(f){var l=f.isReferer;return l}).forEach(function(f){var l=f.data,d=f.name;o.model.confirmInput(l.model,d)}),a=0;a<i;a++)this.model.run();return this.engine.endFrame(),c.abrupt("return",this);case 12:case"end":return c.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"getOutput",value:function(){var t=(0,Qa.Z)(so().mark(function r(){return so().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.model.readData());case 1:case"end":return i.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"compile",value:function(){var t=(0,Qa.Z)(so().mark(function r(){var o,i,a;return so().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initPromise;case 2:return o=Kv({},this.compiledBundle.context),i=this.engine.supportWebGPU?this.engine.useWGSL?zc.WGSL:zc.GLSL450:zc.GLSL100,a=this.compiledBundle.shaders[i],o.defines.filter(function(c){return c.runtime}).forEach(function(c){var f="".concat(my).concat(c.name);a=a.replace(f,"".concat(c.value))}),o.shader=a,o.uniforms.forEach(function(c){if(!c.data&&c.storageClass===Iu.StorageBuffer){var f=1;c.type===Fc.FloatArray?f=1:c.type===Fc.Vector4FloatArray&&(f=4),c.data=new Float32Array(o.output.length*f).fill(0)}}),this.compiledBundle.context=o,u.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=u.sent;case 12:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()}]),e}(),Ey=ne(40224),by=ne.n(Ey),xy=function(){function e(t,n){(0,ci.Z)(this,e),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,i=n.stride,a=n.normalized,s=n.size,u=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return(0,fi.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),ba,Bc,xa,Wo,Uc,Ja,Vc,gl,zi,Ds,qr,Bi,Ui,yl,_y=(ba={},(0,Pe.Z)(ba,be.POINTS,"points"),(0,Pe.Z)(ba,be.LINES,"lines"),(0,Pe.Z)(ba,be.LINE_LOOP,"line loop"),(0,Pe.Z)(ba,be.LINE_STRIP,"line strip"),(0,Pe.Z)(ba,be.TRIANGLES,"triangles"),(0,Pe.Z)(ba,be.TRIANGLE_FAN,"triangle fan"),(0,Pe.Z)(ba,be.TRIANGLE_STRIP,"triangle strip"),ba),qv=(Bc={},(0,Pe.Z)(Bc,be.STATIC_DRAW,"static"),(0,Pe.Z)(Bc,be.DYNAMIC_DRAW,"dynamic"),(0,Pe.Z)(Bc,be.STREAM_DRAW,"stream"),Bc),Qd=(xa={},(0,Pe.Z)(xa,be.BYTE,"int8"),(0,Pe.Z)(xa,be.UNSIGNED_INT,"int16"),(0,Pe.Z)(xa,be.INT,"int32"),(0,Pe.Z)(xa,be.UNSIGNED_BYTE,"uint8"),(0,Pe.Z)(xa,be.UNSIGNED_SHORT,"uint16"),(0,Pe.Z)(xa,be.UNSIGNED_INT,"uint32"),(0,Pe.Z)(xa,be.FLOAT,"float"),xa),wy=(Wo={},(0,Pe.Z)(Wo,be.ALPHA,"alpha"),(0,Pe.Z)(Wo,be.LUMINANCE,"luminance"),(0,Pe.Z)(Wo,be.LUMINANCE_ALPHA,"luminance alpha"),(0,Pe.Z)(Wo,be.RGB,"rgb"),(0,Pe.Z)(Wo,be.RGBA,"rgba"),(0,Pe.Z)(Wo,be.RGBA4,"rgba4"),(0,Pe.Z)(Wo,be.RGB5_A1,"rgb5 a1"),(0,Pe.Z)(Wo,be.RGB565,"rgb565"),(0,Pe.Z)(Wo,be.DEPTH_COMPONENT,"depth"),(0,Pe.Z)(Wo,be.DEPTH_STENCIL,"depth stencil"),Wo),Sy=(Uc={},(0,Pe.Z)(Uc,be.DONT_CARE,"dont care"),(0,Pe.Z)(Uc,be.NICEST,"nice"),(0,Pe.Z)(Uc,be.FASTEST,"fast"),Uc),Qv=(Ja={},(0,Pe.Z)(Ja,be.NEAREST,"nearest"),(0,Pe.Z)(Ja,be.LINEAR,"linear"),(0,Pe.Z)(Ja,be.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Pe.Z)(Ja,be.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Pe.Z)(Ja,be.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Pe.Z)(Ja,be.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ja),Jv=(Vc={},(0,Pe.Z)(Vc,be.REPEAT,"repeat"),(0,Pe.Z)(Vc,be.CLAMP_TO_EDGE,"clamp"),(0,Pe.Z)(Vc,be.MIRRORED_REPEAT,"mirror"),Vc),Ty=(gl={},(0,Pe.Z)(gl,be.NONE,"none"),(0,Pe.Z)(gl,be.BROWSER_DEFAULT_WEBGL,"browser"),gl),Iy=(zi={},(0,Pe.Z)(zi,be.NEVER,"never"),(0,Pe.Z)(zi,be.ALWAYS,"always"),(0,Pe.Z)(zi,be.LESS,"less"),(0,Pe.Z)(zi,be.LEQUAL,"lequal"),(0,Pe.Z)(zi,be.GREATER,"greater"),(0,Pe.Z)(zi,be.GEQUAL,"gequal"),(0,Pe.Z)(zi,be.EQUAL,"equal"),(0,Pe.Z)(zi,be.NOTEQUAL,"notequal"),zi),ep=(Ds={},(0,Pe.Z)(Ds,be.FUNC_ADD,"add"),(0,Pe.Z)(Ds,be.MIN_EXT,"min"),(0,Pe.Z)(Ds,be.MAX_EXT,"max"),(0,Pe.Z)(Ds,be.FUNC_SUBTRACT,"subtract"),(0,Pe.Z)(Ds,be.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ds),El=(qr={},(0,Pe.Z)(qr,be.ZERO,"zero"),(0,Pe.Z)(qr,be.ONE,"one"),(0,Pe.Z)(qr,be.SRC_COLOR,"src color"),(0,Pe.Z)(qr,be.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Pe.Z)(qr,be.SRC_ALPHA,"src alpha"),(0,Pe.Z)(qr,be.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Pe.Z)(qr,be.DST_COLOR,"dst color"),(0,Pe.Z)(qr,be.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Pe.Z)(qr,be.DST_ALPHA,"dst alpha"),(0,Pe.Z)(qr,be.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Pe.Z)(qr,be.CONSTANT_COLOR,"constant color"),(0,Pe.Z)(qr,be.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Pe.Z)(qr,be.CONSTANT_ALPHA,"constant alpha"),(0,Pe.Z)(qr,be.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Pe.Z)(qr,be.SRC_ALPHA_SATURATE,"src alpha saturate"),qr),Ay=(Bi={},(0,Pe.Z)(Bi,be.NEVER,"never"),(0,Pe.Z)(Bi,be.ALWAYS,"always"),(0,Pe.Z)(Bi,be.LESS,"less"),(0,Pe.Z)(Bi,be.LEQUAL,"lequal"),(0,Pe.Z)(Bi,be.GREATER,"greater"),(0,Pe.Z)(Bi,be.GEQUAL,"gequal"),(0,Pe.Z)(Bi,be.EQUAL,"equal"),(0,Pe.Z)(Bi,be.NOTEQUAL,"notequal"),Bi),Au=(Ui={},(0,Pe.Z)(Ui,be.ZERO,"zero"),(0,Pe.Z)(Ui,be.KEEP,"keep"),(0,Pe.Z)(Ui,be.REPLACE,"replace"),(0,Pe.Z)(Ui,be.INVERT,"invert"),(0,Pe.Z)(Ui,be.INCR,"increment"),(0,Pe.Z)(Ui,be.DECR,"decrement"),(0,Pe.Z)(Ui,be.INCR_WRAP,"increment wrap"),(0,Pe.Z)(Ui,be.DECR_WRAP,"decrement wrap"),Ui),Ny=(yl={},(0,Pe.Z)(yl,be.FRONT,"front"),(0,Pe.Z)(yl,be.BACK,"back"),yl),Ry=function(){function e(t,n){(0,ci.Z)(this,e),this.buffer=void 0;var r=n.data,o=n.usage,i=n.type;this.buffer=t.buffer({data:r,usage:qv[o||be.STATIC_DRAW],type:Qd[i||be.UNSIGNED_BYTE]})}return(0,fi.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(n){var r=n.data,o=n.offset;this.buffer.subdata(r,o)}}]),e}(),Dy=ne(81230);function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function np(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tp(Object(n),!0).forEach(function(r){(0,Pe.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Cy=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,rp=0,bl=!1,Ly=function(){function e(t,n){var r=this;(0,ci.Z)(this,e),this.reGl=t,this.context=n,this.entity=Zv(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach(function(c){var f=c.name,l=c.type,d=c.data,h=c.isReferer,v=c.storageClass;if(v===Iu.StorageBuffer){if(h)r.textureCache[f]={data:void 0},o["".concat(f,"Size")]=function(){return d.compiledBundle.context.output.textureSize};else{r.textureCache[f]=r.calcDataTexture(f,l,d);var m=r.textureCache[f],y=m.textureWidth,E=m.isOutput;o["".concat(f,"Size")]=[y,y],E&&(r.outputTextureName=f,r.context.needPingpong&&(r.outputTextureName="".concat(f,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(f,l,d)))}o[f]=function(){return bl&&console.log("[".concat(r.entity,"]: ").concat(f," ").concat(r.textureCache[f].id)),r.textureCache[f].texture}}else if(v===Iu.Uniform){if(d&&(Array.isArray(d)||ml()(d))&&d.length>16)throw new Error("invalid data type ".concat(l));o[f]=function(){return c.data}}});var i=this.getOuputDataTexture(),a=i.textureWidth,s=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var u={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:o,vert:Cy,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(u)}return(0,fi.Z)(e,[{key:"run",value:function(){var n=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){n.computeCommand()}),bl&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var t=(0,Qa.Z)(so().mark(function r(){var o=this,i,a,s,u,c,f,l,d;return so().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){i=o.reGl.read()}),!i){v.next=6;break}if(a=this.getOuputDataTexture(),s=a.originalDataLength,u=a.elementsPerTexel,c=a.typedArrayConstructor,f=c===void 0?Float32Array:c,l=[],u!==4)for(d=0;d<i.length;d+=4)u===1?l.push(i[d]):u===2?l.push(i[d],i[d+1]):l.push(i[d],i[d+1],i[d+2]);else l=i;return v.abrupt("return",new f(l.slice(0,s)));case 6:return v.abrupt("return",new Float32Array);case 7:case"end":return v.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"confirmInput",value:function(n,r){var o;this.entity===n.entity?(this.dynamicPingpong=!0,o=this):o=n,this.textureCache[r].id=o.getOuputDataTexture().id,this.textureCache[r].texture=o.getOuputDataTexture().texture,bl&&console.log("[".concat(this.entity,"]: confirm input ").concat(r," from model ").concat(o.entity,", ").concat(o.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=this.context.uniforms.find(function(c){var f=c.name;return f===n});if(i){var a=this.calcDataTexture(n,i.type,r),s=a.texture,u=a.data;this.textureCache[n].data=u,this.textureCache[n].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var n=this.context.output.name;this.textureCache[n].id=this.getOuputDataTexture().id,this.textureCache[n].texture=this.getOuputDataTexture().texture}var r=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=r,bl&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var n=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=n}},{key:"cloneDataTexture",value:function(n){var r=n.data,o=n.textureWidth;return np(np({},n),{},{id:rp++,texture:this.reGl.texture({width:o,height:o,data:r,type:"float"})})}},{key:"calcDataTexture",value:function(n,r,o){var i=1;r===Fc.Vector4FloatArray&&(i=4);for(var a=[],s=0;s<o.length;s+=i)i===1?a.push(o[s],0,0,0):i===2?a.push(o[s],o[s+1],0,0):i===3?a.push(o[s],o[s+1],o[s+2],0):i===4&&a.push(o[s],o[s+1],o[s+2],o[s+3]);var u=o.length,c=Math.ceil(u/i),f=Math.ceil(Math.sqrt(c)),l=f*f;c<l&&a.push.apply(a,(0,Dy.Z)(new Array((l-c)*4).fill(0)));var d=this.reGl.texture({width:f,height:f,data:a,type:"float"});return{id:rp++,data:a,originalDataLength:u,typedArrayConstructor:ml()(o)?o.constructor:void 0,textureWidth:f,texture:d,texelCount:c,elementsPerTexel:i,isOutput:n===this.context.output.name}}}]),e}(),Oy=function(){function e(t,n){(0,ci.Z)(this,e),this.elements=void 0;var r=n.data,o=n.usage,i=n.type,a=n.count;this.elements=t.elements({data:r,usage:qv[o||be.STATIC_DRAW],type:Qd[i||be.UNSIGNED_BYTE],count:a})}return(0,fi.Z)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var r=n.data;this.elements.subdata(r)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}(),My=function(){function e(t,n){(0,ci.Z)(this,e),this.framebuffer=void 0;var r=n.width,o=n.height,i=n.color,a=n.colors,s=n.depth,u=n.stencil,c={width:r,height:o};Array.isArray(a)&&(c.colors=a.map(function(f){return f.get()})),i&&typeof i!="boolean"&&(c.color=i.get()),this.framebuffer=t.framebuffer(c)}return(0,fi.Z)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var r=n.width,o=n.height;this.framebuffer.resize(r,o)}}]),e}(),ky=ne(74826),Gy=ne(69143),Py=ne.n(Gy);function Jd(e){var t={};return Object.keys(e).forEach(function(n){eh(n,e[n],t,"")}),t}function eh(e,t,n,r){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||ml()(t)||t===""||t.resize!==void 0){n["".concat(r&&r+".").concat(e)]=t;return}Py()(t)&&Object.keys(t).forEach(function(o){eh(o,t[o],n,"".concat(r&&r+".").concat(e))}),Array.isArray(t)&&t.forEach(function(o,i){Object.keys(o).forEach(function(a){eh(a,o[a],n,"".concat(r&&r+".").concat(e,"[").concat(i,"]"))})})}function op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Nu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?op(Object(n),!0).forEach(function(r){(0,Pe.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):op(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fy=function(){function e(t,n){(0,ci.Z)(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var r=n.vs,o=n.fs,i=n.defines,a=n.attributes,s=n.uniforms,u=n.primitive,c=n.count,f=n.elements,l=n.depth,d=n.blend,h=n.stencil,v=n.cull,m=n.instances,y=n.scissor,E=n.viewport,g={};s&&(this.uniforms=Jd(s),Object.keys(s).forEach(function(V){g[V]=t.prop(V)}));var b={};Object.keys(a).forEach(function(V){b[V]=a[V].get()});var _=i&&this.generateDefines(i)||"",S={attributes:b,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(_,`
`).concat(o),uniforms:g,vert:`
`.concat(_,`
`).concat(r),primitive:_y[u===void 0?be.TRIANGLES:u]};m&&(S.instances=m),c&&(S.count=c),f&&(S.elements=f.get()),y&&(S.scissor=y),E&&(S.viewport=E),this.initDepthDrawParams({depth:l},S),this.initBlendDrawParams({blend:d},S),this.initStencilDrawParams({stencil:h},S),this.initCullDrawParams({cull:v},S),this.drawCommand=t(S)}return(0,fi.Z)(e,[{key:"addUniforms",value:function(n){this.uniforms=Nu(Nu({},this.uniforms),Jd(n))}},{key:"draw",value:function(n){var r=Nu(Nu({},this.uniforms),Jd(n.uniforms||{})),o={};Object.keys(r).forEach(function(i){var a=(0,ky.Z)(r[i]);a==="boolean"||a==="number"||Array.isArray(r[i])||r[i].BYTES_PER_ELEMENT?o[i]=r[i]:a==="string"||(o[i]=r[i].get())}),this.drawCommand(o)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(n,r){var o=n.depth;o&&(r.depth={enable:o.enable===void 0?!0:!!o.enable,mask:o.mask===void 0?!0:!!o.mask,func:Iy[o.func||be.LESS],range:o.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,r){var o=n.blend;if(o){var i=o.enable,a=o.func,s=o.equation,u=o.color,c=u===void 0?[0,0,0,0]:u;r.blend={enable:!!i,func:{srcRGB:El[a&&a.srcRGB||be.SRC_ALPHA],srcAlpha:El[a&&a.srcAlpha||be.SRC_ALPHA],dstRGB:El[a&&a.dstRGB||be.ONE_MINUS_SRC_ALPHA],dstAlpha:El[a&&a.dstAlpha||be.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ep[s&&s.rgb||be.FUNC_ADD],alpha:ep[s&&s.alpha||be.FUNC_ADD]},color:c}}}},{key:"initStencilDrawParams",value:function(n,r){var o=n.stencil;if(o){var i=o.enable,a=o.mask,s=a===void 0?-1:a,u=o.func,c=u===void 0?{cmp:be.ALWAYS,ref:0,mask:-1}:u,f=o.opFront,l=f===void 0?{fail:be.KEEP,zfail:be.KEEP,zpass:be.KEEP}:f,d=o.opBack,h=d===void 0?{fail:be.KEEP,zfail:be.KEEP,zpass:be.KEEP}:d;r.stencil={enable:!!i,mask:s,func:Nu(Nu({},c),{},{cmp:Ay[c.cmp]}),opFront:{fail:Au[l.fail],zfail:Au[l.zfail],zpass:Au[l.zpass]},opBack:{fail:Au[h.fail],zfail:Au[h.zfail],zpass:Au[h.zpass]}}}}},{key:"initCullDrawParams",value:function(n,r){var o=n.cull;if(o){var i=o.enable,a=o.face,s=a===void 0?be.BACK:a;r.cull={enable:!!i,face:Ny[s]}}}},{key:"generateDefines",value:function(n){return Object.keys(n).map(function(r){return"#define ".concat(r," ").concat(Number(n[r]))}).join(`
`)}}]),e}(),zy=function(){function e(t,n){(0,ci.Z)(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,i=o===void 0?be.UNSIGNED_BYTE:o,a=n.width,s=n.height,u=n.flipY,c=u===void 0?!1:u,f=n.format,l=f===void 0?be.RGBA:f,d=n.mipmap,h=d===void 0?!1:d,v=n.wrapS,m=v===void 0?be.CLAMP_TO_EDGE:v,y=n.wrapT,E=y===void 0?be.CLAMP_TO_EDGE:y,g=n.aniso,b=g===void 0?0:g,_=n.alignment,S=_===void 0?1:_,V=n.premultiplyAlpha,fe=V===void 0?!1:V,ee=n.mag,j=ee===void 0?be.NEAREST:ee,q=n.min,me=q===void 0?be.NEAREST:q,G=n.colorSpace,ye=G===void 0?be.BROWSER_DEFAULT_WEBGL:G;this.width=a,this.height=s;var Ge={width:a,height:s,type:Qd[i],format:wy[l],wrapS:Jv[m],wrapT:Jv[E],mag:Qv[j],min:Qv[me],alignment:S,flipY:c,colorSpace:Ty[ye],premultiplyAlpha:fe,aniso:b};r&&(Ge.data=r),typeof h=="number"?Ge.mipmap=Sy[h]:typeof h=="boolean"&&(Ge.mipmap=h),this.texture=t.texture(Ge)}return(0,fi.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var r=n.width,o=n.height;this.texture.resize(r,o),this.width=r,this.height=o}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),By=function(){function e(){var t=this;(0,ci.Z)(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var n=(0,Qa.Z)(so().mark(function r(o){return so().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!o.uniforms){a.next=3;break}return a.next=3,Promise.all(Object.keys(o.uniforms).map(function(){var s=(0,Qa.Z)(so().mark(function u(c){var f;return so().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(o.uniforms[c]&&o.uniforms[c].load!==void 0)){d.next=5;break}return d.next=3,o.uniforms[c].load();case 3:f=d.sent,o.uniforms[c]=f;case 5:case"end":return d.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()));case 3:return a.abrupt("return",new Fy(t.gl,o));case 4:case"end":return a.stop()}},r)}));return function(r){return n.apply(this,arguments)}}(),this.createAttribute=function(n){return new xy(t.gl,n)},this.createBuffer=function(n){return new Ry(t.gl,n)},this.createElements=function(n){return new Oy(t.gl,n)},this.createTexture2D=function(n){return new zy(t.gl,n)},this.createFramebuffer=function(n){return new My(t.gl,n)},this.useFramebuffer=function(n,r){t.gl({framebuffer:n?n.get():null})(r)},this.createComputeModel=function(){var n=(0,Qa.Z)(so().mark(function r(o){return so().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Ly(t.gl,o));case 1:case"end":return a.stop()}},r)}));return function(r){return n.apply(this,arguments)}}(),this.clear=function(n){var r=n.color,o=n.depth,i=n.stencil,a=n.framebuffer,s=a===void 0?null:a,u={color:r,depth:o,stencil:i};u.framebuffer=s===null?s:s.get(),t.gl.clear(u)},this.setScissor=function(n){t.gl&&t.gl._gl&&(n.enable&&n.box?(t.gl._gl.enable(be.SCISSOR_TEST),t.gl._gl.scissor(n.box.x,n.box.y,n.box.width,n.box.height)):t.gl._gl.disable(be.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(n){var r=n.x,o=n.y,i=n.width,a=n.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(r,o,i,a),t.gl._refresh())},this.readPixels=function(n){var r=n.framebuffer,o=n.x,i=n.y,a=n.width,s=n.height,u={x:o,y:i,width:a,height:s};return r&&(u.framebuffer=r.get()),t.gl.read(u)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}return(0,fi.Z)(e,[{key:"init",value:function(){var t=(0,Qa.Z)(so().mark(function r(o){return so().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.inited){a.next=2;break}return a.abrupt("return");case 2:return this.$canvas=o.canvas,a.next=5,new Promise(function(s,u){by()({canvas:o.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(f,l){(f||!l)&&u(f),s(l)}})});case 5:this.gl=a.sent,this.inited=!0;case 7:case"end":return a.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}(),xl=function(){function e(){(0,ci.Z)(this,e),this.engine=void 0,this.configService=new py}return(0,fi.Z)(e,[{key:"setConfig",value:function(n){this.configService.set(n)}},{key:"setEngine",value:function(n){this.engine=n}},{key:"createEntity",value:function(){return Zv()}},{key:"createKernel",value:function(n){var r=new yy(this.engine,this.configService);return typeof n=="string"?r.setBundle(JSON.parse(n)):r.setBundle(n),r.init(),r}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=new e;return r.setConfig(n),r.setEngine(new By),r}}]),e}();const Ru=(e,t)=>{let n;return e?_e(e)?n=()=>e:n=e:n=()=>t||1,n},Uy=(e,t)=>{const n=[],r=[],o={};let i=0;for(i=0;i<e.length;i++){const s=e[i];o[s.id]=i,n.push(s.x),n.push(s.y),n.push(0),n.push(0),r.push([])}for(i=0;i<t.length;i++){const s=t[i],u=ut(s,"source"),c=ut(s,"target");!isNaN(o[u])&&!isNaN(o[c])&&(r[o[u]].push(o[c]),r[o[c]].push(o[u]))}let a=0;for(i=0;i<e.length;i++){const s=n.length,u=r[i],c=u.length;n[i*4+2]=s,n[i*4+3]=c,a=Math.max(a,c);for(let f=0;f<c;++f){const l=u[f];n.push(+l)}}for(;n.length%4!==0;)n.push(0);return{maxEdgePerVetex:a,array:new Float32Array(n)}},Vy=(e,t,n,r)=>{const o=[],i=[],a={};let s=0;for(s=0;s<e.length;s++){const c=e[s];a[c.id]=s,o.push(c.x),o.push(c.y),o.push(0),o.push(0),i.push([])}for(s=0;s<t.length;s++){const c=t[s],f=ut(c,"source"),l=ut(c,"target");i[a[f]].push(a[l]),i[a[f]].push(n(c)),i[a[f]].push(r(c)),i[a[f]].push(0),i[a[l]].push(a[f]),i[a[l]].push(n(c)),i[a[l]].push(r(c)),i[a[l]].push(0)}let u=0;for(s=0;s<e.length;s++){const c=o.length,f=i[s],l=f.length;o[s*4+2]=c+1048576*l/4,o[s*4+3]=0,u=Math.max(u,l/4);for(let d=0;d<l;++d){const h=f[d];o.push(+h)}}for(;o.length%4!==0;)o.push(0);return{maxEdgePerVetex:u,array:new Float32Array(o)}},$y=(e,t)=>{const n=[],r=e.length,o={};return t.forEach(i=>{e.forEach((a,s)=>{if(o[i[a]]===void 0&&(o[i[a]]=Object.keys(o).length),n.push(o[i[a]]),s===r-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(o).length}},ip=e=>{const t=[],n=e.length,r=e[0].length;for(let o=0;o<r;o++)e.forEach((i,a)=>{if(t.push(i[o]),a===n-1)for(;t.length%4!==0;)t.push(0)});return new Float32Array(t)},xE=null,Xy='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',_E=null,Wy='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var _l=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{c(r.next(f))}catch(l){a(l)}}function u(f){try{c(r.throw(f))}catch(l){a(l)}}function c(f){f.done?i(f.value):o(f.value).then(s,u)}c((r=r.apply(e,t||[])).next())})};class Hy extends Yt{constructor(t){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return _l(this,void 0,void 0,function*(){const t=this,n=t.nodes;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}const o={},i={};n.forEach((a,s)=>{_e(a.x)||(a.x=Math.random()*this.width),_e(a.y)||(a.y=Math.random()*this.height),o[a.id]=a,i[a.id]=s}),t.nodeMap=o,t.nodeIdxMap=i,yield t.run()})}executeWithWorker(t,n){return _l(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.center;if(!o||o.length===0)return;if(o.length===1){o[0].x=i[0],o[0].y=i[1];return}const a={},s={};o.forEach((u,c)=>{_e(u.x)||(u.x=Math.random()*this.width),_e(u.y)||(u.y=Math.random()*this.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,yield r.run(t,n)})}run(t,n){return _l(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.edges,a=r.maxIteration,s=r.center,u=r.height*r.width;let c=Math.sqrt(u)/10;const f=u/(o.length+1),l=Math.sqrt(f),d=r.speed,h=r.clustering,{array:v,count:m}=$y([r.clusterField],o);o.forEach((q,me)=>{let G=0,ye=0;_e(q.fx)&&_e(q.fy)&&(G=q.fx||.001,ye=q.fy||.001),v[4*me+1]=G,v[4*me+2]=ye});const y=o.length,{maxEdgePerVetex:E,array:g}=Uy(o,i),b=r.workerEnabled;let _;b?_=xl.create({canvas:t,engineOptions:{supportCompute:!0}}):_=xl.create({engineOptions:{supportCompute:!0}});const S=r.onLayoutEnd,V=[];for(let q=0;q<m;q++)V.push(0,0,0,0);const fe=_.createKernel(Xy).setDispatch([y,1,1]).setBinding({u_Data:g,u_K:l,u_K2:f,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:d,u_MaxDisplace:c,u_Clustering:h?1:0,u_Center:s,u_AttributeArray:v,u_ClusterCenters:V,MAX_EDGE_PER_VERTEX:E,VERTEX_COUNT:y});let ee;h&&(ee=_.createKernel(Wy).setDispatch([m,1,1]).setBinding({u_Data:g,u_NodeAttributes:v,u_ClusterCenters:V,VERTEX_COUNT:y,CLUSTER_COUNT:m})),yield _l(this,void 0,void 0,function*(){for(let me=0;me<a;me++)yield fe.execute(),h&&(ee.setBinding({u_Data:fe}),yield ee.execute(),fe.setBinding({u_ClusterCenters:ee})),fe.setBinding({u_MaxDisplace:c*=.99});const q=yield fe.getOutput();t?n.postMessage({type:tt.GPUEND,vertexEdgeData:q}):o.forEach((me,G)=>{const ye=q[4*G],Ge=q[4*G+1];me.x=ye,me.y=Ge}),S&&S()})})}getType(){return"fruchterman-gpu"}}const wE=null,Zy='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',SE=null,jy='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var th=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{c(r.next(f))}catch(l){a(l)}}function u(f){try{c(r.throw(f))}catch(l){a(l)}}function c(f){f.done?i(f.value):o(f.value).then(s,u)}c((r=r.apply(e,t||[])).next())})};class Yy extends Yt{constructor(t){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return th(this,void 0,void 0,function*(){const t=this,n=t.nodes;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}const o={},i={};n.forEach((a,s)=>{_e(a.x)||(a.x=Math.random()*t.width),_e(a.y)||(a.y=Math.random()*t.height),o[a.id]=a,i[a.id]=s}),t.nodeMap=o,t.nodeIdxMap=i,t.nodeStrength=Ru(t.nodeStrength,1),t.edgeStrength=Ru(t.edgeStrength,1),yield t.run()})}executeWithWorker(t,n){const r=this,o=r.nodes,i=r.center;if(!o||o.length===0)return;if(o.length===1){o[0].x=i[0],o[0].y=i[1];return}const a={},s={};o.forEach((u,c)=>{_e(u.x)||(u.x=Math.random()*r.width),_e(u.y)||(u.y=Math.random()*r.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,r.nodeStrength=Ru(r.nodeStrength,1),r.edgeStrength=Ru(r.edgeStrength,1),r.run(t,n)}run(t,n){return th(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.edges,a=r.maxIteration;!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const s=o.length;r.linkDistance=Ru(r.linkDistance),r.edgeStrength=Ru(r.edgeStrength);const{maxEdgePerVetex:u,array:c}=Vy(o,i,r.linkDistance,r.edgeStrength);r.degrees=Gn(o.length,r.nodeIdxMap,i).map(G=>G.all);const f=[],l=[],d=[],h=[],v=[],m=[],y=[];r.getMass||(r.getMass=G=>r.degrees[r.nodeIdxMap[G.id]]||1);const E=r.gravity,g=r.center;o.forEach((G,ye)=>{f.push(r.getMass(G)),l.push(r.nodeStrength(G)),r.degrees[ye]||(r.degrees[ye]=0);let Ge=[g[0],g[1],E];if(r.getCenter){const Ue=r.getCenter(G,r.degrees[ye]);Ue&&_e(Ue[0])&&_e(Ue[1])&&_e(Ue[2])&&(Ge=Ue)}d.push(Ge[0]),h.push(Ge[1]),v.push(Ge[2]),_e(G.fx)&&_e(G.fy)?(m.push(G.fx||.001),y.push(G.fy||.001)):(m.push(0),y.push(0))});const b=ip([f,r.degrees,l,m]),_=ip([d,h,v,y]),S=r.workerEnabled;let V;S?V=xl.create({canvas:t,engineOptions:{supportCompute:!0}}):V=xl.create({engineOptions:{supportCompute:!0}});const fe=r.onLayoutEnd,ee=[];c.forEach(G=>{ee.push(G)});for(let G=0;G<4;G++)ee.push(0);const j=V.createKernel(Zy).setDispatch([s,1,1]).setBinding({u_Data:c,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:b,u_NodeAttributeArray2:_,MAX_EDGE_PER_VERTEX:u,VERTEX_COUNT:s,u_AveMovement:ee,u_interval:r.interval}),q=V.createKernel(jy).setDispatch([1,1,1]).setBinding({u_Data:c,VERTEX_COUNT:s,u_AveMovement:[0,0,0,0]});yield th(this,void 0,void 0,function*(){for(let ye=0;ye<a;ye++){yield j.execute(),q.setBinding({u_Data:j}),yield q.execute();const Ge=Math.max(.02,r.interval-ye*.002);j.setBinding({u_interval:Ge,u_AveMovement:q})}const G=yield j.getOutput();t?n.postMessage({type:tt.GPUEND,vertexEdgeData:G}):o.forEach((ye,Ge)=>{const Ue=G[4*Ge],pt=G[4*Ge+1];ye.x=Ue,ye.y=pt}),fe&&fe()})})}getType(){return"gForce-gpu"}}class Ky extends Yt{constructor(t){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const t=this,n=t.nodes,r=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){const t=this,n=t.nodes,r=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const o=t.center,i=t.velocityDecay,a=t.comboMap;t.previousLayouted||t.initPos(a);for(let c=0;c<r;c++){const f=[];n.forEach((l,d)=>{f[d]={x:0,y:0}}),t.applyCalculate(f),t.applyComboCenterForce(f),n.forEach((l,d)=>{!_e(l.x)||!_e(l.y)||(l.x+=f[d].x*i,l.y+=f[d].y*i)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}const s=[0,0];n.forEach(c=>{!_e(c.x)||!_e(c.y)||(s[0]+=c.x,s[1]+=c.y)}),s[0]/=n.length,s[1]/=n.length;const u=[o[0]-s[0],o[1]-s[1]];n.forEach((c,f)=>{!_e(c.x)||!_e(c.y)||(c.x+=u[0],c.y+=u[1])}),t.combos.forEach(c=>{const f=a[c.id];f&&f.empty&&(c.x=f.cx||c.x,c.y=f.cy||c.y)}),t.previousLayouted=!0}initVals(){const t=this,n=t.edges,r=t.nodes,o=t.combos,i={},a={},s={};r.forEach((q,me)=>{a[q.id]=q,s[q.id]=me}),t.nodeMap=a,t.indexMap=s;const u={};o.forEach(q=>{u[q.id]=q}),t.oriComboMap=u,t.comboMap=t.getComboMap();const c=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||c,t.preventNodeOverlap=t.preventNodeOverlap||c;const f=t.collideStrength;f&&(t.comboCollideStrength=f,t.nodeCollideStrength=f),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(let q=0;q<n.length;++q){const me=ut(n[q],"source"),G=ut(n[q],"target");i[me]?i[me]++:i[me]=1,i[G]?i[G]++:i[G]=1}const l=[];for(let q=0;q<n.length;++q){const me=ut(n[q],"source"),G=ut(n[q],"target");l[q]=i[me]/(i[me]+i[G])}this.bias=l;const d=t.nodeSize,h=t.nodeSpacing;let v,m;if(_e(h)?m=()=>h:it(h)?m=h:m=()=>0,this.nodeSpacing=m,!d)v=q=>q.size?bt(q.size)?(q.size[0]>q.size[1]?q.size[0]:q.size[1])/2:Vt(q.size)?(q.size.width>q.size.height?q.size.width:q.size.height)/2:q.size/2:10;else if(it(d))v=q=>d(q);else if(bt(d)){const me=(d[0]>d[1]?d[0]:d[1])/2;v=G=>me}else{const q=d/2;v=me=>q}this.nodeSize=v;const y=t.comboSpacing;let E;_e(y)?E=()=>y:it(y)?E=y:E=()=>0,this.comboSpacing=E;const g=t.comboPadding;let b;_e(g)?b=()=>g:bt(g)?b=()=>Math.max.apply(null,g):it(g)?b=g:b=()=>0,this.comboPadding=b;let _=this.linkDistance,S;_||(_=10),_e(_)?S=q=>_:S=_,this.linkDistance=S;let V=this.edgeStrength,fe;V||(V=1),_e(V)?fe=q=>V:fe=V,this.edgeStrength=fe;let ee=this.nodeStrength,j;ee||(ee=30),_e(ee)?j=q=>ee:j=ee,this.nodeStrength=j}initPos(t){this.nodes.forEach((o,i)=>{const a=o.comboId,s=t[a];a&&s?(o.x=s.cx+100/(i+1),o.y=s.cy+100/(i+1)):(o.x=100/(i+1),o.y=100/(i+1))})}getComboMap(){const t=this,n=t.nodeMap,r=t.comboTrees,o=t.oriComboMap,i={};return(r||[]).forEach(a=>{const s=[];wn(a,u=>{if(u.itemType==="node"||!o[u.id])return!0;if(i[u.id]===void 0){const l={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:t.oriComboMap[u.id].depth||0,children:[]};i[u.id]=l}const c=u.children;c&&c.forEach(l=>{if(!i[l.id]&&!n[l.id])return!0;s.push(l)});const f=i[u.id];if(f.cx=0,f.cy=0,s.length===0){f.empty=!0;const l=o[u.id];f.cx=l.x,f.cy=l.y}return s.forEach(l=>{if(f.count++,l.itemType!=="node"){const h=i[l.id];_e(h.cx)&&(f.cx+=h.cx),_e(h.cy)&&(f.cy+=h.cy);return}const d=n[l.id];d&&(_e(d.x)&&(f.cx+=d.x),_e(d.y)&&(f.cy+=d.y))}),f.cx/=f.count||1,f.cy/=f.count||1,f.children=s,!0})}),i}applyComboCenterForce(t){const n=this,r=n.gravity,o=n.comboGravity||r,i=this.alpha,a=n.comboTrees,s=n.indexMap,u=n.nodeMap,c=n.comboMap;(a||[]).forEach(f=>{wn(f,l=>{if(l.itemType==="node"||!c[l.id])return!0;const h=c[l.id],v=(h.depth+1)/10*.5,m=h.cx,y=h.cy;return h.cx=0,h.cy=0,h.children.forEach(E=>{if(E.itemType!=="node"){const ee=c[E.id];ee&&_e(ee.cx)&&(h.cx+=ee.cx),ee&&_e(ee.cy)&&(h.cy+=ee.cy);return}const g=u[E.id],b=g.x-m||.005,_=g.y-y||.005,S=Math.sqrt(b*b+_*_),V=s[g.id],fe=o*i/S*v;t[V].x-=b*fe,t[V].y-=_*fe,_e(g.x)&&(h.cx+=g.x),_e(g.y)&&(h.cy+=g.y)}),h.cx/=h.count||1,h.cy/=h.count||1,!0})})}applyCalculate(t){const n=this,r=n.comboMap,o=n.nodes,i={};o.forEach((s,u)=>{o.forEach((c,f)=>{if(u<f)return;const l=s.x-c.x||.005,d=s.y-c.y||.005;let h=l*l+d*d;const v=Math.sqrt(h);h<1&&(h=v),i[`${s.id}-${c.id}`]={vx:l,vy:d,vl2:h,vl:v},i[`${c.id}-${s.id}`]={vl2:h,vl:v,vx:-l,vy:-d}})}),n.updateComboSizes(r),n.calRepulsive(t,i),n.calAttractive(t,i),n.preventComboOverlap&&n.comboNonOverlapping(t,r)}updateComboSizes(t){const n=this,r=n.comboTrees,o=n.nodeMap,i=n.nodeSize,a=n.comboSpacing,s=n.comboPadding;(r||[]).forEach(u=>{const c=[];wn(u,f=>{if(f.itemType==="node")return!0;const l=t[f.id];if(!l)return!1;const d=f.children;d&&d.forEach(m=>{!t[m.id]&&!o[m.id]||c.push(m)}),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,c.forEach(m=>{if(m.itemType!=="node")return!0;const y=o[m.id];if(!y)return!0;const E=i(y),g=y.x-E,b=y.y-E,_=y.x+E,S=y.y+E;l.minX>g&&(l.minX=g),l.minY>b&&(l.minY=b),l.maxX<_&&(l.maxX=_),l.maxY<S&&(l.maxY=S)});let h=n.oriComboMap[f.id].size||10;bt(h)&&(h=h[0]);const v=Math.max(l.maxX-l.minX,l.maxY-l.minY,h);return l.r=v/2+a(l)/2+s(l),!0})})}comboNonOverlapping(t,n){const r=this,o=r.comboTree,i=r.comboCollideStrength,a=r.indexMap,s=r.nodeMap;wn(o,u=>{if(!n[u.id]&&!s[u.id]&&u.id!=="comboTreeRoot")return!1;const c=u.children;return c&&c.length>1&&c.forEach((f,l)=>{if(f.itemType==="node")return!1;const d=n[f.id];d&&c.forEach((h,v)=>{if(l<=v||h.itemType==="node")return!1;const m=n[h.id];if(!m)return!1;const y=d.cx-m.cx||.005,E=d.cy-m.cy||.005,g=y*y+E*E,b=d.r||1,_=m.r||1,S=b+_,V=_*_,fe=b*b;if(g<S*S){const ee=f.children;if(!ee||ee.length===0)return!1;const j=h.children;if(!j||j.length===0)return!1;const q=Math.sqrt(g),me=(S-q)/q*i,G=y*me,ye=E*me,Ge=V/(fe+V),Ue=1-Ge;ee.forEach(pt=>{if(pt.itemType!=="node")return!1;if(!s[pt.id])return;const Ke=a[pt.id];j.forEach(Et=>{if(Et.itemType!=="node"||!s[Et.id])return!1;const dt=a[Et.id];t[Ke].x+=G*Ge,t[Ke].y+=ye*Ge,t[dt].x-=G*Ue,t[dt].y-=ye*Ue})})}})}),!0})}calRepulsive(t,n){const r=this,o=r.nodes,i=r.width*r.optimizeRangeFactor,a=r.nodeStrength,s=r.alpha,u=r.nodeCollideStrength,c=r.preventNodeOverlap,f=r.nodeSize,l=r.nodeSpacing,d=r.depthRepulsiveForceScale,h=r.center;o.forEach((v,m)=>{if(!(!v.x||!v.y)){if(h){const y=r.gravity,E=v.x-h[0]||.005,g=v.y-h[1]||.005,b=Math.sqrt(E*E+g*g);t[m].x-=E*y*s/b,t[m].y-=g*y*s/b}o.forEach((y,E)=>{if(m===E||!y.x||!y.y)return;const{vl2:g,vl:b}=n[`${v.id}-${y.id}`];if(b>i)return;const{vx:_,vy:S}=n[`${v.id}-${y.id}`];let V=Math.log(Math.abs(y.depth-v.depth)/10)+1||1;V=V<1?1:V,y.comboId!==v.comboId&&(V+=1);const fe=V?Math.pow(d,V):1,ee=a(y)*s/g*fe;if(t[m].x+=_*ee,t[m].y+=S*ee,m<E&&c){const j=f(v)+l(v)||1,q=f(y)+l(y)||1,me=j+q;if(g<me*me){const G=(me-b)/b*u,ye=q*q;let Ge=ye/(j*j+ye);const Ue=_*G,pt=S*G;t[m].x+=Ue*Ge,t[m].y+=pt*Ge,Ge=1-Ge,t[E].x-=Ue*Ge,t[E].y-=pt*Ge}}})}})}calAttractive(t,n){const r=this,o=r.edges,i=r.linkDistance,a=r.alpha,s=r.edgeStrength,u=r.bias,c=r.depthAttractiveForceScale;o.forEach((f,l)=>{const d=ut(f,"source"),h=ut(f,"target");if(!d||!h||d===h)return;const v=r.indexMap[d],m=r.indexMap[h],y=r.nodeMap[d],E=r.nodeMap[h];if(!y||!E)return;let g=y.depth===E.depth?0:Math.log(Math.abs(y.depth-E.depth)/10);y.comboId===E.comboId&&(g=g/2);let b=g?Math.pow(c,g):1;if(y.comboId!==E.comboId&&b===1?b=c/2:y.comboId===E.comboId&&(b=2),!_e(E.x)||!_e(y.x)||!_e(E.y)||!_e(y.y))return;const{vl:_,vx:S,vy:V}=n[`${h}-${d}`],fe=(_-i(f))/_*a*s(f)*b,ee=S*fe,j=V*fe,q=u[l];t[m].x-=ee*q,t[m].y-=j*q,t[v].x+=ee*(1-q),t[v].y+=j*(1-q)})}getType(){return"comboForce"}}class qy extends Yt{constructor(t){super(),this.center=[0,0],this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.comboPadding=10,this.comboTrees=[],this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,n=t.nodes,r=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){var t;const n=this,{nodes:r,edges:o,combos:i,comboEdges:a,center:s}=n,u={};r.forEach(E=>{u[E.id]=E});const c={};i.forEach(E=>{c[E.id]=E});const f=n.getInnerGraphs(u),l=[],d=[],h={};let v=!0;this.comboTrees.forEach(E=>{const g=f[E.id];if(!g)return;const b=Object.assign(Object.assign({},E),{x:g.x||c[E.id].x,y:g.y||c[E.id].y,fx:g.fx||c[E.id].fx,fy:g.fy||c[E.id].fy,mass:g.mass||c[E.id].mass,size:g.size});d.push(b),!isNaN(b.x)&&b.x!==0&&!isNaN(b.y)&&b.y!==0?v=!1:(b.x=Math.random()*100,b.y=Math.random()*100),l.push(E.id),wn(E,_=>(_.id!==E.id&&(h[_.id]=E.id),!0))}),r.forEach(E=>{if(E.comboId&&c[E.comboId])return;const g=Object.assign({},E);d.push(g),!isNaN(g.x)&&g.x!==0&&!isNaN(g.y)&&g.y!==0?v=!1:(g.x=Math.random()*100,g.y=Math.random()*100),l.push(E.id)});const m=[];if(o.concat(a).forEach(E=>{const g=h[E.source]||E.source,b=h[E.target]||E.target;g!==b&&l.includes(g)&&l.includes(b)&&m.push({source:g,target:b})}),d!=null&&d.length){if(d.length===1)d[0].x=s[0],d[0].y=s[1];else{const E={nodes:d,edges:m},g=this.outerLayout||new Re({gravity:1,factor:4,linkDistance:(_,S,V)=>{var fe,ee;const j=((((fe=S.size)===null||fe===void 0?void 0:fe[0])||30)+(((ee=V.size)===null||ee===void 0?void 0:ee[0])||30))/2;return Math.min(j*1.5,700)}}),b=(t=g.getType)===null||t===void 0?void 0:t.call(g);g.updateCfg({center:s,kg:5,preventOverlap:!0,animate:!1}),v&&Je[b]&&(d.length<100?new Hv:new Cr).layout(E),g.layout(E)}d.forEach(E=>{const g=f[E.id];if(!g){const b=u[E.id];b&&(b.x=E.x,b.y=E.y);return}g.visited=!0,g.x=E.x,g.y=E.y,g.nodes.forEach(b=>{b.x+=E.x,b.y+=E.y})})}const y=Object.keys(f);for(let E=y.length-1;E>=0;E--){const g=y[E],b=f[g];b&&(b.nodes.forEach(_=>{b.visited||(_.x+=b.x||0,_.y+=b.y||0),u[_.id]&&(u[_.id].x=_.x,u[_.id].y=_.y)}),c[g]&&(c[g].x=b.x,c[g].y=b.y))}return{nodes:r,edges:o,combos:i,comboEdges:a}}getInnerGraphs(t){const n=this,{comboTrees:r,nodeSize:o,edges:i,comboPadding:a,spacing:s}=n,u={},c=this.innerLayout||new Wv({type:"concentric",sortBy:"id"});return c.center=[0,0],c.preventOverlap=!0,c.nodeSpacing=s,(r||[]).forEach(f=>{wn(f,l=>{var d;let h=(a==null?void 0:a(l))||10;if(bt(h)&&(h=Math.max(...h)),!((d=l.children)===null||d===void 0)&&d.length){const v=l.children.map(j=>{if(j.itemType==="combo")return u[j.id];const q=t[j.id]||{};return Object.assign(Object.assign({},q),j)}),m=v.map(j=>j.id),y={nodes:v,edges:i.filter(j=>m.includes(j.source)&&m.includes(j.target))};let E=1/0;v.forEach(j=>{var q;j.size||(j.size=((q=u[j.id])===null||q===void 0?void 0:q.size)||(o==null?void 0:o(j))||[30,30]),_e(j.size)&&(j.size=[j.size,j.size]),E>j.size[0]&&(E=j.size[0]),E>j.size[1]&&(E=j.size[1])}),c.layout(y);const{minX:g,minY:b,maxX:_,maxY:S}=xo(v),V={x:(_+g)/2,y:(S+b)/2};y.nodes.forEach(j=>{j.x-=V.x,j.y-=V.y});const fe=Math.max(_-g,E)+h*2,ee=Math.max(S-b,E)+h*2;u[l.id]={id:l.id,nodes:v,size:[fe,ee]}}else if(l.itemType==="combo"){const v=h?[h*2,h*2]:[30,30];u[l.id]={id:l.id,nodes:[],size:v}}return!0})}),u}initVals(){const t=this,n=t.nodeSize,r=t.spacing;let o,i;if(_e(r)?i=()=>r:it(r)?i=r:i=()=>0,this.spacing=i,!n)o=u=>{const c=i(u);return u.size?bt(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+c)/2:Vt(u.size)?((u.size.width>u.size.height?u.size.width:u.size.height)+c)/2:(u.size+c)/2:10+c/2};else if(it(n))o=u=>{const c=n(u),f=i(u);return bt(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+f)/2:((c||10)+f)/2};else if(bt(n)){const c=(n[0]>n[1]?n[0]:n[1])/2;o=f=>c+i(f)/2}else{const u=n/2;o=c=>u+i(c)/2}this.nodeSize=o;const a=t.comboPadding;let s;_e(a)?s=()=>a:bt(a)?s=()=>Math.max.apply(null,a):it(a)?s=a:s=()=>0,this.comboPadding=s}getType(){return"comboCombined"}}class nh{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const n=this.rx-t.rx,r=this.ry-t.ry;return Math.hypot(n,r)}setPos(t,n){this.rx=t,this.ry=n}resetForce(){this.fx=0,this.fy=0}addForce(t){const n=t.rx-this.rx,r=t.ry-this.ry;let o=Math.hypot(n,r);o=o<1e-4?1e-4:o;const i=this.g*(this.degree+1)*(t.degree+1)/o;this.fx+=i*n/o,this.fy+=i*r/o}in(t){return t.contains(this.rx,this.ry)}add(t){const n=this.mass+t.mass,r=(this.rx*this.mass+t.rx*t.mass)/n,o=(this.ry*this.mass+t.ry*t.mass)/n,i=this.degree+t.degree,a={rx:r,ry:o,mass:n,degree:i};return new nh(a)}}class Du{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,n){const r=this.length/2;return t<=this.xmid+r&&t>=this.xmid-r&&n<=this.ymid+r&&n>=this.ymid-r}NW(){const t=this.xmid-this.length/4,n=this.ymid+this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}NE(){const t=this.xmid+this.length/4,n=this.ymid+this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}SW(){const t=this.xmid-this.length/4,n=this.ymid-this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}SE(){const t=this.xmid+this.length/4,n=this.ymid-this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}}class Cu{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,t!=null&&(this.quad=t)}insert(t){if(this.body==null){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new Cu(this.quad.NW()),this.NE=new Cu(this.quad.NE()),this.SW=new Cu(this.quad.SW()),this.SE=new Cu(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(t){if(!(this.body==null||t===this.body))if(this._isExternal())t.addForce(this.body);else{const n=this.quad?this.quad.getLength():0,r=this.body.distanceTo(t);n/r<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}class Qy extends Yt{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,{nodes:n,onLayoutEnd:r,prune:o}=t;let i=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const a=[],s=n.length;for(let u=0;u<s;u+=1){const c=n[u];let f=10,l=10;_e(c.size)&&(f=c.size,l=c.size),bt(c.size)?(isNaN(c.size[0])||(f=c.size[0]),isNaN(c.size[1])||(l=c.size[1])):Vt(c.size)&&(f=c.size.width,l=c.size.height),t.getWidth&&!isNaN(t.getWidth(c))&&(l=t.getWidth(c)),t.getHeight&&!isNaN(t.getHeight(c))&&(f=t.getHeight(c));const d=Math.max(f,l);a.push(d)}t.barnesHut===void 0&&s>250&&(t.barnesHut=!0),t.prune===void 0&&s>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(i=250,s<=200&&s>100?i=1e3:s>200&&(i=1200),this.maxIteration=i):this.maxIteration===0&&o&&(i=100,s<=200&&s>100?i=500:s>200&&(i=950),this.maxIteration=i),t.kr||(t.kr=50,s>100&&s<=500?t.kr=20:s>500&&(t.kr=1)),t.kg||(t.kg=20,s>100&&s<=500?t.kg=10:s>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(a),r()}updateNodesByForces(t){const n=this,{edges:r,maxIteration:o}=n;let i=n.nodes;const a=r.filter(v=>{const m=ut(v,"source"),y=ut(v,"target");return m!==y}),s=i.length,u=a.length,c=[],f={},l={},d=[];for(let v=0;v<s;v+=1)f[i[v].id]=v,c[v]=0,(i[v].x===void 0||isNaN(i[v].x))&&(i[v].x=Math.random()*1e3),(i[v].y===void 0||isNaN(i[v].y))&&(i[v].y=Math.random()*1e3),d.push({x:i[v].x,y:i[v].y});for(let v=0;v<u;v+=1){let m,y,E=0,g=0;for(let b=0;b<s;b+=1){const _=ut(a[v],"source"),S=ut(a[v],"target");i[b].id===_?(m=i[b],E=b):i[b].id===S&&(y=i[b],g=b),l[v]={sourceIdx:E,targetIdx:g}}m&&(c[f[m.id]]+=1),y&&(c[f[y.id]]+=1)}let h=o;if(i=this.iterate(h,f,l,u,c,t),n.prune){for(let v=0;v<u;v+=1)c[l[v].sourceIdx]<=1?(i[l[v].sourceIdx].x=i[l[v].targetIdx].x,i[l[v].sourceIdx].y=i[l[v].targetIdx].y):c[l[v].targetIdx]<=1&&(i[l[v].targetIdx].x=i[l[v].sourceIdx].x,i[l[v].targetIdx].y=i[l[v].sourceIdx].y);n.prune=!1,n.barnesHut=!1,h=100,i=this.iterate(h,f,l,u,c,t)}return i}iterate(t,n,r,o,i,a){const s=this;let{nodes:u}=s;const{kr:c,preventOverlap:f}=s,{barnesHut:l}=s,d=u.length;let h=0;const v=100;let m=t;const y=50;let E=[];const g=[],b=[];for(let _=0;_<d;_+=1)if(E[2*_]=0,E[2*_+1]=0,l){const S={id:_,rx:u[_].x,ry:u[_].y,mass:1,g:c,degree:i[_]};b[_]=new nh(S)}for(;m>0;){for(let S=0;S<d;S+=1)g[2*S]=E[2*S],g[2*S+1]=E[2*S+1],E[2*S]=0,E[2*S+1]=0;E=this.getAttrForces(m,y,o,n,r,i,a,E),l&&(f&&m>y||!f)?E=this.getOptRepGraForces(E,b,i):E=this.getRepGraForces(m,y,E,v,a,i);const _=this.updatePos(E,g,h,i);u=_.nodes,h=_.sg,m--,s.tick&&s.tick()}return u}getAttrForces(t,n,r,o,i,a,s,u){const c=this,{nodes:f,preventOverlap:l,dissuadeHubs:d,mode:h,prune:v}=c;for(let m=0;m<r;m+=1){const y=f[i[m].sourceIdx],E=i[m].sourceIdx,g=f[i[m].targetIdx],b=i[m].targetIdx;if(v&&(a[E]<=1||a[b]<=1))continue;const _=[g.x-y.x,g.y-y.y];let S=Math.hypot(_[0],_[1]);S=S<1e-4?1e-4:S,_[0]=_[0]/S,_[1]=_[1]/S,l&&t<n&&(S=S-s[E]-s[b]);let V=S,fe=V;h==="linlog"&&(V=Math.log(1+S),fe=V),d&&(V=S/a[E],fe=S/a[b]),l&&t<n&&S<=0?(V=0,fe=0):l&&t<n&&S>0&&(V=S,fe=S),u[2*o[y.id]]+=V*_[0],u[2*o[g.id]]-=fe*_[0],u[2*o[y.id]+1]+=V*_[1],u[2*o[g.id]+1]-=fe*_[1]}return u}getRepGraForces(t,n,r,o,i,a){const s=this,{nodes:u,preventOverlap:c,kr:f,kg:l,center:d,prune:h}=s,v=u.length;for(let m=0;m<v;m+=1){for(let b=m+1;b<v;b+=1){if(h&&(a[m]<=1||a[b]<=1))continue;const _=[u[b].x-u[m].x,u[b].y-u[m].y];let S=Math.hypot(_[0],_[1]);S=S<1e-4?1e-4:S,_[0]=_[0]/S,_[1]=_[1]/S,c&&t<n&&(S=S-i[m]-i[b]);let V=f*(a[m]+1)*(a[b]+1)/S;c&&t<n&&S<0?V=o*(a[m]+1)*(a[b]+1):c&&t<n&&S===0?V=0:c&&t<n&&S>0&&(V=f*(a[m]+1)*(a[b]+1)/S),r[2*m]-=V*_[0],r[2*b]+=V*_[0],r[2*m+1]-=V*_[1],r[2*b+1]+=V*_[1]}const y=[u[m].x-d[0],u[m].y-d[1]],E=Math.hypot(y[0],y[1]);y[0]=y[0]/E,y[1]=y[1]/E;const g=l*(a[m]+1);r[2*m]-=g*y[0],r[2*m+1]-=g*y[1]}return r}getOptRepGraForces(t,n,r){const o=this,{nodes:i,kg:a,center:s,prune:u}=o,c=i.length;let f=9e10,l=-9e10,d=9e10,h=-9e10;for(let g=0;g<c;g+=1)u&&r[g]<=1||(n[g].setPos(i[g].x,i[g].y),i[g].x>=l&&(l=i[g].x),i[g].x<=f&&(f=i[g].x),i[g].y>=h&&(h=i[g].y),i[g].y<=d&&(d=i[g].y));const v=Math.max(l-f,h-d),m={xmid:(l+f)/2,ymid:(h+d)/2,length:v,massCenter:s,mass:c},y=new Du(m),E=new Cu(y);for(let g=0;g<c;g+=1)u&&r[g]<=1||n[g].in(y)&&E.insert(n[g]);for(let g=0;g<c;g+=1){if(u&&r[g]<=1)continue;n[g].resetForce(),E.updateForce(n[g]),t[2*g]-=n[g].fx,t[2*g+1]-=n[g].fy;const b=[i[g].x-s[0],i[g].y-s[1]];let _=Math.hypot(b[0],b[1]);_=_<1e-4?1e-4:_,b[0]=b[0]/_,b[1]=b[1]/_;const S=a*(r[g]+1);t[2*g]-=S*b[0],t[2*g+1]-=S*b[1]}return t}updatePos(t,n,r,o){const i=this,{nodes:a,ks:s,tao:u,prune:c,ksmax:f}=i,l=a.length,d=[],h=[];let v=0,m=0;for(let E=0;E<l;E+=1){if(c&&o[E]<=1)continue;const g=[t[2*E]-n[2*E],t[2*E+1]-n[2*E+1]],b=Math.hypot(g[0],g[1]),_=[t[2*E]+n[2*E],t[2*E+1]+n[2*E+1]],S=Math.hypot(_[0],_[1]);d[E]=b,h[E]=S/2,v+=(o[E]+1)*d[E],m+=(o[E]+1)*h[E]}const y=r;r=u*m/v,y!==0&&(r=r>1.5*y?1.5*y:r);for(let E=0;E<l;E+=1){if(c&&o[E]<=1||_e(a[E].fx)&&_e(a[E].fy))continue;let g=s*r/(1+r*Math.sqrt(d[E])),b=Math.hypot(t[2*E],t[2*E+1]);b=b<1e-4?1e-4:b;const _=f/b;g=g>_?_:g;const S=g*t[2*E],V=g*t[2*E+1];a[E].x+=S,a[E].y+=V}return{nodes:a,sg:r}}}class _a{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(t,n,r){this.cells=[],this.CELL_W=r.CELL_W||_a.DEFAULT_CELL_W,this.CELL_H=r.CELL_H||_a.DEFAULT_CELL_H,this.columnNum=Math.ceil(t/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),_a.MIN_DIST=Math.pow(t,2)+Math.pow(n,2);for(let o=0;o<this.columnNum;o++){const i=[];for(let a=0;a<this.rowNum;a++){const s={dx:o,dy:a,x:o*this.CELL_W,y:a*this.CELL_H,occupied:!1};i.push(s)}this.cells.push(i)}}findGridByNodeId(t){var n,r;for(let o=0;o<this.columnNum;o++)for(let i=0;i<this.rowNum;i++)if(this.cells[o][i].node&&((r=(n=this.cells[o][i])===null||n===void 0?void 0:n.node)===null||r===void 0?void 0:r.id)===t)return{column:o,row:i};return null}sqdist(t,n){return Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)}occupyNearest(t){let n=_a.MIN_DIST,r,o=null;for(let i=0;i<this.columnNum;i++)for(let a=0;a<this.rowNum;a++)!this.cells[i][a].occupied&&(r=this.sqdist(t,this.cells[i][a]))<n&&(n=r,o=this.cells[i][a]);return o&&(o.occupied=!0),o}insertColumn(t,n){if(!(n<=0)){for(let r=0;r<n;r++){this.cells[r+this.columnNum]=[];for(let o=0;o<this.rowNum;o++)this.cells[r+this.columnNum][o]={dx:r,dy:o,x:r*this.CELL_W,y:o*this.CELL_H,occupied:!1,node:null}}for(let r=this.columnNum-1;r>t;r--)for(let o=0;o<this.rowNum;o++)this.cells[r+n][o]=Object.assign(Object.assign({},this.cells[r][o]),{x:(r+n)*this.CELL_W,y:o*this.CELL_H}),this.cells[r][o]={x:r*this.CELL_W,y:o*this.CELL_H,occupied:!0,node:null};for(let r=0;r<this.additionColumn.length;r++)this.additionColumn[r]>=t&&(this.additionColumn[r]+=n);for(let r=0;r<n;r++)this.additionColumn.push(t+r+1);this.columnNum+=n}}insertRow(t,n){if(!(n<=0)){for(let r=0;r<n;r++)for(let o=0;o<this.columnNum;o++)this.cells[o][r+this.rowNum]={dx:o,dy:r,x:o*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(let r=0;r<this.columnNum;r++)for(let o=this.rowNum-1;o>t;o--)this.cells[r][o+n]=Object.assign(Object.assign({},this.cells[r][o]),{dx:r,dy:o+n,x:r*this.CELL_W,y:(o+n)*this.CELL_H}),this.cells[r][o]={dx:r,dy:o,x:r*this.CELL_W,y:o*this.CELL_H,occupied:!1,node:null};for(let r=0;r<this.additionRow.length;r++)this.additionRow[r]>=t&&(this.additionRow[r]+=n);for(let r=0;r<n;r++)this.additionRow.push(t+r+1);this.rowNum+=n}}getNodes(){const t=[];for(let n=0;n<this.columnNum;n++)for(let r=0;r<this.rowNum;r++)this.cells[n][r].node&&t.push(this.cells[n][r]);return t}}_a.MIN_DIST=50,_a.DEFAULT_CELL_W=80,_a.DEFAULT_CELL_H=80;function Jy(e,t){if(!e.nodes||e.nodes.length===0)return e;const n=t.width,r=t.height,o=t.nodeMinGap;let i=1e4,a=1e4;e.nodes.forEach(u=>{const c=u.size[0]||50,f=u.size[1]||50;i=Math.min(c,i),a=Math.min(f,a)});const s=new _a;s.init(n,r,{CELL_H:a,CELL_W:i}),e.nodes.forEach(u=>{const c=s.occupyNearest(u);c&&(c.node={id:u.id,size:u.size},u.x=c.x,u.y=c.y,u.dx=c.dx,u.dy=c.dy)});for(let u=0;u<e.nodes.length;u++){const c=e.nodes[u],f=s.findGridByNodeId(c.id);if(!f)throw new Error("can not find node cell");const{column:l,row:d}=f;if(c.size[0]+o>i){const h=Math.ceil((c.size[0]+o)/i)-1;let v=h;for(let m=0;m<h&&(s.additionColumn.indexOf(l+m+1)>-1&&!s.cells[l+m+1][d].node);m++)v--;s.insertColumn(l,v)}if(c.size[1]+o>a){const h=Math.ceil((c.size[1]+o)/a)-1;let v=h;for(let m=0;m<h&&(s.additionRow.indexOf(d+m+1)>-1&&!s.cells[l][d+m+1].node);m++)v--;s.insertRow(d,v)}}for(let u=0;u<s.columnNum;u++)for(let c=0;c<s.rowNum;c++){const f=s.cells[u][c];if(f.node){const l=e.nodes.find(d=>{var h;return d.id===((h=f==null?void 0:f.node)===null||h===void 0?void 0:h.id)});l&&(l.x=f.x+l.size[0]/2,l.y=f.y+l.size[1]/2)}}}const ap=1200,sp=800,wl=1e7,$c=10,up=3.141592653589793,rh=1.5707963267948966,eE=up*.375,tE=up*.625,Sl=new Map,nE=10,rE=10;let oh=.8;const cp=.1,oE=.5;function iE(e,t,n){const r=e.x-e.size[0]/2,o=e.y-e.size[1]/2,i=e.x+e.size[0]/2,a=e.y+e.size[1]/2,s=t.x-t.size[0]/2,u=t.y-t.size[1]/2,c=t.x+t.size[0]/2,f=t.y+t.size[1]/2,l=e.x,d=e.y,h=t.x,v=t.y,m=h-l,y=Math.atan2(m,v-d);let E=0,g=0,b=0,_=0;y>rh?(g=o-f,E=s-i,b=parseFloat(g?(g/Math.cos(y)).toFixed(2):E.toFixed(2)),_=parseFloat(E?(E/Math.sin(y)).toFixed(2):g.toFixed(2))):0<y&&y<=rh?(g=u-a,E=s-i,g>E?b=_=parseFloat(g?(g/Math.cos(y)).toFixed(2):E.toFixed(2)):b=_=parseFloat(E?(E/Math.sin(y)).toFixed(2):g.toFixed(2))):y<-rh?(g=o-f,E=-(c-r),g>E?b=_=parseFloat(g?(g/Math.cos(y)).toFixed(2):E.toFixed(2)):b=_=parseFloat(E?(E/Math.sin(y)).toFixed(2):g.toFixed(2))):(g=u-a,Math.abs(m)>(i-r)/2?E=r-c:E=m,g>E?b=_=parseFloat(g?(g/Math.cos(y)).toFixed(2):E.toFixed(2)):b=_=parseFloat(E&&y!==0?(E/Math.sin(y)).toFixed(2):g.toFixed(2)));const S=parseFloat(y.toFixed(2));let V=n;return n&&(V=eE<S&&S<tE),{distance:Math.abs(b<_?b:_),isHoriz:V}}function fp(e,t){const r=(Sl.get(e.id)||[]).find(fe=>fe.source===t.id||fe.target===t.id),o=e.size[0]*e.size[1],i=t.size[0]*t.size[1],a=o>i?t:e,s=o>i?e:t,u=a.x-a.size[0]/2,c=a.y-a.size[1]/2,f=a.x+a.size[0]/2,l=a.y+a.size[1]/2,d=s.x-s.size[0]/2,h=s.y-s.size[1]/2,v=s.x+s.size[0]/2,m=s.y+s.size[1]/2,y=a.x,E=a.y,g=s.x,b=s.y,_=f>=d&&v>=u&&l>=h&&m>=c;let S=0,V=0;if(_){V=Math.sqrt(Math.pow(g-y,2)+Math.pow(b-E,2));const fe=u>d?u:d,ee=c>h?c:h,j=f<v?f:v,q=l<m?l:m,me=j-fe,G=q-ee,ye=me*G;V===0&&(V=1e-7),S=$c*1/V*100+ye,S*=wl}else{let fe=!1;const ee=iE(a,s,fe);V=ee.distance,fe=ee.isHoriz,V<=$c?V!==0?r?S+=$c+wl*1/V:S+=$c+wl*$c/V:S+=wl:(S+=V,r&&(S+=V*V))}return S}function lp(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];(r.x<0||r.y<0||r.x>ap||r.y>sp)&&(t+=1e12);for(let o=n+1;o<e.length;o++)t+=fp(r,e[o])}return t}function aE(e,t,n,r){const o=new Map;n.forEach((u,c)=>{o.set(u.id,u)});const i=r.filter(u=>u.source===e.id||u.target===e.id)||[],a=[];i.forEach(u=>{const c=u.source===e.id?u.target:u.source,f=o.get(c);f&&a.push(f)});let s=!0;for(let u=0;u<a.length;u++){const c=a[u],f=Math.atan((e.y-c.y)/(c.x-e.y))*180,l=Math.atan((t.y-c.y)/(c.x-t.y))*180,d=f<30||f>150,h=l<30||l>150,v=f>70&&f<110,m=l>70&&l<110;if(d&&!h||f*l<0){s=!1;break}else if(v&&!m||f*l<0){s=!1;break}else if((c.x-e.x)*(c.x-t.x)<0){s=!1;break}else if((c.y-e.y)*(c.y-t.y)<0){s=!1;break}}return s}function sE(e,t){let n=!1;const r=1,o=nE*r,i=rE*r,a=[o,-o,0,0],s=[0,0,i,-i];for(let u=0;u<e.length;++u){const c=e[u];let f=dp(c,e);for(let l=0;l<a.length;l++)if(aE(c,{x:c.x+a[l],y:c.y+s[l]},e,t)){c.x+=a[l],c.y+=s[l];const h=dp(c,e),v=Math.random();h<f||v<oh&&v>cp?(f=h,n=!0):(c.x-=a[l],c.y-=s[l])}}return oh>cp&&(oh*=oE),n?lp(e):0}function dp(e,t){let n=0;(e.x<0||e.y<0||e.x+e.size[0]+20>ap||e.y+e.size[1]+20>sp)&&(n+=1e12);for(let r=0;r<t.length;++r)e.id!==t[r].id&&(n+=fp(e,t[r]));return n}function uE(e,t){if(e.length===0)return{nodes:e,edges:t};e.forEach(u=>{const c=t.filter(f=>f.source===u.id||f.target===u.id);Sl.set(u,c)}),e.sort((u,c)=>{var f,l;return((f=Sl.get(u.id))===null||f===void 0?void 0:f.length)-((l=Sl.get(c.id))===null||l===void 0?void 0:l.length)});let n=lp(e),r=20,o=1,i=0;const a=50;let s=0;for(;r>0&&(s++,!(s>=a));){const u=sE(e,t);u!==0&&(i=u),o=i-n,n=i,o===0?--r:r=20}return e.forEach(u=>{u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:e,edges:t}}var cE=uE;function fE(e,t){const{nodes:n,edges:r}=e,o=t.width,i=t.height;if(!(n!=null&&n.length))return Promise.resolve();const a=[];n.forEach(v=>{if(r.filter(y=>y.source===v.id||y.target===v.id).length>1){const y=Object.assign({},v);delete y.size,a.push(y)}});const s=[];r.forEach(v=>{const m=a.find(E=>E.id===v.source),y=a.find(E=>E.id===v.target);m&&y&&s.push(v)});const u=new ys({type:"dagre",ranksep:t.nodeMinGap,nodesep:t.nodeMinGap}),{nodes:c}=u.layout({nodes:a,edges:s});n.forEach(v=>{const m=(c||[]).find(y=>y.id===v.id);v.x=(m==null?void 0:m.x)||o/2,v.y=(m==null?void 0:m.y)||i/2});const f=JSON.parse(JSON.stringify(n)),l=JSON.parse(JSON.stringify(r)),d=ss().nodes(f).force("link",D(l).id(v=>v.id).distance(v=>s.find(y=>y.source===v.source&&y.target===v.target)?30:20)).force("charge",$s()).force("center",Xs(o/2,i/2)).force("x",Ze(o/2)).force("y",Ye(i/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(v=>{d.on("end",()=>{n.forEach(S=>{const V=f.find(fe=>fe.id===S.id);V&&(S.x=V.x,S.y=V.y)});const m=Math.min(...n.map(S=>S.x)),y=Math.max(...n.map(S=>S.x)),E=Math.min(...n.map(S=>S.y)),g=Math.max(...n.map(S=>S.y)),b=o/(y-m),_=i/(g-E);n.forEach(S=>{S.x!==void 0&&b<1&&(S.x=(S.x-m)*b),S.y!==void 0&&_<1&&(S.y=(S.y-E)*_)}),n.forEach(S=>{S.sizeTemp=S.size,S.size=[10,10]}),cE(n,r),n.forEach(S=>{S.size=S.sizeTemp||[],delete S.sizeTemp}),Jy({nodes:n,edges:r},t),v()})})}class lE extends Yt{constructor(t){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},t&&this.updateCfg(t)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const t=this,n=t.nodes,r=t.edges;return n==null||n.forEach(o=>{o.size||(o.size=[50,50])}),fE({nodes:n,edges:r},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{t.onLayoutEnd&&t.onLayoutEnd()})}getType(){return"er"}}class dE extends Yt{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const t=this,n=t.nodes,r=.9,o=t.center;return!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),n&&n.forEach(i=>{i.x=(Math.random()-.5)*r*t.width+o[0],i.y=(Math.random()-.5)*r*t.height+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:this.edges}}getType(){return"random"}}class TE{constructor(t){const n=getLayoutByName(t.type);this.layoutInstance=new n(t)}layout(t){return this.layoutInstance.layout(t)}updateCfg(t){this.layoutInstance.updateCfg(t)}init(t){this.correctLayers(t.nodes),this.layoutInstance.init(t)}correctLayers(t){if(!(t!=null&&t.length))return;let n=1/0;const r=[];if(t.forEach(o=>{isString(o.layer)&&(o.layer=parseInt(o.layer,10)),!(o.layer===void 0||isNaN(o.layer))&&(r.push(o),o.layer<n&&(n=o.layer))}),n<=0){const o=Math.abs(n)+1;r.forEach(i=>i.layer+=o)}}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const IE={force:kt,fruchterman:sy,forceAtlas2:Qy,gForce:Re,force2:is,dagre:ys,dagreCompound:gg,circular:An,radial:iy,concentric:Wv,grid:Cr,mds:Hv,comboForce:Ky,comboCombined:qy,random:dE,"gForce-gpu":Yy,"fruchterman-gpu":Hy,er:lE}},28836:function(at,At,ne){"use strict";ne.d(At,{Z:function(){return Zu}});var re=ne(87363),on=ne.n(re),Mt=ne(9624),ot=ne(50410),Qt=ne(52003),bt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},_e=bt,Tn=ne(6481),lr=function(D,we){return re.createElement(Tn.Z,(0,Qt.Z)({},D,{ref:we,icon:_e}))},Vt=re.forwardRef(lr),Qn=Vt,ut=ne(82187),Gn=ne.n(ut),_n=ne(65213),Jn=ne(99426),nn=ne(75611),bo=ne(74826),Pn=ne(97001),wn=ne(29809),xo=ne(27101),eo=(0,re.createContext)(null),Ur=ne(81230),vo=ne(91359),Zo=ne(70349),_o=ne(34143),it=ne(93500),Ar=function(D){var we=D.activeTabOffset,Ie=D.horizontal,Me=D.rtl,Ze=D.indicator,Ye=Ze===void 0?{}:Ze,Be=Ye.size,tt=Ye.align,Je=tt===void 0?"center":tt,kt=(0,re.useState)(),Gt=(0,nn.Z)(kt,2),an=Gt[0],fn=Gt[1],zn=(0,re.useRef)(),ln=on().useCallback(function(Ht){return typeof Be=="function"?Be(Ht):typeof Be=="number"?Be:Ht},[Be]);function An(){it.Z.cancel(zn.current)}return(0,re.useEffect)(function(){var Ht={};if(we)if(Ie){Ht.width=ln(we.width);var Ft=Me?"right":"left";Je==="start"&&(Ht[Ft]=we[Ft]),Je==="center"&&(Ht[Ft]=we[Ft]+we.width/2,Ht.transform=Me?"translateX(50%)":"translateX(-50%)"),Je==="end"&&(Ht[Ft]=we[Ft]+we.width,Ht.transform="translateX(-100%)")}else Ht.height=ln(we.height),Je==="start"&&(Ht.top=we.top),Je==="center"&&(Ht.top=we.top+we.height/2,Ht.transform="translateY(-50%)"),Je==="end"&&(Ht.top=we.top+we.height,Ht.transform="translateY(-100%)");return An(),zn.current=(0,it.Z)(function(){fn(Ht)}),An},[we,Ie,Me,Je,ln]),{style:an}},er=Ar,tr={width:0,height:0,left:0,top:0};function uo(A,D,we){return(0,re.useMemo)(function(){for(var Ie,Me=new Map,Ze=D.get((Ie=A[0])===null||Ie===void 0?void 0:Ie.key)||tr,Ye=Ze.left+Ze.width,Be=0;Be<A.length;Be+=1){var tt=A[Be].key,Je=D.get(tt);if(!Je){var kt;Je=D.get((kt=A[Be-1])===null||kt===void 0?void 0:kt.key)||tr}var Gt=Me.get(tt)||(0,Jn.Z)({},Je);Gt.right=Ye-Gt.left-Gt.width,Me.set(tt,Gt)}return Me},[A.map(function(Ie){return Ie.key}).join("_"),D,we])}function Vr(A,D){var we=re.useRef(A),Ie=re.useState({}),Me=(0,nn.Z)(Ie,2),Ze=Me[1];function Ye(Be){var tt=typeof Be=="function"?Be(we.current):Be;tt!==we.current&&D(tt,we.current),we.current=tt,Ze({})}return[we.current,Ye]}var Nr=.1,Yt=.01,Cr=20,Ve=Math.pow(.995,Cr);function Re(A,D){var we=(0,re.useState)(),Ie=(0,nn.Z)(we,2),Me=Ie[0],Ze=Ie[1],Ye=(0,re.useState)(0),Be=(0,nn.Z)(Ye,2),tt=Be[0],Je=Be[1],kt=(0,re.useState)(0),Gt=(0,nn.Z)(kt,2),an=Gt[0],fn=Gt[1],zn=(0,re.useState)(),ln=(0,nn.Z)(zn,2),An=ln[0],Ht=ln[1],Ft=(0,re.useRef)();function yn(Jt){var hn=Jt.touches[0],Nt=hn.screenX,en=hn.screenY;Ze({x:Nt,y:en}),window.clearInterval(Ft.current)}function Sn(Jt){if(Me){var hn=Jt.touches[0],Nt=hn.screenX,en=hn.screenY;Ze({x:Nt,y:en});var $t=Nt-Me.x,Zt=en-Me.y;D($t,Zt);var br=Date.now();Je(br),fn(br-tt),Ht({x:$t,y:Zt})}}function dn(){if(Me&&(Ze(null),Ht(null),An)){var Jt=An.x/an,hn=An.y/an,Nt=Math.abs(Jt),en=Math.abs(hn);if(Math.max(Nt,en)<Nr)return;var $t=Jt,Zt=hn;Ft.current=window.setInterval(function(){if(Math.abs($t)<Yt&&Math.abs(Zt)<Yt){window.clearInterval(Ft.current);return}$t*=Ve,Zt*=Ve,D($t*Cr,Zt*Cr)},Cr)}}var sn=(0,re.useRef)();function Xn(Jt){var hn=Jt.deltaX,Nt=Jt.deltaY,en=0,$t=Math.abs(hn),Zt=Math.abs(Nt);$t===Zt?en=sn.current==="x"?hn:Nt:$t>Zt?(en=hn,sn.current="x"):(en=Nt,sn.current="y"),D(-en,-en)&&Jt.preventDefault()}var Nn=(0,re.useRef)(null);Nn.current={onTouchStart:yn,onTouchMove:Sn,onTouchEnd:dn,onWheel:Xn},re.useEffect(function(){function Jt($t){Nn.current.onTouchStart($t)}function hn($t){Nn.current.onTouchMove($t)}function Nt($t){Nn.current.onTouchEnd($t)}function en($t){Nn.current.onWheel($t)}return document.addEventListener("touchmove",hn,{passive:!1}),document.addEventListener("touchend",Nt,{passive:!0}),A.current.addEventListener("touchstart",Jt,{passive:!0}),A.current.addEventListener("wheel",en,{passive:!1}),function(){document.removeEventListener("touchmove",hn),document.removeEventListener("touchend",Nt)}},[])}var ke=ne(82566);function et(A){var D=(0,re.useState)(0),we=(0,nn.Z)(D,2),Ie=we[0],Me=we[1],Ze=(0,re.useRef)(0),Ye=(0,re.useRef)();return Ye.current=A,(0,ke.o)(function(){var Be;(Be=Ye.current)===null||Be===void 0||Be.call(Ye)},[Ie]),function(){Ze.current===Ie&&(Ze.current+=1,Me(Ze.current))}}function St(A){var D=(0,re.useRef)([]),we=(0,re.useState)({}),Ie=(0,nn.Z)(we,2),Me=Ie[1],Ze=(0,re.useRef)(typeof A=="function"?A():A),Ye=et(function(){var tt=Ze.current;D.current.forEach(function(Je){tt=Je(tt)}),D.current=[],Ze.current=tt,Me({})});function Be(tt){D.current.push(tt),Ye()}return[Ze.current,Be]}var vt={width:0,height:0,left:0,top:0,right:0};function In(A,D,we,Ie,Me,Ze,Ye){var Be=Ye.tabs,tt=Ye.tabPosition,Je=Ye.rtl,kt,Gt,an;return["top","bottom"].includes(tt)?(kt="width",Gt=Je?"right":"left",an=Math.abs(we)):(kt="height",Gt="top",an=-we),(0,re.useMemo)(function(){if(!Be.length)return[0,0];for(var fn=Be.length,zn=fn,ln=0;ln<fn;ln+=1){var An=A.get(Be[ln].key)||vt;if(Math.floor(An[Gt]+An[kt])>Math.floor(an+D)){zn=ln-1;break}}for(var Ht=0,Ft=fn-1;Ft>=0;Ft-=1){var yn=A.get(Be[Ft].key)||vt;if(yn[Gt]<an){Ht=Ft+1;break}}return Ht>=zn?[0,0]:[Ht,zn]},[A,D,Ie,Me,Ze,an,tt,Be.map(function(fn){return fn.key}).join("_"),Je])}function nr(A){var D;return A instanceof Map?(D={},A.forEach(function(we,Ie){D[Ie]=we})):D=A,JSON.stringify(D)}var rn="TABS_DQ";function to(A){return String(A).replace(/"/g,rn)}function Lr(A,D,we,Ie){return!(!we||Ie||A===!1||A===void 0&&(D===!1||D===null))}var $r=re.forwardRef(function(A,D){var we=A.prefixCls,Ie=A.editable,Me=A.locale,Ze=A.style;return!Ie||Ie.showAdd===!1?null:re.createElement("button",{ref:D,type:"button",className:"".concat(we,"-nav-add"),style:Ze,"aria-label":(Me==null?void 0:Me.addAriaLabel)||"Add tab",onClick:function(Be){Ie.onEdit("add",{event:Be})}},Ie.addIcon||"+")}),vi=$r,wa=re.forwardRef(function(A,D){var we=A.position,Ie=A.prefixCls,Me=A.extra;if(!Me)return null;var Ze,Ye={};return(0,bo.Z)(Me)==="object"&&!re.isValidElement(Me)?Ye=Me:Ye.right=Me,we==="right"&&(Ze=Ye.right),we==="left"&&(Ze=Ye.left),Ze?re.createElement("div",{className:"".concat(Ie,"-extra-content"),ref:D},Ze):null}),pi=wa,mi=ne(66970),dr=ne(6423),co=ne(84895),gi=re.forwardRef(function(A,D){var we=A.prefixCls,Ie=A.id,Me=A.tabs,Ze=A.locale,Ye=A.mobile,Be=A.more,tt=Be===void 0?{}:Be,Je=A.style,kt=A.className,Gt=A.editable,an=A.tabBarGutter,fn=A.rtl,zn=A.removeAriaLabel,ln=A.onTabClick,An=A.getPopupContainer,Ht=A.popupClassName,Ft=(0,re.useState)(!1),yn=(0,nn.Z)(Ft,2),Sn=yn[0],dn=yn[1],sn=(0,re.useState)(null),Xn=(0,nn.Z)(sn,2),Nn=Xn[0],Jt=Xn[1],hn=tt.icon,Nt=hn===void 0?"More":hn,en="".concat(Ie,"-more-popup"),$t="".concat(we,"-dropdown"),Zt=Nn!==null?"".concat(en,"-").concat(Nn):null,br=Ze==null?void 0:Ze.dropdownAriaLabel;function xr(Xt,rr){Xt.preventDefault(),Xt.stopPropagation(),Gt.onEdit("remove",{key:rr,event:Xt})}var Ot=re.createElement(dr.ZP,{onClick:function(rr){var vr=rr.key,wr=rr.domEvent;ln(vr,wr),dn(!1)},prefixCls:"".concat($t,"-menu"),id:en,tabIndex:-1,role:"listbox","aria-activedescendant":Zt,selectedKeys:[Nn],"aria-label":br!==void 0?br:"expanded dropdown"},Me.map(function(Xt){var rr=Xt.closable,vr=Xt.disabled,wr=Xt.closeIcon,pr=Xt.key,ro=Xt.label,oo=Lr(rr,wr,Gt,vr);return re.createElement(dr.sN,{key:pr,id:"".concat(en,"-").concat(pr),role:"option","aria-controls":Ie&&"".concat(Ie,"-panel-").concat(pr),disabled:vr},re.createElement("span",null,ro),oo&&re.createElement("button",{type:"button","aria-label":zn||"remove",tabIndex:0,className:"".concat($t,"-menu-item-remove"),onClick:function(Io){Io.stopPropagation(),xr(Io,pr)}},wr||Gt.removeIcon||"\xD7"))}));function Or(Xt){for(var rr=Me.filter(function(oo){return!oo.disabled}),vr=rr.findIndex(function(oo){return oo.key===Nn})||0,wr=rr.length,pr=0;pr<wr;pr+=1){vr=(vr+Xt+wr)%wr;var ro=rr[vr];if(!ro.disabled){Jt(ro.key);return}}}function mo(Xt){var rr=Xt.which;if(!Sn){[co.Z.DOWN,co.Z.SPACE,co.Z.ENTER].includes(rr)&&(dn(!0),Xt.preventDefault());return}switch(rr){case co.Z.UP:Or(-1),Xt.preventDefault();break;case co.Z.DOWN:Or(1),Xt.preventDefault();break;case co.Z.ESC:dn(!1);break;case co.Z.SPACE:case co.Z.ENTER:Nn!==null&&ln(Nn,Xt);break}}(0,re.useEffect)(function(){var Xt=document.getElementById(Zt);Xt&&Xt.scrollIntoView&&Xt.scrollIntoView(!1)},[Nn]),(0,re.useEffect)(function(){Sn||Jt(null)},[Sn]);var _r=(0,_n.Z)({},fn?"marginRight":"marginLeft",an);Me.length||(_r.visibility="hidden",_r.order=1);var Pr=Gn()((0,_n.Z)({},"".concat($t,"-rtl"),fn)),no=Ye?null:re.createElement(mi.Z,(0,Qt.Z)({prefixCls:$t,overlay:Ot,visible:Me.length?Sn:!1,onVisibleChange:dn,overlayClassName:Gn()(Pr,Ht),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:An},tt),re.createElement("button",{type:"button",className:"".concat(we,"-nav-more"),style:_r,"aria-haspopup":"listbox","aria-controls":en,id:"".concat(Ie,"-more"),"aria-expanded":Sn,onKeyDown:mo},Nt));return re.createElement("div",{className:Gn()("".concat(we,"-nav-operations"),kt),style:Je,ref:D},no,re.createElement(vi,{prefixCls:we,locale:Ze,editable:Gt}))}),Sa=re.memo(gi,function(A,D){return D.tabMoving}),yi=function(D){var we=D.prefixCls,Ie=D.id,Me=D.active,Ze=D.focus,Ye=D.tab,Be=Ye.key,tt=Ye.label,Je=Ye.disabled,kt=Ye.closeIcon,Gt=Ye.icon,an=D.closable,fn=D.renderWrapper,zn=D.removeAriaLabel,ln=D.editable,An=D.onClick,Ht=D.onFocus,Ft=D.onBlur,yn=D.onKeyDown,Sn=D.onMouseDown,dn=D.onMouseUp,sn=D.style,Xn=D.tabCount,Nn=D.currentPosition,Jt="".concat(we,"-tab"),hn=Lr(an,kt,ln,Je);function Nt(xr){Je||An(xr)}function en(xr){xr.preventDefault(),xr.stopPropagation(),ln.onEdit("remove",{key:Be,event:xr})}var $t=re.useMemo(function(){return Gt&&typeof tt=="string"?re.createElement("span",null,tt):tt},[tt,Gt]),Zt=re.useRef(null);re.useEffect(function(){Ze&&Zt.current&&Zt.current.focus()},[Ze]);var br=re.createElement("div",{key:Be,"data-node-key":to(Be),className:Gn()(Jt,(0,_n.Z)((0,_n.Z)((0,_n.Z)((0,_n.Z)({},"".concat(Jt,"-with-remove"),hn),"".concat(Jt,"-active"),Me),"".concat(Jt,"-disabled"),Je),"".concat(Jt,"-focus"),Ze)),style:sn,onClick:Nt},re.createElement("div",{ref:Zt,role:"tab","aria-selected":Me,id:Ie&&"".concat(Ie,"-tab-").concat(Be),className:"".concat(Jt,"-btn"),"aria-controls":Ie&&"".concat(Ie,"-panel-").concat(Be),"aria-disabled":Je,tabIndex:Je?null:Me?0:-1,onClick:function(Ot){Ot.stopPropagation(),Nt(Ot)},onKeyDown:yn,onMouseDown:Sn,onMouseUp:dn,onFocus:Ht,onBlur:Ft},Ze&&re.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"Tab ".concat(Nn," of ").concat(Xn)),Gt&&re.createElement("span",{className:"".concat(Jt,"-icon")},Gt),tt&&$t),hn&&re.createElement("button",{type:"button",role:"tab","aria-label":zn||"remove",tabIndex:Me?0:-1,className:"".concat(Jt,"-remove"),onClick:function(Ot){Ot.stopPropagation(),en(Ot)}},kt||ln.removeIcon||"\xD7"));return fn?fn(br):br},I=yi,Ei=function(D,we){var Ie=D.offsetWidth,Me=D.offsetHeight,Ze=D.offsetTop,Ye=D.offsetLeft,Be=D.getBoundingClientRect(),tt=Be.width,Je=Be.height,kt=Be.left,Gt=Be.top;return Math.abs(tt-Ie)<1?[tt,Je,kt-we.left,Gt-we.top]:[Ie,Me,Ye,Ze]},Fn=function(D){var we=D.current||{},Ie=we.offsetWidth,Me=Ie===void 0?0:Ie,Ze=we.offsetHeight,Ye=Ze===void 0?0:Ze;if(D.current){var Be=D.current.getBoundingClientRect(),tt=Be.width,Je=Be.height;if(Math.abs(tt-Me)<1)return[tt,Je]}return[Me,Ye]},jo=function(D,we){return D[we?0:1]},Vi=re.forwardRef(function(A,D){var we=A.className,Ie=A.style,Me=A.id,Ze=A.animated,Ye=A.activeKey,Be=A.rtl,tt=A.extra,Je=A.editable,kt=A.locale,Gt=A.tabPosition,an=A.tabBarGutter,fn=A.children,zn=A.onTabClick,ln=A.onTabScroll,An=A.indicator,Ht=re.useContext(eo),Ft=Ht.prefixCls,yn=Ht.tabs,Sn=(0,re.useRef)(null),dn=(0,re.useRef)(null),sn=(0,re.useRef)(null),Xn=(0,re.useRef)(null),Nn=(0,re.useRef)(null),Jt=(0,re.useRef)(null),hn=(0,re.useRef)(null),Nt=Gt==="top"||Gt==="bottom",en=Vr(0,function(pn,_t){Nt&&ln&&ln({direction:pn>_t?"left":"right"})}),$t=(0,nn.Z)(en,2),Zt=$t[0],br=$t[1],xr=Vr(0,function(pn,_t){!Nt&&ln&&ln({direction:pn>_t?"top":"bottom"})}),Ot=(0,nn.Z)(xr,2),Or=Ot[0],mo=Ot[1],_r=(0,re.useState)([0,0]),Pr=(0,nn.Z)(_r,2),no=Pr[0],Xt=Pr[1],rr=(0,re.useState)([0,0]),vr=(0,nn.Z)(rr,2),wr=vr[0],pr=vr[1],ro=(0,re.useState)([0,0]),oo=(0,nn.Z)(ro,2),Go=oo[0],Io=oo[1],Ao=(0,re.useState)([0,0]),Wr=(0,nn.Z)(Ao,2),gn=Wr[0],Fr=Wr[1],Zi=St(new Map),ju=(0,nn.Z)(Zi,2),Jc=ju[0],Yu=ju[1],Ra=uo(yn,Jc,wr[0]),Da=jo(no,Nt),ji=jo(wr,Nt),us=jo(Go,Nt),qo=jo(gn,Nt),Ws=Math.floor(Da)<Math.floor(ji+us),go=Ws?Da-qo:Da-us,Yi="".concat(Ft,"-nav-operations-hidden"),Po=0,Hr=0;Nt&&Be?(Po=0,Hr=Math.max(0,ji-go)):(Po=Math.min(0,go-ji),Hr=0);function Ca(pn){return pn<Po?Po:pn>Hr?Hr:pn}var Fo=(0,re.useRef)(null),Ku=(0,re.useState)(),Qo=(0,nn.Z)(Ku,2),Ki=Qo[0],qu=Qo[1];function Hs(){qu(Date.now())}function Zs(){Fo.current&&clearTimeout(Fo.current)}Re(Xn,function(pn,_t){function En(Rn,Zr){Rn(function(Zn){var Ii=Ca(Zn+Zr);return Ii})}return Ws?(Nt?En(br,pn):En(mo,_t),Zs(),Hs(),!0):!1}),(0,re.useEffect)(function(){return Zs(),Ki&&(Fo.current=setTimeout(function(){qu(0)},100)),Zs},[Ki]);var js=In(Ra,go,Nt?Zt:Or,ji,us,qo,(0,Jn.Z)((0,Jn.Z)({},A),{},{tabs:yn})),Ys=(0,nn.Z)(js,2),Qu=Ys[0],Ks=Ys[1],Cn=(0,Zo.Z)(function(){var pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ye,_t=Ra.get(pn)||{width:0,height:0,left:0,right:0,top:0};if(Nt){var En=Zt;Be?_t.right<Zt?En=_t.right:_t.right+_t.width>Zt+go&&(En=_t.right+_t.width-go):_t.left<-Zt?En=-_t.left:_t.left+_t.width>-Zt+go&&(En=-(_t.left+_t.width-go)),mo(0),br(Ca(En))}else{var Rn=Or;_t.top<-Or?Rn=-_t.top:_t.top+_t.height>-Or+go&&(Rn=-(_t.top+_t.height-go)),br(0),mo(Ca(Rn))}}),La=(0,re.useState)(),qs=(0,nn.Z)(La,2),Sr=qs[0],Jo=qs[1],Oa=(0,re.useState)(!1),zo=(0,nn.Z)(Oa,2),Qs=zo[0],xi=zo[1],Hn=yn.filter(function(pn){return!pn.disabled}).map(function(pn){return pn.key}),No=function(_t){var En=Hn.indexOf(Sr||Ye),Rn=Hn.length,Zr=(En+_t+Rn)%Rn,Zn=Hn[Zr];Jo(Zn)},ei=function(_t){var En=_t.code,Rn=Be&&Nt,Zr=Hn[0],Zn=Hn[Hn.length-1];switch(En){case"ArrowLeft":{Nt&&No(Rn?1:-1);break}case"ArrowRight":{Nt&&No(Rn?-1:1);break}case"ArrowUp":{_t.preventDefault(),Nt||No(-1);break}case"ArrowDown":{_t.preventDefault(),Nt||No(1);break}case"Home":{_t.preventDefault(),Jo(Zr);break}case"End":{_t.preventDefault(),Jo(Zn);break}case"Enter":case"Space":{_t.preventDefault(),zn(Sr,_t);break}case"Backspace":case"Delete":{var Ii=Hn.indexOf(Sr),mr=yn.find(function(Ro){return Ro.key===Sr}),Qi=Lr(mr==null?void 0:mr.closable,mr==null?void 0:mr.closeIcon,Je,mr==null?void 0:mr.disabled);Qi&&(_t.preventDefault(),_t.stopPropagation(),Je.onEdit("remove",{key:Sr,event:_t}),Ii===Hn.length-1?No(-1):No(1));break}}},_i={};Nt?_i[Be?"marginRight":"marginLeft"]=an:_i.marginTop=an;var Ma=yn.map(function(pn,_t){var En=pn.key;return re.createElement(I,{id:Me,prefixCls:Ft,key:En,tab:pn,style:_t===0?void 0:_i,closable:pn.closable,editable:Je,active:En===Ye,focus:En===Sr,renderWrapper:fn,removeAriaLabel:kt==null?void 0:kt.removeAriaLabel,tabCount:Hn.length,currentPosition:_t+1,onClick:function(Zr){zn(En,Zr)},onKeyDown:ei,onFocus:function(){Qs||Jo(En),Cn(En),Hs(),Xn.current&&(Be||(Xn.current.scrollLeft=0),Xn.current.scrollTop=0)},onBlur:function(){Jo(void 0)},onMouseDown:function(){xi(!0)},onMouseUp:function(){xi(!1)}})}),cs=function(){return Yu(function(){var _t,En=new Map,Rn=(_t=Nn.current)===null||_t===void 0?void 0:_t.getBoundingClientRect();return yn.forEach(function(Zr){var Zn,Ii=Zr.key,mr=(Zn=Nn.current)===null||Zn===void 0?void 0:Zn.querySelector('[data-node-key="'.concat(to(Ii),'"]'));if(mr){var Qi=Ei(mr,Rn),Ro=(0,nn.Z)(Qi,4),Ji=Ro[0],eu=Ro[1],tu=Ro[2],tf=Ro[3];En.set(Ii,{width:Ji,height:eu,left:tu,top:tf})}}),En})};(0,re.useEffect)(function(){cs()},[yn.map(function(pn){return pn.key}).join("_")]);var fs=et(function(){var pn=Fn(Sn),_t=Fn(dn),En=Fn(sn);Xt([pn[0]-_t[0]-En[0],pn[1]-_t[1]-En[1]]);var Rn=Fn(hn);Io(Rn);var Zr=Fn(Jt);Fr(Zr);var Zn=Fn(Nn);pr([Zn[0]-Rn[0],Zn[1]-Rn[1]]),cs()}),ef=yn.slice(0,Qu),Js=yn.slice(Ks+1),Bo=[].concat((0,Ur.Z)(ef),(0,Ur.Z)(Js)),qi=Ra.get(Ye),ls=er({activeTabOffset:qi,horizontal:Nt,indicator:An,rtl:Be}),ka=ls.style;(0,re.useEffect)(function(){Cn()},[Ye,Po,Hr,nr(qi),nr(Ra),Nt]),(0,re.useEffect)(function(){fs()},[Be]);var Uo=!!Bo.length,ti="".concat(Ft,"-nav-wrap"),wi,Si,Ti,ds;return Nt?Be?(Si=Zt>0,wi=Zt!==Hr):(wi=Zt<0,Si=Zt!==Po):(Ti=Or<0,ds=Or!==Po),re.createElement(vo.Z,{onResize:fs},re.createElement("div",{ref:(0,_o.x1)(D,Sn),role:"tablist","aria-orientation":Nt?"horizontal":"vertical",className:Gn()("".concat(Ft,"-nav"),we),style:Ie,onKeyDown:function(){Hs()}},re.createElement(pi,{ref:dn,position:"left",extra:tt,prefixCls:Ft}),re.createElement(vo.Z,{onResize:fs},re.createElement("div",{className:Gn()(ti,(0,_n.Z)((0,_n.Z)((0,_n.Z)((0,_n.Z)({},"".concat(ti,"-ping-left"),wi),"".concat(ti,"-ping-right"),Si),"".concat(ti,"-ping-top"),Ti),"".concat(ti,"-ping-bottom"),ds)),ref:Xn},re.createElement(vo.Z,{onResize:fs},re.createElement("div",{ref:Nn,className:"".concat(Ft,"-nav-list"),style:{transform:"translate(".concat(Zt,"px, ").concat(Or,"px)"),transition:Ki?"none":void 0}},Ma,re.createElement(vi,{ref:hn,prefixCls:Ft,locale:kt,editable:Je,style:(0,Jn.Z)((0,Jn.Z)({},Ma.length===0?void 0:_i),{},{visibility:Uo?"hidden":null})}),re.createElement("div",{className:Gn()("".concat(Ft,"-ink-bar"),(0,_n.Z)({},"".concat(Ft,"-ink-bar-animated"),Ze.inkBar)),style:ka}))))),re.createElement(Sa,(0,Qt.Z)({},A,{removeAriaLabel:kt==null?void 0:kt.removeAriaLabel,ref:Jt,prefixCls:Ft,tabs:Bo,className:!Uo&&Yi,tabMoving:!!Ki})),re.createElement(pi,{ref:sn,position:"right",extra:tt,prefixCls:Ft})))}),fo=Vi,Ta=re.forwardRef(function(A,D){var we=A.prefixCls,Ie=A.className,Me=A.style,Ze=A.id,Ye=A.active,Be=A.tabKey,tt=A.children;return re.createElement("div",{id:Ze&&"".concat(Ze,"-panel-").concat(Be),role:"tabpanel",tabIndex:Ye?0:-1,"aria-labelledby":Ze&&"".concat(Ze,"-tab-").concat(Be),"aria-hidden":!Ye,style:Me,className:Gn()(we,Ye&&"".concat(we,"-active"),Ie),ref:D},tt)}),wo=Ta,Ia=["renderTabBar"],$i=["label","key"],is=function(D){var we=D.renderTabBar,Ie=(0,Pn.Z)(D,Ia),Me=re.useContext(eo),Ze=Me.tabs;if(we){var Ye=(0,Jn.Z)((0,Jn.Z)({},Ie),{},{panes:Ze.map(function(Be){var tt=Be.label,Je=Be.key,kt=(0,Pn.Z)(Be,$i);return re.createElement(wo,(0,Qt.Z)({tab:tt,key:Je,tabKey:Je},kt))})});return we(Ye,fo)}return re.createElement(fo,Ie)},hr=is,Dn=ne(54755),So=["key","forceRender","style","className","destroyInactiveTabPane"],Xr=function(D){var we=D.id,Ie=D.activeKey,Me=D.animated,Ze=D.tabPosition,Ye=D.destroyInactiveTabPane,Be=re.useContext(eo),tt=Be.prefixCls,Je=Be.tabs,kt=Me.tabPane,Gt="".concat(tt,"-tabpane");return re.createElement("div",{className:Gn()("".concat(tt,"-content-holder"))},re.createElement("div",{className:Gn()("".concat(tt,"-content"),"".concat(tt,"-content-").concat(Ze),(0,_n.Z)({},"".concat(tt,"-content-animated"),kt))},Je.map(function(an){var fn=an.key,zn=an.forceRender,ln=an.style,An=an.className,Ht=an.destroyInactiveTabPane,Ft=(0,Pn.Z)(an,So),yn=fn===Ie;return re.createElement(Dn.ZP,(0,Qt.Z)({key:fn,visible:yn,forceRender:zn,removeOnLeave:!!(Ye||Ht),leavedClassName:"".concat(Gt,"-hidden")},Me.tabPaneMotion),function(Sn,dn){var sn=Sn.style,Xn=Sn.className;return re.createElement(wo,(0,Qt.Z)({},Ft,{prefixCls:Gt,id:we,tabKey:fn,animated:kt,active:yn,style:(0,Jn.Z)((0,Jn.Z)({},ln),sn),className:Gn()(An,Xn),ref:dn}))})})))},To=Xr,qc=ne(96112);function Pu(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},D;return A===!1?D={inkBar:!1,tabPane:!1}:A===!0?D={inkBar:!0,tabPane:!1}:D=(0,Jn.Z)({inkBar:!0},(0,bo.Z)(A)==="object"?A:{}),D.tabPaneMotion&&D.tabPane===void 0&&(D.tabPane=!0),!D.tabPaneMotion&&D.tabPane&&(D.tabPane=!1),D}var ks=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],Gs=0,Yo=re.forwardRef(function(A,D){var we=A.id,Ie=A.prefixCls,Me=Ie===void 0?"rc-tabs":Ie,Ze=A.className,Ye=A.items,Be=A.direction,tt=A.activeKey,Je=A.defaultActiveKey,kt=A.editable,Gt=A.animated,an=A.tabPosition,fn=an===void 0?"top":an,zn=A.tabBarGutter,ln=A.tabBarStyle,An=A.tabBarExtraContent,Ht=A.locale,Ft=A.more,yn=A.destroyInactiveTabPane,Sn=A.renderTabBar,dn=A.onChange,sn=A.onTabClick,Xn=A.onTabScroll,Nn=A.getPopupContainer,Jt=A.popupClassName,hn=A.indicator,Nt=(0,Pn.Z)(A,ks),en=re.useMemo(function(){return(Ye||[]).filter(function(gn){return gn&&(0,bo.Z)(gn)==="object"&&"key"in gn})},[Ye]),$t=Be==="rtl",Zt=Pu(Gt),br=(0,re.useState)(!1),xr=(0,nn.Z)(br,2),Ot=xr[0],Or=xr[1];(0,re.useEffect)(function(){Or((0,xo.Z)())},[]);var mo=(0,wn.Z)(function(){var gn;return(gn=en[0])===null||gn===void 0?void 0:gn.key},{value:tt,defaultValue:Je}),_r=(0,nn.Z)(mo,2),Pr=_r[0],no=_r[1],Xt=(0,re.useState)(function(){return en.findIndex(function(gn){return gn.key===Pr})}),rr=(0,nn.Z)(Xt,2),vr=rr[0],wr=rr[1];(0,re.useEffect)(function(){var gn=en.findIndex(function(Zi){return Zi.key===Pr});if(gn===-1){var Fr;gn=Math.max(0,Math.min(vr,en.length-1)),no((Fr=en[gn])===null||Fr===void 0?void 0:Fr.key)}wr(gn)},[en.map(function(gn){return gn.key}).join("_"),Pr,vr]);var pr=(0,wn.Z)(null,{value:we}),ro=(0,nn.Z)(pr,2),oo=ro[0],Go=ro[1];(0,re.useEffect)(function(){we||(Go("rc-tabs-".concat(Gs)),Gs+=1)},[]);function Io(gn,Fr){sn==null||sn(gn,Fr);var Zi=gn!==Pr;no(gn),Zi&&(dn==null||dn(gn))}var Ao={id:oo,activeKey:Pr,animated:Zt,tabPosition:fn,rtl:$t,mobile:Ot},Wr=(0,Jn.Z)((0,Jn.Z)({},Ao),{},{editable:kt,locale:Ht,more:Ft,tabBarGutter:zn,onTabClick:Io,onTabScroll:Xn,extra:An,style:ln,panes:null,getPopupContainer:Nn,popupClassName:Jt,indicator:hn});return re.createElement(eo.Provider,{value:{tabs:en,prefixCls:Me}},re.createElement("div",(0,Qt.Z)({ref:D,id:we,className:Gn()(Me,"".concat(Me,"-").concat(fn),(0,_n.Z)((0,_n.Z)((0,_n.Z)({},"".concat(Me,"-mobile"),Ot),"".concat(Me,"-editable"),kt),"".concat(Me,"-rtl"),$t),Ze)},Nt),re.createElement(hr,(0,Qt.Z)({},Wr,{renderTabBar:Sn})),re.createElement(To,(0,Qt.Z)({destroyInactiveTabPane:yn},Ao,{animated:Zt}))))}),bi=Yo,Xi=bi,Ps=ne(89128),yr=ne(9550),Wi=ne(51212),Aa=ne(28644);const Ko={motionAppear:!1,motionEnter:!0,motionLeave:!0};function Na(A){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inkBar:!0,tabPane:!1},we;return D===!1?we={inkBar:!1,tabPane:!1}:D===!0?we={inkBar:!0,tabPane:!0}:we=Object.assign({inkBar:!0},typeof D=="object"?D:{}),we.tabPane&&(we.tabPaneMotion=Object.assign(Object.assign({},Ko),{motionName:(0,Aa.m)(A,"switch")})),we}var Hi=ne(37941),Fs=function(A,D){var we={};for(var Ie in A)Object.prototype.hasOwnProperty.call(A,Ie)&&D.indexOf(Ie)<0&&(we[Ie]=A[Ie]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,Ie=Object.getOwnPropertySymbols(A);Me<Ie.length;Me++)D.indexOf(Ie[Me])<0&&Object.prototype.propertyIsEnumerable.call(A,Ie[Me])&&(we[Ie[Me]]=A[Ie[Me]]);return we};function zs(A){return A.filter(D=>D)}function Fu(A,D){if(A)return A;const we=(0,Hi.Z)(D).map(Ie=>{if(re.isValidElement(Ie)){const{key:Me,props:Ze}=Ie,Ye=Ze||{},{tab:Be}=Ye,tt=Fs(Ye,["tab"]);return Object.assign(Object.assign({key:String(Me)},tt),{label:Be})}return null});return zs(we)}var Pt=ne(53837),po=ne(96528),$n=ne(9907),Bs=ne(4079),Us=ne(93744),as=A=>{const{componentCls:D,motionDurationSlow:we}=A;return[{[D]:{[`${D}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${we}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${we}`}}}}},[(0,Us.oN)(A,"slide-up"),(0,Us.oN)(A,"slide-down")]]};const zu=A=>{const{componentCls:D,tabsCardPadding:we,cardBg:Ie,cardGutter:Me,colorBorderSecondary:Ze,itemSelectedColor:Ye}=A;return{[`${D}-card`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{margin:0,padding:we,background:Ie,border:`${(0,Pt.bf)(A.lineWidth)} ${A.lineType} ${Ze}`,transition:`all ${A.motionDurationSlow} ${A.motionEaseInOut}`},[`${D}-tab-active`]:{color:Ye,background:A.colorBgContainer},[`${D}-tab-focus`]:Object.assign({},(0,po.oN)(A,-3)),[`${D}-ink-bar`]:{visibility:"hidden"},[`& ${D}-tab${D}-tab-focus ${D}-tab-btn`]:{outline:"none"}},[`&${D}-top, &${D}-bottom`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab + ${D}-tab`]:{marginLeft:{_skip_check_:!0,value:(0,Pt.bf)(Me)}}}},[`&${D}-top`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{borderRadius:`${(0,Pt.bf)(A.borderRadiusLG)} ${(0,Pt.bf)(A.borderRadiusLG)} 0 0`},[`${D}-tab-active`]:{borderBottomColor:A.colorBgContainer}}},[`&${D}-bottom`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{borderRadius:`0 0 ${(0,Pt.bf)(A.borderRadiusLG)} ${(0,Pt.bf)(A.borderRadiusLG)}`},[`${D}-tab-active`]:{borderTopColor:A.colorBgContainer}}},[`&${D}-left, &${D}-right`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab + ${D}-tab`]:{marginTop:(0,Pt.bf)(Me)}}},[`&${D}-left`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{borderRadius:{_skip_check_:!0,value:`${(0,Pt.bf)(A.borderRadiusLG)} 0 0 ${(0,Pt.bf)(A.borderRadiusLG)}`}},[`${D}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:A.colorBgContainer}}}},[`&${D}-right`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${(0,Pt.bf)(A.borderRadiusLG)} ${(0,Pt.bf)(A.borderRadiusLG)} 0`}},[`${D}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:A.colorBgContainer}}}}}}},Bu=A=>{const{componentCls:D,itemHoverColor:we,dropdownEdgeChildVerticalPadding:Ie}=A;return{[`${D}-dropdown`]:Object.assign(Object.assign({},(0,po.Wf)(A)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:A.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${D}-dropdown-menu`]:{maxHeight:A.tabsDropdownHeight,margin:0,padding:`${(0,Pt.bf)(Ie)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:A.colorBgContainer,backgroundClip:"padding-box",borderRadius:A.borderRadiusLG,outline:"none",boxShadow:A.boxShadowSecondary,"&-item":Object.assign(Object.assign({},po.vS),{display:"flex",alignItems:"center",minWidth:A.tabsDropdownWidth,margin:0,padding:`${(0,Pt.bf)(A.paddingXXS)} ${(0,Pt.bf)(A.paddingSM)}`,color:A.colorText,fontWeight:"normal",fontSize:A.fontSize,lineHeight:A.lineHeight,cursor:"pointer",transition:`all ${A.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:A.marginSM},color:A.colorTextDescription,fontSize:A.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:we}},"&:hover":{background:A.controlItemBgHover},"&-disabled":{"&, &:hover":{color:A.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},Vs=A=>{const{componentCls:D,margin:we,colorBorderSecondary:Ie,horizontalMargin:Me,verticalItemPadding:Ze,verticalItemMargin:Ye,calc:Be}=A;return{[`${D}-top, ${D}-bottom`]:{flexDirection:"column",[`> ${D}-nav, > div > ${D}-nav`]:{margin:Me,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${(0,Pt.bf)(A.lineWidth)} ${A.lineType} ${Ie}`,content:"''"},[`${D}-ink-bar`]:{height:A.lineWidthBold,"&-animated":{transition:`width ${A.motionDurationSlow}, left ${A.motionDurationSlow},
            right ${A.motionDurationSlow}`}},[`${D}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:A.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:A.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:A.boxShadowTabsOverflowRight},[`&${D}-nav-wrap-ping-left::before`]:{opacity:1},[`&${D}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${D}-top`]:{[`> ${D}-nav,
        > div > ${D}-nav`]:{"&::before":{bottom:0},[`${D}-ink-bar`]:{bottom:0}}},[`${D}-bottom`]:{[`> ${D}-nav, > div > ${D}-nav`]:{order:1,marginTop:we,marginBottom:0,"&::before":{top:0},[`${D}-ink-bar`]:{top:0}},[`> ${D}-content-holder, > div > ${D}-content-holder`]:{order:0}},[`${D}-left, ${D}-right`]:{[`> ${D}-nav, > div > ${D}-nav`]:{flexDirection:"column",minWidth:Be(A.controlHeight).mul(1.25).equal(),[`${D}-tab`]:{padding:Ze,textAlign:"center"},[`${D}-tab + ${D}-tab`]:{margin:Ye},[`${D}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:A.controlHeight},"&::before":{top:0,boxShadow:A.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:A.boxShadowTabsOverflowBottom},[`&${D}-nav-wrap-ping-top::before`]:{opacity:1},[`&${D}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${D}-ink-bar`]:{width:A.lineWidthBold,"&-animated":{transition:`height ${A.motionDurationSlow}, top ${A.motionDurationSlow}`}},[`${D}-nav-list, ${D}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${D}-left`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${D}-content-holder, > div > ${D}-content-holder`]:{marginLeft:{_skip_check_:!0,value:(0,Pt.bf)(Be(A.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${(0,Pt.bf)(A.lineWidth)} ${A.lineType} ${A.colorBorder}`},[`> ${D}-content > ${D}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:A.paddingLG}}}},[`${D}-right`]:{[`> ${D}-nav, > div > ${D}-nav`]:{order:1,[`${D}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${D}-content-holder, > div > ${D}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:Be(A.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${(0,Pt.bf)(A.lineWidth)} ${A.lineType} ${A.colorBorder}`},[`> ${D}-content > ${D}-tabpane`]:{paddingRight:{_skip_check_:!0,value:A.paddingLG}}}}}},Uu=A=>{const{componentCls:D,cardPaddingSM:we,cardPaddingLG:Ie,horizontalItemPaddingSM:Me,horizontalItemPaddingLG:Ze}=A;return{[D]:{"&-small":{[`> ${D}-nav`]:{[`${D}-tab`]:{padding:Me,fontSize:A.titleFontSizeSM}}},"&-large":{[`> ${D}-nav`]:{[`${D}-tab`]:{padding:Ze,fontSize:A.titleFontSizeLG}}}},[`${D}-card`]:{[`&${D}-small`]:{[`> ${D}-nav`]:{[`${D}-tab`]:{padding:we}},[`&${D}-bottom`]:{[`> ${D}-nav ${D}-tab`]:{borderRadius:`0 0 ${(0,Pt.bf)(A.borderRadius)} ${(0,Pt.bf)(A.borderRadius)}`}},[`&${D}-top`]:{[`> ${D}-nav ${D}-tab`]:{borderRadius:`${(0,Pt.bf)(A.borderRadius)} ${(0,Pt.bf)(A.borderRadius)} 0 0`}},[`&${D}-right`]:{[`> ${D}-nav ${D}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${(0,Pt.bf)(A.borderRadius)} ${(0,Pt.bf)(A.borderRadius)} 0`}}},[`&${D}-left`]:{[`> ${D}-nav ${D}-tab`]:{borderRadius:{_skip_check_:!0,value:`${(0,Pt.bf)(A.borderRadius)} 0 0 ${(0,Pt.bf)(A.borderRadius)}`}}}},[`&${D}-large`]:{[`> ${D}-nav`]:{[`${D}-tab`]:{padding:Ie}}}}}},Vu=A=>{const{componentCls:D,itemActiveColor:we,itemHoverColor:Ie,iconCls:Me,tabsHorizontalItemMargin:Ze,horizontalItemPadding:Ye,itemSelectedColor:Be,itemColor:tt}=A,Je=`${D}-tab`;return{[Je]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:Ye,fontSize:A.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:tt,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:we}},"&-btn":{outline:"none",transition:`all ${A.motionDurationSlow}`,[`${Je}-icon:not(:last-child)`]:{marginInlineEnd:A.marginSM}},"&-remove":Object.assign({flex:"none",marginRight:{_skip_check_:!0,value:A.calc(A.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:A.marginXS},color:A.colorTextDescription,fontSize:A.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${A.motionDurationSlow}`,"&:hover":{color:A.colorTextHeading}},(0,po.Qy)(A)),"&:hover":{color:Ie},[`&${Je}-active ${Je}-btn`]:{color:Be,textShadow:A.tabsActiveTextShadow},[`&${Je}-focus ${Je}-btn`]:Object.assign({},(0,po.oN)(A)),[`&${Je}-disabled`]:{color:A.colorTextDisabled,cursor:"not-allowed"},[`&${Je}-disabled ${Je}-btn, &${Je}-disabled ${D}-remove`]:{"&:focus, &:active":{color:A.colorTextDisabled}},[`& ${Je}-remove ${Me}`]:{margin:0},[`${Me}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:A.marginSM}}},[`${Je} + ${Je}`]:{margin:{_skip_check_:!0,value:Ze}}}},$u=A=>{const{componentCls:D,tabsHorizontalItemMarginRTL:we,iconCls:Ie,cardGutter:Me,calc:Ze}=A;return{[`${D}-rtl`]:{direction:"rtl",[`${D}-nav`]:{[`${D}-tab`]:{margin:{_skip_check_:!0,value:we},[`${D}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[Ie]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:(0,Pt.bf)(A.marginSM)}},[`${D}-tab-remove`]:{marginRight:{_skip_check_:!0,value:(0,Pt.bf)(A.marginXS)},marginLeft:{_skip_check_:!0,value:(0,Pt.bf)(Ze(A.marginXXS).mul(-1).equal())},[Ie]:{margin:0}}}},[`&${D}-left`]:{[`> ${D}-nav`]:{order:1},[`> ${D}-content-holder`]:{order:0}},[`&${D}-right`]:{[`> ${D}-nav`]:{order:0},[`> ${D}-content-holder`]:{order:1}},[`&${D}-card${D}-top, &${D}-card${D}-bottom`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab + ${D}-tab`]:{marginRight:{_skip_check_:!0,value:Me},marginLeft:{_skip_check_:!0,value:0}}}}},[`${D}-dropdown-rtl`]:{direction:"rtl"},[`${D}-menu-item`]:{[`${D}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},Xu=A=>{const{componentCls:D,tabsCardPadding:we,cardHeight:Ie,cardGutter:Me,itemHoverColor:Ze,itemActiveColor:Ye,colorBorderSecondary:Be}=A;return{[D]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,po.Wf)(A)),{display:"flex",[`> ${D}-nav, > div > ${D}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${D}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${A.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${D}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${A.motionDurationSlow}`},[`${D}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${D}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${D}-nav-more`]:{position:"relative",padding:we,background:"transparent",border:0,color:A.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:A.calc(A.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${D}-nav-add`]:Object.assign({minWidth:Ie,marginLeft:{_skip_check_:!0,value:Me},padding:(0,Pt.bf)(A.paddingXS),background:"transparent",border:`${(0,Pt.bf)(A.lineWidth)} ${A.lineType} ${Be}`,borderRadius:`${(0,Pt.bf)(A.borderRadiusLG)} ${(0,Pt.bf)(A.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:A.colorText,transition:`all ${A.motionDurationSlow} ${A.motionEaseInOut}`,"&:hover":{color:Ze},"&:active, &:focus:not(:focus-visible)":{color:Ye}},(0,po.Qy)(A,-3))},[`${D}-extra-content`]:{flex:"none"},[`${D}-ink-bar`]:{position:"absolute",background:A.inkBarColor,pointerEvents:"none"}}),Vu(A)),{[`${D}-content`]:{position:"relative",width:"100%"},[`${D}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${D}-tabpane`]:Object.assign(Object.assign({},(0,po.Qy)(A)),{"&-hidden":{display:"none"}})}),[`${D}-centered`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-nav-wrap`]:{[`&:not([class*='${D}-nav-wrap-ping']) > ${D}-nav-list`]:{margin:"auto"}}}}}},Wu=A=>{const D=A.controlHeightLG;return{zIndexPopup:A.zIndexPopupBase+50,cardBg:A.colorFillAlter,cardHeight:D,cardPadding:`${(D-Math.round(A.fontSize*A.lineHeight))/2-A.lineWidth}px ${A.padding}px`,cardPaddingSM:`${A.paddingXXS*1.5}px ${A.padding}px`,cardPaddingLG:`${A.paddingXS}px ${A.padding}px ${A.paddingXXS*1.5}px`,titleFontSize:A.fontSize,titleFontSizeLG:A.fontSizeLG,titleFontSizeSM:A.fontSize,inkBarColor:A.colorPrimary,horizontalMargin:`0 0 ${A.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${A.paddingSM}px 0`,horizontalItemPaddingSM:`${A.paddingXS}px 0`,horizontalItemPaddingLG:`${A.padding}px 0`,verticalItemPadding:`${A.paddingXS}px ${A.paddingLG}px`,verticalItemMargin:`${A.margin}px 0 0 0`,itemColor:A.colorText,itemSelectedColor:A.colorPrimary,itemHoverColor:A.colorPrimaryHover,itemActiveColor:A.colorPrimaryActive,cardGutter:A.marginXXS/2}};var ss=(0,$n.I$)("Tabs",A=>{const D=(0,Bs.IX)(A,{tabsCardPadding:A.cardPadding,dropdownEdgeChildVerticalPadding:A.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${(0,Pt.bf)(A.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${(0,Pt.bf)(A.horizontalItemGutter)}`});return[Uu(D),$u(D),Vs(D),Bu(D),zu(D),Xu(D),as(D)]},Wu),Xs=()=>null,Hu=function(A,D){var we={};for(var Ie in A)Object.prototype.hasOwnProperty.call(A,Ie)&&D.indexOf(Ie)<0&&(we[Ie]=A[Ie]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Me=0,Ie=Object.getOwnPropertySymbols(A);Me<Ie.length;Me++)D.indexOf(Ie[Me])<0&&Object.prototype.propertyIsEnumerable.call(A,Ie[Me])&&(we[Ie[Me]]=A[Ie[Me]]);return we};const Er=A=>{var D,we,Ie,Me,Ze,Ye,Be,tt,Je,kt,Gt;const{type:an,className:fn,rootClassName:zn,size:ln,onEdit:An,hideAdd:Ht,centered:Ft,addIcon:yn,removeIcon:Sn,moreIcon:dn,more:sn,popupClassName:Xn,children:Nn,items:Jt,animated:hn,style:Nt,indicatorSize:en,indicator:$t}=A,Zt=Hu(A,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","removeIcon","moreIcon","more","popupClassName","children","items","animated","style","indicatorSize","indicator"]),{prefixCls:br}=Zt,{direction:xr,tabs:Ot,getPrefixCls:Or,getPopupContainer:mo}=re.useContext(Ps.E_),_r=Or("tabs",br),Pr=(0,yr.Z)(_r),[no,Xt,rr]=ss(_r,Pr);let vr;an==="editable-card"&&(vr={onEdit:(Ao,Wr)=>{let{key:gn,event:Fr}=Wr;An==null||An(Ao==="add"?Fr:gn,Ao)},removeIcon:(D=Sn!=null?Sn:Ot==null?void 0:Ot.removeIcon)!==null&&D!==void 0?D:re.createElement(Mt.Z,null),addIcon:(yn!=null?yn:Ot==null?void 0:Ot.addIcon)||re.createElement(Qn,null),showAdd:Ht!==!0});const wr=Or(),pr=(0,Wi.Z)(ln),ro=Fu(Jt,Nn),oo=Na(_r,hn),Go=Object.assign(Object.assign({},Ot==null?void 0:Ot.style),Nt),Io={align:(we=$t==null?void 0:$t.align)!==null&&we!==void 0?we:(Ie=Ot==null?void 0:Ot.indicator)===null||Ie===void 0?void 0:Ie.align,size:(Be=(Ze=(Me=$t==null?void 0:$t.size)!==null&&Me!==void 0?Me:en)!==null&&Ze!==void 0?Ze:(Ye=Ot==null?void 0:Ot.indicator)===null||Ye===void 0?void 0:Ye.size)!==null&&Be!==void 0?Be:Ot==null?void 0:Ot.indicatorSize};return no(re.createElement(Xi,Object.assign({direction:xr,getPopupContainer:mo},Zt,{items:ro,className:Gn()({[`${_r}-${pr}`]:pr,[`${_r}-card`]:["card","editable-card"].includes(an),[`${_r}-editable-card`]:an==="editable-card",[`${_r}-centered`]:Ft},Ot==null?void 0:Ot.className,fn,zn,Xt,rr,Pr),popupClassName:Gn()(Xn,Xt,rr,Pr),style:Go,editable:vr,more:Object.assign({icon:(Gt=(kt=(Je=(tt=Ot==null?void 0:Ot.more)===null||tt===void 0?void 0:tt.icon)!==null&&Je!==void 0?Je:Ot==null?void 0:Ot.moreIcon)!==null&&kt!==void 0?kt:dn)!==null&&Gt!==void 0?Gt:re.createElement(ot.Z,null),transitionName:`${wr}-slide-up`},sn),prefixCls:_r,animated:oo,indicator:Io})))};Er.TabPane=Xs;var Zu=Er},66970:function(at,At,ne){"use strict";ne.d(At,{Z:function(){return _o}});var re=ne(52003),on=ne(65213),Mt=ne(75611),ot=ne(97001),Qt=ne(59437),bt=ne(82187),_e=ne.n(bt),Tn=ne(34143),lr=ne(87363),Vt=ne.n(lr),Qn=ne(84895),ut=ne(93500),Gn=Qn.Z.ESC,_n=Qn.Z.TAB;function Jn(it){var Ar=it.visible,er=it.triggerRef,tr=it.onVisibleChange,uo=it.autoFocus,Vr=it.overlayRef,Nr=lr.useRef(!1),Yt=function(){if(Ar){var ke,et;(ke=er.current)===null||ke===void 0||(et=ke.focus)===null||et===void 0||et.call(ke),tr==null||tr(!1)}},Cr=function(){var ke;return(ke=Vr.current)!==null&&ke!==void 0&&ke.focus?(Vr.current.focus(),Nr.current=!0,!0):!1},Ve=function(ke){switch(ke.keyCode){case Gn:Yt();break;case _n:{var et=!1;Nr.current||(et=Cr()),et?ke.preventDefault():Yt();break}}};lr.useEffect(function(){return Ar?(window.addEventListener("keydown",Ve),uo&&(0,ut.Z)(Cr,3),function(){window.removeEventListener("keydown",Ve),Nr.current=!1}):function(){Nr.current=!1}},[Ar])}var nn=(0,lr.forwardRef)(function(it,Ar){var er=it.overlay,tr=it.arrow,uo=it.prefixCls,Vr=(0,lr.useMemo)(function(){var Yt;return typeof er=="function"?Yt=er():Yt=er,Yt},[er]),Nr=(0,Tn.sQ)(Ar,(0,Tn.C4)(Vr));return Vt().createElement(Vt().Fragment,null,tr&&Vt().createElement("div",{className:"".concat(uo,"-arrow")}),Vt().cloneElement(Vr,{ref:(0,Tn.Yr)(Vr)?Nr:void 0}))}),bo=nn,Pn={adjustX:1,adjustY:1},wn=[0,0],xo={topLeft:{points:["bl","tl"],overflow:Pn,offset:[0,-4],targetOffset:wn},top:{points:["bc","tc"],overflow:Pn,offset:[0,-4],targetOffset:wn},topRight:{points:["br","tr"],overflow:Pn,offset:[0,-4],targetOffset:wn},bottomLeft:{points:["tl","bl"],overflow:Pn,offset:[0,4],targetOffset:wn},bottom:{points:["tc","bc"],overflow:Pn,offset:[0,4],targetOffset:wn},bottomRight:{points:["tr","br"],overflow:Pn,offset:[0,4],targetOffset:wn}},eo=xo,Ur=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function vo(it,Ar){var er,tr=it.arrow,uo=tr===void 0?!1:tr,Vr=it.prefixCls,Nr=Vr===void 0?"rc-dropdown":Vr,Yt=it.transitionName,Cr=it.animation,Ve=it.align,Re=it.placement,ke=Re===void 0?"bottomLeft":Re,et=it.placements,St=et===void 0?eo:et,vt=it.getPopupContainer,In=it.showAction,nr=it.hideAction,rn=it.overlayClassName,to=it.overlayStyle,Lr=it.visible,$r=it.trigger,vi=$r===void 0?["hover"]:$r,wa=it.autoFocus,pi=it.overlay,mi=it.children,dr=it.onVisibleChange,co=(0,ot.Z)(it,Ur),gi=Vt().useState(),Sa=(0,Mt.Z)(gi,2),yi=Sa[0],I=Sa[1],Ei="visible"in it?Lr:yi,Fn=Vt().useRef(null),jo=Vt().useRef(null),Vi=Vt().useRef(null);Vt().useImperativeHandle(Ar,function(){return Fn.current});var fo=function(Xr){I(Xr),dr==null||dr(Xr)};Jn({visible:Ei,triggerRef:Vi,onVisibleChange:fo,autoFocus:wa,overlayRef:jo});var Ta=function(Xr){var To=it.onOverlayClick;I(!1),To&&To(Xr)},wo=function(){return Vt().createElement(bo,{ref:jo,overlay:pi,prefixCls:Nr,arrow:uo})},Ia=function(){return typeof pi=="function"?wo:wo()},$i=function(){var Xr=it.minOverlayWidthMatchTrigger,To=it.alignPoint;return"minOverlayWidthMatchTrigger"in it?Xr:!To},is=function(){var Xr=it.openClassName;return Xr!==void 0?Xr:"".concat(Nr,"-open")},hr=Vt().cloneElement(mi,{className:_e()((er=mi.props)===null||er===void 0?void 0:er.className,Ei&&is()),ref:(0,Tn.Yr)(mi)?(0,Tn.sQ)(Vi,(0,Tn.C4)(mi)):void 0}),Dn=nr;return!Dn&&vi.indexOf("contextMenu")!==-1&&(Dn=["click"]),Vt().createElement(Qt.Z,(0,re.Z)({builtinPlacements:St},co,{prefixCls:Nr,ref:Fn,popupClassName:_e()(rn,(0,on.Z)({},"".concat(Nr,"-show-arrow"),uo)),popupStyle:to,action:vi,showAction:In,hideAction:Dn,popupPlacement:ke,popupAlign:Ve,popupTransitionName:Yt,popupAnimation:Cr,popupVisible:Ei,stretch:$i()?"minWidth":"",popup:Ia(),onPopupVisibleChange:fo,onPopupClick:Ta,getPopupContainer:vt}),hr)}var Zo=Vt().forwardRef(vo),_o=Zo},40224:function(at){(function(At,ne){at.exports=ne()})(this,function(){"use strict";var At=function(p){return p instanceof Uint8Array||p instanceof Uint16Array||p instanceof Uint32Array||p instanceof Int8Array||p instanceof Int16Array||p instanceof Int32Array||p instanceof Float32Array||p instanceof Float64Array||p instanceof Uint8ClampedArray},ne=function(p,w){for(var L=Object.keys(w),Y=0;Y<L.length;++Y)p[L[Y]]=w[L[Y]];return p},re=`
`;function on(p){return typeof atob!="undefined"?atob(p):"base64:"+p}function Mt(p){var w=new Error("(regl) "+p);throw console.error(w),w}function ot(p,w){p||Mt(w)}function Qt(p){return p?": "+p:""}function bt(p,w,L){p in w||Mt("unknown parameter ("+p+")"+Qt(L)+". possible values: "+Object.keys(w).join())}function _e(p,w){At(p)||Mt("invalid parameter type"+Qt(w)+". must be a typed array")}function Tn(p,w){switch(w){case"number":return typeof p=="number";case"object":return typeof p=="object";case"string":return typeof p=="string";case"boolean":return typeof p=="boolean";case"function":return typeof p=="function";case"undefined":return typeof p=="undefined";case"symbol":return typeof p=="symbol"}}function lr(p,w,L){Tn(p,w)||Mt("invalid parameter type"+Qt(L)+". expected "+w+", got "+typeof p)}function Vt(p,w){p>=0&&(p|0)===p||Mt("invalid parameter type, ("+p+")"+Qt(w)+". must be a nonnegative integer")}function Qn(p,w,L){w.indexOf(p)<0&&Mt("invalid value"+Qt(L)+". must be one of: "+w)}var ut=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function Gn(p){Object.keys(p).forEach(function(w){ut.indexOf(w)<0&&Mt('invalid regl constructor argument "'+w+'". must be one of '+ut)})}function _n(p,w){for(p=p+"";p.length<w;)p=" "+p;return p}function Jn(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function nn(p,w){this.number=p,this.line=w,this.errors=[]}function bo(p,w,L){this.file=p,this.line=w,this.message=L}function Pn(){var p=new Error,w=(p.stack||p).toString(),L=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(w);if(L)return L[1];var Y=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(w);return Y?Y[1]:"unknown"}function wn(){var p=new Error,w=(p.stack||p).toString(),L=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(w);if(L)return L[1];var Y=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(w);return Y?Y[1]:"unknown"}function xo(p,w){var L=p.split(`
`),Y=1,ie=0,Z={unknown:new Jn,0:new Jn};Z.unknown.name=Z[0].name=w||Pn(),Z.unknown.lines.push(new nn(0,""));for(var Q=0;Q<L.length;++Q){var he=L[Q],ge=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(he);if(ge)switch(ge[1]){case"line":var xe=/(\d+)(\s+\d+)?/.exec(ge[2]);xe&&(Y=xe[1]|0,xe[2]&&(ie=xe[2]|0,ie in Z||(Z[ie]=new Jn)));break;case"define":var de=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ge[2]);de&&(Z[ie].name=de[1]?on(de[2]):de[2]);break}Z[ie].lines.push(new nn(Y++,he))}return Object.keys(Z).forEach(function(Te){var Le=Z[Te];Le.lines.forEach(function(ve){Le.index[ve.number]=ve})}),Z}function eo(p){var w=[];return p.split(`
`).forEach(function(L){if(!(L.length<5)){var Y=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(L);Y?w.push(new bo(Y[1]|0,Y[2]|0,Y[3].trim())):L.length>0&&w.push(new bo("unknown",0,L))}}),w}function Ur(p,w){w.forEach(function(L){var Y=p[L.file];if(Y){var ie=Y.index[L.line];if(ie){ie.errors.push(L),Y.hasErrors=!0;return}}p.unknown.hasErrors=!0,p.unknown.lines[0].errors.push(L)})}function vo(p,w,L,Y,ie){if(!p.getShaderParameter(w,p.COMPILE_STATUS)){var Z=p.getShaderInfoLog(w),Q=Y===p.FRAGMENT_SHADER?"fragment":"vertex";uo(L,"string",Q+" shader source must be a string",ie);var he=xo(L,ie),ge=eo(Z);Ur(he,ge),Object.keys(he).forEach(function(xe){var de=he[xe];if(!de.hasErrors)return;var Te=[""],Le=[""];function ve(Ae,X){Te.push(Ae),Le.push(X||"")}ve("file number "+xe+": "+de.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),de.lines.forEach(function(Ae){if(Ae.errors.length>0){ve(_n(Ae.number,4)+"|  ","background-color:yellow; font-weight:bold"),ve(Ae.line+re,"color:red; background-color:yellow; font-weight:bold");var X=0;Ae.errors.forEach(function(J){var pe=J.message,Oe=/^\s*'(.*)'\s*:\s*(.*)$/.exec(pe);if(Oe){var ue=Oe[1];switch(pe=Oe[2],ue){case"assign":ue="=";break}X=Math.max(Ae.line.indexOf(ue,X),0)}else X=0;ve(_n("| ",6)),ve(_n("^^^",X+3)+re,"font-weight:bold"),ve(_n("| ",6)),ve(pe+re,"font-weight:bold")}),ve(_n("| ",6)+re)}else ve(_n(Ae.number,4)+"|  "),ve(Ae.line+re,"color:red")}),typeof document!="undefined"&&!window.chrome?(Le[0]=Te.join("%c"),console.log.apply(console,Le)):console.log(Te.join(""))}),ot.raise("Error compiling "+Q+" shader, "+he[0].name)}}function Zo(p,w,L,Y,ie){if(!p.getProgramParameter(w,p.LINK_STATUS)){var Z=p.getProgramInfoLog(w),Q=xo(L,ie),he=xo(Y,ie),ge='Error linking program with vertex shader, "'+he[0].name+'", and fragment shader "'+Q[0].name+'"';typeof document!="undefined"?console.log("%c"+ge+re+"%c"+Z,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ge+re+Z),ot.raise(ge)}}function _o(p){p._commandRef=Pn()}function it(p,w,L,Y){_o(p);function ie(ge){return ge?Y.id(ge):0}p._fragId=ie(p.static.frag),p._vertId=ie(p.static.vert);function Z(ge,xe){Object.keys(xe).forEach(function(de){ge[Y.id(de)]=!0})}var Q=p._uniformSet={};Z(Q,w.static),Z(Q,w.dynamic);var he=p._attributeSet={};Z(he,L.static),Z(he,L.dynamic),p._hasCount="count"in p.static||"count"in p.dynamic||"elements"in p.static||"elements"in p.dynamic}function Ar(p,w){var L=wn();Mt(p+" in command "+(w||Pn())+(L==="unknown"?"":" called from "+L))}function er(p,w,L){p||Ar(w,L||Pn())}function tr(p,w,L,Y){p in w||Ar("unknown parameter ("+p+")"+Qt(L)+". possible values: "+Object.keys(w).join(),Y||Pn())}function uo(p,w,L,Y){Tn(p,w)||Ar("invalid parameter type"+Qt(L)+". expected "+w+", got "+typeof p,Y||Pn())}function Vr(p){p()}function Nr(p,w,L){p.texture?Qn(p.texture._texture.internalformat,w,"unsupported texture format for attachment"):Qn(p.renderbuffer._renderbuffer.format,L,"unsupported renderbuffer format for attachment")}var Yt=33071,Cr=9728,Ve=9984,Re=9985,ke=9986,et=9987,St=5120,vt=5121,In=5122,nr=5123,rn=5124,to=5125,Lr=5126,$r=32819,vi=32820,wa=33635,pi=34042,mi=36193,dr={};dr[St]=dr[vt]=1,dr[In]=dr[nr]=dr[mi]=dr[wa]=dr[$r]=dr[vi]=2,dr[rn]=dr[to]=dr[Lr]=dr[pi]=4;function co(p,w){return p===vi||p===$r||p===wa?2:p===pi?4:dr[p]*w}function gi(p){return!(p&p-1)&&!!p}function Sa(p,w,L){var Y,ie=w.width,Z=w.height,Q=w.channels;ot(ie>0&&ie<=L.maxTextureSize&&Z>0&&Z<=L.maxTextureSize,"invalid texture shape"),(p.wrapS!==Yt||p.wrapT!==Yt)&&ot(gi(ie)&&gi(Z),"incompatible wrap mode for texture, both width and height must be power of 2"),w.mipmask===1?ie!==1&&Z!==1&&ot(p.minFilter!==Ve&&p.minFilter!==ke&&p.minFilter!==Re&&p.minFilter!==et,"min filter requires mipmap"):(ot(gi(ie)&&gi(Z),"texture must be a square power of 2 to support mipmapping"),ot(w.mipmask===(ie<<1)-1,"missing or incomplete mipmap data")),w.type===Lr&&(L.extensions.indexOf("oes_texture_float_linear")<0&&ot(p.minFilter===Cr&&p.magFilter===Cr,"filter not supported, must enable oes_texture_float_linear"),ot(!p.genMipmaps,"mipmap generation not supported with float textures"));var he=w.images;for(Y=0;Y<16;++Y)if(he[Y]){var ge=ie>>Y,xe=Z>>Y;ot(w.mipmask&1<<Y,"missing mipmap data");var de=he[Y];if(ot(de.width===ge&&de.height===xe,"invalid shape for mip images"),ot(de.format===w.format&&de.internalformat===w.internalformat&&de.type===w.type,"incompatible type for mip image"),!de.compressed)if(de.data){var Te=Math.ceil(co(de.type,Q)*ge/de.unpackAlignment)*de.unpackAlignment;ot(de.data.byteLength===Te*xe,"invalid data for image, buffer size is inconsistent with image format")}else de.element||de.copy}else p.genMipmaps||ot((w.mipmask&1<<Y)===0,"extra mipmap data");w.compressed&&ot(!p.genMipmaps,"mipmap generation for compressed images not supported")}function yi(p,w,L,Y){var ie=p.width,Z=p.height,Q=p.channels;ot(ie>0&&ie<=Y.maxTextureSize&&Z>0&&Z<=Y.maxTextureSize,"invalid texture shape"),ot(ie===Z,"cube map must be square"),ot(w.wrapS===Yt&&w.wrapT===Yt,"wrap mode not supported by cube map");for(var he=0;he<L.length;++he){var ge=L[he];ot(ge.width===ie&&ge.height===Z,"inconsistent cube map face shape"),w.genMipmaps&&(ot(!ge.compressed,"can not generate mipmap for compressed textures"),ot(ge.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var xe=ge.images,de=0;de<16;++de){var Te=xe[de];if(Te){var Le=ie>>de,ve=Z>>de;ot(ge.mipmask&1<<de,"missing mipmap data"),ot(Te.width===Le&&Te.height===ve,"invalid shape for mip images"),ot(Te.format===p.format&&Te.internalformat===p.internalformat&&Te.type===p.type,"incompatible type for mip image"),Te.compressed||(Te.data?ot(Te.data.byteLength===Le*ve*Math.max(co(Te.type,Q),Te.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Te.element||Te.copy)}}}}var I=ne(ot,{optional:Vr,raise:Mt,commandRaise:Ar,command:er,parameter:bt,commandParameter:tr,constructor:Gn,type:lr,commandType:uo,isTypedArray:_e,nni:Vt,oneOf:Qn,shaderError:vo,linkError:Zo,callSite:wn,saveCommandRef:_o,saveDrawInfo:it,framebufferFormat:Nr,guessCommand:Pn,texture2D:Sa,textureCube:yi}),Ei=0,Fn=0,jo=5,Vi=6;function fo(p,w){this.id=Ei++,this.type=p,this.data=w}function Ta(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function wo(p){if(p.length===0)return[];var w=p.charAt(0),L=p.charAt(p.length-1);if(p.length>1&&w===L&&(w==='"'||w==="'"))return['"'+Ta(p.substr(1,p.length-2))+'"'];var Y=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(p);if(Y)return wo(p.substr(0,Y.index)).concat(wo(Y[1])).concat(wo(p.substr(Y.index+Y[0].length)));var ie=p.split(".");if(ie.length===1)return['"'+Ta(p)+'"'];for(var Z=[],Q=0;Q<ie.length;++Q)Z=Z.concat(wo(ie[Q]));return Z}function Ia(p){return"["+wo(p).join("][")+"]"}function $i(p,w){return new fo(p,Ia(w+""))}function is(p){return typeof p=="function"&&!p._reglType||p instanceof fo}function hr(p,w){if(typeof p=="function")return new fo(Fn,p);if(typeof p=="number"||typeof p=="boolean")return new fo(jo,p);if(Array.isArray(p))return new fo(Vi,p.map((L,Y)=>hr(L,w+"["+Y+"]")));if(p instanceof fo)return p;I(!1,"invalid option type in uniform "+w)}var Dn={DynamicVariable:fo,define:$i,isDynamic:is,unbox:hr,accessor:Ia},So={next:typeof requestAnimationFrame=="function"?function(p){return requestAnimationFrame(p)}:function(p){return setTimeout(p,16)},cancel:typeof cancelAnimationFrame=="function"?function(p){return cancelAnimationFrame(p)}:clearTimeout},Xr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function To(){var p={"":0},w=[""];return{id:function(L){var Y=p[L];return Y||(Y=p[L]=w.length,w.push(L),Y)},str:function(L){return w[L]}}}function qc(p,w,L){var Y=document.createElement("canvas");ne(Y.style,{border:0,margin:0,padding:0,top:0,left:0}),p.appendChild(Y),p===document.body&&(Y.style.position="absolute",ne(p.style,{margin:0,padding:0}));function ie(){var he=window.innerWidth,ge=window.innerHeight;if(p!==document.body){var xe=p.getBoundingClientRect();he=xe.right-xe.left,ge=xe.bottom-xe.top}Y.width=L*he,Y.height=L*ge,ne(Y.style,{width:he+"px",height:ge+"px"})}var Z;p!==document.body&&typeof ResizeObserver=="function"?(Z=new ResizeObserver(function(){setTimeout(ie)}),Z.observe(p)):window.addEventListener("resize",ie,!1);function Q(){Z?Z.disconnect():window.removeEventListener("resize",ie),p.removeChild(Y)}return ie(),{canvas:Y,onDestroy:Q}}function Pu(p,w){function L(Y){try{return p.getContext(Y,w)}catch(ie){return null}}return L("webgl")||L("experimental-webgl")||L("webgl-experimental")}function ks(p){return typeof p.nodeName=="string"&&typeof p.appendChild=="function"&&typeof p.getBoundingClientRect=="function"}function Gs(p){return typeof p.drawArrays=="function"||typeof p.drawElements=="function"}function Yo(p){return typeof p=="string"?p.split():(I(Array.isArray(p),"invalid extension array"),p)}function bi(p){return typeof p=="string"?(I(typeof document!="undefined","not supported outside of DOM"),document.querySelector(p)):p}function Xi(p){var w=p||{},L,Y,ie,Z,Q={},he=[],ge=[],xe=typeof window=="undefined"?1:window.devicePixelRatio,de=!1,Te=function(Ae){Ae&&I.raise(Ae)},Le=function(){};if(typeof w=="string"?(I(typeof document!="undefined","selector queries only supported in DOM enviroments"),L=document.querySelector(w),I(L,"invalid query string for element")):typeof w=="object"?ks(w)?L=w:Gs(w)?(Z=w,ie=Z.canvas):(I.constructor(w),"gl"in w?Z=w.gl:"canvas"in w?ie=bi(w.canvas):"container"in w&&(Y=bi(w.container)),"attributes"in w&&(Q=w.attributes,I.type(Q,"object","invalid context attributes")),"extensions"in w&&(he=Yo(w.extensions)),"optionalExtensions"in w&&(ge=Yo(w.optionalExtensions)),"onDone"in w&&(I.type(w.onDone,"function","invalid or missing onDone callback"),Te=w.onDone),"profile"in w&&(de=!!w.profile),"pixelRatio"in w&&(xe=+w.pixelRatio,I(xe>0,"invalid pixel ratio"))):I.raise("invalid arguments to regl"),L&&(L.nodeName.toLowerCase()==="canvas"?ie=L:Y=L),!Z){if(!ie){I(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var ve=qc(Y||document.body,Te,xe);if(!ve)return null;ie=ve.canvas,Le=ve.onDestroy}Q.premultipliedAlpha===void 0&&(Q.premultipliedAlpha=!0),Z=Pu(ie,Q)}return Z?{gl:Z,canvas:ie,container:Y,extensions:he,optionalExtensions:ge,pixelRatio:xe,profile:de,onDone:Te,onDestroy:Le}:(Le(),Te("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ps(p,w){var L={};function Y(Q){I.type(Q,"string","extension name must be string");var he=Q.toLowerCase(),ge;try{ge=L[he]=p.getExtension(he)}catch(xe){}return!!ge}for(var ie=0;ie<w.extensions.length;++ie){var Z=w.extensions[ie];if(!Y(Z))return w.onDestroy(),w.onDone('"'+Z+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return w.optionalExtensions.forEach(Y),{extensions:L,restore:function(){Object.keys(L).forEach(function(Q){if(L[Q]&&!Y(Q))throw new Error("(regl): error restoring extension "+Q)})}}}function yr(p,w){for(var L=Array(p),Y=0;Y<p;++Y)L[Y]=w(Y);return L}var Wi=5120,Aa=5121,Ko=5122,Na=5123,Hi=5124,Fs=5125,zs=5126;function Fu(p){for(var w=16;w<=1<<28;w*=16)if(p<=w)return w;return 0}function Pt(p){var w,L;return w=(p>65535)<<4,p>>>=w,L=(p>255)<<3,p>>>=L,w|=L,L=(p>15)<<2,p>>>=L,w|=L,L=(p>3)<<1,p>>>=L,w|=L,w|p>>1}function po(){var p=yr(8,function(){return[]});function w(Z){var Q=Fu(Z),he=p[Pt(Q)>>2];return he.length>0?he.pop():new ArrayBuffer(Q)}function L(Z){p[Pt(Z.byteLength)>>2].push(Z)}function Y(Z,Q){var he=null;switch(Z){case Wi:he=new Int8Array(w(Q),0,Q);break;case Aa:he=new Uint8Array(w(Q),0,Q);break;case Ko:he=new Int16Array(w(2*Q),0,Q);break;case Na:he=new Uint16Array(w(2*Q),0,Q);break;case Hi:he=new Int32Array(w(4*Q),0,Q);break;case Fs:he=new Uint32Array(w(4*Q),0,Q);break;case zs:he=new Float32Array(w(4*Q),0,Q);break;default:return null}return he.length!==Q?he.subarray(0,Q):he}function ie(Z){L(Z.buffer)}return{alloc:w,free:L,allocType:Y,freeType:ie}}var $n=po();$n.zero=po();var Bs=3408,Us=3410,Qc=3411,as=3412,zu=3413,Bu=3414,Vs=3415,Uu=33901,Vu=33902,$u=3379,Xu=3386,Wu=34921,ss=36347,$s=36348,Xs=35661,Hu=35660,Er=34930,Zu=36349,A=34076,D=34024,we=7936,Ie=7937,Me=7938,Ze=35724,Ye=34047,Be=36063,tt=34852,Je=3553,kt=34067,Gt=34069,an=33984,fn=6408,zn=5126,ln=5121,An=36160,Ht=36053,Ft=36064,yn=16384,Sn=function(p,w){var L=1;w.ext_texture_filter_anisotropic&&(L=p.getParameter(Ye));var Y=1,ie=1;w.webgl_draw_buffers&&(Y=p.getParameter(tt),ie=p.getParameter(Be));var Z=!!w.oes_texture_float;if(Z){var Q=p.createTexture();p.bindTexture(Je,Q),p.texImage2D(Je,0,fn,1,1,0,fn,zn,null);var he=p.createFramebuffer();if(p.bindFramebuffer(An,he),p.framebufferTexture2D(An,Ft,Je,Q,0),p.bindTexture(Je,null),p.checkFramebufferStatus(An)!==Ht)Z=!1;else{p.viewport(0,0,1,1),p.clearColor(1,0,0,1),p.clear(yn);var ge=$n.allocType(zn,4);p.readPixels(0,0,1,1,fn,zn,ge),p.getError()?Z=!1:(p.deleteFramebuffer(he),p.deleteTexture(Q),Z=ge[0]===1),$n.freeType(ge)}}var xe=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),de=!0;if(!xe){var Te=p.createTexture(),Le=$n.allocType(ln,36);p.activeTexture(an),p.bindTexture(kt,Te),p.texImage2D(Gt,0,fn,3,3,0,fn,ln,Le),$n.freeType(Le),p.bindTexture(kt,null),p.deleteTexture(Te),de=!p.getError()}return{colorBits:[p.getParameter(Us),p.getParameter(Qc),p.getParameter(as),p.getParameter(zu)],depthBits:p.getParameter(Bu),stencilBits:p.getParameter(Vs),subpixelBits:p.getParameter(Bs),extensions:Object.keys(w).filter(function(ve){return!!w[ve]}),maxAnisotropic:L,maxDrawbuffers:Y,maxColorAttachments:ie,pointSizeDims:p.getParameter(Uu),lineWidthDims:p.getParameter(Vu),maxViewportDims:p.getParameter(Xu),maxCombinedTextureUnits:p.getParameter(Xs),maxCubeMapSize:p.getParameter(A),maxRenderbufferSize:p.getParameter(D),maxTextureUnits:p.getParameter(Er),maxTextureSize:p.getParameter($u),maxAttributes:p.getParameter(Wu),maxVertexUniforms:p.getParameter(ss),maxVertexTextureUnits:p.getParameter(Hu),maxVaryingVectors:p.getParameter($s),maxFragmentUniforms:p.getParameter(Zu),glsl:p.getParameter(Ze),renderer:p.getParameter(Ie),vendor:p.getParameter(we),version:p.getParameter(Me),readFloat:Z,npotTextureCube:de}};function dn(p){return!!p&&typeof p=="object"&&Array.isArray(p.shape)&&Array.isArray(p.stride)&&typeof p.offset=="number"&&p.shape.length===p.stride.length&&(Array.isArray(p.data)||At(p.data))}var sn=function(p){return Object.keys(p).map(function(w){return p[w]})},Xn={shape:$t,flatten:en};function Nn(p,w,L){for(var Y=0;Y<w;++Y)L[Y]=p[Y]}function Jt(p,w,L,Y){for(var ie=0,Z=0;Z<w;++Z)for(var Q=p[Z],he=0;he<L;++he)Y[ie++]=Q[he]}function hn(p,w,L,Y,ie,Z){for(var Q=Z,he=0;he<w;++he)for(var ge=p[he],xe=0;xe<L;++xe)for(var de=ge[xe],Te=0;Te<Y;++Te)ie[Q++]=de[Te]}function Nt(p,w,L,Y,ie){for(var Z=1,Q=L+1;Q<w.length;++Q)Z*=w[Q];var he=w[L];if(w.length-L===4){var ge=w[L+1],xe=w[L+2],de=w[L+3];for(Q=0;Q<he;++Q)hn(p[Q],ge,xe,de,Y,ie),ie+=Z}else for(Q=0;Q<he;++Q)Nt(p[Q],w,L+1,Y,ie),ie+=Z}function en(p,w,L,Y){var ie=1;if(w.length)for(var Z=0;Z<w.length;++Z)ie*=w[Z];else ie=0;var Q=Y||$n.allocType(L,ie);switch(w.length){case 0:break;case 1:Nn(p,w[0],Q);break;case 2:Jt(p,w[0],w[1],Q);break;case 3:hn(p,w[0],w[1],w[2],Q,0);break;default:Nt(p,w,0,Q,0)}return Q}function $t(p){for(var w=[],L=p;L.length;L=L[0])w.push(L.length);return w}var Zt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},br=5120,xr=5122,Ot=5124,Or=5121,mo=5123,_r=5125,Pr=5126,no=5126,Xt={int8:br,int16:xr,int32:Ot,uint8:Or,uint16:mo,uint32:_r,float:Pr,float32:no},rr=35048,vr=35040,wr={dynamic:rr,stream:vr,static:35044},pr=Xn.flatten,ro=Xn.shape,oo=35044,Go=35040,Io=5121,Ao=5126,Wr=[];Wr[5120]=1,Wr[5122]=2,Wr[5124]=4,Wr[5121]=1,Wr[5123]=2,Wr[5125]=4,Wr[5126]=4;function gn(p){return Zt[Object.prototype.toString.call(p)]|0}function Fr(p,w){for(var L=0;L<w.length;++L)p[L]=w[L]}function Zi(p,w,L,Y,ie,Z,Q){for(var he=0,ge=0;ge<L;++ge)for(var xe=0;xe<Y;++xe)p[he++]=w[ie*ge+Z*xe+Q]}function ju(p,w,L,Y){var ie=0,Z={};function Q(X){this.id=ie++,this.buffer=p.createBuffer(),this.type=X,this.usage=oo,this.byteLength=0,this.dimension=1,this.dtype=Io,this.persistentData=null,L.profile&&(this.stats={size:0})}Q.prototype.bind=function(){p.bindBuffer(this.type,this.buffer)},Q.prototype.destroy=function(){Le(this)};var he=[];function ge(X,J){var pe=he.pop();return pe||(pe=new Q(X)),pe.bind(),Te(pe,J,Go,0,1,!1),pe}function xe(X){he.push(X)}function de(X,J,pe){X.byteLength=J.byteLength,p.bufferData(X.type,J,pe)}function Te(X,J,pe,Oe,ue,Fe){var ce;if(X.usage=pe,Array.isArray(J)){if(X.dtype=Oe||Ao,J.length>0){var Ne;if(Array.isArray(J[0])){ce=ro(J);for(var le=1,De=1;De<ce.length;++De)le*=ce[De];X.dimension=le,Ne=pr(J,ce,X.dtype),de(X,Ne,pe),Fe?X.persistentData=Ne:$n.freeType(Ne)}else if(typeof J[0]=="number"){X.dimension=ue;var Qe=$n.allocType(X.dtype,J.length);Fr(Qe,J),de(X,Qe,pe),Fe?X.persistentData=Qe:$n.freeType(Qe)}else At(J[0])?(X.dimension=J[0].length,X.dtype=Oe||gn(J[0])||Ao,Ne=pr(J,[J.length,J[0].length],X.dtype),de(X,Ne,pe),Fe?X.persistentData=Ne:$n.freeType(Ne)):I.raise("invalid buffer data")}}else if(At(J))X.dtype=Oe||gn(J),X.dimension=ue,de(X,J,pe),Fe&&(X.persistentData=new Uint8Array(new Uint8Array(J.buffer)));else if(dn(J)){ce=J.shape;var lt=J.stride,Ce=J.offset,Se=0,se=0,st=0,gt=0;ce.length===1?(Se=ce[0],se=1,st=lt[0],gt=0):ce.length===2?(Se=ce[0],se=ce[1],st=lt[0],gt=lt[1]):I.raise("invalid shape"),X.dtype=Oe||gn(J.data)||Ao,X.dimension=se;var Xe=$n.allocType(X.dtype,Se*se);Zi(Xe,J.data,Se,se,st,gt,Ce),de(X,Xe,pe),Fe?X.persistentData=Xe:$n.freeType(Xe)}else J instanceof ArrayBuffer?(X.dtype=Io,X.dimension=ue,de(X,J,pe),Fe&&(X.persistentData=new Uint8Array(new Uint8Array(J)))):I.raise("invalid buffer data")}function Le(X){w.bufferCount--,Y(X);var J=X.buffer;I(J,"buffer must not be deleted already"),p.deleteBuffer(J),X.buffer=null,delete Z[X.id]}function ve(X,J,pe,Oe){w.bufferCount++;var ue=new Q(J);Z[ue.id]=ue;function Fe(le){var De=oo,Qe=null,lt=0,Ce=0,Se=1;return Array.isArray(le)||At(le)||dn(le)||le instanceof ArrayBuffer?Qe=le:typeof le=="number"?lt=le|0:le&&(I.type(le,"object","buffer arguments must be an object, a number or an array"),"data"in le&&(I(Qe===null||Array.isArray(Qe)||At(Qe)||dn(Qe),"invalid data for buffer"),Qe=le.data),"usage"in le&&(I.parameter(le.usage,wr,"invalid buffer usage"),De=wr[le.usage]),"type"in le&&(I.parameter(le.type,Xt,"invalid buffer type"),Ce=Xt[le.type]),"dimension"in le&&(I.type(le.dimension,"number","invalid dimension"),Se=le.dimension|0),"length"in le&&(I.nni(lt,"buffer length must be a nonnegative integer"),lt=le.length|0)),ue.bind(),Qe?Te(ue,Qe,De,Ce,Se,Oe):(lt&&p.bufferData(ue.type,lt,De),ue.dtype=Ce||Io,ue.usage=De,ue.dimension=Se,ue.byteLength=lt),L.profile&&(ue.stats.size=ue.byteLength*Wr[ue.dtype]),Fe}function ce(le,De){I(De+le.byteLength<=ue.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+le.byteLength+" starting from offset "+De+" to a buffer of size "+ue.byteLength),p.bufferSubData(ue.type,De,le)}function Ne(le,De){var Qe=(De||0)|0,lt;if(ue.bind(),At(le)||le instanceof ArrayBuffer)ce(le,Qe);else if(Array.isArray(le)){if(le.length>0)if(typeof le[0]=="number"){var Ce=$n.allocType(ue.dtype,le.length);Fr(Ce,le),ce(Ce,Qe),$n.freeType(Ce)}else if(Array.isArray(le[0])||At(le[0])){lt=ro(le);var Se=pr(le,lt,ue.dtype);ce(Se,Qe),$n.freeType(Se)}else I.raise("invalid buffer data")}else if(dn(le)){lt=le.shape;var se=le.stride,st=0,gt=0,Xe=0,Tt=0;lt.length===1?(st=lt[0],gt=1,Xe=se[0],Tt=0):lt.length===2?(st=lt[0],gt=lt[1],Xe=se[0],Tt=se[1]):I.raise("invalid shape");var ht=Array.isArray(le.data)?ue.dtype:gn(le.data),wt=$n.allocType(ht,st*gt);Zi(wt,le.data,st,gt,Xe,Tt,le.offset),ce(wt,Qe),$n.freeType(wt)}else I.raise("invalid data for buffer subdata");return Fe}return pe||Fe(X),Fe._reglType="buffer",Fe._buffer=ue,Fe.subdata=Ne,L.profile&&(Fe.stats=ue.stats),Fe.destroy=function(){Le(ue)},Fe}function Ae(){sn(Z).forEach(function(X){X.buffer=p.createBuffer(),p.bindBuffer(X.type,X.buffer),p.bufferData(X.type,X.persistentData||X.byteLength,X.usage)})}return L.profile&&(w.getTotalBufferSize=function(){var X=0;return Object.keys(Z).forEach(function(J){X+=Z[J].stats.size}),X}),{create:ve,createStream:ge,destroyStream:xe,clear:function(){sn(Z).forEach(Le),he.forEach(Le)},getBuffer:function(X){return X&&X._buffer instanceof Q?X._buffer:null},restore:Ae,_initBuffer:Te}}var Jc=0,Yu=0,Ra=1,Da=1,ji=4,us=4,qo={points:Jc,point:Yu,lines:Ra,line:Da,triangles:ji,triangle:us,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ws=0,go=1,Yi=4,Po=5120,Hr=5121,Ca=5122,Fo=5123,Ku=5124,Qo=5125,Ki=34963,qu=35040,Hs=35044;function Zs(p,w,L,Y){var ie={},Z=0,Q={uint8:Hr,uint16:Fo};w.oes_element_index_uint&&(Q.uint32=Qo);function he(Ae){this.id=Z++,ie[this.id]=this,this.buffer=Ae,this.primType=Yi,this.vertCount=0,this.type=0}he.prototype.bind=function(){this.buffer.bind()};var ge=[];function xe(Ae){var X=ge.pop();return X||(X=new he(L.create(null,Ki,!0,!1)._buffer)),Te(X,Ae,qu,-1,-1,0,0),X}function de(Ae){ge.push(Ae)}function Te(Ae,X,J,pe,Oe,ue,Fe){Ae.buffer.bind();var ce;if(X){var Ne=Fe;!Fe&&(!At(X)||dn(X)&&!At(X.data))&&(Ne=w.oes_element_index_uint?Qo:Fo),L._initBuffer(Ae.buffer,X,J,Ne,3)}else p.bufferData(Ki,ue,J),Ae.buffer.dtype=ce||Hr,Ae.buffer.usage=J,Ae.buffer.dimension=3,Ae.buffer.byteLength=ue;if(ce=Fe,!Fe){switch(Ae.buffer.dtype){case Hr:case Po:ce=Hr;break;case Fo:case Ca:ce=Fo;break;case Qo:case Ku:ce=Qo;break;default:I.raise("unsupported type for element array")}Ae.buffer.dtype=ce}Ae.type=ce,I(ce!==Qo||!!w.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var le=Oe;le<0&&(le=Ae.buffer.byteLength,ce===Fo?le>>=1:ce===Qo&&(le>>=2)),Ae.vertCount=le;var De=pe;if(pe<0){De=Yi;var Qe=Ae.buffer.dimension;Qe===1&&(De=Ws),Qe===2&&(De=go),Qe===3&&(De=Yi)}Ae.primType=De}function Le(Ae){Y.elementsCount--,I(Ae.buffer!==null,"must not double destroy elements"),delete ie[Ae.id],Ae.buffer.destroy(),Ae.buffer=null}function ve(Ae,X){var J=L.create(null,Ki,!0),pe=new he(J._buffer);Y.elementsCount++;function Oe(ue){if(!ue)J(),pe.primType=Yi,pe.vertCount=0,pe.type=Hr;else if(typeof ue=="number")J(ue),pe.primType=Yi,pe.vertCount=ue|0,pe.type=Hr;else{var Fe=null,ce=Hs,Ne=-1,le=-1,De=0,Qe=0;Array.isArray(ue)||At(ue)||dn(ue)?Fe=ue:(I.type(ue,"object","invalid arguments for elements"),"data"in ue&&(Fe=ue.data,I(Array.isArray(Fe)||At(Fe)||dn(Fe),"invalid data for element buffer")),"usage"in ue&&(I.parameter(ue.usage,wr,"invalid element buffer usage"),ce=wr[ue.usage]),"primitive"in ue&&(I.parameter(ue.primitive,qo,"invalid element buffer primitive"),Ne=qo[ue.primitive]),"count"in ue&&(I(typeof ue.count=="number"&&ue.count>=0,"invalid vertex count for elements"),le=ue.count|0),"type"in ue&&(I.parameter(ue.type,Q,"invalid buffer type"),Qe=Q[ue.type]),"length"in ue?De=ue.length|0:(De=le,Qe===Fo||Qe===Ca?De*=2:(Qe===Qo||Qe===Ku)&&(De*=4))),Te(pe,Fe,ce,Ne,le,De,Qe)}return Oe}return Oe(Ae),Oe._reglType="elements",Oe._elements=pe,Oe.subdata=function(ue,Fe){return J.subdata(ue,Fe),Oe},Oe.destroy=function(){Le(pe)},Oe}return{create:ve,createStream:xe,destroyStream:de,getElements:function(Ae){return typeof Ae=="function"&&Ae._elements instanceof he?Ae._elements:null},clear:function(){sn(ie).forEach(Le)}}}var js=new Float32Array(1),Ys=new Uint32Array(js.buffer),Qu=5123;function Ks(p){for(var w=$n.allocType(Qu,p.length),L=0;L<p.length;++L)if(isNaN(p[L]))w[L]=65535;else if(p[L]===1/0)w[L]=31744;else if(p[L]===-1/0)w[L]=64512;else{js[0]=p[L];var Y=Ys[0],ie=Y>>>31<<15,Z=(Y<<1>>>24)-127,Q=Y>>13&1023;if(Z<-24)w[L]=ie;else if(Z<-14){var he=-14-Z;w[L]=ie+(Q+1024>>he)}else Z>15?w[L]=ie+31744:w[L]=ie+(Z+15<<10)+Q}return w}function Cn(p){return Array.isArray(p)||At(p)}var La=function(p){return!(p&p-1)&&!!p},qs=34467,Sr=3553,Jo=34067,Oa=34069,zo=6408,Qs=6406,xi=6407,Hn=6409,No=6410,ei=32854,_i=32855,Ma=36194,cs=32819,fs=32820,ef=33635,Js=34042,Bo=6402,qi=34041,ls=35904,ka=35906,Uo=36193,ti=33776,wi=33777,Si=33778,Ti=33779,ds=35986,pn=35987,_t=34798,En=35840,Rn=35841,Zr=35842,Zn=35843,Ii=36196,mr=5121,Qi=5123,Ro=5125,Ji=5126,eu=10242,tu=10243,tf=10497,Ju=33071,Nl=33648,Rl=10240,nf=10241,ec=9728,Dl=9729,nu=9984,tc=9985,rf=9986,nc=9987,Cl=33170,ru=4352,Ll=4353,of=4354,Ol=34046,Ml=3317,kl=37440,af=37441,Gl=37443,sf=37444,hs=33984,Pl=[nu,rf,tc,nc],rc=[0,Hn,No,xi,zo],yo={};yo[Hn]=yo[Qs]=yo[Bo]=1,yo[qi]=yo[No]=2,yo[xi]=yo[ls]=3,yo[zo]=yo[ka]=4;function Ga(p){return"[object "+p+"]"}var oc=Ga("HTMLCanvasElement"),uf=Ga("OffscreenCanvas"),cf=Ga("CanvasRenderingContext2D"),Fl=Ga("ImageBitmap"),ic=Ga("HTMLImageElement"),ff=Ga("HTMLVideoElement"),lf=Object.keys(Zt).concat([oc,uf,cf,Fl,ic,ff]),Pa=[];Pa[mr]=1,Pa[Ji]=4,Pa[Uo]=2,Pa[Qi]=2,Pa[Ro]=4;var Rr=[];Rr[ei]=2,Rr[_i]=2,Rr[Ma]=2,Rr[qi]=4,Rr[ti]=.5,Rr[wi]=.5,Rr[Si]=1,Rr[Ti]=1,Rr[ds]=.5,Rr[pn]=1,Rr[_t]=1,Rr[En]=.5,Rr[Rn]=.25,Rr[Zr]=.5,Rr[Zn]=.25,Rr[Ii]=.5;function df(p){return Array.isArray(p)&&(p.length===0||typeof p[0]=="number")}function ac(p){if(!Array.isArray(p))return!1;var w=p.length;return!(w===0||!Cn(p[0]))}function Ai(p){return Object.prototype.toString.call(p)}function hf(p){return Ai(p)===oc}function ou(p){return Ai(p)===uf}function zl(p){return Ai(p)===cf}function sc(p){return Ai(p)===Fl}function vf(p){return Ai(p)===ic}function uc(p){return Ai(p)===ff}function pf(p){if(!p)return!1;var w=Ai(p);return lf.indexOf(w)>=0?!0:df(p)||ac(p)||dn(p)}function cc(p){return Zt[Object.prototype.toString.call(p)]|0}function Bl(p,w){var L=w.length;switch(p.type){case mr:case Qi:case Ro:case Ji:var Y=$n.allocType(p.type,L);Y.set(w),p.data=Y;break;case Uo:p.data=Ks(w);break;default:I.raise("unsupported texture type, must specify a typed array")}}function Ul(p,w){return $n.allocType(p.type===Uo?Ji:p.type,w)}function fc(p,w){p.type===Uo?(p.data=Ks(w),$n.freeType(w)):p.data=w}function Vl(p,w,L,Y,ie,Z){for(var Q=p.width,he=p.height,ge=p.channels,xe=Q*he*ge,de=Ul(p,xe),Te=0,Le=0;Le<he;++Le)for(var ve=0;ve<Q;++ve)for(var Ae=0;Ae<ge;++Ae)de[Te++]=w[L*ve+Y*Le+ie*Ae+Z];fc(p,de)}function iu(p,w,L,Y,ie,Z){var Q;if(typeof Rr[p]!="undefined"?Q=Rr[p]:Q=yo[p]*Pa[w],Z&&(Q*=6),ie){for(var he=0,ge=L;ge>=1;)he+=Q*ge*ge,ge/=2;return he}else return Q*L*Y}function $l(p,w,L,Y,ie,Z,Q){var he={"don't care":ru,"dont care":ru,nice:of,fast:Ll},ge={repeat:tf,clamp:Ju,mirror:Nl},xe={nearest:ec,linear:Dl},de=ne({mipmap:nc,"nearest mipmap nearest":nu,"linear mipmap nearest":tc,"nearest mipmap linear":rf,"linear mipmap linear":nc},xe),Te={none:0,browser:sf},Le={uint8:mr,rgba4:cs,rgb565:ef,"rgb5 a1":fs},ve={alpha:Qs,luminance:Hn,"luminance alpha":No,rgb:xi,rgba:zo,rgba4:ei,"rgb5 a1":_i,rgb565:Ma},Ae={};w.ext_srgb&&(ve.srgb=ls,ve.srgba=ka),w.oes_texture_float&&(Le.float32=Le.float=Ji),w.oes_texture_half_float&&(Le.float16=Le["half float"]=Uo),w.webgl_depth_texture&&(ne(ve,{depth:Bo,"depth stencil":qi}),ne(Le,{uint16:Qi,uint32:Ro,"depth stencil":Js})),w.webgl_compressed_texture_s3tc&&ne(Ae,{"rgb s3tc dxt1":ti,"rgba s3tc dxt1":wi,"rgba s3tc dxt3":Si,"rgba s3tc dxt5":Ti}),w.webgl_compressed_texture_atc&&ne(Ae,{"rgb atc":ds,"rgba atc explicit alpha":pn,"rgba atc interpolated alpha":_t}),w.webgl_compressed_texture_pvrtc&&ne(Ae,{"rgb pvrtc 4bppv1":En,"rgb pvrtc 2bppv1":Rn,"rgba pvrtc 4bppv1":Zr,"rgba pvrtc 2bppv1":Zn}),w.webgl_compressed_texture_etc1&&(Ae["rgb etc1"]=Ii);var X=Array.prototype.slice.call(p.getParameter(qs));Object.keys(Ae).forEach(function(C){var K=Ae[C];X.indexOf(K)>=0&&(ve[C]=K)});var J=Object.keys(ve);L.textureFormats=J;var pe=[];Object.keys(ve).forEach(function(C){var K=ve[C];pe[K]=C});var Oe=[];Object.keys(Le).forEach(function(C){var K=Le[C];Oe[K]=C});var ue=[];Object.keys(xe).forEach(function(C){var K=xe[C];ue[K]=C});var Fe=[];Object.keys(de).forEach(function(C){var K=de[C];Fe[K]=C});var ce=[];Object.keys(ge).forEach(function(C){var K=ge[C];ce[K]=C});var Ne=J.reduce(function(C,K){var H=ve[K];return H===Hn||H===Qs||H===Hn||H===No||H===Bo||H===qi||w.ext_srgb&&(H===ls||H===ka)?C[H]=H:H===_i||K.indexOf("rgba")>=0?C[H]=zo:C[H]=xi,C},{});function le(){this.internalformat=zo,this.format=zo,this.type=mr,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=sf,this.width=0,this.height=0,this.channels=0}function De(C,K){C.internalformat=K.internalformat,C.format=K.format,C.type=K.type,C.compressed=K.compressed,C.premultiplyAlpha=K.premultiplyAlpha,C.flipY=K.flipY,C.unpackAlignment=K.unpackAlignment,C.colorSpace=K.colorSpace,C.width=K.width,C.height=K.height,C.channels=K.channels}function Qe(C,K){if(!(typeof K!="object"||!K)){if("premultiplyAlpha"in K&&(I.type(K.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),C.premultiplyAlpha=K.premultiplyAlpha),"flipY"in K&&(I.type(K.flipY,"boolean","invalid texture flip"),C.flipY=K.flipY),"alignment"in K&&(I.oneOf(K.alignment,[1,2,4,8],"invalid texture unpack alignment"),C.unpackAlignment=K.alignment),"colorSpace"in K&&(I.parameter(K.colorSpace,Te,"invalid colorSpace"),C.colorSpace=Te[K.colorSpace]),"type"in K){var H=K.type;I(w.oes_texture_float||!(H==="float"||H==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),I(w.oes_texture_half_float||!(H==="half float"||H==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),I(w.webgl_depth_texture||!(H==="uint16"||H==="uint32"||H==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),I.parameter(H,Le,"invalid texture type"),C.type=Le[H]}var ze=C.width,It=C.height,N=C.channels,x=!1;"shape"in K?(I(Array.isArray(K.shape)&&K.shape.length>=2,"shape must be an array"),ze=K.shape[0],It=K.shape[1],K.shape.length===3&&(N=K.shape[2],I(N>0&&N<=4,"invalid number of channels"),x=!0),I(ze>=0&&ze<=L.maxTextureSize,"invalid width"),I(It>=0&&It<=L.maxTextureSize,"invalid height")):("radius"in K&&(ze=It=K.radius,I(ze>=0&&ze<=L.maxTextureSize,"invalid radius")),"width"in K&&(ze=K.width,I(ze>=0&&ze<=L.maxTextureSize,"invalid width")),"height"in K&&(It=K.height,I(It>=0&&It<=L.maxTextureSize,"invalid height")),"channels"in K&&(N=K.channels,I(N>0&&N<=4,"invalid number of channels"),x=!0)),C.width=ze|0,C.height=It|0,C.channels=N|0;var M=!1;if("format"in K){var U=K.format;I(w.webgl_depth_texture||!(U==="depth"||U==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),I.parameter(U,ve,"invalid texture format");var $=C.internalformat=ve[U];C.format=Ne[$],U in Le&&("type"in K||(C.type=Le[U])),U in Ae&&(C.compressed=!0),M=!0}!x&&M?C.channels=yo[C.format]:x&&!M?C.channels!==rc[C.format]&&(C.format=C.internalformat=rc[C.channels]):M&&x&&I(C.channels===yo[C.format],"number of channels inconsistent with specified format")}}function lt(C){p.pixelStorei(kl,C.flipY),p.pixelStorei(af,C.premultiplyAlpha),p.pixelStorei(Gl,C.colorSpace),p.pixelStorei(Ml,C.unpackAlignment)}function Ce(){le.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Se(C,K){var H=null;if(pf(K)?H=K:K&&(I.type(K,"object","invalid pixel data type"),Qe(C,K),"x"in K&&(C.xOffset=K.x|0),"y"in K&&(C.yOffset=K.y|0),pf(K.data)&&(H=K.data)),I(!C.compressed||H instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),K.copy){I(!H,"can not specify copy and data field for the same texture");var ze=ie.viewportWidth,It=ie.viewportHeight;C.width=C.width||ze-C.xOffset,C.height=C.height||It-C.yOffset,C.needsCopy=!0,I(C.xOffset>=0&&C.xOffset<ze&&C.yOffset>=0&&C.yOffset<It&&C.width>0&&C.width<=ze&&C.height>0&&C.height<=It,"copy texture read out of bounds")}else if(!H)C.width=C.width||1,C.height=C.height||1,C.channels=C.channels||4;else if(At(H))C.channels=C.channels||4,C.data=H,!("type"in K)&&C.type===mr&&(C.type=cc(H));else if(df(H))C.channels=C.channels||4,Bl(C,H),C.alignment=1,C.needsFree=!0;else if(dn(H)){var N=H.data;!Array.isArray(N)&&C.type===mr&&(C.type=cc(N));var x=H.shape,M=H.stride,U,$,F,k,z,R;x.length===3?(F=x[2],R=M[2]):(I(x.length===2,"invalid ndarray pixel data, must be 2 or 3D"),F=1,R=1),U=x[0],$=x[1],k=M[0],z=M[1],C.alignment=1,C.width=U,C.height=$,C.channels=F,C.format=C.internalformat=rc[F],C.needsFree=!0,Vl(C,N,k,z,R,H.offset)}else if(hf(H)||ou(H)||zl(H))hf(H)||ou(H)?C.element=H:C.element=H.canvas,C.width=C.element.width,C.height=C.element.height,C.channels=4;else if(sc(H))C.element=H,C.width=H.width,C.height=H.height,C.channels=4;else if(vf(H))C.element=H,C.width=H.naturalWidth,C.height=H.naturalHeight,C.channels=4;else if(uc(H))C.element=H,C.width=H.videoWidth,C.height=H.videoHeight,C.channels=4;else if(ac(H)){var O=C.width||H[0].length,T=C.height||H.length,B=C.channels;Cn(H[0][0])?B=B||H[0][0].length:B=B||1;for(var W=Xn.shape(H),oe=1,ae=0;ae<W.length;++ae)oe*=W[ae];var te=Ul(C,oe);Xn.flatten(H,W,"",te),fc(C,te),C.alignment=1,C.width=O,C.height=T,C.channels=B,C.format=C.internalformat=rc[B],C.needsFree=!0}C.type===Ji?I(L.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):C.type===Uo&&I(L.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function se(C,K,H){var ze=C.element,It=C.data,N=C.internalformat,x=C.format,M=C.type,U=C.width,$=C.height;lt(C),ze?p.texImage2D(K,H,x,x,M,ze):C.compressed?p.compressedTexImage2D(K,H,N,U,$,0,It):C.needsCopy?(Y(),p.copyTexImage2D(K,H,x,C.xOffset,C.yOffset,U,$,0)):p.texImage2D(K,H,x,U,$,0,x,M,It||null)}function st(C,K,H,ze,It){var N=C.element,x=C.data,M=C.internalformat,U=C.format,$=C.type,F=C.width,k=C.height;lt(C),N?p.texSubImage2D(K,It,H,ze,U,$,N):C.compressed?p.compressedTexSubImage2D(K,It,H,ze,M,F,k,x):C.needsCopy?(Y(),p.copyTexSubImage2D(K,It,H,ze,C.xOffset,C.yOffset,F,k)):p.texSubImage2D(K,It,H,ze,F,k,U,$,x)}var gt=[];function Xe(){return gt.pop()||new Ce}function Tt(C){C.needsFree&&$n.freeType(C.data),Ce.call(C),gt.push(C)}function ht(){le.call(this),this.genMipmaps=!1,this.mipmapHint=ru,this.mipmask=0,this.images=Array(16)}function wt(C,K,H){var ze=C.images[0]=Xe();C.mipmask=1,ze.width=C.width=K,ze.height=C.height=H,ze.channels=C.channels=4}function jt(C,K){var H=null;if(pf(K))H=C.images[0]=Xe(),De(H,C),Se(H,K),C.mipmask=1;else if(Qe(C,K),Array.isArray(K.mipmap))for(var ze=K.mipmap,It=0;It<ze.length;++It)H=C.images[It]=Xe(),De(H,C),H.width>>=It,H.height>>=It,Se(H,ze[It]),C.mipmask|=1<<It;else H=C.images[0]=Xe(),De(H,C),Se(H,K),C.mipmask=1;De(C,C.images[0]),C.compressed&&(C.internalformat===ti||C.internalformat===wi||C.internalformat===Si||C.internalformat===Ti)&&I(C.width%4===0&&C.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function or(C,K){for(var H=C.images,ze=0;ze<H.length;++ze){if(!H[ze])return;se(H[ze],K,ze)}}var sr=[];function Lt(){var C=sr.pop()||new ht;le.call(C),C.mipmask=0;for(var K=0;K<16;++K)C.images[K]=null;return C}function Rt(C){for(var K=C.images,H=0;H<K.length;++H)K[H]&&Tt(K[H]),K[H]=null;sr.push(C)}function bn(){this.minFilter=ec,this.magFilter=ec,this.wrapS=Ju,this.wrapT=Ju,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ru}function ir(C,K){if("min"in K){var H=K.min;I.parameter(H,de),C.minFilter=de[H],Pl.indexOf(C.minFilter)>=0&&!("faces"in K)&&(C.genMipmaps=!0)}if("mag"in K){var ze=K.mag;I.parameter(ze,xe),C.magFilter=xe[ze]}var It=C.wrapS,N=C.wrapT;if("wrap"in K){var x=K.wrap;typeof x=="string"?(I.parameter(x,ge),It=N=ge[x]):Array.isArray(x)&&(I.parameter(x[0],ge),I.parameter(x[1],ge),It=ge[x[0]],N=ge[x[1]])}else{if("wrapS"in K){var M=K.wrapS;I.parameter(M,ge),It=ge[M]}if("wrapT"in K){var U=K.wrapT;I.parameter(U,ge),N=ge[U]}}if(C.wrapS=It,C.wrapT=N,"anisotropic"in K){var $=K.anisotropic;I(typeof $=="number"&&$>=1&&$<=L.maxAnisotropic,"aniso samples must be between 1 and "),C.anisotropic=K.anisotropic}if("mipmap"in K){var F=!1;switch(typeof K.mipmap){case"string":I.parameter(K.mipmap,he,"invalid mipmap hint"),C.mipmapHint=he[K.mipmap],C.genMipmaps=!0,F=!0;break;case"boolean":F=C.genMipmaps=K.mipmap;break;case"object":I(Array.isArray(K.mipmap),"invalid mipmap type"),C.genMipmaps=!1,F=!0;break;default:I.raise("invalid mipmap type")}F&&!("min"in K)&&(C.minFilter=nu)}}function Yn(C,K){p.texParameteri(K,nf,C.minFilter),p.texParameteri(K,Rl,C.magFilter),p.texParameteri(K,eu,C.wrapS),p.texParameteri(K,tu,C.wrapT),w.ext_texture_filter_anisotropic&&p.texParameteri(K,Ol,C.anisotropic),C.genMipmaps&&(p.hint(Cl,C.mipmapHint),p.generateMipmap(K))}var Kn=0,ur={},cr=L.maxTextureUnits,xn=Array(cr).map(function(){return null});function yt(C){le.call(this),this.mipmask=0,this.internalformat=zo,this.id=Kn++,this.refCount=1,this.target=C,this.texture=p.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new bn,Q.profile&&(this.stats={size:0})}function Tr(C){p.activeTexture(hs),p.bindTexture(C.target,C.texture)}function Kt(){var C=xn[0];C?p.bindTexture(C.target,C.texture):p.bindTexture(Sr,null)}function nt(C){var K=C.texture;I(K,"must not double destroy texture");var H=C.unit,ze=C.target;H>=0&&(p.activeTexture(hs+H),p.bindTexture(ze,null),xn[H]=null),p.deleteTexture(K),C.texture=null,C.params=null,C.pixels=null,C.refCount=0,delete ur[C.id],Z.textureCount--}ne(yt.prototype,{bind:function(){var C=this;C.bindCount+=1;var K=C.unit;if(K<0){for(var H=0;H<cr;++H){var ze=xn[H];if(ze){if(ze.bindCount>0)continue;ze.unit=-1}xn[H]=C,K=H;break}K>=cr&&I.raise("insufficient number of texture units"),Q.profile&&Z.maxTextureUnits<K+1&&(Z.maxTextureUnits=K+1),C.unit=K,p.activeTexture(hs+K),p.bindTexture(C.target,C.texture)}return K},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&nt(this)}});function Dt(C,K){var H=new yt(Sr);ur[H.id]=H,Z.textureCount++;function ze(x,M){var U=H.texInfo;bn.call(U);var $=Lt();return typeof x=="number"?typeof M=="number"?wt($,x|0,M|0):wt($,x|0,x|0):x?(I.type(x,"object","invalid arguments to regl.texture"),ir(U,x),jt($,x)):wt($,1,1),U.genMipmaps&&($.mipmask=($.width<<1)-1),H.mipmask=$.mipmask,De(H,$),I.texture2D(U,$,L),H.internalformat=$.internalformat,ze.width=$.width,ze.height=$.height,Tr(H),or($,Sr),Yn(U,Sr),Kt(),Rt($),Q.profile&&(H.stats.size=iu(H.internalformat,H.type,$.width,$.height,U.genMipmaps,!1)),ze.format=pe[H.internalformat],ze.type=Oe[H.type],ze.mag=ue[U.magFilter],ze.min=Fe[U.minFilter],ze.wrapS=ce[U.wrapS],ze.wrapT=ce[U.wrapT],ze}function It(x,M,U,$){I(!!x,"must specify image data");var F=M|0,k=U|0,z=$|0,R=Xe();return De(R,H),R.width=0,R.height=0,Se(R,x),R.width=R.width||(H.width>>z)-F,R.height=R.height||(H.height>>z)-k,I(H.type===R.type&&H.format===R.format&&H.internalformat===R.internalformat,"incompatible format for texture.subimage"),I(F>=0&&k>=0&&F+R.width<=H.width&&k+R.height<=H.height,"texture.subimage write out of bounds"),I(H.mipmask&1<<z,"missing mipmap data"),I(R.data||R.element||R.needsCopy,"missing image data"),Tr(H),st(R,Sr,F,k,z),Kt(),Tt(R),ze}function N(x,M){var U=x|0,$=M|0||U;if(U===H.width&&$===H.height)return ze;ze.width=H.width=U,ze.height=H.height=$,Tr(H);for(var F=0;H.mipmask>>F;++F){var k=U>>F,z=$>>F;if(!k||!z)break;p.texImage2D(Sr,F,H.format,k,z,0,H.format,H.type,null)}return Kt(),Q.profile&&(H.stats.size=iu(H.internalformat,H.type,U,$,!1,!1)),ze}return ze(C,K),ze.subimage=It,ze.resize=N,ze._reglType="texture2d",ze._texture=H,Q.profile&&(ze.stats=H.stats),ze.destroy=function(){H.decRef()},ze}function zt(C,K,H,ze,It,N){var x=new yt(Jo);ur[x.id]=x,Z.cubeCount++;var M=new Array(6);function U(k,z,R,O,T,B){var W,oe=x.texInfo;for(bn.call(oe),W=0;W<6;++W)M[W]=Lt();if(typeof k=="number"||!k){var ae=k|0||1;for(W=0;W<6;++W)wt(M[W],ae,ae)}else if(typeof k=="object")if(z)jt(M[0],k),jt(M[1],z),jt(M[2],R),jt(M[3],O),jt(M[4],T),jt(M[5],B);else if(ir(oe,k),Qe(x,k),"faces"in k){var te=k.faces;for(I(Array.isArray(te)&&te.length===6,"cube faces must be a length 6 array"),W=0;W<6;++W)I(typeof te[W]=="object"&&!!te[W],"invalid input for cube map face"),De(M[W],x),jt(M[W],te[W])}else for(W=0;W<6;++W)jt(M[W],k);else I.raise("invalid arguments to cube map");for(De(x,M[0]),L.npotTextureCube||I(La(x.width)&&La(x.height),"your browser does not support non power or two texture dimensions"),oe.genMipmaps?x.mipmask=(M[0].width<<1)-1:x.mipmask=M[0].mipmask,I.textureCube(x,oe,M,L),x.internalformat=M[0].internalformat,U.width=M[0].width,U.height=M[0].height,Tr(x),W=0;W<6;++W)or(M[W],Oa+W);for(Yn(oe,Jo),Kt(),Q.profile&&(x.stats.size=iu(x.internalformat,x.type,U.width,U.height,oe.genMipmaps,!0)),U.format=pe[x.internalformat],U.type=Oe[x.type],U.mag=ue[oe.magFilter],U.min=Fe[oe.minFilter],U.wrapS=ce[oe.wrapS],U.wrapT=ce[oe.wrapT],W=0;W<6;++W)Rt(M[W]);return U}function $(k,z,R,O,T){I(!!z,"must specify image data"),I(typeof k=="number"&&k===(k|0)&&k>=0&&k<6,"invalid face");var B=R|0,W=O|0,oe=T|0,ae=Xe();return De(ae,x),ae.width=0,ae.height=0,Se(ae,z),ae.width=ae.width||(x.width>>oe)-B,ae.height=ae.height||(x.height>>oe)-W,I(x.type===ae.type&&x.format===ae.format&&x.internalformat===ae.internalformat,"incompatible format for texture.subimage"),I(B>=0&&W>=0&&B+ae.width<=x.width&&W+ae.height<=x.height,"texture.subimage write out of bounds"),I(x.mipmask&1<<oe,"missing mipmap data"),I(ae.data||ae.element||ae.needsCopy,"missing image data"),Tr(x),st(ae,Oa+k,B,W,oe),Kt(),Tt(ae),U}function F(k){var z=k|0;if(z!==x.width){U.width=x.width=z,U.height=x.height=z,Tr(x);for(var R=0;R<6;++R)for(var O=0;x.mipmask>>O;++O)p.texImage2D(Oa+R,O,x.format,z>>O,z>>O,0,x.format,x.type,null);return Kt(),Q.profile&&(x.stats.size=iu(x.internalformat,x.type,U.width,U.height,!1,!0)),U}}return U(C,K,H,ze,It,N),U.subimage=$,U.resize=F,U._reglType="textureCube",U._texture=x,Q.profile&&(U.stats=x.stats),U.destroy=function(){x.decRef()},U}function On(){for(var C=0;C<cr;++C)p.activeTexture(hs+C),p.bindTexture(Sr,null),xn[C]=null;sn(ur).forEach(nt),Z.cubeCount=0,Z.textureCount=0}Q.profile&&(Z.getTotalTextureSize=function(){var C=0;return Object.keys(ur).forEach(function(K){C+=ur[K].stats.size}),C});function Mo(){for(var C=0;C<cr;++C){var K=xn[C];K&&(K.bindCount=0,K.unit=-1,xn[C]=null)}sn(ur).forEach(function(H){H.texture=p.createTexture(),p.bindTexture(H.target,H.texture);for(var ze=0;ze<32;++ze)if(H.mipmask&1<<ze)if(H.target===Sr)p.texImage2D(Sr,ze,H.internalformat,H.width>>ze,H.height>>ze,0,H.internalformat,H.type,null);else for(var It=0;It<6;++It)p.texImage2D(Oa+It,ze,H.internalformat,H.width>>ze,H.height>>ze,0,H.internalformat,H.type,null);Yn(H.texInfo,H.target)})}function ya(){for(var C=0;C<cr;++C){var K=xn[C];K&&(K.bindCount=0,K.unit=-1,xn[C]=null),p.activeTexture(hs+C),p.bindTexture(Sr,null),p.bindTexture(Jo,null)}}return{create2D:Dt,createCube:zt,clear:On,getTexture:function(C){return null},restore:Mo,refresh:ya}}var ea=36161,au=32854,Xl=32855,mf=36194,gf=33189,yf=36168,Ef=34041,bf=35907,xf=34836,lc=34842,_f=34843,Do=[];Do[au]=2,Do[Xl]=2,Do[mf]=2,Do[gf]=2,Do[yf]=1,Do[Ef]=4,Do[bf]=4,Do[xf]=16,Do[lc]=8,Do[_f]=6;function dc(p,w,L){return Do[p]*w*L}var Wl=function(p,w,L,Y,ie){var Z={rgba4:au,rgb565:mf,"rgb5 a1":Xl,depth:gf,stencil:yf,"depth stencil":Ef};w.ext_srgb&&(Z.srgba=bf),w.ext_color_buffer_half_float&&(Z.rgba16f=lc,Z.rgb16f=_f),w.webgl_color_buffer_float&&(Z.rgba32f=xf);var Q=[];Object.keys(Z).forEach(function(ve){var Ae=Z[ve];Q[Ae]=ve});var he=0,ge={};function xe(ve){this.id=he++,this.refCount=1,this.renderbuffer=ve,this.format=au,this.width=0,this.height=0,ie.profile&&(this.stats={size:0})}xe.prototype.decRef=function(){--this.refCount<=0&&de(this)};function de(ve){var Ae=ve.renderbuffer;I(Ae,"must not double destroy renderbuffer"),p.bindRenderbuffer(ea,null),p.deleteRenderbuffer(Ae),ve.renderbuffer=null,ve.refCount=0,delete ge[ve.id],Y.renderbufferCount--}function Te(ve,Ae){var X=new xe(p.createRenderbuffer());ge[X.id]=X,Y.renderbufferCount++;function J(Oe,ue){var Fe=0,ce=0,Ne=au;if(typeof Oe=="object"&&Oe){var le=Oe;if("shape"in le){var De=le.shape;I(Array.isArray(De)&&De.length>=2,"invalid renderbuffer shape"),Fe=De[0]|0,ce=De[1]|0}else"radius"in le&&(Fe=ce=le.radius|0),"width"in le&&(Fe=le.width|0),"height"in le&&(ce=le.height|0);"format"in le&&(I.parameter(le.format,Z,"invalid renderbuffer format"),Ne=Z[le.format])}else typeof Oe=="number"?(Fe=Oe|0,typeof ue=="number"?ce=ue|0:ce=Fe):Oe?I.raise("invalid arguments to renderbuffer constructor"):Fe=ce=1;if(I(Fe>0&&ce>0&&Fe<=L.maxRenderbufferSize&&ce<=L.maxRenderbufferSize,"invalid renderbuffer size"),!(Fe===X.width&&ce===X.height&&Ne===X.format))return J.width=X.width=Fe,J.height=X.height=ce,X.format=Ne,p.bindRenderbuffer(ea,X.renderbuffer),p.renderbufferStorage(ea,Ne,Fe,ce),I(p.getError()===0,"invalid render buffer format"),ie.profile&&(X.stats.size=dc(X.format,X.width,X.height)),J.format=Q[X.format],J}function pe(Oe,ue){var Fe=Oe|0,ce=ue|0||Fe;return Fe===X.width&&ce===X.height||(I(Fe>0&&ce>0&&Fe<=L.maxRenderbufferSize&&ce<=L.maxRenderbufferSize,"invalid renderbuffer size"),J.width=X.width=Fe,J.height=X.height=ce,p.bindRenderbuffer(ea,X.renderbuffer),p.renderbufferStorage(ea,X.format,Fe,ce),I(p.getError()===0,"invalid render buffer format"),ie.profile&&(X.stats.size=dc(X.format,X.width,X.height))),J}return J(ve,Ae),J.resize=pe,J._reglType="renderbuffer",J._renderbuffer=X,ie.profile&&(J.stats=X.stats),J.destroy=function(){X.decRef()},J}ie.profile&&(Y.getTotalRenderbufferSize=function(){var ve=0;return Object.keys(ge).forEach(function(Ae){ve+=ge[Ae].stats.size}),ve});function Le(){sn(ge).forEach(function(ve){ve.renderbuffer=p.createRenderbuffer(),p.bindRenderbuffer(ea,ve.renderbuffer),p.renderbufferStorage(ea,ve.format,ve.width,ve.height)}),p.bindRenderbuffer(ea,null)}return{create:Te,clear:function(){sn(ge).forEach(de)},restore:Le}},ni=36160,hc=36161,ta=3553,vs=34069,vc=36064,su=36096,wf=36128,Sf=33306,pc=36053,Hl=36054,Tf=36055,If=36057,Zl=36061,Af=36193,jl=5121,Nf=5126,mc=6407,Rf=6408,Df=6402,Cf=[mc,Rf],uu=[];uu[Rf]=4,uu[mc]=3;var gc=[];gc[jl]=1,gc[Nf]=4,gc[Af]=2;var Yl=32854,Kl=32855,ql=36194,Ql=33189,vh=36168,Lf=34041,ph=35907,Jl=34836,ed=34842,td=34843,nd=[Yl,Kl,ql,ph,ed,td,Jl],Fa={};Fa[pc]="complete",Fa[Hl]="incomplete attachment",Fa[If]="incomplete dimensions",Fa[Tf]="incomplete, missing attachment",Fa[Zl]="unsupported";function rd(p,w,L,Y,ie,Z){var Q={cur:null,next:null,dirty:!1,setFBO:null},he=["rgba"],ge=["rgba4","rgb565","rgb5 a1"];w.ext_srgb&&ge.push("srgba"),w.ext_color_buffer_half_float&&ge.push("rgba16f","rgb16f"),w.webgl_color_buffer_float&&ge.push("rgba32f");var xe=["uint8"];w.oes_texture_half_float&&xe.push("half float","float16"),w.oes_texture_float&&xe.push("float","float32");function de(Ce,Se,se){this.target=Ce,this.texture=Se,this.renderbuffer=se;var st=0,gt=0;Se?(st=Se.width,gt=Se.height):se&&(st=se.width,gt=se.height),this.width=st,this.height=gt}function Te(Ce){Ce&&(Ce.texture&&Ce.texture._texture.decRef(),Ce.renderbuffer&&Ce.renderbuffer._renderbuffer.decRef())}function Le(Ce,Se,se){if(Ce)if(Ce.texture){var st=Ce.texture._texture,gt=Math.max(1,st.width),Xe=Math.max(1,st.height);I(gt===Se&&Xe===se,"inconsistent width/height for supplied texture"),st.refCount+=1}else{var Tt=Ce.renderbuffer._renderbuffer;I(Tt.width===Se&&Tt.height===se,"inconsistent width/height for renderbuffer"),Tt.refCount+=1}}function ve(Ce,Se){Se&&(Se.texture?p.framebufferTexture2D(ni,Ce,Se.target,Se.texture._texture.texture,0):p.framebufferRenderbuffer(ni,Ce,hc,Se.renderbuffer._renderbuffer.renderbuffer))}function Ae(Ce){var Se=ta,se=null,st=null,gt=Ce;typeof Ce=="object"&&(gt=Ce.data,"target"in Ce&&(Se=Ce.target|0)),I.type(gt,"function","invalid attachment data");var Xe=gt._reglType;return Xe==="texture2d"?(se=gt,I(Se===ta)):Xe==="textureCube"?(se=gt,I(Se>=vs&&Se<vs+6,"invalid cube map target")):Xe==="renderbuffer"?(st=gt,Se=hc):I.raise("invalid regl object for attachment"),new de(Se,se,st)}function X(Ce,Se,se,st,gt){if(se){var Xe=Y.create2D({width:Ce,height:Se,format:st,type:gt});return Xe._texture.refCount=0,new de(ta,Xe,null)}else{var Tt=ie.create({width:Ce,height:Se,format:st});return Tt._renderbuffer.refCount=0,new de(hc,null,Tt)}}function J(Ce){return Ce&&(Ce.texture||Ce.renderbuffer)}function pe(Ce,Se,se){Ce&&(Ce.texture?Ce.texture.resize(Se,se):Ce.renderbuffer&&Ce.renderbuffer.resize(Se,se),Ce.width=Se,Ce.height=se)}var Oe=0,ue={};function Fe(){this.id=Oe++,ue[this.id]=this,this.framebuffer=p.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ce(Ce){Ce.colorAttachments.forEach(Te),Te(Ce.depthAttachment),Te(Ce.stencilAttachment),Te(Ce.depthStencilAttachment)}function Ne(Ce){var Se=Ce.framebuffer;I(Se,"must not double destroy framebuffer"),p.deleteFramebuffer(Se),Ce.framebuffer=null,Z.framebufferCount--,delete ue[Ce.id]}function le(Ce){var Se;p.bindFramebuffer(ni,Ce.framebuffer);var se=Ce.colorAttachments;for(Se=0;Se<se.length;++Se)ve(vc+Se,se[Se]);for(Se=se.length;Se<L.maxColorAttachments;++Se)p.framebufferTexture2D(ni,vc+Se,ta,null,0);p.framebufferTexture2D(ni,Sf,ta,null,0),p.framebufferTexture2D(ni,su,ta,null,0),p.framebufferTexture2D(ni,wf,ta,null,0),ve(su,Ce.depthAttachment),ve(wf,Ce.stencilAttachment),ve(Sf,Ce.depthStencilAttachment);var st=p.checkFramebufferStatus(ni);!p.isContextLost()&&st!==pc&&I.raise("framebuffer configuration not supported, status = "+Fa[st]),p.bindFramebuffer(ni,Q.next?Q.next.framebuffer:null),Q.cur=Q.next,p.getError()}function De(Ce,Se){var se=new Fe;Z.framebufferCount++;function st(Xe,Tt){var ht;I(Q.next!==se,"can not update framebuffer which is currently in use");var wt=0,jt=0,or=!0,sr=!0,Lt=null,Rt=!0,bn="rgba",ir="uint8",Yn=1,Kn=null,ur=null,cr=null,xn=!1;if(typeof Xe=="number")wt=Xe|0,jt=Tt|0||wt;else if(!Xe)wt=jt=1;else{I.type(Xe,"object","invalid arguments for framebuffer");var yt=Xe;if("shape"in yt){var Tr=yt.shape;I(Array.isArray(Tr)&&Tr.length>=2,"invalid shape for framebuffer"),wt=Tr[0],jt=Tr[1]}else"radius"in yt&&(wt=jt=yt.radius),"width"in yt&&(wt=yt.width),"height"in yt&&(jt=yt.height);("color"in yt||"colors"in yt)&&(Lt=yt.color||yt.colors,Array.isArray(Lt)&&I(Lt.length===1||w.webgl_draw_buffers,"multiple render targets not supported")),Lt||("colorCount"in yt&&(Yn=yt.colorCount|0,I(Yn>0,"invalid color buffer count")),"colorTexture"in yt&&(Rt=!!yt.colorTexture,bn="rgba4"),"colorType"in yt&&(ir=yt.colorType,Rt?(I(w.oes_texture_float||!(ir==="float"||ir==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),I(w.oes_texture_half_float||!(ir==="half float"||ir==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ir==="half float"||ir==="float16"?(I(w.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),bn="rgba16f"):(ir==="float"||ir==="float32")&&(I(w.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),bn="rgba32f"),I.oneOf(ir,xe,"invalid color type")),"colorFormat"in yt&&(bn=yt.colorFormat,he.indexOf(bn)>=0?Rt=!0:ge.indexOf(bn)>=0?Rt=!1:Rt?I.oneOf(yt.colorFormat,he,"invalid color format for texture"):I.oneOf(yt.colorFormat,ge,"invalid color format for renderbuffer"))),("depthTexture"in yt||"depthStencilTexture"in yt)&&(xn=!!(yt.depthTexture||yt.depthStencilTexture),I(!xn||w.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in yt&&(typeof yt.depth=="boolean"?or=yt.depth:(Kn=yt.depth,sr=!1)),"stencil"in yt&&(typeof yt.stencil=="boolean"?sr=yt.stencil:(ur=yt.stencil,or=!1)),"depthStencil"in yt&&(typeof yt.depthStencil=="boolean"?or=sr=yt.depthStencil:(cr=yt.depthStencil,or=!1,sr=!1))}var Kt=null,nt=null,Dt=null,zt=null;if(Array.isArray(Lt))Kt=Lt.map(Ae);else if(Lt)Kt=[Ae(Lt)];else for(Kt=new Array(Yn),ht=0;ht<Yn;++ht)Kt[ht]=X(wt,jt,Rt,bn,ir);I(w.webgl_draw_buffers||Kt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),I(Kt.length<=L.maxColorAttachments,"too many color attachments, not supported"),wt=wt||Kt[0].width,jt=jt||Kt[0].height,Kn?nt=Ae(Kn):or&&!sr&&(nt=X(wt,jt,xn,"depth","uint32")),ur?Dt=Ae(ur):sr&&!or&&(Dt=X(wt,jt,!1,"stencil","uint8")),cr?zt=Ae(cr):!Kn&&!ur&&sr&&or&&(zt=X(wt,jt,xn,"depth stencil","depth stencil")),I(!!Kn+!!ur+!!cr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var On=null;for(ht=0;ht<Kt.length;++ht)if(Le(Kt[ht],wt,jt),I(!Kt[ht]||Kt[ht].texture&&Cf.indexOf(Kt[ht].texture._texture.format)>=0||Kt[ht].renderbuffer&&nd.indexOf(Kt[ht].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ht+" is invalid"),Kt[ht]&&Kt[ht].texture){var Mo=uu[Kt[ht].texture._texture.format]*gc[Kt[ht].texture._texture.type];On===null?On=Mo:I(On===Mo,"all color attachments much have the same number of bits per pixel.")}return Le(nt,wt,jt),I(!nt||nt.texture&&nt.texture._texture.format===Df||nt.renderbuffer&&nt.renderbuffer._renderbuffer.format===Ql,"invalid depth attachment for framebuffer object"),Le(Dt,wt,jt),I(!Dt||Dt.renderbuffer&&Dt.renderbuffer._renderbuffer.format===vh,"invalid stencil attachment for framebuffer object"),Le(zt,wt,jt),I(!zt||zt.texture&&zt.texture._texture.format===Lf||zt.renderbuffer&&zt.renderbuffer._renderbuffer.format===Lf,"invalid depth-stencil attachment for framebuffer object"),ce(se),se.width=wt,se.height=jt,se.colorAttachments=Kt,se.depthAttachment=nt,se.stencilAttachment=Dt,se.depthStencilAttachment=zt,st.color=Kt.map(J),st.depth=J(nt),st.stencil=J(Dt),st.depthStencil=J(zt),st.width=se.width,st.height=se.height,le(se),st}function gt(Xe,Tt){I(Q.next!==se,"can not resize a framebuffer which is currently in use");var ht=Math.max(Xe|0,1),wt=Math.max(Tt|0||ht,1);if(ht===se.width&&wt===se.height)return st;for(var jt=se.colorAttachments,or=0;or<jt.length;++or)pe(jt[or],ht,wt);return pe(se.depthAttachment,ht,wt),pe(se.stencilAttachment,ht,wt),pe(se.depthStencilAttachment,ht,wt),se.width=st.width=ht,se.height=st.height=wt,le(se),st}return st(Ce,Se),ne(st,{resize:gt,_reglType:"framebuffer",_framebuffer:se,destroy:function(){Ne(se),ce(se)},use:function(Xe){Q.setFBO({framebuffer:st},Xe)}})}function Qe(Ce){var Se=Array(6);function se(gt){var Xe;I(Se.indexOf(Q.next)<0,"can not update framebuffer which is currently in use");var Tt={color:null},ht=0,wt=null,jt="rgba",or="uint8",sr=1;if(typeof gt=="number")ht=gt|0;else if(!gt)ht=1;else{I.type(gt,"object","invalid arguments for framebuffer");var Lt=gt;if("shape"in Lt){var Rt=Lt.shape;I(Array.isArray(Rt)&&Rt.length>=2,"invalid shape for framebuffer"),I(Rt[0]===Rt[1],"cube framebuffer must be square"),ht=Rt[0]}else"radius"in Lt&&(ht=Lt.radius|0),"width"in Lt?(ht=Lt.width|0,"height"in Lt&&I(Lt.height===ht,"must be square")):"height"in Lt&&(ht=Lt.height|0);("color"in Lt||"colors"in Lt)&&(wt=Lt.color||Lt.colors,Array.isArray(wt)&&I(wt.length===1||w.webgl_draw_buffers,"multiple render targets not supported")),wt||("colorCount"in Lt&&(sr=Lt.colorCount|0,I(sr>0,"invalid color buffer count")),"colorType"in Lt&&(I.oneOf(Lt.colorType,xe,"invalid color type"),or=Lt.colorType),"colorFormat"in Lt&&(jt=Lt.colorFormat,I.oneOf(Lt.colorFormat,he,"invalid color format for texture"))),"depth"in Lt&&(Tt.depth=Lt.depth),"stencil"in Lt&&(Tt.stencil=Lt.stencil),"depthStencil"in Lt&&(Tt.depthStencil=Lt.depthStencil)}var bn;if(wt)if(Array.isArray(wt))for(bn=[],Xe=0;Xe<wt.length;++Xe)bn[Xe]=wt[Xe];else bn=[wt];else{bn=Array(sr);var ir={radius:ht,format:jt,type:or};for(Xe=0;Xe<sr;++Xe)bn[Xe]=Y.createCube(ir)}for(Tt.color=Array(bn.length),Xe=0;Xe<bn.length;++Xe){var Yn=bn[Xe];I(typeof Yn=="function"&&Yn._reglType==="textureCube","invalid cube map"),ht=ht||Yn.width,I(Yn.width===ht&&Yn.height===ht,"invalid cube map shape"),Tt.color[Xe]={target:vs,data:bn[Xe]}}for(Xe=0;Xe<6;++Xe){for(var Kn=0;Kn<bn.length;++Kn)Tt.color[Kn].target=vs+Xe;Xe>0&&(Tt.depth=Se[0].depth,Tt.stencil=Se[0].stencil,Tt.depthStencil=Se[0].depthStencil),Se[Xe]?Se[Xe](Tt):Se[Xe]=De(Tt)}return ne(se,{width:ht,height:ht,color:bn})}function st(gt){var Xe,Tt=gt|0;if(I(Tt>0&&Tt<=L.maxCubeMapSize,"invalid radius for cube fbo"),Tt===se.width)return se;var ht=se.color;for(Xe=0;Xe<ht.length;++Xe)ht[Xe].resize(Tt);for(Xe=0;Xe<6;++Xe)Se[Xe].resize(Tt);return se.width=se.height=Tt,se}return se(Ce),ne(se,{faces:Se,resize:st,_reglType:"framebufferCube",destroy:function(){Se.forEach(function(gt){gt.destroy()})}})}function lt(){Q.cur=null,Q.next=null,Q.dirty=!0,sn(ue).forEach(function(Ce){Ce.framebuffer=p.createFramebuffer(),le(Ce)})}return ne(Q,{getFramebuffer:function(Ce){if(typeof Ce=="function"&&Ce._reglType==="framebuffer"){var Se=Ce._framebuffer;if(Se instanceof Fe)return Se}return null},create:De,createCube:Qe,clear:function(){sn(ue).forEach(Ne)},restore:lt})}var od=5126,cu=34962;function yc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=od,this.offset=0,this.stride=0,this.divisor=0}function id(p,w,L,Y,ie){for(var Z=L.maxAttributes,Q=new Array(Z),he=0;he<Z;++he)Q[he]=new yc;var ge=0,xe={},de={Record:yc,scope:{},state:Q,currentVAO:null,targetVAO:null,restore:Le()?ue:function(){},createVAO:Fe,getVAO:Ae,destroyBuffer:Te,setVAO:Le()?X:J,clear:Le()?pe:function(){}};function Te(ce){for(var Ne=0;Ne<Q.length;++Ne){var le=Q[Ne];le.buffer===ce&&(p.disableVertexAttribArray(Ne),le.buffer=null)}}function Le(){return w.oes_vertex_array_object}function ve(){return w.angle_instanced_arrays}function Ae(ce){return typeof ce=="function"&&ce._vao?ce._vao:null}function X(ce){if(ce!==de.currentVAO){var Ne=Le();ce?Ne.bindVertexArrayOES(ce.vao):Ne.bindVertexArrayOES(null),de.currentVAO=ce}}function J(ce){if(ce!==de.currentVAO){if(ce)ce.bindAttrs();else for(var Ne=ve(),le=0;le<Q.length;++le){var De=Q[le];De.buffer?(p.enableVertexAttribArray(le),p.vertexAttribPointer(le,De.size,De.type,De.normalized,De.stride,De.offfset),Ne&&De.divisor&&Ne.vertexAttribDivisorANGLE(le,De.divisor)):(p.disableVertexAttribArray(le),p.vertexAttrib4f(le,De.x,De.y,De.z,De.w))}de.currentVAO=ce}}function pe(){sn(xe).forEach(function(ce){ce.destroy()})}function Oe(){this.id=++ge,this.attributes=[];var ce=Le();ce?this.vao=ce.createVertexArrayOES():this.vao=null,xe[this.id]=this,this.buffers=[]}Oe.prototype.bindAttrs=function(){for(var ce=ve(),Ne=this.attributes,le=0;le<Ne.length;++le){var De=Ne[le];De.buffer?(p.enableVertexAttribArray(le),p.bindBuffer(cu,De.buffer.buffer),p.vertexAttribPointer(le,De.size,De.type,De.normalized,De.stride,De.offset),ce&&De.divisor&&ce.vertexAttribDivisorANGLE(le,De.divisor)):(p.disableVertexAttribArray(le),p.vertexAttrib4f(le,De.x,De.y,De.z,De.w))}for(var Qe=Ne.length;Qe<Z;++Qe)p.disableVertexAttribArray(Qe)},Oe.prototype.refresh=function(){var ce=Le();ce&&(ce.bindVertexArrayOES(this.vao),this.bindAttrs(),de.currentVAO=this)},Oe.prototype.destroy=function(){if(this.vao){var ce=Le();this===de.currentVAO&&(de.currentVAO=null,ce.bindVertexArrayOES(null)),ce.deleteVertexArrayOES(this.vao),this.vao=null}xe[this.id]&&(delete xe[this.id],Y.vaoCount-=1)};function ue(){var ce=Le();ce&&sn(xe).forEach(function(Ne){Ne.refresh()})}function Fe(ce){var Ne=new Oe;Y.vaoCount+=1;function le(De){I(Array.isArray(De),"arguments to vertex array constructor must be an array"),I(De.length<Z,"too many attributes"),I(De.length>0,"must specify at least one attribute");var Qe={},lt=Ne.attributes;lt.length=De.length;for(var Ce=0;Ce<De.length;++Ce){var Se=De[Ce],se=lt[Ce]=new yc,st=Se.data||Se;if(Array.isArray(st)||At(st)||dn(st)){var gt;Ne.buffers[Ce]&&(gt=Ne.buffers[Ce],At(st)&&gt._buffer.byteLength>=st.byteLength?gt.subdata(st):(gt.destroy(),Ne.buffers[Ce]=null)),Ne.buffers[Ce]||(gt=Ne.buffers[Ce]=ie.create(Se,cu,!1,!0)),se.buffer=ie.getBuffer(gt),se.size=se.buffer.dimension|0,se.normalized=!1,se.type=se.buffer.dtype,se.offset=0,se.stride=0,se.divisor=0,se.state=1,Qe[Ce]=1}else ie.getBuffer(Se)?(se.buffer=ie.getBuffer(Se),se.size=se.buffer.dimension|0,se.normalized=!1,se.type=se.buffer.dtype,se.offset=0,se.stride=0,se.divisor=0,se.state=1):ie.getBuffer(Se.buffer)?(se.buffer=ie.getBuffer(Se.buffer),se.size=(+Se.size||se.buffer.dimension)|0,se.normalized=!!Se.normalized||!1,"type"in Se?(I.parameter(Se.type,Xt,"invalid buffer type"),se.type=Xt[Se.type]):se.type=se.buffer.dtype,se.offset=(Se.offset||0)|0,se.stride=(Se.stride||0)|0,se.divisor=(Se.divisor||0)|0,se.state=1,I(se.size>=1&&se.size<=4,"size must be between 1 and 4"),I(se.offset>=0,"invalid offset"),I(se.stride>=0&&se.stride<=255,"stride must be between 0 and 255"),I(se.divisor>=0,"divisor must be positive"),I(!se.divisor||!!w.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Se?(I(Ce>0,"first attribute must not be a constant"),se.x=+Se.x||0,se.y=+Se.y||0,se.z=+Se.z||0,se.w=+Se.w||0,se.state=2):I(!1,"invalid attribute spec for location "+Ce)}for(var Xe=0;Xe<Ne.buffers.length;++Xe)!Qe[Xe]&&Ne.buffers[Xe]&&(Ne.buffers[Xe].destroy(),Ne.buffers[Xe]=null);return Ne.refresh(),le}return le.destroy=function(){for(var De=0;De<Ne.buffers.length;++De)Ne.buffers[De]&&Ne.buffers[De].destroy();Ne.buffers.length=0,Ne.destroy()},le._vao=Ne,le._reglType="vao",le(ce)}return de}var Of=35632,ad=35633,Ec=35718,sd=35721;function ud(p,w,L,Y){var ie={},Z={};function Q(X,J,pe,Oe){this.name=X,this.id=J,this.location=pe,this.info=Oe}function he(X,J){for(var pe=0;pe<X.length;++pe)if(X[pe].id===J.id){X[pe].location=J.location;return}X.push(J)}function ge(X,J,pe){var Oe=X===Of?ie:Z,ue=Oe[J];if(!ue){var Fe=w.str(J);ue=p.createShader(X),p.shaderSource(ue,Fe),p.compileShader(ue),I.shaderError(p,ue,Fe,X,pe),Oe[J]=ue}return ue}var xe={},de=[],Te=0;function Le(X,J){this.id=Te++,this.fragId=X,this.vertId=J,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Y.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ve(X,J,pe){var Oe,ue,Fe=ge(Of,X.fragId),ce=ge(ad,X.vertId),Ne=X.program=p.createProgram();if(p.attachShader(Ne,Fe),p.attachShader(Ne,ce),pe)for(Oe=0;Oe<pe.length;++Oe){var le=pe[Oe];p.bindAttribLocation(Ne,le[0],le[1])}p.linkProgram(Ne),I.linkError(p,Ne,w.str(X.fragId),w.str(X.vertId),J);var De=p.getProgramParameter(Ne,Ec);Y.profile&&(X.stats.uniformsCount=De);var Qe=X.uniforms;for(Oe=0;Oe<De;++Oe)if(ue=p.getActiveUniform(Ne,Oe),ue)if(ue.size>1)for(var lt=0;lt<ue.size;++lt){var Ce=ue.name.replace("[0]","["+lt+"]");he(Qe,new Q(Ce,w.id(Ce),p.getUniformLocation(Ne,Ce),ue))}else he(Qe,new Q(ue.name,w.id(ue.name),p.getUniformLocation(Ne,ue.name),ue));var Se=p.getProgramParameter(Ne,sd);Y.profile&&(X.stats.attributesCount=Se);var se=X.attributes;for(Oe=0;Oe<Se;++Oe)ue=p.getActiveAttrib(Ne,Oe),ue&&he(se,new Q(ue.name,w.id(ue.name),p.getAttribLocation(Ne,ue.name),ue))}Y.profile&&(L.getMaxUniformsCount=function(){var X=0;return de.forEach(function(J){J.stats.uniformsCount>X&&(X=J.stats.uniformsCount)}),X},L.getMaxAttributesCount=function(){var X=0;return de.forEach(function(J){J.stats.attributesCount>X&&(X=J.stats.attributesCount)}),X});function Ae(){ie={},Z={};for(var X=0;X<de.length;++X)ve(de[X],null,de[X].attributes.map(function(J){return[J.location,J.name]}))}return{clear:function(){var X=p.deleteShader.bind(p);sn(ie).forEach(X),ie={},sn(Z).forEach(X),Z={},de.forEach(function(J){p.deleteProgram(J.program)}),de.length=0,xe={},L.shaderCount=0},program:function(X,J,pe,Oe){I.command(X>=0,"missing vertex shader",pe),I.command(J>=0,"missing fragment shader",pe);var ue=xe[J];ue||(ue=xe[J]={});var Fe=ue[X];if(Fe&&(Fe.refCount++,!Oe))return Fe;var ce=new Le(J,X);return L.shaderCount++,ve(ce,pe,Oe),Fe||(ue[X]=ce),de.push(ce),ne(ce,{destroy:function(){if(ce.refCount--,ce.refCount<=0){p.deleteProgram(ce.program);var Ne=de.indexOf(ce);de.splice(Ne,1),L.shaderCount--}ue[ce.vertId].refCount<=0&&(p.deleteShader(Z[ce.vertId]),delete Z[ce.vertId],delete xe[ce.fragId][ce.vertId]),Object.keys(xe[ce.fragId]).length||(p.deleteShader(ie[ce.fragId]),delete ie[ce.fragId],delete xe[ce.fragId])}})},restore:Ae,shader:ge,frag:-1,vert:-1}}var cd=6408,ps=5121,fd=3333,fu=5126;function ld(p,w,L,Y,ie,Z,Q){function he(de){var Te;w.next===null?(I(ie.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Te=ps):(I(w.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Te=w.next.colorAttachments[0].texture._texture.type,Z.oes_texture_float?(I(Te===ps||Te===fu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Te===fu&&I(Q.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):I(Te===ps,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Le=0,ve=0,Ae=Y.framebufferWidth,X=Y.framebufferHeight,J=null;At(de)?J=de:de&&(I.type(de,"object","invalid arguments to regl.read()"),Le=de.x|0,ve=de.y|0,I(Le>=0&&Le<Y.framebufferWidth,"invalid x offset for regl.read"),I(ve>=0&&ve<Y.framebufferHeight,"invalid y offset for regl.read"),Ae=(de.width||Y.framebufferWidth-Le)|0,X=(de.height||Y.framebufferHeight-ve)|0,J=de.data||null),J&&(Te===ps?I(J instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Te===fu&&I(J instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),I(Ae>0&&Ae+Le<=Y.framebufferWidth,"invalid width for read pixels"),I(X>0&&X+ve<=Y.framebufferHeight,"invalid height for read pixels"),L();var pe=Ae*X*4;return J||(Te===ps?J=new Uint8Array(pe):Te===fu&&(J=J||new Float32Array(pe))),I.isTypedArray(J,"data buffer for regl.read() must be a typedarray"),I(J.byteLength>=pe,"data buffer for regl.read() too small"),p.pixelStorei(fd,4),p.readPixels(Le,ve,Ae,X,cd,Te,J),J}function ge(de){var Te;return w.setFBO({framebuffer:de.framebuffer},function(){Te=he(de)}),Te}function xe(de){return!de||!("framebuffer"in de)?he(de):ge(de)}return xe}function za(p){return Array.prototype.slice.call(p)}function Ba(p){return za(p).join("")}function dd(){var p=0,w=[],L=[];function Y(Te){for(var Le=0;Le<L.length;++Le)if(L[Le]===Te)return w[Le];var ve="g"+p++;return w.push(ve),L.push(Te),ve}function ie(){var Te=[];function Le(){Te.push.apply(Te,za(arguments))}var ve=[];function Ae(){var X="v"+p++;return ve.push(X),arguments.length>0&&(Te.push(X,"="),Te.push.apply(Te,za(arguments)),Te.push(";")),X}return ne(Le,{def:Ae,toString:function(){return Ba([ve.length>0?"var "+ve.join(",")+";":"",Ba(Te)])}})}function Z(){var Te=ie(),Le=ie(),ve=Te.toString,Ae=Le.toString;function X(J,pe){Le(J,pe,"=",Te.def(J,pe),";")}return ne(function(){Te.apply(Te,za(arguments))},{def:Te.def,entry:Te,exit:Le,save:X,set:function(J,pe,Oe){X(J,pe),Te(J,pe,"=",Oe,";")},toString:function(){return ve()+Ae()}})}function Q(){var Te=Ba(arguments),Le=Z(),ve=Z(),Ae=Le.toString,X=ve.toString;return ne(Le,{then:function(){return Le.apply(Le,za(arguments)),this},else:function(){return ve.apply(ve,za(arguments)),this},toString:function(){var J=X();return J&&(J="else{"+J+"}"),Ba(["if(",Te,"){",Ae(),"}",J])}})}var he=ie(),ge={};function xe(Te,Le){var ve=[];function Ae(){var ue="a"+ve.length;return ve.push(ue),ue}Le=Le||0;for(var X=0;X<Le;++X)Ae();var J=Z(),pe=J.toString,Oe=ge[Te]=ne(J,{arg:Ae,toString:function(){return Ba(["function(",ve.join(),"){",pe(),"}"])}});return Oe}function de(){var Te=['"use strict";',he,"return {"];Object.keys(ge).forEach(function(Ae){Te.push('"',Ae,'":',ge[Ae].toString(),",")}),Te.push("}");var Le=Ba(Te).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ve=Function.apply(null,w.concat(Le));return ve.apply(null,L)}return{global:he,link:Y,block:ie,proc:xe,scope:Z,cond:Q,compile:de}}var Ua="xyzw".split(""),Mf=5121,Va=1,ms=2,gs=0,bc=1,xc=2,ys=3,lu=4,Es=5,bs=6,_c="dither",na="blend.enable",kf="blend.color",Mr="blend.equation",Ni="blend.func",$a="depth.enable",xs="depth.func",_s="depth.range",du="depth.mask",wc="colorMask",ra="cull.enable",ws="cull.face",Sc="frontFace",Tc="lineWidth",Gf="polygonOffset.enable",Ic="polygonOffset.offset",Pf="sample.alpha",oa="sample.enable",Xa="sample.coverage",Ff="stencil.enable",zf="stencil.mask",Ac="stencil.func",Nc="stencil.opFront",Wa="stencil.opBack",Bf="scissor.enable",io="scissor.box",gr="viewport",Ha="profile",ia="framebuffer",Ss="vert",ri="frag",aa="elements",sa="primitive",ua="count",Ts="offset",Co="instances",Dr="vao",hu="Width",ca="Height",Ri=ia+hu,fa=ia+ca,hd=gr+hu,vd=gr+ca,Di="drawingBuffer",Uf=Di+hu,Vf=Di+ca,pd=[Ni,Mr,Ac,Nc,Wa,Xa,gr,io,Ic],Za=34962,md=34963,gd=35632,yd=35633,$f=3553,la=34067,Is=2884,As=3042,Ed=3024,bd=2960,xd=2929,_d=3089,wd=32823,Sd=32926,Td=32928,Ci=5126,Ns=35664,vu=35665,pu=35666,ja=5124,mu=35667,gu=35668,yu=35669,Rc=35670,oi=35671,da=35672,Eu=35673,Vo=35674,$o=35675,ha=35676,Li=35678,Oi=35680,Xf=4,Mi=1028,Lo=1029,Wf=2304,lo=2305,Hf=32775,Zf=32776,Id=519,ki=7680,va=0,jn=1,jf=32774,pa=513,Yf=36160,bu=36064,Eo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ln=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ya={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Oo={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ma={frag:gd,vert:yd},xu={cw:Wf,ccw:lo};function Gi(p){return Array.isArray(p)||At(p)||dn(p)}function Kf(p){return p.sort(function(w,L){return w===gr?-1:L===gr?1:w<L?-1:1})}function zr(p,w,L,Y){this.thisDep=p,this.contextDep=w,this.propDep=L,this.append=Y}function Pi(p){return p&&!(p.thisDep||p.contextDep||p.propDep)}function Bn(p){return new zr(!1,!1,!1,p)}function jr(p,w){var L=p.type;if(L===gs){var Y=p.data.length;return new zr(!0,Y>=1,Y>=2,w)}else if(L===lu){var ie=p.data;return new zr(ie.thisDep,ie.contextDep,ie.propDep,w)}else{if(L===Es)return new zr(!1,!1,!1,w);if(L===bs){for(var Z=!1,Q=!1,he=!1,ge=0;ge<p.data.length;++ge){var xe=p.data[ge];if(xe.type===bc)he=!0;else if(xe.type===xc)Q=!0;else if(xe.type===ys)Z=!0;else if(xe.type===gs){Z=!0;var de=xe.data;de>=1&&(Q=!0),de>=2&&(he=!0)}else xe.type===lu&&(Z=Z||xe.data.thisDep,Q=Q||xe.data.contextDep,he=he||xe.data.propDep)}return new zr(Z,Q,he,w)}else return new zr(L===ys,L===xc,L===bc,w)}}var qf=new zr(!1,!1,!1,function(){});function Ad(p,w,L,Y,ie,Z,Q,he,ge,xe,de,Te,Le,ve,Ae){var X=xe.Record,J={add:32774,subtract:32778,"reverse subtract":32779};L.ext_blend_minmax&&(J.min=Hf,J.max=Zf);var pe=L.angle_instanced_arrays,Oe=L.webgl_draw_buffers,ue={dirty:!0,profile:Ae.profile},Fe={},ce=[],Ne={},le={};function De(N){return N.replace(".","_")}function Qe(N,x,M){var U=De(N);ce.push(N),Fe[U]=ue[U]=!!M,Ne[U]=x}function lt(N,x,M){var U=De(N);ce.push(N),Array.isArray(M)?(ue[U]=M.slice(),Fe[U]=M.slice()):ue[U]=Fe[U]=M,le[U]=x}Qe(_c,Ed),Qe(na,As),lt(kf,"blendColor",[0,0,0,0]),lt(Mr,"blendEquationSeparate",[jf,jf]),lt(Ni,"blendFuncSeparate",[jn,va,jn,va]),Qe($a,xd,!0),lt(xs,"depthFunc",pa),lt(_s,"depthRange",[0,1]),lt(du,"depthMask",!0),lt(wc,wc,[!0,!0,!0,!0]),Qe(ra,Is),lt(ws,"cullFace",Lo),lt(Sc,Sc,lo),lt(Tc,Tc,1),Qe(Gf,wd),lt(Ic,"polygonOffset",[0,0]),Qe(Pf,Sd),Qe(oa,Td),lt(Xa,"sampleCoverage",[1,!1]),Qe(Ff,bd),lt(zf,"stencilMask",-1),lt(Ac,"stencilFunc",[Id,0,-1]),lt(Nc,"stencilOpSeparate",[Mi,ki,ki,ki]),lt(Wa,"stencilOpSeparate",[Lo,ki,ki,ki]),Qe(Bf,_d),lt(io,"scissor",[0,0,p.drawingBufferWidth,p.drawingBufferHeight]),lt(gr,gr,[0,0,p.drawingBufferWidth,p.drawingBufferHeight]);var Ce={gl:p,context:Le,strings:w,next:Fe,current:ue,draw:Te,elements:Z,buffer:ie,shader:de,attributes:xe.state,vao:xe,uniforms:ge,framebuffer:he,extensions:L,timer:ve,isBufferArgs:Gi},Se={primTypes:qo,compareFuncs:Ya,blendFuncs:Eo,blendEquations:J,stencilOps:Oo,glTypes:Xt,orientationType:xu};I.optional(function(){Ce.isArrayLike=Cn}),Oe&&(Se.backBuffer=[Lo],Se.drawBuffer=yr(Y.maxDrawbuffers,function(N){return N===0?[0]:yr(N,function(x){return bu+x})}));var se=0;function st(){var N=dd(),x=N.link,M=N.global;N.id=se++,N.batchId="0";var U=x(Ce),$=N.shared={props:"a0"};Object.keys(Ce).forEach(function(O){$[O]=M.def(U,".",O)}),I.optional(function(){N.CHECK=x(I),N.commandStr=I.guessCommand(),N.command=x(N.commandStr),N.assert=function(O,T,B){O("if(!(",T,"))",this.CHECK,".commandRaise(",x(B),",",this.command,");")},Se.invalidBlendCombinations=Ln});var F=N.next={},k=N.current={};Object.keys(le).forEach(function(O){Array.isArray(ue[O])&&(F[O]=M.def($.next,".",O),k[O]=M.def($.current,".",O))});var z=N.constants={};Object.keys(Se).forEach(function(O){z[O]=M.def(JSON.stringify(Se[O]))}),N.invoke=function(O,T){switch(T.type){case gs:var B=["this",$.context,$.props,N.batchId];return O.def(x(T.data),".call(",B.slice(0,Math.max(T.data.length+1,4)),")");case bc:return O.def($.props,T.data);case xc:return O.def($.context,T.data);case ys:return O.def("this",T.data);case lu:return T.data.append(N,O),T.data.ref;case Es:return T.data.toString();case bs:return T.data.map(function(W){return N.invoke(O,W)})}},N.attribCache={};var R={};return N.scopeAttrib=function(O){var T=w.id(O);if(T in R)return R[T];var B=xe.scope[T];B||(B=xe.scope[T]=new X);var W=R[T]=x(B);return W},N}function gt(N){var x=N.static,M=N.dynamic,U;if(Ha in x){var $=!!x[Ha];U=Bn(function(k,z){return $}),U.enable=$}else if(Ha in M){var F=M[Ha];U=jr(F,function(k,z){return k.invoke(z,F)})}return U}function Xe(N,x){var M=N.static,U=N.dynamic;if(ia in M){var $=M[ia];return $?($=he.getFramebuffer($),I.command($,"invalid framebuffer object"),Bn(function(k,z){var R=k.link($),O=k.shared;z.set(O.framebuffer,".next",R);var T=O.context;return z.set(T,"."+Ri,R+".width"),z.set(T,"."+fa,R+".height"),R})):Bn(function(k,z){var R=k.shared;z.set(R.framebuffer,".next","null");var O=R.context;return z.set(O,"."+Ri,O+"."+Uf),z.set(O,"."+fa,O+"."+Vf),"null"})}else if(ia in U){var F=U[ia];return jr(F,function(k,z){var R=k.invoke(z,F),O=k.shared,T=O.framebuffer,B=z.def(T,".getFramebuffer(",R,")");I.optional(function(){k.assert(z,"!"+R+"||"+B,"invalid framebuffer object")}),z.set(T,".next",B);var W=O.context;return z.set(W,"."+Ri,B+"?"+B+".width:"+W+"."+Uf),z.set(W,"."+fa,B+"?"+B+".height:"+W+"."+Vf),B})}else return null}function Tt(N,x,M){var U=N.static,$=N.dynamic;function F(R){if(R in U){var O=U[R];I.commandType(O,"object","invalid "+R,M.commandStr);var T=!0,B=O.x|0,W=O.y|0,oe,ae;return"width"in O?(oe=O.width|0,I.command(oe>=0,"invalid "+R,M.commandStr)):T=!1,"height"in O?(ae=O.height|0,I.command(ae>=0,"invalid "+R,M.commandStr)):T=!1,new zr(!T&&x&&x.thisDep,!T&&x&&x.contextDep,!T&&x&&x.propDep,function(qe,xt){var He=qe.shared.context,rt=oe;"width"in O||(rt=xt.def(He,".",Ri,"-",B));var ct=ae;return"height"in O||(ct=xt.def(He,".",fa,"-",W)),[B,W,rt,ct]})}else if(R in $){var te=$[R],Ee=jr(te,function(qe,xt){var He=qe.invoke(xt,te);I.optional(function(){qe.assert(xt,He+"&&typeof "+He+'==="object"',"invalid "+R)});var rt=qe.shared.context,ct=xt.def(He,".x|0"),Wt=xt.def(He,".y|0"),Un=xt.def('"width" in ',He,"?",He,".width|0:","(",rt,".",Ri,"-",ct,")"),Yr=xt.def('"height" in ',He,"?",He,".height|0:","(",rt,".",fa,"-",Wt,")");return I.optional(function(){qe.assert(xt,Un+">=0&&"+Yr+">=0","invalid "+R)}),[ct,Wt,Un,Yr]});return x&&(Ee.thisDep=Ee.thisDep||x.thisDep,Ee.contextDep=Ee.contextDep||x.contextDep,Ee.propDep=Ee.propDep||x.propDep),Ee}else return x?new zr(x.thisDep,x.contextDep,x.propDep,function(qe,xt){var He=qe.shared.context;return[0,0,xt.def(He,".",Ri),xt.def(He,".",fa)]}):null}var k=F(gr);if(k){var z=k;k=new zr(k.thisDep,k.contextDep,k.propDep,function(R,O){var T=z.append(R,O),B=R.shared.context;return O.set(B,"."+hd,T[2]),O.set(B,"."+vd,T[3]),T})}return{viewport:k,scissor_box:F(io)}}function ht(N,x){var M=N.static,U=typeof M[ri]=="string"&&typeof M[Ss]=="string";if(U){if(Object.keys(x.dynamic).length>0)return null;var $=x.static,F=Object.keys($);if(F.length>0&&typeof $[F[0]]=="number"){for(var k=[],z=0;z<F.length;++z)I(typeof $[F[z]]=="number","must specify all vertex attribute locations when using vaos"),k.push([$[F[z]]|0,F[z]]);return k}}return null}function wt(N,x,M){var U=N.static,$=N.dynamic;function F(T){if(T in U){var B=w.id(U[T]);I.optional(function(){de.shader(ma[T],B,I.guessCommand())});var W=Bn(function(){return B});return W.id=B,W}else if(T in $){var oe=$[T];return jr(oe,function(ae,te){var Ee=ae.invoke(te,oe),qe=te.def(ae.shared.strings,".id(",Ee,")");return I.optional(function(){te(ae.shared.shader,".shader(",ma[T],",",qe,",",ae.command,");")}),qe})}return null}var k=F(ri),z=F(Ss),R=null,O;return Pi(k)&&Pi(z)?(R=de.program(z.id,k.id,null,M),O=Bn(function(T,B){return T.link(R)})):O=new zr(k&&k.thisDep||z&&z.thisDep,k&&k.contextDep||z&&z.contextDep,k&&k.propDep||z&&z.propDep,function(T,B){var W=T.shared.shader,oe;k?oe=k.append(T,B):oe=B.def(W,".",ri);var ae;z?ae=z.append(T,B):ae=B.def(W,".",Ss);var te=W+".program("+ae+","+oe;return I.optional(function(){te+=","+T.command}),B.def(te+")")}),{frag:k,vert:z,progVar:O,program:R}}function jt(N,x){var M=N.static,U=N.dynamic;function $(){if(aa in M){var T=M[aa];Gi(T)?T=Z.getElements(Z.create(T,!0)):T&&(T=Z.getElements(T),I.command(T,"invalid elements",x.commandStr));var B=Bn(function(oe,ae){if(T){var te=oe.link(T);return oe.ELEMENTS=te,te}return oe.ELEMENTS=null,null});return B.value=T,B}else if(aa in U){var W=U[aa];return jr(W,function(oe,ae){var te=oe.shared,Ee=te.isBufferArgs,qe=te.elements,xt=oe.invoke(ae,W),He=ae.def("null"),rt=ae.def(Ee,"(",xt,")"),ct=oe.cond(rt).then(He,"=",qe,".createStream(",xt,");").else(He,"=",qe,".getElements(",xt,");");return I.optional(function(){oe.assert(ct.else,"!"+xt+"||"+He,"invalid elements")}),ae.entry(ct),ae.exit(oe.cond(rt).then(qe,".destroyStream(",He,");")),oe.ELEMENTS=He,He})}return null}var F=$();function k(){if(sa in M){var T=M[sa];return I.commandParameter(T,qo,"invalid primitve",x.commandStr),Bn(function(W,oe){return qo[T]})}else if(sa in U){var B=U[sa];return jr(B,function(W,oe){var ae=W.constants.primTypes,te=W.invoke(oe,B);return I.optional(function(){W.assert(oe,te+" in "+ae,"invalid primitive, must be one of "+Object.keys(qo))}),oe.def(ae,"[",te,"]")})}else if(F)return Pi(F)?F.value?Bn(function(W,oe){return oe.def(W.ELEMENTS,".primType")}):Bn(function(){return Xf}):new zr(F.thisDep,F.contextDep,F.propDep,function(W,oe){var ae=W.ELEMENTS;return oe.def(ae,"?",ae,".primType:",Xf)});return null}function z(T,B){if(T in M){var W=M[T]|0;return I.command(!B||W>=0,"invalid "+T,x.commandStr),Bn(function(ae,te){return B&&(ae.OFFSET=W),W})}else if(T in U){var oe=U[T];return jr(oe,function(ae,te){var Ee=ae.invoke(te,oe);return B&&(ae.OFFSET=Ee,I.optional(function(){ae.assert(te,Ee+">=0","invalid "+T)})),Ee})}else if(B&&F)return Bn(function(ae,te){return ae.OFFSET="0",0});return null}var R=z(Ts,!0);function O(){if(ua in M){var T=M[ua]|0;return I.command(typeof T=="number"&&T>=0,"invalid vertex count",x.commandStr),Bn(function(){return T})}else if(ua in U){var B=U[ua];return jr(B,function(ae,te){var Ee=ae.invoke(te,B);return I.optional(function(){ae.assert(te,"typeof "+Ee+'==="number"&&'+Ee+">=0&&"+Ee+"===("+Ee+"|0)","invalid vertex count")}),Ee})}else if(F)if(Pi(F)){if(F)return R?new zr(R.thisDep,R.contextDep,R.propDep,function(ae,te){var Ee=te.def(ae.ELEMENTS,".vertCount-",ae.OFFSET);return I.optional(function(){ae.assert(te,Ee+">=0","invalid vertex offset/element buffer too small")}),Ee}):Bn(function(ae,te){return te.def(ae.ELEMENTS,".vertCount")});var W=Bn(function(){return-1});return I.optional(function(){W.MISSING=!0}),W}else{var oe=new zr(F.thisDep||R.thisDep,F.contextDep||R.contextDep,F.propDep||R.propDep,function(ae,te){var Ee=ae.ELEMENTS;return ae.OFFSET?te.def(Ee,"?",Ee,".vertCount-",ae.OFFSET,":-1"):te.def(Ee,"?",Ee,".vertCount:-1")});return I.optional(function(){oe.DYNAMIC=!0}),oe}return null}return{elements:F,primitive:k(),count:O(),instances:z(Co,!1),offset:R}}function or(N,x){var M=N.static,U=N.dynamic,$={};return ce.forEach(function(F){var k=De(F);function z(R,O){if(F in M){var T=R(M[F]);$[k]=Bn(function(){return T})}else if(F in U){var B=U[F];$[k]=jr(B,function(W,oe){return O(W,oe,W.invoke(oe,B))})}}switch(F){case ra:case na:case _c:case Ff:case $a:case Bf:case Gf:case Pf:case oa:case du:return z(function(R){return I.commandType(R,"boolean",F,x.commandStr),R},function(R,O,T){return I.optional(function(){R.assert(O,"typeof "+T+'==="boolean"',"invalid flag "+F,R.commandStr)}),T});case xs:return z(function(R){return I.commandParameter(R,Ya,"invalid "+F,x.commandStr),Ya[R]},function(R,O,T){var B=R.constants.compareFuncs;return I.optional(function(){R.assert(O,T+" in "+B,"invalid "+F+", must be one of "+Object.keys(Ya))}),O.def(B,"[",T,"]")});case _s:return z(function(R){return I.command(Cn(R)&&R.length===2&&typeof R[0]=="number"&&typeof R[1]=="number"&&R[0]<=R[1],"depth range is 2d array",x.commandStr),R},function(R,O,T){I.optional(function(){R.assert(O,R.shared.isArrayLike+"("+T+")&&"+T+".length===2&&typeof "+T+'[0]==="number"&&typeof '+T+'[1]==="number"&&'+T+"[0]<="+T+"[1]","depth range must be a 2d array")});var B=O.def("+",T,"[0]"),W=O.def("+",T,"[1]");return[B,W]});case Ni:return z(function(R){I.commandType(R,"object","blend.func",x.commandStr);var O="srcRGB"in R?R.srcRGB:R.src,T="srcAlpha"in R?R.srcAlpha:R.src,B="dstRGB"in R?R.dstRGB:R.dst,W="dstAlpha"in R?R.dstAlpha:R.dst;return I.commandParameter(O,Eo,k+".srcRGB",x.commandStr),I.commandParameter(T,Eo,k+".srcAlpha",x.commandStr),I.commandParameter(B,Eo,k+".dstRGB",x.commandStr),I.commandParameter(W,Eo,k+".dstAlpha",x.commandStr),I.command(Ln.indexOf(O+", "+B)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+O+", "+B+")",x.commandStr),[Eo[O],Eo[B],Eo[T],Eo[W]]},function(R,O,T){var B=R.constants.blendFuncs;I.optional(function(){R.assert(O,T+"&&typeof "+T+'==="object"',"invalid blend func, must be an object")});function W(He,rt){var ct=O.def('"',He,rt,'" in ',T,"?",T,".",He,rt,":",T,".",He);return I.optional(function(){R.assert(O,ct+" in "+B,"invalid "+F+"."+He+rt+", must be one of "+Object.keys(Eo))}),ct}var oe=W("src","RGB"),ae=W("dst","RGB");I.optional(function(){var He=R.constants.invalidBlendCombinations;R.assert(O,He+".indexOf("+oe+'+", "+'+ae+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var te=O.def(B,"[",oe,"]"),Ee=O.def(B,"[",W("src","Alpha"),"]"),qe=O.def(B,"[",ae,"]"),xt=O.def(B,"[",W("dst","Alpha"),"]");return[te,qe,Ee,xt]});case Mr:return z(function(R){if(typeof R=="string")return I.commandParameter(R,J,"invalid "+F,x.commandStr),[J[R],J[R]];if(typeof R=="object")return I.commandParameter(R.rgb,J,F+".rgb",x.commandStr),I.commandParameter(R.alpha,J,F+".alpha",x.commandStr),[J[R.rgb],J[R.alpha]];I.commandRaise("invalid blend.equation",x.commandStr)},function(R,O,T){var B=R.constants.blendEquations,W=O.def(),oe=O.def(),ae=R.cond("typeof ",T,'==="string"');return I.optional(function(){function te(Ee,qe,xt){R.assert(Ee,xt+" in "+B,"invalid "+qe+", must be one of "+Object.keys(J))}te(ae.then,F,T),R.assert(ae.else,T+"&&typeof "+T+'==="object"',"invalid "+F),te(ae.else,F+".rgb",T+".rgb"),te(ae.else,F+".alpha",T+".alpha")}),ae.then(W,"=",oe,"=",B,"[",T,"];"),ae.else(W,"=",B,"[",T,".rgb];",oe,"=",B,"[",T,".alpha];"),O(ae),[W,oe]});case kf:return z(function(R){return I.command(Cn(R)&&R.length===4,"blend.color must be a 4d array",x.commandStr),yr(4,function(O){return+R[O]})},function(R,O,T){return I.optional(function(){R.assert(O,R.shared.isArrayLike+"("+T+")&&"+T+".length===4","blend.color must be a 4d array")}),yr(4,function(B){return O.def("+",T,"[",B,"]")})});case zf:return z(function(R){return I.commandType(R,"number",k,x.commandStr),R|0},function(R,O,T){return I.optional(function(){R.assert(O,"typeof "+T+'==="number"',"invalid stencil.mask")}),O.def(T,"|0")});case Ac:return z(function(R){I.commandType(R,"object",k,x.commandStr);var O=R.cmp||"keep",T=R.ref||0,B="mask"in R?R.mask:-1;return I.commandParameter(O,Ya,F+".cmp",x.commandStr),I.commandType(T,"number",F+".ref",x.commandStr),I.commandType(B,"number",F+".mask",x.commandStr),[Ya[O],T,B]},function(R,O,T){var B=R.constants.compareFuncs;I.optional(function(){function te(){R.assert(O,Array.prototype.join.call(arguments,""),"invalid stencil.func")}te(T+"&&typeof ",T,'==="object"'),te('!("cmp" in ',T,")||(",T,".cmp in ",B,")")});var W=O.def('"cmp" in ',T,"?",B,"[",T,".cmp]",":",ki),oe=O.def(T,".ref|0"),ae=O.def('"mask" in ',T,"?",T,".mask|0:-1");return[W,oe,ae]});case Nc:case Wa:return z(function(R){I.commandType(R,"object",k,x.commandStr);var O=R.fail||"keep",T=R.zfail||"keep",B=R.zpass||"keep";return I.commandParameter(O,Oo,F+".fail",x.commandStr),I.commandParameter(T,Oo,F+".zfail",x.commandStr),I.commandParameter(B,Oo,F+".zpass",x.commandStr),[F===Wa?Lo:Mi,Oo[O],Oo[T],Oo[B]]},function(R,O,T){var B=R.constants.stencilOps;I.optional(function(){R.assert(O,T+"&&typeof "+T+'==="object"',"invalid "+F)});function W(oe){return I.optional(function(){R.assert(O,'!("'+oe+'" in '+T+")||("+T+"."+oe+" in "+B+")","invalid "+F+"."+oe+", must be one of "+Object.keys(Oo))}),O.def('"',oe,'" in ',T,"?",B,"[",T,".",oe,"]:",ki)}return[F===Wa?Lo:Mi,W("fail"),W("zfail"),W("zpass")]});case Ic:return z(function(R){I.commandType(R,"object",k,x.commandStr);var O=R.factor|0,T=R.units|0;return I.commandType(O,"number",k+".factor",x.commandStr),I.commandType(T,"number",k+".units",x.commandStr),[O,T]},function(R,O,T){I.optional(function(){R.assert(O,T+"&&typeof "+T+'==="object"',"invalid "+F)});var B=O.def(T,".factor|0"),W=O.def(T,".units|0");return[B,W]});case ws:return z(function(R){var O=0;return R==="front"?O=Mi:R==="back"&&(O=Lo),I.command(!!O,k,x.commandStr),O},function(R,O,T){return I.optional(function(){R.assert(O,T+'==="front"||'+T+'==="back"',"invalid cull.face")}),O.def(T,'==="front"?',Mi,":",Lo)});case Tc:return z(function(R){return I.command(typeof R=="number"&&R>=Y.lineWidthDims[0]&&R<=Y.lineWidthDims[1],"invalid line width, must be a positive number between "+Y.lineWidthDims[0]+" and "+Y.lineWidthDims[1],x.commandStr),R},function(R,O,T){return I.optional(function(){R.assert(O,"typeof "+T+'==="number"&&'+T+">="+Y.lineWidthDims[0]+"&&"+T+"<="+Y.lineWidthDims[1],"invalid line width")}),T});case Sc:return z(function(R){return I.commandParameter(R,xu,k,x.commandStr),xu[R]},function(R,O,T){return I.optional(function(){R.assert(O,T+'==="cw"||'+T+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),O.def(T+'==="cw"?'+Wf+":"+lo)});case wc:return z(function(R){return I.command(Cn(R)&&R.length===4,"color.mask must be length 4 array",x.commandStr),R.map(function(O){return!!O})},function(R,O,T){return I.optional(function(){R.assert(O,R.shared.isArrayLike+"("+T+")&&"+T+".length===4","invalid color.mask")}),yr(4,function(B){return"!!"+T+"["+B+"]"})});case Xa:return z(function(R){I.command(typeof R=="object"&&R,k,x.commandStr);var O="value"in R?R.value:1,T=!!R.invert;return I.command(typeof O=="number"&&O>=0&&O<=1,"sample.coverage.value must be a number between 0 and 1",x.commandStr),[O,T]},function(R,O,T){I.optional(function(){R.assert(O,T+"&&typeof "+T+'==="object"',"invalid sample.coverage")});var B=O.def('"value" in ',T,"?+",T,".value:1"),W=O.def("!!",T,".invert");return[B,W]})}}),$}function sr(N,x){var M=N.static,U=N.dynamic,$={};return Object.keys(M).forEach(function(F){var k=M[F],z;if(typeof k=="number"||typeof k=="boolean")z=Bn(function(){return k});else if(typeof k=="function"){var R=k._reglType;R==="texture2d"||R==="textureCube"?z=Bn(function(O){return O.link(k)}):R==="framebuffer"||R==="framebufferCube"?(I.command(k.color.length>0,'missing color attachment for framebuffer sent to uniform "'+F+'"',x.commandStr),z=Bn(function(O){return O.link(k.color[0])})):I.commandRaise('invalid data for uniform "'+F+'"',x.commandStr)}else Cn(k)?z=Bn(function(O){var T=O.global.def("[",yr(k.length,function(B){return I.command(typeof k[B]=="number"||typeof k[B]=="boolean","invalid uniform "+F,O.commandStr),k[B]}),"]");return T}):I.commandRaise('invalid or missing data for uniform "'+F+'"',x.commandStr);z.value=k,$[F]=z}),Object.keys(U).forEach(function(F){var k=U[F];$[F]=jr(k,function(z,R){return z.invoke(R,k)})}),$}function Lt(N,x){var M=N.static,U=N.dynamic,$={};return Object.keys(M).forEach(function(F){var k=M[F],z=w.id(F),R=new X;if(Gi(k))R.state=Va,R.buffer=ie.getBuffer(ie.create(k,Za,!1,!0)),R.type=0;else{var O=ie.getBuffer(k);if(O)R.state=Va,R.buffer=O,R.type=0;else if(I.command(typeof k=="object"&&k,"invalid data for attribute "+F,x.commandStr),"constant"in k){var T=k.constant;R.buffer="null",R.state=ms,typeof T=="number"?R.x=T:(I.command(Cn(T)&&T.length>0&&T.length<=4,"invalid constant for attribute "+F,x.commandStr),Ua.forEach(function(qe,xt){xt<T.length&&(R[qe]=T[xt])}))}else{Gi(k.buffer)?O=ie.getBuffer(ie.create(k.buffer,Za,!1,!0)):O=ie.getBuffer(k.buffer),I.command(!!O,'missing buffer for attribute "'+F+'"',x.commandStr);var B=k.offset|0;I.command(B>=0,'invalid offset for attribute "'+F+'"',x.commandStr);var W=k.stride|0;I.command(W>=0&&W<256,'invalid stride for attribute "'+F+'", must be integer betweeen [0, 255]',x.commandStr);var oe=k.size|0;I.command(!("size"in k)||oe>0&&oe<=4,'invalid size for attribute "'+F+'", must be 1,2,3,4',x.commandStr);var ae=!!k.normalized,te=0;"type"in k&&(I.commandParameter(k.type,Xt,"invalid type for attribute "+F,x.commandStr),te=Xt[k.type]);var Ee=k.divisor|0;"divisor"in k&&(I.command(Ee===0||pe,'cannot specify divisor for attribute "'+F+'", instancing not supported',x.commandStr),I.command(Ee>=0,'invalid divisor for attribute "'+F+'"',x.commandStr)),I.optional(function(){var qe=x.commandStr,xt=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(k).forEach(function(He){I.command(xt.indexOf(He)>=0,'unknown parameter "'+He+'" for attribute pointer "'+F+'" (valid parameters are '+xt+")",qe)})}),R.buffer=O,R.state=Va,R.size=oe,R.normalized=ae,R.type=te||O.dtype,R.offset=B,R.stride=W,R.divisor=Ee}}$[F]=Bn(function(qe,xt){var He=qe.attribCache;if(z in He)return He[z];var rt={isStream:!1};return Object.keys(R).forEach(function(ct){rt[ct]=R[ct]}),R.buffer&&(rt.buffer=qe.link(R.buffer),rt.type=rt.type||rt.buffer+".dtype"),He[z]=rt,rt})}),Object.keys(U).forEach(function(F){var k=U[F];function z(R,O){var T=R.invoke(O,k),B=R.shared,W=R.constants,oe=B.isBufferArgs,ae=B.buffer;I.optional(function(){R.assert(O,T+"&&(typeof "+T+'==="object"||typeof '+T+'==="function")&&('+oe+"("+T+")||"+ae+".getBuffer("+T+")||"+ae+".getBuffer("+T+".buffer)||"+oe+"("+T+'.buffer)||("constant" in '+T+"&&(typeof "+T+'.constant==="number"||'+B.isArrayLike+"("+T+".constant))))",'invalid dynamic attribute "'+F+'"')});var te={isStream:O.def(!1)},Ee=new X;Ee.state=Va,Object.keys(Ee).forEach(function(rt){te[rt]=O.def(""+Ee[rt])});var qe=te.buffer,xt=te.type;O("if(",oe,"(",T,")){",te.isStream,"=true;",qe,"=",ae,".createStream(",Za,",",T,");",xt,"=",qe,".dtype;","}else{",qe,"=",ae,".getBuffer(",T,");","if(",qe,"){",xt,"=",qe,".dtype;",'}else if("constant" in ',T,"){",te.state,"=",ms,";","if(typeof "+T+'.constant === "number"){',te[Ua[0]],"=",T,".constant;",Ua.slice(1).map(function(rt){return te[rt]}).join("="),"=0;","}else{",Ua.map(function(rt,ct){return te[rt]+"="+T+".constant.length>"+ct+"?"+T+".constant["+ct+"]:0;"}).join(""),"}}else{","if(",oe,"(",T,".buffer)){",qe,"=",ae,".createStream(",Za,",",T,".buffer);","}else{",qe,"=",ae,".getBuffer(",T,".buffer);","}",xt,'="type" in ',T,"?",W.glTypes,"[",T,".type]:",qe,".dtype;",te.normalized,"=!!",T,".normalized;");function He(rt){O(te[rt],"=",T,".",rt,"|0;")}return He("size"),He("offset"),He("stride"),He("divisor"),O("}}"),O.exit("if(",te.isStream,"){",ae,".destroyStream(",qe,");","}"),te}$[F]=jr(k,z)}),$}function Rt(N,x){var M=N.static,U=N.dynamic;if(Dr in M){var $=M[Dr];return $!==null&&xe.getVAO($)===null&&($=xe.createVAO($)),Bn(function(k){return k.link(xe.getVAO($))})}else if(Dr in U){var F=U[Dr];return jr(F,function(k,z){var R=k.invoke(z,F);return z.def(k.shared.vao+".getVAO("+R+")")})}return null}function bn(N){var x=N.static,M=N.dynamic,U={};return Object.keys(x).forEach(function($){var F=x[$];U[$]=Bn(function(k,z){return typeof F=="number"||typeof F=="boolean"?""+F:k.link(F)})}),Object.keys(M).forEach(function($){var F=M[$];U[$]=jr(F,function(k,z){return k.invoke(z,F)})}),U}function ir(N,x,M,U,$){var F=N.static,k=N.dynamic;I.optional(function(){var He=[ia,Ss,ri,aa,sa,Ts,ua,Co,Ha,Dr].concat(ce);function rt(ct){Object.keys(ct).forEach(function(Wt){I.command(He.indexOf(Wt)>=0,'unknown parameter "'+Wt+'"',$.commandStr)})}rt(F),rt(k)});var z=ht(N,x),R=Xe(N,$),O=Tt(N,R,$),T=jt(N,$),B=or(N,$),W=wt(N,$,z);function oe(He){var rt=O[He];rt&&(B[He]=rt)}oe(gr),oe(De(io));var ae=Object.keys(B).length>0,te={framebuffer:R,draw:T,shader:W,state:B,dirty:ae,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(te.profile=gt(N,$),te.uniforms=sr(M,$),te.drawVAO=te.scopeVAO=Rt(N,$),!te.drawVAO&&W.program&&!z&&L.angle_instanced_arrays){var Ee=!0,qe=W.program.attributes.map(function(He){var rt=x.static[He];return Ee=Ee&&!!rt,rt});if(Ee&&qe.length>0){var xt=xe.getVAO(xe.createVAO(qe));te.drawVAO=new zr(null,null,null,function(He,rt){return He.link(xt)}),te.useVAO=!0}}return z?te.useVAO=!0:te.attributes=Lt(x,$),te.context=bn(U,$),te}function Yn(N,x,M){var U=N.shared,$=U.context,F=N.scope();Object.keys(M).forEach(function(k){x.save($,"."+k);var z=M[k],R=z.append(N,x);Array.isArray(R)?F($,".",k,"=[",R.join(),"];"):F($,".",k,"=",R,";")}),x(F)}function Kn(N,x,M,U){var $=N.shared,F=$.gl,k=$.framebuffer,z;Oe&&(z=x.def($.extensions,".webgl_draw_buffers"));var R=N.constants,O=R.drawBuffer,T=R.backBuffer,B;M?B=M.append(N,x):B=x.def(k,".next"),U||x("if(",B,"!==",k,".cur){"),x("if(",B,"){",F,".bindFramebuffer(",Yf,",",B,".framebuffer);"),Oe&&x(z,".drawBuffersWEBGL(",O,"[",B,".colorAttachments.length]);"),x("}else{",F,".bindFramebuffer(",Yf,",null);"),Oe&&x(z,".drawBuffersWEBGL(",T,");"),x("}",k,".cur=",B,";"),U||x("}")}function ur(N,x,M){var U=N.shared,$=U.gl,F=N.current,k=N.next,z=U.current,R=U.next,O=N.cond(z,".dirty");ce.forEach(function(T){var B=De(T);if(!(B in M.state)){var W,oe;if(B in k){W=k[B],oe=F[B];var ae=yr(ue[B].length,function(Ee){return O.def(W,"[",Ee,"]")});O(N.cond(ae.map(function(Ee,qe){return Ee+"!=="+oe+"["+qe+"]"}).join("||")).then($,".",le[B],"(",ae,");",ae.map(function(Ee,qe){return oe+"["+qe+"]="+Ee}).join(";"),";"))}else{W=O.def(R,".",B);var te=N.cond(W,"!==",z,".",B);O(te),B in Ne?te(N.cond(W).then($,".enable(",Ne[B],");").else($,".disable(",Ne[B],");"),z,".",B,"=",W,";"):te($,".",le[B],"(",W,");",z,".",B,"=",W,";")}}}),Object.keys(M.state).length===0&&O(z,".dirty=false;"),x(O)}function cr(N,x,M,U){var $=N.shared,F=N.current,k=$.current,z=$.gl;Kf(Object.keys(M)).forEach(function(R){var O=M[R];if(!(U&&!U(O))){var T=O.append(N,x);if(Ne[R]){var B=Ne[R];Pi(O)?T?x(z,".enable(",B,");"):x(z,".disable(",B,");"):x(N.cond(T).then(z,".enable(",B,");").else(z,".disable(",B,");")),x(k,".",R,"=",T,";")}else if(Cn(T)){var W=F[R];x(z,".",le[R],"(",T,");",T.map(function(oe,ae){return W+"["+ae+"]="+oe}).join(";"),";")}else x(z,".",le[R],"(",T,");",k,".",R,"=",T,";")}})}function xn(N,x){pe&&(N.instancing=x.def(N.shared.extensions,".angle_instanced_arrays"))}function yt(N,x,M,U,$){var F=N.shared,k=N.stats,z=F.current,R=F.timer,O=M.profile;function T(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var B,W;function oe(He){B=x.def(),He(B,"=",T(),";"),typeof $=="string"?He(k,".count+=",$,";"):He(k,".count++;"),ve&&(U?(W=x.def(),He(W,"=",R,".getNumPendingQueries();")):He(R,".beginQuery(",k,");"))}function ae(He){He(k,".cpuTime+=",T(),"-",B,";"),ve&&(U?He(R,".pushScopeStats(",W,",",R,".getNumPendingQueries(),",k,");"):He(R,".endQuery();"))}function te(He){var rt=x.def(z,".profile");x(z,".profile=",He,";"),x.exit(z,".profile=",rt,";")}var Ee;if(O){if(Pi(O)){O.enable?(oe(x),ae(x.exit),te("true")):te("false");return}Ee=O.append(N,x),te(Ee)}else Ee=x.def(z,".profile");var qe=N.block();oe(qe),x("if(",Ee,"){",qe,"}");var xt=N.block();ae(xt),x.exit("if(",Ee,"){",xt,"}")}function Tr(N,x,M,U,$){var F=N.shared;function k(R){switch(R){case Ns:case mu:case oi:return 2;case vu:case gu:case da:return 3;case pu:case yu:case Eu:return 4;default:return 1}}function z(R,O,T){var B=F.gl,W=x.def(R,".location"),oe=x.def(F.attributes,"[",W,"]"),ae=T.state,te=T.buffer,Ee=[T.x,T.y,T.z,T.w],qe=["buffer","normalized","offset","stride"];function xt(){x("if(!",oe,".buffer){",B,".enableVertexAttribArray(",W,");}");var rt=T.type,ct;if(T.size?ct=x.def(T.size,"||",O):ct=O,x("if(",oe,".type!==",rt,"||",oe,".size!==",ct,"||",qe.map(function(Un){return oe+"."+Un+"!=="+T[Un]}).join("||"),"){",B,".bindBuffer(",Za,",",te,".buffer);",B,".vertexAttribPointer(",[W,ct,rt,T.normalized,T.stride,T.offset],");",oe,".type=",rt,";",oe,".size=",ct,";",qe.map(function(Un){return oe+"."+Un+"="+T[Un]+";"}).join(""),"}"),pe){var Wt=T.divisor;x("if(",oe,".divisor!==",Wt,"){",N.instancing,".vertexAttribDivisorANGLE(",[W,Wt],");",oe,".divisor=",Wt,";}")}}function He(){x("if(",oe,".buffer){",B,".disableVertexAttribArray(",W,");",oe,".buffer=null;","}if(",Ua.map(function(rt,ct){return oe+"."+rt+"!=="+Ee[ct]}).join("||"),"){",B,".vertexAttrib4f(",W,",",Ee,");",Ua.map(function(rt,ct){return oe+"."+rt+"="+Ee[ct]+";"}).join(""),"}")}ae===Va?xt():ae===ms?He():(x("if(",ae,"===",Va,"){"),xt(),x("}else{"),He(),x("}"))}U.forEach(function(R){var O=R.name,T=M.attributes[O],B;if(T){if(!$(T))return;B=T.append(N,x)}else{if(!$(qf))return;var W=N.scopeAttrib(O);I.optional(function(){N.assert(x,W+".state","missing attribute "+O)}),B={},Object.keys(new X).forEach(function(oe){B[oe]=x.def(W,".",oe)})}z(N.link(R),k(R.info.type),B)})}function Kt(N,x,M,U,$){for(var F=N.shared,k=F.gl,z,R=0;R<U.length;++R){var O=U[R],T=O.name,B=O.info.type,W=M.uniforms[T],oe=N.link(O),ae=oe+".location",te;if(W){if(!$(W))continue;if(Pi(W)){var Ee=W.value;if(I.command(Ee!==null&&typeof Ee!="undefined",'missing uniform "'+T+'"',N.commandStr),B===Li||B===Oi){I.command(typeof Ee=="function"&&(B===Li&&(Ee._reglType==="texture2d"||Ee._reglType==="framebuffer")||B===Oi&&(Ee._reglType==="textureCube"||Ee._reglType==="framebufferCube")),"invalid texture for uniform "+T,N.commandStr);var qe=N.link(Ee._texture||Ee.color[0]._texture);x(k,".uniform1i(",ae,",",qe+".bind());"),x.exit(qe,".unbind();")}else if(B===Vo||B===$o||B===ha){I.optional(function(){I.command(Cn(Ee),"invalid matrix for uniform "+T,N.commandStr),I.command(B===Vo&&Ee.length===4||B===$o&&Ee.length===9||B===ha&&Ee.length===16,"invalid length for matrix uniform "+T,N.commandStr)});var xt=N.global.def("new Float32Array(["+Array.prototype.slice.call(Ee)+"])"),He=2;B===$o?He=3:B===ha&&(He=4),x(k,".uniformMatrix",He,"fv(",ae,",false,",xt,");")}else{switch(B){case Ci:I.commandType(Ee,"number","uniform "+T,N.commandStr),z="1f";break;case Ns:I.command(Cn(Ee)&&Ee.length===2,"uniform "+T,N.commandStr),z="2f";break;case vu:I.command(Cn(Ee)&&Ee.length===3,"uniform "+T,N.commandStr),z="3f";break;case pu:I.command(Cn(Ee)&&Ee.length===4,"uniform "+T,N.commandStr),z="4f";break;case Rc:I.commandType(Ee,"boolean","uniform "+T,N.commandStr),z="1i";break;case ja:I.commandType(Ee,"number","uniform "+T,N.commandStr),z="1i";break;case oi:I.command(Cn(Ee)&&Ee.length===2,"uniform "+T,N.commandStr),z="2i";break;case mu:I.command(Cn(Ee)&&Ee.length===2,"uniform "+T,N.commandStr),z="2i";break;case da:I.command(Cn(Ee)&&Ee.length===3,"uniform "+T,N.commandStr),z="3i";break;case gu:I.command(Cn(Ee)&&Ee.length===3,"uniform "+T,N.commandStr),z="3i";break;case Eu:I.command(Cn(Ee)&&Ee.length===4,"uniform "+T,N.commandStr),z="4i";break;case yu:I.command(Cn(Ee)&&Ee.length===4,"uniform "+T,N.commandStr),z="4i";break}x(k,".uniform",z,"(",ae,",",Cn(Ee)?Array.prototype.slice.call(Ee):Ee,");")}continue}else te=W.append(N,x)}else{if(!$(qf))continue;te=x.def(F.uniforms,"[",w.id(T),"]")}B===Li?(I(!Array.isArray(te),"must specify a scalar prop for textures"),x("if(",te,"&&",te,'._reglType==="framebuffer"){',te,"=",te,".color[0];","}")):B===Oi&&(I(!Array.isArray(te),"must specify a scalar prop for cube maps"),x("if(",te,"&&",te,'._reglType==="framebufferCube"){',te,"=",te,".color[0];","}")),I.optional(function(){function Yr(ao,el){N.assert(x,ao,'bad data or missing for uniform "'+T+'".  '+el)}function _u(ao){I(!Array.isArray(te),"must not specify an array type for uniform"),Yr("typeof "+te+'==="'+ao+'"',"invalid type, expected "+ao)}function Kr(ao,el){Array.isArray(te)?I(te.length===ao,"must have length "+ao):Yr(F.isArrayLike+"("+te+")&&"+te+".length==="+ao,"invalid vector, should have length "+ao,N.commandStr)}function Ka(ao){I(!Array.isArray(te),"must not specify a value type"),Yr("typeof "+te+'==="function"&&'+te+'._reglType==="texture'+(ao===$f?"2d":"Cube")+'"',"invalid texture type",N.commandStr)}switch(B){case ja:_u("number");break;case mu:Kr(2,"number");break;case gu:Kr(3,"number");break;case yu:Kr(4,"number");break;case Ci:_u("number");break;case Ns:Kr(2,"number");break;case vu:Kr(3,"number");break;case pu:Kr(4,"number");break;case Rc:_u("boolean");break;case oi:Kr(2,"boolean");break;case da:Kr(3,"boolean");break;case Eu:Kr(4,"boolean");break;case Vo:Kr(4,"number");break;case $o:Kr(9,"number");break;case ha:Kr(16,"number");break;case Li:Ka($f);break;case Oi:Ka(la);break}});var rt=1;switch(B){case Li:case Oi:var ct=x.def(te,"._texture");x(k,".uniform1i(",ae,",",ct,".bind());"),x.exit(ct,".unbind();");continue;case ja:case Rc:z="1i";break;case mu:case oi:z="2i",rt=2;break;case gu:case da:z="3i",rt=3;break;case yu:case Eu:z="4i",rt=4;break;case Ci:z="1f";break;case Ns:z="2f",rt=2;break;case vu:z="3f",rt=3;break;case pu:z="4f",rt=4;break;case Vo:z="Matrix2fv";break;case $o:z="Matrix3fv";break;case ha:z="Matrix4fv";break}if(x(k,".uniform",z,"(",ae,","),z.charAt(0)==="M"){var Wt=Math.pow(B-Vo+2,2),Un=N.global.def("new Float32Array(",Wt,")");Array.isArray(te)?x("false,(",yr(Wt,function(Yr){return Un+"["+Yr+"]="+te[Yr]}),",",Un,")"):x("false,(Array.isArray(",te,")||",te," instanceof Float32Array)?",te,":(",yr(Wt,function(Yr){return Un+"["+Yr+"]="+te+"["+Yr+"]"}),",",Un,")")}else rt>1?x(yr(rt,function(Yr){return Array.isArray(te)?te[Yr]:te+"["+Yr+"]"})):(I(!Array.isArray(te),"uniform value must not be an array"),x(te));x(");")}}function nt(N,x,M,U){var $=N.shared,F=$.gl,k=$.draw,z=U.draw;function R(){var ct=z.elements,Wt,Un=x;return ct?((ct.contextDep&&U.contextDynamic||ct.propDep)&&(Un=M),Wt=ct.append(N,Un)):Wt=Un.def(k,".",aa),Wt&&Un("if("+Wt+")"+F+".bindBuffer("+md+","+Wt+".buffer.buffer);"),Wt}function O(){var ct=z.count,Wt,Un=x;return ct?((ct.contextDep&&U.contextDynamic||ct.propDep)&&(Un=M),Wt=ct.append(N,Un),I.optional(function(){ct.MISSING&&N.assert(x,"false","missing vertex count"),ct.DYNAMIC&&N.assert(Un,Wt+">=0","missing vertex count")})):(Wt=Un.def(k,".",ua),I.optional(function(){N.assert(Un,Wt+">=0","missing vertex count")})),Wt}var T=R();function B(ct){var Wt=z[ct];return Wt?Wt.contextDep&&U.contextDynamic||Wt.propDep?Wt.append(N,M):Wt.append(N,x):x.def(k,".",ct)}var W=B(sa),oe=B(Ts),ae=O();if(typeof ae=="number"){if(ae===0)return}else M("if(",ae,"){"),M.exit("}");var te,Ee;pe&&(te=B(Co),Ee=N.instancing);var qe=T+".type",xt=z.elements&&Pi(z.elements);function He(){function ct(){M(Ee,".drawElementsInstancedANGLE(",[W,ae,qe,oe+"<<(("+qe+"-"+Mf+")>>1)",te],");")}function Wt(){M(Ee,".drawArraysInstancedANGLE(",[W,oe,ae,te],");")}T?xt?ct():(M("if(",T,"){"),ct(),M("}else{"),Wt(),M("}")):Wt()}function rt(){function ct(){M(F+".drawElements("+[W,ae,qe,oe+"<<(("+qe+"-"+Mf+")>>1)"]+");")}function Wt(){M(F+".drawArrays("+[W,oe,ae]+");")}T?xt?ct():(M("if(",T,"){"),ct(),M("}else{"),Wt(),M("}")):Wt()}pe&&(typeof te!="number"||te>=0)?typeof te=="string"?(M("if(",te,">0){"),He(),M("}else if(",te,"<0){"),rt(),M("}")):He():rt()}function Dt(N,x,M,U,$){var F=st(),k=F.proc("body",$);return I.optional(function(){F.commandStr=x.commandStr,F.command=F.link(x.commandStr)}),pe&&(F.instancing=k.def(F.shared.extensions,".angle_instanced_arrays")),N(F,k,M,U),F.compile().body}function zt(N,x,M,U){xn(N,x),M.useVAO?M.drawVAO?x(N.shared.vao,".setVAO(",M.drawVAO.append(N,x),");"):x(N.shared.vao,".setVAO(",N.shared.vao,".targetVAO);"):(x(N.shared.vao,".setVAO(null);"),Tr(N,x,M,U.attributes,function(){return!0})),Kt(N,x,M,U.uniforms,function(){return!0}),nt(N,x,x,M)}function On(N,x){var M=N.proc("draw",1);xn(N,M),Yn(N,M,x.context),Kn(N,M,x.framebuffer),ur(N,M,x),cr(N,M,x.state),yt(N,M,x,!1,!0);var U=x.shader.progVar.append(N,M);if(M(N.shared.gl,".useProgram(",U,".program);"),x.shader.program)zt(N,M,x,x.shader.program);else{M(N.shared.vao,".setVAO(null);");var $=N.global.def("{}"),F=M.def(U,".id"),k=M.def($,"[",F,"]");M(N.cond(k).then(k,".call(this,a0);").else(k,"=",$,"[",F,"]=",N.link(function(z){return Dt(zt,N,x,z,1)}),"(",U,");",k,".call(this,a0);"))}Object.keys(x.state).length>0&&M(N.shared.current,".dirty=true;")}function Mo(N,x,M,U){N.batchId="a1",xn(N,x);function $(){return!0}Tr(N,x,M,U.attributes,$),Kt(N,x,M,U.uniforms,$),nt(N,x,x,M)}function ya(N,x,M,U){xn(N,x);var $=M.contextDep,F=x.def(),k="a0",z="a1",R=x.def();N.shared.props=R,N.batchId=F;var O=N.scope(),T=N.scope();x(O.entry,"for(",F,"=0;",F,"<",z,";++",F,"){",R,"=",k,"[",F,"];",T,"}",O.exit);function B(qe){return qe.contextDep&&$||qe.propDep}function W(qe){return!B(qe)}if(M.needsContext&&Yn(N,T,M.context),M.needsFramebuffer&&Kn(N,T,M.framebuffer),cr(N,T,M.state,B),M.profile&&B(M.profile)&&yt(N,T,M,!1,!0),U)M.useVAO?M.drawVAO?B(M.drawVAO)?T(N.shared.vao,".setVAO(",M.drawVAO.append(N,T),");"):O(N.shared.vao,".setVAO(",M.drawVAO.append(N,O),");"):O(N.shared.vao,".setVAO(",N.shared.vao,".targetVAO);"):(O(N.shared.vao,".setVAO(null);"),Tr(N,O,M,U.attributes,W),Tr(N,T,M,U.attributes,B)),Kt(N,O,M,U.uniforms,W),Kt(N,T,M,U.uniforms,B),nt(N,O,T,M);else{var oe=N.global.def("{}"),ae=M.shader.progVar.append(N,T),te=T.def(ae,".id"),Ee=T.def(oe,"[",te,"]");T(N.shared.gl,".useProgram(",ae,".program);","if(!",Ee,"){",Ee,"=",oe,"[",te,"]=",N.link(function(qe){return Dt(Mo,N,M,qe,2)}),"(",ae,");}",Ee,".call(this,a0[",F,"],",F,");")}}function C(N,x){var M=N.proc("batch",2);N.batchId="0",xn(N,M);var U=!1,$=!0;Object.keys(x.context).forEach(function(oe){U=U||x.context[oe].propDep}),U||(Yn(N,M,x.context),$=!1);var F=x.framebuffer,k=!1;F?(F.propDep?U=k=!0:F.contextDep&&U&&(k=!0),k||Kn(N,M,F)):Kn(N,M,null),x.state.viewport&&x.state.viewport.propDep&&(U=!0);function z(oe){return oe.contextDep&&U||oe.propDep}ur(N,M,x),cr(N,M,x.state,function(oe){return!z(oe)}),(!x.profile||!z(x.profile))&&yt(N,M,x,!1,"a1"),x.contextDep=U,x.needsContext=$,x.needsFramebuffer=k;var R=x.shader.progVar;if(R.contextDep&&U||R.propDep)ya(N,M,x,null);else{var O=R.append(N,M);if(M(N.shared.gl,".useProgram(",O,".program);"),x.shader.program)ya(N,M,x,x.shader.program);else{M(N.shared.vao,".setVAO(null);");var T=N.global.def("{}"),B=M.def(O,".id"),W=M.def(T,"[",B,"]");M(N.cond(W).then(W,".call(this,a0,a1);").else(W,"=",T,"[",B,"]=",N.link(function(oe){return Dt(ya,N,x,oe,2)}),"(",O,");",W,".call(this,a0,a1);"))}}Object.keys(x.state).length>0&&M(N.shared.current,".dirty=true;")}function K(N,x){var M=N.proc("scope",3);N.batchId="a2";var U=N.shared,$=U.current;Yn(N,M,x.context),x.framebuffer&&x.framebuffer.append(N,M),Kf(Object.keys(x.state)).forEach(function(k){var z=x.state[k],R=z.append(N,M);Cn(R)?R.forEach(function(O,T){M.set(N.next[k],"["+T+"]",O)}):M.set(U.next,"."+k,R)}),yt(N,M,x,!0,!0),[aa,Ts,ua,Co,sa].forEach(function(k){var z=x.draw[k];z&&M.set(U.draw,"."+k,""+z.append(N,M))}),Object.keys(x.uniforms).forEach(function(k){var z=x.uniforms[k].append(N,M);Array.isArray(z)&&(z="["+z.join()+"]"),M.set(U.uniforms,"["+w.id(k)+"]",z)}),Object.keys(x.attributes).forEach(function(k){var z=x.attributes[k].append(N,M),R=N.scopeAttrib(k);Object.keys(new X).forEach(function(O){M.set(R,"."+O,z[O])})}),x.scopeVAO&&M.set(U.vao,".targetVAO",x.scopeVAO.append(N,M));function F(k){var z=x.shader[k];z&&M.set(U.shader,"."+k,z.append(N,M))}F(Ss),F(ri),Object.keys(x.state).length>0&&(M($,".dirty=true;"),M.exit($,".dirty=true;")),M("a1(",N.shared.context,",a0,",N.batchId,");")}function H(N){if(!(typeof N!="object"||Cn(N))){for(var x=Object.keys(N),M=0;M<x.length;++M)if(Dn.isDynamic(N[x[M]]))return!0;return!1}}function ze(N,x,M){var U=x.static[M];if(!U||!H(U))return;var $=N.global,F=Object.keys(U),k=!1,z=!1,R=!1,O=N.global.def("{}");F.forEach(function(B){var W=U[B];if(Dn.isDynamic(W)){typeof W=="function"&&(W=U[B]=Dn.unbox(W));var oe=jr(W,null);k=k||oe.thisDep,R=R||oe.propDep,z=z||oe.contextDep}else{switch($(O,".",B,"="),typeof W){case"number":$(W);break;case"string":$('"',W,'"');break;case"object":Array.isArray(W)&&$("[",W.join(),"]");break;default:$(N.link(W));break}$(";")}});function T(B,W){F.forEach(function(oe){var ae=U[oe];if(Dn.isDynamic(ae)){var te=B.invoke(W,ae);W(O,".",oe,"=",te,";")}})}x.dynamic[M]=new Dn.DynamicVariable(lu,{thisDep:k,contextDep:z,propDep:R,ref:O,append:T}),delete x.static[M]}function It(N,x,M,U,$){var F=st();F.stats=F.link($),Object.keys(x.static).forEach(function(z){ze(F,x,z)}),pd.forEach(function(z){ze(F,N,z)});var k=ir(N,x,M,U,F);return On(F,k),K(F,k),C(F,k),ne(F.compile(),{destroy:function(){k.shader.program.destroy()}})}return{next:Fe,current:ue,procs:function(){var N=st(),x=N.proc("poll"),M=N.proc("refresh"),U=N.block();x(U),M(U);var $=N.shared,F=$.gl,k=$.next,z=$.current;U(z,".dirty=false;"),Kn(N,x),Kn(N,M,null,!0);var R;pe&&(R=N.link(pe)),L.oes_vertex_array_object&&M(N.link(L.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var O=0;O<Y.maxAttributes;++O){var T=M.def($.attributes,"[",O,"]"),B=N.cond(T,".buffer");B.then(F,".enableVertexAttribArray(",O,");",F,".bindBuffer(",Za,",",T,".buffer.buffer);",F,".vertexAttribPointer(",O,",",T,".size,",T,".type,",T,".normalized,",T,".stride,",T,".offset);").else(F,".disableVertexAttribArray(",O,");",F,".vertexAttrib4f(",O,",",T,".x,",T,".y,",T,".z,",T,".w);",T,".buffer=null;"),M(B),pe&&M(R,".vertexAttribDivisorANGLE(",O,",",T,".divisor);")}return M(N.shared.vao,".currentVAO=null;",N.shared.vao,".setVAO(",N.shared.vao,".targetVAO);"),Object.keys(Ne).forEach(function(W){var oe=Ne[W],ae=U.def(k,".",W),te=N.block();te("if(",ae,"){",F,".enable(",oe,")}else{",F,".disable(",oe,")}",z,".",W,"=",ae,";"),M(te),x("if(",ae,"!==",z,".",W,"){",te,"}")}),Object.keys(le).forEach(function(W){var oe=le[W],ae=ue[W],te,Ee,qe=N.block();if(qe(F,".",oe,"("),Cn(ae)){var xt=ae.length;te=N.global.def(k,".",W),Ee=N.global.def(z,".",W),qe(yr(xt,function(He){return te+"["+He+"]"}),");",yr(xt,function(He){return Ee+"["+He+"]="+te+"["+He+"];"}).join("")),x("if(",yr(xt,function(He){return te+"["+He+"]!=="+Ee+"["+He+"]"}).join("||"),"){",qe,"}")}else te=U.def(k,".",W),Ee=U.def(z,".",W),qe(te,");",z,".",W,"=",te,";"),x("if(",te,"!==",Ee,"){",qe,"}");M(qe)}),N.compile()}(),compile:It}}function Dc(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ii=34918,Fi=34919,Qf=35007,Nd=function(p,w){if(!w.ext_disjoint_timer_query)return null;var L=[];function Y(){return L.pop()||w.ext_disjoint_timer_query.createQueryEXT()}function ie(pe){L.push(pe)}var Z=[];function Q(pe){var Oe=Y();w.ext_disjoint_timer_query.beginQueryEXT(Qf,Oe),Z.push(Oe),ve(Z.length-1,Z.length,pe)}function he(){w.ext_disjoint_timer_query.endQueryEXT(Qf)}function ge(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var xe=[];function de(){return xe.pop()||new ge}function Te(pe){xe.push(pe)}var Le=[];function ve(pe,Oe,ue){var Fe=de();Fe.startQueryIndex=pe,Fe.endQueryIndex=Oe,Fe.sum=0,Fe.stats=ue,Le.push(Fe)}var Ae=[],X=[];function J(){var pe,Oe,ue=Z.length;if(ue!==0){X.length=Math.max(X.length,ue+1),Ae.length=Math.max(Ae.length,ue+1),Ae[0]=0,X[0]=0;var Fe=0;for(pe=0,Oe=0;Oe<Z.length;++Oe){var ce=Z[Oe];w.ext_disjoint_timer_query.getQueryObjectEXT(ce,Fi)?(Fe+=w.ext_disjoint_timer_query.getQueryObjectEXT(ce,ii),ie(ce)):Z[pe++]=ce,Ae[Oe+1]=Fe,X[Oe+1]=pe}for(Z.length=pe,pe=0,Oe=0;Oe<Le.length;++Oe){var Ne=Le[Oe],le=Ne.startQueryIndex,De=Ne.endQueryIndex;Ne.sum+=Ae[De]-Ae[le];var Qe=X[le],lt=X[De];lt===Qe?(Ne.stats.gpuTime+=Ne.sum/1e6,Te(Ne)):(Ne.startQueryIndex=Qe,Ne.endQueryIndex=lt,Le[pe++]=Ne)}Le.length=pe}}return{beginQuery:Q,endQuery:he,pushScopeStats:ve,update:J,getNumPendingQueries:function(){return Z.length},clear:function(){L.push.apply(L,Z);for(var pe=0;pe<L.length;pe++)w.ext_disjoint_timer_query.deleteQueryEXT(L[pe]);Z.length=0,L.length=0},restore:function(){Z.length=0,L.length=0}}},Rd=16384,Dd=256,ga=1024,Cd=34962,Cc="webglcontextlost",Lc="webglcontextrestored",Oc=1,Jf=2,Ld=3;function Mc(p,w){for(var L=0;L<p.length;++L)if(p[L]===w)return L;return-1}function kc(p){var w=Xi(p);if(!w)return null;var L=w.gl,Y=L.getContextAttributes(),ie=L.isContextLost(),Z=Ps(L,w);if(!Z)return null;var Q=To(),he=Dc(),ge=Z.extensions,xe=Nd(L,ge),de=Xr(),Te=L.drawingBufferWidth,Le=L.drawingBufferHeight,ve={tick:0,time:0,viewportWidth:Te,viewportHeight:Le,framebufferWidth:Te,framebufferHeight:Le,drawingBufferWidth:Te,drawingBufferHeight:Le,pixelRatio:w.pixelRatio},Ae={},X={elements:null,primitive:4,count:-1,offset:0,instances:-1},J=Sn(L,ge),pe=ju(L,he,w,ue),Oe=id(L,ge,J,he,pe);function ue(nt){return Oe.destroyBuffer(nt)}var Fe=Zs(L,ge,pe,he),ce=ud(L,Q,he,w),Ne=$l(L,ge,J,function(){Qe.procs.poll()},ve,he,w),le=Wl(L,ge,J,he,w),De=rd(L,ge,J,Ne,le,he),Qe=Ad(L,Q,ge,J,pe,Fe,Ne,De,Ae,Oe,ce,X,ve,xe,w),lt=ld(L,De,Qe.procs.poll,ve,Y,ge,J),Ce=Qe.next,Se=L.canvas,se=[],st=[],gt=[],Xe=[w.onDestroy],Tt=null;function ht(){if(se.length===0){xe&&xe.update(),Tt=null;return}Tt=So.next(ht),cr();for(var nt=se.length-1;nt>=0;--nt){var Dt=se[nt];Dt&&Dt(ve,null,0)}L.flush(),xe&&xe.update()}function wt(){!Tt&&se.length>0&&(Tt=So.next(ht))}function jt(){Tt&&(So.cancel(ht),Tt=null)}function or(nt){nt.preventDefault(),ie=!0,jt(),st.forEach(function(Dt){Dt()})}function sr(nt){L.getError(),ie=!1,Z.restore(),ce.restore(),pe.restore(),Ne.restore(),le.restore(),De.restore(),Oe.restore(),xe&&xe.restore(),Qe.procs.refresh(),wt(),gt.forEach(function(Dt){Dt()})}Se&&(Se.addEventListener(Cc,or,!1),Se.addEventListener(Lc,sr,!1));function Lt(){se.length=0,jt(),Se&&(Se.removeEventListener(Cc,or),Se.removeEventListener(Lc,sr)),ce.clear(),De.clear(),le.clear(),Ne.clear(),Fe.clear(),pe.clear(),Oe.clear(),xe&&xe.clear(),Xe.forEach(function(nt){nt()})}function Rt(nt){I(!!nt,"invalid args to regl({...})"),I.type(nt,"object","invalid args to regl({...})");function Dt($){var F=ne({},$);delete F.uniforms,delete F.attributes,delete F.context,delete F.vao,"stencil"in F&&F.stencil.op&&(F.stencil.opBack=F.stencil.opFront=F.stencil.op,delete F.stencil.op);function k(z){if(z in F){var R=F[z];delete F[z],Object.keys(R).forEach(function(O){F[z+"."+O]=R[O]})}}return k("blend"),k("depth"),k("cull"),k("stencil"),k("polygonOffset"),k("scissor"),k("sample"),"vao"in $&&(F.vao=$.vao),F}function zt($,F){var k={},z={};return Object.keys($).forEach(function(R){var O=$[R];if(Dn.isDynamic(O)){z[R]=Dn.unbox(O,R);return}else if(F&&Array.isArray(O)){for(var T=0;T<O.length;++T)if(Dn.isDynamic(O[T])){z[R]=Dn.unbox(O,R);return}}k[R]=O}),{dynamic:z,static:k}}var On=zt(nt.context||{},!0),Mo=zt(nt.uniforms||{},!0),ya=zt(nt.attributes||{},!1),C=zt(Dt(nt),!1),K={gpuTime:0,cpuTime:0,count:0},H=Qe.compile(C,ya,Mo,On,K),ze=H.draw,It=H.batch,N=H.scope,x=[];function M($){for(;x.length<$;)x.push(null);return x}function U($,F){var k;if(ie&&I.raise("context lost"),typeof $=="function")return N.call(this,null,$,0);if(typeof F=="function")if(typeof $=="number")for(k=0;k<$;++k)N.call(this,null,F,k);else if(Array.isArray($))for(k=0;k<$.length;++k)N.call(this,$[k],F,k);else return N.call(this,$,F,0);else if(typeof $=="number"){if($>0)return It.call(this,M($|0),$|0)}else if(Array.isArray($)){if($.length)return It.call(this,$,$.length)}else return ze.call(this,$)}return ne(U,{stats:K,destroy:function(){H.destroy()}})}var bn=De.setFBO=Rt({framebuffer:Dn.define.call(null,Oc,"framebuffer")});function ir(nt,Dt){var zt=0;Qe.procs.poll();var On=Dt.color;On&&(L.clearColor(+On[0]||0,+On[1]||0,+On[2]||0,+On[3]||0),zt|=Rd),"depth"in Dt&&(L.clearDepth(+Dt.depth),zt|=Dd),"stencil"in Dt&&(L.clearStencil(Dt.stencil|0),zt|=ga),I(!!zt,"called regl.clear with no buffer specified"),L.clear(zt)}function Yn(nt){if(I(typeof nt=="object"&&nt,"regl.clear() takes an object as input"),"framebuffer"in nt)if(nt.framebuffer&&nt.framebuffer_reglType==="framebufferCube")for(var Dt=0;Dt<6;++Dt)bn(ne({framebuffer:nt.framebuffer.faces[Dt]},nt),ir);else bn(nt,ir);else ir(null,nt)}function Kn(nt){I.type(nt,"function","regl.frame() callback must be a function"),se.push(nt);function Dt(){var zt=Mc(se,nt);I(zt>=0,"cannot cancel a frame twice");function On(){var Mo=Mc(se,On);se[Mo]=se[se.length-1],se.length-=1,se.length<=0&&jt()}se[zt]=On}return wt(),{cancel:Dt}}function ur(){var nt=Ce.viewport,Dt=Ce.scissor_box;nt[0]=nt[1]=Dt[0]=Dt[1]=0,ve.viewportWidth=ve.framebufferWidth=ve.drawingBufferWidth=nt[2]=Dt[2]=L.drawingBufferWidth,ve.viewportHeight=ve.framebufferHeight=ve.drawingBufferHeight=nt[3]=Dt[3]=L.drawingBufferHeight}function cr(){ve.tick+=1,ve.time=yt(),ur(),Qe.procs.poll()}function xn(){Ne.refresh(),ur(),Qe.procs.refresh(),xe&&xe.update()}function yt(){return(Xr()-de)/1e3}xn();function Tr(nt,Dt){I.type(Dt,"function","listener callback must be a function");var zt;switch(nt){case"frame":return Kn(Dt);case"lost":zt=st;break;case"restore":zt=gt;break;case"destroy":zt=Xe;break;default:I.raise("invalid event, must be one of frame,lost,restore,destroy")}return zt.push(Dt),{cancel:function(){for(var On=0;On<zt.length;++On)if(zt[On]===Dt){zt[On]=zt[zt.length-1],zt.pop();return}}}}var Kt=ne(Rt,{clear:Yn,prop:Dn.define.bind(null,Oc),context:Dn.define.bind(null,Jf),this:Dn.define.bind(null,Ld),draw:Rt({}),buffer:function(nt){return pe.create(nt,Cd,!1,!1)},elements:function(nt){return Fe.create(nt,!1)},texture:Ne.create2D,cube:Ne.createCube,renderbuffer:le.create,framebuffer:De.create,framebufferCube:De.createCube,vao:Oe.createVAO,attributes:Y,frame:Kn,on:Tr,limits:J,hasExtension:function(nt){return J.extensions.indexOf(nt.toLowerCase())>=0},read:lt,destroy:Lt,_gl:L,_refresh:xn,poll:function(){cr(),xe&&xe.update()},now:yt,stats:he});return w.onDone(null,Kt),Kt}return kc})},62657:function(at){function At(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},83136:function(at,At,ne){var re=ne(38836),on=ne(68919),Mt=ne(75254);function ot(Qt){var bt=on();return function(){var Tn=re(Qt),lr;if(bt){var Vt=re(this).constructor;lr=Reflect.construct(Tn,arguments,Vt)}else lr=Tn.apply(this,arguments);return Mt(this,lr)}}at.exports=ot,at.exports.__esModule=!0,at.exports.default=at.exports},38836:function(at){function At(ne){return at.exports=At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(on){return on.__proto__||Object.getPrototypeOf(on)},at.exports.__esModule=!0,at.exports.default=at.exports,At(ne)}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},21742:function(at,At,ne){var re=ne(80038);function on(Mt,ot){if(typeof ot!="function"&&ot!==null)throw new TypeError("Super expression must either be null or a function");Mt.prototype=Object.create(ot&&ot.prototype,{constructor:{value:Mt,writable:!0,configurable:!0}}),Object.defineProperty(Mt,"prototype",{writable:!1}),ot&&re(Mt,ot)}at.exports=on,at.exports.__esModule=!0,at.exports.default=at.exports},68919:function(at){function At(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ne){return!1}}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},75254:function(at,At,ne){var re=ne(31759).default,on=ne(62657);function Mt(ot,Qt){if(Qt&&(re(Qt)==="object"||typeof Qt=="function"))return Qt;if(Qt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return on(ot)}at.exports=Mt,at.exports.__esModule=!0,at.exports.default=at.exports},80038:function(at){function At(ne,re){return at.exports=At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Mt,ot){return Mt.__proto__=ot,Mt},at.exports.__esModule=!0,at.exports.default=at.exports,At(ne,re)}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},78816:function(at,At,ne){var re=ne(37313).default;function on(){"use strict";at.exports=on=function(){return ot},at.exports.__esModule=!0,at.exports.default=at.exports;var Mt,ot={},Qt=Object.prototype,bt=Qt.hasOwnProperty,_e=Object.defineProperty||function(Ve,Re,ke){Ve[Re]=ke.value},Tn=typeof Symbol=="function"?Symbol:{},lr=Tn.iterator||"@@iterator",Vt=Tn.asyncIterator||"@@asyncIterator",Qn=Tn.toStringTag||"@@toStringTag";function ut(Ve,Re,ke){return Object.defineProperty(Ve,Re,{value:ke,enumerable:!0,configurable:!0,writable:!0}),Ve[Re]}try{ut({},"")}catch(Ve){ut=function(ke,et,St){return ke[et]=St}}function Gn(Ve,Re,ke,et){var St=Re&&Re.prototype instanceof xo?Re:xo,vt=Object.create(St.prototype),In=new Yt(et||[]);return _e(vt,"_invoke",{value:tr(Ve,ke,In)}),vt}function _n(Ve,Re,ke){try{return{type:"normal",arg:Ve.call(Re,ke)}}catch(et){return{type:"throw",arg:et}}}ot.wrap=Gn;var Jn="suspendedStart",nn="suspendedYield",bo="executing",Pn="completed",wn={};function xo(){}function eo(){}function Ur(){}var vo={};ut(vo,lr,function(){return this});var Zo=Object.getPrototypeOf,_o=Zo&&Zo(Zo(Cr([])));_o&&_o!==Qt&&bt.call(_o,lr)&&(vo=_o);var it=Ur.prototype=xo.prototype=Object.create(vo);function Ar(Ve){["next","throw","return"].forEach(function(Re){ut(Ve,Re,function(ke){return this._invoke(Re,ke)})})}function er(Ve,Re){function ke(St,vt,In,nr){var rn=_n(Ve[St],Ve,vt);if(rn.type!=="throw"){var to=rn.arg,Lr=to.value;return Lr&&re(Lr)=="object"&&bt.call(Lr,"__await")?Re.resolve(Lr.__await).then(function($r){ke("next",$r,In,nr)},function($r){ke("throw",$r,In,nr)}):Re.resolve(Lr).then(function($r){to.value=$r,In(to)},function($r){return ke("throw",$r,In,nr)})}nr(rn.arg)}var et;_e(this,"_invoke",{value:function(vt,In){function nr(){return new Re(function(rn,to){ke(vt,In,rn,to)})}return et=et?et.then(nr,nr):nr()}})}function tr(Ve,Re,ke){var et=Jn;return function(St,vt){if(et===bo)throw Error("Generator is already running");if(et===Pn){if(St==="throw")throw vt;return{value:Mt,done:!0}}for(ke.method=St,ke.arg=vt;;){var In=ke.delegate;if(In){var nr=uo(In,ke);if(nr){if(nr===wn)continue;return nr}}if(ke.method==="next")ke.sent=ke._sent=ke.arg;else if(ke.method==="throw"){if(et===Jn)throw et=Pn,ke.arg;ke.dispatchException(ke.arg)}else ke.method==="return"&&ke.abrupt("return",ke.arg);et=bo;var rn=_n(Ve,Re,ke);if(rn.type==="normal"){if(et=ke.done?Pn:nn,rn.arg===wn)continue;return{value:rn.arg,done:ke.done}}rn.type==="throw"&&(et=Pn,ke.method="throw",ke.arg=rn.arg)}}}function uo(Ve,Re){var ke=Re.method,et=Ve.iterator[ke];if(et===Mt)return Re.delegate=null,ke==="throw"&&Ve.iterator.return&&(Re.method="return",Re.arg=Mt,uo(Ve,Re),Re.method==="throw")||ke!=="return"&&(Re.method="throw",Re.arg=new TypeError("The iterator does not provide a '"+ke+"' method")),wn;var St=_n(et,Ve.iterator,Re.arg);if(St.type==="throw")return Re.method="throw",Re.arg=St.arg,Re.delegate=null,wn;var vt=St.arg;return vt?vt.done?(Re[Ve.resultName]=vt.value,Re.next=Ve.nextLoc,Re.method!=="return"&&(Re.method="next",Re.arg=Mt),Re.delegate=null,wn):vt:(Re.method="throw",Re.arg=new TypeError("iterator result is not an object"),Re.delegate=null,wn)}function Vr(Ve){var Re={tryLoc:Ve[0]};1 in Ve&&(Re.catchLoc=Ve[1]),2 in Ve&&(Re.finallyLoc=Ve[2],Re.afterLoc=Ve[3]),this.tryEntries.push(Re)}function Nr(Ve){var Re=Ve.completion||{};Re.type="normal",delete Re.arg,Ve.completion=Re}function Yt(Ve){this.tryEntries=[{tryLoc:"root"}],Ve.forEach(Vr,this),this.reset(!0)}function Cr(Ve){if(Ve||Ve===""){var Re=Ve[lr];if(Re)return Re.call(Ve);if(typeof Ve.next=="function")return Ve;if(!isNaN(Ve.length)){var ke=-1,et=function St(){for(;++ke<Ve.length;)if(bt.call(Ve,ke))return St.value=Ve[ke],St.done=!1,St;return St.value=Mt,St.done=!0,St};return et.next=et}}throw new TypeError(re(Ve)+" is not iterable")}return eo.prototype=Ur,_e(it,"constructor",{value:Ur,configurable:!0}),_e(Ur,"constructor",{value:eo,configurable:!0}),eo.displayName=ut(Ur,Qn,"GeneratorFunction"),ot.isGeneratorFunction=function(Ve){var Re=typeof Ve=="function"&&Ve.constructor;return!!Re&&(Re===eo||(Re.displayName||Re.name)==="GeneratorFunction")},ot.mark=function(Ve){return Object.setPrototypeOf?Object.setPrototypeOf(Ve,Ur):(Ve.__proto__=Ur,ut(Ve,Qn,"GeneratorFunction")),Ve.prototype=Object.create(it),Ve},ot.awrap=function(Ve){return{__await:Ve}},Ar(er.prototype),ut(er.prototype,Vt,function(){return this}),ot.AsyncIterator=er,ot.async=function(Ve,Re,ke,et,St){St===void 0&&(St=Promise);var vt=new er(Gn(Ve,Re,ke,et),St);return ot.isGeneratorFunction(Re)?vt:vt.next().then(function(In){return In.done?In.value:vt.next()})},Ar(it),ut(it,Qn,"Generator"),ut(it,lr,function(){return this}),ut(it,"toString",function(){return"[object Generator]"}),ot.keys=function(Ve){var Re=Object(Ve),ke=[];for(var et in Re)ke.push(et);return ke.reverse(),function St(){for(;ke.length;){var vt=ke.pop();if(vt in Re)return St.value=vt,St.done=!1,St}return St.done=!0,St}},ot.values=Cr,Yt.prototype={constructor:Yt,reset:function(Re){if(this.prev=0,this.next=0,this.sent=this._sent=Mt,this.done=!1,this.delegate=null,this.method="next",this.arg=Mt,this.tryEntries.forEach(Nr),!Re)for(var ke in this)ke.charAt(0)==="t"&&bt.call(this,ke)&&!isNaN(+ke.slice(1))&&(this[ke]=Mt)},stop:function(){this.done=!0;var Re=this.tryEntries[0].completion;if(Re.type==="throw")throw Re.arg;return this.rval},dispatchException:function(Re){if(this.done)throw Re;var ke=this;function et(to,Lr){return In.type="throw",In.arg=Re,ke.next=to,Lr&&(ke.method="next",ke.arg=Mt),!!Lr}for(var St=this.tryEntries.length-1;St>=0;--St){var vt=this.tryEntries[St],In=vt.completion;if(vt.tryLoc==="root")return et("end");if(vt.tryLoc<=this.prev){var nr=bt.call(vt,"catchLoc"),rn=bt.call(vt,"finallyLoc");if(nr&&rn){if(this.prev<vt.catchLoc)return et(vt.catchLoc,!0);if(this.prev<vt.finallyLoc)return et(vt.finallyLoc)}else if(nr){if(this.prev<vt.catchLoc)return et(vt.catchLoc,!0)}else{if(!rn)throw Error("try statement without catch or finally");if(this.prev<vt.finallyLoc)return et(vt.finallyLoc)}}}},abrupt:function(Re,ke){for(var et=this.tryEntries.length-1;et>=0;--et){var St=this.tryEntries[et];if(St.tryLoc<=this.prev&&bt.call(St,"finallyLoc")&&this.prev<St.finallyLoc){var vt=St;break}}vt&&(Re==="break"||Re==="continue")&&vt.tryLoc<=ke&&ke<=vt.finallyLoc&&(vt=null);var In=vt?vt.completion:{};return In.type=Re,In.arg=ke,vt?(this.method="next",this.next=vt.finallyLoc,wn):this.complete(In)},complete:function(Re,ke){if(Re.type==="throw")throw Re.arg;return Re.type==="break"||Re.type==="continue"?this.next=Re.arg:Re.type==="return"?(this.rval=this.arg=Re.arg,this.method="return",this.next="end"):Re.type==="normal"&&ke&&(this.next=ke),wn},finish:function(Re){for(var ke=this.tryEntries.length-1;ke>=0;--ke){var et=this.tryEntries[ke];if(et.finallyLoc===Re)return this.complete(et.completion,et.afterLoc),Nr(et),wn}},catch:function(Re){for(var ke=this.tryEntries.length-1;ke>=0;--ke){var et=this.tryEntries[ke];if(et.tryLoc===Re){var St=et.completion;if(St.type==="throw"){var vt=St.arg;Nr(et)}return vt}}throw Error("illegal catch attempt")},delegateYield:function(Re,ke,et){return this.delegate={iterator:Cr(Re),resultName:ke,nextLoc:et},this.method==="next"&&(this.arg=Mt),wn}},ot}at.exports=on,at.exports.__esModule=!0,at.exports.default=at.exports},3702:function(at,At,ne){var re=ne(78816)();at.exports=re;try{regeneratorRuntime=re}catch(on){typeof globalThis=="object"?globalThis.regeneratorRuntime=re:Function("r","regeneratorRuntime = r")(re)}}}]);
