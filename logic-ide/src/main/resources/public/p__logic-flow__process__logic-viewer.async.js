"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4150],{71541:function(P,l,e){e.d(l,{Z:function(){return s}});var c=e(58709),t=e(87363),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},r=a,g=e(6481),i=function(_,D){return t.createElement(g.Z,(0,c.Z)({},_,{ref:D,icon:r}))},o=t.forwardRef(i),s=o},60860:function(P,l,e){e.d(l,{l:function(){return c.Z}});var c=e(7899)},42192:function(P,l,e){e.d(l,{n:function(){return u}});var c=e(26068),t=e.n(c),a=e(15451),r=e(12119),g=80,i=80,o={body:{fill:"#fff",stroke:"#8f8f8f",strokeWidth:1}},s=new Map;s.set("group",{shape:"rect",x:40,y:40,width:100,height:50,ports:a.Tt,attrs:{body:t()(t()({},o.body),{},{stroke:"black",strokeWidth:1,fillOpacity:0}),text:{text:"\u5DE5\u5E8F\u7EC4",refX:0,refY:10,"text-anchor":"start"}},data:{parent:!0}}),s.set("end",{shape:"circle",width:60,height:60,attrs:{body:t()(t()({},o.body),{},{fill:"gray"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:a.Tt,data:{configScheme:"end"}}),s.set("circle",{shape:"circle",width:60,height:60,attrs:{body:t()(t()({},o.body),{},{fill:"white"}),text:{text:""}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:a.Tt,data:{},groups:["process"]}),s.set("triangle",{shape:"path",x:40,y:40,width:g,height:60,path:"M3,45 C1.9,45 1,44.2 1,43.1 L29,2.9 C30.1,1.3 31.3,1 32.1,1 L32.1,1 C32.1,1 33.8,1.1 35.1,2.9 L63,43.1 C63,44.1 62.1,45 61,45 L3,45 L3,45 Z",attrs:{body:t()(t()({},o.body),{},{fill:"white"}),text:{text:"\u4E09\u89D2\u5F62",refY:50}},ports:a.Tt,data:{config:{}}}),s.set("triangle2",{shape:"path",x:40,y:40,width:g,height:60,path:"M3,1 C1.9,1 1,1.8 1,2.9 L29,43.1 C30.1,44.7 31.3,45 32.1,45 L32.1,45 C32.1,45 33.8,44.9 35.1,43.1 L63,2.9 C63,1.9 62.1,1 61,1 L3,1 L3,1 Z",attrs:{body:t()(t()({},o.body),{},{fill:"white"}),text:{text:"\u914D\u6599\u5DE5\u5E8F",refY:10}},ports:a.Tt,data:{config:{type:"process"}},groups:["process"]}),s.set("rhombus",{shape:"polygon",x:600,y:70,width:g,height:i,points:"0,10 10,0 20,10 10,20",attrs:{body:t()({},o.body),text:{text:"\u68C0\u9A8C\u5DE5\u5E8F"}},ports:a.Tt,data:{config:{type:"process"}},groups:["process"]}),s.set("ExtSharp",{shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{width:20,x:2,y:2}},ports:a.Tt});function u(_){return new r.Z(s.get(_))}},12119:function(P,l,e){e.d(l,{Z:function(){return o}});var c=e(25298),t=e.n(c),a=e(17069),r=e.n(a),g=e(82092),i=e.n(g),o=function(){function s(u){t()(this,s),i()(this,"_nodeConfig",void 0),i()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(u)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return r()(s,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(_){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=_)}},{key:"setGroups",value:function(_){this._groups=_}},{key:"setConfigSchemel",value:function(_){this._nodeConfig.data?(this._nodeConfig.data.configSchema=_,this._nodeConfig.data.config={type:_}):this._nodeConfig.data={configSchema:_,config:{type:_}}}},{key:"setConfigData",value:function(_){this._nodeConfig.data?this._nodeConfig.data.config=_:this._nodeConfig.data={config:_}}}]),s}()},92176:function(P,l,e){e.r(l);var c=e(48305),t=e.n(c),a=e(60860),r=e(77154),g=e(58523),i=e(90171),o=e(82494),s=e(87363),u=e.n(s),_=e(9413),D=e(91505),C=e(1756),y=e(42891),p=e(42192),n=e(62086),b=new y.e,S=function(){var M=(0,s.useState)({}),k=t()(M,2),te=k[0],N=k[1],Z=(0,s.useState)({}),I=t()(Z,2),G=I[0],F=I[1],J=(0,s.useState)(!1),B=t()(J,2),z=B[0],R=B[1],H=(0,_.lr)(),j=t()(H,2),f=j[0],se=j[1],Y=(0,s.useState)("1"),W=t()(Y,2),T=W[0],ne=W[1],$=(0,s.useState)(),K=t()($,2),V=K[0],_e=K[1],X=(0,s.useState)([]),w=t()(X,2),oe=w[0],Q=w[1];(0,s.useEffect)(function(){R(!0),b.getRouteProcessDesign(f.get("prodCode"),f.get("version")).then(function(x){var m=JSON.parse(x.data);m.result&&(N(m.result),F(m.result.graphData?JSON.parse(m.result.graphData):{})),R(!1)}).catch(function(x){R(!1),console.log("err"),console.log(x)});var E=[],h=(0,p.n)("circle");debugger;h==null||h.setConfigSchemel("start"),h==null||h.setConfigData({name:"start"}),h==null||h.setLabel("start"),h.setGroups(["def"]),E.push(h);var v=(0,p.n)("circle");v==null||v.setConfigSchemel("end"),v==null||v.setLabel("end"),v==null||v.setGroups(["def"]),E.push(v),(0,C.O)().then(function(x){console.log("\u62C9\u53D6\u5927\u7C7B\u6570\u636E"),console.log(x),x.data.forEach(function(U){var A,d;switch(U.key){case"PROCESS_GROUP":d=(0,p.n)("circle"),d.setConfigSchemel("process");break;case"CHECK_GROUP":d=(0,p.n)("rhombus"),d.setConfigSchemel("process");break;case"WAIT_GROUP":d=(0,p.n)("triangle"),d.setConfigSchemel("process");break;case"PICK_GROUP":d=(0,p.n)("triangle2"),d.setConfigSchemel("process");break;default:d=(0,p.n)("ExtSharp"),d.setConfigSchemel("process");break}(A=d)===null||A===void 0||A.setConfigData(U),d.setLabel(U.text),d.setGroups(["process"]);var ee=d;E.push(ee)});var m=(0,p.n)("group");m==null||m.setLabel("\u5DE5\u5E8F\u7EC4"),m==null||m.setConfigSchemel("process-group"),m.setGroups(["process"]),E.push(m),console.log("cusNodes"),console.log(E),Q(E)})},[]);var ae=(0,s.useCallback)(function(){return new D.bn.kS({attrs:{line:{targetMarker:"classic",stroke:T=="1"?"black":"red"}},tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0,data:{type:T}})},[T]),L=r.Z.Text,q=function(){return(0,n.jsxs)(g.Z,{style:{height:"50px",marginLeft:"20px"},children:[(0,n.jsx)(r.Z,{children:"\u4EA7\u54C1\u7F16\u7801"}),(0,n.jsx)(L,{underline:!0,children:f==null?void 0:f.get("prodCode")}),(0,n.jsx)(i.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u4EA7\u54C1\u540D\u79F0"}),(0,n.jsx)(L,{underline:!0,children:f==null?void 0:f.get("prodName")}),(0,n.jsx)(i.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u5BA2\u6237\u6599\u53F7"}),(0,n.jsx)(L,{underline:!0,children:f.get("cusCode")}),(0,n.jsx)(i.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u7248\u672C\u53F7"}),(0,n.jsx)(L,{underline:!0,children:f.get("version")}),(0,n.jsx)(i.Z,{type:"vertical"}),(0,n.jsx)("span",{children:" \u7EBF\u7C7B\u578B\uFF1A"}),(0,n.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#000000"},children:"\u52A0\u5DE5\u7EBF"}),(0,n.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#FF9900"},children:"\u8FD4\u5DE5\u7EBF"})]})};return(0,n.jsxs)("div",{children:[(0,n.jsx)(q,{}),(0,n.jsx)(o.Z,{spinning:z,children:(0,n.jsx)(a.l,{showLeft:!1,graphIns:V,isStatic:!0,graphJson:G})})]})};l.default=S},42891:function(P,l,e){e.d(l,{e:function(){return D}});var c=e(90228),t=e.n(c),a=e(87999),r=e.n(a),g=e(25298),i=e.n(g),o=e(17069),s=e.n(o),u=e(950),_=new u.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),D=function(){function C(){i()(this,C)}return s()(C,[{key:"updateRouteProcessDesign",value:function(){var y=r()(t()().mark(function n(b){return t()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",_.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify(b)));case 1:case"end":return O.stop()}},n)}));function p(n){return y.apply(this,arguments)}return p}()},{key:"getRouteProcessDesign",value:function(){var y=r()(t()().mark(function n(b,S){return t()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",_.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:S,productCode:b})));case 1:case"end":return M.stop()}},n)}));function p(n,b){return y.apply(this,arguments)}return p}()}]),C}()},1756:function(P,l,e){e.d(l,{O:function(){return i}});var c=e(90228),t=e.n(c),a=e(87999),r=e.n(a),g=e(950);function i(){return o.apply(this,arguments)}function o(){return o=r()(t()().mark(function s(){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,g.Z)("/api/mes/asm-system/bbs/v1/common/dictionaries/list",{method:"post",data:{applicationCode:"bbs",dictionaryCategoryCode:"GROUP-TYPES",isEnabled:!0}}).then(function(D){if(D.data){var C=D.data;return C}else return[]}));case 1:case"end":return _.stop()}},s)})),o.apply(this,arguments)}}}]);
