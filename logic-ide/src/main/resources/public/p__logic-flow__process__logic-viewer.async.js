"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4150],{72197:function(X,h,t){t.d(h,{Z:function(){return te}});var i=t(87363),n=t(84875),d=t.n(n),m=t(35822);function E(e,a,_){var s=_||{},c=s.noTrailing,S=c===void 0?!1:c,I=s.noLeading,N=I===void 0?!1:I,f=s.debounceMode,U=f===void 0?void 0:f,b,w=!1,R=0;function A(){b&&clearTimeout(b)}function J(z){var y=z||{},P=y.upcomingOnly,W=P===void 0?!1:P;A(),w=!W}function B(){for(var z=arguments.length,y=new Array(z),P=0;P<z;P++)y[P]=arguments[P];var W=this,Y=Date.now()-R;if(w)return;function K(){R=Date.now(),a.apply(W,y)}function V(){b=void 0}!N&&U&&!b&&K(),A(),U===void 0&&Y>e?N?(R=Date.now(),S||(b=setTimeout(U?V:K,e))):K():S!==!0&&(b=setTimeout(U?V:K,U===void 0?e-Y:e))}return B.cancel=J,B}function g(e,a,_){var s=_||{},c=s.atBegin,S=c===void 0?!1:c;return E(e,a,{debounceMode:S!==!1})}var u=t(71594),o=t(88596),p=t(27183),l=t(91918),j=t(79987),L=t(48826);const G=new p.E4("antSpinMove",{to:{opacity:1}}),v=new p.E4("antRotate",{to:{transform:"rotate(405deg)"}}),r=e=>({[`${e.componentCls}`]:Object.assign(Object.assign({},(0,l.Wf)(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${e.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${e.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-e.dotSize/2},[`${e.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(e.dotSize-e.fontSize)/2+2,textShadow:`0 1px 2px ${e.colorBgContainer}`,fontSize:e.fontSize},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSize/2)-10},"&-sm":{[`${e.componentCls}-dot`]:{margin:-e.dotSizeSM/2},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeSM-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeSM/2)-10}},"&-lg":{[`${e.componentCls}-dot`]:{margin:-(e.dotSizeLG/2)},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeLG-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeLG/2)-10}}},[`${e.componentCls}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none",["&::after"]:{opacity:.4,pointerEvents:"auto"}}},["&-tip"]:{color:e.spinDotDefault},[`${e.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(e.dotSize-e.marginXXS/2)/2,height:(e.dotSize-e.marginXXS/2)/2,backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:G,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:v,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${e.componentCls}-dot`]:{fontSize:e.dotSizeSM,i:{width:(e.dotSizeSM-e.marginXXS/2)/2,height:(e.dotSizeSM-e.marginXXS/2)/2}},[`&-lg ${e.componentCls}-dot`]:{fontSize:e.dotSizeLG,i:{width:(e.dotSizeLG-e.marginXXS)/2,height:(e.dotSizeLG-e.marginXXS)/2}},[`&${e.componentCls}-show-text ${e.componentCls}-text`]:{display:"block"}})});var $=(0,j.Z)("Spin",e=>{const a=(0,L.TS)(e,{spinDotDefault:e.colorTextDescription});return[r(a)]},e=>({contentHeight:400,dotSize:e.controlHeightLG/2,dotSizeSM:e.controlHeightLG*.35,dotSizeLG:e.controlHeight})),H=function(e,a){var _={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&a.indexOf(s)<0&&(_[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)a.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(_[s[c]]=e[s[c]]);return _};const Z=null;let x=null;function q(e,a){const{indicator:_}=a,s=`${e}-dot`;return _===null?null:(0,u.l$)(_)?(0,u.Tm)(_,{className:d()(_.props.className,s)}):(0,u.l$)(x)?(0,u.Tm)(x,{className:d()(x.props.className,s)}):i.createElement("span",{className:d()(s,`${e}-dot-spin`)},i.createElement("i",{className:`${e}-dot-item`,key:1}),i.createElement("i",{className:`${e}-dot-item`,key:2}),i.createElement("i",{className:`${e}-dot-item`,key:3}),i.createElement("i",{className:`${e}-dot-item`,key:4}))}function ae(e,a){return!!e&&!!a&&!isNaN(Number(a))}const ne=e=>{const{spinPrefixCls:a,spinning:_=!0,delay:s=0,className:c,rootClassName:S,size:I="default",tip:N,wrapperClassName:f,style:U,children:b,hashId:w}=e,R=H(e,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[A,J]=i.useState(()=>_&&!ae(_,s));i.useEffect(()=>{if(_){const M=g(s,()=>{J(!0)});return M(),()=>{var k;(k=M==null?void 0:M.cancel)===null||k===void 0||k.call(M)}}J(!1)},[s,_]);const B=i.useMemo(()=>typeof b!="undefined",[b]),{direction:z,spin:y}=i.useContext(o.E_),P=d()(a,y==null?void 0:y.className,{[`${a}-sm`]:I==="small",[`${a}-lg`]:I==="large",[`${a}-spinning`]:A,[`${a}-show-text`]:!!N,[`${a}-rtl`]:z==="rtl"},c,S,w),W=d()(`${a}-container`,{[`${a}-blur`]:A}),Y=(0,m.Z)(R,["indicator","prefixCls"]),K=Object.assign(Object.assign({},y==null?void 0:y.style),U),V=i.createElement("div",Object.assign({},Y,{style:K,className:P,"aria-live":"polite","aria-busy":A}),q(a,e),N&&B?i.createElement("div",{className:`${a}-text`},N):null);return B?i.createElement("div",Object.assign({},Y,{className:d()(`${a}-nested-loading`,f,w)}),A&&i.createElement("div",{key:"loading"},V),i.createElement("div",{className:W,key:"container"},b)):V},ee=e=>{const{prefixCls:a}=e,{getPrefixCls:_}=i.useContext(o.E_),s=_("spin",a),[c,S]=$(s),I=Object.assign(Object.assign({},e),{spinPrefixCls:s,hashId:S});return c(i.createElement(ne,Object.assign({},I)))};ee.setDefaultIndicator=e=>{x=e};var te=ee},60341:function(X,h,t){t.d(h,{l:function(){return i.Z}});var i=t(93797)},2008:function(X,h,t){t.d(h,{n:function(){return p}});var i=t(57213),n=t.n(i),d=t(12490),m=t(42651),E=80,g=80,u={body:{fill:"#fff",stroke:"#8f8f8f",strokeWidth:1}},o=new Map;o.set("group",{shape:"rect",x:40,y:40,width:100,height:50,ports:d.Tt,attrs:{body:n()(n()({},u.body),{},{stroke:"black",strokeWidth:1,fillOpacity:0}),text:{text:"\u5DE5\u5E8F\u7EC4",refX:0,refY:10,"text-anchor":"start"}},data:{parent:!0}}),o.set("end",{shape:"circle",width:60,height:60,attrs:{body:n()(n()({},u.body),{},{fill:"gray"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:d.Tt,data:{configScheme:"end"}}),o.set("circle",{shape:"circle",width:60,height:60,attrs:{body:n()(n()({},u.body),{},{fill:"white"}),text:{text:""}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:d.Tt,data:{},groups:["process"]}),o.set("triangle",{shape:"path",x:40,y:40,width:E,height:60,path:"M3,45 C1.9,45 1,44.2 1,43.1 L29,2.9 C30.1,1.3 31.3,1 32.1,1 L32.1,1 C32.1,1 33.8,1.1 35.1,2.9 L63,43.1 C63,44.1 62.1,45 61,45 L3,45 L3,45 Z",attrs:{body:n()(n()({},u.body),{},{fill:"white"}),text:{text:"\u4E09\u89D2\u5F62",refY:50}},ports:d.Tt,data:{config:{}}}),o.set("triangle2",{shape:"path",x:40,y:40,width:E,height:60,path:"M3,1 C1.9,1 1,1.8 1,2.9 L29,43.1 C30.1,44.7 31.3,45 32.1,45 L32.1,45 C32.1,45 33.8,44.9 35.1,43.1 L63,2.9 C63,1.9 62.1,1 61,1 L3,1 L3,1 Z",attrs:{body:n()(n()({},u.body),{},{fill:"white"}),text:{text:"\u914D\u6599\u5DE5\u5E8F",refY:10}},ports:d.Tt,data:{config:{type:"process"}},groups:["process"]}),o.set("rhombus",{shape:"polygon",x:600,y:70,width:E,height:g,points:"0,10 10,0 20,10 10,20",attrs:{body:n()({},u.body),text:{text:"\u68C0\u9A8C\u5DE5\u5E8F"}},ports:d.Tt,data:{config:{type:"process"}},groups:["process"]}),o.set("ExtSharp",{shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{width:20,x:2,y:2}},ports:d.Tt});function p(l){return new m.Z(o.get(l))}},42651:function(X,h,t){t.d(h,{Z:function(){return u}});var i=t(21140),n=t.n(i),d=t(63466),m=t.n(d),E=t(52510),g=t.n(E),u=function(){function o(p){n()(this,o),g()(this,"_nodeConfig",void 0),g()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(p)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return m()(o,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(l){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=l)}},{key:"setGroups",value:function(l){this._groups=l}},{key:"setConfigSchemel",value:function(l){this._nodeConfig.data?(this._nodeConfig.data.configSchema=l,this._nodeConfig.data.config={type:l}):this._nodeConfig.data={configSchema:l,config:{type:l}}}},{key:"setConfigData",value:function(l){this._nodeConfig.data?this._nodeConfig.data.config=l:this._nodeConfig.data={config:l}}}]),o}()},71353:function(X,h,t){t.r(h);var i=t(54306),n=t.n(i),d=t(60341),m=t(36267),E=t(4283),g=t(8051),u=t(72197),o=t(87363),p=t.n(o),l=t(98306),j=t(5671),L=t(25590),G=t(82628),v=t(2008),r=t(33130),$=new G.e,H=function(){var x=(0,o.useState)({}),q=n()(x,2),ae=q[0],ne=q[1],ee=(0,o.useState)({}),te=n()(ee,2),e=te[0],a=te[1],_=(0,o.useState)(!1),s=n()(_,2),c=s[0],S=s[1],I=(0,l.lr)(),N=n()(I,2),f=N[0],U=N[1],b=(0,o.useState)("1"),w=n()(b,2),R=w[0],A=w[1],J=(0,o.useState)(),B=n()(J,2),z=B[0],y=B[1],P=(0,o.useState)([]),W=n()(P,2),Y=W[0],K=W[1];(0,o.useEffect)(function(){S(!0),$.getRouteProcessDesign(f.get("prodCode"),f.get("version")).then(function(Q){var D=JSON.parse(Q.data);D.result&&(ne(D.result),a(D.result.graphData?JSON.parse(D.result.graphData):{})),S(!1)}).catch(function(Q){S(!1),console.log("err"),console.log(Q)});var F=[],O=(0,v.n)("circle");debugger;O==null||O.setConfigSchemel("start"),O==null||O.setConfigData({name:"start"}),O==null||O.setLabel("start"),O.setGroups(["def"]),F.push(O);var T=(0,v.n)("circle");T==null||T.setConfigSchemel("end"),T==null||T.setLabel("end"),T==null||T.setGroups(["def"]),F.push(T),(0,L.O)().then(function(Q){console.log("\u62C9\u53D6\u5927\u7C7B\u6570\u636E"),console.log(Q),Q.data.forEach(function(se){var oe,C;switch(se.key){case"PROCESS_GROUP":C=(0,v.n)("circle"),C.setConfigSchemel("process");break;case"CHECK_GROUP":C=(0,v.n)("rhombus"),C.setConfigSchemel("process");break;case"WAIT_GROUP":C=(0,v.n)("triangle"),C.setConfigSchemel("process");break;case"PICK_GROUP":C=(0,v.n)("triangle2"),C.setConfigSchemel("process");break;default:C=(0,v.n)("ExtSharp"),C.setConfigSchemel("process");break}(oe=C)===null||oe===void 0||oe.setConfigData(se),C.setLabel(se.text),C.setGroups(["process"]);var ie=C;F.push(ie)});var D=(0,v.n)("group");D==null||D.setLabel("\u5DE5\u5E8F\u7EC4"),D==null||D.setConfigSchemel("process-group"),D.setGroups(["process"]),F.push(D),console.log("cusNodes"),console.log(F),K(F)})},[]);var V=(0,o.useCallback)(function(){return new j.bn.kS({attrs:{line:{targetMarker:"classic",stroke:R=="1"?"black":"red"}},tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0,data:{type:R}})},[R]),M=m.Z.Text,k=function(){return(0,r.jsxs)(E.Z,{style:{height:"50px",marginLeft:"20px"},children:[(0,r.jsx)(m.Z,{children:"\u4EA7\u54C1\u7F16\u7801"}),(0,r.jsx)(M,{underline:!0,children:f==null?void 0:f.get("prodCode")}),(0,r.jsx)(g.Z,{type:"vertical"}),(0,r.jsx)(m.Z,{children:"\u4EA7\u54C1\u540D\u79F0"}),(0,r.jsx)(M,{underline:!0,children:f==null?void 0:f.get("prodName")}),(0,r.jsx)(g.Z,{type:"vertical"}),(0,r.jsx)(m.Z,{children:"\u5BA2\u6237\u6599\u53F7"}),(0,r.jsx)(M,{underline:!0,children:f.get("cusCode")}),(0,r.jsx)(g.Z,{type:"vertical"}),(0,r.jsx)(m.Z,{children:"\u7248\u672C\u53F7"}),(0,r.jsx)(M,{underline:!0,children:f.get("version")}),(0,r.jsx)(g.Z,{type:"vertical"}),(0,r.jsx)("span",{children:" \u7EBF\u7C7B\u578B\uFF1A"}),(0,r.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#000000"},children:"\u52A0\u5DE5\u7EBF"}),(0,r.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#FF9900"},children:"\u8FD4\u5DE5\u7EBF"})]})};return(0,r.jsxs)("div",{children:[(0,r.jsx)(k,{}),(0,r.jsx)(u.Z,{spinning:c,children:(0,r.jsx)(d.l,{showLeft:!1,graphIns:z,isStatic:!0,graphJson:e})})]})};h.default=H},82628:function(X,h,t){t.d(h,{e:function(){return j}});var i=t(25359),n=t.n(i),d=t(49811),m=t.n(d),E=t(21140),g=t.n(E),u=t(63466),o=t.n(u),p=t(70517),l=new p.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),j=function(){function L(){g()(this,L)}return o()(L,[{key:"updateRouteProcessDesign",value:function(){var G=m()(n()().mark(function r($){return n()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",l.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify($)));case 1:case"end":return Z.stop()}},r)}));function v(r){return G.apply(this,arguments)}return v}()},{key:"getRouteProcessDesign",value:function(){var G=m()(n()().mark(function r($,H){return n()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",l.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:H,productCode:$})));case 1:case"end":return x.stop()}},r)}));function v(r,$){return G.apply(this,arguments)}return v}()}]),L}()},25590:function(X,h,t){t.d(h,{O:function(){return g}});var i=t(25359),n=t.n(i),d=t(49811),m=t.n(d),E=t(70517);function g(){return u.apply(this,arguments)}function u(){return u=m()(n()().mark(function o(){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.Z)("/api/mes/asm-system/bbs/v1/common/dictionaries/list",{method:"post",data:{applicationCode:"bbs",dictionaryCategoryCode:"GROUP-TYPES",isEnabled:!0}}).then(function(j){if(j.data){var L=j.data;return L}else return[]}));case 1:case"end":return l.stop()}},o)})),u.apply(this,arguments)}}}]);
