"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4150],{75079:function(C,l,e){e.d(l,{m:function(){return _}});const a=()=>({height:0,opacity:0}),n=t=>{const{scrollHeight:s}=t;return{height:s,opacity:1}},u=t=>({height:t?t.offsetHeight:0}),o=(t,s)=>(s==null?void 0:s.deadline)===!0||s.propertyName==="height",d=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:a,onEnterStart:a,onAppearActive:n,onEnterActive:n,onLeaveStart:u,onLeaveActive:a,onAppearEnd:o,onEnterEnd:o,onLeaveEnd:o,motionDeadline:500}},c=null,_=(t,s,r)=>r!==void 0?r:`${t}-${s}`;l.Z=d},92599:function(C,l,e){e.d(l,{R:function(){return u}});const a=o=>({animationDuration:o,animationFillMode:"both"}),n=o=>({animationDuration:o,animationFillMode:"both"}),u=function(o,d,c,_){const s=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${s}${o}-enter,
      ${s}${o}-appear
    `]:Object.assign(Object.assign({},a(_)),{animationPlayState:"paused"}),[`${s}${o}-leave`]:Object.assign(Object.assign({},n(_)),{animationPlayState:"paused"}),[`
      ${s}${o}-enter${o}-enter-active,
      ${s}${o}-appear${o}-appear-active
    `]:{animationName:d,animationPlayState:"running"},[`${s}${o}-leave${o}-leave-active`]:{animationName:c,animationPlayState:"running",pointerEvents:"none"}}}},93029:function(C,l,e){e.d(l,{_y:function(){return P},kr:function(){return u}});var a=e(27183),n=e(92599);const u=new a.E4("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),o=new a.E4("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),d=new a.E4("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),c=new a.E4("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),_=new a.E4("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),t=new a.E4("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),s=new a.E4("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),r=new a.E4("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),y=new a.E4("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),O=new a.E4("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),M=new a.E4("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),m=new a.E4("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),i={zoom:{inKeyframes:u,outKeyframes:o},"zoom-big":{inKeyframes:d,outKeyframes:c},"zoom-big-fast":{inKeyframes:d,outKeyframes:c},"zoom-left":{inKeyframes:s,outKeyframes:r},"zoom-right":{inKeyframes:y,outKeyframes:O},"zoom-up":{inKeyframes:_,outKeyframes:t},"zoom-down":{inKeyframes:M,outKeyframes:m}},P=(h,v)=>{const{antCls:b}=h,x=`${b}-${v}`,{inKeyframes:w,outKeyframes:T}=i[v];return[(0,n.R)(x,w,T,v==="zoom-big-fast"?h.motionDurationFast:h.motionDurationMid),{[`
        ${x}-enter,
        ${x}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:h.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${x}-leave`]:{animationTimingFunction:h.motionEaseInOutCirc}}]}},60341:function(C,l,e){e.d(l,{l:function(){return a.Z}});var a=e(93797)},2008:function(C,l,e){e.d(l,{n:function(){return s}});var a=e(57213),n=e.n(a),u=e(12490),o=e(42651),d=80,c=80,_={body:{fill:"#fff",stroke:"#8f8f8f",strokeWidth:1}},t=new Map;t.set("group",{shape:"rect",x:40,y:40,width:100,height:50,ports:u.Tt,attrs:{body:n()(n()({},_.body),{},{stroke:"black",strokeWidth:1,fillOpacity:0}),text:{text:"\u5DE5\u5E8F\u7EC4",refX:0,refY:10,"text-anchor":"start"}},data:{parent:!0}}),t.set("end",{shape:"circle",width:60,height:60,attrs:{body:n()(n()({},_.body),{},{fill:"gray"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:u.Tt,data:{configScheme:"end"}}),t.set("circle",{shape:"circle",width:60,height:60,attrs:{body:n()(n()({},_.body),{},{fill:"white"}),text:{text:""}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:u.Tt,data:{},groups:["process"]}),t.set("triangle",{shape:"path",x:40,y:40,width:d,height:60,path:"M3,45 C1.9,45 1,44.2 1,43.1 L29,2.9 C30.1,1.3 31.3,1 32.1,1 L32.1,1 C32.1,1 33.8,1.1 35.1,2.9 L63,43.1 C63,44.1 62.1,45 61,45 L3,45 L3,45 Z",attrs:{body:n()(n()({},_.body),{},{fill:"white"}),text:{text:"\u4E09\u89D2\u5F62",refY:50}},ports:u.Tt,data:{config:{}}}),t.set("triangle2",{shape:"path",x:40,y:40,width:d,height:60,path:"M3,1 C1.9,1 1,1.8 1,2.9 L29,43.1 C30.1,44.7 31.3,45 32.1,45 L32.1,45 C32.1,45 33.8,44.9 35.1,43.1 L63,2.9 C63,1.9 62.1,1 61,1 L3,1 L3,1 Z",attrs:{body:n()(n()({},_.body),{},{fill:"white"}),text:{text:"\u914D\u6599\u5DE5\u5E8F",refY:10}},ports:u.Tt,data:{config:{type:"process"}},groups:["process"]}),t.set("rhombus",{shape:"polygon",x:600,y:70,width:d,height:c,points:"0,10 10,0 20,10 10,20",attrs:{body:n()({},_.body),text:{text:"\u68C0\u9A8C\u5DE5\u5E8F"}},ports:u.Tt,data:{config:{type:"process"}},groups:["process"]}),t.set("ExtSharp",{shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{width:20,x:2,y:2}},ports:u.Tt});function s(r){return new o.Z(t.get(r))}},42651:function(C,l,e){e.d(l,{Z:function(){return _}});var a=e(21140),n=e.n(a),u=e(63466),o=e.n(u),d=e(52510),c=e.n(d),_=function(){function t(s){n()(this,t),c()(this,"_nodeConfig",void 0),c()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(s)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return o()(t,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(r){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=r)}},{key:"setGroups",value:function(r){this._groups=r}},{key:"setConfigSchemel",value:function(r){this._nodeConfig.data?(this._nodeConfig.data.configSchema=r,this._nodeConfig.data.config={type:r}):this._nodeConfig.data={configSchema:r,config:{type:r}}}},{key:"setConfigData",value:function(r){this._nodeConfig.data?this._nodeConfig.data.config=r:this._nodeConfig.data={config:r}}}]),t}()},71353:function(C,l,e){e.r(l);var a=e(54306),n=e.n(a),u=e(60341),o=e(36267),d=e(4283),c=e(8051),_=e(72197),t=e(87363),s=e.n(t),r=e(98306),y=e(5671),O=e(25590),M=e(82628),m=e(2008),i=e(33130),P=new M.e,h=function(){var b=(0,t.useState)({}),x=n()(b,2),w=x[0],T=x[1],z=(0,t.useState)({}),B=n()(z,2),k=B[0],G=B[1],F=(0,t.useState)(!1),j=n()(F,2),J=j[0],U=j[1],H=(0,r.lr)(),W=n()(H,2),E=W[0],ne=W[1],Y=(0,t.useState)("1"),Z=n()(Y,2),I=Z[0],oe=Z[1],V=(0,t.useState)(),N=n()(V,2),X=N[0],se=N[1],Q=(0,t.useState)([]),$=n()(Q,2),ae=$[0],q=$[1];(0,t.useEffect)(function(){U(!0),P.getRouteProcessDesign(E.get("prodCode"),E.get("version")).then(function(S){var f=JSON.parse(S.data);f.result&&(T(f.result),G(f.result.graphData?JSON.parse(f.result.graphData):{})),U(!1)}).catch(function(S){U(!1),console.log("err"),console.log(S)});var L=[],p=(0,m.n)("circle");debugger;p==null||p.setConfigSchemel("start"),p==null||p.setConfigData({name:"start"}),p==null||p.setLabel("start"),p.setGroups(["def"]),L.push(p);var D=(0,m.n)("circle");D==null||D.setConfigSchemel("end"),D==null||D.setLabel("end"),D==null||D.setGroups(["def"]),L.push(D),(0,O.O)().then(function(S){console.log("\u62C9\u53D6\u5927\u7C7B\u6570\u636E"),console.log(S),S.data.forEach(function(A){var K,g;switch(A.key){case"PROCESS_GROUP":g=(0,m.n)("circle"),g.setConfigSchemel("process");break;case"CHECK_GROUP":g=(0,m.n)("rhombus"),g.setConfigSchemel("process");break;case"WAIT_GROUP":g=(0,m.n)("triangle"),g.setConfigSchemel("process");break;case"PICK_GROUP":g=(0,m.n)("triangle2"),g.setConfigSchemel("process");break;default:g=(0,m.n)("ExtSharp"),g.setConfigSchemel("process");break}(K=g)===null||K===void 0||K.setConfigData(A),g.setLabel(A.text),g.setGroups(["process"]);var te=g;L.push(te)});var f=(0,m.n)("group");f==null||f.setLabel("\u5DE5\u5E8F\u7EC4"),f==null||f.setConfigSchemel("process-group"),f.setGroups(["process"]),L.push(f),console.log("cusNodes"),console.log(L),q(L)})},[]);var re=(0,t.useCallback)(function(){return new y.bn.kS({attrs:{line:{targetMarker:"classic",stroke:I=="1"?"black":"red"}},tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0,data:{type:I}})},[I]),R=o.Z.Text,ee=function(){return(0,i.jsxs)(d.Z,{style:{height:"50px",marginLeft:"20px"},children:[(0,i.jsx)(o.Z,{children:"\u4EA7\u54C1\u7F16\u7801"}),(0,i.jsx)(R,{underline:!0,children:E==null?void 0:E.get("prodCode")}),(0,i.jsx)(c.Z,{type:"vertical"}),(0,i.jsx)(o.Z,{children:"\u4EA7\u54C1\u540D\u79F0"}),(0,i.jsx)(R,{underline:!0,children:E==null?void 0:E.get("prodName")}),(0,i.jsx)(c.Z,{type:"vertical"}),(0,i.jsx)(o.Z,{children:"\u5BA2\u6237\u6599\u53F7"}),(0,i.jsx)(R,{underline:!0,children:E.get("cusCode")}),(0,i.jsx)(c.Z,{type:"vertical"}),(0,i.jsx)(o.Z,{children:"\u7248\u672C\u53F7"}),(0,i.jsx)(R,{underline:!0,children:E.get("version")}),(0,i.jsx)(c.Z,{type:"vertical"}),(0,i.jsx)("span",{children:" \u7EBF\u7C7B\u578B\uFF1A"}),(0,i.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#000000"},children:"\u52A0\u5DE5\u7EBF"}),(0,i.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#FF9900"},children:"\u8FD4\u5DE5\u7EBF"})]})};return(0,i.jsxs)("div",{children:[(0,i.jsx)(ee,{}),(0,i.jsx)(_.Z,{spinning:J,children:(0,i.jsx)(u.l,{showLeft:!1,graphIns:X,isStatic:!0,graphJson:k})})]})};l.default=h},82628:function(C,l,e){e.d(l,{e:function(){return y}});var a=e(25359),n=e.n(a),u=e(49811),o=e.n(u),d=e(21140),c=e.n(d),_=e(63466),t=e.n(_),s=e(70517),r=new s.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),y=function(){function O(){c()(this,O)}return t()(O,[{key:"updateRouteProcessDesign",value:function(){var M=o()(n()().mark(function i(P){return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",r.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify(P)));case 1:case"end":return v.stop()}},i)}));function m(i){return M.apply(this,arguments)}return m}()},{key:"getRouteProcessDesign",value:function(){var M=o()(n()().mark(function i(P,h){return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",r.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:h,productCode:P})));case 1:case"end":return b.stop()}},i)}));function m(i,P){return M.apply(this,arguments)}return m}()}]),O}()},25590:function(C,l,e){e.d(l,{O:function(){return c}});var a=e(25359),n=e.n(a),u=e(49811),o=e.n(u),d=e(70517);function c(){return _.apply(this,arguments)}function _(){return _=o()(n()().mark(function t(){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.Z)("/api/mes/asm-system/bbs/v1/common/dictionaries/list",{method:"post",data:{applicationCode:"bbs",dictionaryCategoryCode:"GROUP-TYPES",isEnabled:!0}}).then(function(y){if(y.data){var O=y.data;return O}else return[]}));case 1:case"end":return r.stop()}},t)})),_.apply(this,arguments)}}}]);
