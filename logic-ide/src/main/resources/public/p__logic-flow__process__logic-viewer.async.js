"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4150],{39525:function(G,f,t){t.d(f,{Z:function(){return u}});var s=t(56920),n=t(87363),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},_=d,h=t(9462),p=function(m,l){return n.createElement(h.Z,(0,s.Z)({},m,{ref:l,icon:_}))},u=n.forwardRef(p)},72197:function(G,f,t){t.d(f,{Z:function(){return te}});var s=t(87363),n=t(84875),d=t.n(n),_=t(35822);function h(e,i,c){var a=c||{},g=a.noTrailing,S=g===void 0?!1:g,I=a.noLeading,N=I===void 0?!1:I,v=a.debounceMode,U=v===void 0?void 0:v,b,w=!1,R=0;function A(){b&&clearTimeout(b)}function J(z){var x=z||{},O=x.upcomingOnly,W=O===void 0?!1:O;A(),w=!W}function B(){for(var z=arguments.length,x=new Array(z),O=0;O<z;O++)x[O]=arguments[O];var W=this,Y=Date.now()-R;if(w)return;function K(){R=Date.now(),i.apply(W,x)}function V(){b=void 0}!N&&U&&!b&&K(),A(),U===void 0&&Y>e?N?(R=Date.now(),S||(b=setTimeout(U?V:K,e))):K():S!==!0&&(b=setTimeout(U?V:K,U===void 0?e-Y:e))}return B.cancel=J,B}function p(e,i,c){var a=c||{},g=a.atBegin,S=g===void 0?!1:g;return h(e,i,{debounceMode:S!==!1})}var u=t(71594),o=t(88596),m=t(27183),l=t(91918),j=t(79987),L=t(48826);const Z=new m.E4("antSpinMove",{to:{opacity:1}}),C=new m.E4("antRotate",{to:{transform:"rotate(405deg)"}}),r=e=>({[`${e.componentCls}`]:Object.assign(Object.assign({},(0,l.Wf)(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${e.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${e.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-e.dotSize/2},[`${e.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(e.dotSize-e.fontSize)/2+2,textShadow:`0 1px 2px ${e.colorBgContainer}`,fontSize:e.fontSize},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSize/2)-10},"&-sm":{[`${e.componentCls}-dot`]:{margin:-e.dotSizeSM/2},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeSM-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeSM/2)-10}},"&-lg":{[`${e.componentCls}-dot`]:{margin:-(e.dotSizeLG/2)},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeLG-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeLG/2)-10}}},[`${e.componentCls}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none",["&::after"]:{opacity:.4,pointerEvents:"auto"}}},["&-tip"]:{color:e.spinDotDefault},[`${e.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(e.dotSize-e.marginXXS/2)/2,height:(e.dotSize-e.marginXXS/2)/2,backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Z,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:C,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${e.componentCls}-dot`]:{fontSize:e.dotSizeSM,i:{width:(e.dotSizeSM-e.marginXXS/2)/2,height:(e.dotSizeSM-e.marginXXS/2)/2}},[`&-lg ${e.componentCls}-dot`]:{fontSize:e.dotSizeLG,i:{width:(e.dotSizeLG-e.marginXXS)/2,height:(e.dotSizeLG-e.marginXXS)/2}},[`&${e.componentCls}-show-text ${e.componentCls}-text`]:{display:"block"}})});var $=(0,j.Z)("Spin",e=>{const i=(0,L.TS)(e,{spinDotDefault:e.colorTextDescription});return[r(i)]},e=>({contentHeight:400,dotSize:e.controlHeightLG/2,dotSizeSM:e.controlHeightLG*.35,dotSizeLG:e.controlHeight})),H=function(e,i){var c={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(c[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,a=Object.getOwnPropertySymbols(e);g<a.length;g++)i.indexOf(a[g])<0&&Object.prototype.propertyIsEnumerable.call(e,a[g])&&(c[a[g]]=e[a[g]]);return c};const F=null;let y=null;function q(e,i){const{indicator:c}=i,a=`${e}-dot`;return c===null?null:(0,u.l$)(c)?(0,u.Tm)(c,{className:d()(c.props.className,a)}):(0,u.l$)(y)?(0,u.Tm)(y,{className:d()(y.props.className,a)}):s.createElement("span",{className:d()(a,`${e}-dot-spin`)},s.createElement("i",{className:`${e}-dot-item`,key:1}),s.createElement("i",{className:`${e}-dot-item`,key:2}),s.createElement("i",{className:`${e}-dot-item`,key:3}),s.createElement("i",{className:`${e}-dot-item`,key:4}))}function ae(e,i){return!!e&&!!i&&!isNaN(Number(i))}const ne=e=>{const{spinPrefixCls:i,spinning:c=!0,delay:a=0,className:g,rootClassName:S,size:I="default",tip:N,wrapperClassName:v,style:U,children:b,hashId:w}=e,R=H(e,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[A,J]=s.useState(()=>c&&!ae(c,a));s.useEffect(()=>{if(c){const M=p(a,()=>{J(!0)});return M(),()=>{var k;(k=M==null?void 0:M.cancel)===null||k===void 0||k.call(M)}}J(!1)},[a,c]);const B=s.useMemo(()=>typeof b!="undefined",[b]),{direction:z,spin:x}=s.useContext(o.E_),O=d()(i,x==null?void 0:x.className,{[`${i}-sm`]:I==="small",[`${i}-lg`]:I==="large",[`${i}-spinning`]:A,[`${i}-show-text`]:!!N,[`${i}-rtl`]:z==="rtl"},g,S,w),W=d()(`${i}-container`,{[`${i}-blur`]:A}),Y=(0,_.Z)(R,["indicator","prefixCls"]),K=Object.assign(Object.assign({},x==null?void 0:x.style),U),V=s.createElement("div",Object.assign({},Y,{style:K,className:O,"aria-live":"polite","aria-busy":A}),q(i,e),N&&B?s.createElement("div",{className:`${i}-text`},N):null);return B?s.createElement("div",Object.assign({},Y,{className:d()(`${i}-nested-loading`,v,w)}),A&&s.createElement("div",{key:"loading"},V),s.createElement("div",{className:W,key:"container"},b)):V},ee=e=>{const{prefixCls:i}=e,{getPrefixCls:c}=s.useContext(o.E_),a=c("spin",i),[g,S]=$(a),I=Object.assign(Object.assign({},e),{spinPrefixCls:a,hashId:S});return g(s.createElement(ne,Object.assign({},I)))};ee.setDefaultIndicator=e=>{y=e};var te=ee},60341:function(G,f,t){t.d(f,{l:function(){return s.Z}});var s=t(93797)},2008:function(G,f,t){t.d(f,{n:function(){return m}});var s=t(57213),n=t.n(s),d=t(12490),_=t(42651),h=80,p=80,u={body:{fill:"#fff",stroke:"#8f8f8f",strokeWidth:1}},o=new Map;o.set("group",{shape:"rect",x:40,y:40,width:100,height:50,ports:d.Tt,attrs:{body:n()(n()({},u.body),{},{stroke:"black",strokeWidth:1,fillOpacity:0}),text:{text:"\u5DE5\u5E8F\u7EC4",refX:0,refY:10,"text-anchor":"start"}},data:{parent:!0}}),o.set("end",{shape:"circle",width:60,height:60,attrs:{body:n()(n()({},u.body),{},{fill:"gray"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:d.Tt,data:{configScheme:"end"}}),o.set("circle",{shape:"circle",width:60,height:60,attrs:{body:n()(n()({},u.body),{},{fill:"white"}),text:{text:""}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:d.Tt,data:{},groups:["process"]}),o.set("triangle",{shape:"path",x:40,y:40,width:h,height:60,path:"M3,45 C1.9,45 1,44.2 1,43.1 L29,2.9 C30.1,1.3 31.3,1 32.1,1 L32.1,1 C32.1,1 33.8,1.1 35.1,2.9 L63,43.1 C63,44.1 62.1,45 61,45 L3,45 L3,45 Z",attrs:{body:n()(n()({},u.body),{},{fill:"white"}),text:{text:"\u4E09\u89D2\u5F62",refY:50}},ports:d.Tt,data:{config:{}}}),o.set("triangle2",{shape:"path",x:40,y:40,width:h,height:60,path:"M3,1 C1.9,1 1,1.8 1,2.9 L29,43.1 C30.1,44.7 31.3,45 32.1,45 L32.1,45 C32.1,45 33.8,44.9 35.1,43.1 L63,2.9 C63,1.9 62.1,1 61,1 L3,1 L3,1 Z",attrs:{body:n()(n()({},u.body),{},{fill:"white"}),text:{text:"\u914D\u6599\u5DE5\u5E8F",refY:10}},ports:d.Tt,data:{config:{type:"process"}},groups:["process"]}),o.set("rhombus",{shape:"polygon",x:600,y:70,width:h,height:p,points:"0,10 10,0 20,10 10,20",attrs:{body:n()({},u.body),text:{text:"\u68C0\u9A8C\u5DE5\u5E8F"}},ports:d.Tt,data:{config:{type:"process"}},groups:["process"]}),o.set("ExtSharp",{shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{width:20,x:2,y:2}},ports:d.Tt});function m(l){return new _.Z(o.get(l))}},42651:function(G,f,t){t.d(f,{Z:function(){return u}});var s=t(21140),n=t.n(s),d=t(63466),_=t.n(d),h=t(52510),p=t.n(h),u=function(){function o(m){n()(this,o),p()(this,"_nodeConfig",void 0),p()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(m)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return _()(o,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(l){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=l)}},{key:"setGroups",value:function(l){this._groups=l}},{key:"setConfigSchemel",value:function(l){this._nodeConfig.data?(this._nodeConfig.data.configSchema=l,this._nodeConfig.data.config={type:l}):this._nodeConfig.data={configSchema:l,config:{type:l}}}},{key:"setConfigData",value:function(l){this._nodeConfig.data?this._nodeConfig.data.config=l:this._nodeConfig.data={config:l}}}]),o}()},71353:function(G,f,t){t.r(f);var s=t(54306),n=t.n(s),d=t(60341),_=t(36267),h=t(27522),p=t(8051),u=t(72197),o=t(87363),m=t.n(o),l=t(98306),j=t(5671),L=t(25590),Z=t(82628),C=t(2008),r=t(33130),$=new Z.e,H=function(){var y=(0,o.useState)({}),q=n()(y,2),ae=q[0],ne=q[1],ee=(0,o.useState)({}),te=n()(ee,2),e=te[0],i=te[1],c=(0,o.useState)(!1),a=n()(c,2),g=a[0],S=a[1],I=(0,l.lr)(),N=n()(I,2),v=N[0],U=N[1],b=(0,o.useState)("1"),w=n()(b,2),R=w[0],A=w[1],J=(0,o.useState)(),B=n()(J,2),z=B[0],x=B[1],O=(0,o.useState)([]),W=n()(O,2),Y=W[0],K=W[1];(0,o.useEffect)(function(){S(!0),$.getRouteProcessDesign(v.get("prodCode"),v.get("version")).then(function(Q){var D=JSON.parse(Q.data);D.result&&(ne(D.result),i(D.result.graphData?JSON.parse(D.result.graphData):{})),S(!1)}).catch(function(Q){S(!1),console.log("err"),console.log(Q)});var X=[],P=(0,C.n)("circle");debugger;P==null||P.setConfigSchemel("start"),P==null||P.setConfigData({name:"start"}),P==null||P.setLabel("start"),P.setGroups(["def"]),X.push(P);var T=(0,C.n)("circle");T==null||T.setConfigSchemel("end"),T==null||T.setLabel("end"),T==null||T.setGroups(["def"]),X.push(T),(0,L.O)().then(function(Q){console.log("\u62C9\u53D6\u5927\u7C7B\u6570\u636E"),console.log(Q),Q.data.forEach(function(se){var oe,E;switch(se.key){case"PROCESS_GROUP":E=(0,C.n)("circle"),E.setConfigSchemel("process");break;case"CHECK_GROUP":E=(0,C.n)("rhombus"),E.setConfigSchemel("process");break;case"WAIT_GROUP":E=(0,C.n)("triangle"),E.setConfigSchemel("process");break;case"PICK_GROUP":E=(0,C.n)("triangle2"),E.setConfigSchemel("process");break;default:E=(0,C.n)("ExtSharp"),E.setConfigSchemel("process");break}(oe=E)===null||oe===void 0||oe.setConfigData(se),E.setLabel(se.text),E.setGroups(["process"]);var ie=E;X.push(ie)});var D=(0,C.n)("group");D==null||D.setLabel("\u5DE5\u5E8F\u7EC4"),D==null||D.setConfigSchemel("process-group"),D.setGroups(["process"]),X.push(D),console.log("cusNodes"),console.log(X),K(X)})},[]);var V=(0,o.useCallback)(function(){return new j.bn.kS({attrs:{line:{targetMarker:"classic",stroke:R=="1"?"black":"red"}},tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0,data:{type:R}})},[R]),M=_.Z.Text,k=function(){return(0,r.jsxs)(h.Z,{style:{height:"50px",marginLeft:"20px"},children:[(0,r.jsx)(_.Z,{children:"\u4EA7\u54C1\u7F16\u7801"}),(0,r.jsx)(M,{underline:!0,children:v==null?void 0:v.get("prodCode")}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsx)(_.Z,{children:"\u4EA7\u54C1\u540D\u79F0"}),(0,r.jsx)(M,{underline:!0,children:v==null?void 0:v.get("prodName")}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsx)(_.Z,{children:"\u5BA2\u6237\u6599\u53F7"}),(0,r.jsx)(M,{underline:!0,children:v.get("cusCode")}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsx)(_.Z,{children:"\u7248\u672C\u53F7"}),(0,r.jsx)(M,{underline:!0,children:v.get("version")}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsx)("span",{children:" \u7EBF\u7C7B\u578B\uFF1A"}),(0,r.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#000000"},children:"\u52A0\u5DE5\u7EBF"}),(0,r.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#FF9900"},children:"\u8FD4\u5DE5\u7EBF"})]})};return(0,r.jsxs)("div",{children:[(0,r.jsx)(k,{}),(0,r.jsx)(u.Z,{spinning:g,children:(0,r.jsx)(d.l,{showLeft:!1,graphIns:z,isStatic:!0,graphJson:e})})]})};f.default=H},82628:function(G,f,t){t.d(f,{e:function(){return j}});var s=t(25359),n=t.n(s),d=t(49811),_=t.n(d),h=t(21140),p=t.n(h),u=t(63466),o=t.n(u),m=t(70517),l=new m.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),j=function(){function L(){p()(this,L)}return o()(L,[{key:"updateRouteProcessDesign",value:function(){var Z=_()(n()().mark(function r($){return n()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",l.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify($)));case 1:case"end":return F.stop()}},r)}));function C(r){return Z.apply(this,arguments)}return C}()},{key:"getRouteProcessDesign",value:function(){var Z=_()(n()().mark(function r($,H){return n()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",l.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:H,productCode:$})));case 1:case"end":return y.stop()}},r)}));function C(r,$){return Z.apply(this,arguments)}return C}()}]),L}()},25590:function(G,f,t){t.d(f,{O:function(){return p}});var s=t(25359),n=t.n(s),d=t(49811),_=t.n(d),h=t(70517);function p(){return u.apply(this,arguments)}function u(){return u=_()(n()().mark(function o(){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,h.Z)("/api/mes/asm-system/bbs/v1/common/dictionaries/list",{method:"post",data:{applicationCode:"bbs",dictionaryCategoryCode:"GROUP-TYPES",isEnabled:!0}}).then(function(j){if(j.data){var L=j.data;return L}else return[]}));case 1:case"end":return l.stop()}},o)})),u.apply(this,arguments)}}}]);
