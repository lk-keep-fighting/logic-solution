"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4150],{71541:function(C,i,e){e.d(i,{Z:function(){return t}});var u=e(58709),n=e(87363),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},r=a,c=e(6481),l=function(s,g){return n.createElement(c.Z,(0,u.Z)({},s,{ref:g,icon:r}))},_=n.forwardRef(l),t=_},60860:function(C,i,e){e.d(i,{l:function(){return u.Z}});var u=e(23914)},42192:function(C,i,e){e.d(i,{n:function(){return d}});var u=e(26068),n=e.n(u),a=e(15451),r=e(12119),c=80,l=80,_={body:{fill:"#fff",stroke:"#8f8f8f",strokeWidth:1}},t=new Map;t.set("group",{shape:"rect",x:40,y:40,width:100,height:50,ports:a.Tt,attrs:{body:n()(n()({},_.body),{},{stroke:"black",strokeWidth:1,fillOpacity:0}),text:{text:"\u5DE5\u5E8F\u7EC4",refX:0,refY:10,"text-anchor":"start"}},data:{parent:!0}}),t.set("end",{shape:"circle",width:60,height:60,attrs:{body:n()(n()({},_.body),{},{fill:"gray"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:a.Tt,data:{configScheme:"end"}}),t.set("circle",{shape:"circle",width:60,height:60,attrs:{body:n()(n()({},_.body),{},{fill:"white"}),text:{text:""}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:a.Tt,data:{},groups:["process"]}),t.set("triangle",{shape:"path",x:40,y:40,width:c,height:60,path:"M3,45 C1.9,45 1,44.2 1,43.1 L29,2.9 C30.1,1.3 31.3,1 32.1,1 L32.1,1 C32.1,1 33.8,1.1 35.1,2.9 L63,43.1 C63,44.1 62.1,45 61,45 L3,45 L3,45 Z",attrs:{body:n()(n()({},_.body),{},{fill:"white"}),text:{text:"\u4E09\u89D2\u5F62",refY:50}},ports:a.Tt,data:{config:{}}}),t.set("triangle2",{shape:"path",x:40,y:40,width:c,height:60,path:"M3,1 C1.9,1 1,1.8 1,2.9 L29,43.1 C30.1,44.7 31.3,45 32.1,45 L32.1,45 C32.1,45 33.8,44.9 35.1,43.1 L63,2.9 C63,1.9 62.1,1 61,1 L3,1 L3,1 Z",attrs:{body:n()(n()({},_.body),{},{fill:"white"}),text:{text:"\u914D\u6599\u5DE5\u5E8F",refY:10}},ports:a.Tt,data:{config:{type:"process"}},groups:["process"]}),t.set("rhombus",{shape:"polygon",x:600,y:70,width:c,height:l,points:"0,10 10,0 20,10 10,20",attrs:{body:n()({},_.body),text:{text:"\u68C0\u9A8C\u5DE5\u5E8F"}},ports:a.Tt,data:{config:{type:"process"}},groups:["process"]}),t.set("ExtSharp",{shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{width:20,x:2,y:2}},ports:a.Tt});function d(s){return new r.Z(t.get(s))}},12119:function(C,i,e){e.d(i,{Z:function(){return _}});var u=e(25298),n=e.n(u),a=e(17069),r=e.n(a),c=e(82092),l=e.n(c),_=function(){function t(d){n()(this,t),l()(this,"_nodeConfig",void 0),l()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(d)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return r()(t,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(s){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=s)}},{key:"setGroups",value:function(s){this._groups=s}},{key:"setConfigSchemel",value:function(s){this._nodeConfig.data?(this._nodeConfig.data.configSchema=s,this._nodeConfig.data.config={type:s}):this._nodeConfig.data={configSchema:s,config:{type:s}}}},{key:"setConfigData",value:function(s){this._nodeConfig.data?this._nodeConfig.data.config=s:this._nodeConfig.data={config:s}}}]),t}()},92176:function(C,i,e){e.r(i);var u=e(48305),n=e.n(u),a=e(60860),r=e(77154),c=e(58523),l=e(90171),_=e(82494),t=e(87363),d=e.n(t),s=e(9413),g=e(91505),v=e(1756),P=e(42891),m=e(42192),o=e(62086),b=new P.e,L=function(){var M=(0,t.useState)({}),I=n()(M,2),te=I[0],k=I[1],N=(0,t.useState)({}),B=n()(N,2),G=B[0],F=B[1],J=(0,t.useState)(!1),j=n()(J,2),z=j[0],R=j[1],H=(0,s.lr)(),W=n()(H,2),D=W[0],ne=W[1],Y=(0,t.useState)("1"),K=n()(Y,2),T=K[0],se=K[1],$=(0,t.useState)(),w=n()($,2),V=w[0],oe=w[1],X=(0,t.useState)([]),Z=n()(X,2),_e=Z[0],Q=Z[1];(0,t.useEffect)(function(){R(!0),b.getRouteProcessDesign(D.get("prodCode"),D.get("version")).then(function(y){var f=JSON.parse(y.data);f.result&&(k(f.result),F(f.result.graphData?JSON.parse(f.result.graphData):{})),R(!1)}).catch(function(y){R(!1),console.log("err"),console.log(y)});var O=[],p=(0,m.n)("circle");debugger;p==null||p.setConfigSchemel("start"),p==null||p.setConfigData({name:"start"}),p==null||p.setLabel("start"),p.setGroups(["def"]),O.push(p);var E=(0,m.n)("circle");E==null||E.setConfigSchemel("end"),E==null||E.setLabel("end"),E==null||E.setGroups(["def"]),O.push(E),(0,v.O)().then(function(y){console.log("\u62C9\u53D6\u5927\u7C7B\u6570\u636E"),console.log(y),y.data.forEach(function(U){var A,h;switch(U.key){case"PROCESS_GROUP":h=(0,m.n)("circle"),h.setConfigSchemel("process");break;case"CHECK_GROUP":h=(0,m.n)("rhombus"),h.setConfigSchemel("process");break;case"WAIT_GROUP":h=(0,m.n)("triangle"),h.setConfigSchemel("process");break;case"PICK_GROUP":h=(0,m.n)("triangle2"),h.setConfigSchemel("process");break;default:h=(0,m.n)("ExtSharp"),h.setConfigSchemel("process");break}(A=h)===null||A===void 0||A.setConfigData(U),h.setLabel(U.text),h.setGroups(["process"]);var ee=h;O.push(ee)});var f=(0,m.n)("group");f==null||f.setLabel("\u5DE5\u5E8F\u7EC4"),f==null||f.setConfigSchemel("process-group"),f.setGroups(["process"]),O.push(f),console.log("cusNodes"),console.log(O),Q(O)})},[]);var ae=(0,t.useCallback)(function(){return new g.bn.kS({attrs:{line:{targetMarker:"classic",stroke:T=="1"?"black":"red"}},tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0,data:{type:T}})},[T]),S=r.Z.Text,q=function(){return(0,o.jsxs)(c.Z,{style:{height:"50px",marginLeft:"20px"},children:[(0,o.jsx)(r.Z,{children:"\u4EA7\u54C1\u7F16\u7801"}),(0,o.jsx)(S,{underline:!0,children:D==null?void 0:D.get("prodCode")}),(0,o.jsx)(l.Z,{type:"vertical"}),(0,o.jsx)(r.Z,{children:"\u4EA7\u54C1\u540D\u79F0"}),(0,o.jsx)(S,{underline:!0,children:D==null?void 0:D.get("prodName")}),(0,o.jsx)(l.Z,{type:"vertical"}),(0,o.jsx)(r.Z,{children:"\u5BA2\u6237\u6599\u53F7"}),(0,o.jsx)(S,{underline:!0,children:D.get("cusCode")}),(0,o.jsx)(l.Z,{type:"vertical"}),(0,o.jsx)(r.Z,{children:"\u7248\u672C\u53F7"}),(0,o.jsx)(S,{underline:!0,children:D.get("version")}),(0,o.jsx)(l.Z,{type:"vertical"}),(0,o.jsx)("span",{children:" \u7EBF\u7C7B\u578B\uFF1A"}),(0,o.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#000000"},children:"\u52A0\u5DE5\u7EBF"}),(0,o.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#FF9900"},children:"\u8FD4\u5DE5\u7EBF"})]})};return(0,o.jsxs)("div",{children:[(0,o.jsx)(q,{}),(0,o.jsx)(_.Z,{spinning:z,children:(0,o.jsx)(a.l,{showLeft:!1,graphIns:V,isStatic:!0,graphJson:G})})]})};i.default=L},42891:function(C,i,e){e.d(i,{e:function(){return g}});var u=e(90228),n=e.n(u),a=e(87999),r=e.n(a),c=e(25298),l=e.n(c),_=e(17069),t=e.n(_),d=e(950),s=new d.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),g=function(){function v(){l()(this,v)}return t()(v,[{key:"updateRouteProcessDesign",value:function(){var P=r()(n()().mark(function o(b){return n()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",s.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify(b)));case 1:case"end":return x.stop()}},o)}));function m(o){return P.apply(this,arguments)}return m}()},{key:"getRouteProcessDesign",value:function(){var P=r()(n()().mark(function o(b,L){return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",s.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:L,productCode:b})));case 1:case"end":return M.stop()}},o)}));function m(o,b){return P.apply(this,arguments)}return m}()}]),v}()},1756:function(C,i,e){e.d(i,{O:function(){return l}});var u=e(90228),n=e.n(u),a=e(87999),r=e.n(a),c=e(950);function l(){return _.apply(this,arguments)}function _(){return _=r()(n()().mark(function t(){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.Z)("/api/mes/asm-system/bbs/v1/common/dictionaries/list",{method:"post",data:{applicationCode:"bbs",dictionaryCategoryCode:"GROUP-TYPES",isEnabled:!0}}).then(function(g){if(g.data){var v=g.data;return v}else return[]}));case 1:case"end":return s.stop()}},t)})),_.apply(this,arguments)}},30357:function(C,i,e){var u=e(87363),n=e.n(u),a=e(10171),r=e(22695);const c=(l,_)=>{const t=u.useContext(a.Z),d=u.useMemo(()=>{var g;const v=_||r.Z[l],P=(g=t==null?void 0:t[l])!==null&&g!==void 0?g:{};return Object.assign(Object.assign({},typeof v=="function"?v():v),P||{})},[l,_,t]),s=u.useMemo(()=>{const g=t==null?void 0:t.locale;return t!=null&&t.exist&&!g?r.Z.locale:g},[t]);return[d,s]};i.Z=c}}]);
