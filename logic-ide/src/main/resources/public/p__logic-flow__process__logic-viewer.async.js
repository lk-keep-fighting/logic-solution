"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4150],{60341:function(M,c,e){e.d(c,{l:function(){return h.Z}});var h=e(93797)},2008:function(M,c,e){e.d(c,{n:function(){return i}});var h=e(57213),t=e.n(h),a=e(12490),r=e(42651),p=80,l=80,_={body:{fill:"#fff",stroke:"#8f8f8f",strokeWidth:1}},s=new Map;s.set("group",{shape:"rect",x:40,y:40,width:100,height:50,ports:a.Tt,attrs:{body:t()(t()({},_.body),{},{stroke:"black",strokeWidth:1,fillOpacity:0}),text:{text:"\u5DE5\u5E8F\u7EC4",refX:0,refY:10,"text-anchor":"start"}},data:{parent:!0}}),s.set("end",{shape:"circle",width:60,height:60,attrs:{body:t()(t()({},_.body),{},{fill:"gray"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:a.Tt,data:{configScheme:"end"}}),s.set("circle",{shape:"circle",width:60,height:60,attrs:{body:t()(t()({},_.body),{},{fill:"white"}),text:{text:""}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:a.Tt,data:{},groups:["process"]}),s.set("triangle",{shape:"path",x:40,y:40,width:p,height:60,path:"M3,45 C1.9,45 1,44.2 1,43.1 L29,2.9 C30.1,1.3 31.3,1 32.1,1 L32.1,1 C32.1,1 33.8,1.1 35.1,2.9 L63,43.1 C63,44.1 62.1,45 61,45 L3,45 L3,45 Z",attrs:{body:t()(t()({},_.body),{},{fill:"white"}),text:{text:"\u4E09\u89D2\u5F62",refY:50}},ports:a.Tt,data:{config:{}}}),s.set("triangle2",{shape:"path",x:40,y:40,width:p,height:60,path:"M3,1 C1.9,1 1,1.8 1,2.9 L29,43.1 C30.1,44.7 31.3,45 32.1,45 L32.1,45 C32.1,45 33.8,44.9 35.1,43.1 L63,2.9 C63,1.9 62.1,1 61,1 L3,1 L3,1 Z",attrs:{body:t()(t()({},_.body),{},{fill:"white"}),text:{text:"\u914D\u6599\u5DE5\u5E8F",refY:10}},ports:a.Tt,data:{config:{type:"process"}},groups:["process"]}),s.set("rhombus",{shape:"polygon",x:600,y:70,width:p,height:l,points:"0,10 10,0 20,10 10,20",attrs:{body:t()({},_.body),text:{text:"\u68C0\u9A8C\u5DE5\u5E8F"}},ports:a.Tt,data:{config:{type:"process"}},groups:["process"]}),s.set("ExtSharp",{shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{width:20,x:2,y:2}},ports:a.Tt});function i(o){return new r.Z(s.get(o))}},42651:function(M,c,e){e.d(c,{Z:function(){return _}});var h=e(21140),t=e.n(h),a=e(63466),r=e.n(a),p=e(52510),l=e.n(p),_=function(){function s(i){t()(this,s),l()(this,"_nodeConfig",void 0),l()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(i)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return r()(s,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(o){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=o)}},{key:"setGroups",value:function(o){this._groups=o}},{key:"setConfigSchemel",value:function(o){this._nodeConfig.data?(this._nodeConfig.data.configSchema=o,this._nodeConfig.data.config={type:o}):this._nodeConfig.data={configSchema:o,config:{type:o}}}},{key:"setConfigData",value:function(o){this._nodeConfig.data?this._nodeConfig.data.config=o:this._nodeConfig.data={config:o}}}]),s}()},71353:function(M,c,e){e.r(c);var h=e(54306),t=e.n(h),a=e(60341),r=e(95812),p=e(40767),l=e(22983),_=e(52615),s=e(87363),i=e.n(s),o=e(98306),C=e(5671),D=e(25590),y=e(82628),g=e(2008),n=e(33130),P=new y.e,S=function(){var x=(0,s.useState)({}),j=t()(x,2),te=j[0],k=j[1],G=(0,s.useState)({}),B=t()(G,2),Z=B[0],F=B[1],J=(0,s.useState)(!1),I=t()(J,2),Y=I[0],T=I[1],z=(0,o.lr)(),W=t()(z,2),f=W[0],se=W[1],H=(0,s.useState)("1"),K=t()(H,2),U=K[0],ne=K[1],$=(0,s.useState)(),w=t()($,2),V=w[0],oe=w[1],X=(0,s.useState)([]),N=t()(X,2),_e=N[0],Q=N[1];(0,s.useEffect)(function(){T(!0),P.getRouteProcessDesign(f.get("prodCode"),f.get("version")).then(function(O){var d=JSON.parse(O.data);d.result&&(k(d.result),F(d.result.graphData?JSON.parse(d.result.graphData):{})),T(!1)}).catch(function(O){T(!1),console.log("err"),console.log(O)});var E=[],m=(0,g.n)("circle");debugger;m==null||m.setConfigSchemel("start"),m==null||m.setConfigData({name:"start"}),m==null||m.setLabel("start"),m.setGroups(["def"]),E.push(m);var v=(0,g.n)("circle");v==null||v.setConfigSchemel("end"),v==null||v.setLabel("end"),v==null||v.setGroups(["def"]),E.push(v),(0,D.O)().then(function(O){console.log("\u62C9\u53D6\u5927\u7C7B\u6570\u636E"),console.log(O),O.data.forEach(function(R){var A,u;switch(R.key){case"PROCESS_GROUP":u=(0,g.n)("circle"),u.setConfigSchemel("process");break;case"CHECK_GROUP":u=(0,g.n)("rhombus"),u.setConfigSchemel("process");break;case"WAIT_GROUP":u=(0,g.n)("triangle"),u.setConfigSchemel("process");break;case"PICK_GROUP":u=(0,g.n)("triangle2"),u.setConfigSchemel("process");break;default:u=(0,g.n)("ExtSharp"),u.setConfigSchemel("process");break}(A=u)===null||A===void 0||A.setConfigData(R),u.setLabel(R.text),u.setGroups(["process"]);var ee=u;E.push(ee)});var d=(0,g.n)("group");d==null||d.setLabel("\u5DE5\u5E8F\u7EC4"),d==null||d.setConfigSchemel("process-group"),d.setGroups(["process"]),E.push(d),console.log("cusNodes"),console.log(E),Q(E)})},[]);var ae=(0,s.useCallback)(function(){return new C.bn.kS({attrs:{line:{targetMarker:"classic",stroke:U=="1"?"black":"red"}},tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0,data:{type:U}})},[U]),L=r.Z.Text,q=function(){return(0,n.jsxs)(p.Z,{style:{height:"50px",marginLeft:"20px"},children:[(0,n.jsx)(r.Z,{children:"\u4EA7\u54C1\u7F16\u7801"}),(0,n.jsx)(L,{underline:!0,children:f==null?void 0:f.get("prodCode")}),(0,n.jsx)(l.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u4EA7\u54C1\u540D\u79F0"}),(0,n.jsx)(L,{underline:!0,children:f==null?void 0:f.get("prodName")}),(0,n.jsx)(l.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u5BA2\u6237\u6599\u53F7"}),(0,n.jsx)(L,{underline:!0,children:f.get("cusCode")}),(0,n.jsx)(l.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u7248\u672C\u53F7"}),(0,n.jsx)(L,{underline:!0,children:f.get("version")}),(0,n.jsx)(l.Z,{type:"vertical"}),(0,n.jsx)("span",{children:" \u7EBF\u7C7B\u578B\uFF1A"}),(0,n.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#000000"},children:"\u52A0\u5DE5\u7EBF"}),(0,n.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#FF9900"},children:"\u8FD4\u5DE5\u7EBF"})]})};return(0,n.jsxs)("div",{children:[(0,n.jsx)(q,{}),(0,n.jsx)(_.Z,{spinning:Y,children:(0,n.jsx)(a.l,{showLeft:!1,graphIns:V,isStatic:!0,graphJson:Z})})]})};c.default=S},82628:function(M,c,e){e.d(c,{e:function(){return C}});var h=e(25359),t=e.n(h),a=e(49811),r=e.n(a),p=e(21140),l=e.n(p),_=e(63466),s=e.n(_),i=e(70517),o=new i.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),C=function(){function D(){l()(this,D)}return s()(D,[{key:"updateRouteProcessDesign",value:function(){var y=r()(t()().mark(function n(P){return t()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",o.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify(P)));case 1:case"end":return b.stop()}},n)}));function g(n){return y.apply(this,arguments)}return g}()},{key:"getRouteProcessDesign",value:function(){var y=r()(t()().mark(function n(P,S){return t()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",o.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:S,productCode:P})));case 1:case"end":return x.stop()}},n)}));function g(n,P){return y.apply(this,arguments)}return g}()}]),D}()},25590:function(M,c,e){e.d(c,{O:function(){return l}});var h=e(25359),t=e.n(h),a=e(49811),r=e.n(a),p=e(70517);function l(){return _.apply(this,arguments)}function _(){return _=r()(t()().mark(function s(){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.Z)("/api/mes/asm-system/bbs/v1/common/dictionaries/list",{method:"post",data:{applicationCode:"bbs",dictionaryCategoryCode:"GROUP-TYPES",isEnabled:!0}}).then(function(C){if(C.data){var D=C.data;return D}else return[]}));case 1:case"end":return o.stop()}},s)})),_.apply(this,arguments)}}}]);
