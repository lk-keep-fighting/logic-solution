"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4150],{71541:function(P,u,e){e.d(u,{Z:function(){return s}});var c=e(58709),t=e(87363),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},r=a,g=e(6481),l=function(o,D){return t.createElement(g.Z,(0,c.Z)({},o,{ref:D,icon:r}))},_=t.forwardRef(l),s=_},60860:function(P,u,e){e.d(u,{l:function(){return c.Z}});var c=e(23914)},42192:function(P,u,e){e.d(u,{n:function(){return i}});var c=e(26068),t=e.n(c),a=e(15451),r=e(12119),g=80,l=80,_={body:{fill:"#fff",stroke:"#8f8f8f",strokeWidth:1}},s=new Map;s.set("group",{shape:"rect",x:40,y:40,width:100,height:50,ports:a.Tt,attrs:{body:t()(t()({},_.body),{},{stroke:"black",strokeWidth:1,fillOpacity:0}),text:{text:"\u5DE5\u5E8F\u7EC4",refX:0,refY:10,"text-anchor":"start"}},data:{parent:!0}}),s.set("end",{shape:"circle",width:60,height:60,attrs:{body:t()(t()({},_.body),{},{fill:"gray"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:a.Tt,data:{configScheme:"end"}}),s.set("circle",{shape:"circle",width:60,height:60,attrs:{body:t()(t()({},_.body),{},{fill:"white"}),text:{text:""}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:a.Tt,data:{},groups:["process"]}),s.set("triangle",{shape:"path",x:40,y:40,width:g,height:60,path:"M3,45 C1.9,45 1,44.2 1,43.1 L29,2.9 C30.1,1.3 31.3,1 32.1,1 L32.1,1 C32.1,1 33.8,1.1 35.1,2.9 L63,43.1 C63,44.1 62.1,45 61,45 L3,45 L3,45 Z",attrs:{body:t()(t()({},_.body),{},{fill:"white"}),text:{text:"\u4E09\u89D2\u5F62",refY:50}},ports:a.Tt,data:{config:{}}}),s.set("triangle2",{shape:"path",x:40,y:40,width:g,height:60,path:"M3,1 C1.9,1 1,1.8 1,2.9 L29,43.1 C30.1,44.7 31.3,45 32.1,45 L32.1,45 C32.1,45 33.8,44.9 35.1,43.1 L63,2.9 C63,1.9 62.1,1 61,1 L3,1 L3,1 Z",attrs:{body:t()(t()({},_.body),{},{fill:"white"}),text:{text:"\u914D\u6599\u5DE5\u5E8F",refY:10}},ports:a.Tt,data:{config:{type:"process"}},groups:["process"]}),s.set("rhombus",{shape:"polygon",x:600,y:70,width:g,height:l,points:"0,10 10,0 20,10 10,20",attrs:{body:t()({},_.body),text:{text:"\u68C0\u9A8C\u5DE5\u5E8F"}},ports:a.Tt,data:{config:{type:"process"}},groups:["process"]}),s.set("ExtSharp",{shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{width:20,x:2,y:2}},ports:a.Tt});function i(o){return new r.Z(s.get(o))}},12119:function(P,u,e){e.d(u,{Z:function(){return _}});var c=e(25298),t=e.n(c),a=e(17069),r=e.n(a),g=e(82092),l=e.n(g),_=function(){function s(i){t()(this,s),l()(this,"_nodeConfig",void 0),l()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(i)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return r()(s,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(o){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=o)}},{key:"setGroups",value:function(o){this._groups=o}},{key:"setConfigSchemel",value:function(o){this._nodeConfig.data?(this._nodeConfig.data.configSchema=o,this._nodeConfig.data.config={type:o}):this._nodeConfig.data={configSchema:o,config:{type:o}}}},{key:"setConfigData",value:function(o){this._nodeConfig.data?this._nodeConfig.data.config=o:this._nodeConfig.data={config:o}}}]),s}()},92176:function(P,u,e){e.r(u);var c=e(48305),t=e.n(c),a=e(60860),r=e(77154),g=e(58523),l=e(90171),_=e(82494),s=e(87363),i=e.n(s),o=e(9413),D=e(91505),C=e(1756),y=e(42891),f=e(42192),n=e(62086),b=new y.e,S=function(){var x=(0,s.useState)({}),I=t()(x,2),te=I[0],N=I[1],Z=(0,s.useState)({}),B=t()(Z,2),G=B[0],F=B[1],J=(0,s.useState)(!1),j=t()(J,2),z=j[0],R=j[1],H=(0,o.lr)(),W=t()(H,2),p=W[0],se=W[1],Y=(0,s.useState)("1"),K=t()(Y,2),T=K[0],ne=K[1],$=(0,s.useState)(),w=t()($,2),V=w[0],oe=w[1],X=(0,s.useState)([]),k=t()(X,2),_e=k[0],Q=k[1];(0,s.useEffect)(function(){R(!0),b.getRouteProcessDesign(p.get("prodCode"),p.get("version")).then(function(M){var h=JSON.parse(M.data);h.result&&(N(h.result),F(h.result.graphData?JSON.parse(h.result.graphData):{})),R(!1)}).catch(function(M){R(!1),console.log("err"),console.log(M)});var E=[],m=(0,f.n)("circle");debugger;m==null||m.setConfigSchemel("start"),m==null||m.setConfigData({name:"start"}),m==null||m.setLabel("start"),m.setGroups(["def"]),E.push(m);var v=(0,f.n)("circle");v==null||v.setConfigSchemel("end"),v==null||v.setLabel("end"),v==null||v.setGroups(["def"]),E.push(v),(0,C.O)().then(function(M){console.log("\u62C9\u53D6\u5927\u7C7B\u6570\u636E"),console.log(M),M.data.forEach(function(U){var A,d;switch(U.key){case"PROCESS_GROUP":d=(0,f.n)("circle"),d.setConfigSchemel("process");break;case"CHECK_GROUP":d=(0,f.n)("rhombus"),d.setConfigSchemel("process");break;case"WAIT_GROUP":d=(0,f.n)("triangle"),d.setConfigSchemel("process");break;case"PICK_GROUP":d=(0,f.n)("triangle2"),d.setConfigSchemel("process");break;default:d=(0,f.n)("ExtSharp"),d.setConfigSchemel("process");break}(A=d)===null||A===void 0||A.setConfigData(U),d.setLabel(U.text),d.setGroups(["process"]);var ee=d;E.push(ee)});var h=(0,f.n)("group");h==null||h.setLabel("\u5DE5\u5E8F\u7EC4"),h==null||h.setConfigSchemel("process-group"),h.setGroups(["process"]),E.push(h),console.log("cusNodes"),console.log(E),Q(E)})},[]);var ae=(0,s.useCallback)(function(){return new D.bn.kS({attrs:{line:{targetMarker:"classic",stroke:T=="1"?"black":"red"}},tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0,data:{type:T}})},[T]),L=r.Z.Text,q=function(){return(0,n.jsxs)(g.Z,{style:{height:"50px",marginLeft:"20px"},children:[(0,n.jsx)(r.Z,{children:"\u4EA7\u54C1\u7F16\u7801"}),(0,n.jsx)(L,{underline:!0,children:p==null?void 0:p.get("prodCode")}),(0,n.jsx)(l.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u4EA7\u54C1\u540D\u79F0"}),(0,n.jsx)(L,{underline:!0,children:p==null?void 0:p.get("prodName")}),(0,n.jsx)(l.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u5BA2\u6237\u6599\u53F7"}),(0,n.jsx)(L,{underline:!0,children:p.get("cusCode")}),(0,n.jsx)(l.Z,{type:"vertical"}),(0,n.jsx)(r.Z,{children:"\u7248\u672C\u53F7"}),(0,n.jsx)(L,{underline:!0,children:p.get("version")}),(0,n.jsx)(l.Z,{type:"vertical"}),(0,n.jsx)("span",{children:" \u7EBF\u7C7B\u578B\uFF1A"}),(0,n.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#000000"},children:"\u52A0\u5DE5\u7EBF"}),(0,n.jsx)("span",{style:{textDecoration:"underline",textDecorationThickness:3,textDecorationColor:"#FF9900"},children:"\u8FD4\u5DE5\u7EBF"})]})};return(0,n.jsxs)("div",{children:[(0,n.jsx)(q,{}),(0,n.jsx)(_.Z,{spinning:z,children:(0,n.jsx)(a.l,{showLeft:!1,graphIns:V,isStatic:!0,graphJson:G})})]})};u.default=S},42891:function(P,u,e){e.d(u,{e:function(){return D}});var c=e(90228),t=e.n(c),a=e(87999),r=e.n(a),g=e(25298),l=e.n(g),_=e(17069),s=e.n(_),i=e(950),o=new i.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),D=function(){function C(){l()(this,C)}return s()(C,[{key:"updateRouteProcessDesign",value:function(){var y=r()(t()().mark(function n(b){return t()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",o.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify(b)));case 1:case"end":return O.stop()}},n)}));function f(n){return y.apply(this,arguments)}return f}()},{key:"getRouteProcessDesign",value:function(){var y=r()(t()().mark(function n(b,S){return t()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",o.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:S,productCode:b})));case 1:case"end":return x.stop()}},n)}));function f(n,b){return y.apply(this,arguments)}return f}()}]),C}()},1756:function(P,u,e){e.d(u,{O:function(){return l}});var c=e(90228),t=e.n(c),a=e(87999),r=e.n(a),g=e(950);function l(){return _.apply(this,arguments)}function _(){return _=r()(t()().mark(function s(){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,g.Z)("/api/mes/asm-system/bbs/v1/common/dictionaries/list",{method:"post",data:{applicationCode:"bbs",dictionaryCategoryCode:"GROUP-TYPES",isEnabled:!0}}).then(function(D){if(D.data){var C=D.data;return C}else return[]}));case 1:case"end":return o.stop()}},s)})),_.apply(this,arguments)}}}]);
