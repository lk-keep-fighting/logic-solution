"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4668],{92931:function(T,b,t){t.d(b,{Z:function(){return v}});var E=t(25298),P=t.n(E),u=t(17069),h=t.n(u),_=t(82092),a=t.n(_),v=function(){function e(s){P()(this,e),a()(this,"_nodeConfig",void 0),a()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(s)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return h()(e,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(r){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=r)}},{key:"setGroups",value:function(r){this._groups=r}},{key:"setConfigSchemel",value:function(r){this._nodeConfig.data?(this._nodeConfig.data.configSchema=r,this._nodeConfig.data.config={type:r}):this._nodeConfig.data={configSchema:r,config:{type:r}}}},{key:"setConfigData",value:function(r){this._nodeConfig.data?this._nodeConfig.data.config=r:this._nodeConfig.data={config:r}}}]),e}()},74987:function(T,b,t){t.d(b,{Ld:function(){return E},Iz:function(){return r},Du:function(){return i},dO:function(){return D},z1:function(){return d},X0:function(){return s},_w:function(){return U}});var E=function(n){return n.TypeAnnotation="TypeAnnotation",n.Structure="Structure",n.StructureProperty="StructureProperty",n.TypeParam="TypeParam",n.Variable="Variable",n.Logic="Logic",n.LogicItem="LogicItem",n}({}),P=function(n){return n.start="start",n.end="end",n.switch="switch",n["switch-case"]="switch-case",n["switch-def"]="switch-def",n.http="http",n.logic="logic",n.js="js",n.wait="wait",n}({}),u=t(17069),h=t.n(u),_=t(25298),a=t.n(_),v=t(82092),e=t.n(v),s=h()(function n(c){a()(this,n),e()(this,"concept",void 0),e()(this,"name",void 0),e()(this,"label",void 0),e()(this,"description",void 0),e()(this,"typeAnnotation",void 0),e()(this,"required",!1),e()(this,"defaultValue",void 0),this.concept=E.StructureProperty,this.name=c}),r=h()(function n(c){a()(this,n),e()(this,"concept",E.Logic),e()(this,"schemeVersion",void 0),e()(this,"version",void 0),e()(this,"id",void 0),e()(this,"name",void 0),e()(this,"label",void 0),e()(this,"description",void 0),e()(this,"triggerType",void 0),e()(this,"log",void 0),e()(this,"cron",void 0),e()(this,"typeParams",void 0),e()(this,"params",void 0),e()(this,"returns",void 0),e()(this,"variables",void 0),e()(this,"envs",void 0),e()(this,"items",[]),e()(this,"visualConfig",void 0),this.id=c,this.schemeVersion="0.1"}),i=h()(function n(c,C){var A=this;a()(this,n),e()(this,"concept","LogicItem"),e()(this,"id",void 0),e()(this,"name",void 0),e()(this,"type",void 0),e()(this,"label",void 0),e()(this,"description",void 0),e()(this,"params",void 0),e()(this,"returns",void 0),e()(this,"envs",void 0),e()(this,"afterReturnAdaptor",void 0),e()(this,"returnAccept",void 0),e()(this,"nextId",void 0),e()(this,"endId",void 0),e()(this,"condition",void 0),e()(this,"script",void 0),e()(this,"timeout",void 0),e()(this,"branches",void 0),e()(this,"url",void 0),e()(this,"method",void 0),e()(this,"headers",void 0),e()(this,"queryParams",void 0),e()(this,"tranScope",void 0),e()(this,"body",void 0),e()(this,"setEnv",function(g){A.envs=g}),this.type=C,this.id=c}),m=null,D=h()(function n(c){a()(this,n),e()(this,"concept","Param"),e()(this,"name",void 0),e()(this,"description",void 0),e()(this,"typeAnnotation",void 0),e()(this,"required",void 0),e()(this,"defaultValue",void 0),this.name=c}),O=t(21742),x=t.n(O),l=t(83136),o=t.n(l),d=function(n){x()(C,n);var c=o()(C);function C(A){var g;return a()(this,C),g=c.call(this,A),g.concept="Return",g}return h()(C)}(D),U=function(n){x()(C,n);var c=o()(C);function C(A){var g;return a()(this,C),g=c.call(this,A),g.concept="Variable",g}return h()(C)}(D)},25616:function(T,b,t){var E=t(26068),P=t.n(E),u=t(48305),h=t.n(u),_=t(59321),a=t(87363),v=t.n(a),e=t(874),s=t.n(e),r=t(51857),i=t(91416),m=t(4793),D=t(76465),O=t(51084),x=t(47787),l=t(33194),o=t(52758),d=t(38129),U=t(41648),n=t(22191),c=t(62086),C=function(g){var K=(0,a.useState)({type:"page"}),I=h()(K,2),k=I[0],N=I[1],Z=(0,a.useState)(),B=h()(Z,2),V=B[0],Y=B[1],z=(0,a.useState)(),S=h()(z,2),X=S[0],F=S[1],L="cxd",W="zh-CN";(0,a.useEffect)(function(){(0,d.m)(_.Z)},[]),(0,a.useEffect)(function(){g.pageId&&((0,m.UD)(g.pageId).then(function(w){N(w)}),n.S.getEnvJson().then(function(w){Y(JSON.parse(U.j.getEnv()))}))},[g.pageId]);var J=function(p,M){console.log("broadcast:",p,M),g.onBroadcast&&g.onBroadcast(p,M.data)};return(0,c.jsxs)("div",{children:[(0,c.jsx)(i.qR,{theme:L,position:"top-right",locale:W},"toast"),(0,c.jsx)(i.wx,{theme:L,locale:W},"alert"),(0,r.sYA)(k,{data:P()({envs:V},g.data),onBroadcast:J},{fetcher:function(p){var M=p.url,R=p.method,y=p.data,j=p.responseType,f=p.config,G=p.headers;return g.data&&g.data.runtime&&(M="/api/ide/papi/".concat(g.data.runtime).concat(M)),f=f||{},f.withCredentials=!0,j&&(f.responseType=j),f.cancelExecutor&&(f.cancelToken=new _.Z.CancelToken(f.cancelExecutor)),f.headers=G||{},f.headers.Authorization||(f.headers.Authorization="Bearer "+o.F.getTokenFormLocal()),R!=="post"&&R!=="put"&&R!=="patch"?(y&&(f.params=y),_.Z[R](M,f)):(y&&y instanceof FormData?(f.headers=f.headers||{},f.headers["Content-Type"]="multipart/form-data"):y&&typeof y!="string"&&!(y instanceof Blob)&&!(y instanceof ArrayBuffer)&&(y=JSON.stringify(y),f.headers=f.headers||{},f.headers["Content-Type"]="application/json"),_.Z[R](M,y,f))},isCancel:function(p){return _.Z.isCancel(p)},copy:function(p){s()(p),i.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:L,jumpTo:function(p,M){debugger;M.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+p,"_blank"):window.location.hash=p}})]})};b.Z=C},13891:function(T,b,t){t.d(b,{V:function(){return P}});var E=t(81465),P=function(_){var a,v=_.getSelectedCells(),e=[],s=[];if(v&&v.length>2){v.forEach(function(l){l.isNode()?e.push(l):s.push(l)}),a=new E.Vq({type:"dagre",begin:[e[0].getPosition().x,e[0].getPosition().y],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),_.getEdges().forEach(function(l){var o=l.getSourceCellId(),d=0,U=l.getTargetCellId(),n=0;e.find(function(c){return c.id===o})&&d++,e.find(function(c){return c.id===U})&&n++,d>0&&n>0&&s.push(l)});var r=a.layout({nodes:e,edges:s}),i=r.nodes,m=i===void 0?[]:i;e.forEach(function(l){var o=m.find(function(d){return d.id===l.id});o&&(o.x-=l.size().width/2,o.y-=l.size().height/2,l.position(o.x,o.y))})}else{a=new E.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),e=_.getNodes(),s=_.getEdges();var D=a.layout({nodes:e,edges:s}),O=D.nodes,x=O===void 0?[]:O;e.forEach(function(l){var o=x.find(function(d){return d.id===l.id});o&&(o.x-=l.size().width/2,o.y-=l.size().height>40?20:l.size().height/2,l.position(o.x,o.y))})}},u=function(_,a){debugger;var v=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),e=v.layout({nodes:_,edges:a}),s=e.nodes,r=s===void 0?[]:s;_.forEach(function(i){var m=r.find(function(D){return D.id===i.id});m&&(m.x-=i.size().width/2,m.y-=i.size().height/2,i.position(m.x,m.y))})}},54804:function(T,b,t){t.d(b,{K:function(){return a}});var E=t(15558),P=t.n(E),u=t(9939),h=t(61065),_=t(92931);function a(v,e,s){var r=50,i=50,m=[new _.Z({shape:"wait-for-continue",width:r,height:i,ports:u.Tt,data:{config:{type:"wait-for-continue",name:"\u4EA4\u4E92\u70B9"}},_groups:["ctrl"]}),new _.Z({shape:"wait",width:r,height:i,data:{config:{type:"wait",name:"\u7B49\u5F85",timeout:"2000"}},ports:u.Tt,_groups:["ctrl"]}),new _.Z({shape:"ExtSharp",width:50,height:i,label:"switch",attrs:{image:{"xlink:href":"/logic/icons/switch.svg",width:45,x:1,y:2},body:{strokeWidth:0},text:{text:"switch",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch",name:"switch"}},ports:u.Tt,_groups:["ctrl"]}),new _.Z({shape:"ExtSharp",width:r,height:i,attrs:{body:{strokeWidth:0},image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"case",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case",name:"case"}},ports:u.Tt,_groups:["ctrl"]}),new _.Z({shape:"ExtSharp",width:r,height:i,attrs:{body:{strokeWidth:0},image:{"xlink:href":"/logic/icons/texts.svg",width:30,x:8,y:10},text:{text:"\u591A\u503Ccase",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-cases",name:"\u591A\u503Ccase"}},ports:u.Tt,_groups:["ctrl"]}),new _.Z({shape:"ExtSharp",width:50,height:i,attrs:{body:{strokeWidth:0},image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"default",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default",name:"default"}},ports:u.Tt,_groups:["ctrl"]}),new _.Z({shape:"http",width:100,height:i,text:"http\u8BF7\u6C42",data:{config:{type:"http",name:"http\u8BF7\u6C42",method:"POST"}},ports:u.Tt,_groups:["ctrl"]}),new _.Z({shape:"js",width:100,height:i,ports:u.Tt,imgSrc:"/logic/icons/code.svg",text:"js\u811A\u672C",data:{config:{name:"js\u811A\u672C",type:"js"}},_groups:["ctrl"]}),new _.Z({shape:"java",ports:u.Tt,width:100,height:i,text:"java\u65B9\u6CD5",data:{config:{name:"java\u65B9\u6CD5",type:"java"}},_groups:["ctrl"]}),new _.Z({shape:"sub-logic",ports:u.Tt,width:100,height:i,data:{config:{name:"\u590D\u7528\u903B\u8F91",type:"sub-logic"}},_groups:["ctrl"]}),new _.Z({shape:"ExtSharp",width:50,height:i,attrs:{body:{strokeWidth:1,stroke:"red",fill:"red"},image:{"xlink:href":"/logic/icons/assign-global.svg",width:30,x:8,y:10},text:{text:"\u5168\u5C40\u53D8\u91CF",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{name:"\u5168\u5C40\u53D8\u91CF",type:"assign-global"}},ports:u.Tt,_groups:["assign"]}),new _.Z({shape:"ExtSharp",width:50,height:i,attrs:{body:{strokeWidth:1,stroke:"#ff9300",fill:"#ff9300"},image:{"xlink:href":"/logic/icons/assign-local.svg",width:30,x:8,y:10},text:{text:"\u5C40\u90E8\u53D8\u91CF",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{name:"\u5C40\u90E8\u53D8\u91CF",type:"assign-local"}},ports:u.Tt,_groups:["assign"]})];v&&v.length>0&&Array.prototype.push.apply(m,v);var D=P()(h.C.values());return{Nodes:m,Shapes:D}}},22191:function(T,b,t){t.d(b,{S:function(){return i}});var E=t(90228),P=t.n(E),u=t(87999),h=t.n(u),_=t(25298),a=t.n(_),v=t(17069),e=t.n(v),s=t(41648),r=t(96179),i=function(){function m(){a()(this,m)}return e()(m,null,[{key:"getEnvJson",value:function(){var D=h()(P()().mark(function x(){return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,r.U2)("/api/runtime/env").then(function(d){return d.data.data}).then(function(d){return s.j.setModel(d.UI_CONFIG_MODEL),s.j.setEnv(JSON.stringify(d)),s.j.setApiUrlPrefix(d.API_GATEWAY_PREFIX),s.j.setReryApi(d.CUSTOM_RETRY_URL),s.j.setReryApi(d.CUSTOM_RETRY_URL),d}));case 1:case"end":return o.stop()}},x)}));function O(){return D.apply(this,arguments)}return O}()},{key:"getRemoteRuntimeConfig",value:function(){var D=h()(P()().mark(function x(){return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,r.v_)("/api/ide/remote-runtimes").then(function(d){return d.data}).then(function(d){return console.log("remote runtimes:",d.data),s.j.setRemoteRuntimes(JSON.stringify(d.data)),d}));case 1:case"end":return o.stop()}},x)}));function O(){return D.apply(this,arguments)}return O}()}]),m}()}}]);
