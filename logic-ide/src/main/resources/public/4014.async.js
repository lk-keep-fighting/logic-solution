"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4014],{84014:function(B,y,v){v.r(y),v.d(y,{InputSignatureRenderer:function(){return o},default:function(){return u}});var d=v(15767),w=v(87363),_=v.n(w),h=v(42977),a=v(94391),f=v(19334),r=v.n(f),n=v(46828),l=v.n(n),u=function(t){(0,d.ZT)(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}return i.prototype.uploadFile=function(e,s){return(0,d.mG)(this,void 0,void 0,function(){var b,p,c;return(0,d.Jh)(this,function(m){switch(m.label){case 0:return b=(0,h._6r)(s,"post"),b.data?[3,2]:(p=new FormData,[4,(0,n.base64ToBlob)(e)]);case 1:c=m.sent(),p.append("file",c,"signature.png"),b.data=p,m.label=2;case 2:return[2,this.props.env.fetcher(b,(0,h.nW9)(this.props.data,{file:e}))]}})})},i.prototype.handleChange=function(e){var s,b;return(0,d.mG)(this,void 0,void 0,function(){var p,c,m,O,g,E,C,M;return(0,d.Jh)(this,function(T){switch(T.label){case 0:if(p=this.props,c=p.translate,m=p.uploadApi,O=p.embed,g=p.onChange,!O||!m||e===void 0)return g==null||g(e),[2];T.label=1;case 1:return T.trys.push([1,3,,4]),[4,this.uploadFile(e,m)];case 2:if(E=T.sent(),!E.ok||E.status&&E.status!=="0"||!E.data)throw new Error(E.msg||c("File.errorRetry"));return C=E.data.value||E.data.url||E.data,g==null||g(C),[3,4];case 3:return M=T.sent(),g==null||g(""),(b=(s=this.props.env)===null||s===void 0?void 0:s.alert)===null||b===void 0||b.call(s,M.message||c("File.errorRetry")),[3,4];case 4:return[2]}})})},i.prototype.render=function(){var e=this.props,s=e.classnames,b=e.className,p=r()(this.props,["value","width","height","mobileUI","embed","color","bgColor","clearBtnLabel","clearBtnIcon","undoBtnLabel","undoBtnIcon","confirmBtnLabel","confirmBtnIcon","embedConfirmLabel","embedConfirmIcon","ebmedCancelLabel","ebmedCancelIcon","embedBtnIcon","embedBtnLabel","uploadApi"]);return _().createElement(a.PcR,(0,d.pi)({classnames:s,className:b,onChange:this.handleChange},p))},(0,d.gn)([h.NjZ,(0,d.w6)("design:type",Function),(0,d.w6)("design:paramtypes",[String,String]),(0,d.w6)("design:returntype",Promise)],i.prototype,"uploadFile",null),(0,d.gn)([h.NjZ,(0,d.w6)("design:type",Function),(0,d.w6)("design:paramtypes",[Object]),(0,d.w6)("design:returntype",Promise)],i.prototype,"handleChange",null),i}(_().Component),o=function(t){(0,d.ZT)(i,t);function i(e,s){var b=t.call(this,e)||this,p=s;return p.registerComponent(b),b}return i.prototype.componentWillUnmount=function(){var e;(e=t.prototype.componentWillUnmount)===null||e===void 0||e.call(this);var s=this.context;s.unRegisterComponent(this)},i.contextType=h.ZHe,i=(0,d.gn)([(0,h.xJW)({type:"input-signature",sizeMutable:!1}),(0,d.w6)("design:paramtypes",[Object,Object])],i),i}(u)},33353:function(B,y){var v=this&&this.__awaiter||function(a,f,r,n){function l(u){return u instanceof r?u:new r(function(o){o(u)})}return new(r||(r=Promise))(function(u,o){function t(s){try{e(n.next(s))}catch(b){o(b)}}function i(s){try{e(n.throw(s))}catch(b){o(b)}}function e(s){s.done?u(s.value):l(s.value).then(t,i)}e((n=n.apply(a,f||[])).next())})},d=this&&this.__generator||function(a,f){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},n,l,u,o;return o={next:t(0),throw:t(1),return:t(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function t(e){return function(s){return i([e,s])}}function i(e){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,e[0]&&(r=0)),r;)try{if(n=1,l&&(u=e[0]&2?l.return:e[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,e[1])).done)return u;switch(l=0,u&&(e=[e[0]&2,u.value]),e[0]){case 0:case 1:u=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,l=e[1],e=[0];continue;case 7:e=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(e[0]===6||e[0]===2)){r=0;continue}if(e[0]===3&&(!u||e[1]>u[0]&&e[1]<u[3])){r.label=e[1];break}if(e[0]===6&&r.label<u[1]){r.label=u[1],u=e;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(e);break}u[2]&&r.ops.pop(),r.trys.pop();continue}e=f.call(a,r)}catch(s){e=[6,s],l=0}finally{n=u=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};Object.defineProperty(y,"__esModule",{value:!0}),y.base64ToBlob=w;function w(a){return v(this,void 0,void 0,function(){var f,r,n;return d(this,function(l){switch(l.label){case 0:return[4,fetch(a)];case 1:return f=l.sent(),[4,f.blob()];case 2:return r=l.sent(),n=h(a),n&&(r=r.slice(0,r.size,n)),[2,r]}})})}var _=/^data:(.+);base64,/;function h(a){var f;return(f=a.match(_))===null||f===void 0?void 0:f.slice(1,2).pop()}},30407:function(B,y){var v=this&&this.__awaiter||function(_,h,a,f){function r(n){return n instanceof a?n:new a(function(l){l(n)})}return new(a||(a=Promise))(function(n,l){function u(i){try{t(f.next(i))}catch(e){l(e)}}function o(i){try{t(f.throw(i))}catch(e){l(e)}}function t(i){i.done?n(i.value):r(i.value).then(u,o)}t((f=f.apply(_,h||[])).next())})},d=this&&this.__generator||function(_,h){var a={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},f,r,n,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(t){return function(i){return o([t,i])}}function o(t){if(f)throw new TypeError("Generator is already executing.");for(;l&&(l=0,t[0]&&(a=0)),a;)try{if(f=1,r&&(n=t[0]&2?r.return:t[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,t[1])).done)return n;switch(r=0,n&&(t=[t[0]&2,n.value]),t[0]){case 0:case 1:n=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,r=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(n=a.trys,!(n=n.length>0&&n[n.length-1])&&(t[0]===6||t[0]===2)){a=0;continue}if(t[0]===3&&(!n||t[1]>n[0]&&t[1]<n[3])){a.label=t[1];break}if(t[0]===6&&a.label<n[1]){a.label=n[1],n=t;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(t);break}n[2]&&a.ops.pop(),a.trys.pop();continue}t=h.call(_,a)}catch(i){t=[6,i],r=0}finally{f=n=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}};Object.defineProperty(y,"__esModule",{value:!0}),y.base64ToFile=w;function w(_,h,a){return v(this,void 0,void 0,function(){var f,r;return d(this,function(n){switch(n.label){case 0:return[4,fetch(_)];case 1:return f=n.sent(),[4,f.blob()];case 2:return r=n.sent(),[2,new File([r],h,a)]}})})}},67880:function(B,y,v){var d=v(36379).lW,w=this&&this.__awaiter||function(l,u,o,t){function i(e){return e instanceof o?e:new o(function(s){s(e)})}return new(o||(o=Promise))(function(e,s){function b(m){try{c(t.next(m))}catch(O){s(O)}}function p(m){try{c(t.throw(m))}catch(O){s(O)}}function c(m){m.done?e(m.value):i(m.value).then(b,p)}c((t=t.apply(l,u||[])).next())})},_=this&&this.__generator||function(l,u){var o={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},t,i,e,s;return s={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function b(c){return function(m){return p([c,m])}}function p(c){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(o=0)),o;)try{if(t=1,i&&(e=c[0]&2?i.return:c[0]?i.throw||((e=i.return)&&e.call(i),0):i.next)&&!(e=e.call(i,c[1])).done)return e;switch(i=0,e&&(c=[c[0]&2,e.value]),c[0]){case 0:case 1:e=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,i=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(e=o.trys,!(e=e.length>0&&e[e.length-1])&&(c[0]===6||c[0]===2)){o=0;continue}if(c[0]===3&&(!e||c[1]>e[0]&&c[1]<e[3])){o.label=c[1];break}if(c[0]===6&&o.label<e[1]){o.label=e[1],e=c;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(c);break}e[2]&&o.ops.pop(),o.trys.pop();continue}c=u.call(l,o)}catch(m){c=[6,m],i=0}finally{t=e=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(y,"__esModule",{value:!0}),y.blobToBase64=h;function h(l){return w(this,void 0,void 0,function(){return _(this,function(u){return[2,typeof FileReader=="function"?f(l):n(l)]})})}var a;(function(l){l.error="error",l.loadend="loadend"})(a||(a={}));function f(l){return w(this,void 0,void 0,function(){return _(this,function(u){return[2,new Promise(function(o,t){try{var i=new FileReader,e=function(){o(i.result),i.removeEventListener(a.loadend,e)};i.addEventListener(a.loadend,e);var s=function(){t(i.error),i.removeEventListener(a.error,s)};i.addEventListener(a.error,s),i.readAsDataURL(l)}catch(b){t(b)}})]})})}var r="application/octet-stream";function n(l){return w(this,void 0,void 0,function(){var u,o,t,i;return _(this,function(e){switch(e.label){case 0:return t=(o=d).from,[4,l.text()];case 1:return u=t.apply(o,[e.sent()]),i=l.type||r,[2,"data:".concat(i,";base64,").concat(u.toString("base64"))]}})})}},85004:function(B,y,v){Object.defineProperty(y,"__esModule",{value:!0}),y.fileToBase64=void 0;var d=v(67880);Object.defineProperty(y,"fileToBase64",{enumerable:!0,get:function(){return d.blobToBase64}})},46828:function(B,y,v){var d=this&&this.__createBinding||(Object.create?function(_,h,a,f){f===void 0&&(f=a);var r=Object.getOwnPropertyDescriptor(h,a);(!r||("get"in r?!h.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return h[a]}}),Object.defineProperty(_,f,r)}:function(_,h,a,f){f===void 0&&(f=a),_[f]=h[a]}),w=this&&this.__exportStar||function(_,h){for(var a in _)a!=="default"&&!Object.prototype.hasOwnProperty.call(h,a)&&d(h,_,a)};Object.defineProperty(y,"__esModule",{value:!0}),w(v(33353),y),w(v(30407),y),w(v(67880),y),w(v(85004),y)}}]);
