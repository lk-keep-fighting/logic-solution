"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2049],{72049:function(st,F,h){h.r(F),h.d(F,{NumberControlRenderer:function(){return H},default:function(){return I}});var r=h(15767),k=h(87363),N=h.n(k),X=h(26729),c=h(42977),Y=h(84875),A=h.n(Y),M=h(94391),J=h(45581),I=function(_){(0,r.ZT)(u,_);function u(e){var n=_.call(this,e)||this;n.handleChange=n.handleChange.bind(n),n.handleChangeUnit=n.handleChangeUnit.bind(n);var t=n.getUnit(),s=(0,c.GRe)(e.unitOptions),l=e.formItem,i=e.value;return l&&n.formatNumber(i,!0),n.state={unit:t,unitOptions:s},n}return u.prototype.doAction=function(e,n,t,s){var l,i;t===void 0&&(t=!1);var a=e==null?void 0:e.actionType,o=this.props,p=o.min,E=o.max,U=o.precision,O=o.step,y=o.resetValue,w=o.big,C=o.onChange,m=o.clearValueOnEmpty,v=o.formStore,P=o.store,g=o.name;if(a==="clear")C==null||C(m?void 0:"");else if(a==="reset"){var x=M.Y2U.normalizePrecision(this.filterNum(U),this.filterNum(O)),b=(i=(0,c.E04)((l=v==null?void 0:v.pristine)!==null&&l!==void 0?l:P==null?void 0:P.pristine,g))!==null&&i!==void 0?i:y,f=M.Y2U.normalizeValue(b!=null?b:"",this.filterNum(p,w),this.filterNum(E,w),x,b!=null?b:"",m,w);C==null||C(m&&f===""?void 0:f)}},u.prototype.formatNumber=function(e,n){n===void 0&&(n=!1);var t=this.props,s=t.showAsPercent,l=t.suffix,i=t.step,a=t.big,o=t.setPrinstineValue,p=this.props.precision;s&&l==="%"&&(p=(p||0)+2);var E=this.getUnit(),U=(0,c.GRe)(this.props.unitOptions),O=M.Y2U.normalizePrecision(this.filterNum(p),this.filterNum(i));if(e!=null&&O!=null&&(!E||U.length===0)&&a!==!0){var y=parseFloat((0,X.FH)(e.toString(),".",O));!isNaN(y)&&y!==e&&(e=y,n&&o(y))}return e},u.prototype.getUnit=function(){var e,n,t=this.props;if(t.unitOptions&&t.unitOptions.length){var s=(0,c.GRe)(t.unitOptions).map(function(p){return p.value});if(t.value&&typeof t.value=="string"){var l=s[0];s.sort(function(p,E){return E.length-p.length});try{for(var i=(0,r.XA)(s),a=i.next();!a.done;a=i.next()){var o=a.value;if(t.value.endsWith(o)){l=o;break}}}catch(p){e={error:p}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return l}else return s[0]}},u.prototype.getValue=function(e){var n=this.props,t=n.resetValue,s=n.unitOptions;if(!(e&&typeof e!="number"&&typeof e!="string"))return e!==null&&s&&this.state.unit&&(e=e+String(this.state.unit)),e===null?t!=null?t:null:e},u.prototype.dispatchEvent=function(e){return(0,r.mG)(this,void 0,void 0,function(){var n,t,s;return(0,r.Jh)(this,function(l){return n=this.props,t=n.dispatchEvent,s=n.value,t(e,(0,c.vXk)(this.props,{value:s})),[2]})})},u.prototype.handleChange=function(e){return(0,r.mG)(this,void 0,void 0,function(){var n,t,s,l,i,a,o;return(0,r.Jh)(this,function(p){switch(p.label){case 0:return n=this.props,t=n.onChange,s=n.dispatchEvent,l=n.clearValueOnEmpty,i=this.getValue(e),a=l&&i===""?void 0:i,a=this.formatNumber(a),[4,s("change",(0,c.vXk)(this.props,{value:a}))];case 1:return o=p.sent(),o!=null&&o.prevented?[2]:(t(a),[2])}})})},u.prototype.changeCursorPos=function(e){var n,t;if(!isNaN(e)){var s=this.props,l=s.kilobitSeparator,i=s.prefix,a=e>0?Math.floor(e):Math.ceil(e),o="".concat(e).length;if(i&&(o+=i.length),l){var p=Math.floor(("".concat(Math.abs(a)).length-1)/3);p>0&&(o+=p)}this.input&&(l||i)&&((t=(n=this.input).setSelectionRange)===null||t===void 0||t.call(n,o,o))}},u.prototype.filterNum=function(e,n){if(n===void 0&&(n=!1),typeof e!="undefined")return typeof e!="number"&&(e=(0,c.hXT)(e,this.props.data),e=/^[-]?\d+/.test(e)?n?e:+e:void 0),e},u.prototype.handleChangeUnit=function(e){var n=this,t=this.props.value,s=this.state.unit;this.setState({unit:e.value},function(){t&&(t=t.toString().replace(s,""),n.props.onChange(t+n.state.unit))})},u.prototype.componentDidUpdate=function(e){var n=this.getUnit(),t=this.props,s=t.value,l=t.formInited,i=t.onChange,a=t.setPrinstineValue;if(s!=null&&(typeof s=="string"||typeof s=="number")&&n&&!String(s).endsWith(n)){var o=this.getValue(s);l===!1?a==null||a(o):i==null||i(o)}var p=/^([-+]?(([1-9]\d*\.?\d*)|(0\.\d*[1-9]))[^\d\.]*)$/;this.props.value!==e.value&&p.test(this.props.value)&&this.setState({unit:n}),this.props.unitOptions!==e.unitOptions&&this.setState({unitOptions:(0,c.GRe)(this.props.unitOptions)})},u.prototype.inputRef=function(e){this.input=e},u.prototype.focus=function(){this.input&&this.input.focus()},u.prototype.render=function(){var e,n=this,t=this.props,s=t.className,l=t.style,i=t.classPrefix,a=t.value,o=t.step,p=t.precision,E=t.max,U=t.min,O=t.disabled,y=t.placeholder,w=t.showSteps,C=t.borderMode,m=t.suffix,v=t.prefix,P=t.kilobitSeparator,g=t.unitOptions,x=t.readOnly,b=t.keyboard,f=t.displayMode,T=t.big,Q=t.resetValue,$=t.clearValueOnEmpty,R=t.css,D=t.themeCss,z=t.inputControlClassName,S=t.id,G=t.env,V=t.name,q=t.showAsPercent,tt=t.testIdBuilder,et=t.popOverContainer,B=this.state.unit,L=this.filterNum(p),nt=P||v||m?function(d,j){var W,Z=j.userTyping,ot=j.input;if(P&&d)if(Z||n.input===document.activeElement){var K=d.toString().split(".");K[0]=K[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),d=K.join(".")}else d=(0,c.V2q)(d,L);return m&&Z&&((W=n.input)===null||W===void 0?void 0:W.selectionStart)===ot.length?"".concat(v||"").concat(d):"".concat(v||"").concat(d).concat(m||"")}:void 0,it=function(d){return d&&(v&&(d=d.replace(v,"")),m&&(d=d.replace(m,"")),P&&(d=d.replace(/,/g,""))),d},rt=B&&a&&typeof a=="string"?a.replace(B,""):isNaN(a)?void 0:a;return N().createElement("div",{className:A()("".concat(i,"NumberControl"),(e={},e["".concat(i,"NumberControl--withUnit")]=g,e),s),style:l},N().createElement(M.Y2U,{name:V,inputControlClassName:A()(z,(0,c.GwQ)((0,r.pi)((0,r.pi)({},this.props),{name:"inputControlClassName",id:S,themeCss:D||R})),(0,c.GwQ)((0,r.pi)((0,r.pi)({},this.props),{name:"inputControlClassName",id:S,themeCss:D||R,extra:"inner"}))),inputRef:this.inputRef,value:rt,resetValue:Q,step:o,max:this.filterNum(E,T),min:this.filterNum(U,T),formatter:nt,parser:it,onChange:this.handleChange,disabled:O,placeholder:y,precision:L,showSteps:w,borderMode:C,readOnly:x,suffix:m,showAsPercent:q,onFocus:function(){return n.dispatchEvent("focus")},onBlur:function(){return n.dispatchEvent("blur")},keyboard:b,displayMode:f,big:T,clearValueOnEmpty:$,testIdBuilder:tt}),Array.isArray(g)&&g.length!==0?g.length>1?N().createElement(M.PhF,{value:B,clearable:!1,options:this.state.unitOptions||[],onChange:this.handleChangeUnit,className:"".concat(i,"NumberControl-unit"),disabled:O,popOverContainer:et}):N().createElement("div",{className:A()("".concat(i,"NumberControl-unit"),"".concat(i,"NumberControl-single-unit"),"".concat(i,"Select"),"".concat(x?"".concat(i,"NumberControl-readonly"):""))},typeof g[0]=="string"?g[0]:g[0].label):null,N().createElement(c.cWM,(0,r.pi)({},this.props,{config:{themeCss:D||R,classNames:[{key:"inputControlClassName",weights:{focused:{pre:"".concat(i,"Number-").concat(f?f+"-":"","focused.")},disabled:{pre:"".concat(i,"Number-").concat(f?f+"-":"","disabled.")}}}],id:S},env:G})),N().createElement(c.cWM,(0,r.pi)({},this.props,{config:{themeCss:(0,c.$4Z)(D||R),classNames:[{key:"inputControlClassName",weights:{default:{inner:"input"},hover:{inner:"input"},focused:{pre:"".concat(i,"Number-").concat(f?f+"-":"","focused."),inner:"input"},disabled:{pre:"".concat(i,"Number-").concat(f?f+"-":"","disabled."),inner:"input"}}}],id:S&&S+"-inner"},env:G})))},u.defaultProps={step:1,resetValue:"",clearValueOnEmpty:!1},(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[String]),(0,r.w6)("design:returntype",Promise)],u.prototype,"dispatchEvent",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Number]),(0,r.w6)("design:returntype",void 0)],u.prototype,"changeCursorPos",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",void 0)],u.prototype,"inputRef",null),(0,r.gn)([(0,J.i)(),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",void 0)],u.prototype,"render",null),u}(N().Component),H=function(_){(0,r.ZT)(u,_);function u(){return _!==null&&_.apply(this,arguments)||this}return u.defaultProps=(0,r.pi)({validations:"isNumeric"},I.defaultProps),u=(0,r.gn)([(0,c.xJW)({type:"input-number",detectProps:["unitOptions","precision","suffix"]})],u),u}(I)}}]);
