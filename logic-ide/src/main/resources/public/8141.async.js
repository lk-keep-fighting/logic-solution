"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[8141],{28141:function(B,O,s){s.r(O),s.d(O,{ColorControl:function(){return P},default:function(){return k}});var p=s(15767),T=s(87363),o=s.n(T),m=s(61533),K=s.n(m),C=s(78185),_=s(76687),i=s(42977),N=s(18109),P=function(M){(0,p.ZT)(r,M);function r(t){var e=M.call(this,t)||this;return e.state={isOpened:!1,isFocused:!1,inputValue:e.props.value||"",tempValue:e.props.value||""},e.open=e.open.bind(e),e.close=e.close.bind(e),e.focus=e.focus.bind(e),e.blur=e.blur.bind(e),e.handleChange=e.handleChange.bind(e),e.handleTempChange=e.handleTempChange.bind(e),e.handleConfirm=e.handleConfirm.bind(e),e.handleFocus=e.handleFocus.bind(e),e.handleBlur=e.handleBlur.bind(e),e.clearValue=e.clearValue.bind(e),e.handleInputChange=e.handleInputChange.bind(e),e.handleClick=e.handleClick.bind(e),e.preview=o().createRef(),e.input=o().createRef(),e}return r.prototype.componentDidUpdate=function(t){var e=this.props;t.value!==e.value&&this.setState({inputValue:e.value||""})},r.prototype.handleFocus=function(){this.setState({isFocused:!0})},r.prototype.handleBlur=function(){this.setState({isFocused:!1,inputValue:this.props.value})},r.prototype.focus=function(){this.input.current&&this.input.current.focus()},r.prototype.blur=function(){this.input.current&&this.input.current.blur()},r.prototype.open=function(t){this.props.disabled||this.setState({isOpened:!0},t)},r.prototype.close=function(){this.setState({isOpened:!1})},r.prototype.clearValue=function(){var t=this.props,e=t.onChange,n=t.resetValue;e(n||"")},r.prototype.handleClick=function(){this.state.isOpened?this.close():this.open(this.focus)},r.prototype.handleInputChange=function(t){var e=this;if(this.props.allowCustomColor){var n=this.props.onChange;this.setState({inputValue:t.currentTarget.value},function(){var l=e.validateColor(e.state.inputValue);l&&n(e.state.inputValue)})}},r.prototype.validateColor=function(t){if(t===""||t==="inherit"||t==="transparent")return!1;var e=document.createElement("img");return e.style.color="rgb(0, 0, 0)",e.style.color=t,e.style.color!=="rgb(0, 0, 0)"?!0:(e.style.color="rgb(255, 255, 255)",e.style.color=t,e.style.color!=="rgb(255, 255, 255)")},r.prototype.handleChange=function(t){var e=this.props,n=e.onChange,l=e.format;n(l==="rgba"?"rgba(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,", ").concat(t.rgb.a,")"):l==="rgb"?"rgb(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,")"):l==="hexa"?this.rgbaToHex(t.rgb.r,t.rgb.g,t.rgb.b,t.rgb.a):l==="hsl"?"hsl(".concat(Math.round(t.hsl.h),", ").concat(Math.round(t.hsl.s*100),"%, ").concat(Math.round(t.hsl.l*100),"%)"):t.hex)},r.prototype.handleTempChange=function(t){var e=this.state.tempValue,n=this.props.format;n==="rgba"?e="rgba(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,", ").concat(t.rgb.a,")"):n==="rgb"?e="rgb(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,")"):n==="hexa"?e=this.rgbaToHex(t.rgb.r,t.rgb.g,t.rgb.b,t.rgb.a):n==="hsl"?e="hsl(".concat(Math.round(t.hsl.h),", ").concat(Math.round(t.hsl.s*100),"%, ").concat(Math.round(t.hsl.l*100),"%)"):e=t.hex,this.setState({tempValue:e})},r.prototype.handleConfirm=function(){var t=this.props.onChange,e=this.state.tempValue;t(e),this.close()},r.prototype.rgbaToHex=function(t,e,n,l){if(t<0||t>255||e<0||e>255||n<0||n>255)return"#00000000";(typeof l=="undefined"||l>1)&&(l=1),l<.01&&(l=0);var u=function(v){return v.toString(16).padStart(2,"0").toUpperCase()},d=u(Math.round(l*255)),b=u(t),f=u(e),g=u(n);return"#".concat(b).concat(f).concat(g).concat(d)},r.prototype.render=function(){var t=this,e=this.props,n=e.classPrefix,l=e.className,u=e.popoverClassName,d=e.value,b=e.placeholder,f=e.disabled,g=e.popOverContainer,v=e.popOverContainerSelector,x=e.format,A=e.clearable,I=e.placement,c=e.classnames,h=e.presetColors,V=e.allowCustomColor,E=e.mobileUI,S=this.props.translate,y=this.state.isOpened,U=this.state.isFocused,D=this.state.tempValue;return o().createElement("div",{className:c("ColorPicker",{"is-disabled":f,"is-focused":U,"is-opened":y},l)},o().createElement("span",{onClick:this.handleClick,className:c("ColorPicker-preview")},o().createElement("i",{ref:this.preview,className:"".concat(n,"ColorPicker-previewIcon"),style:{background:this.state.inputValue||"#ccc"}})),o().createElement("input",{ref:this.input,type:"text",autoComplete:"off",size:10,className:c("ColorPicker-input"),value:this.state.inputValue||"",placeholder:S(b),disabled:f,onChange:this.handleInputChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,readOnly:E}),A&&!f&&d?o().createElement("a",{onClick:this.clearValue,className:c("ColorPicker-clear")},o().createElement(_.JO,{icon:"input-clear",className:"icon"})):null,o().createElement("span",{className:c("ColorPicker-arrow")},o().createElement(_.JO,{icon:"right-arrow-bold",className:"icon",onClick:this.handleClick})),!E&&y?o().createElement(i.aVW,{placement:I||"auto",target:function(){return(0,m.findDOMNode)(t)},onHide:this.close,container:g||function(){return(0,m.findDOMNode)(t)},containerSelector:v,rootClose:!1,show:!0},o().createElement(i.v$m,{classPrefix:n,className:c("ColorPicker-popover",u),onHide:this.close,overlay:!0},V?o().createElement(C.xS,{styles:{},disableAlpha:!!~["rgb","hex"].indexOf(x),color:d,presetColors:h,onChangeComplete:this.handleChange}):o().createElement(C.Lf,{color:d,colors:Array.isArray(h)?h.filter(function(a){return typeof a=="string"||(0,i.Kn2)(a)}).map(function(a){return typeof a=="string"?a:(0,i.Kn2)(a)?a==null?void 0:a.color:a}):void 0,onChangeComplete:this.handleChange}))):null,E&&o().createElement(N.Z,{className:c("".concat(n,"ColorPicker-popup")),container:g,isShow:y,onHide:this.handleClick,showConfirm:!0,onConfirm:this.handleConfirm},V?o().createElement(C.xS,{styles:{},disableAlpha:!!~["rgb","hex"].indexOf(x),color:D,presetColors:h,onChangeComplete:this.handleTempChange}):o().createElement(C.Lf,{color:D,colors:Array.isArray(h)?h.filter(function(a){return typeof a=="string"||(0,i.Kn2)(a)}).map(function(a){return typeof a=="string"?a:(0,i.Kn2)(a)?a==null?void 0:a.color:a}):void 0,onChangeComplete:this.handleTempChange})))},r.defaultProps={format:"hex",clearable:!0,placeholder:"ColorPicker.placeholder",allowCustomColor:!0},(0,p.gn)([i.NjZ,(0,p.w6)("design:type",Function),(0,p.w6)("design:paramtypes",[String]),(0,p.w6)("design:returntype",void 0)],r.prototype,"validateColor",null),r}(o().PureComponent),k=(0,i.YYN)((0,i.eAU)((0,i.nmi)(P,{value:"onChange"})))}}]);
