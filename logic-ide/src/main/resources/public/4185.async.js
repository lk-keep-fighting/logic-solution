"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4185],{42651:function(B,L,e){e.d(L,{Z:function(){return u}});var C=e(21140),a=e.n(C),c=e(63466),h=e.n(c),o=e(52510),y=e.n(o),u=function(){function x(s){a()(this,x),y()(this,"_nodeConfig",void 0),y()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(s)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return h()(x,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(n){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=n)}},{key:"setGroups",value:function(n){this._groups=n}},{key:"setConfigSchemel",value:function(n){this._nodeConfig.data?(this._nodeConfig.data.configSchema=n,this._nodeConfig.data.config={type:n}):this._nodeConfig.data={configSchema:n,config:{type:n}}}},{key:"setConfigData",value:function(n){this._nodeConfig.data?this._nodeConfig.data.config=n:this._nodeConfig.data={config:n}}}]),x}()},3619:function(B,L,e){e.d(L,{V:function(){return a}});var C=e(17600),a=function(o){var y=new C.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),u=o.getNodes(),x=o.getEdges(),s=y.layout({nodes:u,edges:x}),n=s.nodes,f=n===void 0?[]:n;u.forEach(function(g){var _=f.find(function(S){return S.id===g.id});_.x-=g.size().width/2,_.y-=g.size().height/2,g.position(_.x,_.y)})},c=function(o,y){debugger;var u=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),x=u.layout({nodes:o,edges:y}),s=x.nodes,n=s===void 0?[]:s;o.forEach(function(f){var g=n.find(function(_){return _.id===f.id});g.x-=f.size().width/2,g.y-=f.size().height/2,f.position(g.x,g.y)})}},89147:function(B,L,e){e.d(L,{m:function(){return S}});var C=e(5671),a=e(95812),c=e(53914),h={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},o=e(33130),y=function(d){return(0,o.jsx)("div",{className:h.customNode,children:(0,o.jsx)(c.Z,{className:"input",value:d==null?void 0:d.data,width:80})})},u=e(371),x=function(d){return(0,o.jsx)("div",{className:styles.customNode,children:(0,o.jsx)(u.Z,{className:"input",value:d==null?void 0:d.data,width:80})})},s=e(57213),n=e.n(s),f=function(d){var m,E,k,b=d.node,D=(m=b.data.config)===null||m===void 0?void 0:m.name,I=D||"case";return(0,o.jsxs)("div",{className:h.customNode,children:[(0,o.jsx)("span",{children:"case"}),(0,o.jsx)(c.Z,{addonAfter:D,className:"input",value:b==null||(E=b.data)===null||E===void 0||(k=E.config)===null||k===void 0?void 0:k.case,width:150,onChange:function(T){var j=b.data;b.setData(n()(n()({},j),{},{config:n()(n()({},j.config),{},{case:T.target.value})}))}})]})},g=function(d){var m,E=d.node;return(0,o.jsx)("div",{className:h.customNode,children:(0,o.jsx)(c.Z,{addonBefore:"switch",className:"input",value:(m=E.data)===null||m===void 0?void 0:m.config.condition,onChange:function(b){var D=E.data;E.setData(n()(n()({},D),{},{config:n()(n()({},D.config),{},{condition:b.target.value})}))},width:100})})},_=function(d){return(0,o.jsx)("div",{className:h.customNode,children:(0,o.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function S(v){v.forEach(function(d){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+d.name),C.kJ.registerNode(d.name,d.config,!0)}),(0,a.z2)({shape:"string",component:y}),(0,a.z2)({shape:"num",component:x}),(0,a.z2)({shape:"switch",component:g}),(0,a.z2)({shape:"switch-case",component:f}),(0,a.z2)({shape:"switch-default",component:_})}},58146:function(B,L,e){e.d(L,{K:function(){return x}});var C=e(57213),a=e.n(C),c=e(12490),h=50,o=50,y=[{name:"ExtSharp",config:{width:100,height:o,attrs:{body:{rx:6,ry:6,stroke:"#5F95FF",strokeWidth:1,fill:"rgba(95,149,255,0.05)",refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}],u=e(42651);function x(s,n,f){var g=50,_=50,S={body:{}},v=[new u.Z({shape:"circle",width:g,height:_,attrs:{body:a()(a()({},S.body),{},{fill:"white"}),text:{text:"\u4EA4\u4E92\u70B9"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:c.Tt,data:{config:{type:"wait-for-continue"}},_groups:["global"]}),new u.Z({shape:"circle",label:"end",width:g,height:_,attrs:{body:a()(a()({},S.body),{},{fill:"#d9d9d9"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:c.Tt,data:{config:{type:"end"}},_groups:["global"]}),new u.Z({shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{"xlink:href":"/icons/http.svg",width:20,x:2,y:2}},data:{config:{type:"http",method:"POST"}},ports:c.Tt,_groups:["biz"]}),new u.Z({shape:"ExtSharp",ports:c.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/code.svg"},text:{text:"js\u811A\u672C",fontSize:14}},data:{config:{type:"js"}},_groups:["biz"]}),new u.Z({shape:"ExtSharp",ports:c.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/java.svg"},text:{text:"java\u65B9\u6CD5",fontSize:14}},data:{config:{type:"java"}},_groups:["biz"]}),new u.Z({shape:"ExtSharp",ports:c.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/CarbonSubflowLocal.svg"},text:{text:"\u590D\u7528\u903B\u8F91",fontSize:14}},data:{config:{type:"sub-logic"}},_groups:["biz"]}),new u.Z({shape:"ExtSharp",width:50,height:_,label:"switch",attrs:{image:{"xlink:href":"/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:c.Tt,_groups:["ctrl"]}),new u.Z({shape:"ExtSharp",width:g,height:_,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"case",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:c.Tt,_groups:["ctrl"]}),new u.Z({shape:"ExtSharp",width:50,height:_,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"default",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:c.Tt,_groups:["ctrl"]}),new u.Z({shape:"ExtSharp",width:g,height:_,attrs:{image:{"xlink:href":"/icons/delay.svg",width:30,x:8,y:10},text:{text:"\u7B49\u5F85",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"wait",timeout:"2000"}},ports:c.Tt,_groups:["ctrl"]})];s&&s.length>0&&Array.prototype.push.apply(v,s);var d=[{name:"global",title:"\u5168\u5C40\u8282\u70B9",graphHeight:110},{name:"ctrl",title:"\u903B\u8F91\u63A7\u5236",graphHeight:220},{name:"biz",title:"\u4E1A\u52A1\u8C03\u7528",graphHeight:220}];n&&n.length>0&&Array.prototype.push.apply(d,n);var m=y;return f&&f.length>0&&Array.prototype.push.apply(m,f),{Shapes:m,Nodes:v,Groups:d}}},48364:function(B,L,e){e.d(L,{Uh:function(){return T},YH:function(){return g},az:function(){return S},b9:function(){return I},gC:function(){return E},m9:function(){return d},yi:function(){return b}});var C=e(25359),a=e.n(C),c=e(49811),h=e.n(c),o=e(70517),y=e(5726),u=e.n(y);function x(i){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime().mark(function i(l){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",axios.post("/api/ide/pub/logic/dev-to-test".concat(l)));case 1:case"end":return t.stop()}},i)})),s.apply(this,arguments)}function n(i){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function i(l){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",axios.get("/api/ide/logic/".concat(l)));case 1:case"end":return t.stop()}},i)})),f.apply(this,arguments)}function g(i){return _.apply(this,arguments)}function _(){return _=h()(a()().mark(function i(l){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.Z.get("/api/ide/logic/".concat(l,"/config")).then(function(p){var r;return(r=p.data)===null||r===void 0?void 0:r.data}));case 1:case"end":return t.stop()}},i)})),_.apply(this,arguments)}function S(i,l,w){return v.apply(this,arguments)}function v(){return v=h()(a()().mark(function i(l,w,t){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",o.Z.put("/api/ide/logic/edit/".concat(l),{version:w,configJson:t,updateTime:u()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return r.stop()}},i)})),v.apply(this,arguments)}function d(i){return m.apply(this,arguments)}function m(){return m=h()(a()().mark(function i(l){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.Z.get("/api/ide/logic-instance/".concat(l)).then(function(p){var r=p.data.data;return r}));case 1:case"end":return t.stop()}},i)})),m.apply(this,arguments)}function E(i){return k.apply(this,arguments)}function k(){return k=h()(a()().mark(function i(l){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.Z.post("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[l.logicId],type:"="},{dataIndex:"bizId",values:[l.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(p){var r=p.data.data.records;return r&&r.map(function(N){N.itemLogs&&(N.itemLogs=JSON.parse(N.itemLogs))}),r}));case 1:case"end":return t.stop()}},i)})),k.apply(this,arguments)}function b(i){return D.apply(this,arguments)}function D(){return D=h()(a()().mark(function i(l){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.Z.post("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[l],type:"="}],pageSize:1e3}).then(function(p){var r=p.data.data.records;return r&&r.length>0&&r[0].itemLogs&&(r[0].itemLogs=JSON.parse(r[0].itemLogs)),r[0]}));case 1:case"end":return t.stop()}},i)})),D.apply(this,arguments)}function I(i,l){return P.apply(this,arguments)}function P(){return P=h()(a()().mark(function i(l,w){return a()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",o.Z.post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[l],type:"="},{dataIndex:"version",values:[w],type:"="}]}).then(function(r){var N=r.data.data.records[0].configJson,O=JSON.parse(N);return O}));case 1:case"end":return p.stop()}},i)})),P.apply(this,arguments)}function T(i,l){return j.apply(this,arguments)}function j(){return j=h()(a()().mark(function i(l,w){return a()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",o.Z.post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[l],type:"="},{dataIndex:"version",values:[w],type:"="}]}).then(function(r){var N=r.data.data.records[0],O=N.configJson;return N.configJson=JSON.parse(O),N}));case 1:case"end":return p.stop()}},i)})),j.apply(this,arguments)}}}]);
