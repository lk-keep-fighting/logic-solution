"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2883],{44132:function(L,h,e){var b=e(57213),n=e.n(b),P=e(54306),i=e.n(P),p=e(70517),f=e(90010),O=e.n(f),C=e(23620),d=e(2069),l=e(87363),_=e.n(l),T=e(12472),D=e(33358),I=e(49500),R=e(16123),y=e(78057),r=e(69078),a=e(98896),E=e(31837),c=e(32126),t=e(33130),o=function(u){var g=(0,l.useState)({type:"page"}),A=i()(g,2),j=A[0],v=A[1],M=(0,l.useState)(),x=i()(M,2),G=x[0],Z=x[1],$=(0,l.useState)(),k=i()($,2),z=k[0],Y=k[1],S="cxd",F="zh-CN";return(0,l.useEffect)(function(){(0,a.m)(p.Z)},[]),(0,l.useEffect)(function(){u.pageId&&((0,T.UD)(u.pageId).then(function(B){v(B)}),c.S.getEnvJson().then(function(B){Z(JSON.parse(E.j.getEnv()))}))},[u.pageId]),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.qR,{theme:S,position:"top-right",locale:F},"toast"),(0,t.jsx)(d.wx,{theme:S,locale:F},"alert"),(0,C.sYA)(j,{data:n()({envs:G},u.data)},{fetcher:function(U){var W=U.url,K=U.method,w=U.data,J=U.responseType,m=U.config,N=U.headers;return u.data&&u.data.runtime&&(W="/api/ide/papi/".concat(u.data.runtime).concat(W)),m=m||{},m.withCredentials=!0,J&&(m.responseType=J),m.cancelExecutor&&(m.cancelToken=new p.Z.CancelToken(m.cancelExecutor)),m.headers=N||{},m.headers.Authorization||(m.headers.Authorization="Bearer "+r.F.getTokenFormLocal()),K!=="post"&&K!=="put"&&K!=="patch"?(w&&(m.params=w),p.Z[K](W,m)):(w&&w instanceof FormData?(m.headers=m.headers||{},m.headers["Content-Type"]="multipart/form-data"):w&&typeof w!="string"&&!(w instanceof Blob)&&!(w instanceof ArrayBuffer)&&(w=JSON.stringify(w),m.headers=m.headers||{},m.headers["Content-Type"]="application/json"),p.Z[K](W,w,m))},isCancel:function(U){return p.Z.isCancel(U)},copy:function(U){O()(U),d.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:S,jumpTo:function(U,W){debugger;W.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+U,"_blank"):window.location.hash=U}})]})};h.Z=o},98896:function(L,h,e){e.d(h,{m:function(){return p}});var b=e(25359),n=e.n(b),P=e(49811),i=e.n(P);function p(O){return f.apply(this,arguments)}function f(){return f=i()(n()().mark(function O(C){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:C.interceptors.response.use(function(_){return console.log("axios response"),console.log(_),_&&_.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),_.data.error||(_.data.error={code:0}),_.data.code==500&&(_.data.error={code:500,message:_.data.msg}),_.data.data&&_.data.data.records&&(_.data.data.items=_.data.data.records),_):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(_.data),Promise.reject(new Error(_.data.message)))},function(_){if(console.log("\u6355\u6349axios error"),console.log(_),_.response&&_.response.data){var T,D=_.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((T=_.response.data.error)===null||T===void 0?void 0:T.code)==0&&(_.response.data.error.code=500),console.log(D),D}return Promise.reject(_)});case 1:case"end":return l.stop()}},O)})),f.apply(this,arguments)}},69078:function(L,h,e){e.d(h,{F:function(){return b}});var b={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(P){return localStorage.setItem("token",P)}}},95259:function(L,h,e){e.r(h);var b=e(57213),n=e.n(b),P=e(44132),i=e(98306),p=e(33130),f=function(C){var d=(0,i.UO)(),l=d.pageId,_=d.runtime;return(0,p.jsx)(P.Z,{pageId:l||"",data:n()(n()({},C),{},{runtime:_})})};h.default=f},32126:function(L,h,e){e.d(h,{S:function(){return _}});var b=e(25359),n=e.n(b),P=e(49811),i=e.n(P),p=e(21140),f=e.n(p),O=e(63466),C=e.n(O),d=e(31837),l=e(57475),_=function(){function T(){f()(this,T)}return C()(T,null,[{key:"getEnvJson",value:function(){var D=i()(n()().mark(function R(){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.U2)("/api/runtime/env").then(function(a){return a.data.data}).then(function(a){return d.j.setModel(a.UI_CONFIG_MODEL),d.j.setEnv(JSON.stringify(a)),d.j.setApiUrlPrefix(a.API_GATEWAY_PREFIX),d.j.setReryApi(a.CUSTOM_RETRY_URL),d.j.setReryApi(a.CUSTOM_RETRY_URL),a}));case 1:case"end":return r.stop()}},R)}));function I(){return D.apply(this,arguments)}return I}()},{key:"getRemoteRuntimeConfig",value:function(){var D=i()(n()().mark(function R(){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.v_)("/api/ide/remote-runtimes").then(function(a){return a.data}).then(function(a){return console.log("remote runtimes:",a.data),d.j.setRemoteRuntimes(JSON.stringify(a.data)),a}));case 1:case"end":return r.stop()}},R)}));function I(){return D.apply(this,arguments)}return I}()}]),T}()},12472:function(L,h,e){e.d(h,{CD:function(){return I},UD:function(){return T},n4:function(){return y},wx:function(){return a}});var b=e(25359),n=e.n(b),P=e(49811),i=e.n(P),p=e(31837),f=e(21140),O=e.n(f),C=e(63466),d=e.n(C),l=e(57475),_=function(){function c(){O()(this,c)}return d()(c,null,[{key:"getAssetFromDb",value:function(){var t=i()(n()().mark(function s(u,g){var A;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,l.U2)("/api/ide/settings/asset/".concat(u,"/").concat(g));case 2:return A=v.sent.data,v.abrupt("return",JSON.parse(A.data.config));case 4:case"end":return v.stop()}},s)}));function o(s,u){return t.apply(this,arguments)}return o}()},{key:"saveAssetToDb",value:function(){var t=i()(n()().mark(function s(u,g,A){return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,l.v_)("/api/ide/settings/asset/".concat(u,"/").concat(g),A));case 1:case"end":return v.stop()}},s)}));function o(s,u,g){return t.apply(this,arguments)}return o}()},{key:"getRemoteAssetFromDb",value:function(){var t=i()(n()().mark(function s(u,g,A){var j;return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,l.U2)("/api/ide/papi/".concat(u,"/api/ide/settings/asset/").concat(g,"/").concat(A));case 2:return j=M.sent.data,M.abrupt("return",JSON.parse(j.data.config));case 4:case"end":return M.stop()}},s)}));function o(s,u,g){return t.apply(this,arguments)}return o}()},{key:"saveRemoteAssetToDb",value:function(){var t=i()(n()().mark(function s(u,g,A,j){return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,l.v_)("/api/ide/papi/".concat(u,"/api/ide/settings/asset/").concat(g,"/").concat(A),j));case 1:case"end":return M.stop()}},s)}));function o(s,u,g,A){return t.apply(this,arguments)}return o}()}]),c}();function T(c){return D.apply(this,arguments)}function D(){return D=i()(n()().mark(function c(t){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(p.j.getModel()!="db"){s.next=4;break}return s.abrupt("return",_.getAssetFromDb("page",t));case 4:return s.next=6,(0,l.U2)("/logic/setting/pages/".concat(t,".json"));case 6:return s.abrupt("return",s.sent.data);case 7:case"end":return s.stop()}},c)})),D.apply(this,arguments)}function I(c){return R.apply(this,arguments)}function R(){return R=i()(n()().mark(function c(t){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(p.j.getModel()!="db"){s.next=4;break}return s.abrupt("return",_.getAssetFromDb("form",t));case 4:return s.next=6,(0,l.U2)("/logic/setting/forms/".concat(t,".json"));case 6:return s.abrupt("return",s.sent.data);case 7:case"end":return s.stop()}},c)})),R.apply(this,arguments)}function y(c,t){return r.apply(this,arguments)}function r(){return r=i()(n()().mark(function c(t,o){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(p.j.getModel()!="db"){u.next=4;break}return u.abrupt("return",_.getAssetFromDb(t,o));case 4:return u.next=6,(0,l.U2)("/logic/setting/".concat(t,"s/").concat(o,".json"));case 6:return u.abrupt("return",u.sent.data);case 7:case"end":return u.stop()}},c)})),r.apply(this,arguments)}function a(c,t,o){return E.apply(this,arguments)}function E(){return E=i()(n()().mark(function c(t,o,s){return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(p.j.getModel()!="db"){g.next=2;break}return g.abrupt("return",_.saveAssetToDb(t,o,s));case 2:case"end":return g.stop()}},c)})),E.apply(this,arguments)}},57475:function(L,h,e){e.d(h,{U2:function(){return C},gz:function(){return l},v_:function(){return I}});var b=e(25359),n=e.n(b),P=e(57213),i=e.n(P),p=e(49811),f=e.n(p),O=e(70517);function C(r,a){return d.apply(this,arguments)}function d(){return d=f()(n()().mark(function r(a,E){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",O.Z.get(a,y(E)));case 1:case"end":return t.stop()}},r)})),d.apply(this,arguments)}function l(r,a,E){return _.apply(this,arguments)}function _(){return _=f()(n()().mark(function r(a,E,c){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",O.Z.put(a,E,y(c)));case 1:case"end":return o.stop()}},r)})),_.apply(this,arguments)}function T(r,a){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function r(a,E){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",axios.delete(a,y(E)));case 1:case"end":return t.stop()}},r)})),D.apply(this,arguments)}function I(r,a,E){return R.apply(this,arguments)}function R(){return R=f()(n()().mark(function r(a,E,c){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",O.Z.post(a,E,y(c)));case 1:case"end":return o.stop()}},r)})),R.apply(this,arguments)}function y(r){var a={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(a.Authorization="Bearer "+localStorage.getItem("token")),i()(i()({},r),{},{headers:i()(i()({},a),r==null?void 0:r.headers)})}},78057:function(){}}]);
