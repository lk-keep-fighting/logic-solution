"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2883],{25616:function(W,b,e){var P=e(26068),_=e.n(P),O=e(48305),l=e.n(O),p=e(59321),c=e(87363),U=e.n(c),C=e(874),g=e.n(C),d=e(51857),n=e(91416),T=e(4793),E=e(76465),B=e(51084),R=e(47787),y=e(33194),r=e(52758),a=e(38129),v=e(41648),i=e(22191),t=e(62086),o=function(u){var f=(0,c.useState)({type:"page"}),A=l()(f,2),j=A[0],h=A[1],M=(0,c.useState)(),x=l()(M,2),G=x[0],Z=x[1],$=(0,c.useState)(),k=l()($,2),Y=k[0],H=k[1],S="cxd",F="zh-CN";(0,c.useEffect)(function(){(0,a.m)(p.Z)},[]),(0,c.useEffect)(function(){u.pageId&&((0,T.UD)(u.pageId).then(function(L){h(L)}),i.S.getEnvJson().then(function(L){Z(JSON.parse(v.j.getEnv()))}))},[u.pageId]);var N=function(D,I){console.log("broadcast:",D,I),u.onBroadcast&&u.onBroadcast(D,I.data)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(n.qR,{theme:S,position:"top-right",locale:F},"toast"),(0,t.jsx)(n.wx,{theme:S,locale:F},"alert"),(0,d.sYA)(j,{data:_()({envs:G},u.data),onBroadcast:N},{fetcher:function(D){var I=D.url,K=D.method,w=D.data,J=D.responseType,m=D.config,z=D.headers;return u.data&&u.data.runtime&&(I="/api/ide/papi/".concat(u.data.runtime).concat(I)),m=m||{},m.withCredentials=!0,J&&(m.responseType=J),m.cancelExecutor&&(m.cancelToken=new p.Z.CancelToken(m.cancelExecutor)),m.headers=z||{},m.headers.Authorization||(m.headers.Authorization="Bearer "+r.F.getTokenFormLocal()),K!=="post"&&K!=="put"&&K!=="patch"?(w&&(m.params=w),p.Z[K](I,m)):(w&&w instanceof FormData?(m.headers=m.headers||{},m.headers["Content-Type"]="multipart/form-data"):w&&typeof w!="string"&&!(w instanceof Blob)&&!(w instanceof ArrayBuffer)&&(w=JSON.stringify(w),m.headers=m.headers||{},m.headers["Content-Type"]="application/json"),p.Z[K](I,w,m))},isCancel:function(D){return p.Z.isCancel(D)},copy:function(D){g()(D),n.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:S,jumpTo:function(D,I){debugger;I.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+D,"_blank"):window.location.hash=D}})]})};b.Z=o},38129:function(W,b,e){e.d(b,{m:function(){return p}});var P=e(90228),_=e.n(P),O=e(87999),l=e.n(O);function p(U){return c.apply(this,arguments)}function c(){return c=l()(_()().mark(function U(C){return _()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:C.interceptors.response.use(function(n){return console.log("axios response"),console.log(n),n&&n.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),n.data.error||(n.data.error={code:0}),n.data.code==500&&(n.data.error={code:500,message:n.data.msg}),n.data.data&&n.data.data.records&&(n.data.data.items=n.data.data.records),n):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(n.data),Promise.reject(new Error(n.data.message)))},function(n){if(console.log("\u6355\u6349axios error"),console.log(n),n.response&&n.response.data){var T,E=n.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((T=n.response.data.error)===null||T===void 0?void 0:T.code)==0&&(n.response.data.error.code=500),console.log(E),E}return Promise.reject(n)});case 1:case"end":return d.stop()}},U)})),c.apply(this,arguments)}},52758:function(W,b,e){e.d(b,{F:function(){return P}});var P={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(O){return localStorage.setItem("token",O)}}},93841:function(W,b,e){e.r(b);var P=e(26068),_=e.n(P),O=e(25616),l=e(12864),p=e(62086),c=function(C){var g=(0,l.UO)(),d=g.pageId,n=g.runtime;return(0,p.jsx)(O.Z,{pageId:d||"",data:_()(_()({},C),{},{runtime:n})})};b.default=c},22191:function(W,b,e){e.d(b,{S:function(){return n}});var P=e(90228),_=e.n(P),O=e(87999),l=e.n(O),p=e(25298),c=e.n(p),U=e(17069),C=e.n(U),g=e(41648),d=e(96179),n=function(){function T(){c()(this,T)}return C()(T,null,[{key:"getEnvJson",value:function(){var E=l()(_()().mark(function R(){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.U2)("/api/runtime/env").then(function(a){return a.data.data}).then(function(a){return g.j.setModel(a.UI_CONFIG_MODEL),g.j.setEnv(JSON.stringify(a)),g.j.setApiUrlPrefix(a.API_GATEWAY_PREFIX),g.j.setReryApi(a.CUSTOM_RETRY_URL),g.j.setReryApi(a.CUSTOM_RETRY_URL),a}));case 1:case"end":return r.stop()}},R)}));function B(){return E.apply(this,arguments)}return B}()},{key:"getRemoteRuntimeConfig",value:function(){var E=l()(_()().mark(function R(){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.v_)("/api/ide/remote-runtimes").then(function(a){return a.data}).then(function(a){return console.log("remote runtimes:",a.data),g.j.setRemoteRuntimes(JSON.stringify(a.data)),a}));case 1:case"end":return r.stop()}},R)}));function B(){return E.apply(this,arguments)}return B}()}]),T}()},4793:function(W,b,e){e.d(b,{CD:function(){return B},UD:function(){return T},n4:function(){return y},wx:function(){return a}});var P=e(90228),_=e.n(P),O=e(87999),l=e.n(O),p=e(41648),c=e(25298),U=e.n(c),C=e(17069),g=e.n(C),d=e(96179),n=function(){function i(){U()(this,i)}return g()(i,null,[{key:"getAssetFromDb",value:function(){var t=l()(_()().mark(function s(u,f){var A;return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,d.U2)("/api/ide/settings/asset/".concat(u,"/").concat(f));case 2:return A=h.sent.data,h.abrupt("return",JSON.parse(A.data.config));case 4:case"end":return h.stop()}},s)}));function o(s,u){return t.apply(this,arguments)}return o}()},{key:"saveAssetToDb",value:function(){var t=l()(_()().mark(function s(u,f,A){return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,d.v_)("/api/ide/settings/asset/".concat(u,"/").concat(f),A));case 1:case"end":return h.stop()}},s)}));function o(s,u,f){return t.apply(this,arguments)}return o}()},{key:"getRemoteAssetFromDb",value:function(){var t=l()(_()().mark(function s(u,f,A){var j;return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,d.U2)("/api/ide/papi/".concat(u,"/api/ide/settings/asset/").concat(f,"/").concat(A));case 2:return j=M.sent.data,M.abrupt("return",JSON.parse(j.data.config));case 4:case"end":return M.stop()}},s)}));function o(s,u,f){return t.apply(this,arguments)}return o}()},{key:"saveRemoteAssetToDb",value:function(){var t=l()(_()().mark(function s(u,f,A,j){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,d.v_)("/api/ide/papi/".concat(u,"/api/ide/settings/asset/").concat(f,"/").concat(A),j));case 1:case"end":return M.stop()}},s)}));function o(s,u,f,A){return t.apply(this,arguments)}return o}()}]),i}();function T(i){return E.apply(this,arguments)}function E(){return E=l()(_()().mark(function i(t){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(p.j.getModel()!="db"){s.next=4;break}return s.abrupt("return",n.getAssetFromDb("page",t));case 4:return s.next=6,(0,d.U2)("/logic/setting/pages/".concat(t,".json"));case 6:return s.abrupt("return",s.sent.data);case 7:case"end":return s.stop()}},i)})),E.apply(this,arguments)}function B(i){return R.apply(this,arguments)}function R(){return R=l()(_()().mark(function i(t){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(p.j.getModel()!="db"){s.next=4;break}return s.abrupt("return",n.getAssetFromDb("form",t));case 4:return s.next=6,(0,d.U2)("/logic/setting/forms/".concat(t,".json"));case 6:return s.abrupt("return",s.sent.data);case 7:case"end":return s.stop()}},i)})),R.apply(this,arguments)}function y(i,t){return r.apply(this,arguments)}function r(){return r=l()(_()().mark(function i(t,o){return _()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(p.j.getModel()!="db"){u.next=4;break}return u.abrupt("return",n.getAssetFromDb(t,o));case 4:return u.next=6,(0,d.U2)("/logic/setting/".concat(t,"s/").concat(o,".json"));case 6:return u.abrupt("return",u.sent.data);case 7:case"end":return u.stop()}},i)})),r.apply(this,arguments)}function a(i,t,o){return v.apply(this,arguments)}function v(){return v=l()(_()().mark(function i(t,o,s){return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(p.j.getModel()!="db"){f.next=2;break}return f.abrupt("return",n.saveAssetToDb(t,o,s));case 2:case"end":return f.stop()}},i)})),v.apply(this,arguments)}},96179:function(W,b,e){e.d(b,{U2:function(){return C},gz:function(){return d},v_:function(){return B}});var P=e(90228),_=e.n(P),O=e(26068),l=e.n(O),p=e(87999),c=e.n(p),U=e(59321);function C(r,a){return g.apply(this,arguments)}function g(){return g=c()(_()().mark(function r(a,v){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",U.Z.get(a,y(v)));case 1:case"end":return t.stop()}},r)})),g.apply(this,arguments)}function d(r,a,v){return n.apply(this,arguments)}function n(){return n=c()(_()().mark(function r(a,v,i){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",U.Z.put(a,v,y(i)));case 1:case"end":return o.stop()}},r)})),n.apply(this,arguments)}function T(r,a){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function r(a,v){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",axios.delete(a,y(v)));case 1:case"end":return t.stop()}},r)})),E.apply(this,arguments)}function B(r,a,v){return R.apply(this,arguments)}function R(){return R=c()(_()().mark(function r(a,v,i){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",U.Z.post(a,v,y(i)));case 1:case"end":return o.stop()}},r)})),R.apply(this,arguments)}function y(r){var a={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(a.Authorization="Bearer "+localStorage.getItem("token")),l()(l()({},r),{},{headers:l()(l()({},a),r==null?void 0:r.headers)})}},33194:function(){}}]);
