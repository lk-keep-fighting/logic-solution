"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[6598],{6598:function(pe,$,T){T.r($),T.d($,{TabsRenderer:function(){return de},default:function(){return ee}});var a=T(15767),se=T(87363),C=T.n(se),o=T(42977),ie=T(33170),I=T.n(ie),oe=T(33886),q=T.n(oe),Z=T(94391),re=T(4860),le=T.n(re),ee=function(B){(0,a.ZT)(u,B);function u(e){var t=B.call(this,e)||this;t.newTabDefaultId=3;var n=e.location||window.location,i=e.tabs,l=e.source,r=e.data,d=0;if(typeof e.activeKey!="undefined")d=e.activeKey;else if(n&&Array.isArray(i)){var y=n.hash.substring(1),v=I()(i,function(E){return E.hash===y});v?d=v.hash:e.defaultKey!==void 0?d=typeof e.defaultKey=="string"?(0,o.OgC)(e.defaultKey,e.data):e.defaultKey:e.defaultActiveKey&&(d=typeof e.defaultActiveKey=="string"?(0,o.OgC)(e.defaultActiveKey,e.data):e.defaultActiveKey),d=d||i[0]&&i[0].hash||0}var h=(0,a.CR)(t.initTabArray(i,l,r),2),p=h[0],m=h[1];return t.state={prevKey:void 0,activeKey:t.activeKey=d,localTabs:p,isFromSource:m},t}return u.prototype.initTabArray=function(e,t,n){if(!e)return[[],!1];var i=(0,o.OgC)(t,n,"| raw");if(!Array.isArray(i))return[e,!1];e=Array.isArray(e)?e:[e];var l=[];return i.forEach(function(r){l.push.apply(l,(0,a.ev)([],(0,a.CR)(e.map(function(d){return(0,a.pi)((0,a.pi)({},d),{data:r})})),!1))}),[l,!0]},u.prototype.componentDidMount=function(){var e,t;this.autoJumpToNeighbour(this.activeKey);var n=this.props,i=n.name,l=n.value,r=n.onChange,d=n.source,y=n.tabs,v=n.data,h=this.state.localTabs;if(!(!i||typeof r!="function"||d))if(l=l!=null?l:(0,o.E04)(v,i),l&&Array.isArray(h)){var p=this.resolveKeyByValue(l);p!==void 0&&this.handleSelect(p)}else{var m=this.resolveTabByKey(this.activeKey);m&&l!==((e=m.value)!==null&&e!==void 0?e:m.title)&&r((t=m.value)!==null&&t!==void 0?t:m.title,i)}},u.prototype.componentDidUpdate=function(e,t){var n,i,l,r=this.props,d=this.state.localTabs,y=(0,o.OgC)(e.defaultActiveKey,e.data),v=(0,o.OgC)(r.defaultActiveKey,r.data),h=(0,o.RjM)({tabs:r.tabs,source:(0,o.OgC)(r.source,r.data,"| raw")},{tabs:e.tabs,source:(0,o.OgC)(e.source,e.data,"| raw")},!1);if(h){var p=(0,a.CR)(this.initTabArray(r.tabs,r.source,r.data),2),m=p[0],E=p[1];this.setState({localTabs:m,isFromSource:E}),d=m}if(r.location&&e.location&&r.location.hash!==e.location.hash){var O=r.location.hash.substring(1);if(!O)return;var f=I()(d,function(S){return S.hash===O});f&&f.hash&&f.hash!==this.state.activeKey&&this.setState({activeKey:this.activeKey=f.hash,prevKey:this.state.activeKey})}else if(Array.isArray(d)&&Array.isArray(t.localTabs)&&JSON.stringify(d.map(function(S){return S.hash}))!==JSON.stringify(t.localTabs.map(function(S){return S.hash}))){var _=this.state.activeKey,P=r.location,f=null;if(P&&Array.isArray(d)){var W=P.hash.substring(1);f=I()(d,function(w){return w.hash===W})}f?_=f.hash:(!d||!d.some(function(w,z){return w.hash?w.hash===_:z===_}))&&(_=d&&d[0]&&d[0].hash||0),this.setState({prevKey:void 0,activeKey:this.activeKey=_})}else if(y!==v){if(v==null)return;var A=null,f=I()(d,function(w){return w.hash===v});f?A=f.hash:typeof v=="number"&&d[v]&&(A=v),A!==null&&this.setState({prevKey:y,activeKey:this.activeKey=A})}this.autoJumpToNeighbour(this.activeKey);var N=this.props,F=N.name,b=N.value,j=N.onChange,G=N.source,H=N.data;if(!(!F||typeof j!="function"||G)){var U;b=b!=null?b:(0,o.E04)(H,F);var J=(n=e.value)!==null&&n!==void 0?n:(0,o.E04)(e.data,e.name);if(b!==J&&(U=this.resolveKeyByValue(b))!==void 0&&U!==this.activeKey)this.handleSelect(U);else if(this.activeKey!==t.activeKey){var f=this.resolveTabByKey(this.activeKey);f&&b!==((i=f.value)!==null&&i!==void 0?i:f.title)&&j((l=f.value)!==null&&l!==void 0?l:f.title,F)}}},u.prototype.resolveTabByKey=function(e){var t=this.state.localTabs;if(Array.isArray(t))return I()(t,function(n,i){return n.hash?n.hash===e:i===e})},u.prototype.resolveKeyByValue=function(e){var t=this.state.localTabs;if(Array.isArray(t)){var n=I()(t,function(i){var l;return((l=i.value)!==null&&l!==void 0?l:i.title)===e});return n&&n.hash?n.hash:t.indexOf(n)}},u.prototype.autoJumpToNeighbour=function(e){var t=this.props,n=t.tabs,i=t.data,l=this.state.localTabs;if(Array.isArray(l)){var r=q()(l,function(p,m){return p.hash?p.hash===e:m===e});if(l[r]&&!(0,o.pn4)(l[r],this.props.data))for(var d=l.length,y=r,v=r;y-->=0||v++<d;){var h=null;if(y>=0&&(0,o.pn4)(l[y],i)?h=l[y].hash||y:v<d&&(0,o.pn4)(l[v],i)&&(h=l[v].hash||v),h!==null){this.setState({activeKey:this.activeKey=h});break}}}},u.prototype.handleAdd=function(){var e=this,t=this.state.localTabs.concat();t.push({title:"tab".concat(this.newTabDefaultId++),body:"tab"}),this.setState({localTabs:t},function(){e.switchTo(e.state.localTabs.length-1)})},u.prototype.handleClose=function(e,t){return(0,a.mG)(this,void 0,void 0,function(){var n,i,l,r;return(0,a.Jh)(this,function(d){switch(d.label){case 0:return n=this.state.localTabs.concat(),i=n==null?void 0:n.findIndex(function(y,v){var h;return e===(t?y.hash:(h=y.hash)!==null&&h!==void 0?h:v)}),i===-1?[2]:(n.splice(i,1),l=this.props.dispatchEvent,[4,l("delete",(0,o.vXk)(this.props,{value:e}))]);case 1:return r=d.sent(),r!=null&&r.prevented?[2]:(this.setState({localTabs:n}),[2])}})})},u.prototype.handleEdit=function(e,t){var n=this.state.localTabs.concat();n[e].title=t,this.setState({localTabs:n})},u.prototype.handleDragChange=function(e){return(0,a.mG)(this,void 0,void 0,function(){var t,n,i=this;return(0,a.Jh)(this,function(l){return t=this.resolveTabByKey(this.activeKey),n=this.state.localTabs.concat(),n.splice(e.newIndex,0,n.splice(e.oldIndex,1)[0]),this.setState({localTabs:n},function(){if(t){var r=n.indexOf(t);i.switchTo(r)}}),[2]})})},u.prototype.handleSelect=function(e){var t;return(0,a.mG)(this,void 0,void 0,function(){var n,i,l,r,d,y,v,h,p,m;return(0,a.Jh)(this,function(E){switch(E.label){case 0:return n=this.props,i=n.dispatchEvent,l=n.data,r=n.env,d=n.onSelect,y=n.id,v=this.state.localTabs,h=v==null?void 0:v.find(function(O,f){return e===(O.hash?O.hash:f)}),h?((t=r.tracker)===null||t===void 0||t.call(r,{eventType:"tabChange",eventData:{id:y,key:e}}),[4,i("change",(0,o.vXk)(this.props,{value:h!=null&&h.hash?h==null?void 0:h.hash:e+1}))]):[2];case 1:return p=E.sent(),p!=null&&p.prevented?[2]:(typeof e=="string"&&r?r.updateLocation("#".concat(e)):typeof this.state.activeKey=="string"&&r&&r.updateLocation("#"),this.setState({activeKey:this.activeKey=e,prevKey:this.state.activeKey}),typeof d=="string"?(m=(0,o.S0D)(d,"key","props"),m&&m(e,this.props)):typeof d=="function"&&d(e,this.props),[2])}})})},u.prototype.doAction=function(e,t,n,i){n===void 0&&(n=!1);var l=e==null?void 0:e.actionType,r=Number(i==null?void 0:i.activeKey),d=le()(r)?i==null?void 0:i.activeKey:r,y=i==null?void 0:i.deleteHash;l==="changeActiveKey"?this.handleSelect(typeof d=="number"?d-1:d):l==="deleteTab"&&this.handleClose(y,!0)},u.prototype.switchTo=function(e){var t=this.state.localTabs;Array.isArray(t)&&t[e]&&this.setState({activeKey:this.activeKey=t[e].hash||e})},u.prototype.currentIndex=function(){var e=this,t=this.state.localTabs;return Array.isArray(t)?q()(t,function(n,i){return n.hash?n.hash===e.state.activeKey:i===e.state.activeKey}):-1},u.prototype.renderTabTitle=function(e,t,n){var i=this.props.render;return typeof e=="string"||!e?(0,o.hXT)(e,n):i("tab-title/".concat(t),e,{data:(0,a.pi)({index:t,__index:t},n)})},u.prototype.renderToolbar=function(){var e=this.props,t=e.toolbar,n=e.render,i=e.classnames,l=e.toolbarClassName,r=e.id,d=e.themeCss;return t?C().createElement("div",{className:i("Tabs-toolbar",l,(0,o.GwQ)((0,a.pi)((0,a.pi)({},this.props),{name:"toolbarControlClassName",id:r,themeCss:d})))},n("toolbar",t)):null},u.prototype.renderTabs=function(){var e=this,t=this.props,n=t.classnames,i=t.classPrefix,l=t.contentClassName,r=t.linksClassName,d=t.tabRender,y=t.className,v=t.style,h=t.render,p=t.data,m=t.mode,E=t.tabsMode,O=t.unmountOnExit,f=t.source,_=t.formStore,P=t.formMode,W=t.formHorizontal,A=t.subFormMode,N=t.subFormHorizontal,F=t.addable,b=t.closable,j=t.draggable,G=t.showTip,H=t.showTipClassName,U=t.editable,J=t.sidePosition,S=t.translate,w=t.addBtnText,z=t.collapseOnExceed,ue=t.collapseBtnLabel,L=t.disabled,Q=t.mobileUI,te=t.swipeable,M=t.testIdBuilder,x=t.id,ae=t.wrapperCustomStyle,V=t.themeCss,ce=t.env,he=E||m,X=this.props.mountOnEnter;_&&(X=!1);var ne=this.state,g=ne.localTabs,ve=ne.isFromSource,Y=[],k=[];return ve?(Y=g.map(function(s,c){var K,D,R=(0,o.nW9)(p,(0,o.Kn2)(s.data)?(0,a.pi)({index:c},s.data):{item:s.data,index:c});return(0,o.pn4)(s,R)?C().createElement(Z.OK9,(0,a.pi)({},s,{title:e.renderTabTitle(s.title,c,R),disabled:L||(0,o.pKY)(s,R),key:c,eventKey:(0,o.hXT)(s.hash,R)||c,prevKey:c>0?((K=g[c-1])===null||K===void 0?void 0:K.hash)||c-1:0,nextKey:c<g.length-1?((D=g[c+1])===null||D===void 0?void 0:D.hash)||c+1:g.length-1,swipeable:te,mobileUI:Q,mountOnEnter:X,unmountOnExit:typeof s.reload=="boolean"?s.reload:typeof s.unmountOnExit=="boolean"?s.unmountOnExit:O,onSelect:e.handleSelect,testIdBuilder:M==null?void 0:M.getChild("tab-".concat(typeof s.title=="string"?s.title:c)),className:n(s.className,(0,o.GwQ)((0,a.pi)((0,a.pi)({},s),{name:"panelControlClassName",id:s.id,themeCss:s.themeCss})))}),h("item/".concat(c),s!=null&&s.type?s:s.tab||s.body,{disabled:L||(0,o.pKY)(s,R)||void 0,data:R,formMode:s.mode||A||P,formHorizontal:s.horizontal||N||W})):null}),k=g.map(function(s,c){var K=(0,o.nW9)(p,(0,o.Kn2)(s.data)?(0,a.pi)({index:c},s.data):{item:s.data,index:c});return(0,o.pn4)(s,K)?C().createElement(o.cWM,(0,a.pi)({},s,{config:{id:s.id,themeCss:s.themeCss,classNames:[{key:"panelControlClassName"}]},env:e.props.env,key:"customstyle_".concat(c)})):null})):(Y=g.map(function(s,c){var K,D;return(0,o.pn4)(s,p)?C().createElement(Z.OK9,(0,a.pi)({},s,{title:e.renderTabTitle(s.title,c,p),disabled:L||(0,o.pKY)(s,p),key:c,eventKey:s.hash||c,prevKey:c>0?((K=g[c-1])===null||K===void 0?void 0:K.hash)||c-1:0,nextKey:c<g.length-1?((D=g[c+1])===null||D===void 0?void 0:D.hash)||c+1:g.length-1,swipeable:te,mobileUI:Q,mountOnEnter:X,unmountOnExit:typeof s.reload=="boolean"?s.reload:typeof s.unmountOnExit=="boolean"?s.unmountOnExit:O,onSelect:e.handleSelect,testIdBuilder:M==null?void 0:M.getChild("tab-".concat(typeof s.title=="string"?s.title:c)),className:n(s.className,(0,o.GwQ)((0,a.pi)((0,a.pi)({},s),{name:"panelControlClassName",id:s.id,themeCss:s.themeCss})))}),e.renderTab?e.renderTab(s,e.props,c):d?d(s,e.props,c):h("tab/".concat(c),s!=null&&s.type?s:s.tab||s.body,{disabled:L||(0,o.pKY)(s,p)||void 0,formMode:s.mode||A||P,formHorizontal:s.horizontal||N||W})):null}),k=g.map(function(s,c){return(0,o.pn4)(s,p)?C().createElement(o.cWM,{config:{id:s.id,themeCss:s.themeCss,classNames:[{key:"panelControlClassName"}]},env:e.props.env,key:"customstyle_".concat(c)}):null})),C().createElement(C().Fragment,null,C().createElement(Z.mQc,{addBtnText:S(w||"add"),classPrefix:i,classnames:n,mode:he,closable:b,className:n(y,(0,o.GwQ)((0,a.pi)((0,a.pi)({},this.props),{name:"wrapperCustomStyle",id:x,themeCss:ae}))),style:v,contentClassName:n(l,(0,o.GwQ)((0,a.pi)((0,a.pi)({},this.props),{name:"contentControlClassName",id:x,themeCss:V}))),linksClassName:r,titleClassName:n((0,o.GwQ)((0,a.pi)((0,a.pi)({},this.props),{name:"titleControlClassName",id:x,themeCss:V}))),onSelect:this.handleSelect,activeKey:this.state.activeKey,toolbar:this.renderToolbar(),addable:F,onAdd:this.handleAdd,onClose:this.handleClose,draggable:j,onDragChange:this.handleDragChange,showTip:G,showTipClassName:H,editable:U,onEdit:this.handleEdit,sidePosition:J,collapseOnExceed:z,collapseBtnLabel:ue,mobileUI:Q,testIdBuilder:M},Y),k,C().createElement(o.cWM,(0,a.pi)({},this.props,{config:{wrapperCustomStyle:ae,id:x,themeCss:V,classNames:[{key:"titleControlClassName",weights:{default:{important:!0,inner:"> a"},focused:{important:!0,suf:".is-active",inner:"> a"},hover:{important:!0,inner:"> a"},disabled:{important:!0,suf:".is-disabled",inner:"> a"}}},{key:"toolbarControlClassName",weights:{default:{important:!0}}},{key:"contentControlClassName",weights:{default:{important:!0}}}]},env:ce})))},u.prototype.render=function(){return this.renderTabs()},u.defaultProps={className:"",mode:"",mountOnEnter:!0,unmountOnExit:!1},(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Array,String,Object]),(0,a.w6)("design:returntype",Array)],u.prototype,"initTabArray",null),(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",void 0)],u.prototype,"autoJumpToNeighbour",null),(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",void 0)],u.prototype,"handleAdd",null),(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object,Boolean]),(0,a.w6)("design:returntype",Promise)],u.prototype,"handleClose",null),(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Number,String]),(0,a.w6)("design:returntype",void 0)],u.prototype,"handleEdit",null),(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],u.prototype,"handleDragChange",null),(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],u.prototype,"handleSelect",null),(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Number]),(0,a.w6)("design:returntype",void 0)],u.prototype,"switchTo",null),(0,a.gn)([o.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",Number)],u.prototype,"currentIndex",null),u}(C().Component),de=function(B){(0,a.ZT)(u,B);function u(e,t){var n=B.call(this,e)||this,i=t;return i.registerComponent(n),n}return u.prototype.componentWillUnmount=function(){var e;(e=B.prototype.componentWillUnmount)===null||e===void 0||e.call(this);var t=this.context;t.unRegisterComponent(this)},u.contextType=o.ZHe,u=(0,a.gn)([(0,o.Thl)({type:"tabs",onGlobalVarChanged:function(e,t,n){if((0,o.RuH)(t.source)){var i=(0,a.CR)(e.initTabArray(e.props.tabs,e.props.source,n),2),l=i[0],r=i[1];return e.setState({localTabs:l,isFromSource:r}),!1}}}),(0,a.w6)("design:paramtypes",[Object,Object])],u),u}(ee)}}]);
