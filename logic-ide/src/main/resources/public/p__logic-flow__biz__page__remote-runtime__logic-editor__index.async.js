"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9176],{8049:function(ce,f,e){e.d(f,{Z:function(){return x}});var M=e(56159),D=e(87363),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},g=h,S=e(92335),C=function(T,o){return D.createElement(S.Z,(0,M.Z)({},T,{ref:o,icon:g}))},x=D.forwardRef(C)},39508:function(ce,f,e){e.r(f);var M=e(25359),D=e.n(M),h=e(93525),g=e.n(h),S=e(49811),C=e.n(S),x=e(57213),c=e.n(x),T=e(54306),o=e.n(T),ve=e(60341),A=e(83217),Ee=e(72197),O=e(54145),L=e(51394),P=e(36267),me=e(8051),s=e(87363),mn=e.n(s),De=e(98306),ge=e(5671),Oe=e(14990),fe=e(22465),Pe=e(72237),pe=e(93853),Me=e(28110),he=e(49228),Se=e(8049),Ce=e(65020),xe=e(2325),R=e(48364),E=e(94744),Te=e(5726),Ae=e.n(Te),H=e(44132),Le=e(32126),Re=e(79716),Ue=e(21558),ye=e(86178),G=e(3619),Be=e(7944),Ie=e(79671),je=e(31837),t=e(33130),We=function(){var Ke=(0,s.useState)({}),z=o()(Ke,2),u=z[0],U=z[1],be=(0,s.useState)({}),V=o()(be,2),Ze=V[0],Je=V[1],Ne=(0,s.useState)({}),F=o()(Ne,2),He=F[0],Ge=F[1],ze=(0,s.useState)(!0),$=o()(ze,2),y=$[0],Ve=$[1],Fe=(0,s.useState)(!1),Y=o()(Fe,2),$e=Y[0],i=Y[1],Ye=(0,s.useState)("1"),w=o()(Ye,2),B=w[0],gn=w[1],we=(0,s.useState)(),X=o()(we,2),I=X[0],Xe=X[1],Qe=(0,s.useState)([]),Q=o()(Qe,2),ke=Q[0],qe=Q[1],en=(0,s.useState)([]),k=o()(en,2),nn=k[0],tn=k[1],_n=(0,s.useState)(!1),q=o()(_n,2),ee=q[0],ne=q[1],sn=(0,s.useState)(!1),te=o()(sn,2),_e=te[0],j=te[1],an=(0,s.useState)(new Map),se=o()(an,2),p=se[0],ae=se[1],on=(0,s.useState)(""),oe=o()(on,2),W=oe[0],rn=oe[1],re=(0,De.UO)(),K=re.id,v=re.runtime,ln=new Ue.W;function le(n){window.document.title="["+n.name+"]:"+n.version}function ie(){i(!0);var n=ln.graphToLogicItems(I,u);n.version=ue(),U(n),de(n),le(n)}function ue(){return Ae()(Date.now()).format("YYYYMMDDHHmmss")}function de(n){(0,R.KX)(v,K,n.version,JSON.stringify(n)).then(function(_){i(!1),console.log("save logic"),console.log(n),_.status==200?(A.ZP.success("\u4FDD\u5B58\u6210\u529F"),console.log("save logic success")):(A.ZP.error("\u4FDD\u5B58\u5931\u8D25\uFF1A"+_.statusText),console.error("save logic error"))}).catch(function(_){i(!1),console.log("err"),console.log(_),A.ZP.error("\u4FDD\u5B58\u5931\u8D25")})}(0,s.useEffect)(function(){Je({jsTips:c()({},p)})},[p]);function un(n){var _,r,a,m,l={};l._par=n.params,l._var=n.variables,ae(c()(c()({},p),l));var Z=E.y.getParamArrayByJson(JSON.parse((_=n.params)!==null&&_!==void 0?_:"{}")),d=E.y.getReturnArrayByJson(JSON.parse((r=n.returns)!==null&&r!==void 0?r:"{}")),J=E.y.getVariableArrayByJson(JSON.parse((a=n.variables)!==null&&a!==void 0?a:"{}")),En=E.y.getEnvsArrayByJson(JSON.parse((m=n.envs)!==null&&m!==void 0?m:"{}")),N=c()(c()({},u),{},{params:Z,returns:d,variables:J,envs:En,log:n.log});N.version=ue(),U(N),de(N)}function dn(n){return b.apply(this,arguments)}function b(){return b=C()(D()().mark(function n(_){var r,a;return D()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r={},r._par=JSON.stringify(E.y.getJsonByParams(_.params)),r._var=JSON.stringify(E.y.getJsonByParams(_.variables)),l.next=5,Le.S.getEnvJson();case 5:a=l.sent,r._env=JSON.stringify(a),r._lastRet="{}",r._last=JSON.stringify({success:!0,msg:""}),ae(r),i(!1);case 11:case"end":return l.stop()}},n)})),b.apply(this,arguments)}function cn(n){(0,R.Sl)(v,n).then(function(_){var r=_.name,a=_.configJson;a.id=n,a.name=r,U(a),Ge(a==null?void 0:a.visualConfig),dn(a),le(a)}).catch(function(_){i(!1),console.log("err"),console.log(_)})}(0,s.useEffect)(function(){(0,ye.m)(g()(xe.C.values())),i(!0),cn(K),(0,Re.O)(v).then(function(n){tn(n.Groups),qe(n.Nodes)})},[]),(0,s.useEffect)(function(){v&&je.j.getRemoteRuntimes().forEach(function(n){n.name==v&&rn(n)})},[v]);var vn=(0,s.useCallback)(function(){return new ge.bn.kS({attrs:{line:{targetMarker:"classic",stroke:B=="1"?"#000000":"#FF9900"}},zIndex:0,data:{type:B}})},[B]);return(0,t.jsx)("div",{children:(0,t.jsx)(Ee.Z,{spinning:$e,children:(0,t.jsx)(ve.l,{editorCtx:Ze,panelData:{Nodes:g()(ke),Groups:[{name:"ctrl",title:"\u903B\u8F91\u63A7\u5236",graphHeight:360}].concat(g()(nn))},showLeft:y,graphIns:I,toolElements:[(0,t.jsx)(O.ZP,{type:"text",icon:y?(0,t.jsx)(Oe.Z,{}):(0,t.jsx)(fe.Z,{}),onClick:function(){Ve(!y)},style:{fontSize:"16px",width:64,height:64}}),(0,t.jsx)(O.ZP,{icon:(0,t.jsx)(Pe.Z,{}),type:"primary",onClick:function(){return ie()},children:"\u4FDD\u5B58"}),(0,t.jsx)(Be.Z,{open:ee,values:c()({},u),setOpen:function(){ne(!ee)},onSubmit:un,children:(0,t.jsx)(O.ZP,{onClick:function(){return ne(!0)},icon:(0,t.jsx)(pe.Z,{style:{color:"#1677ff"}}),children:"\u53C2\u6570"})}),(0,t.jsx)(Ie.Z,{open:_e,setOpen:function(){return j(!_e)},values:{params:u==null?void 0:u.params},onSubmit:function(_,r){if(j(!1),u){var a=_.params,m=_.bizId,l=_.headers,Z=_.bizStartCode;i(!0),(0,R.Fx)(v,K,JSON.parse(a),m,Z,r,JSON.parse(l)).then(function(d){d.data.code==0?(i(!1),L.Z.success({title:"\u6267\u884C\u6210\u529F",width:"1000px",closable:!0,content:(0,t.jsx)("div",{children:(0,t.jsx)(H.Z,{pageId:"debug-info",data:d.data})})})):(i(!1),L.Z.error({title:(0,t.jsx)("span",{children:d.data.msg}),width:"1200px",closable:!0,content:(0,t.jsx)("div",{children:(0,t.jsx)(H.Z,{pageId:"debug-info",data:d.data})})}))}).catch(function(d){i(!1);var J=d.response.data;L.Z.error({title:(0,t.jsx)("span",{children:J.msg}),width:"1200px",closable:!0})})}},children:(0,t.jsx)(O.ZP,{onClick:function(){j(!0)},icon:(0,t.jsx)(Me.Z,{style:{color:"#1677ff"}}),children:"\u8C03\u8BD5"})}),(0,t.jsx)(O.ZP,{icon:(0,t.jsx)(he.Z,{style:{color:"#1677ff"}}),onClick:function(){(0,G.V)(I)},children:"\u5E03\u5C40"}),(0,t.jsxs)(P.Z.Text,{strong:!0,style:{fontSize:"18px"},children:["[",u.name,"]"]}),(0,t.jsxs)(P.Z.Text,{children:["\u7248\u672C:",u.version]}),(0,t.jsx)(me.Z,{type:"vertical"}),(0,t.jsx)(P.Z.Text,{style:{fontSize:"15px",float:"right"},children:(0,t.jsx)(Se.Z,{style:{color:"#1677ff"}})}),(0,t.jsx)(P.Z.Text,{style:{fontSize:"15px",float:"right"},children:W.title}),(0,t.jsx)("a",{href:W.url,target:"blank",children:W.url})],graphJson:He,onGraphJsonEmpty:Ce.n,createEdge:vn,edgeTools:["button-remove","vertices","segments"],onSave:function(){return ie()},jsTipMap:p,autoLayout:function(_){return(0,G.V)(_)},onGraphInsChange:function(_){return Xe(_)}})})})};f.default=We}}]);
