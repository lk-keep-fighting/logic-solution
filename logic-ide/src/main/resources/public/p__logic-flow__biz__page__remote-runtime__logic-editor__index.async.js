"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9176],{80401:function(ve,f,e){e.d(f,{Z:function(){return c}});var M=e(58709),g=e(87363),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},D=h,S=e(6481),C=function(o,A){return g.createElement(S.Z,(0,M.Z)({},o,{ref:A,icon:D}))},T=g.forwardRef(C),c=T},20980:function(ve,f,e){e.r(f);var M=e(90228),g=e.n(M),h=e(15558),D=e.n(h),S=e(87999),C=e.n(S),T=e(26068),c=e.n(T),H=e(48305),o=e.n(H),A=e(60860),L=e(63121),me=e(82494),O=e(39765),R=e(39710),p=e(77154),Ee=e(90171),s=e(87363),m_=e.n(s),ge=e(9413),De=e(91505),Oe=e(8674),fe=e(16020),pe=e(66952),Pe=e(1893),Me=e(33226),he=e(25281),Se=e(80401),Ce=e(8678),Te=e(72920),x=e(99511),m=e(20210),Ae=e(16483),Le=e.n(Ae),G=e(68784),Re=e(370),xe=e(30098),Ue=e(72677),ye=e(89732),z=e(83359),Ie=e(76262),Be=e(98496),je=e(33627),t=e(62086),We=function(){var Ke=(0,s.useState)({}),V=o()(Ke,2),u=V[0],U=V[1],be=(0,s.useState)({}),F=o()(be,2),Ze=F[0],Je=F[1],Ne=(0,s.useState)({}),$=o()(Ne,2),He=$[0],Ge=$[1],ze=(0,s.useState)(!0),Y=o()(ze,2),y=Y[0],Ve=Y[1],Fe=(0,s.useState)(!1),w=o()(Fe,2),$e=w[0],l=w[1],Ye=(0,s.useState)("1"),X=o()(Ye,2),I=X[0],g_=X[1],we=(0,s.useState)(),Q=o()(we,2),B=Q[0],Xe=Q[1],Qe=(0,s.useState)([]),k=o()(Qe,2),ke=k[0],qe=k[1],e_=(0,s.useState)([]),q=o()(e_,2),__=q[0],t_=q[1],n_=(0,s.useState)(!1),ee=o()(n_,2),_e=ee[0],te=ee[1],s_=(0,s.useState)(!1),ne=o()(s_,2),se=ne[0],j=ne[1],a_=(0,s.useState)(new Map),ae=o()(a_,2),P=ae[0],oe=ae[1],o_=(0,s.useState)(""),re=o()(o_,2),W=re[0],r_=re[1],ie=(0,ge.UO)(),K=ie.id,v=ie.runtime,i_=new Ue.W;function le(_){window.document.title="["+_.name+"]:"+_.version}function ue(){l(!0);var _=i_.graphToLogicItems(B,u);_.version=ce(),U(_),de(_),le(_)}function ce(){return Le()(Date.now()).format("YYYYMMDDHHmmss")}function de(_){(0,x.KX)(v,K,_.version,JSON.stringify(_)).then(function(n){l(!1),console.log("save logic"),console.log(_),n.status==200?(L.ZP.success("\u4FDD\u5B58\u6210\u529F"),console.log("save logic success")):(L.ZP.error("\u4FDD\u5B58\u5931\u8D25\uFF1A"+n.statusText),console.error("save logic error"))}).catch(function(n){l(!1),console.log("err"),console.log(n),L.ZP.error("\u4FDD\u5B58\u5931\u8D25")})}(0,s.useEffect)(function(){Je({jsTips:c()({},P)})},[P]);function l_(_){var n,r,a,E,i={};i._par=_.params,i._var=_.variables,oe(c()(c()({},P),i));var Z=m.y.getParamArrayByJson(JSON.parse((n=_.params)!==null&&n!==void 0?n:"{}")),d=m.y.getReturnArrayByJson(JSON.parse((r=_.returns)!==null&&r!==void 0?r:"{}")),J=m.y.getVariableArrayByJson(JSON.parse((a=_.variables)!==null&&a!==void 0?a:"{}")),v_=m.y.getEnvsArrayByJson(JSON.parse((E=_.envs)!==null&&E!==void 0?E:"{}")),N=c()(c()({},u),{},{params:Z,returns:d,variables:J,envs:v_,log:_.log});N.version=ce(),U(N),de(N)}function u_(_){return b.apply(this,arguments)}function b(){return b=C()(g()().mark(function _(n){var r,a;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r={},r._par=JSON.stringify(m.y.getJsonByParams(n.params)),r._var=JSON.stringify(m.y.getJsonByParams(n.variables)),i.next=5,Re.S.getEnvJson();case 5:a=i.sent,r._env=JSON.stringify(a),r._lastRet="{}",r._last=JSON.stringify({success:!0,msg:"",data:{}}),oe(r),l(!1);case 11:case"end":return i.stop()}},_)})),b.apply(this,arguments)}function c_(_){(0,x.Sl)(v,_).then(function(n){var r=n.name,a=n.configJson;a.id=_,a.name=r,U(a),Ge(a==null?void 0:a.visualConfig),u_(a),le(a)}).catch(function(n){l(!1),console.log("err"),console.log(n)})}(0,s.useEffect)(function(){(0,ye.m)(D()(Te.C.values())),l(!0),c_(K),(0,xe.O)(v).then(function(_){t_(_.Groups),qe(_.Nodes)})},[]),(0,s.useEffect)(function(){v&&je.j.getRemoteRuntimes().forEach(function(_){_.name==v&&r_(_)})},[v]);var d_=(0,s.useCallback)(function(){return new De.bn.kS({attrs:{line:{targetMarker:"classic",stroke:I=="1"?"#000000":"#FF9900"}},zIndex:0,data:{type:I}})},[I]);return(0,t.jsx)("div",{children:(0,t.jsx)(me.Z,{spinning:$e,children:(0,t.jsx)(A.l,{editorCtx:Ze,panelData:{Nodes:D()(ke),Groups:[{name:"ctrl",title:"\u903B\u8F91\u63A7\u5236",graphHeight:360}].concat(D()(__))},showLeft:y,graphIns:B,toolElements:[(0,t.jsx)(O.ZP,{type:"text",icon:y?(0,t.jsx)(Oe.Z,{}):(0,t.jsx)(fe.Z,{}),onClick:function(){Ve(!y)},style:{fontSize:"16px",width:64,height:64}}),(0,t.jsx)(O.ZP,{icon:(0,t.jsx)(pe.Z,{}),type:"primary",onClick:function(){return ue()},children:"\u4FDD\u5B58"}),(0,t.jsx)(Ie.Z,{open:_e,values:c()({},u),setOpen:function(){te(!_e)},onSubmit:l_,children:(0,t.jsx)(O.ZP,{onClick:function(){return te(!0)},icon:(0,t.jsx)(Pe.Z,{style:{color:"#1677ff"}}),children:"\u53C2\u6570"})}),(0,t.jsx)(Be.Z,{open:se,setOpen:function(){return j(!se)},values:{params:u==null?void 0:u.params},onSubmit:function(n,r){if(j(!1),u){var a=n.params,E=n.bizId,i=n.headers,Z=n.bizStartCode;l(!0),(0,x.Fx)(v,K,JSON.parse(a),E,Z,r,JSON.parse(i)).then(function(d){d.data.code==0?(l(!1),R.Z.success({title:"\u6267\u884C\u6210\u529F",width:"1000px",closable:!0,content:(0,t.jsx)("div",{children:(0,t.jsx)(G.Z,{pageId:"debug-info",data:d.data})})})):(l(!1),R.Z.error({title:(0,t.jsx)("span",{children:d.data.msg}),width:"1200px",closable:!0,content:(0,t.jsx)("div",{children:(0,t.jsx)(G.Z,{pageId:"debug-info",data:d.data})})}))}).catch(function(d){l(!1);var J=d.response.data;R.Z.error({title:(0,t.jsx)("span",{children:J.msg}),width:"1200px",closable:!0})})}},children:(0,t.jsx)(O.ZP,{onClick:function(){j(!0)},icon:(0,t.jsx)(Me.Z,{style:{color:"#1677ff"}}),children:"\u8C03\u8BD5"})}),(0,t.jsx)(O.ZP,{icon:(0,t.jsx)(he.Z,{style:{color:"#1677ff"}}),onClick:function(){(0,z.V)(B)},children:"\u5E03\u5C40"}),(0,t.jsxs)(p.Z.Text,{strong:!0,style:{fontSize:"18px"},children:["[",u.name,"]"]}),(0,t.jsxs)(p.Z.Text,{children:["\u7248\u672C:",u.version]}),(0,t.jsx)(Ee.Z,{type:"vertical"}),(0,t.jsx)(p.Z.Text,{style:{fontSize:"15px",float:"right"},children:(0,t.jsx)(Se.Z,{style:{color:"#1677ff"}})}),(0,t.jsx)(p.Z.Text,{style:{fontSize:"15px",float:"right"},children:W.title}),(0,t.jsx)("a",{href:W.url,target:"blank",children:W.url})],graphJson:He,onGraphJsonEmpty:Ce.n,createEdge:d_,edgeTools:["button-remove","vertices","segments"],onSave:function(){return ue()},jsTipMap:P,autoLayout:function(n){return(0,z.V)(n)},onGraphInsChange:function(n){return Xe(n)}})})})};f.default=We}}]);
