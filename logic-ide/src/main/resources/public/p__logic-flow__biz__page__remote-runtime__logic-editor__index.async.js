"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9176],{80401:function(ve,f,e){e.d(f,{Z:function(){return d}});var M=e(52003),D=e(87363),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},g=h,S=e(6481),C=function(o,T){return D.createElement(S.Z,(0,M.Z)({},o,{ref:T,icon:g}))},x=D.forwardRef(C),d=x},16850:function(ve,f,e){e.r(f);var M=e(90228),D=e.n(M),h=e(15558),g=e.n(h),S=e(87999),C=e.n(S),x=e(26068),d=e.n(x),H=e(48305),o=e.n(H),T=e(73562),A=e(41159),Ee=e(28203),O=e(74912),L=e(31453),P=e(58107),me=e(65586),s=e(87363),mn=e.n(s),De=e(12864),ge=e(91505),Oe=e(8674),fe=e(16020),Pe=e(66952),pe=e(1893),Me=e(33226),he=e(25281),Se=e(80401),Ce=e(77790),xe=e(61065),R=e(81719),E=e(98427),Te=e(16483),Ae=e.n(Te),G=e(25616),Le=e(22191),Re=e(66005),Ue=e(46104),ye=e(5833),z=e(13891),Ie=e(41606),Be=e(51151),je=e(41648),t=e(62086),We=function(){var Ke=(0,s.useState)({}),V=o()(Ke,2),u=V[0],U=V[1],be=(0,s.useState)({}),F=o()(be,2),Ze=F[0],Je=F[1],Ne=(0,s.useState)({}),$=o()(Ne,2),He=$[0],Ge=$[1],ze=(0,s.useState)(!0),Y=o()(ze,2),y=Y[0],Ve=Y[1],Fe=(0,s.useState)(!1),w=o()(Fe,2),$e=w[0],i=w[1],Ye=(0,s.useState)("1"),X=o()(Ye,2),I=X[0],gn=X[1],we=(0,s.useState)(),Q=o()(we,2),B=Q[0],Xe=Q[1],Qe=(0,s.useState)([]),k=o()(Qe,2),ke=k[0],qe=k[1],en=(0,s.useState)([]),q=o()(en,2),nn=q[0],tn=q[1],_n=(0,s.useState)(!1),ee=o()(_n,2),ne=ee[0],te=ee[1],sn=(0,s.useState)(!1),_e=o()(sn,2),se=_e[0],j=_e[1],an=(0,s.useState)(new Map),ae=o()(an,2),p=ae[0],oe=ae[1],on=(0,s.useState)(""),re=o()(on,2),W=re[0],rn=re[1],le=(0,De.UO)(),K=le.id,v=le.runtime,ln=new Ue.W;function ie(n){window.document.title="["+n.name+"]:"+n.version}function ue(){i(!0);var n=ln.graphToLogicItems(B,u);n.version=de(),U(n),ce(n),ie(n)}function de(){return Ae()(Date.now()).format("YYYYMMDDHHmmss")}function ce(n){(0,R.KX)(v,K,n.version,JSON.stringify(n)).then(function(_){i(!1),console.log("save logic"),console.log(n),_.status==200?(A.ZP.success("\u4FDD\u5B58\u6210\u529F"),console.log("save logic success")):(A.ZP.error("\u4FDD\u5B58\u5931\u8D25\uFF1A"+_.statusText),console.error("save logic error"))}).catch(function(_){i(!1),console.log("err"),console.log(_),A.ZP.error("\u4FDD\u5B58\u5931\u8D25")})}(0,s.useEffect)(function(){Je({jsTips:d()({},p)})},[p]);function un(n){var _,r,a,m,l={};l._par=n.params,l._var=n.variables,oe(d()(d()({},p),l));var Z=E.y.getParamArrayByJson(JSON.parse((_=n.params)!==null&&_!==void 0?_:"{}")),c=E.y.getReturnArrayByJson(JSON.parse((r=n.returns)!==null&&r!==void 0?r:"{}")),J=E.y.getVariableArrayByJson(JSON.parse((a=n.variables)!==null&&a!==void 0?a:"{}")),En=E.y.getEnvsArrayByJson(JSON.parse((m=n.envs)!==null&&m!==void 0?m:"{}")),N=d()(d()({},u),{},{params:Z,returns:c,variables:J,envs:En,log:n.log});N.version=de(),U(N),ce(N)}function dn(n){return b.apply(this,arguments)}function b(){return b=C()(D()().mark(function n(_){var r,a;return D()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r={},r._par=JSON.stringify(E.y.getJsonByParams(_.params)),r._var=JSON.stringify(E.y.getJsonByParams(_.variables)),l.next=5,Le.S.getEnvJson();case 5:a=l.sent,r._env=JSON.stringify(a),r._lastRet="{}",r._last=JSON.stringify({success:!0,msg:""}),oe(r),i(!1);case 11:case"end":return l.stop()}},n)})),b.apply(this,arguments)}function cn(n){(0,R.Sl)(v,n).then(function(_){var r=_.name,a=_.configJson;a.id=n,a.name=r,U(a),Ge(a==null?void 0:a.visualConfig),dn(a),ie(a)}).catch(function(_){i(!1),console.log("err"),console.log(_)})}(0,s.useEffect)(function(){(0,ye.m)(g()(xe.C.values())),i(!0),cn(K),(0,Re.O)(v).then(function(n){tn(n.Groups),qe(n.Nodes)})},[]),(0,s.useEffect)(function(){v&&je.j.getRemoteRuntimes().forEach(function(n){n.name==v&&rn(n)})},[v]);var vn=(0,s.useCallback)(function(){return new ge.bn.kS({attrs:{line:{targetMarker:"classic",stroke:I=="1"?"#000000":"#FF9900"}},zIndex:0,data:{type:I}})},[I]);return(0,t.jsx)("div",{children:(0,t.jsx)(Ee.Z,{spinning:$e,children:(0,t.jsx)(T.l,{editorCtx:Ze,panelData:{Nodes:g()(ke),Groups:[{name:"ctrl",title:"\u903B\u8F91\u63A7\u5236",graphHeight:360}].concat(g()(nn))},showLeft:y,graphIns:B,toolElements:[(0,t.jsx)(O.ZP,{type:"text",icon:y?(0,t.jsx)(Oe.Z,{}):(0,t.jsx)(fe.Z,{}),onClick:function(){Ve(!y)},style:{fontSize:"16px",width:64,height:64}}),(0,t.jsx)(O.ZP,{icon:(0,t.jsx)(Pe.Z,{}),type:"primary",onClick:function(){return ue()},children:"\u4FDD\u5B58"}),(0,t.jsx)(Ie.Z,{open:ne,values:d()({},u),setOpen:function(){te(!ne)},onSubmit:un,children:(0,t.jsx)(O.ZP,{onClick:function(){return te(!0)},icon:(0,t.jsx)(pe.Z,{style:{color:"#1677ff"}}),children:"\u53C2\u6570"})}),(0,t.jsx)(Be.Z,{open:se,setOpen:function(){return j(!se)},values:{params:u==null?void 0:u.params},onSubmit:function(_,r){if(j(!1),u){var a=_.params,m=_.bizId,l=_.headers,Z=_.bizStartCode;i(!0),(0,R.Fx)(v,K,JSON.parse(a),m,Z,r,JSON.parse(l)).then(function(c){c.data.code==0?(i(!1),L.Z.success({title:"\u6267\u884C\u6210\u529F",width:"1000px",closable:!0,content:(0,t.jsx)("div",{children:(0,t.jsx)(G.Z,{pageId:"debug-info",data:c.data})})})):(i(!1),L.Z.error({title:(0,t.jsx)("span",{children:c.data.msg}),width:"1200px",closable:!0,content:(0,t.jsx)("div",{children:(0,t.jsx)(G.Z,{pageId:"debug-info",data:c.data})})}))}).catch(function(c){i(!1);var J=c.response.data;L.Z.error({title:(0,t.jsx)("span",{children:J.msg}),width:"1200px",closable:!0})})}},children:(0,t.jsx)(O.ZP,{onClick:function(){j(!0)},icon:(0,t.jsx)(Me.Z,{style:{color:"#1677ff"}}),children:"\u8C03\u8BD5"})}),(0,t.jsx)(O.ZP,{icon:(0,t.jsx)(he.Z,{style:{color:"#1677ff"}}),onClick:function(){(0,z.V)(B)},children:"\u5E03\u5C40"}),(0,t.jsxs)(P.Z.Text,{strong:!0,style:{fontSize:"18px"},children:["[",u.name,"]"]}),(0,t.jsxs)(P.Z.Text,{children:["\u7248\u672C:",u.version]}),(0,t.jsx)(me.Z,{type:"vertical"}),(0,t.jsx)(P.Z.Text,{style:{fontSize:"15px",float:"right"},children:(0,t.jsx)(Se.Z,{style:{color:"#1677ff"}})}),(0,t.jsx)(P.Z.Text,{style:{fontSize:"15px",float:"right"},children:W.title}),(0,t.jsx)("a",{href:W.url,target:"blank",children:W.url})],graphJson:He,onGraphJsonEmpty:Ce.n,createEdge:vn,edgeTools:["button-remove","vertices","segments"],onSave:function(){return ue()},jsTipMap:p,autoLayout:function(_){return(0,z.V)(_)},onGraphInsChange:function(_){return Xe(_)}})})})};f.default=We}}]);
