"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9152],{42651:function(P,b,i){i.d(b,{Z:function(){return l}});var f=i(21140),x=i.n(f),_=i(63466),c=i.n(_),o=i(52510),d=i.n(o),l=function(){function t(a){x()(this,t),d()(this,"_nodeConfig",void 0),d()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(a)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return c()(t,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(s){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=s)}},{key:"setGroups",value:function(s){this._groups=s}},{key:"setConfigSchemel",value:function(s){this._nodeConfig.data?(this._nodeConfig.data.configSchema=s,this._nodeConfig.data.config={type:s}):this._nodeConfig.data={configSchema:s,config:{type:s}}}},{key:"setConfigData",value:function(s){this._nodeConfig.data?this._nodeConfig.data.config=s:this._nodeConfig.data={config:s}}}]),t}()},72107:function(P,b,i){i.d(b,{Ld:function(){return f},Iz:function(){return s},Du:function(){return n},dO:function(){return v},z1:function(){return w},X0:function(){return a},_w:function(){return S}});var f=function(e){return e.TypeAnnotation="TypeAnnotation",e.Structure="Structure",e.StructureProperty="StructureProperty",e.TypeParam="TypeParam",e.Variable="Variable",e.Logic="Logic",e.LogicItem="LogicItem",e}({}),x=function(e){return e.start="start",e.end="end",e.switch="switch",e["switch-case"]="switch-case",e["switch-def"]="switch-def",e["mqtt-pub"]="mqtt-pub",e["mqtt-sub"]="mqtt-sub",e["mqtt-unsub"]="mqtt-unsub",e["mqtt-client"]="mqtt-client",e["mqtt-server"]="mqtt-server",e["mqtt-broker"]="mqtt-broker",e.http="http",e.logic="logic",e.js="js",e.wait="wait",e}({}),_=i(63466),c=i.n(_),o=i(21140),d=i.n(o),l=i(52510),t=i.n(l),a=c()(function e(h){d()(this,e),t()(this,"concept",void 0),t()(this,"name",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"typeAnnotation",void 0),t()(this,"required",!1),t()(this,"defaultValue",void 0),this.concept=f.StructureProperty,this.name=h}),s=c()(function e(h){d()(this,e),t()(this,"concept",f.Logic),t()(this,"schemeVersion",void 0),t()(this,"version",void 0),t()(this,"id",void 0),t()(this,"name",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"triggerType",void 0),t()(this,"log",void 0),t()(this,"cron",void 0),t()(this,"typeParams",void 0),t()(this,"params",void 0),t()(this,"returns",void 0),t()(this,"variables",void 0),t()(this,"envs",void 0),t()(this,"items",[]),t()(this,"visualConfig",void 0),this.id=h,this.schemeVersion="0.1"}),n=c()(function e(h,g){var C=this;d()(this,e),t()(this,"concept","LogicItem"),t()(this,"id",void 0),t()(this,"name",void 0),t()(this,"type",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"params",void 0),t()(this,"returns",void 0),t()(this,"envs",void 0),t()(this,"afterReturnAdaptor",void 0),t()(this,"returnAccept",void 0),t()(this,"nextId",void 0),t()(this,"endId",void 0),t()(this,"condition",void 0),t()(this,"script",void 0),t()(this,"timeout",void 0),t()(this,"branches",void 0),t()(this,"url",void 0),t()(this,"method",void 0),t()(this,"headers",void 0),t()(this,"queryParams",void 0),t()(this,"tranScope",void 0),t()(this,"body",void 0),t()(this,"setEnv",function(p){C.envs=p}),this.type=g,this.id=h}),m=null,v=c()(function e(h){d()(this,e),t()(this,"concept","Param"),t()(this,"name",void 0),t()(this,"description",void 0),t()(this,"typeAnnotation",void 0),t()(this,"required",void 0),t()(this,"defaultValue",void 0),this.name=h}),y=i(58853),D=i.n(y),r=i(38888),u=i.n(r),w=function(e){D()(g,e);var h=u()(g);function g(C){var p;return d()(this,g),p=h.call(this,C),p.concept="Return",p}return c()(g)}(v),S=function(e){D()(g,e);var h=u()(g);function g(C){var p;return d()(this,g),p=h.call(this,C),p.concept="Variable",p}return c()(g)}(v)},3619:function(P,b,i){i.d(b,{V:function(){return x}});var f=i(17600),x=function(o){var d,l=o.getSelectedCells(),t=[],a=[];if(l&&l.length>2){l.forEach(function(r){r.isNode()?t.push(r):a.push(r)}),d=new f.Vq({type:"dagre",begin:[t[0].getPosition().x,t[0].getPosition().y],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),o.getEdges().forEach(function(r){var u=r.getSourceCellId(),w=0,S=r.getTargetCellId(),e=0;t.find(function(h){return h.id===u})&&w++,t.find(function(h){return h.id===S})&&e++,w>0&&e>0&&a.push(r)});var s=d.layout({nodes:t,edges:a}),n=s.nodes,m=n===void 0?[]:n;t.forEach(function(r){var u=m.find(function(w){return w.id===r.id});u.x-=r.size().width/2,u.y-=r.size().height/2,r.position(u.x,u.y)})}else{d=new f.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),t=o.getNodes(),a=o.getEdges();var v=d.layout({nodes:t,edges:a}),y=v.nodes,D=y===void 0?[]:y;t.forEach(function(r){var u=D.find(function(w){return w.id===r.id});u.x-=r.size().width/2,u.y-=r.size().height>40?20:r.size().height/2,r.position(u.x,u.y)})}},_=function(o,d){debugger;var l=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),t=l.layout({nodes:o,edges:d}),a=t.nodes,s=a===void 0?[]:a;o.forEach(function(n){var m=s.find(function(v){return v.id===n.id});m.x-=n.size().width/2,m.y-=n.size().height/2,n.position(m.x,m.y)})}},9364:function(P,b,i){i.d(b,{K:function(){return d}});var f=i(93525),x=i.n(f),_=i(12490),c=i(2325),o=i(42651);function d(l,t,a){var s=50,n=50,m={body:{}},v=[new o.Z({shape:"wait-for-continue",width:s,height:n,ports:_.Tt,data:{config:{type:"wait-for-continue"}},_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:50,height:n,label:"switch",attrs:{image:{"xlink:href":"/logic/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:_.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:s,height:n,attrs:{image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"case",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:_.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:s,height:n,attrs:{image:{"xlink:href":"/logic/icons/texts.svg",width:30,x:8,y:10},text:{text:"\u591A\u503Ccase",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-cases"}},ports:_.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:50,height:n,attrs:{image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"default",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:_.Tt,_groups:["ctrl"]}),new o.Z({shape:"wait",width:s,height:n,data:{config:{type:"wait",timeout:"2000"}},ports:_.Tt,_groups:["ctrl"]}),new o.Z({shape:"http",width:100,height:n,text:"http\u8BF7\u6C42",data:{config:{type:"http",method:"POST"}},ports:_.Tt,_groups:["ctrl"]}),new o.Z({shape:"js",width:100,height:n,ports:_.Tt,imgSrc:"/logic/icons/code.svg",text:"js\u811A\u672C",data:{config:{type:"js"}},_groups:["ctrl"]}),new o.Z({shape:"java",ports:_.Tt,width:100,height:n,text:"java\u65B9\u6CD5",data:{config:{type:"java"}},_groups:["ctrl"]}),new o.Z({shape:"sub-logic",ports:_.Tt,width:100,height:n,imgSrc:"/logic/icons/CarbonSubflowLocal.svg",text:"\u590D\u7528\u903B\u8F91",data:{config:{type:"sub-logic"}},_groups:["ctrl"]})];l&&l.length>0&&Array.prototype.push.apply(v,l);var y=x()(c.C.values());return{Nodes:v,Shapes:y}}}}]);
