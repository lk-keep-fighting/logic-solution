"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9152],{42651:function(P,y,i){i.d(y,{Z:function(){return l}});var g=i(21140),x=i.n(g),h=i(63466),c=i.n(h),o=i(52510),d=i.n(o),l=function(){function t(r){x()(this,t),d()(this,"_nodeConfig",void 0),d()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(r)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return c()(t,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(s){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=s)}},{key:"setGroups",value:function(s){this._groups=s}},{key:"setConfigSchemel",value:function(s){this._nodeConfig.data?(this._nodeConfig.data.configSchema=s,this._nodeConfig.data.config={type:s}):this._nodeConfig.data={configSchema:s,config:{type:s}}}},{key:"setConfigData",value:function(s){this._nodeConfig.data?this._nodeConfig.data.config=s:this._nodeConfig.data={config:s}}}]),t}()},72107:function(P,y,i){i.d(y,{Ld:function(){return g},Iz:function(){return s},Du:function(){return n},dO:function(){return v},z1:function(){return w},X0:function(){return r},_w:function(){return A}});var g=function(e){return e.TypeAnnotation="TypeAnnotation",e.Structure="Structure",e.StructureProperty="StructureProperty",e.TypeParam="TypeParam",e.Variable="Variable",e.Logic="Logic",e.LogicItem="LogicItem",e}({}),x=function(e){return e.start="start",e.end="end",e.switch="switch",e["switch-case"]="switch-case",e["switch-def"]="switch-def",e["mqtt-pub"]="mqtt-pub",e["mqtt-sub"]="mqtt-sub",e["mqtt-unsub"]="mqtt-unsub",e["mqtt-client"]="mqtt-client",e["mqtt-server"]="mqtt-server",e["mqtt-broker"]="mqtt-broker",e.http="http",e.logic="logic",e.js="js",e.wait="wait",e}({}),h=i(63466),c=i.n(h),o=i(21140),d=i.n(o),l=i(52510),t=i.n(l),r=c()(function e(u){d()(this,e),t()(this,"concept",void 0),t()(this,"name",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"typeAnnotation",void 0),t()(this,"required",!1),t()(this,"defaultValue",void 0),this.concept=g.StructureProperty,this.name=u}),s=c()(function e(u){d()(this,e),t()(this,"concept",g.Logic),t()(this,"schemeVersion",void 0),t()(this,"version",void 0),t()(this,"id",void 0),t()(this,"name",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"triggerType",void 0),t()(this,"log",void 0),t()(this,"cron",void 0),t()(this,"typeParams",void 0),t()(this,"params",void 0),t()(this,"returns",void 0),t()(this,"variables",void 0),t()(this,"envs",void 0),t()(this,"items",[]),t()(this,"visualConfig",void 0),this.id=u,this.schemeVersion="0.1"}),n=c()(function e(u,f){var C=this;d()(this,e),t()(this,"concept","LogicItem"),t()(this,"id",void 0),t()(this,"name",void 0),t()(this,"type",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"params",void 0),t()(this,"returns",void 0),t()(this,"envs",void 0),t()(this,"afterReturnAdaptor",void 0),t()(this,"returnAccept",void 0),t()(this,"nextId",void 0),t()(this,"endId",void 0),t()(this,"condition",void 0),t()(this,"script",void 0),t()(this,"timeout",void 0),t()(this,"branches",void 0),t()(this,"url",void 0),t()(this,"method",void 0),t()(this,"headers",void 0),t()(this,"queryParams",void 0),t()(this,"tranScope",void 0),t()(this,"body",void 0),t()(this,"setEnv",function(m){C.envs=m}),this.type=f,this.id=u}),p=null,v=c()(function e(u){d()(this,e),t()(this,"concept","Param"),t()(this,"name",void 0),t()(this,"description",void 0),t()(this,"typeAnnotation",void 0),t()(this,"required",void 0),t()(this,"defaultValue",void 0),this.name=u}),b=i(58853),D=i.n(b),a=i(38888),_=i.n(a),w=function(e){D()(f,e);var u=_()(f);function f(C){var m;return d()(this,f),m=u.call(this,C),m.concept="Return",m}return c()(f)}(v),A=function(e){D()(f,e);var u=_()(f);function f(C){var m;return d()(this,f),m=u.call(this,C),m.concept="Variable",m}return c()(f)}(v)},3619:function(P,y,i){i.d(y,{V:function(){return x}});var g=i(17600),x=function(o){var d,l=o.getSelectedCells(),t=[],r=[];if(l&&l.length>2){l.forEach(function(a){a.isNode()?t.push(a):r.push(a)}),d=new g.Vq({type:"dagre",begin:[t[0].getPosition().x,t[0].getPosition().y],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),o.getEdges().forEach(function(a){var _=a.getSourceCellId(),w=0,A=a.getTargetCellId(),e=0;t.find(function(u){return u.id===_})&&w++,t.find(function(u){return u.id===A})&&e++,w>0&&e>0&&r.push(a)});var s=d.layout({nodes:t,edges:r}),n=s.nodes,p=n===void 0?[]:n;t.forEach(function(a){var _=p.find(function(w){return w.id===a.id});_&&(_.x-=a.size().width/2,_.y-=a.size().height/2,a.position(_.x,_.y))})}else{d=new g.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),t=o.getNodes(),r=o.getEdges();var v=d.layout({nodes:t,edges:r}),b=v.nodes,D=b===void 0?[]:b;t.forEach(function(a){var _=D.find(function(w){return w.id===a.id});_&&(_.x-=a.size().width/2,_.y-=a.size().height>40?20:a.size().height/2,a.position(_.x,_.y))})}},h=function(o,d){debugger;var l=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),t=l.layout({nodes:o,edges:d}),r=t.nodes,s=r===void 0?[]:r;o.forEach(function(n){var p=s.find(function(v){return v.id===n.id});p&&(p.x-=n.size().width/2,p.y-=n.size().height/2,n.position(p.x,p.y))})}},9364:function(P,y,i){i.d(y,{K:function(){return d}});var g=i(93525),x=i.n(g),h=i(12490),c=i(2325),o=i(42651);function d(l,t,r){var s=50,n=50,p={body:{}},v=[new o.Z({shape:"wait-for-continue",width:s,height:n,ports:h.Tt,data:{config:{type:"wait-for-continue",name:"\u4EA4\u4E92\u70B9"}},_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:50,height:n,label:"switch",attrs:{image:{"xlink:href":"/logic/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch",name:"switch"}},ports:h.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:s,height:n,attrs:{image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"case",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case",name:"case"}},ports:h.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:s,height:n,attrs:{image:{"xlink:href":"/logic/icons/texts.svg",width:30,x:8,y:10},text:{text:"\u591A\u503Ccase",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-cases",name:"\u591A\u503Ccase"}},ports:h.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:50,height:n,attrs:{image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"default",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default",name:"default"}},ports:h.Tt,_groups:["ctrl"]}),new o.Z({shape:"wait",width:s,height:n,data:{config:{type:"wait",name:"\u7B49\u5F85",timeout:"2000"}},ports:h.Tt,_groups:["ctrl"]}),new o.Z({shape:"http",width:100,height:n,text:"http\u8BF7\u6C42",data:{config:{type:"http",name:"http\u8BF7\u6C42",method:"POST"}},ports:h.Tt,_groups:["ctrl"]}),new o.Z({shape:"js",width:100,height:n,ports:h.Tt,imgSrc:"/logic/icons/code.svg",text:"js\u811A\u672C",data:{config:{name:"js\u811A\u672C",type:"js"}},_groups:["ctrl"]}),new o.Z({shape:"java",ports:h.Tt,width:100,height:n,text:"java\u65B9\u6CD5",data:{config:{name:"java\u65B9\u6CD5",type:"java"}},_groups:["ctrl"]}),new o.Z({shape:"sub-logic",ports:h.Tt,width:100,height:n,data:{config:{name:"\u590D\u7528\u903B\u8F91",type:"sub-logic"}},_groups:["ctrl"]})];l&&l.length>0&&Array.prototype.push.apply(v,l);var b=x()(c.C.values());return{Nodes:v,Shapes:b}}}}]);
