"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9152],{42651:function(P,x,i){i.d(x,{Z:function(){return r}});var f=i(21140),w=i.n(f),C=i(63466),_=i.n(C),o=i(52510),a=i.n(o),r=function(){function t(s){w()(this,t),a()(this,"_nodeConfig",void 0),a()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(s)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return _()(t,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(d){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=d)}},{key:"setGroups",value:function(d){this._groups=d}},{key:"setConfigSchemel",value:function(d){this._nodeConfig.data?(this._nodeConfig.data.configSchema=d,this._nodeConfig.data.config={type:d}):this._nodeConfig.data={configSchema:d,config:{type:d}}}},{key:"setConfigData",value:function(d){this._nodeConfig.data?this._nodeConfig.data.config=d:this._nodeConfig.data={config:d}}}]),t}()},72107:function(P,x,i){i.d(x,{Ld:function(){return f},Iz:function(){return d},Du:function(){return v},dO:function(){return h},z1:function(){return m},X0:function(){return s},_w:function(){return S}});var f=function(e){return e.TypeAnnotation="TypeAnnotation",e.Structure="Structure",e.StructureProperty="StructureProperty",e.TypeParam="TypeParam",e.Variable="Variable",e.Logic="Logic",e.LogicItem="LogicItem",e}({}),w=function(e){return e.start="start",e.end="end",e.switch="switch",e["switch-case"]="switch-case",e["switch-def"]="switch-def",e["mqtt-pub"]="mqtt-pub",e["mqtt-sub"]="mqtt-sub",e["mqtt-unsub"]="mqtt-unsub",e["mqtt-client"]="mqtt-client",e["mqtt-server"]="mqtt-server",e["mqtt-broker"]="mqtt-broker",e.http="http",e.logic="logic",e.js="js",e.wait="wait",e}({}),C=i(63466),_=i.n(C),o=i(21140),a=i.n(o),r=i(52510),t=i.n(r),s=_()(function e(l){a()(this,e),t()(this,"concept",void 0),t()(this,"name",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"typeAnnotation",void 0),t()(this,"required",!1),t()(this,"defaultValue",void 0),this.concept=f.StructureProperty,this.name=l}),d=_()(function e(l){a()(this,e),t()(this,"concept",f.Logic),t()(this,"schemeVersion",void 0),t()(this,"version",void 0),t()(this,"id",void 0),t()(this,"name",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"triggerType",void 0),t()(this,"log",void 0),t()(this,"cron",void 0),t()(this,"typeParams",void 0),t()(this,"params",void 0),t()(this,"returns",void 0),t()(this,"variables",void 0),t()(this,"envs",void 0),t()(this,"items",[]),t()(this,"visualConfig",void 0),this.id=l,this.schemeVersion="0.1"}),v=_()(function e(l,g){var D=this;a()(this,e),t()(this,"concept","LogicItem"),t()(this,"id",void 0),t()(this,"name",void 0),t()(this,"type",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"params",void 0),t()(this,"returns",void 0),t()(this,"envs",void 0),t()(this,"afterReturnAdaptor",void 0),t()(this,"returnAccept",void 0),t()(this,"nextId",void 0),t()(this,"endId",void 0),t()(this,"condition",void 0),t()(this,"script",void 0),t()(this,"timeout",void 0),t()(this,"branches",void 0),t()(this,"url",void 0),t()(this,"method",void 0),t()(this,"headers",void 0),t()(this,"queryParams",void 0),t()(this,"tranScope",void 0),t()(this,"body",void 0),t()(this,"setEnv",function(p){D.envs=p}),this.type=g,this.id=l}),c=null,h=_()(function e(l){a()(this,e),t()(this,"concept","Param"),t()(this,"name",void 0),t()(this,"description",void 0),t()(this,"typeAnnotation",void 0),t()(this,"required",void 0),t()(this,"defaultValue",void 0),this.name=l}),b=i(58853),y=i.n(b),n=i(38888),u=i.n(n),m=function(e){y()(g,e);var l=u()(g);function g(D){var p;return a()(this,g),p=l.call(this,D),p.concept="Return",p}return _()(g)}(h),S=function(e){y()(g,e);var l=u()(g);function g(D){var p;return a()(this,g),p=l.call(this,D),p.concept="Variable",p}return _()(g)}(h)},3619:function(P,x,i){i.d(x,{V:function(){return w}});var f=i(17600),w=function(o){var a,r=o.getSelectedCells(),t=[],s=[];if(r&&r.length>2){r.forEach(function(n){n.isNode()?t.push(n):s.push(n)}),a=new f.Vq({type:"dagre",begin:[t[0].getPosition().x,t[0].getPosition().y],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),o.getEdges().forEach(function(n){var u=n.getSourceCellId(),m=0,S=n.getTargetCellId(),e=0;t.find(function(l){return l.id===u})&&m++,t.find(function(l){return l.id===S})&&e++,m>0&&e>0&&s.push(n)});debugger;var d=a.layout({nodes:t,edges:s}),v=d.nodes,c=v===void 0?[]:v;t.forEach(function(n){var u=c.find(function(m){return m.id===n.id});u.x-=n.size().width/2,u.y-=n.size().height/2,n.position(u.x,u.y)})}else{a=new f.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),t=o.getNodes(),s=o.getEdges();var h=a.layout({nodes:t,edges:s}),b=h.nodes,y=b===void 0?[]:b;t.forEach(function(n){var u=y.find(function(m){return m.id===n.id});u.x-=n.size().width/2,u.y-=n.size().height/2,n.position(u.x,u.y)})}},C=function(o,a){debugger;var r=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),t=r.layout({nodes:o,edges:a}),s=t.nodes,d=s===void 0?[]:s;o.forEach(function(v){var c=d.find(function(h){return h.id===v.id});c.x-=v.size().width/2,c.y-=v.size().height/2,v.position(c.x,c.y)})}},9364:function(P,x,i){i.d(x,{K:function(){return t}});var f=i(93525),w=i.n(f),C=i(57213),_=i.n(C),o=i(12490),a=i(2325),r=i(42651);function t(s,d,v){var c=50,h=50,b={body:{}},y=[new r.Z({shape:"circle",width:c,height:h,attrs:{body:_()(_()({},b.body),{},{fill:"white"}),text:{text:"\u5F00\u59CB",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:o.Tt,data:{config:{type:"start"}},_groups:["ctrl"]}),new r.Z({shape:"circle",width:c,height:h,attrs:{body:_()(_()({},b.body),{},{fill:"white"}),text:{text:"\u4EA4\u4E92\u70B9",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:o.Tt,data:{config:{type:"wait-for-continue"}},_groups:["ctrl"]}),new r.Z({shape:"ExtSharp",width:50,height:h,label:"switch",attrs:{image:{"xlink:href":"/logic/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:o.Tt,_groups:["ctrl"]}),new r.Z({shape:"ExtSharp",width:c,height:h,attrs:{image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"case",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:o.Tt,_groups:["ctrl"]}),new r.Z({shape:"ExtSharp",width:50,height:h,attrs:{image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"default",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:o.Tt,_groups:["ctrl"]}),new r.Z({shape:"ExtSharp",width:c,height:h,attrs:{image:{"xlink:href":"/logic/icons/delay.svg",width:30,x:8,y:10},text:{text:"\u7B49\u5F85",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"wait",timeout:"2000"}},ports:o.Tt,_groups:["ctrl"]}),new r.Z({shape:"ExtSharp",body:{rx:6,ry:6,fill:"#0484fb",stroke:"#0484fb",strokeWidth:1,refWidth:1,refHeight:1},attrs:{text:{text:"http\u8BF7\u6C42"},image:{"xlink:href":"/logic/icons/http.svg",width:20,x:2,y:2}},data:{config:{type:"http",method:"POST"}},ports:o.Tt,_groups:["ctrl"]}),new r.Z({shape:"ExtSharp",ports:o.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/logic/icons/code.svg"},text:{text:"js\u811A\u672C"}},data:{config:{type:"js"}},_groups:["ctrl"]}),new r.Z({shape:"ExtSharp",ports:o.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/logic/icons/java.svg"},text:{text:"java\u65B9\u6CD5"}},data:{config:{type:"java"}},_groups:["ctrl"]}),new r.Z({shape:"ExtSharp",ports:o.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/logic/icons/CarbonSubflowLocal.svg"},text:{text:"\u590D\u7528\u903B\u8F91"}},data:{config:{type:"sub-logic"}},_groups:["ctrl"]})];s&&s.length>0&&Array.prototype.push.apply(y,s);var n=w()(a.C.values());return{Nodes:y,Shapes:n}}}}]);
