(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9809],{95989:function(Z,L,O){"use strict";O.r(L),O.d(L,{CascaderSelectControlRenderer:function(){return ee},NestedSelectControlRenderer:function(){return q},default:function(){return K}});var n=O(15767),x=O(87363),h=O.n(x),A=O(94391),a=O(42977),j=O(61533),te=O.n(j),X=O(10720),B=O.n(X),$=O(29974),W=O.n($),H=O(72976),Q=O.n(H),Y=O(45581),G=O(8427),K=function(R){(0,n.ZT)(i,R);function i(){var e=R!==null&&R.apply(this,arguments)||this;return e.outTarget=h().createRef(),e.state={isOpened:!1,isFocused:!1,inputValue:"",stack:[e.props.options]},e}return i.prototype.domRef=function(e){this.target=e},i.prototype.componentDidUpdate=function(e){e.options!==this.props.options&&this.setState({stack:[this.props.options]})},i.prototype.doAction=function(e,t,l){var r,s,o=this.props,d=o.resetValue,u=o.onChange,c=o.formStore,v=o.store,p=o.name,m=e==null?void 0:e.actionType;if(m==="clear")u==null||u("");else if(m==="reset"){var E=(s=(0,a.E04)((r=c==null?void 0:c.pristine)!==null&&r!==void 0?r:v==null?void 0:v.pristine,p))!==null&&s!==void 0?s:d;u==null||u(E!=null?E:"")}},i.prototype.dispatchEvent=function(e,t){return t===void 0&&(t={}),(0,n.mG)(this,void 0,void 0,function(){var l,r,s,o,d,u,c;return(0,n.Jh)(this,function(v){switch(v.label){case 0:return l=this.props,r=l.dispatchEvent,s=l.options,o=l.multiple,d=l.value,u=l.selectedOptions,[4,r(e,(0,a.vXk)(this.props,(0,n.pi)({options:s,items:s,value:d,selectedItems:o?u:u[0]},t)))];case 1:return c=v.sent(),[2,!!(c!=null&&c.prevented)]}})})},i.prototype.isParentNode=function(e){return Array.isArray(e.children)&&e.children.length>0},i.prototype.handleOutClick=function(e){var t;e.stopPropagation(),this.outTargetWidth=(t=this.outTarget.current)===null||t===void 0?void 0:t.clientWidth,e.defaultPrevented||this.setState(function(l){return{isOpened:!l.isOpened}})},i.prototype.handleResultClear=function(){this.setState({inputValue:void 0})},i.prototype.close=function(){this.setState({isOpened:!1})},i.prototype.removeItem=function(e,t){return(0,n.mG)(this,void 0,void 0,function(){var l,r,s,o,d;return(0,n.Jh)(this,function(u){switch(u.label){case 0:return l=this.props,r=l.onChange,s=l.selectedOptions,t&&t.stopPropagation(),s.splice(e,1),o=this.getValue(),[4,this.dispatchEvent("change",{value:o})];case 1:return d=u.sent(),d||r(o),[2]}})})},i.prototype.renderValue=function(e,t){var l=this.props,r=l.classnames,s=l.labelField,o=l.valueField,d=l.options,u=l.hideNodePathLabel,c=this.state.inputValue||"",v=(0,a.EvO)(c);if(u)return(0,a.ib7)(e[s||"label"]);var p=(0,a.kSg)(d,e,!0),m=(0,a.ib7)(e[s||"label"]),E=" / ",M=p?p.map(function(w){return(0,a.ib7)(w[s||"label"])}).join(E):m;return h().createElement("span",{className:r("Select-valueLabel"),key:t||e[o||"value"],title:M},p?p.map(function(w,S){var N=(0,a.ib7)(w[s||"label"]),y=w[o||"value"],T=S===p.length-1;return h().createElement("span",{key:S},v.test(y)||v.test(N)?(0,a.wy4)(N,c):N,!T&&E)}):m)},i.prototype.handleOptionClick=function(e){return(0,n.mG)(this,void 0,void 0,function(){var t,l,r,s,o,d,u,c,v;return(0,n.Jh)(this,function(p){switch(p.label){case 0:return t=this.props,l=t.multiple,r=t.onChange,s=t.joinValues,o=t.extractValue,d=t.valueField,u=t.onlyLeaf,l?[2]:(c=s||o?e[d||"value"]:e,c===void 0?[2]:u&&this.isParentNode(e)?[2]:[4,this.dispatchEvent("change",{value:c})]);case 1:return v=p.sent(),v||r(c),v||this.handleResultClear(),this.setState({stack:[this.props.options]}),this.close(),[2]}})})},i.prototype.handleCheck=function(e,t,l){return(0,n.mG)(this,void 0,void 0,function(){var r,s,o,d,u,c,v,p,m,E,M,w,S,N,y,T,_,_,g,f,k,b;return(0,n.Jh)(this,function(P){switch(P.label){case 0:if(r=this.props,s=r.onChange,o=r.selectedOptions,d=r.joinValues,u=r.delimiter,c=r.extractValue,v=r.withChildren,p=r.onlyChildren,m=r.cascade,E=r.options,M=r.onlyLeaf,w=this.state.stack,S=this.props.valueField||"value",M&&!Array.isArray(e)&&this.isParentNode(e))return[2];if(!Array.isArray(e)&&e.children&&e.children.length&&typeof t=="number"&&(w[t]?w.splice(t+1,1,e.children):w.push(e.children)),N=o,T=function(C){return Q()((0,a.fKU)(Array.isArray(C)?C:[C],function(F){return F.children&&F.children.length?null:F}))},Array.isArray(e)?(v?e=(0,a.fKU)(e):p&&(e=T(e)),y=N.length===e.length?[]:e):Array.isArray(e.children)?m?y=B()(N,[e]):v?(e=(0,a.fKU)([e]),_=e.every(function(C){return!!~N.indexOf(C)}),y=(_?B():W())(N,e)):p?(e=T(e),_=e.every(function(C){return!!~N.indexOf(C)}),y=(_?B():W())(N,e)):(y=N.filter(function(C){return!~(0,a.fKU)([e]).indexOf(C)}),!~N.indexOf(e)&&y.push(e)):y=B()(N,[e]),!m)for(g=e;;){if(f=(0,a.dGi)(E,g),f!=null&&f.value&&f.children.every(function(C){return~y.indexOf(C)})){f.children.forEach(function(C){var F=y.indexOf(C);~F&&!v&&!p&&y.splice(F,1)}),p||y.push(f),g=f;continue}break}return k=d?y.map(function(C){return C[S]}).join(u):c?y.map(function(C){return C[S]}):y,[4,this.dispatchEvent("change",{value:k})];case 1:return b=P.sent(),b||s(k),b||this.handleResultClear(),l&&this.setState({stack:[this.props.options]}),[2]}})})},i.prototype.allChecked=function(e){var t=this,l=this.props,r=l.selectedOptions,s=l.withChildren,o=l.onlyChildren;return e.every(function(d){return(s||o)&&d.children?t.allChecked(d.children):r.some(function(u){return u===d})})},i.prototype.partialChecked=function(e){var t=this;return e.some(function(l){var r=l.children&&t.partialChecked(l.children);return r||t.props.selectedOptions.some(function(s){return s===l})})},i.prototype.reload=function(e,t){var l=this.props.reloadOptions;l&&l(e,t)},i.prototype.getValue=function(){var e=this.props,t=e.selectedOptions,l=e.joinValues,r=e.valueField,s=e.extractValue,o=e.delimiter,d=e.value;return l?d=t.map(function(u){return u[r||"value"]}).join(o||","):s&&(d=t.map(function(u){return u[r||"value"]})),d},i.prototype.onFocus=function(e){return(0,n.mG)(this,void 0,void 0,function(){var t,l,r,s,o;return(0,n.Jh)(this,function(d){switch(d.label){case 0:return t=this.props,l=t.onFocus,r=t.disabled,s=this.getValue(),!r&&!this.state.isOpened?(this.setState({isFocused:!0}),[4,this.dispatchEvent("focus",{value:s})]):[3,2];case 1:o=d.sent(),o||l&&l(e),d.label=2;case 2:return[2]}})})},i.prototype.onBlur=function(e){return(0,n.mG)(this,void 0,void 0,function(){var t,l,r;return(0,n.Jh)(this,function(s){switch(s.label){case 0:return t=this.props.onBlur,l=this.getValue(),this.setState({isFocused:!1}),[4,this.dispatchEvent("blur",{value:l})];case 1:return r=s.sent(),r||t&&t(e),[2]}})})},i.prototype.getTarget=function(){return this.target||(this.target=(0,j.findDOMNode)(this)),this.target},i.prototype.handleKeyPress=function(e){e.key===" "&&(this.handleOutClick(e),e.preventDefault())},i.prototype.handleInputKeyDown=function(e){var t=this.state.inputValue,l=this.props,r=l.multiple,s=l.selectedOptions;e.key==="Backspace"&&!t&&s.length&&r&&this.removeItem(s.length-1)},i.prototype.handleInputChange=function(e){var t=this.props,l=t.options,r=t.labelField,s=t.valueField,o=e&&this.state.isOpened?(0,a.get)(l,function(d,u,c,v){return!!(0,G.Lu)([d].concat(v),e,{keys:[r||"label",s||"value"],threshold:G.Lu.rankings.CONTAINS}).length||!!(d.children&&d.children.length)},1,!0):l.concat();this.setState({inputValue:e,stack:[o]})},i.prototype.handleResultChange=function(e){return(0,n.mG)(this,void 0,void 0,function(){var t,l,r,s,o,d,u,c,v,p;return(0,n.Jh)(this,function(m){switch(m.label){case 0:return t=this.props,l=t.joinValues,r=t.extractValue,s=t.delimiter,o=t.valueField,d=t.onChange,u=t.multiple,c=Array.isArray(e)?e.concat():[],!u&&!c.length?[4,this.dispatchEvent("change",{value:""})]:[3,2];case 1:return v=m.sent(),v||d(""),[2];case 2:return(l||r)&&(c=e.map(function(E){return E[o||"value"]})),l&&(c=c.join(s||",")),[4,this.dispatchEvent("change",{value:c})];case 3:return p=m.sent(),p||d(c),[2]}})})},i.prototype.getMenuSelectMenuStyle=function(){var e=this.props.options,t=this.outTargetWidth,l=(0,a.pk8)(e),r={};return t&&(r={width:t/l}),r},i.prototype.renderOptions=function(){var e=this,t=this.props,l=t.multiple,r=t.selectedOptions,s=t.classnames,o=t.options,d=t.disabled,u=t.checkAll,c=t.checkAllLabel,v=t.translate,p=t.labelField,m=t.menuClassName,E=t.cascade,M=t.onlyChildren,w=t.testIdBuilder,S=this.props.valueField||"value",N=this.state.stack,y=this.partialChecked(o),T=this.allChecked(o);return h().createElement(h().Fragment,null,N.map(function(_,g){return h().createElement("div",{key:g,className:s("NestedSelect-menu",m),style:e.getMenuSelectMenuStyle()},l&&u&&g===0?h().createElement("div",{className:s("NestedSelect-option","checkall")},h().createElement(A.XZJ,{size:"sm",onChange:e.handleCheck.bind(e,_),checked:y,partial:y&&!T}),h().createElement("span",{onClick:e.handleCheck.bind(e,_)},v(c))):null,_.map(function(f,k){var b=w==null?void 0:w.getChild("menu-".concat(g)).getChild(f.value||k),P=(0,a.kSg)(o,f),C=P==null?void 0:P.some(function(U){return!!~r.indexOf(U)}),F=E?!1:l&&C,D=P==null?void 0:P.some(function(U){return!!U.disabled}),V=F||f.disabled||D||!!d,J=!!(f.children&&e.partialChecked(f.children)),I=F||!!~r.indexOf(f);!I&&M&&l&&e.isParentNode(f)&&e.allChecked(f.children)&&(I=!0);var z=(0,a.ib7)(f[p||"label"]);return h().createElement("div",{key:k,className:s("NestedSelect-option",{"is-active":!V&&(I||!E&&J)}),onMouseEnter:e.onMouseEnter.bind(e,f,g)},l?h().createElement(A.XZJ,{size:"sm",onChange:e.handleCheck.bind(e,f,g,!1),trueValue:f[S],checked:I||!E&&J,partial:!I,disabled:V,testIdBuilder:b==null?void 0:b.getChild("checkbox")}):null,h().createElement("div",(0,n.pi)({className:s("NestedSelect-optionLabel",{"is-disabled":V}),onClick:function(){return!V&&(l?e.handleCheck(f,g):e.handleOptionClick(f))},title:z},b==null?void 0:b.getTestId()),z),f.children&&f.children.length?h().createElement("div",(0,n.pi)({className:s("NestedSelect-optionArrowRight",{"is-disabled":V})},b==null?void 0:b.getChild("arrow-right").getTestId()),h().createElement(A.JO$,{icon:"right-arrow-bold",className:"icon"})):null)}))}))},i.prototype.renderSearchResult=function(){var e=this,t=this.state,l=t.stack,r=t.inputValue,s=this.props,o=s.classnames,d=s.translate,u=s.options,c=s.labelField,v=s.valueField,p=s.cascade,m=s.selectedOptions,E=s.multiple,M=s.disabled,w=s.onlyChildren,S=s.render,N=this.props.noResultsText;N&&(N=S("noResultText",d(N)));var y=(0,a.EvO)(r||""),T=(0,a.fKU)(l[0]).filter(function(g){return!!(y.test(g[v||"value"])||y.test(g[c||"label"]))}),_=h().createElement("div",{className:o("NestedSelect-menu"),style:this.getMenuSelectMenuStyle()},T.length?T.map(function(g,f){var k=(0,a.kSg)(u,g),b=p?!1:E&&(k==null?void 0:k.some(function(D){return!!~m.indexOf(D)})),P=b||g.disabled||!!M||(k==null?void 0:k.some(function(D){return!!D.disabled})),C=!!(g.children&&e.partialChecked(g.children)),F=b||!!~m.indexOf(g);return!F&&w&&e.isParentNode(g)&&e.allChecked(g.children)&&(F=!0),h().createElement("div",{className:o("NestedSelect-option",{"is-active":!P&&(F||!p&&C)}),key:f},h().createElement("div",{className:o("NestedSelect-optionLabel",{"is-disabled":P}),onClick:function(){!P&&(E?e.handleCheck(g,g.value,!0):e.handleOptionClick(g))}},e.renderValue(g,g.value)))}):h().createElement("div",{className:o("NestedSelect-option",{"no-result":!0})},N));return _},i.prototype.onMouseEnter=function(e,t,l){var r=this.state.stack;t=t+1;var s=e.children;s&&s.length?r[t]?r.splice(t,1,s):r.push(s):r[t]&&r.splice(t,1),this.setState({stack:r.slice(0,t+1)})},i.prototype.renderOuter=function(){var e=this,t=this.props,l=t.popOverContainer,r=t.translate,s=t.classnames,o=t.options,d=t.render,u=t.id,c=t.themeCss,v=!!this.state.inputValue,p=this.props.noResultsText;p&&(p=d("noResultText",r(p)));var m=h().createElement(a.yzG,{disabled:!this.state.isOpened,onRootClose:this.close},function(E){return h().createElement("div",{className:s("NestedSelect-menuOuter"),ref:E},v?e.renderSearchResult():o.length?e.renderOptions():h().createElement("div",{className:s("NestedSelect-noResult")},p))});return h().createElement(a.aVW,{target:this.getTarget,container:l||function(){return(0,j.findDOMNode)(e)},placement:"auto",show:!0},h().createElement(a.v$m,{className:s("NestedSelect-popover",(0,a.GwQ)((0,n.pi)((0,n.pi)({},this.props),{name:"nestedSelectPopoverClassName",id:u,themeCss:c})))},m))},i.prototype.render=function(){var e,t=this.props,l=t.className,r=t.style,s=t.disabled,o=t.classnames,d=t.multiple,u=t.placeholder,c=t.translate,v=t.inline,p=t.searchable,m=t.selectedOptions,E=t.clearable,M=t.loading,w=t.borderMode,S=t.mobileUI,N=t.popOverContainer,y=t.env,T=t.testIdBuilder,_=t.loadingConfig,g=t.maxTagCount,f=t.overflowTagPopover,k=this.props,b=k.classPrefix,P=k.themeCss,C=k.id;return h().createElement("div",{className:o("NestedSelectControl",l),ref:this.outTarget,style:r},h().createElement(A.AlT,{mobileUI:S,maxTagCount:g,overflowTagPopover:f,disabled:s,ref:this.domRef,placeholder:c(u!=null?u:"placeholder.empty"),inputPlaceholder:"",className:o("NestedSelect",(e={"NestedSelect--inline":v,"NestedSelect--single":!d,"NestedSelect--multi":d,"NestedSelect--searchable":p,"is-opened":this.state.isOpened,"is-focused":this.state.isFocused},e["NestedSelect--border".concat((0,a.zfV)(w))]=w,e),(0,a.GwQ)((0,n.pi)((0,n.pi)({},this.props),{name:"nestedSelectControlClassName",id:C,themeCss:P}))),result:d?m:m.length?m[0]:"",onResultClick:this.handleOutClick,value:this.state.inputValue,onChange:this.handleInputChange,onResultChange:this.handleResultChange,onClear:this.handleResultClear,itemRender:this.renderValue,onKeyPress:this.handleKeyPress,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.handleInputKeyDown,clearable:E,hasDropDownArrow:!0,allowInput:p&&!S,testIdBuilder:T},M?h().createElement(A.$jN,{loadingConfig:_,size:"sm"}):void 0),S?h().createElement(A.N4A,{className:o("NestedSelect-popup"),container:y.getModalContainer,isShow:this.state.isOpened,onHide:this.close,showConfirm:!1,showClose:!1},h().createElement(A.vTp,(0,n.pi)({onClose:this.close},this.props,{onChange:this.handleResultChange,options:this.props.options.slice(),value:m}))):this.state.isOpened?this.renderOuter():null,h().createElement(a.cWM,(0,n.pi)({},this.props,{config:{themeCss:P,classNames:[{key:"nestedSelectControlClassName",weights:{hover:{suf:".is-clickable:not(.is-disabled)"},focused:{suf:".is-opened:not(.is-mobile)"},disabled:{suf:".is-disabled"}}},{key:"nestedSelectPopoverClassName",weights:{default:{suf:" .".concat(b,"NestedSelect-option")},hover:{suf:" .".concat(b,"NestedSelect-option.is-highlight")},focused:{inner:".".concat(b,"NestedSelect-option.is-active")}}}],id:C},env:y})))},i.defaultProps={cascade:!1,withChildren:!1,onlyChildren:!1,onlyLeaf:!1,searchPromptText:"Select.searchPromptText",noResultsText:"noResult",checkAll:!0,checkAllLabel:"Select.checkAll",hideNodePathLabel:!1},(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",void 0)],i.prototype,"domRef",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[String,Object]),(0,n.w6)("design:returntype",Promise)],i.prototype,"dispatchEvent",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",void 0)],i.prototype,"handleOutClick",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],i.prototype,"handleResultClear",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],i.prototype,"close",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object,Object]),(0,n.w6)("design:returntype",void 0)],i.prototype,"renderValue",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Promise)],i.prototype,"handleOptionClick",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object,Number,Boolean]),(0,n.w6)("design:returntype",Promise)],i.prototype,"handleCheck",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],i.prototype,"getValue",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Promise)],i.prototype,"onFocus",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Promise)],i.prototype,"onBlur",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],i.prototype,"getTarget",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",void 0)],i.prototype,"handleKeyPress",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",void 0)],i.prototype,"handleInputKeyDown",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[String]),(0,n.w6)("design:returntype",void 0)],i.prototype,"handleInputChange",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Array]),(0,n.w6)("design:returntype",Promise)],i.prototype,"handleResultChange",null),(0,n.gn)([a.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],i.prototype,"getMenuSelectMenuStyle",null),(0,n.gn)([(0,Y.i)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],i.prototype,"render",null),i}(h().Component),q=function(R){(0,n.ZT)(i,R);function i(){return R!==null&&R.apply(this,arguments)||this}return i=(0,n.gn)([(0,a.oZB)({type:"nested-select"})],i),i}(K),ee=function(R){(0,n.ZT)(i,R);function i(){return R!==null&&R.apply(this,arguments)||this}return i=(0,n.gn)([(0,a.oZB)({type:"cascader-select"})],i),i}(K)},29974:function(Z,L,O){var n=O(98768),x=O(5125),h=O(95453),A=O(57348),a=x(function(j){return h(n(j,1,A,!0))});Z.exports=a}}]);
