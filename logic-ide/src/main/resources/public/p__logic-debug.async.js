"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2262],{28635:function(lt,V,i){i.d(V,{Z:function(){return U}});var B=i(56159),x=i(87363),R={icon:function(N,H){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:N}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:H}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:N}}]}},name:"check-circle",theme:"twotone"},a=R,G=i(92335),O=function(N,H){return x.createElement(G.Z,(0,B.Z)({},N,{ref:H,icon:a}))},U=x.forwardRef(O)},79549:function(lt,V,i){i.d(V,{Z:function(){return U}});var B=i(56159),x=i(87363),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z"}}]},name:"frown",theme:"outlined"},a=R,G=i(92335),O=function(N,H){return x.createElement(G.Z,(0,B.Z)({},N,{ref:H,icon:a}))},U=x.forwardRef(O)},72107:function(lt,V,i){i.d(V,{Ld:function(){return B},Iz:function(){return H},Du:function(){return st},dO:function(){return k},z1:function(){return ut},X0:function(){return N},_w:function(){return tt}});var B=function(s){return s.TypeAnnotation="TypeAnnotation",s.Structure="Structure",s.StructureProperty="StructureProperty",s.TypeParam="TypeParam",s.Variable="Variable",s.Logic="Logic",s.LogicItem="LogicItem",s}({}),x=function(s){return s.start="start",s.end="end",s.switch="switch",s["switch-case"]="switch-case",s["switch-def"]="switch-def",s["mqtt-pub"]="mqtt-pub",s["mqtt-sub"]="mqtt-sub",s["mqtt-unsub"]="mqtt-unsub",s["mqtt-client"]="mqtt-client",s["mqtt-server"]="mqtt-server",s["mqtt-broker"]="mqtt-broker",s.http="http",s.logic="logic",s.js="js",s.wait="wait",s}({}),R=i(63466),a=i.n(R),G=i(21140),O=i.n(G),U=i(52510),n=i.n(U),N=a()(function s(b){O()(this,s),n()(this,"concept",void 0),n()(this,"name",void 0),n()(this,"label",void 0),n()(this,"description",void 0),n()(this,"typeAnnotation",void 0),n()(this,"required",!1),n()(this,"defaultValue",void 0),this.concept=B.StructureProperty,this.name=b}),H=a()(function s(b){O()(this,s),n()(this,"concept",B.Logic),n()(this,"schemeVersion",void 0),n()(this,"version",void 0),n()(this,"id",void 0),n()(this,"name",void 0),n()(this,"label",void 0),n()(this,"description",void 0),n()(this,"triggerType",void 0),n()(this,"log",void 0),n()(this,"cron",void 0),n()(this,"typeParams",void 0),n()(this,"params",void 0),n()(this,"returns",void 0),n()(this,"variables",void 0),n()(this,"envs",void 0),n()(this,"items",[]),n()(this,"visualConfig",void 0),this.id=b,this.schemeVersion="0.1"}),st=a()(function s(b,p){var K=this;O()(this,s),n()(this,"concept","LogicItem"),n()(this,"id",void 0),n()(this,"name",void 0),n()(this,"type",void 0),n()(this,"label",void 0),n()(this,"description",void 0),n()(this,"params",void 0),n()(this,"returns",void 0),n()(this,"envs",void 0),n()(this,"afterReturnAdaptor",void 0),n()(this,"returnAccept",void 0),n()(this,"nextId",void 0),n()(this,"endId",void 0),n()(this,"condition",void 0),n()(this,"script",void 0),n()(this,"timeout",void 0),n()(this,"branches",void 0),n()(this,"url",void 0),n()(this,"method",void 0),n()(this,"headers",void 0),n()(this,"queryParams",void 0),n()(this,"tranScope",void 0),n()(this,"body",void 0),n()(this,"setEnv",function($){K.envs=$}),this.type=p,this.id=b}),mt=null,k=a()(function s(b){O()(this,s),n()(this,"concept","Param"),n()(this,"name",void 0),n()(this,"description",void 0),n()(this,"typeAnnotation",void 0),n()(this,"required",void 0),n()(this,"defaultValue",void 0),this.name=b}),dt=i(58853),it=i.n(dt),ct=i(38888),nt=i.n(ct),ut=function(s){it()(p,s);var b=nt()(p);function p(K){var $;return O()(this,p),$=b.call(this,K),$.concept="Return",$}return a()(p)}(k),tt=function(s){it()(p,s);var b=nt()(p);function p(K){var $;return O()(this,p),$=b.call(this,K),$.concept="Variable",$}return a()(p)}(k)},75743:function(lt,V,i){i.r(V),i.d(V,{default:function(){return ae}});var B=i(54306),x=i.n(B),R=i(56159),a=i(87363),G=i.n(a),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},U=O,n=i(92335),N=function(e,c){return a.createElement(n.Z,(0,R.Z)({},e,{ref:c,icon:U}))},H=a.forwardRef(N),st=i(14990),mt=i(22465),k=i(5671),dt=i(17696),it=i(19227),ct=i(75476),nt=i(1167),ut=i(22150),tt=i(4283),s=i(36267),b=i(23360),p=i(8051),K=i(84875),$=i.n(K),gt=i(88596),Ot=i(91918),Zt=i(79987),Lt=i(48826);const Pt=t=>{const{componentCls:e}=t;return{[e]:Object.assign(Object.assign({},(0,Ot.Wf)(t)),{margin:0,padding:0,listStyle:"none",[`${e}-item`]:{position:"relative",margin:0,paddingBottom:t.itemPaddingBottom,fontSize:t.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:t.itemHeadSize,insetInlineStart:(t.itemHeadSize-t.tailWidth)/2,height:`calc(100% - ${t.itemHeadSize}px)`,borderInlineStart:`${t.tailWidth}px ${t.lineType} ${t.tailColor}`},"&-pending":{[`${e}-item-head`]:{fontSize:t.fontSizeSM,backgroundColor:"transparent"},[`${e}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:t.itemHeadSize,height:t.itemHeadSize,backgroundColor:t.dotBg,border:`${t.dotBorderWidth}px ${t.lineType} transparent`,borderRadius:"50%","&-blue":{color:t.colorPrimary,borderColor:t.colorPrimary},"&-red":{color:t.colorError,borderColor:t.colorError},"&-green":{color:t.colorSuccess,borderColor:t.colorSuccess},"&-gray":{color:t.colorTextDisabled,borderColor:t.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:t.itemHeadSize/2,insetInlineStart:t.itemHeadSize/2,width:"auto",height:"auto",marginBlockStart:0,paddingBlock:t.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:-(t.fontSize*t.lineHeight-t.fontSize)+t.lineWidth,marginInlineStart:t.margin+t.itemHeadSize,marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${e}-item-tail`]:{display:"none"},[`> ${e}-item-content`]:{minHeight:t.controlHeightLG*1.2}}},[`&${e}-alternate,
        &${e}-right,
        &${e}-label`]:{[`${e}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:`-${t.marginXXS}px`,"&-custom":{marginInlineStart:t.tailWidth/2}},"&-left":{[`${e}-item-content`]:{insetInlineStart:`calc(50% - ${t.marginXXS}px)`,width:`calc(50% - ${t.marginSM}px)`,textAlign:"start"}},"&-right":{[`${e}-item-content`]:{width:`calc(50% - ${t.marginSM}px)`,margin:0,textAlign:"end"}}}},[`&${e}-right`]:{[`${e}-item-right`]:{[`${e}-item-tail,
            ${e}-item-head,
            ${e}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(t.itemHeadSize+t.tailWidth)/2}px)`},[`${e}-item-content`]:{width:`calc(100% - ${t.itemHeadSize+t.marginXS}px)`}}},[`&${e}-pending
        ${e}-item-last
        ${e}-item-tail`]:{display:"block",height:`calc(100% - ${t.margin}px)`,borderInlineStart:`${t.tailWidth}px dotted ${t.tailColor}`},[`&${e}-reverse
        ${e}-item-last
        ${e}-item-tail`]:{display:"none"},[`&${e}-reverse ${e}-item-pending`]:{[`${e}-item-tail`]:{insetBlockStart:t.margin,display:"block",height:`calc(100% - ${t.margin}px)`,borderInlineStart:`${t.tailWidth}px dotted ${t.tailColor}`},[`${e}-item-content`]:{minHeight:t.controlHeightLG*1.2}},[`&${e}-label`]:{[`${e}-item-label`]:{position:"absolute",insetBlockStart:-(t.fontSize*t.lineHeight-t.fontSize)+t.tailWidth,width:`calc(50% - ${t.marginSM}px)`,textAlign:"end"},[`${e}-item-right`]:{[`${e}-item-label`]:{insetInlineStart:`calc(50% + ${t.marginSM}px)`,width:`calc(50% - ${t.marginSM}px)`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${e}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}};var zt=(0,Zt.Z)("Timeline",t=>{const e=(0,Lt.TS)(t,{itemHeadSize:10,customHeadPaddingVertical:t.paddingXXS,paddingInlineEnd:2});return[Pt(e)]},t=>({tailColor:t.colorSplit,tailWidth:t.lineWidthBold,dotBorderWidth:t.wireframe?t.lineWidthBold:t.lineWidth*3,dotBg:t.colorBgContainer,itemPaddingBottom:t.padding*1.25})),Nt=function(t,e){var c={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(c[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(t);d<o.length;d++)e.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(t,o[d])&&(c[o[d]]=t[o[d]]);return c},xt=t=>{var{prefixCls:e,className:c,color:o="blue",dot:d,pending:F=!1,position:w,label:v,children:A}=t,E=Nt(t,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:L}=a.useContext(gt.E_),m=L("timeline",e),T=$()(`${m}-item`,{[`${m}-item-pending`]:F},c),P=/blue|red|green|gray/.test(o||"")?void 0:o,C=$()(`${m}-item-head`,{[`${m}-item-head-custom`]:!!d,[`${m}-item-head-${o}`]:!P});return a.createElement("li",Object.assign({},E,{className:T}),v&&a.createElement("div",{className:`${m}-item-label`},v),a.createElement("div",{className:`${m}-item-tail`}),a.createElement("div",{className:C,style:{borderColor:P,color:P}},d),a.createElement("div",{className:`${m}-item-content`},A))},At=i(59816),Tt=i(43391),pt=function(t,e){var c={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(c[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(t);d<o.length;d++)e.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(t,o[d])&&(c[o[d]]=t[o[d]]);return c},Bt=t=>{var{prefixCls:e,className:c,pending:o=!1,children:d,items:F,rootClassName:w,reverse:v=!1,direction:A,hashId:E,pendingDot:L,mode:m=""}=t,T=pt(t,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const P=(l,Z)=>m==="alternate"?l==="right"?`${e}-item-right`:l==="left"?`${e}-item-left`:Z%2===0?`${e}-item-left`:`${e}-item-right`:m==="left"?`${e}-item-left`:m==="right"?`${e}-item-right`:l==="right"?`${e}-item-right`:"",C=(0,At.Z)(F||[]),D=typeof o=="boolean"?null:o;o&&C.push({pending:!!o,dot:L||a.createElement(Tt.Z,null),children:D}),v&&C.reverse();const W=C.length,_=`${e}-item-last`,Y=C.filter(l=>!!l).map((l,Z)=>{var u;const M=Z===W-2?_:"",z=Z===W-1?_:"",{className:Q}=l,q=pt(l,["className"]);return a.createElement(xt,Object.assign({},q,{className:$()([Q,!v&&o?M:z,P((u=l==null?void 0:l.position)!==null&&u!==void 0?u:"",Z)]),key:(l==null?void 0:l.key)||Z}))}),S=C.some(l=>!!(l!=null&&l.label)),J=$()(e,{[`${e}-pending`]:!!o,[`${e}-reverse`]:!!v,[`${e}-${m}`]:!!m&&!S,[`${e}-label`]:S,[`${e}-rtl`]:A==="rtl"},c,w,E);return a.createElement("ul",Object.assign({},T,{className:J}),Y)},Ht=i(82149);function Ft(t,e){return t&&Array.isArray(t)?t:(0,Ht.Z)(e).map(c=>{var o,d;return Object.assign({children:(d=(o=c==null?void 0:c.props)===null||o===void 0?void 0:o.children)!==null&&d!==void 0?d:""},c.props)})}var wt=Ft,Et=function(t,e){var c={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(c[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(t);d<o.length;d++)e.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(t,o[d])&&(c[o[d]]=t[o[d]]);return c};const St=t=>{const{getPrefixCls:e,direction:c,timeline:o}=a.useContext(gt.E_),{prefixCls:d,children:F,items:w,className:v,style:A}=t,E=Et(t,["prefixCls","children","items","className","style"]),L=e("timeline",d),[m,T]=zt(L),P=wt(w,F);return m(a.createElement(Bt,Object.assign({},E,{className:$()(o==null?void 0:o.className,v),style:Object.assign(Object.assign({},o==null?void 0:o.style),A),prefixCls:L,direction:c,items:P,hashId:T})))};St.Item=xt;var Wt=St,Mt=Wt,vt=i(54145),Vt=i(91711),Rt=i(72107),Dt=i(9364),Jt=i(89147),Xt=i(3619),Gt=i(9976),Ut=i(34957),ht=i(94990),r=i(33130),pe=G().createContext({logic:new Rt.Iz("")}),Kt=function(e){var c,o,d,F=(0,a.useState)(),w=x()(F,2),v=w[0],A=w[1],E=(0,a.useState)(),L=x()(E,2),m=L[0],T=L[1],P=(0,a.useState)(!0),C=x()(P,2),D=C[0],W=C[1],_=(0,a.useState)(),Y=x()(_,2),S=Y[0],J=Y[1],l=(0,a.useState)(),Z=x()(l,2),u=Z[0],M=Z[1],z=(0,a.useState)(),Q=x()(z,2),q=Q[0],le=Q[1],se=(0,a.useState)(),yt=x()(se,2),ot=yt[0],ft=yt[1],de=(0,a.useState)(),bt=x()(de,2),ce=bt[0],ue=bt[1],Ct=(0,a.useRef)(),Se=function(j){var g=j.node;ft(g);var h=u==null?void 0:u.itemLogs.find(function(I){return I.config.id==g.id});J(h)};function ve(f,j,g,h){return{name:"button",args:{markup:[{tagName:"circle",selector:"button",attrs:{r:14,x:0,y:0,stroke:"#fe854f","stroke-width":5-g<1?1:5-g,fill:"white",cursor:"pointer"}},{tagName:"text",textContent:f,selector:"icon",attrs:{fill:"#fe854f","font-size":20-g<12?12:20-g,"text-anchor":"middle","pointer-events":"none",y:"0.3em"}}],x:(h-1)*28,y:0,onClick:function(X){var $t=X.view,rt=$t.cell;ft(rt),W(!1),J(j)}}}}(0,a.useEffect)(function(){q&&(v==null||v.centerCell(q))},[q,v]),(0,a.useEffect)(function(){console.log("select curItemLog",S)},[S]),(0,a.useEffect)(function(){var f=v==null?void 0:v.getNodes().find(function(j){return j.id==e.nextId});f==null||f.attr("body/fill","red"),le(f)},[e.nextId]),(0,a.useEffect)(function(){var f;v==null||(f=v.getNodes().find(function(j){return j.id==e.nextId}))===null||f===void 0||f.attr("body/fill","red")},[v]),(0,a.useEffect)(function(){e.config&&T(e.config)},[e.config]),(0,a.useEffect)(function(){var f,j;console.log("props.debugLogs",e.debugLogs),((f=e.debugLogs)===null||f===void 0?void 0:f.length)>0&&setInterval(he,2e3);var g=[];e&&((j=e.debugLogs)===null||j===void 0||j.forEach(function(h){var I,X;g.push({children:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("span",{style:{cursor:"pointer",fontWeight:h.id==(u==null?void 0:u.id)?"bolder":"normal",color:h.id==(u==null?void 0:u.id)?"#52c41a":"black"},onClick:function(){M(h),v==null||v.fromJSON(m==null?void 0:m.visualConfig);var rt,at={};h.itemLogs.forEach(function(jt,It){var y=v==null?void 0:v.getNodes().find(function(me){return me.id==jt.config.id});console.log("\u9009\u4E2D\u7684\u8282\u70B9"),console.log(y),y&&(y.addTools({name:"boundary",args:{attrs:{stroke:"red",strokeWidth:1.5,rx:5,ry:5}}}),rt=y),at[y==null?void 0:y.id]?at[y==null?void 0:y.id]+=1:at[y==null?void 0:y.id]=1,y==null||y.addTools(ve(It,jt,It,at[y==null?void 0:y.id]))}),v==null||v.centerCell(rt),J({}),ft({})},children:[(0,r.jsx)("p",{children:(I=h.itemLogs[0])===null||I===void 0?void 0:I.config.name}),(0,r.jsx)("p",{children:h.serverTime}),((X=e.logicIns)===null||X===void 0?void 0:X.version)==h.version?(0,r.jsx)("p",{}):(0,r.jsx)("p",{children:(0,r.jsxs)(tt.Z,{children:[(0,r.jsx)(s.Z.Paragraph,{style:{color:"red"},children:"\u7248\u672C\u53F7:"}),(0,r.jsxs)(s.Z.Paragraph,{copyable:{tooltips:["\u70B9\u51FB\u590D\u5236","\u590D\u5236\u6210\u529F!"],text:h.version},children:[h.version,(0,r.jsx)(s.Z.Link,{style:{margin:"5px"},href:"#/assets/logic/i/".concat(h.logicId,"/view/").concat(h.version),target:"_blank",children:(0,r.jsx)(H,{})})]})]})}),(0,r.jsx)("p",{children:h.message})]})}),color:h.success?"green":"red"})})),ue(g)},[e.debugLogs,e.logicIns,v,u]),(0,a.useEffect)(function(){if(m){try{var f=(0,Dt.K)(),j=f.Shapes;(0,Jt.m)(j)}catch(h){console.error("\u6CE8\u518C\u8282\u70B9\u51FA\u9519\uFF1A"),console.error(h)}var g=new k.kJ({container:Ct.current,embedding:{enabled:!0,validate:function(I){return I.child.setData({hoverNode:I.parent}),!0}},mousewheel:{enabled:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:15}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,snap:{radius:20},createEdge:function(){return new k.bn.kS({tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0})},validateConnection:function(I){var X=I.targetMagnet;return!!X}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},background:{color:"#F2F7FA"},grid:!0});g.use(new nt.H({enabled:!0,sharp:!0})).use(new dt.A({enabled:!0})).use(new ct.Y({enabled:!0,multiple:!0,strict:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0,pointerEvents:"none"})).use(new ut.T({enabled:!0})).use(new it.N),g.on("edge:dblclick",function(){}),g.on("edge:mouseenter",function(){}),g.on("edge:mouseleave",function(){}),g.on("node:moved",function(){}),g.on("node:mouseenter",function(){}),g.on("node:mouseleave",function(){}),g.on("node:added",function(){}),g.on("node:dblclick",function(h){var I=h.node}),g.on("blank:dblclick",function(h){var I=h.x,X=h.y}),g.fromJSON(m.visualConfig),(0,Xt.V)(g),A(g)}},[m]);var he=function(){},fe=[{key:"debug-node-input",label:"\u8282\u70B9\u5165\u51FA\u53C2",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(ht.Z,{formId:"debug-node-input",values:{returnData:S==null?void 0:S.returnData,body:S==null||(c=S.configInstance)===null||c===void 0?void 0:c.body},onSubmit:function(){}}),(0,r.jsx)(s.Z.Text,{style:{marginLeft:"15px"},copyable:{tooltips:["\u590D\u5236\u8282\u70B9\u7F16\u53F7","\u590D\u5236\u6210\u529F!"],text:ot==null?void 0:ot.id},children:"\u8282\u70B9\u7F16\u53F7"})]})},{key:"config",label:"\u8282\u70B9\u914D\u7F6E",children:(0,r.jsx)("div",{children:(0,r.jsx)(Ut.Z,{onSubmit:function(){},editNode:ot})})},{key:"configIns",label:"\u8282\u70B9\u5B9E\u4F8B",children:(0,r.jsx)(ht.Z,{formId:(S==null||(o=S.config)===null||o===void 0?void 0:o.type)||"",values:S==null?void 0:S.configInstance,onSubmit:function(){}})},{key:"debug-context",label:"\u6267\u884C\u4E0A\u4E0B\u6587",children:(0,r.jsx)(ht.Z,{formId:"debug-context",values:{varsJson:u==null?void 0:u.varsJson,paramsJson:u==null?void 0:u.paramsJson,varsJsonEnd:u==null?void 0:u.varsJsonEnd},onSubmit:function(){}})}];return(0,r.jsxs)(b.Z,{style:{margin:0,height:"100vh"},children:[(0,r.jsxs)(b.Z.Sider,{theme:"light",collapsedWidth:0,width:260,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0,borderRight:"0.5px solid"},children:[(0,r.jsx)(p.Z,{children:"\u6267\u884C\u8BB0\u5F55"}),(0,r.jsx)(Mt,{style:{height:"100%"},items:ce})]}),(0,r.jsxs)(b.Z,{style:{marginLeft:260},children:[(0,r.jsxs)(b.Z.Header,{style:{backgroundColor:"white",padding:0},children:[(d=e.btns)===null||d===void 0?void 0:d.map(function(f){return f}),(0,r.jsx)(vt.ZP,{type:"text",icon:D?(0,r.jsx)(st.Z,{}):(0,r.jsx)(mt.Z,{}),onClick:function(){W(!D)},style:{float:"right",right:"16px",fontSize:"16px",width:64,height:64}})]}),(0,r.jsx)(b.Z.Content,{className:"app-content",children:(0,r.jsx)(Gt.Z,{ref:Ct})})]}),(0,r.jsxs)(b.Z.Sider,{theme:"light",collapsed:D,collapsedWidth:0,style:{overflow:"scroll"},width:500,children:[(0,r.jsx)(Vt.Z,{items:fe,defaultActiveKey:"inout"}),(0,r.jsx)(vt.ZP,{type:"text",onClick:function(){W(!D)},style:{position:"absolute",top:0,right:0,fontSize:"16px",width:64,height:64},children:"x"})]})]})},Yt=Kt,et=i(48364),Qt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},qt=Qt,kt=function(e,c){return a.createElement(n.Z,(0,R.Z)({},e,{ref:c,icon:qt}))},_t=a.forwardRef(kt),te=i(28635),ee=i(79549),ie=i(72197),ne=i(98306);function oe(t,e){window.document.title=">["+(t==null?void 0:t.name)+"]\u5B9E\u4F8B:"+(e==null?void 0:e.bizId)}var re=function(){var e=(0,ne.UO)(),c=e.id,o=(0,a.useState)(),d=x()(o,2),F=d[0],w=d[1],v=(0,a.useState)(""),A=x()(v,2),E=A[0],L=A[1],m=(0,a.useState)(!1),T=x()(m,2),P=T[0],C=T[1],D=(0,a.useState)([]),W=x()(D,2),_=W[0],Y=W[1],S=(0,a.useState)(),J=x()(S,2),l=J[0],Z=J[1];return(0,a.useEffect)(function(){C(!0),c&&(0,et.m9)(c).then(function(u){if(u){var M=u;Z(u),C(!0),(0,et.Uh)(u.logicId,u.version).then(function(z){var Q=z.configJson,q=z.name;L(q),w(Q),oe(Q,M),C(!1)}).catch(function(z){C(!1),console.log("err"),console.log(z)})}})},[c]),(0,a.useEffect)(function(){l&&(0,et.gC)(l).then(function(u){u&&Y(u)})},[l]),(0,r.jsx)("div",{children:(0,r.jsx)(ie.Z,{spinning:P,children:(0,r.jsx)(Yt,{btns:[(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsxs)(vt.ZP,{type:"primary",onClick:function(){C(!0),(0,et.m9)(c).then(function(M){M&&(Z(M),(0,et.gC)(M).then(function(z){z&&Y(z),C(!1)})),C(!1)})},children:[(0,r.jsx)(_t,{}),"\u5237\u65B0\u8BB0\u5F55"]}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsxs)("span",{children:["\u662F\u5426\u5B8C\u6210\uFF1A",l!=null&&l.isOver?(0,r.jsx)(te.Z,{twoToneColor:"#52c41a"}):(0,r.jsx)(ee.Z,{twoToneColor:"red"})]}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsxs)("span",{children:["\u5F85\u6267\u884C\uFF1A",l==null?void 0:l.nextName]}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsxs)(tt.Z,{children:["\u4E1A\u52A1\u6807\u8BC6\uFF1A",l==null?void 0:l.bizId,(0,r.jsx)(s.Z.Text,{copyable:{tooltips:["\u590D\u5236\u6807\u8BC6","\u590D\u5236\u6210\u529F!"],text:l==null?void 0:l.bizId}})]}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsx)(tt.Z,{children:E}),(0,r.jsx)(s.Z.Text,{copyable:{tooltips:["\u590D\u5236\u7F16\u53F7","\u590D\u5236\u6210\u529F!"],text:l==null?void 0:l.logicId}}),(0,r.jsx)(p.Z,{type:"vertical"}),(0,r.jsx)("span",{style:{color:"red"},children:"\u6267\u884C\u7248\u672C\uFF1A"}),(0,r.jsxs)("span",{children:[l==null?void 0:l.version,(0,r.jsx)(s.Z.Text,{copyable:{tooltips:["\u590D\u5236\u7248\u672C\u53F7","\u590D\u5236\u6210\u529F!"],text:l==null?void 0:l.version}})]})],nextId:l==null?void 0:l.nextId,config:F,logicIns:l,debugLogs:_})})})},ae=re}}]);
