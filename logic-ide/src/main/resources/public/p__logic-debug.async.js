"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2262],{42651:function(re,H,n){n.d(H,{Z:function(){return v}});var U=n(21140),u=n.n(U),C=n(63466),F=n.n(C),f=n(52510),o=n.n(f),v=function(){function L(y){u()(this,L),o()(this,"_nodeConfig",void 0),o()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(y)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return F()(L,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(s){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=s)}},{key:"setGroups",value:function(s){this._groups=s}},{key:"setConfigSchemel",value:function(s){this._nodeConfig.data?(this._nodeConfig.data.configSchema=s,this._nodeConfig.data.config={type:s}):this._nodeConfig.data={configSchema:s,config:{type:s}}}},{key:"setConfigData",value:function(s){this._nodeConfig.data?this._nodeConfig.data.config=s:this._nodeConfig.data={config:s}}}]),L}()},82901:function(re,H,n){n.r(H),n.d(H,{default:function(){return dt}});var U=n(54306),u=n.n(U),C=n(25359),F=n(49811),f=n(56159),o=n(87363),v=n.n(o),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},y=L,s=n(92335),E=function(t,r){return o.createElement(s.Z,(0,f.Z)({},t,{ref:r,icon:y}))},$=o.forwardRef(E),N=n(14990),G=n(22465),I=n(5671),p=n(17696),z=n(19227),X=n(75476),q=n(1167),M=n(22150),Y=n(4283),ee=n(36267),J=n(23360),K=n(8051),le=n(84875),ne=n.n(le),fe=n(88596),$e=n(91918),je=n(79987),Ne=n(48826);const we=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign({},(0,$e.Wf)(e)),{margin:0,padding:0,listStyle:"none",[`${t}-item`]:{position:"relative",margin:0,paddingBottom:e.itemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.itemHeadSize,insetInlineStart:(e.itemHeadSize-e.tailWidth)/2,height:`calc(100% - ${e.itemHeadSize}px)`,borderInlineStart:`${e.tailWidth}px ${e.lineType} ${e.tailColor}`},"&-pending":{[`${t}-item-head`]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},[`${t}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:e.itemHeadSize,height:e.itemHeadSize,backgroundColor:e.dotBg,border:`${e.dotBorderWidth}px ${e.lineType} transparent`,borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:e.itemHeadSize/2,insetInlineStart:e.itemHeadSize/2,width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:-(e.fontSize*e.lineHeight-e.fontSize)+e.lineWidth,marginInlineStart:e.margin+e.itemHeadSize,marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${t}-item-tail`]:{display:"none"},[`> ${t}-item-content`]:{minHeight:e.controlHeightLG*1.2}}},[`&${t}-alternate,
        &${t}-right,
        &${t}-label`]:{[`${t}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:`-${e.marginXXS}px`,"&-custom":{marginInlineStart:e.tailWidth/2}},"&-left":{[`${t}-item-content`]:{insetInlineStart:`calc(50% - ${e.marginXXS}px)`,width:`calc(50% - ${e.marginSM}px)`,textAlign:"start"}},"&-right":{[`${t}-item-content`]:{width:`calc(50% - ${e.marginSM}px)`,margin:0,textAlign:"end"}}}},[`&${t}-right`]:{[`${t}-item-right`]:{[`${t}-item-tail,
            ${t}-item-head,
            ${t}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(e.itemHeadSize+e.tailWidth)/2}px)`},[`${t}-item-content`]:{width:`calc(100% - ${e.itemHeadSize+e.marginXS}px)`}}},[`&${t}-pending
        ${t}-item-last
        ${t}-item-tail`]:{display:"block",height:`calc(100% - ${e.margin}px)`,borderInlineStart:`${e.tailWidth}px dotted ${e.tailColor}`},[`&${t}-reverse
        ${t}-item-last
        ${t}-item-tail`]:{display:"none"},[`&${t}-reverse ${t}-item-pending`]:{[`${t}-item-tail`]:{insetBlockStart:e.margin,display:"block",height:`calc(100% - ${e.margin}px)`,borderInlineStart:`${e.tailWidth}px dotted ${e.tailColor}`},[`${t}-item-content`]:{minHeight:e.controlHeightLG*1.2}},[`&${t}-label`]:{[`${t}-item-label`]:{position:"absolute",insetBlockStart:-(e.fontSize*e.lineHeight-e.fontSize)+e.tailWidth,width:`calc(50% - ${e.marginSM}px)`,textAlign:"end"},[`${t}-item-right`]:{[`${t}-item-label`]:{insetInlineStart:`calc(50% + ${e.marginSM}px)`,width:`calc(50% - ${e.marginSM}px)`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${t}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}};var Oe=(0,je.Z)("Timeline",e=>{const t=(0,Ne.TS)(e,{itemHeadSize:10,customHeadPaddingVertical:e.paddingXXS,paddingInlineEnd:2});return[we(t)]},e=>({tailColor:e.colorSplit,tailWidth:e.lineWidthBold,dotBorderWidth:e.wireframe?e.lineWidthBold:e.lineWidth*3,dotBg:e.colorBgContainer,itemPaddingBottom:e.padding*1.25})),Ee=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(r[i[l]]=e[i[l]]);return r},he=e=>{var{prefixCls:t,className:r,color:i="blue",dot:l,pending:Z=!1,position:d,label:T,children:W}=e,R=Ee(e,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:x}=o.useContext(fe.E_),S=x("timeline",t),V=ne()(`${S}-item`,{[`${S}-item-pending`]:Z},r),A=/blue|red|green|gray/.test(i||"")?void 0:i,O=ne()(`${S}-item-head`,{[`${S}-item-head-custom`]:!!l,[`${S}-item-head-${i}`]:!A});return o.createElement("li",Object.assign({},R,{className:V}),T&&o.createElement("div",{className:`${S}-item-label`},T),o.createElement("div",{className:`${S}-item-tail`}),o.createElement("div",{className:O,style:{borderColor:A,color:A}},l),o.createElement("div",{className:`${S}-item-content`},W))},_e=n(59816),Le=n(43391),me=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(r[i[l]]=e[i[l]]);return r},Ie=e=>{var{prefixCls:t,className:r,pending:i=!1,children:l,items:Z,rootClassName:d,reverse:T=!1,direction:W,hashId:R,pendingDot:x,mode:S=""}=e,V=me(e,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const A=(g,j)=>S==="alternate"?g==="right"?`${t}-item-right`:g==="left"?`${t}-item-left`:j%2===0?`${t}-item-left`:`${t}-item-right`:S==="left"?`${t}-item-left`:S==="right"?`${t}-item-right`:g==="right"?`${t}-item-right`:"",O=(0,_e.Z)(Z||[]),Q=typeof i=="boolean"?null:i;i&&O.push({pending:!!i,dot:x||o.createElement(Le.Z,null),children:Q}),T&&O.reverse();const k=O.length,c=`${t}-item-last`,w=O.filter(g=>!!g).map((g,j)=>{var oe;const ue=j===k-2?c:"",se=j===k-1?c:"",{className:ae}=g,ge=me(g,["className"]);return o.createElement(he,Object.assign({},ge,{className:ne()([ae,!T&&i?ue:se,A((oe=g==null?void 0:g.position)!==null&&oe!==void 0?oe:"",j)]),key:(g==null?void 0:g.key)||j}))}),_=O.some(g=>!!(g!=null&&g.label)),D=ne()(t,{[`${t}-pending`]:!!i,[`${t}-reverse`]:!!T,[`${t}-${S}`]:!!S&&!_,[`${t}-label`]:_,[`${t}-rtl`]:W==="rtl"},r,d,R);return o.createElement("ul",Object.assign({},V,{className:D}),w)},ze=n(82149);function Te(e,t){return e&&Array.isArray(e)?e:(0,ze.Z)(t).map(r=>{var i,l;return Object.assign({children:(l=(i=r==null?void 0:r.props)===null||i===void 0?void 0:i.children)!==null&&l!==void 0?l:""},r.props)})}var Ae=Te,Pe=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(r[i[l]]=e[i[l]]);return r};const ve=e=>{const{getPrefixCls:t,direction:r,timeline:i}=o.useContext(fe.E_),{prefixCls:l,children:Z,items:d,className:T,style:W}=e,R=Pe(e,["prefixCls","children","items","className","style"]),x=t("timeline",l),[S,V]=Oe(x),A=Ae(d,Z);return S(o.createElement(Ie,Object.assign({},R,{className:ne()(i==null?void 0:i.className,T),style:Object.assign(Object.assign({},i==null?void 0:i.style),W),prefixCls:x,direction:r,items:A,hashId:V})))};ve.Item=he;var Ze=ve,De=Ze,ce=n(54145),Be=n(91711),He=n(72107),Fe=n(58146),Me=n(89147),We=n(3619),Re=n(9976),Ve=n(34957),Ue=n(62835),a=n(33130),bt=v().createContext({logic:new He.Iz("")}),Xe=function(t){var r,i,l=(0,o.useState)(),Z=u()(l,2),d=Z[0],T=Z[1],W=(0,o.useState)(),R=u()(W,2),x=R[0],S=R[1],V=(0,o.useState)(!0),A=u()(V,2),O=A[0],Q=A[1],k=(0,o.useState)(),c=u()(k,2),w=c[0],_=c[1],D=(0,o.useState)(),g=u()(D,2),j=g[0],oe=g[1],ue=(0,o.useState)(),se=u()(ue,2),ae=se[0],ge=se[1],ct=(0,o.useState)(),pe=u()(ct,2),ut=pe[0],xe=pe[1],gt=(0,o.useState)(),ye=u()(gt,2),ft=ye[0],ht=ye[1],Se=(0,o.useRef)(),be=function(B){var b=B.node;xe(b);var h=j==null?void 0:j.itemLogs.find(function(P){return P.config.id==b.id});_(h)};(0,o.useEffect)(function(){ae&&(d==null||d.centerCell(ae))},[ae,d]),(0,o.useEffect)(function(){console.log("play curItemLog",w)},[w]),(0,o.useEffect)(function(){var m=d==null?void 0:d.getNodes().find(function(B){return B.id==t.nextId});m==null||m.attr("body/fill","red"),ge(m)},[t.nextId]),(0,o.useEffect)(function(){var m;d==null||(m=d.getNodes().find(function(B){return B.id==t.nextId}))===null||m===void 0||m.attr("body/fill","red")},[d]),(0,o.useEffect)(function(){t.config&&S(t.config)},[t.config]),(0,o.useEffect)(function(){var m,B;console.log("props.debugLogs",t.debugLogs),((m=t.debugLogs)===null||m===void 0?void 0:m.length)>0&&setInterval(mt,2e3);var b=[];t&&((B=t.debugLogs)===null||B===void 0||B.forEach(function(h){var P,te;b.push({children:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{style:{cursor:"pointer",fontWeight:h.id==(j==null?void 0:j.id)?"bolder":"normal",color:h.id==(j==null?void 0:j.id)?"#52c41a":"black"},onClick:function(){oe(h),d==null||d.fromJSON(x==null?void 0:x.visualConfig);var Ce;h.itemLogs.forEach(function(pt){var de=d==null?void 0:d.getNodes().find(function(xt){return xt.id==pt.config.id});console.log("fill node"),console.log(de),de&&(de.addTools({name:"boundary",args:{attrs:{stroke:"red",strokeWidth:4,fillOpacity:.2}}}),Ce=de)}),d==null||d.centerCell(Ce),_({}),xe({})},children:[(0,a.jsx)("p",{children:(P=h.itemLogs[0])===null||P===void 0?void 0:P.config.name}),(0,a.jsx)("p",{children:h.serverTime}),((te=t.logicIns)===null||te===void 0?void 0:te.version)==h.version?(0,a.jsx)("p",{}):(0,a.jsx)("p",{children:(0,a.jsxs)(Y.Z,{children:[(0,a.jsx)(ee.Z.Paragraph,{style:{color:"red"},children:"\u7248\u672C\u53F7:"}),(0,a.jsxs)(ee.Z.Paragraph,{copyable:{tooltips:["\u70B9\u51FB\u590D\u5236","\u590D\u5236\u6210\u529F!"],text:h.version},children:[h.version,(0,a.jsx)(ee.Z.Link,{style:{margin:"5px"},href:"#/assets/logic/i/".concat(h.logicId,"/view/").concat(h.version),target:"_blank",children:(0,a.jsx)($,{})})]})]})}),(0,a.jsx)("p",{children:h.message})]})}),color:h.success?"green":"red"})})),ht(b)},[t.debugLogs,t.logicIns,d,j]),(0,o.useEffect)(function(){if(x){try{var m=(0,Fe.K)(),B=m.Shapes;(0,Me.m)(B)}catch(h){console.error("\u6CE8\u518C\u8282\u70B9\u51FA\u9519\uFF1A"),console.error(h)}var b=new I.kJ({container:Se.current,embedding:{enabled:!0,validate:function(P){return P.child.setData({hoverNode:P.parent}),!0}},mousewheel:{enabled:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:15}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,snap:{radius:20},createEdge:function(){return new I.bn.kS({tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0})},validateConnection:function(P){var te=P.targetMagnet;return!!te}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},background:{color:"#F2F7FA"},grid:!0});b.use(new q.H({enabled:!0,sharp:!0})).use(new p.A({enabled:!0})).use(new X.Y({enabled:!0,multiple:!0,strict:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0,pointerEvents:"none"})).use(new M.T({enabled:!0})).use(new z.N),b.on("edge:dblclick",function(){}),b.on("edge:mouseenter",function(){}),b.on("edge:mouseleave",function(){}),b.on("node:moved",function(){}),b.on("node:mouseenter",function(){}),b.on("node:mouseleave",function(){}),b.on("node:added",function(){}),b.on("node:dblclick",function(h){var P=h.node;Q(!1)}),b.on("blank:dblclick",function(h){var P=h.x,te=h.y}),b.fromJSON(x.visualConfig),(0,We.V)(b),T(b)}},[x]),(0,o.useEffect)(function(){d==null||d.off("node:click",be),d==null||d.on("node:click",be)},[j]);var mt=function(){},vt=[{key:"inout",label:"\u5165\u51FA\u53C2",children:(0,a.jsx)(Ue.Z,{formId:"debug-log",values:{returnData:w==null?void 0:w.returnData,paramsJson:w==null?void 0:w.paramsJson,body:w==null||(r=w.configInstance)===null||r===void 0?void 0:r.body},onSubmit:function(){}})},{key:"config",label:"\u8282\u70B9\u914D\u7F6E",children:(0,a.jsx)(Ve.Z,{onSubmit:function(){},editNode:ut})}];return(0,a.jsxs)(J.Z,{style:{margin:0,height:"100vh"},children:[(0,a.jsxs)(J.Z.Sider,{theme:"light",collapsedWidth:0,width:300,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0,borderRight:"0.5px solid"},children:[(0,a.jsx)(K.Z,{children:"\u72B6\u6001\u53D8\u66F4\u8BB0\u5F55"}),(0,a.jsx)(De,{style:{height:"100%"},items:ft})]}),(0,a.jsxs)(J.Z,{style:{marginLeft:300},children:[(0,a.jsxs)(J.Z.Header,{style:{backgroundColor:"white",padding:0},children:[(i=t.btns)===null||i===void 0?void 0:i.map(function(m){return m}),(0,a.jsx)(ce.ZP,{type:"text",icon:O?(0,a.jsx)(N.Z,{}):(0,a.jsx)(G.Z,{}),onClick:function(){Q(!O)},style:{float:"right",right:"16px",fontSize:"16px",width:64,height:64}})]}),(0,a.jsx)(J.Z.Content,{className:"app-content",children:(0,a.jsx)(Re.Z,{ref:Se})})]}),(0,a.jsxs)(J.Z.Sider,{theme:"light",collapsed:O,collapsedWidth:0,style:{overflow:"scroll"},width:500,children:[(0,a.jsx)(Be.Z,{items:vt,defaultActiveKey:"inout"}),(0,a.jsx)(ce.ZP,{type:"text",onClick:function(){Q(!O)},style:{position:"absolute",top:0,right:0,fontSize:"16px",width:64,height:64},children:"x"})]})]})},Ye=Xe,ie=n(48364),Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},Ke=Ge,Je=function(t,r){return o.createElement(s.Z,(0,f.Z)({},t,{ref:r,icon:Ke}))},Qe=o.forwardRef(Je),ke={icon:function(t,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:t}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:r}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:t}}]}},name:"check-circle",theme:"twotone"},qe=ke,et=function(t,r){return o.createElement(s.Z,(0,f.Z)({},t,{ref:r,icon:qe}))},tt=o.forwardRef(et),nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z"}}]},name:"frown",theme:"outlined"},it=nt,ot=function(t,r){return o.createElement(s.Z,(0,f.Z)({},t,{ref:r,icon:it}))},at=o.forwardRef(ot),rt=n(72197),lt=n(98306),Ct=null,st=function(){var t=(0,lt.UO)(),r=t.id,i=(0,o.useState)(),l=u()(i,2),Z=l[0],d=l[1],T=(0,o.useState)(!1),W=u()(T,2),R=W[0],x=W[1],S=(0,o.useState)([]),V=u()(S,2),A=V[0],O=V[1],Q=(0,o.useState)(),k=u()(Q,2),c=k[0],w=k[1];return(0,o.useEffect)(function(){x(!0),r&&(0,ie.m9)(r).then(function(_){_&&(w(_),x(!0),(0,ie.b9)(_.logicId,_.version).then(function(D){var g=D;g.id=r,d(g),x(!1)}).catch(function(D){x(!1),console.log("err"),console.log(D)}))})},[r]),(0,o.useEffect)(function(){c&&(0,ie.gC)(c).then(function(_){_&&O(_)})},[c]),(0,a.jsx)("div",{children:(0,a.jsx)(rt.Z,{spinning:R,children:(0,a.jsx)(Ye,{btns:[(0,a.jsx)(K.Z,{type:"vertical"}),(0,a.jsxs)(ce.ZP,{type:"primary",onClick:function(){x(!0),(0,ie.m9)(r).then(function(D){D&&(w(D),(0,ie.gC)(D).then(function(g){g&&O(g),x(!1)})),x(!1)})},children:[(0,a.jsx)(Qe,{}),"\u5237\u65B0\u8BB0\u5F55"]}),(0,a.jsx)(K.Z,{type:"vertical"}),(0,a.jsxs)("span",{children:["\u662F\u5426\u5B8C\u6210\uFF1A",c!=null&&c.isOver?(0,a.jsx)(tt,{twoToneColor:"#52c41a"}):(0,a.jsx)(at,{twoToneColor:"red"})]}),(0,a.jsx)(K.Z,{type:"vertical"}),(0,a.jsxs)("span",{children:["\u5F85\u6267\u884C\uFF1A",c==null?void 0:c.nextName]}),(0,a.jsx)(K.Z,{type:"vertical"}),(0,a.jsxs)(Y.Z,{children:["\u4E1A\u52A1\u6807\u8BC6\uFF1A",c==null?void 0:c.bizId,(0,a.jsx)(ee.Z.Text,{copyable:{tooltips:["\u70B9\u51FB\u590D\u5236","\u590D\u5236\u6210\u529F!"],text:c==null?void 0:c.bizId}})]}),(0,a.jsx)(K.Z,{type:"vertical"}),(0,a.jsx)("span",{style:{color:"red"},children:"\u6267\u884C\u7248\u672C\uFF1A"}),(0,a.jsxs)("span",{children:[c==null?void 0:c.version,(0,a.jsx)(ee.Z.Text,{copyable:{tooltips:["\u70B9\u51FB\u590D\u5236","\u590D\u5236\u6210\u529F!"],text:c==null?void 0:c.version}})]})],nextId:c==null?void 0:c.nextId,config:Z,logicIns:c,debugLogs:A})})})},dt=st},3619:function(re,H,n){n.d(H,{V:function(){return u}});var U=n(17600),u=function(f){var o=new U.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),v=f.getNodes(),L=f.getEdges(),y=o.layout({nodes:v,edges:L}),s=y.nodes,E=s===void 0?[]:s;v.forEach(function($){var N=E.find(function(G){return G.id===$.id});N.x-=$.size().width/2,N.y-=$.size().height/2,$.position(N.x,N.y)})},C=function(f,o){debugger;var v=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),L=v.layout({nodes:f,edges:o}),y=L.nodes,s=y===void 0?[]:y;f.forEach(function(E){var $=s.find(function(N){return N.id===E.id});$.x-=E.size().width/2,$.y-=E.size().height/2,E.position($.x,$.y)})}},89147:function(re,H,n){n.d(H,{m:function(){return G}});var U=n(5671),u=n(95812),C=n(53914),F={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},f=n(33130),o=function(p){return(0,f.jsx)("div",{className:F.customNode,children:(0,f.jsx)(C.Z,{className:"input",value:p==null?void 0:p.data,width:80})})},v=n(371),L=function(p){return(0,f.jsx)("div",{className:styles.customNode,children:(0,f.jsx)(v.Z,{className:"input",value:p==null?void 0:p.data,width:80})})},y=n(57213),s=n.n(y),E=function(p){var z,X,q,M=p.node,Y=(z=M.data.config)===null||z===void 0?void 0:z.name,ee=Y||"case";return(0,f.jsxs)("div",{className:F.customNode,children:[(0,f.jsx)("span",{children:"case"}),(0,f.jsx)(C.Z,{addonAfter:Y,className:"input",value:M==null||(X=M.data)===null||X===void 0||(q=X.config)===null||q===void 0?void 0:q.case,width:150,onChange:function(K){var le=M.data;M.setData(s()(s()({},le),{},{config:s()(s()({},le.config),{},{case:K.target.value})}))}})]})},$=function(p){var z,X=p.node;return(0,f.jsx)("div",{className:F.customNode,children:(0,f.jsx)(C.Z,{addonBefore:"switch",className:"input",value:(z=X.data)===null||z===void 0?void 0:z.config.condition,onChange:function(M){var Y=X.data;X.setData(s()(s()({},Y),{},{config:s()(s()({},Y.config),{},{condition:M.target.value})}))},width:100})})},N=function(p){return(0,f.jsx)("div",{className:F.customNode,children:(0,f.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function G(I){I.forEach(function(p){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+p.name),U.kJ.registerNode(p.name,p.config,!0)}),(0,u.z2)({shape:"string",component:o}),(0,u.z2)({shape:"num",component:L}),(0,u.z2)({shape:"switch",component:$}),(0,u.z2)({shape:"switch-case",component:E}),(0,u.z2)({shape:"switch-default",component:N})}},58146:function(re,H,n){n.d(H,{K:function(){return L}});var U=n(57213),u=n.n(U),C=n(12490),F=50,f=50,o=[{name:"ExtSharp",config:{width:100,height:f,attrs:{body:{rx:6,ry:6,stroke:"#5F95FF",strokeWidth:1,fill:"rgba(95,149,255,0.05)",refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}],v=n(42651);function L(y,s,E){var $=50,N=50,G={body:{}},I=[new v.Z({shape:"circle",width:$,height:N,attrs:{body:u()(u()({},G.body),{},{fill:"white"}),text:{text:"\u4EA4\u4E92\u70B9"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:C.Tt,data:{config:{type:"wait-for-continue"}},_groups:["global"]}),new v.Z({shape:"circle",label:"end",width:$,height:N,attrs:{body:u()(u()({},G.body),{},{fill:"#d9d9d9"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:C.Tt,data:{config:{type:"end"}},_groups:["global"]}),new v.Z({shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{"xlink:href":"/icons/http.svg",width:20,x:2,y:2}},data:{config:{type:"http",method:"POST"}},ports:C.Tt,_groups:["biz"]}),new v.Z({shape:"ExtSharp",ports:C.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/code.svg"},text:{text:"js\u811A\u672C",fontSize:14}},data:{config:{type:"js"}},_groups:["biz"]}),new v.Z({shape:"ExtSharp",ports:C.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/code.svg"},text:{text:"java\u65B9\u6CD5",fontSize:14}},data:{config:{type:"java"}},_groups:["biz"]}),new v.Z({shape:"ExtSharp",ports:C.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/CarbonSubflowLocal.svg"},text:{text:"\u590D\u7528\u903B\u8F91",fontSize:14}},data:{config:{type:"sub-logic"}},_groups:["biz"]}),new v.Z({shape:"ExtSharp",width:50,height:N,label:"switch",attrs:{image:{"xlink:href":"/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:C.Tt,_groups:["ctrl"]}),new v.Z({shape:"ExtSharp",width:$,height:N,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"case",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:C.Tt,_groups:["ctrl"]}),new v.Z({shape:"ExtSharp",width:50,height:N,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"default",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:C.Tt,_groups:["ctrl"]}),new v.Z({shape:"ExtSharp",width:$,height:N,attrs:{image:{"xlink:href":"/icons/delay.svg",width:30,x:8,y:10},text:{text:"\u7B49\u5F85",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"wait",timeout:"2000"}},ports:C.Tt,_groups:["ctrl"]})];y&&y.length>0&&Array.prototype.push.apply(I,y);var p=[{name:"global",title:"\u5168\u5C40\u8282\u70B9",graphHeight:110},{name:"ctrl",title:"\u903B\u8F91\u63A7\u5236",graphHeight:220},{name:"biz",title:"\u4E1A\u52A1\u8C03\u7528",graphHeight:220}];s&&s.length>0&&Array.prototype.push.apply(p,s);var z=o;return E&&E.length>0&&Array.prototype.push.apply(z,E),{Shapes:z,Nodes:I,Groups:p}}}}]);
