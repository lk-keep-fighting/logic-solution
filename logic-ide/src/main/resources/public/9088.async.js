"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9088],{2325:function(O,N,t){t.d(N,{C:function(){return w}});var w=new Map,r=50,d=50;w.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:d,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},42651:function(O,N,t){t.d(N,{Z:function(){return y}});var w=t(21140),r=t.n(w),d=t(63466),f=t.n(d),e=t(52510),v=t.n(e),y=function(){function c(u){r()(this,c),v()(this,"_nodeConfig",void 0),v()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(u)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return f()(c,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(o){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=o)}},{key:"setGroups",value:function(o){this._groups=o}},{key:"setConfigSchemel",value:function(o){this._nodeConfig.data?(this._nodeConfig.data.configSchema=o,this._nodeConfig.data.config={type:o}):this._nodeConfig.data={configSchema:o,config:{type:o}}}},{key:"setConfigData",value:function(o){this._nodeConfig.data?this._nodeConfig.data.config=o:this._nodeConfig.data={config:o}}}]),c}()},3619:function(O,N,t){t.d(N,{V:function(){return r}});var w=t(17600),r=function(e){var v,y=e.getSelectedCells(),c=[],u=[];if(y&&y.length>2){y.forEach(function(n){n.isNode()?c.push(n):u.push(n)}),v=new w.Vq({type:"dagre",begin:[c[0].getPosition().x,c[0].getPosition().y],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),e.getEdges().forEach(function(n){var _=n.getSourceCellId(),m=0,S=n.getTargetCellId(),b=0;c.find(function(x){return x.id===_})&&m++,c.find(function(x){return x.id===S})&&b++,m>0&&b>0&&u.push(n)});debugger;var o=v.layout({nodes:c,edges:u}),g=o.nodes,D=g===void 0?[]:g;c.forEach(function(n){var _=D.find(function(m){return m.id===n.id});_.x-=n.size().width/2,_.y-=n.size().height/2,n.position(_.x,_.y)})}else{v=new w.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),c=e.getNodes(),u=e.getEdges();var E=v.layout({nodes:c,edges:u}),P=E.nodes,C=P===void 0?[]:P;c.forEach(function(n){var _=C.find(function(m){return m.id===n.id});_.x-=n.size().width/2,_.y-=n.size().height/2,n.position(_.x,_.y)})}},d=function(e,v){debugger;var y=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),c=y.layout({nodes:e,edges:v}),u=c.nodes,o=u===void 0?[]:u;e.forEach(function(g){var D=o.find(function(E){return E.id===g.id});D.x-=g.size().width/2,D.y-=g.size().height/2,g.position(D.x,D.y)})}},89147:function(O,N,t){t.d(N,{m:function(){return P}});var w=t(5671),r=t(95812),d=t(53914),f={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},e=t(33130),v=function(n){return(0,e.jsx)("div",{className:f.customNode,children:(0,e.jsx)(d.Z,{className:"input",value:n==null?void 0:n.data,width:80})})},y=t(371),c=function(n){return(0,e.jsx)("div",{className:styles.customNode,children:(0,e.jsx)(y.Z,{className:"input",value:n==null?void 0:n.data,width:80})})},u=t(57213),o=t.n(u),g=function(n){var _,m,S,b=n.node,x=(_=b.data.config)===null||_===void 0?void 0:_.name,M=x||"case";return(0,e.jsxs)("div",{className:f.customNode,children:[(0,e.jsx)("span",{children:"case"}),(0,e.jsx)(d.Z,{addonAfter:x,className:"input",value:b==null||(m=b.data)===null||m===void 0||(S=m.config)===null||S===void 0?void 0:S.case,width:150,onChange:function(T){var I=b.data;b.setData(o()(o()({},I),{},{config:o()(o()({},I.config),{},{case:T.target.value})}))}})]})},D=function(n){var _,m=n.node;return(0,e.jsx)("div",{className:f.customNode,children:(0,e.jsx)(d.Z,{addonBefore:"switch",className:"input",value:(_=m.data)===null||_===void 0?void 0:_.config.condition,onChange:function(b){var x=m.data;m.setData(o()(o()({},x),{},{config:o()(o()({},x.config),{},{condition:b.target.value})}))},width:100})})},E=function(n){return(0,e.jsx)("div",{className:f.customNode,children:(0,e.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function P(C){C.forEach(function(n){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+n.name),w.kJ.registerNode(n.name,n.config,!0)}),(0,r.z2)({shape:"string",component:v}),(0,r.z2)({shape:"num",component:c}),(0,r.z2)({shape:"switch",component:D}),(0,r.z2)({shape:"switch-case",component:g}),(0,r.z2)({shape:"switch-default",component:E})}},9364:function(O,N,t){t.d(N,{K:function(){return v}});var w=t(57213),r=t.n(w),d=t(12490),f=t(2325),e=t(42651);function v(y,c,u){var o=50,g=50,D={body:{}},E=[new e.Z({shape:"circle",width:o,height:g,attrs:{body:r()(r()({},D.body),{},{fill:"white"}),text:{text:"\u5F00\u59CB",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:d.Tt,data:{config:{type:"start"}},_groups:["ctrl"]}),new e.Z({shape:"circle",width:o,height:g,attrs:{body:r()(r()({},D.body),{},{fill:"white"}),text:{text:"\u4EA4\u4E92\u70B9",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:d.Tt,data:{config:{type:"wait-for-continue"}},_groups:["ctrl"]}),new e.Z({shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42"},image:{"xlink:href":"/icons/http.svg",width:20,x:2,y:2}},data:{config:{type:"http",method:"POST"}},ports:d.Tt,_groups:["biz"]}),new e.Z({shape:"ExtSharp",ports:d.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/code.svg"},text:{text:"js\u811A\u672C"}},data:{config:{type:"js"}},_groups:["biz"]}),new e.Z({shape:"ExtSharp",ports:d.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/java.svg"},text:{text:"java\u65B9\u6CD5"}},data:{config:{type:"java"}},_groups:["biz"]}),new e.Z({shape:"ExtSharp",ports:d.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/CarbonSubflowLocal.svg"},text:{text:"\u590D\u7528\u903B\u8F91"}},data:{config:{type:"sub-logic"}},_groups:["biz"]}),new e.Z({shape:"ExtSharp",width:50,height:g,label:"switch",attrs:{image:{"xlink:href":"/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:d.Tt,_groups:["ctrl"]}),new e.Z({shape:"ExtSharp",width:o,height:g,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"case",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:d.Tt,_groups:["ctrl"]}),new e.Z({shape:"ExtSharp",width:50,height:g,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"default",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:d.Tt,_groups:["ctrl"]}),new e.Z({shape:"ExtSharp",width:o,height:g,attrs:{image:{"xlink:href":"/icons/delay.svg",width:30,x:8,y:10},text:{text:"\u7B49\u5F85",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"wait",timeout:"2000"}},ports:d.Tt,_groups:["ctrl"]})];y&&y.length>0&&Array.prototype.push.apply(E,y);var P=[f.C.get("ExtSharp")];return{Nodes:E,Shapes:P}}},48364:function(O,N,t){t.d(N,{Uh:function(){return T},az:function(){return P},gC:function(){return m},m9:function(){return n},qB:function(){return o},yi:function(){return b}});var w=t(25359),r=t.n(w),d=t(49811),f=t.n(d),e=t(57475),v=t(5726),y=t.n(v);function c(s){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function s(l){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",post("/api/ide/pub/logic/dev-to-test".concat(l)));case 1:case"end":return a.stop()}},s)})),u.apply(this,arguments)}function o(s){return g.apply(this,arguments)}function g(){return g=f()(r()().mark(function s(l){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,e.U2)("/api/ide/logic/".concat(l)).then(function(p){var i,h=(i=p.data)===null||i===void 0?void 0:i.data;return h.configJson=JSON.parse(h.configJson),h}));case 1:case"end":return a.stop()}},s)})),g.apply(this,arguments)}function D(s){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function s(l){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",get("/api/ide/logic/".concat(l,"/config")).then(function(p){var i;return(i=p.data)===null||i===void 0?void 0:i.data}));case 1:case"end":return a.stop()}},s)})),E.apply(this,arguments)}function P(s,l,L){return C.apply(this,arguments)}function C(){return C=f()(r()().mark(function s(l,L,a){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,e.gz)("/api/ide/logic/edit/".concat(l),{version:L,configJson:a,updateTime:y()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return i.stop()}},s)})),C.apply(this,arguments)}function n(s){return _.apply(this,arguments)}function _(){return _=f()(r()().mark(function s(l){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,e.U2)("/api/ide/logic-instance/".concat(l)).then(function(p){var i=p.data.data;return i}));case 1:case"end":return a.stop()}},s)})),_.apply(this,arguments)}function m(s){return S.apply(this,arguments)}function S(){return S=f()(r()().mark(function s(l){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,e.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[l.logicId],type:"="},{dataIndex:"bizId",values:[l.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(p){var i=p.data.data.records;return i&&i.map(function(h){h.itemLogs&&(h.itemLogs=JSON.parse(h.itemLogs))}),i}));case 1:case"end":return a.stop()}},s)})),S.apply(this,arguments)}function b(s){return x.apply(this,arguments)}function x(){return x=f()(r()().mark(function s(l){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,e.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[l],type:"="}],pageSize:1e3}).then(function(p){var i=p.data.data.records;return i&&i.length>0&&i[0].itemLogs&&(i[0].itemLogs=JSON.parse(i[0].itemLogs)),i[0]}));case 1:case"end":return a.stop()}},s)})),x.apply(this,arguments)}function M(s,l){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function s(l,L){return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[l],type:"="},{dataIndex:"version",values:[L],type:"="}]}).then(function(i){var h=i.data.data.records[0].configJson,B=JSON.parse(h);return B}));case 1:case"end":return p.stop()}},s)})),k.apply(this,arguments)}function T(s,l){return I.apply(this,arguments)}function I(){return I=f()(r()().mark(function s(l,L){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,e.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[l],type:"="},{dataIndex:"version",values:[L],type:"="}]}).then(function(i){var h=i.data.data.records[0],B=h.configJson;return h.configJson=JSON.parse(B),h.configJson.id=h.id,h.configJson.name=h.name,h}));case 1:case"end":return p.stop()}},s)})),I.apply(this,arguments)}}}]);
