"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9088],{2325:function(I,S,t){t.d(S,{C:function(){return m}});var m=new Map,i=50,d=50;m.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:d,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),m.set("ExtShape1",{name:"ExtShape1",config:{width:100,height:d,attrs:{body:{rx:6,ry:6,fill:"#FFFFFF",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),m.set("ExtShape2",{name:"ExtShape2",config:{width:100,height:d,attrs:{body:{rx:6,ry:6,fill:"#87CEEB",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,strokeWidth:3,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),m.set("ExtShape3",{name:"ExtShape3",config:{width:100,height:d,attrs:{body:{rx:6,ry:6,fill:"#FFF8DC",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},42651:function(I,S,t){t.d(S,{Z:function(){return y}});var m=t(21140),i=t.n(m),d=t(63466),h=t.n(d),e=t(52510),x=t.n(e),y=function(){function c(u){i()(this,c),x()(this,"_nodeConfig",void 0),x()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(u)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return h()(c,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(o){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=o)}},{key:"setGroups",value:function(o){this._groups=o}},{key:"setConfigSchemel",value:function(o){this._nodeConfig.data?(this._nodeConfig.data.configSchema=o,this._nodeConfig.data.config={type:o}):this._nodeConfig.data={configSchema:o,config:{type:o}}}},{key:"setConfigData",value:function(o){this._nodeConfig.data?this._nodeConfig.data.config=o:this._nodeConfig.data={config:o}}}]),c}()},3619:function(I,S,t){t.d(S,{V:function(){return i}});var m=t(17600),i=function(e){var x,y=e.getSelectedCells(),c=[],u=[];if(y&&y.length>2){y.forEach(function(n){n.isNode()?c.push(n):u.push(n)}),x=new m.Vq({type:"dagre",begin:[c[0].getPosition().x,c[0].getPosition().y],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),e.getEdges().forEach(function(n){var _=n.getSourceCellId(),v=0,L=n.getTargetCellId(),b=0;c.find(function(w){return w.id===_})&&v++,c.find(function(w){return w.id===L})&&b++,v>0&&b>0&&u.push(n)});debugger;var o=x.layout({nodes:c,edges:u}),g=o.nodes,E=g===void 0?[]:g;c.forEach(function(n){var _=E.find(function(v){return v.id===n.id});_.x-=n.size().width/2,_.y-=n.size().height/2,n.position(_.x,_.y)})}else{x=new m.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),c=e.getNodes(),u=e.getEdges();var D=x.layout({nodes:c,edges:u}),k=D.nodes,C=k===void 0?[]:k;c.forEach(function(n){var _=C.find(function(v){return v.id===n.id});_.x-=n.size().width/2,_.y-=n.size().height/2,n.position(_.x,_.y)})}},d=function(e,x){debugger;var y=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),c=y.layout({nodes:e,edges:x}),u=c.nodes,o=u===void 0?[]:u;e.forEach(function(g){var E=o.find(function(D){return D.id===g.id});E.x-=g.size().width/2,E.y-=g.size().height/2,g.position(E.x,E.y)})}},89147:function(I,S,t){t.d(S,{m:function(){return k}});var m=t(5671),i=t(95812),d=t(53914),h={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},e=t(33130),x=function(n){return(0,e.jsx)("div",{className:h.customNode,children:(0,e.jsx)(d.Z,{className:"input",value:n==null?void 0:n.data,width:80})})},y=t(371),c=function(n){return(0,e.jsx)("div",{className:styles.customNode,children:(0,e.jsx)(y.Z,{className:"input",value:n==null?void 0:n.data,width:80})})},u=t(57213),o=t.n(u),g=function(n){var _,v,L,b=n.node,w=(_=b.data.config)===null||_===void 0?void 0:_.name,M=w||"case";return(0,e.jsxs)("div",{className:h.customNode,children:[(0,e.jsx)("span",{children:"case"}),(0,e.jsx)(d.Z,{addonAfter:w,className:"input",value:b==null||(v=b.data)===null||v===void 0||(L=v.config)===null||L===void 0?void 0:L.case,width:150,onChange:function(B){var P=b.data;b.setData(o()(o()({},P),{},{config:o()(o()({},P.config),{},{case:B.target.value})}))}})]})},E=function(n){var _,v=n.node;return(0,e.jsx)("div",{className:h.customNode,children:(0,e.jsx)(d.Z,{addonBefore:"switch",className:"input",value:(_=v.data)===null||_===void 0?void 0:_.config.condition,onChange:function(b){var w=v.data;v.setData(o()(o()({},w),{},{config:o()(o()({},w.config),{},{condition:b.target.value})}))},width:100})})},D=function(n){return(0,e.jsx)("div",{className:h.customNode,children:(0,e.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function k(C){C.forEach(function(n){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+n.name),m.kJ.registerNode(n.name,n.config,!0)}),(0,i.z2)({shape:"string",component:x}),(0,i.z2)({shape:"num",component:c}),(0,i.z2)({shape:"switch",component:E}),(0,i.z2)({shape:"switch-case",component:g}),(0,i.z2)({shape:"switch-default",component:D})}},9364:function(I,S,t){t.d(S,{K:function(){return x}});var m=t(57213),i=t.n(m),d=t(12490),h=t(2325),e=t(42651);function x(y,c,u){var o=50,g=50,E={body:{}},D=[new e.Z({shape:"circle",width:o,height:g,attrs:{body:i()(i()({},E.body),{},{fill:"white"}),text:{text:"\u5F00\u59CB",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:d.Tt,data:{config:{type:"start"}},_groups:["ctrl"]}),new e.Z({shape:"circle",width:o,height:g,attrs:{body:i()(i()({},E.body),{},{fill:"white"}),text:{text:"\u4EA4\u4E92\u70B9",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:d.Tt,data:{config:{type:"wait-for-continue"}},_groups:["ctrl"]}),new e.Z({shape:"ExtSharp",body:{rx:6,ry:6,fill:"#0484fb",stroke:"#0484fb",strokeWidth:1,refWidth:1,refHeight:1},attrs:{text:{text:"http\u8BF7\u6C42"},image:{"xlink:href":"/icons/http.svg",width:20,x:2,y:2}},data:{config:{type:"http",method:"POST"}},ports:d.Tt,_groups:["biz"]}),new e.Z({shape:"ExtSharp",ports:d.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/code.svg"},text:{text:"js\u811A\u672C"}},data:{config:{type:"js"}},_groups:["biz"]}),new e.Z({shape:"ExtSharp",ports:d.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/java.svg"},text:{text:"java\u65B9\u6CD5"}},data:{config:{type:"java"}},_groups:["biz"]}),new e.Z({shape:"ExtSharp",ports:d.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/CarbonSubflowLocal.svg"},text:{text:"\u590D\u7528\u903B\u8F91"}},data:{config:{type:"sub-logic"}},_groups:["biz"]}),new e.Z({shape:"ExtSharp",width:50,height:g,label:"switch",attrs:{image:{"xlink:href":"/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:d.Tt,_groups:["ctrl"]}),new e.Z({shape:"ExtSharp",width:o,height:g,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"case",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:d.Tt,_groups:["ctrl"]}),new e.Z({shape:"ExtSharp",width:50,height:g,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"default",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:d.Tt,_groups:["ctrl"]}),new e.Z({shape:"ExtSharp",width:o,height:g,attrs:{image:{"xlink:href":"/icons/delay.svg",width:30,x:8,y:10},text:{text:"\u7B49\u5F85",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"wait",timeout:"2000"}},ports:d.Tt,_groups:["ctrl"]})];y&&y.length>0&&Array.prototype.push.apply(D,y);var k=[h.C.get("ExtSharp")];return{Nodes:D,Shapes:k}}},48364:function(I,S,t){t.d(S,{Uh:function(){return B},az:function(){return k},gC:function(){return v},m9:function(){return n},qB:function(){return o},yi:function(){return b}});var m=t(25359),i=t.n(m),d=t(49811),h=t.n(d),e=t(57475),x=t(5726),y=t.n(x);function c(s){return u.apply(this,arguments)}function u(){return u=_asyncToGenerator(_regeneratorRuntime().mark(function s(l){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",post("/api/ide/pub/logic/dev-to-test".concat(l)));case 1:case"end":return a.stop()}},s)})),u.apply(this,arguments)}function o(s){return g.apply(this,arguments)}function g(){return g=h()(i()().mark(function s(l){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,e.U2)("/api/ide/logic/".concat(l)).then(function(f){var r,p=(r=f.data)===null||r===void 0?void 0:r.data;return p.configJson=JSON.parse(p.configJson),p}));case 1:case"end":return a.stop()}},s)})),g.apply(this,arguments)}function E(s){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function s(l){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",get("/api/ide/logic/".concat(l,"/config")).then(function(f){var r;return(r=f.data)===null||r===void 0?void 0:r.data}));case 1:case"end":return a.stop()}},s)})),D.apply(this,arguments)}function k(s,l,N){return C.apply(this,arguments)}function C(){return C=h()(i()().mark(function s(l,N,a){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,e.gz)("/api/ide/logic/edit/".concat(l),{version:N,configJson:a,updateTime:y()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return r.stop()}},s)})),C.apply(this,arguments)}function n(s){return _.apply(this,arguments)}function _(){return _=h()(i()().mark(function s(l){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,e.U2)("/api/ide/logic-instance/".concat(l)).then(function(f){var r=f.data.data;return r}));case 1:case"end":return a.stop()}},s)})),_.apply(this,arguments)}function v(s){return L.apply(this,arguments)}function L(){return L=h()(i()().mark(function s(l){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,e.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[l.logicId],type:"="},{dataIndex:"bizId",values:[l.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(f){var r=f.data.data.records;return r&&r.map(function(p){p.itemLogs&&(p.itemLogs=JSON.parse(p.itemLogs))}),r}));case 1:case"end":return a.stop()}},s)})),L.apply(this,arguments)}function b(s){return w.apply(this,arguments)}function w(){return w=h()(i()().mark(function s(l){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,e.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[l],type:"="}],pageSize:1e3}).then(function(f){var r=f.data.data.records;return r&&r.length>0&&r[0].itemLogs&&(r[0].itemLogs=JSON.parse(r[0].itemLogs)),r[0]}));case 1:case"end":return a.stop()}},s)})),w.apply(this,arguments)}function M(s,l){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function s(l,N){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[l],type:"="},{dataIndex:"version",values:[N],type:"="}]}).then(function(r){var p=r.data.data.records[0].configJson,T=JSON.parse(p);return T}));case 1:case"end":return f.stop()}},s)})),O.apply(this,arguments)}function B(s,l){return P.apply(this,arguments)}function P(){return P=h()(i()().mark(function s(l,N){return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,e.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[l],type:"="},{dataIndex:"version",values:[N],type:"="}]}).then(function(r){var p=r.data.data.records[0],T=p.configJson;return p.configJson=JSON.parse(T),p.configJson.id=p.id,p.configJson.name=p.name,p}));case 1:case"end":return f.stop()}},s)})),P.apply(this,arguments)}}}]);
