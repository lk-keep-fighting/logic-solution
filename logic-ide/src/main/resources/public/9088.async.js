"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[9088],{2325:function(O,L,e){e.d(L,{C:function(){return p}});var p=new Map,_=50,x=50;p.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:x,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),p.set("ExtShape1",{name:"ExtShape1",config:{width:100,height:x,attrs:{body:{rx:6,ry:6,fill:"#FFFFFF",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),p.set("ExtShape2",{name:"ExtShape2",config:{width:100,height:x,attrs:{body:{rx:6,ry:6,fill:"#87CEEB",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,strokeWidth:3,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),p.set("ExtShape3",{name:"ExtShape3",config:{width:100,height:x,attrs:{body:{rx:6,ry:6,fill:"#FFF8DC",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},42651:function(O,L,e){e.d(L,{Z:function(){return u}});var p=e(21140),_=e.n(p),x=e(63466),g=e.n(x),t=e(52510),y=e.n(t),u=function(){function l(i){_()(this,l),y()(this,"_nodeConfig",void 0),y()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(i)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return g()(l,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(r){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=r)}},{key:"setGroups",value:function(r){this._groups=r}},{key:"setConfigSchemel",value:function(r){this._nodeConfig.data?(this._nodeConfig.data.configSchema=r,this._nodeConfig.data.config={type:r}):this._nodeConfig.data={configSchema:r,config:{type:r}}}},{key:"setConfigData",value:function(r){this._nodeConfig.data?this._nodeConfig.data.config=r:this._nodeConfig.data={config:r}}}]),l}()},3619:function(O,L,e){e.d(L,{V:function(){return _}});var p=e(17600),_=function(t){var y,u=t.getSelectedCells(),l=[],i=[];if(u&&u.length>2){u.forEach(function(n){n.isNode()?l.push(n):i.push(n)}),y=new p.Vq({type:"dagre",begin:[l[0].getPosition().x,l[0].getPosition().y],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),t.getEdges().forEach(function(n){var d=n.getSourceCellId(),v=0,S=n.getTargetCellId(),C=0;l.find(function(D){return D.id===d})&&v++,l.find(function(D){return D.id===S})&&C++,v>0&&C>0&&i.push(n)});debugger;var r=y.layout({nodes:l,edges:i}),w=r.nodes,E=w===void 0?[]:w;l.forEach(function(n){var d=E.find(function(v){return v.id===n.id});d.x-=n.size().width/2,d.y-=n.size().height/2,n.position(d.x,d.y)})}else{y=new p.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),l=t.getNodes(),i=t.getEdges();var m=y.layout({nodes:l,edges:i}),k=m.nodes,b=k===void 0?[]:k;l.forEach(function(n){var d=b.find(function(v){return v.id===n.id});d.x-=n.size().width/2,d.y-=n.size().height/2,n.position(d.x,d.y)})}},x=function(t,y){debugger;var u=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),l=u.layout({nodes:t,edges:y}),i=l.nodes,r=i===void 0?[]:i;t.forEach(function(w){var E=r.find(function(m){return m.id===w.id});E.x-=w.size().width/2,E.y-=w.size().height/2,w.position(E.x,E.y)})}},89147:function(O,L,e){e.d(L,{m:function(){return k}});var p=e(5671),_=e(95812),x=e(53914),g={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},t=e(33130),y=function(n){return(0,t.jsx)("div",{className:g.customNode,children:(0,t.jsx)(x.Z,{className:"input",value:n==null?void 0:n.data,width:80})})},u=e(371),l=function(n){return(0,t.jsx)("div",{className:styles.customNode,children:(0,t.jsx)(u.Z,{className:"input",value:n==null?void 0:n.data,width:80})})},i=e(57213),r=e.n(i),w=function(n){var d,v,S,C=n.node,D=(d=C.data.config)===null||d===void 0?void 0:d.name,T=D||"case";return(0,t.jsxs)("div",{className:g.customNode,children:[(0,t.jsx)("span",{children:"case"}),(0,t.jsx)(x.Z,{addonAfter:D,className:"input",value:C==null||(v=C.data)===null||v===void 0||(S=v.config)===null||S===void 0?void 0:S.case,width:150,onChange:function(B){var P=C.data;C.setData(r()(r()({},P),{},{config:r()(r()({},P.config),{},{case:B.target.value})}))}})]})},E=function(n){var d,v=n.node;return(0,t.jsx)("div",{className:g.customNode,children:(0,t.jsx)(x.Z,{addonBefore:"switch",className:"input",value:(d=v.data)===null||d===void 0?void 0:d.config.condition,onChange:function(C){var D=v.data;v.setData(r()(r()({},D),{},{config:r()(r()({},D.config),{},{condition:C.target.value})}))},width:100})})},m=function(n){return(0,t.jsx)("div",{className:g.customNode,children:(0,t.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function k(b){b.forEach(function(n){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+n.name),p.kJ.registerNode(n.name,n.config,!0)}),(0,_.z2)({shape:"string",component:y}),(0,_.z2)({shape:"num",component:l}),(0,_.z2)({shape:"switch",component:E}),(0,_.z2)({shape:"switch-case",component:w}),(0,_.z2)({shape:"switch-default",component:m})}},9364:function(O,L,e){e.d(L,{K:function(){return l}});var p=e(93525),_=e.n(p),x=e(57213),g=e.n(x),t=e(12490),y=e(2325),u=e(42651);function l(i,r,w){var E=50,m=50,k={body:{}},b=[new u.Z({shape:"circle",width:E,height:m,attrs:{body:g()(g()({},k.body),{},{fill:"white"}),text:{text:"\u5F00\u59CB",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:t.Tt,data:{config:{type:"start"}},_groups:["ctrl"]}),new u.Z({shape:"circle",width:E,height:m,attrs:{body:g()(g()({},k.body),{},{fill:"white"}),text:{text:"\u4EA4\u4E92\u70B9",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:t.Tt,data:{config:{type:"wait-for-continue"}},_groups:["ctrl"]}),new u.Z({shape:"ExtSharp",body:{rx:6,ry:6,fill:"#0484fb",stroke:"#0484fb",strokeWidth:1,refWidth:1,refHeight:1},attrs:{text:{text:"http\u8BF7\u6C42"},image:{"xlink:href":"/icons/http.svg",width:20,x:2,y:2}},data:{config:{type:"http",method:"POST"}},ports:t.Tt,_groups:["biz"]}),new u.Z({shape:"ExtSharp",ports:t.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/code.svg"},text:{text:"js\u811A\u672C"}},data:{config:{type:"js"}},_groups:["biz"]}),new u.Z({shape:"ExtSharp",ports:t.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/java.svg"},text:{text:"java\u65B9\u6CD5"}},data:{config:{type:"java"}},_groups:["biz"]}),new u.Z({shape:"ExtSharp",ports:t.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/CarbonSubflowLocal.svg"},text:{text:"\u590D\u7528\u903B\u8F91"}},data:{config:{type:"sub-logic"}},_groups:["biz"]}),new u.Z({shape:"ExtSharp",width:50,height:m,label:"switch",attrs:{image:{"xlink:href":"/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:t.Tt,_groups:["ctrl"]}),new u.Z({shape:"ExtSharp",width:E,height:m,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"case",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:t.Tt,_groups:["ctrl"]}),new u.Z({shape:"ExtSharp",width:50,height:m,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"default",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:t.Tt,_groups:["ctrl"]}),new u.Z({shape:"ExtSharp",width:E,height:m,attrs:{image:{"xlink:href":"/icons/delay.svg",width:30,x:8,y:10},text:{text:"\u7B49\u5F85",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"wait",timeout:"2000"}},ports:t.Tt,_groups:["ctrl"]})];i&&i.length>0&&Array.prototype.push.apply(b,i);var n=_()(y.C.values());return{Nodes:b,Shapes:n}}},48364:function(O,L,e){e.d(L,{Uh:function(){return B},az:function(){return k},gC:function(){return v},m9:function(){return n},qB:function(){return r},yi:function(){return C}});var p=e(25359),_=e.n(p),x=e(49811),g=e.n(x),t=e(57475),y=e(5726),u=e.n(y);function l(s){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function s(c){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",post("/api/ide/pub/logic/dev-to-test".concat(c)));case 1:case"end":return a.stop()}},s)})),i.apply(this,arguments)}function r(s){return w.apply(this,arguments)}function w(){return w=g()(_()().mark(function s(c){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,t.U2)("/api/ide/logic/".concat(c)).then(function(f){var o,h=(o=f.data)===null||o===void 0?void 0:o.data;return h.configJson=JSON.parse(h.configJson),h}));case 1:case"end":return a.stop()}},s)})),w.apply(this,arguments)}function E(s){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function s(c){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",get("/api/ide/logic/".concat(c,"/config")).then(function(f){var o;return(o=f.data)===null||o===void 0?void 0:o.data}));case 1:case"end":return a.stop()}},s)})),m.apply(this,arguments)}function k(s,c,N){return b.apply(this,arguments)}function b(){return b=g()(_()().mark(function s(c,N,a){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,t.gz)("/api/ide/logic/edit/".concat(c),{version:N,configJson:a,updateTime:u()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return o.stop()}},s)})),b.apply(this,arguments)}function n(s){return d.apply(this,arguments)}function d(){return d=g()(_()().mark(function s(c){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,t.U2)("/api/ide/logic-instance/".concat(c)).then(function(f){var o=f.data.data;return o}));case 1:case"end":return a.stop()}},s)})),d.apply(this,arguments)}function v(s){return S.apply(this,arguments)}function S(){return S=g()(_()().mark(function s(c){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,t.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[c.logicId],type:"="},{dataIndex:"bizId",values:[c.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(f){var o=f.data.data.records;return o&&o.map(function(h){h.itemLogs&&(h.itemLogs=JSON.parse(h.itemLogs))}),o}));case 1:case"end":return a.stop()}},s)})),S.apply(this,arguments)}function C(s){return D.apply(this,arguments)}function D(){return D=g()(_()().mark(function s(c){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,t.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[c],type:"="}],pageSize:1e3}).then(function(f){var o=f.data.data.records;return o&&o.length>0&&o[0].itemLogs&&(o[0].itemLogs=JSON.parse(o[0].itemLogs)),o[0]}));case 1:case"end":return a.stop()}},s)})),D.apply(this,arguments)}function T(s,c){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function s(c,N){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[c],type:"="},{dataIndex:"version",values:[N],type:"="}]}).then(function(o){var h=o.data.data.records[0].configJson,M=JSON.parse(h);return M}));case 1:case"end":return f.stop()}},s)})),I.apply(this,arguments)}function B(s,c){return P.apply(this,arguments)}function P(){return P=g()(_()().mark(function s(c,N){return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,t.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[c],type:"="},{dataIndex:"version",values:[N],type:"="}]}).then(function(o){var h=o.data.data.records[0],M=h.configJson;return h.configJson=JSON.parse(M),h.configJson.id=h.id,h.configJson.name=h.name,h}));case 1:case"end":return f.stop()}},s)})),P.apply(this,arguments)}}}]);
