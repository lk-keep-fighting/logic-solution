"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[7032],{67032:function(X,D,f){f.r(D),f.d(D,{BaseTabsTransferRenderer:function(){return L},TabsTransferRenderer:function(){return H}});var n=f(15767),r=f(42977),K=f(87363),A=f.n(K),F=f(33170),W=f.n(F),P=f(94391),j=f(67199),S=f(94623),N=f(45581),I=f(8427),L=function(b){(0,n.ZT)(i,b);function i(){var e=b!==null&&b.apply(this,arguments)||this;return e.state={activeKey:0},e}return i.prototype.onTabChange=function(e){return(0,n.mG)(this,void 0,void 0,function(){var p,t;return(0,n.Jh)(this,function(a){switch(a.label){case 0:return p=this.props.dispatchEvent,[4,p("tab-change",{key:e})];case 1:return t=a.sent(),t!=null&&t.prevented?[2]:(this.setState({activeKey:e}),[2])}})})},i.prototype.handleTabSearch=function(e,p,t){return(0,n.mG)(this,void 0,void 0,function(){var a,s,y,o,d,T,u,m,c,h,l;return(0,n.Jh)(this,function(E){switch(E.label){case 0:if(a=this.props,s=a.options,y=a.labelField,o=a.valueField,d=a.env,T=a.data,u=a.searchApi,m=a.translate,!u)return[3,5];E.label=1;case 1:return E.trys.push([1,3,,4]),[4,d.fetcher(u,(0,r.nW9)(T,{term:e}),{cancelExecutor:t})];case 2:if(c=E.sent(),!c.ok)throw new Error(m(c.msg||"networkError"));if(h=c.data.options||c.data.items||c.data,!Array.isArray(h))throw new Error(m("CRUD.invalidArray"));return[2,h.map(function(g){var _=null,v=g[o||"value"];return Array.isArray(s)&&v!==null&&v!==void 0&&(_=W()(s,(0,r.IWw)(v,o))),_||g})];case 3:return l=E.sent(),d.isCancel(l)||!u.silent&&d.notify("error",l.message),[2,[]];case 4:return[3,6];case 5:return e?[2,(0,r.get)(p.children||s,function(g,_,v,C){return!!(Array.isArray(g.children)&&g.children.length||(0,I.Lu)([g].concat(C),e,{keys:[y||"label",o||"value"],threshold:I.Lu.rankings.CONTAINS}).length)},0,!0)]:[2,s];case 6:return[2]}})})},i.prototype.handleChange=function(e,p){return(0,n.mG)(this,void 0,void 0,function(){var t,a,s,y,o,d,T,u,m,c,h,l,E,g;return(0,n.Jh)(this,function(_){switch(_.label){case 0:return t=this.props,a=t.onChange,s=t.joinValues,y=t.delimiter,o=t.valueField,d=t.extractValue,T=t.options,u=t.dispatchEvent,m=t.setOptions,c=t.translate,h=e,l=T.concat(),E="UN_MATCH_RESULT",Array.isArray(e)?(h=e.map(function(v){var C=(0,r.L$8)(T,(0,r.IWw)(v[o||"value"],o||"value"));if(C){if(p){var M=(0,r.IMU)(l,C);l=(0,r.o5f)(l,C,1,(0,n.pi)((0,n.pi)({},M),v))}}else{var R=(0,r.L$8)(l,function(w){return w.value===E});if(!R)l.push({label:c("searchResult"),value:E,visible:!1,children:[v]});else{var O=(0,r.IMU)(l,R);O!=null&&O.children&&(O.children.push(v),l=(0,r.o5f)(l,R,1,(0,n.pi)((0,n.pi)({},O),v)))}}return s||d?v[o||"value"]:v}),s&&(h=h.join(y||","))):e&&(h=s||d?e[o||"value"]:e),(l.length>T.length||p)&&m(l,!0),[4,u("change",(0,r.vXk)(this.props,{value:h,options:T,items:T}))];case 1:return g=_.sent(),g!=null&&g.prevented?[2]:(a(h),[2])}})})},(0,n.gn)([r.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Number]),(0,n.w6)("design:returntype",Promise)],i.prototype,"onTabChange",null),(0,n.gn)([r.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[String,Object,Function]),(0,n.w6)("design:returntype",Promise)],i.prototype,"handleTabSearch",null),(0,n.gn)([r.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object,Boolean]),(0,n.w6)("design:returntype",Promise)],i.prototype,"handleChange",null),i}(j.BaseTransferRenderer),H=function(b){(0,n.ZT)(i,b);function i(){return b!==null&&b.apply(this,arguments)||this}return i.prototype.optionItemRender=function(e,p){var t=this.props,a=t.menuTpl,s=t.render,y=t.data,o=t.classnames,d=arguments[2]||{};return a?s("item/".concat(p.index),a,{data:(0,r.nW9)((0,r.nW9)(y,(0,n.pi)((0,n.pi)({},p),d)),e)}):S.PA.itemRender(e,(0,n.pi)((0,n.pi)({},p),{classnames:o}))},i.prototype.doAction=function(e,p,t,a){var s,y,o;t===void 0&&(t=!1);var d=this.props,T=d.resetValue,u=d.onChange,m=d.formStore,c=d.store,h=d.name,l=a==null?void 0:a.activeKey;switch(e.actionType){case"clear":u==null||u("");break;case"reset":u==null||u((o=(y=(0,r.E04)((s=m==null?void 0:m.pristine)!==null&&s!==void 0?s:c==null?void 0:c.pristine,h))!==null&&y!==void 0?y:T)!==null&&o!==void 0?o:"");break;case"changeTabKey":this.setState({activeKey:l});break}},i.prototype.render=function(){var e=this.props,p=e.className,t=e.style,a=e.classnames,s=e.options,y=e.selectedOptions,o=e.sortable,d=e.loading,T=e.searchResultMode,u=e.selectMode,m=e.searchable,c=e.showArrow,h=e.deferLoad,l=e.leftDeferLoad,E=e.disabled,g=e.selectTitle,_=e.resultTitle,v=e.itemHeight,C=e.virtualThreshold,R=e.onlyChildren,O=e.loadingConfig,M=e.valueField,w=M===void 0?"value":M,U=e.labelField,x=U===void 0?"label":U,V=e.valueTpl,Z=e.menuTpl,G=e.data,J=e.mobileUI,B=e.initiallyOpen,$=B===void 0?!0:B,k=e.testIdBuilder;return A().createElement("div",{className:a("TabsTransferControl",p)},A().createElement(P.C5l,{onlyChildren:R,activeKey:this.state.activeKey,value:y,disabled:E,options:s,onChange:this.handleChange,option2value:this.option2value,sortable:o,searchResultMode:T,onSearch:this.handleTabSearch,showArrow:c,onDeferLoad:h,onLeftDeferLoad:l,selectTitle:g,resultTitle:_,selectMode:u,searchable:m,optionItemRender:Z?this.optionItemRender:void 0,resultItemRender:V?this.resultItemRender:void 0,onTabChange:this.onTabChange,itemHeight:(0,r.He2)(v)>0?(0,r.He2)(v):void 0,virtualThreshold:C,labelField:x,valueField:w,ctx:G,mobileUI:J,initiallyOpen:$,testIdBuilder:k}),A().createElement(P.$jN,{overlay:!0,key:"info",show:d,loadingConfig:O}))},i.defaultProps={multiple:!0},(0,n.gn)([r.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object,Object]),(0,n.w6)("design:returntype",void 0)],i.prototype,"optionItemRender",null),(0,n.gn)([(0,N.i)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],i.prototype,"render",null),i=(0,n.gn)([(0,r.oZB)({type:"tabs-transfer"})],i),i}(L)}}]);
