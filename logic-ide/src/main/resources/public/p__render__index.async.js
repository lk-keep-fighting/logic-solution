"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[6313],{44132:function(U,g,e){var p=e(54306),t=e.n(p),o=e(70517),E=e(90010),u=e.n(E),D=e(23620),d=e(2069),r=e(87363),s=e.n(r),a=e(70256),_=e(33358),m=e(49500),v=e(16123),h=e(78057),b=e(69078),c=e(98896),l=e(32126),P=e(31837),n=e(33130),O=function(I){var y=(0,r.useState)({type:"page"}),B=t()(y,2),x=B[0],S=B[1],F=(0,r.useState)(),W=t()(F,2),k=W[0],Z=W[1],J=(0,r.useState)(),K=t()(J,2),N=K[0],z=K[1],L="cxd",j="zh-CN";return(0,r.useEffect)(function(){(0,c.m)(o.Z)},[]),(0,r.useEffect)(function(){I.pageId&&((0,a.UD)(I.pageId).then(function(A){S(A)}),(0,l.U)().then(function(A){Z(JSON.parse(P.j.getEnv()))}))},[I.pageId]),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.qR,{theme:L,position:"top-right",locale:j},"toast"),(0,n.jsx)(d.wx,{theme:L,locale:j},"alert"),(0,D.sYA)(x,{data:{envs:k}},{fetcher:function(f){var R=f.url,C=f.method,M=f.data,w=f.responseType,i=f.config,G=f.headers;return i=i||{},i.withCredentials=!0,w&&(i.responseType=w),i.cancelExecutor&&(i.cancelToken=new o.Z.CancelToken(i.cancelExecutor)),i.headers=G||{},i.headers.Authorization||(i.headers.Authorization="Bearer "+b.F.getTokenFormLocal()),C!=="post"&&C!=="put"&&C!=="patch"?(M&&(i.params=M),o.Z[C](R,i)):(M&&M instanceof FormData?(i.headers=i.headers||{},i.headers["Content-Type"]="multipart/form-data"):M&&typeof M!="string"&&!(M instanceof Blob)&&!(M instanceof ArrayBuffer)&&(M=JSON.stringify(M),i.headers=i.headers||{},i.headers["Content-Type"]="application/json"),o.Z[C](R,M,i))},isCancel:function(f){return o.Z.isCancel(f)},copy:function(f){u()(f),d.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:L,jumpTo:function(f,R){debugger;R.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+f,"_blank"):window.location.hash=f}})]})};g.Z=O},98896:function(U,g,e){e.d(g,{m:function(){return u}});var p=e(25359),t=e.n(p),o=e(49811),E=e.n(o);function u(d){return D.apply(this,arguments)}function D(){return D=E()(t()().mark(function d(r){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r.interceptors.response.use(function(_){return console.log("axios response"),console.log(_),_&&_.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),_.data.error||(_.data.error={code:0}),_.data.code==500&&(_.data.error={code:500,message:_.data.msg}),_.data.data&&_.data.data.records&&(_.data.data.items=_.data.data.records),_):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(_.data),Promise.reject(new Error(_.data.message)))},function(_){if(console.log("\u6355\u6349axios error"),console.log(_),_.response&&_.response.data){var m,v=_.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((m=_.response.data.error)===null||m===void 0?void 0:m.code)==0&&(_.response.data.error.code=500),console.log(v),v}return Promise.reject(_)});case 1:case"end":return a.stop()}},d)})),D.apply(this,arguments)}},69078:function(U,g,e){e.d(g,{F:function(){return p}});var p={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(o){return localStorage.setItem("token",o)}}},54848:function(U,g,e){e.r(g);var p=e(33358),t=e(49500),o=e(16123),E=e(98306),u=e(44132),D=e(33130),d=function(s){var a=(0,E.UO)(),_=a.pageId;return(0,D.jsx)(u.Z,{pageId:_})};g.default=d},85002:function(U,g,e){e.d(g,{Z:function(){return a}});var p=e(25359),t=e.n(p),o=e(49811),E=e.n(o),u=e(21140),D=e.n(u),d=e(63466),r=e.n(d),s=e(57475),a=function(){function _(){D()(this,_)}return r()(_,null,[{key:"getAssetFromDb",value:function(){var m=E()(t()().mark(function h(b,c){var l;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.U2)("/api/ide/settings/asset/".concat(b,"/").concat(c));case 2:return l=n.sent.data,n.abrupt("return",JSON.parse(l.data.config));case 4:case"end":return n.stop()}},h)}));function v(h,b){return m.apply(this,arguments)}return v}()},{key:"saveAssetToDb",value:function(){var m=E()(t()().mark(function h(b,c,l){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.v_)("/api/ide/settings/asset/".concat(b,"/").concat(c),l));case 1:case"end":return n.stop()}},h)}));function v(h,b,c){return m.apply(this,arguments)}return v}()}]),_}()},32126:function(U,g,e){e.d(g,{U:function(){return d}});var p=e(25359),t=e.n(p),o=e(49811),E=e.n(o),u=e(31837),D=e(57475);function d(){return r.apply(this,arguments)}function r(){return r=E()(t()().mark(function s(){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,D.U2)("/api/runtime/env").then(function(m){return m.data.data}).then(function(m){return u.j.setModel(m.UI_CONFIG_MODEL),u.j.setEnv(JSON.stringify(m)),u.j.setApiUrlPrefix(m.API_GATEWAY_PREFIX),u.j.setReryApi(m.CUSTOM_RETRY_URL),m}));case 1:case"end":return _.stop()}},s)})),r.apply(this,arguments)}},70256:function(U,g,e){e.d(g,{CD:function(){return a},UD:function(){return r},n4:function(){return m},wx:function(){return h}});var p=e(25359),t=e.n(p),o=e(49811),E=e.n(o),u=e(31837),D=e(85002),d=e(57475);function r(c){return s.apply(this,arguments)}function s(){return s=E()(t()().mark(function c(l){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u.j.getModel()!="db"){n.next=4;break}return n.abrupt("return",D.Z.getAssetFromDb("page",l));case 4:return n.next=6,(0,d.U2)("/logic/setting/pages/".concat(l,".json"));case 6:return n.abrupt("return",n.sent.data);case 7:case"end":return n.stop()}},c)})),s.apply(this,arguments)}function a(c){return _.apply(this,arguments)}function _(){return _=E()(t()().mark(function c(l){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u.j.getModel()!="db"){n.next=4;break}return n.abrupt("return",D.Z.getAssetFromDb("form",l));case 4:return n.next=6,(0,d.U2)("/logic/setting/forms/".concat(l,".json"));case 6:return n.abrupt("return",n.sent.data);case 7:case"end":return n.stop()}},c)})),_.apply(this,arguments)}function m(c,l){return v.apply(this,arguments)}function v(){return v=E()(t()().mark(function c(l,P){return t()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(u.j.getModel()!="db"){O.next=4;break}return O.abrupt("return",D.Z.getAssetFromDb(l,P));case 4:return O.next=6,(0,d.U2)("/logic/setting/".concat(l,"s/").concat(P,".json"));case 6:return O.abrupt("return",O.sent.data);case 7:case"end":return O.stop()}},c)})),v.apply(this,arguments)}function h(c,l,P){return b.apply(this,arguments)}function b(){return b=E()(t()().mark(function c(l,P,n){return t()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(u.j.getModel()!="db"){T.next=2;break}return T.abrupt("return",D.Z.saveAssetToDb(l,P,n));case 2:case"end":return T.stop()}},c)})),b.apply(this,arguments)}},57475:function(U,g,e){e.d(g,{U2:function(){return E},gz:function(){return u},v_:function(){return d}});var p=e(57213),t=e.n(p),o=e(70517);function E(s,a){return o.Z.get(s,r(a))}function u(s,a,_){return o.Z.put(s,a,r(_))}function D(s,a){return axios.delete(s,r(a))}function d(s,a,_){return o.Z.post(s,a,r(_))}function r(s){var a={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(a.Authorization="Bearer "+localStorage.getItem("token")),t()(t()({},s),{},{headers:t()(t()({},a),s==null?void 0:s.headers)})}},78057:function(){}}]);
