"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[6313],{44132:function(C,D,e){var f=e(54306),t=e.n(f),u=e(70517),E=e(90010),v=e.n(E),O=e(23620),d=e(2069),p=e(87363),P=e.n(p),T=e(70256),g=e(33358),h=e(49500),M=e(16123),c=e(69078),l=e(33130);u.Z.interceptors.response.use(function(_){return console.log("axios response"),console.log(_),_&&_.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),_.data.error||(_.data.error={code:0}),_.data.code==500&&(_.data.error={code:500,message:_.data.msg}),_.data.data&&_.data.data.records&&(_.data.data.items=_.data.data.records),_):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(_.data),Promise.reject(new Error(_.data.message)))},function(_){if(console.log("\u6355\u6349axios error"),console.log(_),_.response&&_.response.data){var a,n=_.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((a=_.response.data.error)===null||a===void 0?void 0:a.code)==0&&(_.response.data.error.code=500),console.log(n),n}return Promise.reject(_)});var s=function(a){var n=(0,p.useState)({type:"page"}),o=t()(n,2),b=o[0],K=o[1],I="cxd",B="zh-CN";return(0,p.useEffect)(function(){a.pageId&&(0,T.UD)(a.pageId).then(function(U){K(U)})},[a.pageId]),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.qR,{theme:I,position:"top-right",locale:B},"toast"),(0,l.jsx)(d.wx,{theme:I,locale:B},"alert"),(0,O.sYA)(b,{data:a.data},{fetcher:function(i){var R=i.url,A=i.method,m=i.data,L=i.responseType,r=i.config,W=i.headers;return r=r||{},r.withCredentials=!0,L&&(r.responseType=L),r.cancelExecutor&&(r.cancelToken=new u.Z.CancelToken(r.cancelExecutor)),r.headers=W||{},r.headers.Authorization||(r.headers.Authorization="Bearer "+c.F.getTokenFormLocal()),A!=="post"&&A!=="put"&&A!=="patch"?(m&&(r.params=m),u.Z[A](R,r)):(m&&m instanceof FormData?(r.headers=r.headers||{},r.headers["Content-Type"]="multipart/form-data"):m&&typeof m!="string"&&!(m instanceof Blob)&&!(m instanceof ArrayBuffer)&&(m=JSON.stringify(m),r.headers=r.headers||{},r.headers["Content-Type"]="application/json"),u.Z[A](R,m,r))},isCancel:function(i){return u.Z.isCancel(i)},copy:function(i){v()(i),d.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:I,jumpTo:function(i,R){debugger;R.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+i,"_blank"):window.location.hash=i}})]})};D.Z=s},69078:function(C,D,e){e.d(D,{F:function(){return f}});var f={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(u){return localStorage.setItem("token",u)}}},54848:function(C,D,e){e.r(D);var f=e(54306),t=e.n(f),u=e(87363),E=e.n(u),v=e(33358),O=e(49500),d=e(16123),p=e(70256),P=e(98306),T=e(44132),g=e(33130),h=function(c){var l=(0,u.useState)({type:"page"}),s=t()(l,2),_=s[0],a=s[1],n=(0,P.UO)(),o=n.pageId;return(0,u.useEffect)(function(){o&&(0,p.UD)(o).then(function(b){a(b)})},[o]),(0,g.jsx)(T.Z,{pageId:o,data:c})};D.default=h},85002:function(C,D,e){e.d(D,{Z:function(){return T}});var f=e(25359),t=e.n(f),u=e(49811),E=e.n(u),v=e(21140),O=e.n(v),d=e(63466),p=e.n(d),P=e(70517),T=function(){function g(){O()(this,g)}return p()(g,null,[{key:"getAssetFromDb",value:function(){var h=E()(t()().mark(function c(l,s){var _;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.Z.get("/api/ide/settings/asset/".concat(l,"/").concat(s));case 2:return _=n.sent.data,n.abrupt("return",JSON.parse(_.data.config));case 4:case"end":return n.stop()}},c)}));function M(c,l){return h.apply(this,arguments)}return M}()},{key:"saveAssetToDb",value:function(){var h=E()(t()().mark(function c(l,s,_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",P.Z.post("/api/ide/settings/asset/".concat(l,"/").concat(s),_));case 1:case"end":return n.stop()}},c)}));function M(c,l,s){return h.apply(this,arguments)}return M}()}]),g}()},70256:function(C,D,e){e.d(D,{CD:function(){return T},UD:function(){return p},n4:function(){return h},wx:function(){return c}});var f=e(25359),t=e.n(f),u=e(49811),E=e.n(u),v=e(31837),O=e(70517),d=e(85002);function p(s){return P.apply(this,arguments)}function P(){return P=E()(t()().mark(function s(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:debugger;if(v.j.getModel()!="db"){n.next=5;break}return n.abrupt("return",d.Z.getAssetFromDb("page",_));case 5:return n.next=7,O.Z.get("/setting/pages/".concat(_,".json"));case 7:return n.abrupt("return",n.sent.data);case 8:case"end":return n.stop()}},s)})),P.apply(this,arguments)}function T(s){return g.apply(this,arguments)}function g(){return g=E()(t()().mark(function s(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(v.j.getModel()!="db"){n.next=4;break}return n.abrupt("return",d.Z.getAssetFromDb("form",_));case 4:return n.next=6,O.Z.get("/setting/forms/".concat(_,".json"));case 6:return n.abrupt("return",n.sent.data);case 7:case"end":return n.stop()}},s)})),g.apply(this,arguments)}function h(s,_){return M.apply(this,arguments)}function M(){return M=E()(t()().mark(function s(_,a){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(v.j.getModel()!="db"){o.next=4;break}return o.abrupt("return",d.Z.getAssetFromDb(_,a));case 4:return o.next=6,O.Z.get("/setting/".concat(_,"s/").concat(a,".json"));case 6:return o.abrupt("return",o.sent.data);case 7:case"end":return o.stop()}},s)})),M.apply(this,arguments)}function c(s,_,a){return l.apply(this,arguments)}function l(){return l=E()(t()().mark(function s(_,a,n){return t()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(v.j.getModel()!="db"){b.next=2;break}return b.abrupt("return",d.Z.saveAssetToDb(_,a,n));case 2:case"end":return b.stop()}},s)})),l.apply(this,arguments)}}}]);
