"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[6313],{44132:function(T,E,_){var p=_(57213),t=_.n(p),D=_(54306),o=_.n(D),r=_(70517),d=_(90010),g=_.n(d),m=_(23620),a=_(2069),s=_(87363),e=_.n(s),u=_(70256),v=_(33358),U=_(49500),M=_(16123),c=_(78057),l=_(69078),b=_(98896),n=_(32126),P=_(31837),h=_(33130),y=function(R){var x=(0,s.useState)({type:"page"}),B=o()(x,2),S=B[0],F=B[1],k=(0,s.useState)(),W=o()(k,2),Z=W[0],J=W[1],G=(0,s.useState)(),K=o()(G,2),Y=K[0],$=K[1],L="cxd",j="zh-CN";return(0,s.useEffect)(function(){(0,b.m)(r.Z)},[]),(0,s.useEffect)(function(){R.pageId&&((0,u.UD)(R.pageId).then(function(A){F(A)}),(0,n.U)().then(function(A){J(JSON.parse(P.j.getEnv()))}))},[R.pageId]),(0,h.jsxs)("div",{children:[(0,h.jsx)(a.qR,{theme:L,position:"top-right",locale:j},"toast"),(0,h.jsx)(a.wx,{theme:L,locale:j},"alert"),(0,m.sYA)(S,{data:t()({envs:Z},R.data)},{fetcher:function(f){var I=f.url,C=f.method,O=f.data,w=f.responseType,i=f.config,N=f.headers;return i=i||{},i.withCredentials=!0,w&&(i.responseType=w),i.cancelExecutor&&(i.cancelToken=new r.Z.CancelToken(i.cancelExecutor)),i.headers=N||{},i.headers.Authorization||(i.headers.Authorization="Bearer "+l.F.getTokenFormLocal()),C!=="post"&&C!=="put"&&C!=="patch"?(O&&(i.params=O),r.Z[C](I,i)):(O&&O instanceof FormData?(i.headers=i.headers||{},i.headers["Content-Type"]="multipart/form-data"):O&&typeof O!="string"&&!(O instanceof Blob)&&!(O instanceof ArrayBuffer)&&(O=JSON.stringify(O),i.headers=i.headers||{},i.headers["Content-Type"]="application/json"),r.Z[C](I,O,i))},isCancel:function(f){return r.Z.isCancel(f)},copy:function(f){g()(f),a.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:L,jumpTo:function(f,I){debugger;I.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+f,"_blank"):window.location.hash=f}})]})};E.Z=y},98896:function(T,E,_){_.d(E,{m:function(){return r}});var p=_(25359),t=_.n(p),D=_(49811),o=_.n(D);function r(g){return d.apply(this,arguments)}function d(){return d=o()(t()().mark(function g(m){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:m.interceptors.response.use(function(e){return console.log("axios response"),console.log(e),e&&e.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),e.data.error||(e.data.error={code:0}),e.data.code==500&&(e.data.error={code:500,message:e.data.msg}),e.data.data&&e.data.data.records&&(e.data.data.items=e.data.data.records),e):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(e.data),Promise.reject(new Error(e.data.message)))},function(e){if(console.log("\u6355\u6349axios error"),console.log(e),e.response&&e.response.data){var u,v=e.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((u=e.response.data.error)===null||u===void 0?void 0:u.code)==0&&(e.response.data.error.code=500),console.log(v),v}return Promise.reject(e)});case 1:case"end":return s.stop()}},g)})),d.apply(this,arguments)}},69078:function(T,E,_){_.d(E,{F:function(){return p}});var p={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(D){return localStorage.setItem("token",D)}}},54848:function(T,E,_){_.r(E);var p=_(33358),t=_(49500),D=_(16123),o=_(98306),r=_(44132),d=_(33130),g=function(a){var s=(0,o.UO)(),e=s.pageId;return(0,d.jsx)(r.Z,{pageId:e})};E.default=g},85002:function(T,E,_){_.d(E,{Z:function(){return s}});var p=_(25359),t=_.n(p),D=_(49811),o=_.n(D),r=_(21140),d=_.n(r),g=_(63466),m=_.n(g),a=_(57475),s=function(){function e(){d()(this,e)}return m()(e,null,[{key:"getAssetFromDb",value:function(){var u=o()(t()().mark(function U(M,c){var l;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.U2)("/api/ide/settings/asset/".concat(M,"/").concat(c));case 2:return l=n.sent.data,n.abrupt("return",JSON.parse(l.data.config));case 4:case"end":return n.stop()}},U)}));function v(U,M){return u.apply(this,arguments)}return v}()},{key:"saveAssetToDb",value:function(){var u=o()(t()().mark(function U(M,c,l){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,a.v_)("/api/ide/settings/asset/".concat(M,"/").concat(c),l));case 1:case"end":return n.stop()}},U)}));function v(U,M,c){return u.apply(this,arguments)}return v}()}]),e}()},32126:function(T,E,_){_.d(E,{U:function(){return g}});var p=_(25359),t=_.n(p),D=_(49811),o=_.n(D),r=_(31837),d=_(57475);function g(){return m.apply(this,arguments)}function m(){return m=o()(t()().mark(function a(){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.U2)("/api/runtime/env").then(function(u){return u.data.data}).then(function(u){return r.j.setModel(u.UI_CONFIG_MODEL),r.j.setEnv(JSON.stringify(u)),r.j.setApiUrlPrefix(u.API_GATEWAY_PREFIX),r.j.setReryApi(u.CUSTOM_RETRY_URL),u}));case 1:case"end":return e.stop()}},a)})),m.apply(this,arguments)}},70256:function(T,E,_){_.d(E,{CD:function(){return s},UD:function(){return m},n4:function(){return u},wx:function(){return U}});var p=_(25359),t=_.n(p),D=_(49811),o=_.n(D),r=_(31837),d=_(85002),g=_(57475);function m(c){return a.apply(this,arguments)}function a(){return a=o()(t()().mark(function c(l){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r.j.getModel()!="db"){n.next=4;break}return n.abrupt("return",d.Z.getAssetFromDb("page",l));case 4:return n.next=6,(0,g.U2)("/logic/setting/pages/".concat(l,".json"));case 6:return n.abrupt("return",n.sent.data);case 7:case"end":return n.stop()}},c)})),a.apply(this,arguments)}function s(c){return e.apply(this,arguments)}function e(){return e=o()(t()().mark(function c(l){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r.j.getModel()!="db"){n.next=4;break}return n.abrupt("return",d.Z.getAssetFromDb("form",l));case 4:return n.next=6,(0,g.U2)("/logic/setting/forms/".concat(l,".json"));case 6:return n.abrupt("return",n.sent.data);case 7:case"end":return n.stop()}},c)})),e.apply(this,arguments)}function u(c,l){return v.apply(this,arguments)}function v(){return v=o()(t()().mark(function c(l,b){return t()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(r.j.getModel()!="db"){P.next=4;break}return P.abrupt("return",d.Z.getAssetFromDb(l,b));case 4:return P.next=6,(0,g.U2)("/logic/setting/".concat(l,"s/").concat(b,".json"));case 6:return P.abrupt("return",P.sent.data);case 7:case"end":return P.stop()}},c)})),v.apply(this,arguments)}function U(c,l,b){return M.apply(this,arguments)}function M(){return M=o()(t()().mark(function c(l,b,n){return t()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(r.j.getModel()!="db"){h.next=2;break}return h.abrupt("return",d.Z.saveAssetToDb(l,b,n));case 2:case"end":return h.stop()}},c)})),M.apply(this,arguments)}},57475:function(T,E,_){_.d(E,{U2:function(){return o},gz:function(){return r},v_:function(){return g}});var p=_(57213),t=_.n(p),D=_(70517);function o(a,s){return D.Z.get(a,m(s))}function r(a,s,e){return D.Z.put(a,s,m(e))}function d(a,s){return axios.delete(a,m(s))}function g(a,s,e){return D.Z.post(a,s,m(e))}function m(a){var s={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(s.Authorization="Bearer "+localStorage.getItem("token")),t()(t()({},a),{},{headers:t()(t()({},s),a==null?void 0:a.headers)})}},78057:function(){}}]);
