"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[7325],{55104:function(me,G,e){var z=e(54306),f=e.n(z),T=e(70517),N=e(90010),L=e.n(N),F=e(23620),M=e(52943),t=e(87363),_=e.n(t),p=e(84191),W=e(95926),S=e(33358),I=e(49500),h=e(16123),l=e(99273),a=e(93797),o=e(33130),u=function(i){var x=(0,t.useContext)(W.r),m=(0,t.useContext)(a.E),A=(0,t.useState)(i==null?void 0:i.config),Z=f()(A,2),O=Z[0],D=Z[1],E=(0,t.useState)(i==null?void 0:i.values),V=f()(E,2),C=V[0],k=V[1],R=x.logic,pe=m==null?void 0:m.jsTips,xe=(0,t.useState)(),be=f()(xe,2),le=be[0],Pe=be[1];function ye(K,J,Q){K==="formSubmited"?(console.log("\u5185\u90E8\u8868\u5355\u63D0\u4EA4\u4E86",Q),i.onSubmit(Q)):console.log("\u5185\u90E8\u8868\u5355\u89E6\u53D1\u4E86Broadcast",Q)}(0,t.useEffect)(function(){if(i.config&&i.config.body){var K,J=i.config.body[0];(K=J.body)===null||K===void 0||K.forEach(function(de){console.log("deal editor autotip"),Ce(de)});var Q=le==null?void 0:le.getComponentByName("page1.form1");Q==null||Q.props.store.clear(),D(i.config)}},[i.config]),(0,t.useEffect)(function(){var K=le==null?void 0:le.getComponentByName("page1.form1");K==null||K.props.store.clear(),K==null||K.props.store.setValues(i.values)},[O]),(0,t.useEffect)(function(){var K=le==null?void 0:le.getComponentByName("page1.form1");K==null||K.props.store.clear(),K==null||K.props.store.setValues(i.values),k(i.values)},[i.values]);var c=(0,t.useState)(),te=f()(c,2),ge=te[0],fe=te[1];function Ce(K){K.type=="editor"&&K.language=="javascript"?K.editorDidMount=function(J,Q){return fe(Q),pe&&Object.keys(pe).forEach(function(de){var ne=(0,p.k)(de,JSON.parse(pe[de]));Q==null||Q.languages.typescript.javascriptDefaults.addExtraLib(ne,"".concat(de,".ts"))}),function(){var de,ne;console.log("effect dispose"),J==null||J.dispose(),J==null||(de=J.current)===null||de===void 0||de.dispose(),Q==null||(ne=Q.current)===null||ne===void 0||ne.dispose()}}:K.body&&K.body.forEach(function(J){Ce(J)})}return(0,t.useEffect)(function(){pe&&Object.keys(pe).forEach(function(K){var J=(0,p.k)(K,JSON.parse(pe[K]));ge==null||ge.languages.typescript.javascriptDefaults.addExtraLib(J,"".concat(K,".ts"))})},[pe]),(0,o.jsxs)("div",{children:[(0,o.jsx)(M.qR,{theme:"cxd",position:"top-right",locale:"zh-CN"},"toast"),(0,o.jsx)(M.wx,{theme:"cxd",locale:"zh-CN"},"alert"),(0,F.sYA)(O,{onBroadcast:ye,data:C,scopeRef:function(J){return Pe(J)}},{fetcher:function(J){var Q=J.url,de=J.method,ne=J.data,g=J.responseType,ae=J.config,Oe=J.headers;return ae=ae||{},ae.withCredentials=!0,g&&(ae.responseType=g),ae.cancelExecutor&&(ae.cancelToken=new T.Z.CancelToken(ae.cancelExecutor)),ae.headers=Oe||{},ae.headers.Authorization||(ae.headers.Authorization="Bearer "+l.F.getTokenFormLocal()),de!=="post"&&de!=="put"&&de!=="patch"?(ne&&(ae.params=ne),T.Z[de](Q,ae)):(ne&&ne instanceof FormData?(ae.headers=ae.headers||{},ae.headers["Content-Type"]="multipart/form-data"):ne&&typeof ne!="string"&&!(ne instanceof Blob)&&!(ne instanceof ArrayBuffer)&&(ne=JSON.stringify(ne),ae.headers=ae.headers||{},ae.headers["Content-Type"]="application/json"),T.Z[de](Q,ne,ae))},isCancel:function(J){return T.Z.isCancel(J)},copy:function(J){L()(J),M.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:"cxd",jumpTo:function(J,Q){debugger;Q.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+J,"_blank"):window.location.hash=J}})]})};G.Z=_().memo(u)},62835:function(me,G,e){var z=e(57213),f=e.n(z),T=e(54306),N=e.n(T),L=e(87363),F=e.n(L),M=e(70256),t=e(55104),_=e(33130),p=function(S){var I=(0,L.useState)({type:"page"}),h=N()(I,2),l=h[0],a=h[1];return(0,L.useEffect)(function(){if(S.formId){var o=S.isStatic?S.formId+"-static":S.formId;(0,M.CD)(o).then(function(u){a(u)})}},[S.formId]),(0,_.jsx)("div",{children:(0,_.jsx)(t.Z,f()(f()({},S),{},{config:l}))})};G.Z=p},93797:function(me,G,e){e.d(G,{E:function(){return xe},Z:function(){return Pe}});var z=e(93525),f=e.n(z),T=e(54306),N=e.n(T),L=e(63466),F=e(21140),M=e(52510),t=e(87363),_=e.n(t),p=e(5671),W=e(9722),S=e(17696),I=e(19227),h=e(75476),l=e(1167),a=e(22046),o=e(22150),u=e(11250),B=e(89357),i=e(43702),x=e(58856),m=e(40767),A=e(75904),Z=e(34957),O=e(33130);function D(ye){return(0,O.jsxs)("div",{style:{margin:0,height:"95vh",overflowY:"scroll"},children:[(0,O.jsx)(Z.Z,{isStatic:ye.isStatic,editNode:ye.editNode,jsTipMap:ye.jsTipMap,onSubmit:ye.onSubmit}),ye!=null&&ye.isCollapsed?"":(0,O.jsx)(A.ZP,{type:"text",style:{position:"absolute",top:10,right:15,fontSize:20,textAlign:"center"},onClick:function(){ye==null||ye.onClose()},children:"x"})]})}var E=D,V=e(9976),C=e(12490),k=function(c,te){var ge,fe,Ce,K,J=te.getData(),Q=te.getPosition(),de=c.getNodes(),ne;if(["ExtSharp","polygon"].indexOf(te.shape)>-1&&J!=null&&J.config&&J.config.type)switch(J.config.type){case"switch":var g=200,ae=c.addNode({shape:"switch",position:Q,width:g,height:50,ports:C.Tt,data:te.data,attrs:{body:{stroke:"#8f8f8f",strokeWidth:1,fill:"#fff",rx:6,ry:6}}});c.removeNode(te);var Oe=c.addNode({shape:"switch-case",position:{y:Q.y+100,x:Q.x-g/2},width:120,height:50,ports:C.Tt,data:{config:{type:"switch-case"}}}),Be=c.addNode({shape:"switch-default",position:{y:Q.y+100,x:Q.x+g},width:120,height:50,ports:C.Tt,data:{config:{type:"switch-default"}}}),Ue=c.addEdge({source:ae,sourcePort:(ge=ae.ports.items.find(function(ce){return ce.group=="bottom"}))===null||ge===void 0?void 0:ge.id,target:Oe,targetPort:(fe=Oe.ports.items.find(function(ce){return ce.group=="top"}))===null||fe===void 0?void 0:fe.id,zIndex:0}),We=c.addEdge({source:ae,sourcePort:(Ce=ae.ports.items.find(function(ce){return ce.group=="bottom"}))===null||Ce===void 0?void 0:Ce.id,target:Be,targetPort:(K=Be.ports.items.find(function(ce){return ce.group=="top"}))===null||K===void 0?void 0:K.id,zIndex:0});ne=ae;break;case"switch-case":var Ie=c.createNode({shape:"switch-case",position:te.position(),width:120,height:50,ports:C.Tt,data:te.data});c.removeNode(te),c.addNode(Ie),ne=Ie;break;case"string":var Ne=c.createNode({shape:"string",position:te.position(),width:100,height:50,ports:C.Tt,data:te.data});c.removeNode(te),c.addNode(Ne),ne=Ne;break;case"num":var Se=c.createNode({shape:"num",position:te.position(),width:100,height:50,ports:C.Tt,data:te.data});c.removeNode(te),c.addNode(Se),ne=Se;break;case"assignment":var Fe=c.createNode({shape:"assignment",position:te.position(),width:220,height:50,ports:C.Tt,data:te.data});c.removeNode(te),c.addNode(Fe),ne=Fe;break;default:break}if(["\u5DE5\u5E8F\u7EC4"].indexOf(te.getAttrByPath("text/text"))>-1&&(te.zIndex=-1),console.log("node:added"),ne&&de.length==1){var Me,_e,we,Le,Ae;c.addEdge({source:de[0],sourcePort:(Me=de[0].ports.items.find(function(ce){return ce.group=="bottom"}))===null||Me===void 0?void 0:Me.id,target:ne,targetPort:(_e=ne)===null||_e===void 0||(we=_e.ports)===null||we===void 0||(Le=we.items)===null||Le===void 0||(Ae=Le.find(function(ce){return ce.group=="top"}))===null||Ae===void 0?void 0:Ae.id,zIndex:0})}},R=e(71731),pe=null,xe=_().createContext({}),be=function(c,te){for(var ge=0,fe=c.length;ge<fe;ge+=1)c[ge].style.visibility=te?"visible":"hidden"},le=function(c){var te,ge,fe=(0,t.useState)(),Ce=N()(fe,2),K=Ce[0],J=Ce[1],Q=(0,t.useState)(!c.showLeft),de=N()(Q,2),ne=de[0],g=de[1],ae=(0,t.useState)(!c.showRight),Oe=N()(ae,2),Be=Oe[0],Ue=Oe[1],We=(0,t.useState)(c.panelData),Ie=N()(We,2),Ne=Ie[0],Se=Ie[1],Fe=(0,t.useState)(),Me=N()(Fe,2),_e=Me[0],we=Me[1],Le=(0,t.useState)(),Ae=N()(Le,2),ce=Ae[0],ke=Ae[1],Ye=(0,t.useState)(),Ze=N()(Ye,2),Ke=Ze[0],$e=Ze[1],He=(0,t.useState)(c.graphIns),Xe=N()(He,2),je=Xe[0],Qe=Xe[1],qe=(0,t.useState)(),Je=N()(qe,2),ze=Je[0],et=Je[1];(0,t.useEffect)(function(){try{var ve;if((ve=c.panelData)!==null&&ve!==void 0&&ve.Shapes){var y;(y=c.panelData)===null||y===void 0||y.Shapes.forEach(function(w){console.log("\u56FE\u5185\u90E8\u6CE8\u518C\u65B0\u8282\u70B9:"+w.name),p.kJ.registerNode(w.name,w.config,!0)})}}catch(w){console.error("\u6CE8\u518C\u8282\u70B9\u51FA\u9519\uFF1A"),console.error(w)}},[(te=c.panelData)===null||te===void 0?void 0:te.Shapes]),(0,t.useEffect)(function(){je&&(je.options.connecting.createEdge=c.createEdge)},[c.createEdge]),(0,t.useEffect)(function(){ce&&Ge(ce)},[ce]),(0,t.useEffect)(function(){if(je&&c.graphJson)try{je.fromJSON(c.graphJson),je.centerContent()}catch(ve){i.ZP.error("\u56FE\u6570\u636E\u6709\u8BEF\uFF0C\u5DF2\u5FFD\u7565"),console.error(ve),console.log(c.graphJson)}},[c.graphJson]),(0,t.useEffect)(function(){g(!(c!=null&&c.showLeft))},[c.showLeft]);function Ge(ve){if(console.log("initGraph"),!!ve){var y=c.graphIns;if(y||(y=new p.kJ({container:ve,embedding:{enabled:!0,findParent:function(j){var n=j.node,X=n.getBBox();return this.getNodes().filter(function(U){var ie=U.getData();if(ie&&ie.parent){var H=U.getBBox();return X.isIntersectWithRect(H)}return!1})}},mousewheel:{enabled:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:15}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,snap:{radius:20},createEdge:c.createEdge,validateConnection:function(j){var n=j.targetMagnet;return!!n}},background:{color:"#F2F7FA"},grid:!0})),y.use(new l.H({enabled:!0,sharp:!0})).use(new S.A({enabled:!0})).use(new h.Y({enabled:!0,multiple:!0,strict:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0,pointerEvents:"none"})).use(new o.T({enabled:!0})).use(new I.N).use(new W.T).use(new u.D).use(new R.w({resizing:{enabled:!0,minWidth:50,maxWidth:0,minHeight:50,maxHeight:0,orthogonal:!1,restrict:!1,preserveAspectRatio:!1}})).use(new B.a({container:Ke})),y.on("edge:dblclick",function(r){var j=r.cell}),y.on("edge:change:router",function(r){console.log("edge:change:router")}),y.on("edge:mouseenter",function(r){var j=r.cell;c.edgeTools&&c.edgeTools.forEach(function(n){switch(n){case"edge-editor":break;case"button-remove":j.addTools([{name:"button-remove",args:{attrs:{fill:"#fff",stroke:"#fff",r:10,cursor:"pointer"}}}]);break;case"segments":j.addTools(["segments"]);break;case"vertices":j.addTools(["vertices"]);break;default:break}})}),y.on("edge:mouseleave",function(r){var j=r.cell;j.removeTools()}),y.on("node:mouseenter",function(r){var j,n,X=r.cell;((j=X.data)===null||j===void 0||(n=j.config)===null||n===void 0?void 0:n.type)!="start"&&X.addTools([{name:"button-remove",args:{x:"100%",y:0,offset:{x:-10,y:10}}}]);var U=ce==null?void 0:ce.querySelectorAll(".x6-port-body");be(U,!0)}),y.on("node:mouseleave",function(r){var j=r.cell;j.removeTools();var n=ce==null?void 0:ce.querySelectorAll(".x6-port-body");be(n,!1)}),y.on("node:click",function(r){var j=r.e,n=r.x,X=r.y,U=r.node,ie=r.view;U.removeTools(),J(U)}),y.on("node:added",function(r){var j=r.node,n=r.index,X=r.options;k(y,j)}),y.on("node:dblclick",function(r){var j=r.e,n=r.x,X=r.y,U=r.node,ie=r.view;Ue(!1),J(U)}),y.bindKey(["meta+c","ctrl+c"],function(){var r=y.getSelectedCells();return r.length&&y.copy(r),!1}),y.bindKey(["meta+x","ctrl+x"],function(){var r=y.getSelectedCells();return r.length&&y.cut(r),!1}),y.bindKey(["meta+v","ctrl+v"],function(){if(!y.isClipboardEmpty()){var r=y.paste({offset:32});y.cleanSelection(),y.select(r)}return!1}),y.bindKey(["meta+z","ctrl+z"],function(){return y.canUndo()&&y.undo(),!1}),y.bindKey(["meta+shift+z","ctrl+shift+z"],function(){return y.canRedo()&&y.redo(),!1}),y.bindKey("backspace",function(){var r=y.getSelectedCells();r.length&&(r.find(function(j){var n;return j.data?["start"].indexOf((n=j.data.config)===null||n===void 0?void 0:n.type)>-1:!1})?i.ZP.error("\u7981\u6B62\u5220\u9664\u5F00\u59CB\u8282\u70B9\uFF01"):y.removeCells(r))}),y.on("blank:dblclick",function(r){var j=r.e,n=r.x,X=r.y;console.log("blank:dbclick",n,X),c.autoLayout&&c.autoLayout(y)}),y.bindKey(["ctrl+1","meta+1"],function(){var r=y.zoom();r<1.5&&y.zoom(.1)}),y.bindKey(["ctrl+2","meta+2"],function(){var r=y.zoom();r>.5&&y.zoom(-.1)}),Qe(y),Ne){var w=Ne.Groups,v=new a.t({title:"\u5C55\u5F00/\u6536\u8D77",target:y,search:function(j,n){var X=j.getAttrByPath("text/text");return(X==null?void 0:X.indexOf(n))!==-1},notFoundText:"\u672A\u627E\u5230",collapsable:!0,stencilGraphWidth:250,groups:w,layoutOptions:{rowHeight:100}});_e==null||_e.appendChild(v.container),et(v)}return c.graphJson?(y.fromJSON(c.graphJson),y.centerContent()):c.onGraphJsonEmpty&&c.onGraphJsonEmpty(y),c.onGraphInsChange&&c.onGraphInsChange(y),y}}(0,t.useEffect)(function(){var ve;if(ze&&(ve=c.panelData)!==null&&ve!==void 0&&ve.Nodes){var y={};c.panelData.Nodes.forEach(function(w){var v=je.createNode(w.getNodeConfig());c.panelData.Groups.forEach(function(r){w.getGroups().includes(r.name)&&(y[r.name]?y[r.name].push(v):y[r.name]=[v])})}),Object.keys(y).forEach(function(w){ze.load(f()(y[w]),w)})}},[ze,(ge=c.panelData)===null||ge===void 0?void 0:ge.Nodes]);function tt(){c.onSave&&c.onSave(je)}var Ve=(0,t.useMemo)(function(){if(c.toolElements){var ve;return(0,O.jsx)(x.Z.Header,{style:{padding:0,backgroundColor:"white"},children:(0,O.jsx)(m.Z,{direction:"horizontal",children:(ve=c.toolElements)===null||ve===void 0?void 0:ve.map(function(y){return y})})})}else return(0,O.jsx)("span",{})},[c.toolElements]);return(0,O.jsx)(xe.Provider,{value:c.editorCtx,children:(0,O.jsxs)(x.Z,{style:{height:"100vh",width:"100%",margin:0},children:[(0,O.jsx)(x.Z.Sider,{theme:"light",collapsed:ne,collapsedWidth:0,width:250,ref:function(y){return we(y)}}),(0,O.jsxs)(x.Z,{style:{height:"100vh"},children:[Ve,(0,O.jsxs)(x.Z.Content,{className:"app-content",children:[(0,O.jsx)(V.Z,{ref:function(y){return ke(y)}}),(0,O.jsx)("div",{className:"app-minimap",ref:function(y){return $e(y)}})]})]}),(0,O.jsx)(x.Z.Sider,{theme:"light",collapsed:Be,collapsedWidth:0,width:600,children:(0,O.jsx)(E,{isStatic:c.isStatic,editNode:K,onSubmit:tt,jsTipMap:c.jsTipMap,onClose:function(){Ue(!0)},isCollapsed:Be})})]})})},Pe=le},9976:function(me,G,e){e.d(G,{Z:function(){return N}});var z=e(87363),f=e(33130),T=(0,z.forwardRef)(function(L,F){return(0,f.jsx)("div",{className:"drag-graph",ref:F})}),N=T},34957:function(me,G,e){var z=e(57213),f=e.n(z),T=e(54306),N=e.n(T),L=e(62835),F=e(87363),M=e.n(F),t=e(33130);G.Z=function(_){var p,W=(0,F.useState)(""),S=N()(W,2),I=S[0],h=S[1],l=(0,F.useState)({}),a=N()(l,2),o=a[0],u=a[1],B=function(x){var m,A,Z;(m=_.editNode)===null||m===void 0||m.setAttrByPath("text/text",x.name);var O=(A=_.editNode)===null||A===void 0?void 0:A.data.config;_.editNode&&(console.log("update graph data",x),_.editNode.setData(f()(f()({},_.editNode.data),{},{config:f()(f()({},O),x)}),{overwrite:!0})),console.log("submit---props.editNode.data.config"),console.log((Z=_.editNode)===null||Z===void 0?void 0:Z.data.config),_==null||_.onSubmit()};return(0,F.useEffect)(function(){debugger;if(_.editNode&&_.editNode.data){var i=_.editNode.data.config||{};h(_.editNode.data.configSchema||i.type)}},[_.editNode]),(0,F.useEffect)(function(){var i;if((i=_.editNode)!==null&&i!==void 0&&i.data){var x,m,A=((x=_.editNode)===null||x===void 0?void 0:x.data.config)||{},Z=f()({},A),O=(m=_.editNode)===null||m===void 0?void 0:m.attrs;O&&O.text&&O.text.text&&(Z.name=O.text.text),u(Z)}},[(p=_.editNode)===null||p===void 0?void 0:p.data]),(0,t.jsx)(L.Z,{isStatic:_.isStatic,formId:I,values:f()({},o),onSubmit:B,jsTipMap:_.jsTipMap})}},12490:function(me,G,e){e.d(G,{Hi:function(){return T},Tt:function(){return z}});var z={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}},zIndex:1},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top"},{group:"right"},{group:"bottom"},{group:"left"}]},f={groups:{right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}},zIndex:1}},items:[{group:"right"}]},T={groups:{bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}},zIndex:1}},items:[{group:"bottom"}]}},11331:function(me,G,e){var z=e(54306),f=e.n(z),T=e(70517),N=e(90010),L=e.n(N),F=e(23620),M=e(52943),t=e(87363),_=e.n(t),p=e(70256),W=e(33358),S=e(49500),I=e(16123),h=e(99273),l=e(33130);T.Z.interceptors.response.use(function(o){return console.log("axios response"),console.log(o),o&&o.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),o.data.error||(o.data.error={code:0}),o.data.code==500&&(o.data.error={code:500,message:o.data.msg}),o.data.data&&o.data.data.records&&(o.data.data.items=o.data.data.records),o):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(o.data),Promise.reject(new Error(o.data.message)))},function(o){if(console.log("\u6355\u6349axios error"),console.log(o),o.response&&o.response.data){var u,B=o.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((u=o.response.data.error)===null||u===void 0?void 0:u.code)==0&&(o.response.data.error.code=500),console.log(B),B}return Promise.reject(o)});var a=function(u){var B=(0,t.useState)({type:"page"}),i=f()(B,2),x=i[0],m=i[1],A="cxd",Z="zh-CN";return(0,t.useEffect)(function(){u.pageId&&(0,p.UD)(u.pageId).then(function(O){m(O)})},[u.pageId]),(0,l.jsxs)("div",{children:[(0,l.jsx)(M.qR,{theme:A,position:"top-right",locale:Z},"toast"),(0,l.jsx)(M.wx,{theme:A,locale:Z},"alert"),(0,F.sYA)(x,{data:u.data},{fetcher:function(D){var E=D.url,V=D.method,C=D.data,k=D.responseType,R=D.config,pe=D.headers;return R=R||{},R.withCredentials=!0,k&&(R.responseType=k),R.cancelExecutor&&(R.cancelToken=new T.Z.CancelToken(R.cancelExecutor)),R.headers=pe||{},R.headers.Authorization||(R.headers.Authorization="Bearer "+h.F.getTokenFormLocal()),V!=="post"&&V!=="put"&&V!=="patch"?(C&&(R.params=C),T.Z[V](E,R)):(C&&C instanceof FormData?(R.headers=R.headers||{},R.headers["Content-Type"]="multipart/form-data"):C&&typeof C!="string"&&!(C instanceof Blob)&&!(C instanceof ArrayBuffer)&&(C=JSON.stringify(C),R.headers=R.headers||{},R.headers["Content-Type"]="application/json"),T.Z[V](E,C,R))},isCancel:function(D){return T.Z.isCancel(D)},copy:function(D){L()(D),M.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:A,jumpTo:function(D,E){debugger;E.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+D,"_blank"):window.location.hash=D}})]})};G.Z=a},72107:function(me,G,e){e.d(G,{Ld:function(){return z},Iz:function(){return p},Du:function(){return W},dO:function(){return I},z1:function(){return u},X0:function(){return _},_w:function(){return B}});var z=function(i){return i.TypeAnnotation="TypeAnnotation",i.Structure="Structure",i.StructureProperty="StructureProperty",i.TypeParam="TypeParam",i.Variable="Variable",i.Logic="Logic",i.LogicItem="LogicItem",i}({}),f=function(i){return i.start="start",i.end="end",i.switch="switch",i["switch-case"]="switch-case",i["switch-def"]="switch-def",i["mqtt-pub"]="mqtt-pub",i["mqtt-sub"]="mqtt-sub",i["mqtt-unsub"]="mqtt-unsub",i["mqtt-client"]="mqtt-client",i["mqtt-server"]="mqtt-server",i["mqtt-broker"]="mqtt-broker",i.http="http",i.logic="logic",i.js="js",i.wait="wait",i}({}),T=e(63466),N=e.n(T),L=e(21140),F=e.n(L),M=e(52510),t=e.n(M),_=N()(function i(x){F()(this,i),t()(this,"concept",void 0),t()(this,"name",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"typeAnnotation",void 0),t()(this,"required",!1),t()(this,"defaultValue",void 0),this.concept=z.StructureProperty,this.name=x}),p=N()(function i(x){F()(this,i),t()(this,"concept",z.Logic),t()(this,"schemeVersion",void 0),t()(this,"version",void 0),t()(this,"id",void 0),t()(this,"name",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"triggerType",void 0),t()(this,"cron",void 0),t()(this,"typeParams",void 0),t()(this,"params",void 0),t()(this,"returns",void 0),t()(this,"variables",void 0),t()(this,"envs",void 0),t()(this,"items",[]),t()(this,"visualConfig",void 0),this.id=x,this.schemeVersion="0.1"}),W=N()(function i(x,m){var A=this;F()(this,i),t()(this,"concept","LogicItem"),t()(this,"id",void 0),t()(this,"name",void 0),t()(this,"type",void 0),t()(this,"label",void 0),t()(this,"description",void 0),t()(this,"params",void 0),t()(this,"returns",void 0),t()(this,"envs",void 0),t()(this,"afterReturnAdaptor",void 0),t()(this,"returnAccept",void 0),t()(this,"nextId",void 0),t()(this,"endId",void 0),t()(this,"condition",void 0),t()(this,"script",void 0),t()(this,"timeout",void 0),t()(this,"branches",void 0),t()(this,"url",void 0),t()(this,"method",void 0),t()(this,"headers",void 0),t()(this,"queryParams",void 0),t()(this,"tranScope",void 0),t()(this,"body",void 0),t()(this,"setEnv",function(Z){A.envs=Z}),this.type=m,this.id=x}),S=null,I=N()(function i(x){F()(this,i),t()(this,"concept","Param"),t()(this,"name",void 0),t()(this,"description",void 0),t()(this,"typeAnnotation",void 0),t()(this,"required",void 0),t()(this,"defaultValue",void 0),this.name=x}),h=e(58853),l=e.n(h),a=e(38888),o=e.n(a),u=function(i){l()(m,i);var x=o()(m);function m(A){var Z;return F()(this,m),Z=x.call(this,A),Z.concept="Return",Z}return N()(m)}(I),B=function(i){l()(m,i);var x=o()(m);function m(A){var Z;return F()(this,m),Z=x.call(this,A),Z.concept="Variable",Z}return N()(m)}(I)},77357:function(me,G,e){e.d(G,{nq:function(){return S}});var z=e(57213),f=e.n(z),T=e(21140),N=e.n(T),L=e(63466),F=e.n(L),M=e(43702),t=e(72107),_=null;function p(l,a,o,u){var B,i,x=l.data.config,m=x.type,A=o.flatMap(function(E){return E.source.cell===l.id?a[E.target.cell]:[]}),Z=l.attrs,O=new t.Du((B=l.id)!==null&&B!==void 0?B:"",m);if(O=f()(f()({},x),{},{id:l.id,name:Z==null||(i=Z.text)===null||i===void 0?void 0:i.text}),!(u.findIndex(function(E){return E.id===O.id})>-1)&&(u.push(O),A.length!==0))switch(m){default:if(A.length>1||O.type==="switch"){var D;console.log((D=l.data)===null||D===void 0?void 0:D.config),console.log(A),O.branches=[],A.forEach(function(E){var V,C,k,R;console.log((V=E.data)===null||V===void 0?void 0:V.config),(C=O.branches)===null||C===void 0||C.push({when:(k=E.data)===null||k===void 0||(R=k.config)===null||R===void 0?void 0:R.case,nextId:E.id}),p(a[E.id],a,o,u)})}else O.nextId=A[0].id,p(a[A[0].id],a,o,u);break}}function W(l,a,o,u){var B,i,x=l.data.config,m=x.type,A=o.flatMap(function(E){return E.source.cell===l.id?a[E.target.cell]:[]}),Z=l.attrs,O=new LogicItem((B=l.id)!==null&&B!==void 0?B:"",m);if(O=_objectSpread(_objectSpread({},x),{},{id:l.id,name:Z==null||(i=Z.text)===null||i===void 0?void 0:i.text}),!(u.findIndex(function(E){return E.id===O.id})>-1)&&(u.push(O),A.length!==0))switch(m){default:if(A.length>1||O.type==="switch"){var D;console.log((D=l.data)===null||D===void 0?void 0:D.config),console.log(A),O.branches=[],A.forEach(function(E){var V,C,k,R;console.log((V=E.data)===null||V===void 0?void 0:V.config),(C=O.branches)===null||C===void 0||C.push({when:(k=E.data)===null||k===void 0||(R=k.config)===null||R===void 0?void 0:R.case,nextId:E.id}),p(a[E.id],a,o,u)})}else O.nextId=A[0].id,p(a[A[0].id],a,o,u);break}}function S(l,a){var o=new t.Iz(l),u=[],B=[],i={},x=void 0;if(a.forEach(function(m){var A=m.id||"";if(m.shape==="edge")u.push(m);else{var Z=m.attrs;i[A]=m,B.push(m),m.data.config.type==="start"&&(x=m)}}),!x){M.ZP.error("\u672A\u53D1\u73B0\u5F00\u59CB\u8282\u70B9\uFF0C\u8BF7\u914D\u7F6E\uFF01");return}return p(x,i,u,o.items),console.log("logic.items"),console.log(o.items),o}function I(l,a){var o=new Logic(l),u=[],B=[],i={},x=void 0;if(a.forEach(function(m){var A=m.id||"";if(m.shape==="edge")u.push(m);else{var Z=m.attrs;i[A]=m,B.push(m),x==null&&(x=m)}}),!x){message.error("\u672A\u53D1\u73B0\u5F00\u59CB\u8282\u70B9\uFF0C\u8BF7\u914D\u7F6E\uFF01");return}return W(x,i,u,o.items),console.log("logic.items"),console.log(o.items),o}function h(l){var a=[];return l.items.forEach(function(o){var u={id:o.id,shape:o.type,size:{width:80,height:40},data:{config:o},attrs:{text:{text:o.name}}};if(a.push(u),o.branches&&o.branches.length>0)o.branches.forEach(function(i){var x={shape:"edge",source:{cell:o.id},target:{cell:i.nextId},labels:[{position:.5,attrs:{label:{text:i.when}}}]};a.push(x)});else if(o.nextId){var B={shape:"edge",source:{cell:o.id},target:{cell:o.nextId}};a.push(B)}}),a}},94744:function(me,G,e){e.d(G,{y:function(){return W}});var z=e(37635),f=e.n(z),T=e(21140),N=e.n(T),L=e(63466),F=e.n(L),M=e(72107),t=e(52510),_=e.n(t),p=F()(function S(I){N()(this,S),_()(this,"concept","EnvParam"),_()(this,"name",void 0),_()(this,"description",void 0),_()(this,"typeAnnotation",void 0),_()(this,"required",!1),_()(this,"defaultValue",void 0),this.name=I}),W=function(){function S(){N()(this,S)}return F()(S,null,[{key:"valueToTypeAnnotaion",value:function(h){var l=this,a={concept:M.Ld.TypeAnnotation,typeKind:"primitive",typeName:"string",defaultValue:h};if(Array.isArray(h))a.typeName="array";else{var o=f()(h);switch(o){case"boolean":a.typeKind="primitive",a.typeName="boolean";break;case"number":a.typeKind="primitive",a.typeName="number";break;case"string":a.typeKind="primitive",a.typeName="string";break;case"object":h==null?a.typeName="null":h instanceof Date?(a.typeKind="primitive",a.typeName="date"):h instanceof RegExp?(a.typeKind="primitive",a.typeName="regexp"):h instanceof Function?(a.typeKind="primitive",a.typeName="function"):(a.typeKind="anonymousStructure",a.typeName="object",a.properties=[],Object.keys(h).map(function(u){var B,i=h[u],x=l.valueToTypeAnnotaion(i),m=new M.X0(u);m.typeAnnotation=x,m.defaultValue=i,(B=a.properties)===null||B===void 0||B.push(m)}));break;default:a.typeKind="unknown",a.typeName=o;break}}return a}},{key:"typeAnnotaionToValue",value:function(h){var l,a,o=this,u;switch(h.typeName){case"array":u=(l=h.defaultValue)!==null&&l!==void 0?l:[];break;case"boolean":u=h.defaultValue?h.defaultValue=="true":!1;break;case"number":u=parseFloat(h.defaultValue);break;case"null":u=null;break;case"date":u=new Date(h.defaultValue);break;case"regexp":u=new RegExp(h.defaultValue);break;case"object":u={},(a=h.properties)===null||a===void 0||a.forEach(function(B){u[B.name]=o.typeAnnotaionToValue(B.typeAnnotation)});break;case"string":case"function":default:u=h.defaultValue;break}return u}},{key:"getParamArrayByJson",value:function(h){var l=[];return h&&Object.keys(h).forEach(function(a){var o=new M.dO(a);o.typeAnnotation=S.valueToTypeAnnotaion(h[a]),o.defaultValue=h[a],l.push(o)}),l}},{key:"getReturnArrayByJson",value:function(h){var l=[];return h&&Object.keys(h).forEach(function(a){var o=new M.z1(a);o.typeAnnotation=S.valueToTypeAnnotaion(h[a]),o.defaultValue=h[a],l.push(o)}),l}},{key:"getVariableArrayByJson",value:function(h){var l=[];return h&&Object.keys(h).forEach(function(a){var o=new M._w(a);o.typeAnnotation=S.valueToTypeAnnotaion(h[a]),o.defaultValue=h[a],l.push(o)}),l}},{key:"getEnvsArrayByJson",value:function(h){var l=[];return h&&Object.keys(h).forEach(function(a){var o=new p(a);o.typeAnnotation=S.valueToTypeAnnotaion(h[a]),o.defaultValue=h[a],l.push(o)}),l}},{key:"getJsonByParams",value:function(h){var l=this,a={};return h==null||h.forEach(function(o){a[o.name]=o.typeAnnotation?l.typeAnnotaionToValue(o.typeAnnotation):o.defaultValue}),a}}]),S}()},84191:function(me,G,e){e.d(G,{k:function(){return N}});var z=e(37635),f=e.n(z),T=function L(F){var M="{";return Object.keys(F).forEach(function(t){var _=F[t];M+="".concat(t,":"),Array.isArray(_)?M+="[],":f()(_)=="object"?M+=L(_)+",":typeof _=="string"?M+="'".concat(_,"',"):M+="".concat(_,",")}),M+="}",M},N=function(F,M){var t="";M&&(Object.keys(M).forEach(function(p){var W=M[p];t+="".concat(p,":"),Array.isArray(W)?t+="[],":f()(W)=="object"?t+=T(W)+",":typeof W=="string"?t+="'".concat(W,"',"):t+="".concat(W,",")}),t=t.substring(0,t.length-1));var _="const ".concat(F,"={").concat(t,"}");return _}},95926:function(me,G,e){e.d(G,{r:function(){return Ve}});var z=e(57213),f=e.n(z),T=e(93525),N=e.n(T),L=e(21140),F=e.n(L),M=e(63466),t=e.n(M),_=e(68608),p=e.n(_),W=e(58853),S=e.n(W),I=e(38888),h=e.n(I),l=e(52510),a=e.n(l),o=e(22465),u=e(14990),B=e(72237),i=e(11150),x=e(93853),m=e(28110),A=e(5671),Z=e(89357),O=e(9722),D=e(17696),E=e(19227),V=e(75476),C=e(1167),k=e(22046),R=e(22150),pe=e(11250),xe=e(43702),be=e(58856),le=e(40767),Pe=e(75904),ye=e(29830),c=e(46464),te=e(32246),ge=e(47097),fe=e(87363),Ce=e.n(fe),K=e(77357),J=e(54306),Q=e.n(J),de=e(55104),ne=e(70256),g=e(33130),ae=function(w){var v=(0,fe.useState)({type:"form"}),r=Q()(v,2),j=r[0],n=r[1],X=(0,fe.useState)({}),U=Q()(X,2),ie=U[0],H=U[1],oe=function(b){var s,q,Y;(s=w.editNode)===null||s===void 0||s.setAttrByPath("text/text",b.name);var se=(q=w.editNode)===null||q===void 0?void 0:q.data.config;w.editNode&&(console.log("update graph data",b),w.editNode.setData({config:f()(f()({},se),b)},{overwrite:!0})),console.log("submit---props.editNode.data.config"),console.log((Y=w.editNode)===null||Y===void 0?void 0:Y.data.config);var d={config:f()(f()({},se),b)};w==null||w.onSubmit(d)},re=function(b){if(b&&b.data){var s,q=b.data.config||{},Y=b.attrs;return q.name=Y==null||(s=Y.text)===null||s===void 0?void 0:s.text,q}else return{name:""}};return(0,fe.useEffect)(function(){if(w.editNode&&w.editNode.data){var P=w.editNode.data.config||{};(0,ne.CD)(w.editNode.data.configSchema||P.type).then(function(b){console.log("nodeConfigSchema"),console.log(b),n(b)})}},[w.editNode]),(0,fe.useEffect)(function(){var P,b,s=((P=w.editNode)===null||P===void 0?void 0:P.data.config)||{},q=f()({},s),Y=(b=w.editNode)===null||b===void 0?void 0:b.attrs;Y&&Y.text&&Y.text.text&&(q.name=Y.text.text),H(q)},[j]),(0,g.jsx)(de.Z,{config:j,values:f()({},ie),onSubmit:oe})};function Oe(w){return(0,g.jsxs)("div",{style:{margin:0,height:"95vh",overflowY:"scroll"},children:[(0,g.jsx)(ae,{logic:w.logic,editNode:w.editNode,onSubmit:w.onSubmit}),w!=null&&w.isCollapsed?"":(0,g.jsx)(Pe.ZP,{type:"text",style:{position:"absolute",top:10,right:15,fontSize:20,textAlign:"center"},onClick:function(){w==null||w.onClose()},children:"x"})]})}var Be=Oe,Ue=e(10486),We=e(14232),Ie=e(37555),Ne=e(62835),Se=e(94744),Fe=function(v){var r,j=(0,fe.useState)({}),n=Q()(j,2),X=n[0],U=n[1];(0,fe.useEffect)(function(){var H=v.values,oe=H.params,re=H.variables,P=H.envs,b=H.returns;U({params:JSON.stringify(Se.y.getJsonByParams(oe)),variables:JSON.stringify(Se.y.getJsonByParams(re)),returns:JSON.stringify(Se.y.getJsonByParams(b)),envs:JSON.stringify(Se.y.getJsonByParams(P))})},[v.values]);var ie=(0,fe.useCallback)(function(H){try{return JSON.parse(H),!0}catch(oe){return!1}},[]);return(0,g.jsxs)("span",{children:[v.children,(0,g.jsx)(c.Z,{open:(r=v.open)!==null&&r!==void 0?r:!1,title:"\u53C2\u6570\u914D\u7F6E\uFF08\u901A\u8FC7json\u683C\u5F0F\u58F0\u660E\uFF09",width:1e3,footer:!1,onCancel:function(){return v==null?void 0:v.setOpen(!1)},children:(0,g.jsx)(Ne.Z,{formId:"logic-setting",values:X,onSubmit:function(oe){console.log("\u63D0\u4EA4\u53C2\u6570"),console.log(oe);var re=!1;Object.keys(oe).forEach(function(P){var b=oe[P];if(!ie(b)){var s=P==="params"?"\u5165\u53C2":P==="variables"?"\u5C40\u90E8\u53D8\u91CF":P==="returns"?"\u8FD4\u56DE\u53C2\u6570":"\u73AF\u5883\u53D8\u91CF";return xe.ZP.error("".concat(s,"json\u683C\u5F0F\u9519\u8BEF")),re=!0,!1}}),re||(v!=null&&v.onSubmit&&v.onSubmit(oe),v==null||v.setOpen(!1))}})})]})},Me=Fe,_e=e(12490),we=function(v,r){var j,n,X,U,ie=r.getData(),H=r.getPosition(),oe=v.getNodes(),re;if(["ExtSharp","polygon"].indexOf(r.shape)>-1)switch(ie.config.type){case"switch":var P=200,b=v.addNode({shape:"switch",position:H,width:P,height:50,ports:_e.Tt,data:r.data,attrs:{body:{stroke:"#8f8f8f",strokeWidth:1,fill:"#fff",rx:6,ry:6}}});v.removeNode(r);var s=v.addNode({shape:"switch-case",position:{y:H.y+100,x:H.x-P/2},width:120,height:50,ports:_e.Tt,data:{config:{type:"switch-case"}}}),q=v.addNode({shape:"switch-default",position:{y:H.y+100,x:H.x+P},width:120,height:50,ports:_e.Tt,data:{config:{type:"switch-default"}}}),Y=v.addEdge({source:b,sourcePort:(j=b.ports.items.find(function(Te){return Te.group=="bottom"}))===null||j===void 0?void 0:j.id,target:s,targetPort:(n=s.ports.items.find(function(Te){return Te.group=="top"}))===null||n===void 0?void 0:n.id,zIndex:0}),se=v.addEdge({source:b,sourcePort:(X=b.ports.items.find(function(Te){return Te.group=="bottom"}))===null||X===void 0?void 0:X.id,target:q,targetPort:(U=q.ports.items.find(function(Te){return Te.group=="top"}))===null||U===void 0?void 0:U.id,zIndex:0});re=b;break;case"switch-case":var d=v.createNode({shape:"switch-case",position:r.position(),width:120,height:50,ports:_e.Tt,data:r.data});v.removeNode(r),v.addNode(d),re=d;break;case"switch-default":var $=v.addNode({shape:"switch-default",position:r.position(),width:120,height:50,ports:_e.Tt,data:{config:{type:"switch-default"}}});v.removeNode(r),v.addNode($),re=$;break;case"string":var ee=v.createNode({shape:"string",position:r.position(),width:100,height:50,ports:_e.Tt,data:r.data});v.removeNode(r),v.addNode(ee),re=ee;break;case"num":var ue=v.createNode({shape:"num",position:r.position(),width:100,height:50,ports:_e.Tt,data:r.data});v.removeNode(r),v.addNode(ue),re=ue;break;case"assignment":var he=v.createNode({shape:"assignment",position:r.position(),width:220,height:50,ports:_e.Tt,data:r.data});v.removeNode(r),v.addNode(he),re=he;break;default:break}if(console.log("node:added"),re&&oe.length==1){var Ee,De,Re,nt,at;v.addEdge({source:oe[0],sourcePort:(Ee=oe[0].ports.items.find(function(Te){return Te.group=="bottom"}))===null||Ee===void 0?void 0:Ee.id,target:re,targetPort:(De=re)===null||De===void 0||(Re=De.ports)===null||Re===void 0||(nt=Re.items)===null||nt===void 0||(at=nt.find(function(Te){return Te.group=="top"}))===null||at===void 0?void 0:at.id,zIndex:0})}},Le=e(59998),Ae=e(72107),ce=e(85772),ke=function(v){var r,j=(0,ce.cI)();(0,fe.useEffect)(function(){var U=v.values.params;j.setValues({params:JSON.stringify(Se.y.getJsonByParams(U))})},[v.values]);var n=(0,fe.useCallback)(function(U){try{return JSON.parse(U),!0}catch(ie){return!1}},[]);function X(U){var ie=!1;Object.keys(U).forEach(function(H){var oe=U[H];if(["params","headers"].indexOf(H)>-1&&!n(oe)){var re=H==="params"?"\u5165\u53C2":"\u8BF7\u6C42\u5934";return xe.ZP.error("".concat(re,"json\u683C\u5F0F\u9519\u8BEF")),ie=!0,!1}}),ie||(v!=null&&v.onSubmit&&v.onSubmit(U,U.debugType),v==null||v.setOpen(!1))}return(0,g.jsxs)("span",{children:[v.children,(0,g.jsx)(c.Z,{open:(r=v.open)!==null&&r!==void 0?r:!1,title:"\u53C2\u6570\u914D\u7F6E\uFF08\u901A\u8FC7json\u683C\u5F0F\u58F0\u660E\uFF09",width:1e3,footer:!1,onCancel:function(){return v==null?void 0:v.setOpen(!1)},children:(0,g.jsx)(Ne.Z,{formId:"logic-debug-input",onSubmit:X})})]})},Ye=ke,Ze=e(61719),Ke=e(97944),$e=e(47503),He=e(49425),Xe=null,je=function(v){var r=(0,Ke.Ik)(),j=(0,fe.useState)(!1),n=Q()(j,2),X=n[0],U=n[1];return(0,g.jsx)("div",{style:{width:"100%"},children:X?(0,g.jsx)($e.Z,{title:"js\u7F16\u8F91\u5668",centered:!0,width:1200,bodyStyle:{height:"80vh"},open:X,footer:null,onCancel:function(){return U(!1)},children:(0,g.jsx)(Ke.ML,f()(f()({theme:"vs-dark",defaultValue:v.value,defaultLanguage:v.language,options:{minimap:{enabled:!1}}},v),{},{height:"100%"}))}):(0,g.jsxs)("div",{children:[(0,g.jsx)(Ke.ML,f()({className:"editorByLoader",theme:"vs-dark",defaultValue:v.value,defaultLanguage:v.language,onMount:function(H){var oe;(oe=H.getAction("editor.action.formatDocument"))===null||oe===void 0||oe.run(),H.setValue(H.getValue())},options:{minimap:{enabled:!1}},height:500},v)),(0,g.jsx)(Pe.ZP,{size:"small",type:"text",icon:(0,g.jsx)(He.Z,{}),style:{position:"absolute",top:0,right:0,margin:"10px",color:"whitesmoke"},onClick:function(){return U(!0)}})]})})},Qe=Ce().memo(je),qe=e(5726),Je=e.n(qe),ze=e(23620),et=e(71731),Ge=e(11331),tt=[{key:"saveToPng",label:"\u5BFC\u51FA\u56FE\u7247"},{key:"saveToClipboard",label:"\u590D\u5236\u5230\u526A\u8D34\u677F"}],Ve=Ce().createContext({logic:new Ae.Iz("")}),ve=function(v,r){for(var j=0,n=v.length;j<n;j+=1)v[j].style.visibility=r?"visible":"hidden"},y=function(w){S()(r,w);var v=h()(r);function r(j){var n;F()(this,r),n=v.call(this,j),a()(p()(n),"container",void 0),a()(p()(n),"stencilContainer",void 0),a()(p()(n),"state",{editingNode:void 0,openEdgeEditor:!1,embeddingEnable:!1,editingEdge:void 0,leftToolCollapsed:!1,rightToolCollapsed:!0,openFlowSetting:!1,openRunLogic:!1,editorCtx:{logic:new Ae.Iz("1")},logs:[],panel:{nodes:[],groups:[]}}),a()(p()(n),"handleEdgeSubmit",function(P){var b;(b=n.state.editingEdge)===null||b===void 0||b.setLabels(P)}),a()(p()(n),"initGraph",function(P){var b,s=new A.kJ({container:P,embedding:{enabled:!0,findParent:function($){var ee=$.node,ue=ee.getBBox();return this.getNodes().filter(function(he){var Ee=he.getData();if(Ee&&Ee.parent){var De=he.getBBox();return ue.isIntersectWithRect(De)}return!1})}},mousewheel:{enabled:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:15}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,snap:{radius:20},createEdge:function(){return new A.bn.kS({tools:[],vertices:[],zIndex:0})},validateConnection:function($){var ee=$.targetMagnet;return!!ee}},background:{color:"#F2F7FA"},grid:!0});s.use(new C.H({enabled:!0,sharp:!0})).use(new D.A({enabled:!0})).use(new V.Y({enabled:!0,multiple:!0,strict:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0,pointerEvents:"none"})).use(new R.T({enabled:!0})).use(new E.N).use(new O.T).use(new pe.D).use(new Z.a({container:n.minimapContainer})).use(new et.w({resizing:{enabled:!0,minWidth:50,minHeight:50,orthogonal:!1,restrict:!1,preserveAspectRatio:!1}})),s.on("edge:dblclick",function(d){var $=d.cell}),s.on("edge:mouseenter",function(d){var $=d.cell;$.addTools(["vertices","segments",{name:"button-remove",args:{distance:-40}}])}),s.on("edge:mouseleave",function(d){var $=d.cell;$.removeTools()}),s.on("node:moved",function(d){var $=d.e,ee=d.x,ue=d.y,he=d.node,Ee=d.view}),s.on("node:mouseenter",function(d){var $,ee,ue,he=d.cell;(($=he.data)===null||$===void 0||(ee=$.config)===null||ee===void 0?void 0:ee.type)!="start"&&he.addTools([{name:"button-remove",args:{x:"100%",y:0,offset:{x:-10,y:10}}}]);var Ee=(ue=n.container)===null||ue===void 0?void 0:ue.querySelectorAll(".x6-port-body");ve(Ee,!0)}),s.on("node:mouseleave",function(d){var $,ee=d.cell;ee.removeTools();var ue=($=n.container)===null||$===void 0?void 0:$.querySelectorAll(".x6-port-body");ve(ue,!1)}),s.on("node:click",function(d){var $=d.e,ee=d.x,ue=d.y,he=d.node,Ee=d.view;he.removeTools(),n.setState({editingNode:he})}),s.on("node:added",function(d){var $=d.node,ee=d.index,ue=d.options;we(s,$)}),s.on("node:dblclick",function(d){var $=d.e,ee=d.x,ue=d.y,he=d.node,Ee=d.view;n.setState({rightToolCollapsed:!1,editingNode:he})}),s.bindKey(["meta+c","ctrl+c"],function(){var d=s.getSelectedCells();return d.length&&s.copy(d),!1}),s.bindKey(["meta+x","ctrl+x"],function(){var d=s.getSelectedCells();return d.length&&s.cut(d),!1}),s.bindKey(["meta+v","ctrl+v"],function(){if(!s.isClipboardEmpty()){var d=s.paste({offset:32});s.cleanSelection(),s.select(d)}return!1}),s.bindKey(["meta+z","ctrl+z"],function(){return s.canUndo()&&s.undo(),!1}),s.bindKey(["meta+shift+z","ctrl+shift+z"],function(){return s.canRedo()&&s.redo(),!1}),s.bindKey("backspace",function(){var d=s.getSelectedCells();d.length&&(d.find(function($){var ee;return $.data?["start"].indexOf((ee=$.data.config)===null||ee===void 0?void 0:ee.type)>-1:!1})?xe.ZP.error("\u7981\u6B62\u5220\u9664\u5F00\u59CB\u8282\u70B9\uFF01"):s.removeCells(d))}),s.on("blank:dblclick",function(d){var $=d.e,ee=d.x,ue=d.y;console.log("blank:dbclick",ee,ue),n.autoLayout(s)}),s.bindKey(["ctrl+1","meta+1"],function(){var d=s.zoom();d<1.5&&s.zoom(.1)}),s.bindKey(["ctrl+2","meta+2"],function(){var d=s.zoom();d>.5&&s.zoom(-.1)}),n.state.graph=s;var q=n.state.panel.groups,Y=new k.t({title:"\u5C55\u5F00/\u6536\u8D77",target:s,search:function($,ee){var ue=$.getAttrByPath("text/text");return(ue==null?void 0:ue.indexOf(ee))!==-1},notFoundText:"\u672A\u627E\u5230",collapsable:!0,stencilGraphWidth:250,groups:q,layoutOptions:{rowHeight:100}}),se={};return n.state.panel.nodes.forEach(function(d){var $=s.createNode(d);q.forEach(function(ee){d.groups.includes(ee.name)&&(se[ee.name]?se[ee.name].push($):se[ee.name]=[$])})}),Object.keys(se).forEach(function(d){Y.load(N()(se[d]),d)}),(b=n.stencilContainer)===null||b===void 0||b.appendChild(Y.container),n.props.config?(n.state.editorCtx.logic=n.props.config,s.fromJSON(n.state.editorCtx.logic.visualConfig)):((0,We.X)(s),n.autoLayout(s)),s}),a()(p()(n),"autoLayout",function(P){(0,Le.V)(P)}),a()(p()(n),"autoLayoutSelectedCells",function(P){var b=P.getSelectedCells().filter(function(q){return q.isNode()}),s=P.getSelectedCells().filter(function(q){return q.isEdge()});debugger;(0,Le.h)(b,s)}),a()(p()(n),"refContainer",function(P){n.container=P}),a()(p()(n),"refStencil",function(P){n.stencilContainer=P}),a()(p()(n),"handleSubmit",function(P){var b;(b=n.state.editingNode)===null||b===void 0||b.setData(P),n.saveAndConvertGraphToDsl()}),a()(p()(n),"handleOnConfigChange",function(P){try{var b=JSON.parse(P);n.setState({stepFlow:b})}catch(s){console.log(s)}}),a()(p()(n),"onSaveMenuClick",function(P){var b;switch(P.key){case"saveToBrowser":break;case"loadFromBrowser":var s=localStorage.getItem("logic-json");if(s){var q,Y=JSON.parse(s);n.state.editorCtx.logic=Y,(q=n.state.graph)===null||q===void 0||q.fromJSON(Y.visualConfig),n.saveAndConvertGraphToDsl()}else xe.ZP.info("\u6D4F\u89C8\u5668\u65E0\u7F13\u5B58\u6570\u636E");break;case"saveToClipboard":try{navigator.clipboard.writeText(JSON.stringify(n.state.editorCtx.logic))}catch(se){console.error(se)}break;case"saveToPng":(b=n.state.graph)===null||b===void 0||b.exportPNG(new Date().toLocaleDateString(),{backgroundColor:"#F2F7FA",padding:10,quality:1});break}}),a()(p()(n),"updateLogicAndEditorCtx",function(P){var b=f()(f()({},n.state.editorCtx.logic),P);return b.version=Je()(Date.now()).format("YYYYMMDDHHmmss"),n.setState({editorCtx:f()(f()({},n.state.editorCtx),{},{logic:b})}),b}),a()(p()(n),"saveAndConvertGraphToDsl",function(){var P,b=(P=n.state.graph)===null||P===void 0?void 0:P.toJSON(),s=n.convertGraphToDsl(b);if(s){var q,Y=n.updateLogicAndEditorCtx({items:s.items,visualConfig:s.visualConfig});n.props.config&&(Y.id=(q=n.props.config)===null||q===void 0?void 0:q.id),n.props.onSave&&n.props.onSave(Y);var se=JSON.stringify(Y);localStorage.setItem("logic-"+Y.name,se)}}),a()(p()(n),"saveFlowSettingAndConvertGraphToDsl",function(P){var b,s,q,Y,se,d=Se.y.getParamArrayByJson(JSON.parse((b=P.params)!==null&&b!==void 0?b:"{}")),$=Se.y.getReturnArrayByJson(JSON.parse((s=P.returns)!==null&&s!==void 0?s:"{}")),ee=Se.y.getVariableArrayByJson(JSON.parse((q=P.variables)!==null&&q!==void 0?q:"{}")),ue=Se.y.getEnvsArrayByJson(JSON.parse((Y=P.envs)!==null&&Y!==void 0?Y:"{}")),he=n.updateLogicAndEditorCtx({params:d,returns:$,variables:ee,envs:ue});n.props.config&&(he.id=(se=n.props.config)===null||se===void 0?void 0:se.id),n.props.onSave&&n.props.onSave(he);var Ee=JSON.stringify(he);localStorage.setItem("logic-json-"+he.id,Ee)}),a()(p()(n),"convertGraphToDsl",function(P){var b,s=(0,K.nq)((b=n.props.config)===null||b===void 0?void 0:b.id,P.cells);return s&&(s.visualConfig=P),s}),a()(p()(n),"setFlowSetting",function(P){n.setState({openFlowSetting:P})}),a()(p()(n),"minimapContainer",void 0),a()(p()(n),"refMiniMapContainer",function(P){n.minimapContainer=P});try{var X,U,ie=(0,Ue.K)(j.customNodes,j.customGroups,j.customSharps),H=ie.Nodes,oe=ie.Shapes,re=ie.Groups;(0,We.m)(oe),n.state.leftToolCollapsed=!(!((X=j.showLeft)!==null&&X!==void 0)||X),n.state.rightToolCollapsed=!((U=j.showRight)!==null&&U!==void 0&&U),n.state.panel.nodes=H,n.state.panel.groups=re}catch(P){console.error("\u6CE8\u518C\u8282\u70B9\u51FA\u9519\uFF1A"),console.error(P)}return n}return t()(r,[{key:"componentDidUpdate",value:function(n,X,U){if(this.props.config&&this.state.editorCtx.logic.id!=this.props.config.id){var ie,H,oe,re;this.state.editorCtx.logic=this.props.config,(ie=this.state.editorCtx)!==null&&ie!==void 0&&(H=ie.logic)!==null&&H!==void 0&&H.visualConfig&&((oe=this.state.graph)===null||oe===void 0||oe.fromJSON((re=this.state.editorCtx.logic)===null||re===void 0?void 0:re.visualConfig)),this.setState({editingNode:void 0})}}},{key:"componentDidMount",value:function(){var n;this.initGraph(this.container),this.updateLogicAndEditorCtx((n=this.state.editorCtx)===null||n===void 0?void 0:n.logic)}},{key:"render",value:function(){var n=this,X,U=this.state,ie=U.editingNode,H=U.leftToolCollapsed,oe=U.rightToolCollapsed,re=U.editorCtx,P=U.embeddingEnable,b=U.graph,s=U.openFlowSetting,q=U.openRunLogic,Y=re.logic;return console.log("editorCtx",re),(0,g.jsx)(Ve.Provider,{value:re,children:(0,g.jsxs)(be.Z,{style:{height:"100vh",width:"100%",margin:0},children:[(0,g.jsx)(be.Z.Sider,{theme:"light",collapsed:H,collapsedWidth:0,width:250,ref:this.refStencil}),(0,g.jsxs)(be.Z,{style:{height:"100%"},children:[(0,g.jsxs)(be.Z.Header,{style:{padding:0,backgroundColor:"white"},children:[(0,g.jsxs)(le.Z,{direction:"horizontal",children:[(0,g.jsx)(Pe.ZP,{type:"text",icon:H?(0,g.jsx)(o.Z,{}):(0,g.jsx)(u.Z,{}),onClick:function(){n.setState({leftToolCollapsed:!H})},style:{fontSize:"16px",width:64,height:64}}),(0,g.jsx)(ye.Z.Button,{style:{float:"inline-start"},menu:{items:tt,onClick:this.onSaveMenuClick},buttonsRender:function(d){return[(0,g.jsx)(Pe.ZP,{type:"primary",icon:(0,g.jsx)(B.Z,{}),onClick:n.saveAndConvertGraphToDsl,children:"\u4FDD\u5B58"}),(0,g.jsx)(Pe.ZP,{type:"primary",icon:(0,g.jsx)(i.Z,{})})]},children:"\u4FDD\u5B58"}),(0,g.jsx)(Me,{open:s,values:f()({},Y),setOpen:this.setFlowSetting,onSubmit:this.saveFlowSettingAndConvertGraphToDsl,children:(0,g.jsx)(Pe.ZP,{onClick:function(){return n.setFlowSetting(!0)},icon:(0,g.jsx)(x.Z,{}),children:"\u914D\u7F6E\u53C2\u6570"})}),(X=this.props.btns)===null||X===void 0?void 0:X.map(function(se){return(0,g.jsx)(Pe.ZP,f()({},se))}),(0,g.jsx)(Ye,{open:q,setOpen:function(d){return n.setState({openRunLogic:d})},values:{params:Y==null?void 0:Y.params},onSubmit:function(d,$){if(n.setState({openRunLogic:!1}),Y){var ee=d.params,ue=d.bizId,he=d.headers,Ee=d.bizStartCode;(0,Ze.L7)(Y.id,JSON.parse(ee),ue,Ee,$,JSON.parse(he)).then(function(De){De.data.code==0?c.Z.success({title:"\u6267\u884C\u6210\u529F",width:"1000px",closable:!0,content:(0,g.jsx)("div",{children:(0,g.jsx)(Ge.Z,{pageId:"debug-info",data:De.data})})}):c.Z.error({title:(0,g.jsx)("span",{children:De.data.msg}),width:"1200px",closable:!0,content:(0,g.jsx)("div",{children:(0,g.jsx)(Ge.Z,{pageId:"debug-info",data:De.data})})})}).catch(function(De){var Re=De.response.data;c.Z.error({title:(0,g.jsx)("span",{children:Re.msg}),width:"1200px",closable:!0,content:(0,g.jsx)("div",{children:(0,g.jsx)(te.Z,{children:(0,g.jsx)(ge.Z,{children:(0,g.jsxs)(te.Z,{children:[(0,g.jsxs)(ge.Z,{span:12,children:[(0,g.jsx)("h4",{children:"\u9519\u8BEF\u8BE6\u7EC6:"}),(0,g.jsx)(ze.gcu,{src:Re.error,collapsed:1})]}),(0,g.jsxs)(ge.Z,{span:12,children:[(0,g.jsx)("h4",{children:"\u8FD4\u56DE\u6570\u636E:"}),(0,g.jsx)(Qe,{language:"json",value:JSON.stringify(Re.data),width:500})]})]})})})})})}),n.state.logs.push({data:new Date().toLocaleTimeString()})}},children:(0,g.jsx)(Pe.ZP,{type:"default",onClick:function(){n.setState({openRunLogic:!0})},icon:(0,g.jsx)(m.Z,{}),children:"\u8C03\u8BD5"})}),(0,g.jsxs)("span",{children:["\u5F53\u524D\u7248\u672C:",Y.version]})]}),(0,g.jsx)(le.Z,{style:{float:"right",right:"16px"}})]}),(0,g.jsxs)(be.Z.Content,{className:"app-content",children:[(0,g.jsx)(Ie.Z,{ref:this.refContainer}),(0,g.jsx)("div",{className:"app-minimap",ref:this.refMiniMapContainer})]})]}),(0,g.jsx)(be.Z.Sider,{theme:"light",collapsed:oe,collapsedWidth:0,width:600,children:(0,g.jsx)(Be,{logic:Y,onClear:function(){return n.setState({logs:[]})},editNode:ie,onSubmit:this.handleSubmit,logs:this.state.logs,onClose:function(){n.setState({rightToolCollapsed:!0})},isCollapsed:oe})})]})})}}]),r}(Ce().Component)},37555:function(me,G,e){e.d(G,{Z:function(){return N}});var z=e(87363),f=e(33130),T=(0,z.forwardRef)(function(L,F){return(0,f.jsx)("div",{className:"drag-graph",ref:F})}),N=T},59998:function(me,G,e){e.d(G,{V:function(){return f},h:function(){return T}});var z=e(59490),f=function(L){var F=new z.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),M=L.getNodes(),t=L.getEdges(),_=F.layout({nodes:M,edges:t}),p=_.nodes,W=p===void 0?[]:p;M.forEach(function(S){var I=W.find(function(h){return h.id===S.id});I.x-=S.size().width/2,I.y-=S.size().height/2,S.position(I.x,I.y)})},T=function(L,F){debugger;var M=new z.Vq({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),t=M.layout({nodes:L,edges:F}),_=t.nodes,p=_===void 0?[]:_;L.forEach(function(W){var S=p.find(function(I){return I.id===W.id});S.x-=W.size().width/2,S.y-=W.size().height/2,W.position(S.x,S.y)})}},14232:function(me,G,e){e.d(G,{X:function(){return a},m:function(){return l}});var z=e(5671),f=e(11904),T=e(54882),N={customNode:"customNode___AyPI8",input:"input___Q5PmS",switchNode:"switchNode___fqB9a"},L=e(33130),F=function(u){return(0,L.jsx)("div",{className:N.customNode,children:(0,L.jsx)(T.Z,{className:"input",value:u==null?void 0:u.data,width:80})})},M=e(42761),t=function(u){return(0,L.jsx)("div",{className:styles.customNode,children:(0,L.jsx)(M.Z,{className:"input",value:u==null?void 0:u.data,width:80})})},_=e(57213),p=e.n(_),W=function(u){var B,i,x,m=u.node,A=(B=m.data.config)===null||B===void 0?void 0:B.name,Z=A||"case";return(0,L.jsxs)("div",{className:N.customNode,children:[(0,L.jsx)("span",{children:"case"}),(0,L.jsx)(T.Z,{addonAfter:A,className:"input",value:m==null||(i=m.data)===null||i===void 0||(x=i.config)===null||x===void 0?void 0:x.case,width:150,onChange:function(D){var E=m.data;m.setData(p()(p()({},E),{},{config:p()(p()({},E.config),{},{case:D.target.value})}))}})]})},S=function(u){var B,i=u.node;return(0,L.jsx)("div",{className:N.customNode,children:(0,L.jsx)(T.Z,{addonBefore:"switch",className:"input",value:(B=i.data)===null||B===void 0?void 0:B.config.condition,onChange:function(m){var A=i.data;i.setData(p()(p()({},A),{},{config:p()(p()({},A.config),{},{condition:m.target.value})}))},width:100})})},I=e(12490),h=function(u){return(0,L.jsx)("div",{className:N.customNode,children:(0,L.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function l(o){o.forEach(function(u){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+u.name),z.kJ.registerNode(u.name,u.config,!0)}),(0,f.z2)({shape:"string",component:F}),(0,f.z2)({shape:"num",component:t}),(0,f.z2)({shape:"switch",component:S}),(0,f.z2)({shape:"switch-case",component:W}),(0,f.z2)({shape:"switch-default",component:h})}function a(o){var u=o.createNode({shape:"circle",label:"start",width:50,height:50,attrs:{body:{}},ports:I.Hi,data:{config:{type:"start"}}});o.addNode(u)}},10486:function(me,G,e){e.d(G,{K:function(){return M}});var z=e(57213),f=e.n(z),T=e(12490),N=50,L=50,F=[{name:"ExtSharp",config:{width:100,height:L,attrs:{body:{rx:6,ry:6,stroke:"#5F95FF",strokeWidth:1,fill:"rgba(95,149,255,0.05)",refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}];function M(t,_,p){var W=50,S=50,I={body:{}},h=[{shape:"circle",width:W,height:S,attrs:{body:f()(f()({},I.body),{},{fill:"white"}),text:{text:"\u4EA4\u4E92\u70B9"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:T.Tt,data:{config:{type:"wait-for-continue"}},groups:["global"]},{shape:"circle",label:"end",width:W,height:S,attrs:{body:f()(f()({},I.body),{},{fill:"#d9d9d9"}),text:{text:"end"}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:T.Tt,data:{config:{type:"end"}},groups:["global"]},{shape:"ExtSharp",attrs:{text:{text:"http\u8BF7\u6C42",fontSize:14},image:{"xlink:href":"/icons/http.svg",width:20,x:2,y:2}},data:{config:{type:"http",method:"POST"}},ports:T.Tt,groups:["biz"]},{shape:"ExtSharp",ports:T.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/code.svg"},text:{text:"js\u811A\u672C",fontSize:14}},data:{config:{type:"js"}},groups:["biz"]},{shape:"ExtSharp",ports:T.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/code.svg"},text:{text:"java\u65B9\u6CD5",fontSize:14}},data:{config:{type:"java"}},groups:["biz"]},{shape:"ExtSharp",ports:T.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/icons/CarbonSubflowLocal.svg"},text:{text:"\u590D\u7528\u903B\u8F91",fontSize:14}},data:{config:{type:"sub-logic"}},groups:["biz"]},{shape:"ExtSharp",width:50,height:S,label:"switch",attrs:{image:{"xlink:href":"/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:T.Tt,groups:["ctrl"]},{shape:"ExtSharp",width:W,height:S,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"case",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:T.Tt,groups:["ctrl"]},{shape:"ExtSharp",width:50,height:S,attrs:{image:{"xlink:href":"/icons/text.svg",width:30,x:8,y:10},text:{text:"default",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:T.Tt,groups:["ctrl"]},{shape:"polygon",x:600,y:70,width:W,height:S,points:"0,10 10,0 20,10 10,20",attrs:{body:f()({},I.body),text:{text:"if\u5224\u65AD",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},ports:T.Tt,data:{config:{type:"if"}},groups:["ctrl"]},{shape:"ExtSharp",width:W,height:S,attrs:{image:{"xlink:href":"/icons/delay.svg",width:30,x:8,y:10},text:{text:"\u7B49\u5F85",fontSize:14,refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"wait",timeout:"2000"}},ports:T.Tt,groups:["ctrl"]}];t&&t.length>0&&Array.prototype.push.apply(h,t);var l=[{name:"global",title:"\u5168\u5C40\u8282\u70B9",graphHeight:110},{name:"ctrl",title:"\u903B\u8F91\u63A7\u5236",graphHeight:330},{name:"biz",title:"\u4E1A\u52A1\u8C03\u7528",graphHeight:220}];_&&_.length>0&&Array.prototype.push.apply(l,_);var a=F;return p&&p.length>0&&Array.prototype.push.apply(a,p),{Shapes:a,Nodes:h,Groups:l}}},61719:function(me,G,e){e.d(G,{L7:function(){return h}});var z=e(57213),f=e.n(z),T=e(25359),N=e.n(T),L=e(49811),F=e.n(L),M=e(70517);function t(D,E){return axios.get(D,E)}function _(D,E,V){return axios.put(D,E,V)}function p(D,E){return axios.delete(D,E)}function W(D,E,V){return M.Z.post(D,E,V)}function S(D,E){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function D(E,V){return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",post("/api/runtime/logic/v1/run-fn/".concat(E),V,{headers:{"Content-Type":"application/json"}}));case 1:case"end":return k.stop()}},D)})),I.apply(this,arguments)}function h(D,E,V,C,k,R){return l.apply(this,arguments)}function l(){return l=F()(N()().mark(function D(E,V,C,k,R,pe){var xe;return N()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:xe="",le.t0=R,le.next=le.t0==="biz"?4:6;break;case 4:return k?xe="/api/runtime/logic/v1/biz/".concat(E,"/").concat(k,"/").concat(C,"?debug=true"):xe="/api/runtime/logic/v1/run-biz/".concat(E,"/").concat(C,"?debug=true"),le.abrupt("break",8);case 6:return xe="/api/runtime/logic/v1/run-api/".concat(E,"?debug=true"),le.abrupt("break",8);case 8:return le.abrupt("return",W(xe,V,{headers:f()({"Content-Type":"application/json"},pe)}));case 9:case"end":return le.stop()}},D)})),l.apply(this,arguments)}function a(D,E){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function D(E,V){return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",axios.post("/api/form/logic_instance/query",{filters:[{dataIndex:"logicId",values:[E],type:"="},{dataIndex:"bizId",values:[V],type:"="}]}).then(function(R){var pe=R.data.result.items[0];return pe}));case 1:case"end":return k.stop()}},D)})),o.apply(this,arguments)}function u(D){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function D(E){return _regeneratorRuntime().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",axios.get("/api/ide/logic-instance/".concat(E)).then(function(k){var R=k.data.data;return R}));case 1:case"end":return C.stop()}},D)})),B.apply(this,arguments)}function i(D){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function D(E){return _regeneratorRuntime().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",axios.post("/api/form/logic/add",E).then(function(k){var R=k.data.result;return R}));case 1:case"end":return C.stop()}},D)})),x.apply(this,arguments)}function m(D){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function D(E){return _regeneratorRuntime().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",axios.delete("/api/form/logic/delete/".concat(E)).then(function(k){return k.data.result}));case 1:case"end":return C.stop()}},D)})),A.apply(this,arguments)}function Z(){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function D(){var E,V,C=arguments;return _regeneratorRuntime().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return E=C.length>0&&C[0]!==void 0?C[0]:1,V=C.length>1&&C[1]!==void 0?C[1]:10,R.abrupt("return",axios.post("/api/form/logic/query",{page:E,pageSize:V}).then(function(pe){return pe.data}));case 3:case"end":return R.stop()}},D)})),O.apply(this,arguments)}},70256:function(me,G,e){e.d(G,{CD:function(){return t},UD:function(){return F},n4:function(){return p}});var z=e(25359),f=e.n(z),T=e(49811),N=e.n(T),L=e(70517);function F(S){return M.apply(this,arguments)}function M(){return M=N()(f()().mark(function S(I){return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,L.Z.get("/setting/pages/".concat(I,".json"));case 2:return l.abrupt("return",l.sent.data);case 3:case"end":return l.stop()}},S)})),M.apply(this,arguments)}function t(S){return _.apply(this,arguments)}function _(){return _=N()(f()().mark(function S(I){return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,L.Z.get("/setting/forms/".concat(I,".json"));case 2:return l.abrupt("return",l.sent.data);case 3:case"end":return l.stop()}},S)})),_.apply(this,arguments)}function p(S,I){return W.apply(this,arguments)}function W(){return W=N()(f()().mark(function S(I,h){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L.Z.get("/setting/".concat(I,"s/").concat(h,".json"));case 2:return a.abrupt("return",a.sent.data);case 3:case"end":return a.stop()}},S)})),W.apply(this,arguments)}},99273:function(me,G,e){e.d(G,{F:function(){return z}});var z={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(T){return localStorage.setItem("token",T)}}}}]);
