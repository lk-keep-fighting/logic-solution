(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[4186],{50410:function(be,ot,Z){"use strict";Z.d(ot,{Z:function(){return kt}});var H=Z(58709),gt=Z(87363),Qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},Ge=Qe,xt=Z(6481),it=function(ht,on){return gt.createElement(xt.Z,(0,H.Z)({},ht,{ref:on,icon:Ge}))},le=gt.forwardRef(it),kt=le},8674:function(be,ot,Z){"use strict";Z.d(ot,{Z:function(){return kt}});var H=Z(58709),gt=Z(87363),Qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},Ge=Qe,xt=Z(6481),it=function(ht,on){return gt.createElement(xt.Z,(0,H.Z)({},ht,{ref:on,icon:Ge}))},le=gt.forwardRef(it),kt=le},16020:function(be,ot,Z){"use strict";Z.d(ot,{Z:function(){return kt}});var H=Z(58709),gt=Z(87363),Qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},Ge=Qe,xt=Z(6481),it=function(ht,on){return gt.createElement(xt.Z,(0,H.Z)({},ht,{ref:on,icon:Ge}))},le=gt.forwardRef(it),kt=le},1973:function(be,ot,Z){"use strict";Z.d(ot,{Vq:function(){return ys}});var H={};Z.r(H),Z.d(H,{postorder:function(){return us},preorder:function(){return Ws}});const gt=e=>typeof e=="string",Qe=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ge=/-(\w)/g,xt=Qe(e=>e.replace(Ge,(t,n)=>n?n.toUpperCase():"")),it=Array.isArray,le=e=>typeof e=="number",kt=e=>Number.isNaN(Number(e)),sn=e=>{const t=parseFloat(e);return kt(t)?e:t},ht=e=>e!==null&&typeof e=="object",on=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>on(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=on(t[n])}),t}return e},Je=(e,t)=>{const n=e[t];return ht(n)?n.cell:n},an=(e,t,n)=>{const r=[];for(let o=0;o<e;o++)r[o]={in:0,out:0,all:0};return n&&n.forEach(o=>{const i=Je(o,"source"),a=Je(o,"target");i&&r[t[i]]&&(r[t[i]].out+=1,r[t[i]].all+=1),a&&r[t[a]]&&(r[t[a]].in+=1,r[t[a]].all+=1)}),r},At=(e,t)=>{const n={};return e.forEach(r=>{n[r.id]={in:0,out:0,all:0}}),t&&t.forEach(r=>{const o=Je(r,"source"),i=Je(r,"target");o&&(n[o].out+=1,n[o].all+=1),i&&(n[i].in+=1,n[i].all+=1)}),n},Sn=e=>{const t=[],n=e.length;for(let r=0;r<n;r+=1){t[r]=[];for(let o=0;o<n;o+=1)r===o?t[r][o]=0:e[r][o]===0||!e[r][o]?t[r][o]=1/0:t[r][o]=e[r][o]}for(let r=0;r<n;r+=1)for(let o=0;o<n;o+=1)for(let i=0;i<n;i+=1)t[o][i]>t[o][r]+t[r][i]&&(t[o][i]=t[o][r]+t[r][i]);return t},rt=(e,t)=>{const{nodes:n,edges:r}=e,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((a,s)=>{i[a.id]=s;const u=[];o.push(u)}),r==null||r.forEach(a=>{const s=Je(a,"source"),u=Je(a,"target"),c=i[s],f=i[u];c===void 0||f===void 0||(o[c][f]=1,t||(o[f][c]=1))}),o},Bn=(e,t)=>{const n=[];return e.forEach(r=>{const o=[];r.forEach(i=>{o.push(i*t)}),n.push(o)}),n},Mt=(e,t)=>{if(e&&e.children){for(let n=e.children.length-1;n>=0;n--)if(!Mt(e.children[n],t))return}return!!t(e)},En=(e,t)=>{typeof t=="function"&&Mt(e,t)},Jn=e=>{let t=1/0,n=1/0,r=-1/0,o=-1/0;return e.forEach(i=>{let a=i.size;it(a)?a.length===1&&(a=[a[0],a[0]]):le(a)?a=[a,a]:(a===void 0||isNaN(a))&&(a=[30,30]);const s=[a[0]/2,a[1]/2],u=i.x-s[0],c=i.x+s[0],f=i.y-s[1],l=i.y+s[1];t>u&&(t=u),n>f&&(n=f),r<c&&(r=c),o<l&&(o=l)}),{minX:t,minY:n,maxX:r,maxY:o}},vr=e=>{const t={x:0,y:0};e.forEach(r=>{t.x+=r.x||0,t.y+=r.y||0});const n=e.length||1;return{x:t.x/n,y:t.y/n}},oo=(e,t,n)=>{var r,o;return e==="source"?((r=n==null?void 0:n.find(i=>i.target===t.id))===null||r===void 0?void 0:r.source)||{}:((o=n==null?void 0:n.find(i=>i.source===t.id))===null||o===void 0?void 0:o.target)||{}},Ao=(e,t,n)=>{let r=[];switch(e){case"source":r=n==null?void 0:n.filter(i=>i.source===t.id).map(i=>i.target);break;case"target":r=n==null?void 0:n.filter(i=>i.target===t.id).map(i=>i.source);break;case"both":r=n==null?void 0:n.filter(i=>i.source===t.id).map(i=>i.target).concat(n==null?void 0:n.filter(i=>i.target===t.id).map(i=>i.source));break;default:break}const o=new Set(r);return Array.from(o)},Gi=(e,t,n,r,o)=>{const i=n[t]||"";let a=(r==null?void 0:r.filter(s=>s[t]===i))||[];return e==="leaf"&&(a=a.filter(s=>{var u,c;return((u=o[s.id])===null||u===void 0?void 0:u.in)===0||((c=o[s.id])===null||c===void 0?void 0:c.out)===0})),a},Pr=(e,t,n,r,o,i)=>{const{in:a,out:s}=o[t.id];let u=t,c=[];a===0?(u=oo("source",t,n),c=Ao("both",u,n).map(l=>i[l])):s===0&&(u=oo("target",t,n),c=Ao("both",u,n).map(l=>i[l])),c=c.filter(l=>o[l.id]&&(o[l.id].in===0||o[l.id].out===0));const f=Gi(e,r,t,c,o);return{coreNode:u,relativeLeafNodes:c,sameTypeLeafNodes:f}},Ye=e=>typeof e=="function",bn=(e,t,n)=>{let r;return n?r=n:le(e)?r=()=>e:r=()=>t,r},er=(e,t,n=!0)=>!t&&t!==0?r=>r.size?it(r.size)?r.size[0]>r.size[1]?r.size[0]:r.size[1]:ht(r.size)?r.size.width>r.size.height?r.size.width:r.size.height:r.size:e:Ye(t)?t:le(t)?()=>t:it(t)?()=>{if(n){const r=Math.max(...t);return isNaN(r)?e:r}return t}:ht(t)?()=>{if(n){const r=Math.max(t.width,t.height);return isNaN(r)?e:r}return[t.width,t.height]}:()=>e,Hn=new Map,Or=(e,t)=>{if(Hn.get(e)&&console.warn(`The layout with the name ${e} exists already, it will be overridden`),isObject(t)){class n extends Base{constructor(o){var i;super();const a=this,s={},u=Object.assign({},a.getDefaultCfg(),((i=t.getDefaultCfg)===null||i===void 0?void 0:i.call(t))||{});Object.assign(s,u,t,o),Object.keys(s).forEach(c=>{const f=s[c];a[c]=f})}}Hn.set(e,n)}else Hn.set(e,t);return Hn.get(e)},Un=e=>{Hn.has(e)&&Hn.delete(e)},Sr=e=>Hn.has(e)?Hn.get(e):null;class Dt{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class Tn extends Dt{constructor(t){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const t=this,{nodes:n,edges:r,begin:o}=t,i=n.length;if(i===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r};if(i===1)return n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r};let{sortBy:a,width:s,height:u}=t;const{condense:c,preventOverlapPadding:f,preventOverlap:l,nodeSpacing:d,nodeSize:h}=t,v=[];n.forEach(g=>{v.push(g)});const m={};if(v.forEach((g,b)=>{m[g.id]=b}),(a==="degree"||!gt(a)||v[0][a]===void 0)&&(a="degree",kt(n[0].degree))){const g=an(v.length,m,r);v.forEach((b,_)=>{b.degree=g[_].all})}v.sort((g,b)=>b[a]-g[a]),!s&&typeof window!="undefined"&&(s=window.innerWidth),!u&&typeof window!="undefined"&&(u=window.innerHeight);const y=t.rows,E=t.cols!=null?t.cols:t.columns;if(t.cells=i,y!=null&&E!=null?(t.rows=y,t.cols=E):y!=null&&E==null?(t.rows=y,t.cols=Math.ceil(t.cells/t.rows)):y==null&&E!=null?(t.cols=E,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells){const g=t.small(),b=t.large();(g-1)*b>=t.cells?t.small(g-1):(b-1)*g>=t.cells&&t.large(b-1)}else for(;t.cols*t.rows<t.cells;){const g=t.small(),b=t.large();(b+1)*g>=t.cells?t.large(b+1):t.small(g+1)}if(t.cellWidth=s/t.cols,t.cellHeight=u/t.rows,c&&(t.cellWidth=0,t.cellHeight=0),l||d){const g=er(10,d),b=er(30,h,!1);v.forEach(_=>{(!_.x||!_.y)&&(_.x=0,_.y=0);const S=b(_)||30;let V,fe;it(S)?(V=S[0],fe=S[1]):(V=S,fe=S);const ne=g!==void 0?g(_):f,K=V+ne,J=fe+ne;t.cellWidth=Math.max(t.cellWidth,K),t.cellHeight=Math.max(t.cellHeight,J)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(let g=0;g<v.length;g++){const b=v[g];let _;if(t.position&&(_=t.position(b)),_&&(_.row!==void 0||_.col!==void 0)){const S={row:_.row,col:_.col};if(S.col===void 0)for(S.col=0;t.used(S.row,S.col);)S.col++;else if(S.row===void 0)for(S.row=0;t.used(S.row,S.col);)S.row++;t.id2manPos[b.id]=S,t.use(S.row,S.col)}t.getPos(b)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:r,nodes:v}}small(t){const n=this;let r;const o=n.rows||5,i=n.cols||5;return t==null?r=Math.min(o,i):Math.min(o,i)===n.rows?n.rows=t:n.cols=t,r}large(t){const n=this;let r;const o=n.rows||5,i=n.cols||5;return t==null?r=Math.max(o,i):Math.max(o,i)===n.rows?n.rows=t:n.cols=t,r}used(t,n){return this.cellUsed[`c-${t}-${n}`]||!1}use(t,n){const r=this;r.cellUsed[`c-${t}-${n}`]=!0}moveToNextCell(){const t=this,n=t.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)}getPos(t){const n=this,{begin:r,cellWidth:o,cellHeight:i}=n;let a,s;const u=n.id2manPos[t.id];if(u)a=u.col*o+o/2+r[0],s=u.row*i+i/2+r[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();a=n.col*o+o/2+r[0],s=n.row*i+i/2+r[1],n.use(n.row,n.col),n.moveToNextCell()}t.x=a,t.y=s}getType(){return"grid"}}const tr=(e,t)=>{let n;return e?le(e)?n=r=>e:n=e:n=r=>t||1,n};class Vn extends Dt{constructor(t){super(),this.maxIteration=500,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.collideStrength=1,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.animate=!0,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){var t,n;const r=this,o=r.nodes;if(r.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(r.timeInterval),!o||o.length===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const i=r.center;if(o.length===1){o[0].x=i[0],o[0].y=i[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const a={},s={};o.forEach((l,d)=>{le(l.x)||(l.x=Math.random()*r.width),le(l.y)||(l.y=Math.random()*r.height),a[l.id]=l,s[l.id]=d}),r.nodeMap=a,r.nodeIdxMap=s,r.linkDistance=tr(r.linkDistance,1),r.nodeStrength=tr(r.nodeStrength,1),r.edgeStrength=tr(r.edgeStrength,1);const u=r.nodeSize;let c;if(r.preventOverlap){const l=r.nodeSpacing;let d;le(l)?d=()=>l:Ye(l)?d=l:d=()=>0,u?it(u)?c=h=>Math.max(u[0],u[1])+d(h):c=h=>u+d(h):c=h=>h.size?it(h.size)?Math.max(h.size[0],h.size[1])+d(h):ht(h.size)?Math.max(h.size.width,h.size.height)+d(h):h.size+d(h):10+d(h)}r.nodeSize=c;const f=r.edges;r.degrees=an(o.length,r.nodeIdxMap,f),r.getMass||(r.getMass=l=>l.mass||r.degrees[r.nodeIdxMap[l.id]].all||1),r.run()}run(){var t;const n=this,{maxIteration:r,nodes:o,workerEnabled:i,minMovement:a,animate:s}=n;if(o)if(i||!s){for(let u=0;u<r;u++){const c=n.runOneStep(u);if(n.reachMoveThreshold(o,c,a))break}(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window=="undefined")return;let u=0;this.timeInterval=window.setInterval(()=>{var c,f;if(!o)return;const l=n.runOneStep(u)||[];n.reachMoveThreshold(o,l,a)&&((c=n.onLayoutEnd)===null||c===void 0||c.call(n),window.clearInterval(n.timeInterval)),u++,u>=r&&((f=n.onLayoutEnd)===null||f===void 0||f.call(n),window.clearInterval(n.timeInterval))},0)}}reachMoveThreshold(t,n,r){let o=0;return t.forEach((i,a)=>{const s=i.x-n[a].x,u=i.y-n[a].y;o+=Math.sqrt(s*s+u*u)}),o/=t.length,o<r}runOneStep(t){var n;const r=this,{nodes:o,edges:i}=r,a=[],s=[];if(!o)return;o.forEach((f,l)=>{a[2*l]=0,a[2*l+1]=0,s[2*l]=0,s[2*l+1]=0}),r.calRepulsive(a,o),i&&r.calAttractive(a,i),r.calGravity(a,o);const u=Math.max(.02,r.interval-t*.002);r.updateVelocity(a,s,u,o);const c=[];return o.forEach(f=>{c.push({x:f.x,y:f.y})}),r.updatePosition(s,u,o),(n=r.tick)===null||n===void 0||n.call(r),c}calRepulsive(t,n){const r=this,{getMass:o,factor:i,coulombDisScale:a,preventOverlap:s,collideStrength:u=1}=r,c=r.nodeStrength,f=r.nodeSize;n.forEach((l,d)=>{const h=o?o(l):1;n.forEach((v,m)=>{if(d>=m)return;let y=l.x-v.x,E=l.y-v.y;y===0&&E===0&&(y=Math.random()*.01,E=Math.random()*.01);const g=y*y+E*E,b=Math.sqrt(g),_=(b+.1)*a,S=y/b,V=E/b,fe=(c(l)+c(v))*.5*i/(_*_),ne=o?o(v):1;if(t[2*d]+=S*fe,t[2*d+1]+=V*fe,t[2*m]-=S*fe,t[2*m+1]-=V*fe,s&&(f(l)+f(v))/2>b){const K=u*(c(l)+c(v))*.5/g;t[2*d]+=S*K/h,t[2*d+1]+=V*K/h,t[2*m]-=S*K/ne,t[2*m+1]-=V*K/ne}})})}calAttractive(t,n){const r=this,{nodeMap:o,nodeIdxMap:i,linkDistance:a,edgeStrength:s}=r,u=r.nodeSize,c=r.getMass;n.forEach((f,l)=>{const d=Je(f,"source"),h=Je(f,"target"),v=o[d],m=o[h];let y=m.x-v.x,E=m.y-v.y;y===0&&E===0&&(y=Math.random()*.01,E=Math.random()*.01);const g=Math.sqrt(y*y+E*E),b=y/g,_=E/g,fe=((a(f,v,m)||1+(u(v)+u(m)||0)/2)-g)*s(f),ne=i[d],K=i[h],J=c?c(v):1,ge=c?c(m):1;t[2*ne]-=b*fe/J,t[2*ne+1]-=_*fe/J,t[2*K]+=b*fe/ge,t[2*K+1]+=_*fe/ge})}calGravity(t,n){const r=this,o=r.center,i=r.gravity,a=r.degrees,s=n.length;for(let u=0;u<s;u++){const c=n[u];let f=c.x-o[0],l=c.y-o[1],d=i;if(r.getCenter){const h=r.getCenter(c,a[u].all);h&&le(h[0])&&le(h[1])&&le(h[2])&&(f=c.x-h[0],l=c.y-h[1],d=h[2])}d&&(t[2*u]-=d*f,t[2*u+1]-=d*l)}}updateVelocity(t,n,r,o){const i=this,a=r*i.damping;o.forEach((s,u)=>{let c=t[2*u]*a||.01,f=t[2*u+1]*a||.01;const l=Math.sqrt(c*c+f*f);if(l>i.maxSpeed){const d=i.maxSpeed/l;c=d*c,f=d*f}n[2*u]=c,n[2*u+1]=f})}updatePosition(t,n,r){r.forEach((o,i)=>{if(le(o.fx)&&le(o.fy)){o.x=o.fx,o.y=o.fy;return}const a=t[2*i]*n,s=t[2*i+1]*n;o.x+=a,o.y+=s})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"gForce"}}function ir(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return pr(this.cover(t,n),t,n,e)}function pr(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var o,i=e._root,a={data:r},s=e._x0,u=e._y0,c=e._x1,f=e._y1,l,d,h,v,m,y,E,g;if(!i)return e._root=a,e;for(;i.length;)if((m=t>=(l=(s+c)/2))?s=l:c=l,(y=n>=(d=(u+f)/2))?u=d:f=d,o=i,!(i=i[E=y<<1|m]))return o[E]=a,e;if(h=+e._x.call(null,i.data),v=+e._y.call(null,i.data),t===h&&n===v)return a.next=i,o?o[E]=a:e._root=a,e;do o=o?o[E]=new Array(4):e._root=new Array(4),(m=t>=(l=(s+c)/2))?s=l:c=l,(y=n>=(d=(u+f)/2))?u=d:f=d;while((E=y<<1|m)===(g=(v>=d)<<1|h>=l));return o[g]=i,o[E]=a,e}function rs(e){var t,n,r=e.length,o,i,a=new Array(r),s=new Array(r),u=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<r;++n)isNaN(o=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=o,s[n]=i,o<u&&(u=o),o>f&&(f=o),i<c&&(c=i),i>l&&(l=i));if(u>f||c>l)return this;for(this.cover(u,c).cover(f,l),n=0;n<r;++n)pr(this,a[n],s[n],e[n]);return this}function ya(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var a=o-n||1,s=this._root,u,c;n>e||e>=o||r>t||t>=i;)switch(c=(t<r)<<1|e<n,u=new Array(4),u[c]=s,s=u,a*=2,c){case 0:o=n+a,i=r+a;break;case 1:n=o-a,i=r+a;break;case 2:o=n+a,r=i-a;break;case 3:n=o-a,r=i-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this}function os(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ea(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Tr(e,t,n,r,o){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=o}function ba(e,t,n){var r,o=this._x0,i=this._y0,a,s,u,c,f=this._x1,l=this._y1,d=[],h=this._root,v,m;for(h&&d.push(new Tr(h,o,i,f,l)),n==null?n=1/0:(o=e-n,i=t-n,f=e+n,l=t+n,n*=n);v=d.pop();)if(!(!(h=v.node)||(a=v.x0)>f||(s=v.y0)>l||(u=v.x1)<o||(c=v.y1)<i))if(h.length){var y=(a+u)/2,E=(s+c)/2;d.push(new Tr(h[3],y,E,u,c),new Tr(h[2],a,E,y,c),new Tr(h[1],y,s,u,E),new Tr(h[0],a,s,y,E)),(m=(t>=E)<<1|e>=y)&&(v=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=v)}else{var g=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),_=g*g+b*b;if(_<n){var S=Math.sqrt(n=_);o=e-S,i=t-S,f=e+S,l=t+S,r=h.data}}return r}function si(e){if(isNaN(f=+this._x.call(null,e))||isNaN(l=+this._y.call(null,e)))return this;var t,n=this._root,r,o,i,a=this._x0,s=this._y0,u=this._x1,c=this._y1,f,l,d,h,v,m,y,E;if(!n)return this;if(n.length)for(;;){if((v=f>=(d=(a+u)/2))?a=d:u=d,(m=l>=(h=(s+c)/2))?s=h:c=h,t=n,!(n=n[y=m<<1|v]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,E=y)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(i=n.next)&&delete n.next,o?(i?o.next=i:delete o.next,this):t?(i?t[y]=i:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[E]=n:this._root=n),this):(this._root=i,this)}function Pi(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function ui(){return this._root}function xa(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ci(e){var t=[],n,r=this._root,o,i,a,s,u;for(r&&t.push(new Tr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,i=n.x0,a=n.y0,s=n.x1,u=n.y1)&&r.length){var c=(i+s)/2,f=(a+u)/2;(o=r[3])&&t.push(new Tr(o,c,f,s,u)),(o=r[2])&&t.push(new Tr(o,i,f,c,u)),(o=r[1])&&t.push(new Tr(o,c,a,s,f)),(o=r[0])&&t.push(new Tr(o,i,a,c,f))}return this}function fi(e){var t=[],n=[],r;for(this._root&&t.push(new Tr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var o=r.node;if(o.length){var i,a=r.x0,s=r.y0,u=r.x1,c=r.y1,f=(a+u)/2,l=(s+c)/2;(i=o[0])&&t.push(new Tr(i,a,s,f,l)),(i=o[1])&&t.push(new Tr(i,f,s,u,l)),(i=o[2])&&t.push(new Tr(i,a,l,f,c)),(i=o[3])&&t.push(new Tr(i,f,l,u,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function mr(e){return e[0]}function io(e){return arguments.length?(this._x=e,this):this._x}function li(e){return e[1]}function _a(e){return arguments.length?(this._y=e,this):this._y}function di(e,t,n){var r=new I(t==null?mr:t,n==null?li:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function I(e,t,n,r,o,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function hi(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var kn=di.prototype=I.prototype;kn.copy=function(){var e=new I(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=hi(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var o=0;o<4;++o)(r=t.source[o])&&(r.length?n.push({source:r,target:t.target[o]=new Array(4)}):t.target[o]=hi(r));return e},kn.add=ir,kn.addAll=rs,kn.cover=ya,kn.data=os,kn.extent=Ea,kn.find=ba,kn.remove=si,kn.removeAll=Pi,kn.root=ui,kn.size=xa,kn.visit=ci,kn.visitAfter=fi,kn.x=io,kn.y=_a;const Bo=.81,Fi=.1;function ao(e,t,n,r,o){const i=n/r,a=e.map((u,c)=>{const f=t[u.id],{data:l,x:d,y:h,size:v}=f,{nodeStrength:m}=l.layout.force;return{x:d,y:h,size:v,index:c,vx:0,vy:0,weight:i*m}}),s=di(a,u=>u.x,u=>u.y).visitAfter(wa);return a.forEach(u=>{Sa(u,s)}),a.map((u,c)=>{const f=t[e[c].id],{mass:l=1}=f.data.layout.force;o[2*c]=u.vx/l,o[2*c+1]=u.vy/l}),o}function wa(e){let t=0,n=0,r=0;if(e.length){for(let o=0;o<4;o++){const i=e[o];i&&i.weight&&(t+=i.weight,n+=i.x*i.weight,r+=i.y*i.weight)}e.x=n/t,e.y=r/t,e.weight=t}else{const o=e;e.x=o.data.x,e.y=o.data.y,e.weight=o.data.weight}}const po=(e,t,n,r,o,i)=>{const a=i.x-e.x||Fi,s=i.y-e.y||Fi,u=r-t,c=a*a+s*s,f=Math.sqrt(c)*c;if(u*u*Bo<c){const l=e.weight/f;return i.vx+=a*l,i.vy+=s*l,!0}if(e.length)return!1;if(e.data!==i){const l=e.data.weight/f;i.vx+=a*l,i.vy+=s*l}};function Sa(e,t){t.visit((n,r,o,i,a)=>po(n,r,o,i,a,e))}const zi=(e,t)=>{let n;return e?le(e)?n=r=>e:n=e:n=r=>t||1,n};class is extends Dt{constructor(t){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=500,this.minMovement=.4,this.interval=.02,this.factor=1,this.linkDistance=200,this.gravity=0,this.clusterNodeStrength=20,this.preventOverlap=!0,this.distanceThresholdMode="mean",this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.judgingDistance=0,this.centripetalOptions={leaf:2,single:2,others:1,center:r=>({x:this.width/2,y:this.height/2})};const{getMass:n}=t;this.propsGetMass=n,this.updateCfg(t)}getCentripetalOptions(){const{leafCluster:t,clustering:n,nodeClusterBy:r,nodes:o,nodeMap:i,clusterNodeStrength:a}=this,s=h=>typeof a=="function"?a(h):a;let u={},c;if(t){c=this.getSameTypeLeafMap()||{};const h=Array.from(new Set(o==null?void 0:o.map(v=>v[r])))||[];u={single:100,leaf:(v,m,y)=>{const{relativeLeafNodes:E,sameTypeLeafNodes:g}=c[v.id]||{};return(g==null?void 0:g.length)===(E==null?void 0:E.length)||(h==null?void 0:h.length)===1?1:s(v)},others:1,center:(v,m,y)=>{var E;const{degree:g}=((E=v.data)===null||E===void 0?void 0:E.layout)||{};if(!g)return{x:100,y:100};let b;if(g===1){const{sameTypeLeafNodes:_=[]}=c[v.id]||{};_.length===1?b=void 0:_.length>1&&(b=vr(_))}else b=void 0;return{x:b==null?void 0:b.x,y:b==null?void 0:b.y}}}}if(n){c||(c=this.getSameTypeLeafMap());const h=Array.from(new Set(o.map((m,y)=>m[r]))).filter(m=>m!==void 0),v={};h.forEach(m=>{const y=o.filter(E=>E[r]===m).map(E=>i[E.id]);v[m]=vr(y)}),u={single:m=>s(m),leaf:m=>s(m),others:m=>s(m),center:(m,y,E)=>{const g=v[m[r]];return{x:g==null?void 0:g.x,y:g==null?void 0:g.y}}}}this.centripetalOptions=Object.assign(Object.assign({},this.centripetalOptions),u);const{leaf:f,single:l,others:d}=this.centripetalOptions;f&&typeof f!="function"&&(this.centripetalOptions.leaf=()=>f),l&&typeof l!="function"&&(this.centripetalOptions.single=()=>l),d&&typeof d!="function"&&(this.centripetalOptions.others=()=>d)}updateCfg(t){t&&Object.assign(this,t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){const t=this;t.stop();const{nodes:n,edges:r,defSpringLen:o}=t;if(t.judgingDistance=0,!n||n.length===0){t.onLayoutEnd([]);return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd([Object.assign({},n[0])]);return}t.degreesMap=At(n,r),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=f=>{let l=1;le(f.mass)&&(l=f.mass);const d=t.degreesMap[f.id].all;return!d||d<5?l:d*5*l};const a=t.nodeSize;let s;if(t.preventOverlap){const f=t.nodeSpacing;let l;le(f)?l=()=>f:Ye(f)?l=f:l=()=>0,a?it(a)?s=d=>Math.max(a[0],a[1])+l(d):s=d=>a+l(d):s=d=>d.size?it(d.size)?Math.max(d.size[0],d.size[1])+l(d):ht(d.size)?Math.max(d.size.width,d.size.height)+l(d):d.size+l(d):10+l(d)}t.nodeSize=s,t.linkDistance=zi(t.linkDistance,1),t.nodeStrength=zi(t.nodeStrength,1),t.edgeStrength=zi(t.edgeStrength,1);const u={},c={};n.forEach((f,l)=>{le(f.x)||(f.x=Math.random()*t.width),le(f.y)||(f.y=Math.random()*t.height);const d=t.degreesMap[f.id];u[f.id]=Object.assign(Object.assign({},f),{data:Object.assign(Object.assign({},f.data),{size:t.nodeSize(f)||30,layout:{inDegree:d.in,outDegree:d.out,degree:d.all,tDegree:d.in,sDegree:d.out,force:{mass:t.getMass(f),nodeStrength:t.nodeStrength(f,r)}}})}),c[f.id]=l}),t.nodeMap=u,t.nodeIdxMap=c,t.edgeInfos=[],r==null||r.forEach(f=>{const l=u[f.source],d=u[f.target];!l||!d?elf.edgeInfos.push({}):t.edgeInfos.push({edgeStrength:t.edgeStrength(f),linkDistance:o?o(Object.assign(Object.assign({},f),{source:l,target:d}),l,d):t.linkDistance(f,l,d)||1+(a(l)+a(l)||0)/2})}),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||(()=>{}),t.run()}run(){const t=this,{maxIteration:n,nodes:r,edges:o,workerEnabled:i,minMovement:a,animate:s,nodeMap:u,height:c}=t;if(t.currentMinY=0,t.currentMaxY=c,!r)return;const f=[];if(r.forEach((h,v)=>{f[2*v]=0,f[2*v+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){const h={};o.forEach(v=>{const{source:m,target:y}=v;h[m]=h[m]||[],h[m].push(v),h[y]=h[y]||[],h[y].push(v)}),this.relatedEdges=h}const l=n;if(i||!s){let h=0;for(let v=0;(t.judgingDistance>a||v<1)&&v<l;v++)h=v,t.runOneStep(v,f);t.onLayoutEnd(Object.values(u))}else{if(typeof window=="undefined")return;let h=0;this.timeInterval=window.setInterval(()=>{r&&(t.runOneStep(h,f),h++,(h>=l||t.judgingDistance<a)&&(t.onLayoutEnd(Object.values(u)),window.clearInterval(t.timeInterval)))},0)}}runOneStep(t,n){var r;const o=this,{nodes:i,edges:a,nodeMap:s,monitor:u}=o,c=[];if(!(i!=null&&i.length))return;o.calRepulsive(c),a&&o.calAttractive(c),o.calGravity(c),o.attractToSide(c);const f=o.interval;if(o.updateVelocity(c,n,f),o.updatePosition(n,f),(r=o.tick)===null||r===void 0||r.call(o),u){const l=this.calTotalEnergy(c);u({energy:l,nodes:i,edges:a,iterations:t})}}calTotalEnergy(t){const{nodes:n,nodeMap:r}=this;if(!(n!=null&&n.length))return 0;let o=0;return n.forEach((i,a)=>{const s=t[2*a],u=t[2*a+1],c=s*s+u*u,{mass:f=1}=r[i.id].data.layout.force;o+=f*c*.5}),o}calRepulsive(t){const n=this,{nodes:r,nodeMap:o,factor:i,coulombDisScale:a}=n,s=n.nodeSize;ao(r,o,i,a*a,t)}calAttractive(t){const n=this,{edges:r,nodeMap:o,nodeIdxMap:i,edgeInfos:a}=n,s=n.nodeSize;r.forEach((u,c)=>{const f=Je(u,"source"),l=Je(u,"target"),d=o[f],h=o[l];if(!d||!h)return;let v=h.x-d.x,m=h.y-d.y;!v&&!m&&(v=Math.random()*.01,m=Math.random()*.01);const y=Math.sqrt(v*v+m*m),E=v/y,g=m/y,{linkDistance:b=200,edgeStrength:_=200}=a[c]||{},V=(b-y)*_,fe=d.data.layout.force.mass||1,ne=h.data.layout.force.mass||1,K=1/fe,J=1/ne,ge=E*V,G=g*V,Ee=2*i[f],ke=2*i[l];t[Ee]-=ge*K,t[Ee+1]-=G*K,t[ke]+=ge*J,t[ke+1]+=G*J})}calGravity(t){var n;const r=this,{nodes:o,edges:i=[],nodeMap:a,width:s,height:u,center:c,gravity:f,degreesMap:l,centripetalOptions:d}=r;if(!o)return;const h=o.length;for(let v=0;v<h;v++){const m=2*v,y=a[o[v].id],{mass:E=1}=y.data.layout.force;let g=0,b=0,_=f;const{in:S,out:V,all:fe}=l[y.id],ne=(n=r.getCenter)===null||n===void 0?void 0:n.call(r,y,fe);if(ne){const[K,J,ge]=ne;g=y.x-K,b=y.y-J,_=ge}else g=y.x-c[0],b=y.y-c[1];if(_&&(t[m]-=_*g/E,t[m+1]-=_*b/E),d){const{leaf:K,single:J,others:ge,center:G}=d,{x:Ee,y:ke,centerStrength:Ue}=(G==null?void 0:G(y,o,i,s,u))||{x:0,y:0,centerStrength:0};if(!le(Ee)||!le(ke))continue;const pt=(y.x-Ee)/E,Ke=(y.y-ke)/E;if(Ue&&(t[m]-=Ue*pt,t[m+1]-=Ue*Ke),fe===0){const dt=J(y);if(!dt)continue;t[m]-=dt*pt,t[m+1]-=dt*Ke;continue}if(S===0||V===0){const dt=K(y,o,i);if(!dt)continue;t[m]-=dt*pt,t[m+1]-=dt*Ke;continue}const bt=ge(y);if(!bt)continue;t[m]-=bt*pt,t[m+1]-=bt*Ke}}}attractToSide(t){const{defSideCoe:n,height:r,nodes:o,relatedEdges:i,currentMinY:a=0,currentMaxY:s=this.height}=this;!n||typeof n!="function"||!(o!=null&&o.length)||o.forEach((u,c)=>{const f=n(u,i[u.id]||[]);if(f===0)return;const l=f<0?a:s,d=Math.abs(f);t[2*c+1]-=d*(u.y-l)})}updateVelocity(t,n,r){const o=this,{nodes:i,damping:a,maxSpeed:s}=o;i!=null&&i.length&&i.forEach((u,c)=>{let f=(n[2*c]+t[2*c]*r)*a||.01,l=(n[2*c+1]+t[2*c+1]*r)*a||.01;const d=Math.sqrt(f*f+l*l);if(d>s){const h=s/d;f=h*f,l=h*l}n[2*c]=f,n[2*c+1]=l})}updatePosition(t,n){const r=this,{nodes:o,distanceThresholdMode:i,nodeMap:a}=r;if(!(o!=null&&o.length)){this.judgingDistance=0;return}let s=0;i==="max"?r.judgingDistance=-1/0:i==="min"&&(r.judgingDistance=1/0);let u=1/0,c=-1/0;o.forEach((f,l)=>{const d=a[f.id];if(le(f.fx)&&le(f.fy)){f.x=f.fx,f.y=f.fy,d.x=f.x,d.y=f.y;return}const h=t[2*l]*n,v=t[2*l+1]*n;f.x+=h,f.y+=v,d.x=f.x,d.y=f.y,f.y<u&&(u=f.y),f.y>c&&(c=f.y);const m=Math.sqrt(h*h+v*v);switch(i){case"max":r.judgingDistance<m&&(r.judgingDistance=m);break;case"min":r.judgingDistance>m&&(r.judgingDistance=m);break;default:s=s+m;break}}),this.currentMinY=u,this.currentMaxY=c,(!i||i==="mean")&&(r.judgingDistance=s/o.length)}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"force2"}getSameTypeLeafMap(){const{nodeClusterBy:t,nodes:n,edges:r,nodeMap:o,degreesMap:i}=this;if(!(n!=null&&n.length))return;const a={};return n.forEach((s,u)=>{i[s.id].all===1&&(a[s.id]=Pr("leaf",s,r,t,i,o))}),a}}function gr(e){return function(){return e}}function Rn(e){return(e()-.5)*1e-6}var mo={value:function(){}};function Vr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new go(n)}function go(e){this._=e}function qc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}go.prototype=Vr.prototype={constructor:go,on:function(t,n){var r=this._,o=qc(t+"",r),i,a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((i=(t=o[a]).type)&&(i=Pu(r[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<s;)if(i=(t=o[a]).type)r[i]=ks(r[i],t.name,n);else if(n==null)for(i in r)r[i]=ks(r[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new go(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var r=new Array(i),o=0,i,a;o<i;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],o=0,i=a.length;o<i;++o)a[o].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,a=o.length;i<a;++i)o[i].value.apply(n,r)}};function Pu(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function ks(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=mo,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Gs=Vr,Uo=0,vi=0,Bi=0,Ps=1e3,Ir,Ui,Ta=0,Vo=0,Ia=0,Vi=typeof performance=="object"&&performance.now?performance:Date,Fs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zs(){return Vo||(Fs(Fu),Vo=Vi.now()+Ia)}function Fu(){Vo=0}function Xt(){this._call=this._time=this._next=null}Xt.prototype=fo.prototype={constructor:Xt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zs():+n)+(t==null?0:+t),!this._next&&Ui!==this&&(Ui?Ui._next=this:Ir=this,Ui=this),this._call=e,this._time=n,as()},stop:function(){this._call&&(this._call=null,this._time=1/0,as())}};function fo(e,t,n){var r=new Xt;return r.restart(e,t,n),r}function $n(){zs(),++Uo;for(var e=Ir,t;e;)(t=Vo-e._time)>=0&&e._call.call(null,t),e=e._next;--Uo}function Bs(){Vo=(Ta=Vi.now())+Ia,Uo=vi=0;try{$n()}finally{Uo=0,Qc(),Vo=0}}function Us(){var e=Vi.now(),t=e-Ta;t>Ps&&(Ia-=t,Ta=e)}function Qc(){for(var e,t=Ir,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ir=n);Ui=e,as(r)}function as(e){if(!Uo){vi&&(vi=clearTimeout(vi));var t=e-Vo;t>24?(e<1/0&&(vi=setTimeout(Bs,e-Vi.now()-Ia)),Bi&&(Bi=clearInterval(Bi))):(Bi||(Ta=Vi.now(),Bi=setInterval(Us,Ps)),Uo=1,Fs(Bs))}}var zu=1664525,Bu=1013904223,Vs=4294967296;function Uu(){var e=1;return function(){return(e=(zu*e+Bu)%Vs)/Vs}}function Vu(e){return e.x}function $u(e){return e.y}var Xu=10,Wu=Math.PI*(3-Math.sqrt(5));function ss(e){var t,n=1,r=.001,o=1-Math.pow(r,1/300),i=0,a=.6,s=new Map,u=fo(l),c=Gs("tick","end"),f=Uu();e==null&&(e=[]);function l(){d(),c.call("tick",t),n<r&&(u.stop(),c.call("end",t))}function d(m){var y,E=e.length,g;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(i-n)*o,s.forEach(function(_){_(n)}),y=0;y<E;++y)g=e[y],g.fx==null?g.x+=g.vx*=a:(g.x=g.fx,g.vx=0),g.fy==null?g.y+=g.vy*=a:(g.y=g.fy,g.vy=0);return t}function h(){for(var m=0,y=e.length,E;m<y;++m){if(E=e[m],E.index=m,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),isNaN(E.x)||isNaN(E.y)){var g=Xu*Math.sqrt(.5+m),b=m*Wu;E.x=g*Math.cos(b),E.y=g*Math.sin(b)}(isNaN(E.vx)||isNaN(E.vy))&&(E.vx=E.vy=0)}}function v(m){return m.initialize&&m.initialize(e,f),m}return h(),t={tick:d,restart:function(){return u.restart(l),t},stop:function(){return u.stop(),t},nodes:function(y){return arguments.length?(e=y,h(),s.forEach(v),t):e},alpha:function(y){return arguments.length?(n=+y,t):n},alphaMin:function(y){return arguments.length?(r=+y,t):r},alphaDecay:function(y){return arguments.length?(o=+y,t):+o},alphaTarget:function(y){return arguments.length?(i=+y,t):i},velocityDecay:function(y){return arguments.length?(a=1-y,t):1-a},randomSource:function(y){return arguments.length?(f=y,s.forEach(v),t):f},force:function(y,E){return arguments.length>1?(E==null?s.delete(y):s.set(y,v(E)),t):s.get(y)},find:function(y,E,g){var b=0,_=e.length,S,V,fe,ne,K;for(g==null?g=1/0:g*=g,b=0;b<_;++b)ne=e[b],S=y-ne.x,V=E-ne.y,fe=S*S+V*V,fe<g&&(K=ne,g=fe);return K},on:function(y,E){return arguments.length>1?(c.on(y,E),t):c.on(y)}}}function $s(){var e,t,n,r,o=gr(-30),i,a=1,s=1/0,u=.81;function c(h){var v,m=e.length,y=di(e,Vu,$u).visitAfter(l);for(r=h,v=0;v<m;++v)t=e[v],y.visit(d)}function f(){if(e){var h,v=e.length,m;for(i=new Array(v),h=0;h<v;++h)m=e[h],i[m.index]=+o(m,h,e)}}function l(h){var v=0,m,y,E=0,g,b,_;if(h.length){for(g=b=_=0;_<4;++_)(m=h[_])&&(y=Math.abs(m.value))&&(v+=m.value,E+=y,g+=y*m.x,b+=y*m.y);h.x=g/E,h.y=b/E}else{m=h,m.x=m.data.x,m.y=m.data.y;do v+=i[m.data.index];while(m=m.next)}h.value=v}function d(h,v,m,y){if(!h.value)return!0;var E=h.x-t.x,g=h.y-t.y,b=y-v,_=E*E+g*g;if(b*b/u<_)return _<s&&(E===0&&(E=Rn(n),_+=E*E),g===0&&(g=Rn(n),_+=g*g),_<a&&(_=Math.sqrt(a*_)),t.vx+=E*h.value*r/_,t.vy+=g*h.value*r/_),!0;if(h.length||_>=s)return;(h.data!==t||h.next)&&(E===0&&(E=Rn(n),_+=E*E),g===0&&(g=Rn(n),_+=g*g),_<a&&(_=Math.sqrt(a*_)));do h.data!==t&&(b=i[h.data.index]*r/_,t.vx+=E*b,t.vy+=g*b);while(h=h.next)}return c.initialize=function(h,v){e=h,n=v,f()},c.strength=function(h){return arguments.length?(o=typeof h=="function"?h:gr(+h),f(),c):o},c.distanceMin=function(h){return arguments.length?(a=h*h,c):Math.sqrt(a)},c.distanceMax=function(h){return arguments.length?(s=h*h,c):Math.sqrt(s)},c.theta=function(h){return arguments.length?(u=h*h,c):Math.sqrt(u)},c}function Xs(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function o(){var i,a=n.length,s,u=0,c=0;for(i=0;i<a;++i)s=n[i],u+=s.x,c+=s.y;for(u=(u/a-e)*r,c=(c/a-t)*r,i=0;i<a;++i)s=n[i],s.x-=u,s.y-=c}return o.initialize=function(i){n=i},o.x=function(i){return arguments.length?(e=+i,o):e},o.y=function(i){return arguments.length?(t=+i,o):t},o.strength=function(i){return arguments.length?(r=+i,o):r},o}var Hu=Z(31759),Ar=Z.n(Hu);function Zu(e){return e.index}function A(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function D(e){var t=Zu,n=l,r,o=gr(30),i,a,s,u,c,f=1;e==null&&(e=[]);function l(y){return 1/Math.min(s[y.source.index],s[y.target.index])}function d(y){for(var E=0,g=e.length;E<f;++E)for(var b=0,_,S,V,fe,ne,K,J;b<g;++b)_=e[b],S=_.source,V=_.target,fe=V.x+V.vx-S.x-S.vx||Rn(c),ne=V.y+V.vy-S.y-S.vy||Rn(c),K=Math.sqrt(fe*fe+ne*ne),K=(K-i[b])/K*y*r[b],fe*=K,ne*=K,V.vx-=fe*(J=u[b]),V.vy-=ne*J,S.vx+=fe*(J=1-J),S.vy+=ne*J}function h(){if(a){var y,E=a.length,g=e.length,b=new Map(a.map(function(S,V){return[t(S,V,a),S]})),_;for(y=0,s=new Array(E);y<g;++y)_=e[y],_.index=y,Ar()(_.source)!=="object"&&(_.source=A(b,_.source)),Ar()(_.target)!=="object"&&(_.target=A(b,_.target)),s[_.source.index]=(s[_.source.index]||0)+1,s[_.target.index]=(s[_.target.index]||0)+1;for(y=0,u=new Array(g);y<g;++y)_=e[y],u[y]=s[_.source.index]/(s[_.source.index]+s[_.target.index]);r=new Array(g),v(),i=new Array(g),m()}}function v(){if(a)for(var y=0,E=e.length;y<E;++y)r[y]=+n(e[y],y,e)}function m(){if(a)for(var y=0,E=e.length;y<E;++y)i[y]=+o(e[y],y,e)}return d.initialize=function(y,E){a=y,c=E,h()},d.links=function(y){return arguments.length?(e=y,h(),d):e},d.id=function(y){return arguments.length?(t=y,d):t},d.iterations=function(y){return arguments.length?(f=+y,d):f},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:gr(+y),v(),d):n},d.distance=function(y){return arguments.length?(o=typeof y=="function"?y:gr(+y),m(),d):o},d}function we(e){return e.x+e.vx}function Te(e){return e.y+e.vy}function Ne(e){var t,n,r,o=1,i=1;typeof e!="function"&&(e=gr(e==null?1:+e));function a(){for(var c,f=t.length,l,d,h,v,m,y,E=0;E<i;++E)for(l=di(t,we,Te).visitAfter(s),c=0;c<f;++c)d=t[c],m=n[d.index],y=m*m,h=d.x+d.vx,v=d.y+d.vy,l.visit(g);function g(b,_,S,V,fe){var ne=b.data,K=b.r,J=m+K;if(ne){if(ne.index>d.index){var ge=h-ne.x-ne.vx,G=v-ne.y-ne.vy,Ee=ge*ge+G*G;Ee<J*J&&(ge===0&&(ge=Rn(r),Ee+=ge*ge),G===0&&(G=Rn(r),Ee+=G*G),Ee=(J-(Ee=Math.sqrt(Ee)))/Ee*o,d.vx+=(ge*=Ee)*(J=(K*=K)/(y+K)),d.vy+=(G*=Ee)*J,ne.vx-=ge*(J=1-J),ne.vy-=G*J)}return}return _>h+J||V<h-J||S>v+J||fe<v-J}}function s(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function u(){if(t){var c,f=t.length,l;for(n=new Array(f),c=0;c<f;++c)l=t[c],n[l.index]=+e(l,c,t)}}return a.initialize=function(c,f){t=c,r=f,u()},a.iterations=function(c){return arguments.length?(i=+c,a):i},a.strength=function(c){return arguments.length?(o=+c,a):o},a.radius=function(c){return arguments.length?(e=typeof c=="function"?c:gr(+c),u(),a):e},a}function Ve(e){var t=gr(.1),n,r,o;typeof e!="function"&&(e=gr(e==null?0:+e));function i(s){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vx+=(o[u]-f.x)*r[u]*s}function a(){if(n){var s,u=n.length;for(r=new Array(u),o=new Array(u),s=0;s<u;++s)r[s]=isNaN(o[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return i.initialize=function(s){n=s,a()},i.strength=function(s){return arguments.length?(t=typeof s=="function"?s:gr(+s),a(),i):t},i.x=function(s){return arguments.length?(e=typeof s=="function"?s:gr(+s),a(),i):e},i}function Ze(e){var t=gr(.1),n,r,o;typeof e!="function"&&(e=gr(e==null?0:+e));function i(s){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vy+=(o[u]-f.y)*r[u]*s}function a(){if(n){var s,u=n.length;for(r=new Array(u),o=new Array(u),s=0;s<u;++s)r[s]=isNaN(o[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return i.initialize=function(s){n=s,a()},i.strength=function(s){return arguments.length?(t=typeof s=="function"?s:gr(+s),a(),i):t},i.y=function(s){return arguments.length?(e=typeof s=="function"?s:gr(+s),a(),i):e},i}function Pe(){function e(We){return()=>We}let t=We=>We.cluster,n=e(1),r=e(-1),o=e(100),i=e(.1),a=[0,0],s=[],u={},c=[],f=100,l=100,d={none:{x:0,y:0}},h=[],v,m="force",y=!0,E=.1;function g(We){if(!y)return g;v.tick(),ne();for(let rn=0,hr=s.length,yn,zn=We*E;rn<hr;++rn)yn=s[rn],yn.vx+=(d[t(yn)].x-yn.x)*zn,yn.vy+=(d[t(yn)].y-yn.y)*zn}function b(){s&&_()}function _(){if(!s||!s.length)return;if(t(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const We=S();v=ss(We.nodes).force("x",Ve(f).strength(.1)).force("y",Ze(l).strength(.1)).force("collide",Ne(rn=>rn.r).iterations(4)).force("charge",$s().strength(r)).force("links",D(We.nodes.length?We.links:[]).distance(o).strength(i)),h=v.nodes(),ne()}function S(){const We=[],rn=[],hr={};let yn=[],zn={},$e=[];return zn=V(s),$e=fe(c),yn=Object.keys(zn),yn.forEach((ft,Ln)=>{const $t=zn[ft];We.push({id:ft,size:$t.count,r:Math.sqrt($t.sumforceNodeSize/Math.PI)}),hr[ft]=Ln}),$e.forEach(ft=>{const Ln=Je(ft,"source"),$t=Je(ft,"target"),Wn=hr[Ln],cn=hr[$t];Wn!==void 0&&cn!==void 0&&rn.push({source:Wn,target:cn,count:ft.count})}),{nodes:We,links:rn}}function V(We){const rn={};return We.forEach(hr=>{const yn=t(hr);rn[yn]||(rn[yn]={count:0,sumforceNodeSize:0})}),We.forEach(hr=>{const yn=t(hr),zn=n(hr),$e=rn[yn];$e.count=$e.count+1,$e.sumforceNodeSize=$e.sumforceNodeSize+Math.PI*(zn*zn)*1.3,rn[yn]=$e}),rn}function fe(We){const rn={},hr=[];return We.forEach(zn=>{const $e=K(zn);let ft=0;rn[$e]!==void 0&&(ft=rn[$e]),ft+=1,rn[$e]=ft}),Object.entries(rn).forEach(([zn,$e])=>{const ft=zn.split("~")[0],Ln=zn.split("~")[1];ft!==void 0&&Ln!==void 0&&hr.push({source:ft,target:Ln,count:$e})}),hr}function ne(){return d={none:{x:0,y:0}},h.forEach(We=>{d[We.id]={x:We.x-a[0],y:We.y-a[1]}}),d}function K(We){const rn=Je(We,"source"),hr=Je(We,"target"),yn=t(u[rn]),zn=t(u[hr]);return yn<=zn?`${yn}~${zn}`:`${zn}~${yn}`}function J(We){u={},We.forEach(rn=>{u[rn.id]=rn})}function ge(We){return arguments.length?(m=We,b(),g):m}function G(We){return arguments.length?typeof We=="string"?(t=rn=>rn[We],g):(t=We,g):t}function Ee(We){return arguments.length?(y=We,g):y}function ke(We){return arguments.length?(E=We,g):E}function Ue(We){return arguments.length?(f=We,g):f}function pt(We){return arguments.length?(l=We,g):l}function Ke(We){return arguments.length?(J(We||[]),s=We||[],g):s}function bt(We){return arguments.length?(c=We||[],b(),g):c}function dt(We){return arguments.length?(typeof We=="function"?n=We:n=e(+We),b(),g):n}function Vt(We){return arguments.length?(typeof We=="function"?r=We:r=e(+We),b(),g):r}function un(We){return arguments.length?(typeof We=="function"?o=We:o=e(+We),b(),g):o}function Qn(We){return arguments.length?(typeof We=="function"?i=We:i=e(+We),b(),g):i}function or(We){return arguments.length?(a=We,g):a}return g.initialize=We=>{s=We,b()},g.template=ge,g.groupBy=G,g.enableGrouping=Ee,g.strength=ke,g.centerX=Ue,g.centerY=pt,g.nodes=Ke,g.links=bt,g.forceNodeSize=dt,g.nodeSize=g.forceNodeSize,g.forceCharge=Vt,g.forceLinkDistance=un,g.forceLinkStrength=Qn,g.offset=or,g.getFocis=ne,g}const tt={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},nt={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};class Gt extends Dt{constructor(t){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,t&&this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(t){const n=this;n.nodes=t.nodes||[];const r=t.edges||[];n.edges=r.map(o=>{const i={},a=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(o).forEach(s=>{a.indexOf(s)>-1||(i[s]=o[s])}),i}),n.ticking=!1}execute(t){const n=this,r=n.nodes,o=n.edges;if(n.ticking)return;let i=n.forceSimulation;const a=n.alphaMin,s=n.alphaDecay,u=n.alpha;if(i){if(t){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(r),n.clusterForce.links(o)),i.nodes(r),o&&n.edgeForce)n.edgeForce.links(o);else if(o&&!n.edgeForce){const c=D().id(f=>f.id).links(o);n.edgeStrength&&c.strength(n.edgeStrength),n.linkDistance&&c.distance(n.linkDistance),n.edgeForce=c,i.force("link",c)}}n.preventOverlap&&n.overlapProcess(i),i.alpha(u).restart(),this.ticking=!0}else try{const c=$s();if(n.nodeStrength&&c.strength(n.nodeStrength),i=ss().nodes(r),n.clustering){const f=Pe();f.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),o&&f.links(o),r&&f.nodes(r),f.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=f,i.force("group",f)}if(i.force("center",Xs(n.center[0],n.center[1])).force("charge",c).alpha(u).alphaDecay(s).alphaMin(a),n.preventOverlap&&n.overlapProcess(i),o){const f=D().id(l=>l.id).links(o);n.edgeStrength&&f.strength(n.edgeStrength),n.linkDistance&&f.distance(n.linkDistance),n.edgeForce=f,i.force("link",f)}if(n.workerEnabled&&!en()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)i.on("tick",()=>{n.tick()}).on("end",()=>{n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{i.stop();const f=Pt(i);for(let l=1;l<=f;l++)i.tick(),postMessage({nodes:r,currentTick:l,totalTicks:f,type:tt.TICK},void 0);n.ticking=!1}n.forceSimulation=i,n.ticking=!0}catch(c){n.ticking=!1,console.warn(c)}}overlapProcess(t){const n=this,r=n.nodeSize,o=n.nodeSpacing;let i,a;const s=n.collideStrength;if(le(o)?a=()=>o:Ye(o)?a=o:a=()=>0,!r)i=u=>u.size?it(u.size)?(u.size[0]>u.size[1]?u.size[0]:u.size[1])/2+a(u):ht(u.size)?(u.size.width>u.size.height?u.size.width:u.size.height)/2+a(u):u.size/2+a(u):10+a(u);else if(Ye(r))i=u=>r(u)+a(u);else if(it(r)){const c=(r[0]>r[1]?r[0]:r[1])/2;i=f=>c+a(f)}else if(le(r)){const u=r/2;i=c=>u+a(c)}else i=()=>10;t.force("collisionForce",Ne(i).strength(s))}updateCfg(t){const n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,t)}destroy(){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0}}function Pt(e){const t=e.alphaMin(),n=e.alphaTarget(),r=e.alpha(),o=Math.log((t-n)/(r-n))/Math.log(1-e.alphaDecay());return Math.ceil(o)}function en(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function fn(e,t,n,r){e.forEach((o,i)=>{e[i].children=[],e[i].parent=[]}),r?t.forEach(o=>{const i=Je(o,"source"),a=Je(o,"target");let s=0;i&&(s=n[i]);let u=0;a&&(u=n[a]);const c=e[s].children,f=e[u].parent;c.push(e[u].id),f.push(e[s].id)}):t.forEach(o=>{const i=Je(o,"source"),a=Je(o,"target");let s=0;i&&(s=n[i]);let u=0;a&&(u=n[a]);const c=e[s].children,f=e[u].children;c.push(e[u].id),f.push(e[s].id)})}function Gn(e,t,n){const r=n.length;for(let o=0;o<r;o++){const i=Je(n[o],"source"),a=Je(n[o],"target");if(e.id===i&&t.id===a||t.id===i&&e.id===a)return!0}return!1}function ln(e,t){const n=e.degree,r=t.degree;return n<r?-1:n>r?1:0}class In extends Dt{constructor(t){super(),this.radius=null,this.nodeSize=void 0,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(t)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){var t;const n=this,r=n.nodes,o=n.edges,i=r.length;if(i===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);const a=n.center;if(i===1){r[0].x=a[0],r[0].y=a[1],n.onLayoutEnd&&n.onLayoutEnd();return}let{radius:s,startRadius:u,endRadius:c}=n;const{divisions:f,startAngle:l,endAngle:d,angleRatio:h,ordering:v,clockwise:m,nodeSpacing:y,nodeSize:E}=n,g=(d-l)/i,b={};r.forEach((ne,K)=>{b[ne.id]=K}),n.nodeMap=b;const _=an(r.length,b,o);if(n.degrees=_,y){const ne=er(10,y),K=er(10,E);let J=-1/0;r.forEach(G=>{const Ee=K(G);J<Ee&&(J=Ee)});let ge=0;r.forEach((G,Ee)=>{Ee===0?ge+=J||10:ge+=(ne(G)||0)+(J||10)}),s=ge/(2*Math.PI)}else!s&&!u&&!c?s=n.height>n.width?n.width/2:n.height/2:!u&&c?u=c:u&&!c&&(c=u);const S=g*h;let V=[];v==="topology"?V=n.topologyOrdering():v==="topology-directed"?V=n.topologyOrdering(!0):v==="degree"?V=n.degreeOrdering():V=r;const fe=Math.ceil(i/f);for(let ne=0;ne<i;++ne){let K=s;!K&&u!==null&&c!==null&&(K=u+ne*(c-u)/(i-1)),K||(K=10+ne*100/(i-1));let J=l+ne%fe*S+2*Math.PI/f*Math.floor(ne/fe);m||(J=d-ne%fe*S-2*Math.PI/f*Math.floor(ne/fe)),V[ne].x=a[0]+Math.cos(J)*K,V[ne].y=a[1]+Math.sin(J)*K,V[ne].weight=_[ne].all}return(t=n.onLayoutEnd)===null||t===void 0||t.call(n),{nodes:V,edges:this.edges}}topologyOrdering(t=!1){const n=this,r=n.degrees,o=n.edges,i=n.nodes,a=on(i),s=n.nodeMap,u=[a[0]],c=[i[0]],f=[],l=i.length;f[0]=!0,fn(a,o,s,t);let d=0;return a.forEach((h,v)=>{if(v!==0)if((v===l-1||r[v].all!==r[v+1].all||Gn(u[d],h,o))&&!f[v])u.push(h),c.push(i[s[h.id]]),f[v]=!0,d++;else{const m=u[d].children;let y=!1;for(let g=0;g<m.length;g++){const b=s[m[g]];if(r[b].all===r[v].all&&!f[b]){u.push(a[b]),c.push(i[s[a[b].id]]),f[b]=!0,y=!0;break}}let E=0;for(;!y&&(f[E]||(u.push(a[E]),c.push(i[s[a[E].id]]),f[E]=!0,y=!0),E++,E!==l););}}),c}degreeOrdering(){const t=this,n=t.nodes,r=[],o=t.degrees;return n.forEach((i,a)=>{i.degree=o[a].all,r.push(i)}),r.sort(ln),r}getType(){return"circular"}}const Ft=(e,t)=>{if(e!=="next"&&e!=="prev")return t},zt=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};class vn{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return zt(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&zt(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let r=n.prev;for(;r!==n;)t.push(JSON.stringify(r,Ft)),r=r==null?void 0:r.prev;return`[${t.join(", ")}]`}}var pn;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(pn||(pn={}));function Qt(e,t){var n=e.get(t)||0;e.set(t,n+1)}function Yt(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function Xn(e,t,n,r){var o=String(t),i=String(n);if(!e&&o>i){var a=o;o=i,i=a}return o+pn.EDGE_KEY_DELIM+i+pn.EDGE_KEY_DELIM+(r===void 0?pn.DEFAULT_EDGE_NAME:r)}function An(e,t,n,r){var o=String(t),i=String(n),a={v:t,w:n};if(!e&&o>i){var s=a.v;a.v=a.w,a.w=s}return r!==void 0&&(a.name=r),a}function tn(e,t){return Xn(e,t.v,t.w,t.name)}function dn(e){return typeof e=="function"}var Nt=function(t){return t.nodes().map(function(n){var r=t.node(n),o=t.parent(n),i={id:n,value:r,parent:o};return i.value===void 0&&delete i.value,i.parent===void 0&&delete i.parent,i})},nn=function(t){return t.edges().map(function(n){var r=t.edge(n),o={v:n.v,w:n.w,value:r,name:n.name};return o.name===void 0&&delete o.name,o.value===void 0&&delete o.value,o})},Wt=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Nt(t),edges:nn(t),value:t.graph()};return n.value===void 0&&delete n.value,n},Kt=function(t){var n=new sr(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(r){n.setNode(r.id,r.value),r.parent&&n.setParent(r.id,r.parent)}),t.edges.forEach(function(r){n.setEdge(r.v,r.w,r.value,r.name)}),n};function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ar(Object(n),!0).forEach(function(r){Lr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function so(e,t,n){return t&&Zt(e.prototype,t),n&&Zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Jr={compound:!1,multigraph:!1,directed:!0},sr=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fr(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=pn.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(o){return t.label=o,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(o){return dn(o)?t.defaultNodeLabelFn=o:t.defaultNodeLabelFn=function(){return o},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(o){return t.nodesLabelMap.get(o)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(o){var i;return!(!((i=t.inEdgesMap.get(o))===null||i===void 0)&&i.size)})},this.sinks=function(){return t.nodes().filter(function(o){var i;return!(!((i=t.outEdgesMap.get(o))===null||i===void 0)&&i.size)})},this.setNodes=function(o,i){return o.map(function(a){return t.setNode(a,i)}),t},this.hasNode=function(o){return t.nodesLabelMap.has(o)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(o){if(t.isCompound()){var i,a=(i=t.parentMap)===null||i===void 0?void 0:i.get(o);if(a!==t.GRAPH_NODE)return a}},this.removeFromParentsChildList=function(o){var i=t.parentMap.get(o);t.childrenMap.get(i).delete(o)},this.setParent=function(o,i){var a,s;t.checkCompound();for(var u=i===void 0?t.GRAPH_NODE:i,c=t.parent(u);c;){if(o===c)throw new Error("Setting "+i+" as parent of "+o+" would create a cycle");c=t.parent(c)}i&&t.setNode(i),t.setNode(o),t.removeFromParentsChildList(o),(a=t.parentMap)===null||a===void 0||a.set(o,u);var f=t.childrenMap.get(u);return f.set(o,!0),(s=t.childrenMap)===null||s===void 0||s.set(u,f),t},this.children=function(o){var i=o===void 0?t.GRAPH_NODE:o;if(t.isCompound()){var a,s=(a=t.childrenMap)===null||a===void 0?void 0:a.get(i);return s?Array.from(s.keys()):void 0}if(i===t.GRAPH_NODE)return t.nodes();if(o&&t.hasNode(o))return[]},this.predecessors=function(o){var i=t.predecessorsMap.get(o);return i?Array.from(i.keys()):void 0},this.successors=function(o){var i=t.successorsMap.get(o);return i?Array.from(i.keys()):void 0},this.neighbors=function(o){var i;if(t.hasNode(o))return Array.from(new Set((i=t.predecessors(o))===null||i===void 0?void 0:i.concat(t.successors(o))))},this.isLeaf=function(o){var i;if(t.isDirected()){var a;return!(!((a=t.successors(o))===null||a===void 0)&&a.length)}return!(!((i=t.neighbors(o))===null||i===void 0)&&i.length)},this.filterNodes=function(o){var i=t.directed,a=t.multigraph,s=t.compound,u=new e({directed:i,multigraph:a,compound:s});if(u.setGraph(t.graph()),t.nodes().forEach(function(f){o(f)&&u.setNode(f,t.node(f))}),t.edges().forEach(function(f){u.hasNode(f.v)&&u.hasNode(f.w)&&u.setEdgeObj(f,t.edge(f))}),s){var c=function(l){for(var d=t.parent(l);d!==void 0&&!u.hasNode(d);)d=t.parent(d);return d};u.nodes().forEach(function(f){u.setParent(f,c(f))})}return u},this.setDefaultEdgeLabel=function(o){return dn(o)?t.defaultEdgeLabelFn=o:t.defaultEdgeLabelFn=function(){return o},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(o,i){return t.setEdge(o.v,o.w,i,o.name)},this.setPath=function(o,i){return o.reduce(function(a,s){return t.setEdge(a,s,i),s}),t},this.edgeFromArgs=function(o,i,a){return t.edge({v:o,w:i,name:a})},this.edge=function(o){return t.edgesLabelsMap.get(tn(t.isDirected(),o))},this.hasEdge=function(o,i,a){return t.edgesLabelsMap.has(tn(t.isDirected(),{v:o,w:i,name:a}))},this.removeEdgeObj=function(o){var i=o.v,a=o.w,s=o.name;return t.removeEdge(i,a,s)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(o,i){var a=t.inEdgesMap.get(o);if(a)return Array.from(a.values()).filter(function(s){return!i||s.v===i})},this.outEdges=function(o,i){var a=t.outEdgesMap.get(o);if(a)return Array.from(a.values()).filter(function(s){return!i||s.w===i})},this.nodeEdges=function(o,i){var a;if(t.hasNode(o))return(a=t.inEdges(o,i))===null||a===void 0?void 0:a.concat(t.outEdges(o,i))},this.toJSON=function(){return Wt(t)},this.nodeInDegree=function(o){var i=t.inEdgesMap.get(o);return i?i.size:0},this.nodeOutDegree=function(o){var i=t.outEdgesMap.get(o);return i?i.size:0},this.nodeDegree=function(o){return t.nodeInDegree(o)+t.nodeOutDegree(o)},this.source=function(o){return o.v},this.target=function(o){return o.w};var r=yr(yr({},Jr),n);this.compound=r.compound,this.directed=r.directed,this.multigraph=r.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return so(e,[{key:"setNode",value:function(n,r){var o=this.nodesLabelMap,i=this.defaultNodeLabelFn,a=this.isCompound,s=this.parentMap,u=this.childrenMap,c=this.inEdgesMap,f=this.outEdgesMap,l=this.predecessorsMap,d=this.successorsMap;if(o.has(n))return r!==void 0&&o.set(n,r),this;if(o.set(n,r||i(n)),a()){var h;s==null||s.set(n,this.GRAPH_NODE),u==null||u.set(n,new Map),u!=null&&u.has(this.GRAPH_NODE)||u==null||u.set(this.GRAPH_NODE,new Map),u==null||(h=u.get(this.GRAPH_NODE))===null||h===void 0||h.set(n,!0)}return[c,f,l,d].forEach(function(v){return v.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var r=this;if(this.hasNode(n)){var o=function(y){r.removeEdge(y.v,y.w,y.name)},i=this.inEdgesMap,a=this.outEdgesMap,s=this.predecessorsMap,u=this.successorsMap,c=this.nodesLabelMap;if(this.isCompound()){var f,l,d;this.removeFromParentsChildList(n),(f=this.parentMap)===null||f===void 0||f.delete(n),(l=this.children(n))===null||l===void 0||l.forEach(function(m){return r.setParent(m)}),(d=this.childrenMap)===null||d===void 0||d.delete(n)}var h=i.get(n),v=a.get(n);Array.from(h.values()).forEach(function(m){return o(m)}),Array.from(v.values()).forEach(function(m){return o(m)}),c.delete(n),i.delete(n),a.delete(n),s.delete(n),u.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,r,o,i){var a,s,u=An(this.isDirected(),n,r,i),c=tn(this.isDirected(),u),f=u.v,l=u.w;if(this.edgesLabelsMap.has(c))return this.edgesLabelsMap.set(c,o),this;if(i!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(l),this.edgesLabelsMap.set(c,o||this.defaultEdgeLabelFn(f,l,i)),Object.freeze(u),this.edgesMap.set(c,u);var d=this.predecessorsMap.get(l),h=this.successorsMap.get(f);return Qt(d,f),Qt(h,l),(a=this.inEdgesMap.get(l))===null||a===void 0||a.set(c,u),(s=this.outEdgesMap.get(f))===null||s===void 0||s.set(c,u),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,r,o){var i=Xn(this.isDirected(),n,r,o),a=this.edgesMap.get(i);if(a){var s=An(this.isDirected(),n,r,o),u=s.v,c=s.w;this.edgesLabelsMap.delete(i),this.edgesMap.delete(i);var f=this.predecessorsMap.get(c),l=this.successorsMap.get(u);Yt(f,u),Yt(l,c),this.inEdgesMap.get(c).delete(i),this.outEdgesMap.get(u).delete(i),this.edgeCountNum-=1}return this}}]),e}();sr.fromJSON=Kt;function Bt(e){"@babel/helpers - typeof";return Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(e)}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t,n){return t&&Er(e.prototype,t),n&&Er(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xr(){return typeof Reflect!="undefined"&&Reflect.get?xr=Reflect.get:xr=function(t,n,r){var o=eo(t,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(arguments.length<3?t:r):i.value}},xr.apply(this,arguments)}function eo(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=zr(e),e!==null););return e}function $r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&No(e,t)}function No(e,t){return No=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},No(e,t)}function yo(e){var t=mn();return function(){var r=zr(e),o;if(t){var i=zr(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return Ro(this,o)}}function Ro(e,t){if(t&&(Bt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xr(e)}function Xr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function zr(e){return zr=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},zr(e)}var $o=null,ju=function(t,n){var r=new Graph,o=new Map,i=new PriorityQueue,a;function s(f){var l=f.v===a?f.w:f.v,d=i.priority(l);if(d!==void 0){var h=n(f);h<d&&(o.set(l,a),i.decrease(l,h))}}if(t.nodeCount()===0)return r;t.nodes().forEach(function(f){i.add(f,Number.POSITIVE_INFINITY),r.setNode(f)}),i.decrease(t.nodes()[0],0);for(var u=!1;i.size()>0;){var c;if(a=i.removeMin(),o.has(a))r.setEdge(a,o.get(a));else{if(u)throw new Error("Input graph is not connected: "+t.graph());u=!0}(c=t.nodeEdges(a))===null||c===void 0||c.forEach(s)}return r},Jc=null,Yu=function e(t,n,r,o,i,a){o.includes(n)||(o.push(n),r||a.push(n),i(n).forEach(function(s){return e(t,s,r,o,i,a)}),r&&a.push(n))},Aa=function(t,n,r){var o=Array.isArray(n)?n:[n],i=function(c){return t.isDirected()?t.successors(c):t.neighbors(c)},a=[],s=[];return o.forEach(function(u){if(t.hasNode(u))Yu(t,u,r==="post",s,i,a);else throw new Error("Graph does not have node: "+u)}),a},Na=Aa,$i=function(t,n){return Na(t,n,"post")},us=$i,Xo=function(t,n){return Na(t,n,"pre")},Ws=Xo;function lo(e,t){return Co(e)||Ra(e,t)||Do(e,t)||Xi()}function Xi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Do(e,t){if(e){if(typeof e=="string")return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(e,t)}}function Wr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ra(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,a,s;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));o=!0);}catch(u){i=!0,s=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function Co(e){if(Array.isArray(e))return e}function Ku(e){return e instanceof Graph}function Wo(e){if(e.isMultigraph())return!1;for(var t=e.edges(),n=new Map,r=0;r<t.length;r++){var o=t[r];if(o.v===o.w)return!1;var i=[o.v,o.w].sort(),a=lo(i,2),s=a[0],u=a[1],c="".concat(s,"-").concat(u);if(n.has(c))return!1;n.set(c,!0)}return!0}function Wi(e){return e.nodes().length===0}function qu(e){for(var t=e.edges(),n=0;n<t.length;n++){var r=t[n];if(r.v===r.w)return!0}return!1}var Hs=function(t,n){if(!isSimpleGraph(t)||!isSimpleGraph(n)||!containAllSameNodes(t,n)||containSameEdges(t,n))return!1;var r=t.nodeCount();return t.edgeCount()+n.edgeCount()===r*(r-1)/2},Zs=function(t){if(!isSimpleGraph(t))return null;for(var n=t.nodeCount(),r=new Graph({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),o=t.nodes(),i=0;i<n;i++){var a=o[i];r.setNode(a,t.node(a));for(var s=i+1;s<n;s++){var u=o[s];t.hasEdge(a,u)||r.setEdge(a,u)}}return r};class js extends vn{}class Ys extends sr{}const Qu=()=>1,Ks=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const r=qs(e,t||Qu);return(n=Dn(r.graph,r.buckets,r.zeroIdx).map(i=>e.outEdges(i.v,i.w)))===null||n===void 0?void 0:n.flat()},Dn=(e,t,n)=>{let r=[];const o=t[t.length-1],i=t[0];let a;for(;e.nodeCount();){for(;a=i.dequeue();)Da(e,t,n,a);for(;a=o.dequeue();)Da(e,t,n,a);if(e.nodeCount()){for(let s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){r=r.concat(Da(e,t,n,a,!0));break}}}return r},Da=(e,t,n,r,o)=>{var i,a;const s=[];return(i=e.inEdges(r.v))===null||i===void 0||i.forEach(u=>{const c=e.edge(u),f=e.node(u.v);o&&s.push({v:u.v,w:u.w,in:0,out:0}),f.out===void 0&&(f.out=0),f.out-=c,cr(t,n,f)}),(a=e.outEdges(r.v))===null||a===void 0||a.forEach(u=>{const c=e.edge(u),f=u.w,l=e.node(f);l.in===void 0&&(l.in=0),l.in-=c,cr(t,n,l)}),e.removeNode(r.v),o?s:void 0},qs=(e,t)=>{const n=new Ys;let r=0,o=0;e.nodes().forEach(u=>{n.setNode(u,{v:u,in:0,out:0})}),e.edges().forEach(u=>{const c=n.edge(u)||0,f=(t==null?void 0:t(u))||1,l=c+f;n.setEdge(u.v,u.w,l),o=Math.max(o,n.node(u.v).out+=f),r=Math.max(r,n.node(u.w).in+=f)});const i=[],a=o+r+3;for(let u=0;u<a;u++)i.push(new js);const s=r+1;return n.nodes().forEach(u=>{cr(i,s,n.node(u))}),{buckets:i,zeroIdx:s,graph:n}},cr=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)};var Ho=Ks;const Ca=e=>{const t=r=>o=>{var i;return((i=r.edge(o))===null||i===void 0?void 0:i.weight)||1},n=e.graph().acyclicer==="greedy"?Ho(e,t(e)):Oo(e);n==null||n.forEach(r=>{const o=e.edge(r);e.removeEdgeObj(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,`rev-${Math.random()}`)})},Oo=e=>{const t=[],n={},r={},o=i=>{var a;r[i]||(r[i]=!0,n[i]=!0,(a=e.outEdges(i))===null||a===void 0||a.forEach(s=>{n[s.w]?t.push(s):o(s.w)}),delete n[i])};return e.nodes().forEach(o),t};var pi={run:Ca,undo:e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}};class Zn extends sr{}const Eo=(e,t)=>Number(e)-Number(t),Zo=(e,t,n,r)=>{let o;do o=`${r}${Math.random()}`;while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o},mi=e=>{const t=new Zn().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const r=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},Oa=e=>{const t=new Zn({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var r;!((r=e.children(n))===null||r===void 0)&&r.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},cs=(e,t)=>e==null?void 0:e.reduce((n,r,o)=>(n[r]=t[o],n),{}),fs=e=>{const t={};return e.nodes().forEach(n=>{var r;const o={};(r=e.outEdges(n))===null||r===void 0||r.forEach(i=>{var a;o[i.w]=(o[i.w]||0)+(((a=e.edge(i))===null||a===void 0?void 0:a.weight)||0)}),t[n]=o}),t},ef=e=>{const t=e.nodes(),n=t.map(r=>{var o;const i={};return(o=e.inEdges(r))===null||o===void 0||o.forEach(a=>{i[a.v]=(i[a.v]||0)+e.edge(a).weight}),i});return cs(t,n)},Js=(e,t)=>{const n=Number(e.x),r=Number(e.y),o=Number(t.x)-n,i=Number(t.y)-r;let a=Number(e.width)/2,s=Number(e.height)/2;if(!o&&!i)return{x:0,y:0};let u,c;return Math.abs(i)*a>Math.abs(o)*s?(i<0&&(s=-s),u=s*o/i,c=s):(o<0&&(a=-a),u=a,c=a*i/o),{x:n+u,y:r+c}},Lo=e=>{const t=[],n=Mo(e)+1;for(let r=0;r<n;r++)t.push([]);e.nodes().forEach(r=>{const o=e.node(r);if(!o)return;const i=o.rank;i!==void 0&&t[i]&&t[i].push(r)});for(let r=0;r<n;r++)t[r]=t[r].sort((o,i)=>{var a,s;return Eo((a=e.node(o))===null||a===void 0?void 0:a.order,(s=e.node(i))===null||s===void 0?void 0:s.order)});return t},Hi=e=>{const t=e.nodes().filter(r=>{var o;return((o=e.node(r))===null||o===void 0?void 0:o.rank)!==void 0}).map(r=>e.node(r).rank),n=Math.min(...t);e.nodes().forEach(r=>{const o=e.node(r);o.hasOwnProperty("rank")&&n!==1/0&&(o.rank-=n)})},ls=e=>{const t=e.nodes(),n=t.filter(s=>{var u;return((u=e.node(s))===null||u===void 0?void 0:u.rank)!==void 0}).map(s=>e.node(s).rank),r=Math.min(...n),o=[];t.forEach(s=>{var u;const c=(((u=e.node(s))===null||u===void 0?void 0:u.rank)||0)-r;o[c]||(o[c]=[]),o[c].push(s)});let i=0;const a=e.graph().nodeRankFactor||0;for(let s=0;s<o.length;s++){const u=o[s];u===void 0?s%a!==0&&(i-=1):i&&(u==null||u.forEach(c=>{const f=e.node(c);f&&(f.rank=f.rank||0,f.rank+=i)}))}},La=(e,t,n,r)=>{const o={width:0,height:0};return le(n)&&le(r)&&(o.rank=n,o.order=r),Zo(e,"border",o,t)},Mo=e=>{let t;return e.nodes().forEach(n=>{var r;const o=(r=e.node(n))===null||r===void 0?void 0:r.rank;o!==void 0&&(t===void 0||o>t)&&(t=o)}),t||(t=0),t},jo=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(r=>{t(r)?n.lhs.push(r):n.rhs.push(r)}),n},gi=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},yi=(e,t)=>t(),Ei=(e,t)=>e.reduce((n,r)=>{const o=t(n),i=t(r);return o>i?r:n}),ds=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>gn(e,t))},gn=(e,t)=>{let n=t.v,r=e.node(n).rank;const o=t.w,i=e.node(o).rank,a=t.name,s=e.edge(t),u=s.labelRank;if(i===r+1)return;e.removeEdgeObj(t);const c=e.graph();let f,l,d;for(d=0,++r;r<i;++d,++r)s.points=[],l={edgeLabel:s,width:0,height:0,edgeObj:t,rank:r},f=Zo(e,"edge",l,"_d"),r===u&&(l.width=s.width,l.height=s.height,l.dummy="edge-label",l.labelpos=s.labelpos),e.setEdge(n,f,{weight:s.weight},a),d===0&&(c.dummyChains||(c.dummyChains=[]),c.dummyChains.push(f)),n=f;e.setEdge(n,o,{weight:s.weight},a)};var xn={run:ds,undo:e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let r=e.node(n);const o=r.edgeLabel;let i;r.edgeObj&&e.setEdgeObj(r.edgeObj,o);let a=n;for(;r.dummy;)i=e.successors(a)[0],e.removeNode(a),o.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),a=i,r=e.node(a)})}};const Nn=e=>{var t;const n={},r=o=>{var i;const a=e.node(o);if(!a)return 0;if(n[o])return a.rank;n[o]=!0;let s;return(i=e.outEdges(o))===null||i===void 0||i.forEach(u=>{const c=r(u.w),f=e.edge(u).minlen,l=c-f;l&&(s===void 0||l<s)&&(s=l)}),s||(s=0),a.rank=s,s};(t=e.sources())===null||t===void 0||t.forEach(o=>r(o))},Hr=e=>{var t;const n={};let r;const o=s=>{var u;const c=e.node(s);if(!c)return 0;if(n[s])return c.rank;n[s]=!0;let f;return(u=e.outEdges(s))===null||u===void 0||u.forEach(l=>{const d=o(l.w),h=e.edge(l).minlen,v=d-h;v&&(f===void 0||v<f)&&(f=v)}),f||(f=0),(r===void 0||f<r)&&(r=f),c.rank=f,f};(t=e.sources())===null||t===void 0||t.forEach(s=>{e.node(s)&&o(s)}),r===void 0&&(r=0);const i={},a=(s,u)=>{var c;const f=e.node(s),l=isNaN(f.layer)?u:f.layer;(f.rank===void 0||f.rank<l)&&(f.rank=l),!i[s]&&(i[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.map(d=>{a(d.w,l+e.edge(d).minlen)}))};e.nodes().forEach(s=>{const u=e.node(s);u&&(isNaN(u.layer)?u.rank-=r:a(s,u.layer))})},jn=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen;var bi={longestPath:Nn,longestPathWithLayer:Hr,slack:jn};const _r=e=>{const t=new Zn({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});let o,i;for(;Zi(t,e)<r;)o=eu(t,e),i=t.hasNode(o.v)?jn(e,o):-jn(e,o),tu(t,e,i);return t},Zi=(e,t)=>{const n=r=>{t.nodeEdges(r).forEach(o=>{const i=o.v,a=r===i?o.w:i;!e.hasNode(a)&&!jn(t,o)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})};return e.nodes().forEach(n),e.nodeCount()},bo=e=>{const t=new Zn({directed:!1}),n=e.nodes()[0],r=e.nodes().filter(a=>!!e.node(a)).length;t.setNode(n,{});let o,i;for(;ji(t,e)<r;)o=eu(t,e),i=t.hasNode(o.v)?jn(e,o):-jn(e,o),tu(t,e,i);return t},ji=(e,t)=>{const n=r=>{var o;(o=t.nodeEdges(r))===null||o===void 0||o.forEach(i=>{const a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&(t.node(s).layer!==void 0||!jn(t,i))&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})};return e.nodes().forEach(n),e.nodeCount()},eu=(e,t)=>Ei(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?jn(t,n):1/0),tu=(e,t,n)=>{e.nodes().forEach(r=>{t.node(r).rank||(t.node(r).rank=0),t.node(r).rank+=n})};var tf={feasibleTree:_r,feasibleTreeWithLayer:bo};const{preorder:Ju,postorder:Nl}=H,Rl=e=>{const t=mi(e);Nn(t);const n=_r(t);nu(n),nf(n,t);let r,o;for(;r=rf(n);)o=nc(n,t,r),Cl(n,t,r,o)},nf=(e,t)=>{let n=Nl(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(r=>{ec(e,t,r)})},ec=(e,t,n)=>{const o=e.node(n).parent;e.edgeFromArgs(n,o).cutvalue=Dl(e,t,n)},Dl=(e,t,n)=>{var r;const i=e.node(n).parent;let a=!0,s=t.edgeFromArgs(n,i),u=0;return s||(a=!1,s=t.edgeFromArgs(i,n)),u=s.weight,(r=t.nodeEdges(n))===null||r===void 0||r.forEach(c=>{const f=c.v===n,l=f?c.w:c.v;if(l!==i){const d=f===a,h=t.edge(c).weight;if(u+=d?h:-h,Ol(e,n,l)){const v=e.edgeFromArgs(n,l).cutvalue;u+=d?-v:v}}}),u},nu=(e,t=e.nodes()[0])=>{tc(e,{},1,t)},tc=(e,t,n,r,o)=>{var i;const a=n;let s=n;const u=e.node(r);return t[r]=!0,(i=e.neighbors(r))===null||i===void 0||i.forEach(c=>{t[c]||(s=tc(e,t,s,c,r))}),u.low=a,u.lim=s++,o?u.parent=o:delete u.parent,s},rf=e=>e.edges().find(t=>e.edge(t).cutvalue<0),nc=(e,t,n)=>{let r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);const i=e.node(r),a=e.node(o);let s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);const c=t.edges().filter(f=>u===of(e,e.node(f.v),s)&&u!==of(e,e.node(f.w),s));return Ei(c,f=>jn(t,f))},Cl=(e,t,n,r)=>{const o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),nu(e),nf(e,t),ru(e,t)},ru=(e,t)=>{const n=e.nodes().find(o=>{var i;return!(!((i=t.node(o))===null||i===void 0)&&i.parent)});let r=Ju(e,n);r=r==null?void 0:r.slice(1),r==null||r.forEach(o=>{const i=e.node(o).parent;let a=t.edgeFromArgs(o,i),s=!1;a||(a=t.edgeFromArgs(i,o),s=!0),t.node(o).rank=t.node(i).rank+(s?a.minlen:-a.minlen)})},Ol=(e,t,n)=>e.hasEdge(t,n),of=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim;var Ll=Rl;const Ml=e=>{switch(e.graph().ranker){case"network-simplex":Gl(e);break;case"tight-tree":af(e);break;case"longest-path":kl(e);break;default:af(e)}},kl=Nn,af=e=>{Hr(e),bo(e)},Gl=e=>{Ll(e)};var sf=Ml;const hs=e=>{var t;const n={};let r=0;const o=i=>{var a;const s=r;(a=e.children(i))===null||a===void 0||a.forEach(o),n[i]={low:s,lim:r++}};return(t=e.children())===null||t===void 0||t.forEach(o),n},Pl=(e,t,n,r)=>{const o=[],i=[],a=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim);let u,c;u=n;do u=e.parent(u),o.push(u);while(u&&(t[u].low>a||s>t[u].lim));for(c=u,u=r;u&&u!==c;)i.push(u),u=e.parent(u);return{lca:c,path:o.concat(i.reverse())}};var ho=e=>{var t;const n=hs(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(r=>{var o,i;let a=r,s=e.node(a);const u=s.edgeObj;if(!u)return;const c=Pl(e,n,u.v,u.w),f=c.path,l=c.lca;let d=0,h=f[d],v=!0;for(;a!==u.w;){if(s=e.node(a),v){for(;h!==l&&((o=e.node(h))===null||o===void 0?void 0:o.maxRank)<s.rank;)d++,h=f[d];h===l&&(v=!1)}if(!v){for(;d<f.length-1&&((i=e.node(f[d+1]))===null||i===void 0?void 0:i.minRank)<=s.rank;)d++;h=f[d]}e.setParent(a,h),a=e.successors(a)[0]}})};const Ma=e=>{var t;const n=Zo(e,"root",{},"_root"),r=uf(e);let o=Math.max(...Object.values(r));Math.abs(o)===1/0&&(o=1);const i=o-1,a=2*i+1;e.graph().nestingRoot=n,e.edges().forEach(u=>{e.edge(u).minlen*=a});const s=cf(e)+1;(t=e.children())===null||t===void 0||t.forEach(u=>{oc(e,n,a,s,i,r,u)}),e.graph().nodeRankFactor=a},oc=(e,t,n,r,o,i,a)=>{const s=e.children(a);if(!(s!=null&&s.length)){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}const u=La(e,"_bt"),c=La(e,"_bb"),f=e.node(a);e.setParent(u,a),f.borderTop=u,e.setParent(c,a),f.borderBottom=c,s==null||s.forEach(l=>{oc(e,t,n,r,o,i,l);const d=e.node(l),h=d.borderTop?d.borderTop:l,v=d.borderBottom?d.borderBottom:l,m=d.borderTop?r:2*r,y=h!==v?1:o-i[a]+1;e.setEdge(u,h,{minlen:y,weight:m,nestingEdge:!0}),e.setEdge(v,c,{minlen:y,weight:m,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:o+i[a]})},uf=e=>{var t;const n={},r=(o,i)=>{const a=e.children(o);a==null||a.forEach(s=>r(s,i+1)),n[o]=i};return(t=e.children())===null||t===void 0||t.forEach(o=>r(o,1)),n},cf=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t};var ic={run:Ma,cleanup:e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})}};const ff=e=>{var t;const n=r=>{const o=e.children(r),i=e.node(r);if(o!=null&&o.length&&o.forEach(a=>n(a)),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let a=i.minRank,s=i.maxRank+1;a<s;a+=1)lf(e,"borderLeft","_bl",r,i,a),lf(e,"borderRight","_br",r,i,a)}};(t=e.children())===null||t===void 0||t.forEach(r=>n(r))},lf=(e,t,n,r,o,i)=>{const a={rank:i,borderType:t,width:0,height:0},s=o[t][i-1],u=Zo(e,"border",a,n);o[t][i]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})};var ka=ff;const Dr=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&ac(e)},df=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&hf(e),(n==="lr"||n==="rl")&&(zl(e),ac(e))},ac=e=>{e.nodes().forEach(t=>{xi(e.node(t))}),e.edges().forEach(t=>{xi(e.edge(t))})},xi=e=>{const t=e.width;e.width=e.height,e.height=t},hf=e=>{e.nodes().forEach(t=>{ou(e.node(t))}),e.edges().forEach(t=>{var n;const r=e.edge(t);(n=r.points)===null||n===void 0||n.forEach(o=>ou(o)),r.hasOwnProperty("y")&&ou(r)})},ou=e=>{e!=null&&e.y&&(e.y=-e.y)},zl=e=>{e.nodes().forEach(t=>{sc(e.node(t))}),e.edges().forEach(t=>{var n;const r=e.edge(t);(n=r.points)===null||n===void 0||n.forEach(o=>sc(o)),r.hasOwnProperty("x")&&sc(r)})},sc=e=>{const t=e.x;e.x=e.y,e.y=t};var vf={adjust:Dr,undo:df};function uc(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],r=1;r<t;r++)n=Math.max(n,e[r]);return n}var cc=e=>{const t={},n=e.nodes().filter(f=>{var l;return!(!((l=e.children(f))===null||l===void 0)&&l.length)}),r=n.map(f=>e.node(f).rank),o=uc(r),i=[];for(let f=0;f<o+1;f++)i.push([]);const a=f=>{var l;if(t.hasOwnProperty(f))return;t[f]=!0;const d=e.node(f);isNaN(d.rank)||i[d.rank].push(f),(l=e.successors(f))===null||l===void 0||l.forEach(h=>a(h))},s=n.sort((f,l)=>e.node(f).rank-e.node(l).rank),c=s.filter(f=>e.node(f).fixorder!==void 0).sort((f,l)=>e.node(f).fixorder-e.node(l).fixorder);return c==null||c.forEach(f=>{isNaN(e.node(f).rank)||i[e.node(f).rank].push(f),t[f]=!0}),s==null||s.forEach(a),i};const Bl=(e,t,n)=>{const r=cs(n,n.map((f,l)=>l)),i=t.map(f=>{var l;const d=(l=e.outEdges(f))===null||l===void 0?void 0:l.map(h=>({pos:r[h.w]||0,weight:e.edge(h).weight}));return d==null?void 0:d.sort((h,v)=>h.pos-v.pos)}).flat().filter(f=>f!==void 0);let a=1;for(;a<n.length;)a<<=1;const s=2*a-1;a-=1;const u=Array(s).fill(0,0,s);let c=0;return i==null||i.forEach(f=>{if(f){let l=f.pos+a;u[l]+=f.weight;let d=0;for(;l>0;)l%2&&(d+=u[l+1]),l=l-1>>1,u[l]+=f.weight;c+=f.weight*d}}),c};var fc=(e,t)=>{let n=0;for(let r=1;r<(t==null?void 0:t.length);r+=1)n+=Bl(e,t[r-1],t[r]);return n};const Vl=(e,t,n)=>{const r=iu(e),o=new Zn({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{var a;const s=e.node(i),u=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(o.setNode(i),o.setParent(i,u||r),(a=e[n](i))===null||a===void 0||a.forEach(c=>{const f=c.v===i?c.w:c.v,l=o.edgeFromArgs(f,i),d=l!==void 0?l.weight:0;o.setEdge(f,i,{weight:e.edge(c).weight+d})}),s.hasOwnProperty("minRank")&&o.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),o},iu=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t};var $l=Vl,au=(e,t,n)=>{const r={};let o;n==null||n.forEach(i=>{let a=e.parent(i),s,u;for(;a;){if(s=e.parent(a),s?(u=r[s],r[s]=a):(u=o,o=a),u&&u!==a){t.setEdge(u,a);return}a=s}})},mf=(e,t)=>t.map(n=>{const r=e.inEdges(n);if(!(r!=null&&r.length))return{v:n};{const o={sum:0,weight:0};return r==null||r.forEach(i=>{const a=e.edge(i),s=e.node(i.v);o.sum+=a.weight*s.order,o.weight+=a.weight}),{v:n,barycenter:o.sum/o.weight,weight:o.weight}}});const gf=(e,t)=>{var n,r,o;const i={};e==null||e.forEach((s,u)=>{i[s.v]={i:u,indegree:0,in:[],out:[],vs:[s.v]};const c=i[s.v];s.barycenter!==void 0&&(c.barycenter=s.barycenter,c.weight=s.weight)}),(n=t.edges())===null||n===void 0||n.forEach(s=>{const u=i[s.v],c=i[s.w];u!==void 0&&c!==void 0&&(c.indegree++,u.out.push(i[s.w]))});const a=(o=(r=Object.values(i)).filter)===null||o===void 0?void 0:o.call(r,s=>!s.indegree);return yf(a)},yf=e=>{var t,n;const r=[],o=u=>c=>{c.merged||(c.barycenter===void 0||u.barycenter===void 0||c.barycenter>=u.barycenter)&&Ef(u,c)},i=u=>c=>{c.in.push(u),--c.indegree===0&&e.push(c)};for(;e!=null&&e.length;){const u=e.pop();r.push(u),(t=u.in.reverse())===null||t===void 0||t.forEach(c=>o(u)(c)),(n=u.out)===null||n===void 0||n.forEach(c=>i(u)(c))}const a=r.filter(u=>!u.merged),s=["vs","i","barycenter","weight"];return a.map(u=>{const c={};return s==null||s.forEach(f=>{u[f]!==void 0&&(c[f]=u[f])}),c})},Ef=(e,t)=>{var n;let r=0,o=0;e.weight&&(r+=e.barycenter*e.weight,o+=e.weight),t.weight&&(r+=t.barycenter*t.weight,o+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=r/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0};var bf=gf;const xf=(e,t,n,r)=>{const o=jo(e,d=>{const h=d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder);return r?!h&&d.hasOwnProperty("barycenter"):h||d.hasOwnProperty("barycenter")}),i=o.lhs,a=o.rhs.sort((d,h)=>-d.i- -h.i),s=[];let u=0,c=0,f=0;i==null||i.sort(_f(!!t,!!n)),f=lc(s,a,f),i==null||i.forEach(d=>{var h;f+=(h=d.vs)===null||h===void 0?void 0:h.length,s.push(d.vs),u+=d.barycenter*d.weight,c+=d.weight,f=lc(s,a,f)});const l={vs:s.flat()};return c&&(l.barycenter=u/c,l.weight=c),l},lc=(e,t,n)=>{let r=n,o;for(;t.length&&(o=t[t.length-1]).i<=r;)t.pop(),e==null||e.push(o.vs),r++;return r},_f=(e,t)=>(n,r)=>{if(n.fixorder!==void 0&&r.fixorder!==void 0)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(t&&n.order!==void 0&&r.order!==void 0){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return e?r.i-n.i:n.i-r.i};var xo=xf;const dc=(e,t,n,r,o,i)=>{var a,s,u,c;let f=e.children(t);const l=e.node(t),d=l?l.borderLeft:void 0,h=l?l.borderRight:void 0,v={};d&&(f=f==null?void 0:f.filter(g=>g!==d&&g!==h));const m=mf(e,f||[]);m==null||m.forEach(g=>{var b;if(!((b=e.children(g.v))===null||b===void 0)&&b.length){const _=dc(e,g.v,n,r,i);v[g.v]=_,_.hasOwnProperty("barycenter")&&Yo(g,_)}});const y=bf(m,n);Wl(y,v),(a=y.filter(g=>g.vs.length>0))===null||a===void 0||a.forEach(g=>{const b=e.node(g.vs[0]);b&&(g.fixorder=b.fixorder,g.order=b.order)});const E=xo(y,r,o,i);if(d&&(E.vs=[d,E.vs,h].flat(),!((s=e.predecessors(d))===null||s===void 0)&&s.length)){const g=e.node(((u=e.predecessors(d))===null||u===void 0?void 0:u[0])||""),b=e.node(((c=e.predecessors(h))===null||c===void 0?void 0:c[0])||"");E.hasOwnProperty("barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+g.order+b.order)/(E.weight+2),E.weight+=2}return E},Wl=(e,t)=>{e==null||e.forEach(n=>{var r;const o=(r=n.vs)===null||r===void 0?void 0:r.map(i=>t[i]?t[i].vs:i);n.vs=o.flat()})},Yo=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)};var hc=dc;const Ki=(e,t)=>{const n=Mo(e),r=[],o=[];for(let f=1;f<n+1;f++)r.push(f);for(let f=n-1;f>-1;f--)o.push(f);const i=vs(e,r,"inEdges"),a=vs(e,o,"outEdges");let s=cc(e);su(e,s);let u=Number.POSITIVE_INFINITY,c;for(let f=0,l=0;l<4;++f,++l){vc(f%2?i:a,f%4>=2,!1,t),s=Lo(e);const d=fc(e,s);d<u&&(l=0,c=on(s),u=d)}s=cc(e),su(e,s);for(let f=0,l=0;l<4;++f,++l){vc(f%2?i:a,f%4>=2,!0,t),s=Lo(e);const d=fc(e,s);d<u&&(l=0,c=on(s),u=d)}su(e,c)},vs=(e,t,n)=>t.map(r=>$l(e,r,n)),vc=(e,t,n,r)=>{const o=new Zn;e==null||e.forEach(i=>{var a;const s=i.graph().root,u=hc(i,s,o,t,n,r);for(let c=0;c<((a=u.vs)===null||a===void 0?void 0:a.length);c++){const f=i.node(u.vs[c]);f&&(f.order=c)}au(i,o,u.vs)})},su=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((r,o)=>{e.node(r).order=o})})};var wf=Ki;function Sf(e){return Array.isArray(e)}var pc=function(e){if(Sf(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])};class Hl extends sr{}const Tf=(e,t)=>{const n={},r=(o,i)=>{let a=0,s=0;const u=o.length,c=i==null?void 0:i[(i==null?void 0:i.length)-1];return i==null||i.forEach((f,l)=>{var d;const h=Zl(e,f),v=h?e.node(h).order:u;(h||f===c)&&((d=i.slice(s,l+1))===null||d===void 0||d.forEach(m=>{var y;(y=e.predecessors(m))===null||y===void 0||y.forEach(E=>{var g;const b=e.node(E),_=b.order;(_<a||v<_)&&!(b.dummy&&(!((g=e.node(m))===null||g===void 0)&&g.dummy))&&Af(n,E,m)})}),s=l+1,a=v)}),i};return t!=null&&t.length&&t.reduce(r),n},If=(e,t)=>{const n={};function r(s,u,c,f,l){var d,h;let v;for(let m=u;m<c;m++)v=s[m],!((d=e.node(v))===null||d===void 0)&&d.dummy&&((h=e.predecessors(v))===null||h===void 0||h.forEach(y=>{const E=e.node(y);E.dummy&&(E.order<f||E.order>l)&&Af(n,y,v)}))}function o(s){return JSON.stringify(s.slice(1))}function i(s,u){const c=o(s);u.get(c)||(r(...s),u.set(c,!0))}const a=(s,u)=>{let c=-1,f,l=0;const d=new Map;return u==null||u.forEach((h,v)=>{var m;if(((m=e.node(h))===null||m===void 0?void 0:m.dummy)==="border"){const y=e.predecessors(h)||[];y.length&&(f=e.node(y[0]).order,i([u,l,v,c,f],d),l=v,c=f)}i([u,l,u.length,f,s.length],d)}),u};return t!=null&&t.length&&t.reduce(a),n},Zl=(e,t)=>{var n,r;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(r=e.predecessors(t))===null||r===void 0?void 0:r.find(o=>e.node(o).dummy)},Af=(e,t,n)=>{let r=t,o=n;if(r>o){const a=r;r=o,o=a}let i=e[r];i||(e[r]=i={}),i[o]=!0},jl=(e,t,n)=>{let r=t,o=n;if(r>o){const i=t;r=o,o=i}return!!e[r]},Nf=(e,t,n,r)=>{const o={},i={},a={};return t==null||t.forEach(s=>{s==null||s.forEach((u,c)=>{o[u]=u,i[u]=u,a[u]=c})}),t==null||t.forEach(s=>{let u=-1;s==null||s.forEach(c=>{let f=r(c);if(f.length){f=f.sort((d,h)=>a[d]-a[h]);const l=(f.length-1)/2;for(let d=Math.floor(l),h=Math.ceil(l);d<=h;++d){const v=f[d];i[c]===c&&u<a[v]&&!jl(n,c,v)&&(i[v]=c,i[c]=o[c]=o[v],u=a[v])}}})}),{root:o,align:i}},mc=(e,t,n,r,o)=>{var i;const a={},s=Rf(e,t,n,o),u=o?"borderLeft":"borderRight",c=(d,h)=>{let v=s.nodes(),m=v.pop();const y={};for(;m;)y[m]?d(m):(y[m]=!0,v.push(m),v=v.concat(h(m))),m=v.pop()},f=d=>{a[d]=(s.inEdges(d)||[]).reduce((h,v)=>Math.max(h,(a[v.v]||0)+s.edge(v)),0)},l=d=>{const h=(s.outEdges(d)||[]).reduce((m,y)=>Math.min(m,(a[y.w]||0)-s.edge(y)),Number.POSITIVE_INFINITY),v=e.node(d);h!==Number.POSITIVE_INFINITY&&v.borderType!==u&&(a[d]=Math.max(a[d],h))};return c(f,s.predecessors.bind(s)),c(l,s.successors.bind(s)),(i=Object.values(r))===null||i===void 0||i.forEach(d=>{a[d]=a[n[d]]}),a},Rf=(e,t,n,r)=>{const o=new Hl,i=e.graph(),a=Yl(i.nodesep,i.edgesep,r);return t==null||t.forEach(s=>{let u;s==null||s.forEach(c=>{const f=n[c];if(o.setNode(f),u){const l=n[u],d=o.edgeFromArgs(l,f);o.setEdge(l,f,Math.max(a(e,c,u),d||0))}u=c})}),o},Df=(e,t)=>Ei(Object.values(t),n=>{var r;let o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return(r=Object.keys(n))===null||r===void 0||r.forEach(a=>{const s=n[a],u=Kl(e,a)/2;o=Math.max(s+u,o),i=Math.min(s-u,i)}),o-i});function Cf(e,t){const n=Object.values(t),r=pc(n),o=uc(n);["u","d"].forEach(i=>{["l","r"].forEach(a=>{const s=i+a,u=e[s];let c;if(u===t)return;const f=Object.values(u);c=a==="l"?r-pc(f):o-uc(f),c&&(e[s]={},Object.keys(u).forEach(l=>{e[s][l]=u[l]+c}))})})}const uu=(e,t)=>{const n={};return Object.keys(e.ul).forEach(r=>{if(t)n[r]=e[t.toLowerCase()][r];else{const o=Object.values(e).map(i=>i[r]);n[r]=(o[0]+o[1])/2}}),n},gc=e=>{const t=buildLayerMatrix(e),n=Object.assign(Tf(e,t),If(e,t)),r={};let o;["u","d"].forEach(a=>{o=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(s=>{s==="r"&&(o=o.map(l=>Object.values(l).reverse()));const u=(a==="u"?e.predecessors:e.successors).bind(e),c=Nf(e,o,n,u),f=mc(e,o,c.root,c.align,s==="r");s==="r"&&Object.keys(f).forEach(l=>{f[l]=-f[l]}),r[a+s]=f})});const i=Df(e,r);return Cf(r,i),uu(r,e.graph().align)},Yl=(e,t,n)=>(r,o,i)=>{const a=r.node(o),s=r.node(i);let u=0,c;if(u+=a.width/2,a.hasOwnProperty("labelpos"))switch((a.labelpos||"").toLowerCase()){case"l":c=-a.width/2;break;case"r":c=a.width/2;break}if(c&&(u+=n?c:-c),c=0,u+=(a.dummy?t:e)/2,u+=(s.dummy?t:e)/2,u+=s.width/2,s.labelpos)switch((s.labelpos||"").toLowerCase()){case"l":c=s.width/2;break;case"r":c=-s.width/2;break}return c&&(u+=n?c:-c),c=0,u},Kl=(e,t)=>e.node(t).width||0,ql=e=>{const t=Lo(e),n=e.graph().ranksep;let r=0;t==null||t.forEach(o=>{const i=o.map(s=>e.node(s).height),a=Math.max(...i,0);o==null||o.forEach(s=>{e.node(s).y=r+a/2}),r+=a+n})},Ql=e=>{const t=Lo(e),n=Object.assign(Tf(e,t),If(e,t)),r={};let o=[];["u","d"].forEach(a=>{o=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(s=>{s==="r"&&(o=o.map(l=>Object.values(l).reverse()));const u=(a==="u"?e.predecessors:e.successors).bind(e),c=Nf(e,o,n,u),f=mc(e,o,c.root,c.align,s==="r");s==="r"&&Object.keys(f).forEach(l=>f[l]=-f[l]),r[a+s]=f})});const i=Df(e,r);return i&&Cf(r,i),uu(r,e.graph().align)};var Of=e=>{var t;const n=Oa(e);ql(n);const r=Ql(n);(t=Object.keys(r))===null||t===void 0||t.forEach(o=>{n.node(o).x=r[o]})},Jl=(e,t)=>{const r=e.nodes().filter(a=>{var s;return!(!((s=e.children(a))===null||s===void 0)&&s.length)}).map(a=>e.node(a).rank),o=Math.max(...r),i=[];for(let a=0;a<o+1;a++)i[a]=[];t==null||t.forEach(a=>{const s=e.node(a);!s||s!=null&&s.dummy||isNaN(s.rank)||(s.fixorder=i[s.rank].length,i[s.rank].push(a))})};const ed=(e,t)=>{const n=t&&t.debugTiming?gi:yi;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{nd(e,t.prevGraph)});const r=n("  buildLayoutGraph",()=>sd(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{ud(r)});try{n("  runLayout",()=>{td(r,n,t)})}catch(o){if(o.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,o);return}throw o}n("  updateInputGraph",()=>{Ga(e,r)})})},td=(e,t,n)=>{t("    removeSelfEdges",()=>{za(e)}),t("    acyclic",()=>{pi.run(e)}),t("    nestingGraph.run",()=>{ic.run(e)}),t("    rank",()=>{sf(Oa(e))}),t("    injectEdgeLabelProxies",()=>{cd(e)}),t("    removeEmptyRanks",()=>{ls(e)}),t("    nestingGraph.cleanup",()=>{ic.cleanup(e)}),t("    normalizeRanks",()=>{Hi(e)}),t("    assignRankMinMax",()=>{ps(e)}),t("    removeEdgeLabelProxies",()=>{fd(e)}),t("    normalize.run",()=>{xn.run(e)}),t("    parentDummyChains",()=>{ho(e)}),t("    addBorderSegments",()=>{ka(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{Jl(e,n.nodeOrder)}),t("    order",()=>{wf(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{Mf(e)}),t("    adjustCoordinateSystem",()=>{vf.adjust(e)}),t("    position",()=>{Of(e)}),t("    positionSelfEdges",()=>{Ba(e)}),t("    removeBorderNodes",()=>{dd(e)}),t("    normalize.undo",()=>{xn.undo(e)}),t("    fixupEdgeLabelCoords",()=>{Pa(e)}),t("    undoCoordinateSystem",()=>{vf.undo(e)}),t("    translateGraph",()=>{fu(e)}),t("    assignNodeIntersects",()=>{ld(e)}),t("    reversePoints",()=>{Fa(e)}),t("    acyclic.undo",()=>{pi.undo(e)})},nd=(e,t)=>{e.nodes().forEach(n=>{const r=e.node(n),o=t.node(n);o!==void 0?(r.fixorder=o._order,delete o._order):delete r.fixorder})},Ga=(e,t)=>{e.nodes().forEach(n=>{var r;const o=e.node(n);if(o){const i=t.node(n);o.x=i.x,o.y=i.y,o._order=i.order,o._rank=i.rank,!((r=t.children(n))===null||r===void 0)&&r.length&&(o.width=i.width,o.height=i.height)}}),e.edges().forEach(n=>{const r=e.edge(n),o=t.edge(n);r.points=o?o.points:[],o&&o.hasOwnProperty("x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},rd=["nodesep","edgesep","ranksep","marginx","marginy"],od={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},cu=["acyclicer","ranker","rankdir","align"],yc=["width","height","layer","fixorder"],id={width:0,height:0},Lf=["minlen","weight","width","height","labeloffset"],ad={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ec=["labelpos"],sd=e=>{const t=new Zn({multigraph:!0,compound:!0}),n=gs(e.graph()),r={};return cu==null||cu.forEach(o=>{n[o]!==void 0&&(r[o]=n[o])}),t.setGraph(Object.assign({},od,ms(n,rd),r)),e.nodes().forEach(o=>{const i=gs(e.node(o)),a=Object.assign(Object.assign({},id),i),s=ms(a,yc);t.setNode(o,s),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{const i=gs(e.edge(o)),a={};Ec==null||Ec.forEach(s=>{i[s]!==void 0&&(a[s]=i[s])}),t.setEdgeObj(o,Object.assign({},ad,ms(i,Lf),a))}),t},ud=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const r=e.node(n);isNaN(r.layer)||r.layer||(r.layer=0)}),e.edges().forEach(n=>{var r;const o=e.edge(n);o.minlen*=2,((r=o.labelpos)===null||r===void 0?void 0:r.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})},cd=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const r=e.node(t.v),o=e.node(t.w),i={e:t,rank:(o.rank-r.rank)/2+r.rank};Zo(e,"edge-proxy",i,"_ep")}})},ps=e=>{let t=0;e.nodes().forEach(n=>{var r,o;const i=e.node(n);i.borderTop&&(i.minRank=(r=e.node(i.borderTop))===null||r===void 0?void 0:r.rank,i.maxRank=(o=e.node(i.borderBottom))===null||o===void 0?void 0:o.rank,t=Math.max(t,i.maxRank||-1/0))}),e.graph().maxRank=t},fd=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},fu=e=>{let t,n=0,r,o=0;const i=e.graph(),a=i.marginx||0,s=i.marginy||0,u=c=>{if(!c)return;const f=c.x,l=c.y,d=c.width,h=c.height;!isNaN(f)&&!isNaN(d)&&(t===void 0&&(t=f-d/2),t=Math.min(t,f-d/2),n=Math.max(n,f+d/2)),!isNaN(l)&&!isNaN(h)&&(r===void 0&&(r=l-h/2),r=Math.min(r,l-h/2),o=Math.max(o,l+h/2))};e.nodes().forEach(c=>{u(e.node(c))}),e.edges().forEach(c=>{const f=e.edge(c);f!=null&&f.hasOwnProperty("x")&&u(f)}),t-=a,r-=s,e.nodes().forEach(c=>{const f=e.node(c);f&&(f.x-=t,f.y-=r)}),e.edges().forEach(c=>{var f;const l=e.edge(c);(f=l.points)===null||f===void 0||f.forEach(d=>{d.x-=t,d.y-=r}),l.hasOwnProperty("x")&&(l.x-=t),l.hasOwnProperty("y")&&(l.y-=r)}),i.width=n-t+a,i.height=o-r+s},ld=e=>{e.edges().forEach(t=>{const n=e.edge(t),r=e.node(t.v),o=e.node(t.w);let i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=o,a=r),n.points.unshift(Js(r,i)),n.points.push(Js(o,a))})},Pa=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},Fa=e=>{e.edges().forEach(t=>{var n;const r=e.edge(t);r.reversed&&((n=r.points)===null||n===void 0||n.reverse())})},dd=e=>{e.nodes().forEach(t=>{var n,r,o;if(!((n=e.children(t))===null||n===void 0)&&n.length){const i=e.node(t),a=e.node(i.borderTop),s=e.node(i.borderBottom),u=e.node(i.borderLeft[((r=i.borderLeft)===null||r===void 0?void 0:r.length)-1]),c=e.node(i.borderRight[((o=i.borderRight)===null||o===void 0?void 0:o.length)-1]);i.width=Math.abs((c==null?void 0:c.x)-(u==null?void 0:u.x))||10,i.height=Math.abs((s==null?void 0:s.y)-(a==null?void 0:a.y))||10,i.x=((u==null?void 0:u.x)||0)+i.width/2,i.y=((a==null?void 0:a.y)||0)+i.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},za=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},Mf=e=>{const t=Lo(e);t==null||t.forEach(n=>{let r=0;n==null||n.forEach((o,i)=>{var a;const s=e.node(o);s.order=i+r,(a=s.selfEdges)===null||a===void 0||a.forEach(u=>{Zo(e,"selfedge",{width:u.label.width,height:u.label.height,rank:s.rank,order:i+ ++r,e:u.e,label:u.label},"_se")}),delete s.selfEdges})})},Ba=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const r=e.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,s=r.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{y:i,x:o+a},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})},ms=(e,t)=>{const n={};return t==null||t.forEach(r=>{e[r]!==void 0&&(n[r]=+e[r])}),n},gs=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t};var bc=ed,xc={layout:bc,util:{time:gi,notime:yi}};class ys extends Dt{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const r=this,{nodes:o}=r,i=o.find(a=>a.id===n);return i?i.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,r,o;const i=this,{nodes:a,nodeSize:s,rankdir:u,combos:c,begin:f,radial:l,comboEdges:d=[],vedges:h=[]}=i;if(!a)return;const v=i.edges||[],m=new Zn({multigraph:!0,compound:!0});i.nodeMap={};const y={};a.forEach(G=>{i.nodeMap[G.id]=G,G.comboId&&(y[G.comboId]=y[G.comboId]||[],y[G.comboId].push(G.id))});let E=[];const g={};!((t=i.nodeOrder)===null||t===void 0)&&t.length?(i.nodeOrder.forEach(G=>{g[G]=!0,E.push(i.nodeMap[G])}),a.forEach(G=>{g[G.id]||E.push(G)})):E=a;let b;s?it(s)?b=()=>s:b=()=>[s,s]:b=G=>G.size?it(G.size)?G.size:ht(G.size)?[G.size.width||40,G.size.height||40]:[G.size,G.size]:[40,40];const _=bn(i.ranksep,50,i.ranksepFunc),S=bn(i.nodesep,50,i.nodesepFunc);let V=S,fe=_;(u==="LR"||u==="RL")&&(V=_,fe=S),m.setDefaultEdgeLabel(()=>({})),m.setGraph(i);const ne={};this.sortByCombo&&c&&c.forEach(G=>{if(ne[G.id]=G,G.collapsed){const Ee=b(G),ke=fe(G),Ue=V(G),pt=Ee[0]+2*Ue,Ke=Ee[1]+2*ke;m.setNode(G.id,{width:pt,height:Ke})}G.parentId&&(ne[G.parentId]||m.setNode(G.parentId,{}),m.setParent(G.id,G.parentId))}),E.filter(G=>G.layout!==!1).forEach(G=>{const Ee=b(G),ke=fe(G),Ue=V(G),pt=Ee[0]+2*Ue,Ke=Ee[1]+2*ke,bt=G.layer;le(bt)?m.setNode(G.id,{width:pt,height:Ke,layer:bt}):m.setNode(G.id,{width:pt,height:Ke}),this.sortByCombo&&G.comboId&&(ne[G.comboId]||(ne[G.comboId]={id:G.comboId},m.setNode(G.comboId,{})),m.setParent(G.id,G.comboId))}),v.forEach(G=>{const Ee=Je(G,"source"),ke=Je(G,"target");this.layoutNode(Ee)&&this.layoutNode(ke)&&m.setEdge(Ee,ke,{weight:G.weight||1})}),(n=d==null?void 0:d.concat(h||[]))===null||n===void 0||n.forEach(G=>{var Ee,ke;const{source:Ue,target:pt}=G,Ke=!((Ee=ne[Ue])===null||Ee===void 0)&&Ee.collapsed?[Ue]:y[Ue]||[Ue],bt=!((ke=ne[pt])===null||ke===void 0)&&ke.collapsed?[pt]:y[pt]||[pt];Ke.forEach(dt=>{bt.forEach(Vt=>{m.setEdge(dt,Vt,{weight:G.weight||1})})})});let K;!((r=i.preset)===null||r===void 0)&&r.nodes&&(K=new Zn({multigraph:!0,compound:!0}),i.preset.nodes.forEach(G=>{K==null||K.setNode(G.id,G)})),xc.layout(m,{prevGraph:K,edgeLabelSpace:i.edgeLabelSpace,keepNodeOrder:!!i.nodeOrder,nodeOrder:i.nodeOrder});const J=[0,0];if(f){let G=1/0,Ee=1/0;m.nodes().forEach(ke=>{const Ue=m.node(ke);G>Ue.x&&(G=Ue.x),Ee>Ue.y&&(Ee=Ue.y)}),m.edges().forEach(ke=>{var Ue;(Ue=m.edge(ke).points)===null||Ue===void 0||Ue.forEach(Ke=>{G>Ke.x&&(G=Ke.x),Ee>Ke.y&&(Ee=Ke.y)})}),J[0]=f[0]-G,J[1]=f[1]-Ee}const ge=u==="LR"||u==="RL";if(l){const{focusNode:G,ranksep:Ee,getRadialPos:ke}=this,Ue=gt(G)?G:G==null?void 0:G.id,pt=Ue?(o=m.node(Ue))===null||o===void 0?void 0:o._rank:0,Ke=[],bt=ge?"y":"x",dt=ge?"height":"width";let Vt=1/0,un=-1/0;m.nodes().forEach($e=>{const ft=m.node($e);if(!i.nodeMap[$e])return;const Ln=S(i.nodeMap[$e]);if(pt===0)Ke[ft._rank]||(Ke[ft._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ke[ft._rank].nodes.push($e),Ke[ft._rank].totalWidth+=Ln*2+ft[dt],Ke[ft._rank].maxSize<Math.max(ft.width,ft.height)&&(Ke[ft._rank].maxSize=Math.max(ft.width,ft.height));else{const cn=ft._rank-pt;if(cn===0)Ke[cn]||(Ke[cn]={nodes:[],totalWidth:0,maxSize:-1/0}),Ke[cn].nodes.push($e),Ke[cn].totalWidth+=Ln*2+ft[dt],Ke[cn].maxSize<Math.max(ft.width,ft.height)&&(Ke[cn].maxSize=Math.max(ft.width,ft.height));else{const Mn=Math.abs(cn);Ke[Mn]||(Ke[Mn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ke[Mn].totalWidth+=Ln*2+ft[dt],Ke[Mn].maxSize<Math.max(ft.width,ft.height)&&(Ke[Mn].maxSize=Math.max(ft.width,ft.height)),cn<0?Ke[Mn].left.push($e):Ke[Mn].right.push($e)}}const $t=ft[bt]-ft[dt]/2-Ln,Wn=ft[bt]+ft[dt]/2+Ln;$t<Vt&&(Vt=$t),Wn>un&&(un=Wn)});let Qn=Ee||50;const or={},We=(un-Vt)/.9,rn=[(Vt+un-We)*.5,(Vt+un+We)*.5],hr=($e,ft,Ln=-1/0,$t=[0,1])=>{let Wn=Ln;return $e.forEach(cn=>{const Mn=m.node(cn);or[cn]=ft;const{x:Gr,y:Rr}=ke(Mn[bt],rn,We,ft,$t);if(!i.nodeMap[cn])return;i.nodeMap[cn].x=Gr+J[0],i.nodeMap[cn].y=Rr+J[1],i.nodeMap[cn]._order=Mn._order;const qr=_(i.nodeMap[cn]);Wn<qr&&(Wn=qr)}),Wn};let yn=!0;const zn=0;Ke.forEach($e=>{var ft,Ln,$t,Wn,cn,Mn,Gr;if(!(!((ft=$e==null?void 0:$e.nodes)===null||ft===void 0)&&ft.length)&&!(!((Ln=$e==null?void 0:$e.left)===null||Ln===void 0)&&Ln.length)&&!(!(($t=$e==null?void 0:$e.right)===null||$t===void 0)&&$t.length))return;if(yn&&$e.nodes.length===1){const qr=$e.nodes[0];if(!i.nodeMap[qr])return;i.nodeMap[qr].x=J[0],i.nodeMap[qr].y=J[1],or[$e.nodes[0]]=0,Qn=_(i.nodeMap[qr]),yn=!1;return}Qn=Math.max(Qn,$e.totalWidth/(2*Math.PI));let Rr=-1/0;if(pt===0||!((Wn=$e.nodes)===null||Wn===void 0)&&Wn.length)Rr=hr($e.nodes,Qn,Rr,[0,1]);else{const qr=((cn=$e.left)===null||cn===void 0?void 0:cn.length)/(((Mn=$e.left)===null||Mn===void 0?void 0:Mn.length)+((Gr=$e.right)===null||Gr===void 0?void 0:Gr.length));Rr=hr($e.left,Qn,Rr,[0,qr]),Rr=hr($e.right,Qn,Rr,[qr+.05,1])}Qn+=Rr,yn=!1,zn-$e.maxSize}),m.edges().forEach($e=>{var ft,Ln,$t;const Wn=m.edge($e),cn=v.findIndex(Mn=>{const Gr=Je(Mn,"source"),Rr=Je(Mn,"target");return Gr===$e.v&&Rr===$e.w});if(!(cn<=-1)&&i.edgeLabelSpace&&i.controlPoints&&v[cn].type!=="loop"){const Mn=bt==="x"?"y":"x",Gr=(ft=Wn==null?void 0:Wn.points)===null||ft===void 0?void 0:ft.slice(1,Wn.points.length-1),Rr=[],qr=(Ln=m.node($e.v))===null||Ln===void 0?void 0:Ln[Mn],Xc=qr-(($t=m.node($e.w))===null||$t===void 0?void 0:$t[Mn]),Qr=or[$e.v],Cs=Qr-or[$e.w];Gr==null||Gr.forEach(Os=>{const Ou=(Os[Mn]-qr)/Xc*Cs+Qr,Qa=ke(Os[bt],rn,We,Ou);Rr.push({x:Qa.x+J[0],y:Qa.y+J[1]})}),v[cn].controlPoints=Rr}})}else{const G=new Set,ke=u==="BT"||u==="RL"?(bt,dt)=>dt-bt:(bt,dt)=>bt-dt;m.nodes().forEach(bt=>{const dt=m.node(bt);if(!dt)return;let Vt=this.nodeMap[bt];Vt||(Vt=c==null?void 0:c.find(un=>un.id===bt)),Vt&&(Vt.x=dt.x+J[0],Vt.y=dt.y+J[1],Vt._order=dt._order,G.add(ge?Vt.x:Vt.y))});const Ue=Array.from(G).sort(ke),pt=ge?(bt,dt)=>bt.x!==dt.x:(bt,dt)=>bt.y!==dt.y,Ke=ge?(bt,dt,Vt)=>{const un=Math.max(dt.y,Vt.y),Qn=Math.min(dt.y,Vt.y);return bt.filter(or=>or.y<=un&&or.y>=Qn)}:(bt,dt,Vt)=>{const un=Math.max(dt.x,Vt.x),Qn=Math.min(dt.x,Vt.x);return bt.filter(or=>or.x<=un&&or.x>=Qn)};m.edges().forEach(bt=>{var dt;const Vt=m.edge(bt),un=v.findIndex(Qn=>{const or=Je(Qn,"source"),We=Je(Qn,"target");return or===bt.v&&We===bt.w});if(!(un<=-1)&&i.edgeLabelSpace&&i.controlPoints&&v[un].type!=="loop"){(dt=Vt==null?void 0:Vt.points)===null||dt===void 0||dt.forEach(We=>{We.x+=J[0],We.y+=J[1]});const Qn=i.nodeMap[bt.v],or=i.nodeMap[bt.w];v[un].controlPoints=lu(Vt==null?void 0:Vt.points,Qn,or,Ue,ge,pt,Ke)}})}return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:a,edges:v}}getRadialPos(t,n,r,o,i=[0,1]){let a=(t-n[0])/r;a=a*(i[1]-i[0])+i[0];const s=a*2*Math.PI;return{x:Math.cos(s)*o,y:Math.sin(s)*o}}getType(){return"dagre"}}const lu=(e,t,n,r,o,i,a)=>{let s=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:u,y:c}=t,{x:f,y:l}=n;if(o&&(u=t.y,c=t.x,f=n.y,l=n.x),l!==c&&u!==f){const d=r.indexOf(c),h=r[d+1];if(h){const y=s[0],E=o?{x:(c+h)/2,y:(y==null?void 0:y.y)||f}:{x:(y==null?void 0:y.x)||f,y:(c+h)/2};(!y||i(y,E))&&s.unshift(E)}const v=r.indexOf(l),m=Math.abs(v-d);if(m===1)s=a(s,t,n),s.length||s.push(o?{x:(c+l)/2,y:u}:{x:u,y:(c+l)/2});else if(m>1){const y=r[v-1];if(y){const E=s[s.length-1],g=o?{x:(l+y)/2,y:(E==null?void 0:E.y)||f}:{x:(E==null?void 0:E.x)||u,y:(l+y)/2};(!E||i(E,g))&&s.push(g)}}}}return s},Es={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function bs(e={},t=Es){var n,r,o,i;const a=JSON.parse(JSON.stringify(t)),s=((n=e==null?void 0:e.graph)===null||n===void 0?void 0:n.meta)||{},u=((r=e==null?void 0:e.subScene)===null||r===void 0?void 0:r.meta)||{},c=((o=e==null?void 0:e.nodeSize)===null||o===void 0?void 0:o.meta)||{},f=((i=e==null?void 0:e.nodeSize)===null||i===void 0?void 0:i.node)||{},l=a.nodeSize.bridge;return{graph:{meta:Object.assign(a.graph.meta,s)},subScene:{meta:Object.assign(a.subScene.meta,u)},nodeSize:{meta:Object.assign(a.nodeSize.meta,c),node:Object.assign(a.nodeSize.node,f),bridge:l}}}function _c(e){return`\u25EC${e}\u25EC`}const qi=_c("ROOT"),kf=_c("BRIDGE_GRAPH");var Mr,_i,Ua,xs;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(Mr||(Mr={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(_i||(_i={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(Ua||(Ua={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(xs||(xs={}));var _s=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Z.g!="undefined"?Z.g:typeof self!="undefined"?self:{};function du(e,t){return e(t={exports:{}},t.exports),t.exports}var wc=function(){this.__data__=[],this.size=0},Qi=function(e,t){return e===t||e!=e&&t!=t},ws=function(e,t){for(var n=e.length;n--;)if(Qi(e[n][0],t))return n;return-1},Sc=Array.prototype.splice,Tc=function(e){var t=this.__data__,n=ws(t,e);return!(n<0)&&(n==t.length-1?t.pop():Sc.call(t,n,1),--this.size,!0)},Gf=function(e){var t=this.__data__,n=ws(t,e);return n<0?void 0:t[n][1]},Ic=function(e){return ws(this.__data__,e)>-1},Pf=function(e,t){var n=this.__data__,r=ws(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Ji(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ji.prototype.clear=wc,Ji.prototype.delete=Tc,Ji.prototype.get=Gf,Ji.prototype.has=Ic,Ji.prototype.set=Pf;var Va=Ji,Ff=function(){this.__data__=new Va,this.size=0},zf=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ac=function(e){return this.__data__.get(e)},Nc=function(e){return this.__data__.has(e)},$a=typeof _s=="object"&&_s&&_s.Object===Object&&_s,Bf=typeof self=="object"&&self&&self.Object===Object&&self,to=$a||Bf||Function("return this")(),wr=to.Symbol,Xa=Object.prototype,ea=Xa.hasOwnProperty,Ss=Xa.toString,Ko=wr?wr.toStringTag:void 0,ta=function(e){var t=ea.call(e,Ko),n=e[Ko];try{e[Ko]=void 0;var r=!0}catch(i){}var o=Ss.call(e);return r&&(t?e[Ko]=n:delete e[Ko]),o},na=Object.prototype.toString,ra=function(e){return na.call(e)},Ts=wr?wr.toStringTag:void 0,_o=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Ts&&Ts in Object(e)?ta(e):ra(e)},Cr=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},hu,oa=function(e){if(!Cr(e))return!1;var t=_o(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},wi=to["__core-js_shared__"],ia=(hu=/[^.]+$/.exec(wi&&wi.keys&&wi.keys.IE_PROTO||""))?"Symbol(src)_1."+hu:"",hd=function(e){return!!ia&&ia in e},vd=Function.prototype.toString,Si=function(e){if(e!=null){try{return vd.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Uf=/^\[object .+?Constructor\]$/,Vf=Function.prototype,pd=Object.prototype,Wa=Vf.toString,md=pd.hasOwnProperty,gd=RegExp("^"+Wa.call(md).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yd=function(e){return!(!Cr(e)||hd(e))&&(oa(e)?gd:Uf).test(Si(e))},$f=function(e,t){return e==null?void 0:e[t]},aa=function(e,t){var n=$f(e,t);return yd(n)?n:void 0},Is=aa(to,"Map"),As=aa(Object,"create"),Ed=function(){this.__data__=As?As(null):{},this.size=0},bd=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xd=Object.prototype.hasOwnProperty,_d=function(e){var t=this.__data__;if(As){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return xd.call(t,e)?t[e]:void 0},wd=Object.prototype.hasOwnProperty,Sd=function(e){var t=this.__data__;return As?t[e]!==void 0:wd.call(t,e)},Td=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=As&&t===void 0?"__lodash_hash_undefined__":t,this};function Ti(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ti.prototype.clear=Ed,Ti.prototype.delete=bd,Ti.prototype.get=_d,Ti.prototype.has=Sd,Ti.prototype.set=Td;var Ns=Ti,vu=function(){this.size=0,this.__data__={hash:new Ns,map:new(Is||Va),string:new Ns}},pu=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},Ha=function(e,t){var n=e.__data__;return pu(t)?n[typeof t=="string"?"string":"hash"]:n.map},mu=function(e){var t=Ha(this,e).delete(e);return this.size-=t?1:0,t},gu=function(e){return Ha(this,e).get(e)},yu=function(e){return Ha(this,e).has(e)},Rc=function(e,t){var n=Ha(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function qo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}qo.prototype.clear=vu,qo.prototype.delete=mu,qo.prototype.get=gu,qo.prototype.has=yu,qo.prototype.set=Rc;var sa=qo,Eu=function(e,t){var n=this.__data__;if(n instanceof Va){var r=n.__data__;if(!Is||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new sa(r)}return n.set(e,t),this.size=n.size,this};function ko(e){var t=this.__data__=new Va(e);this.size=t.size}ko.prototype.clear=Ff,ko.prototype.delete=zf,ko.prototype.get=Ac,ko.prototype.has=Nc,ko.prototype.set=Eu;var Go=ko,ua=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e},Ii=function(){try{var e=aa(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Ai=function(e,t,n){t=="__proto__"&&Ii?Ii(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Xf=Object.prototype.hasOwnProperty,Ni=function(e,t,n){var r=e[t];Xf.call(e,t)&&Qi(r,n)&&(n!==void 0||t in e)||Ai(e,t,n)},wo=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;u===void 0&&(u=e[s]),o?Ai(n,s,u):Ni(n,s,u)}return n},Wf=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},uo=function(e){return e!=null&&typeof e=="object"},Hf=function(e){return uo(e)&&_o(e)=="[object Arguments]"},Zf=Object.prototype,Id=Zf.hasOwnProperty,Ri=Zf.propertyIsEnumerable,ca=Hf(function(){return arguments}())?Hf:function(e){return uo(e)&&Id.call(e,"callee")&&!Ri.call(e,"callee")},Yn=Array.isArray,jf=function(){return!1},fa=du(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?to.Buffer:void 0,i=(o?o.isBuffer:void 0)||jf;e.exports=i}),Yf=/^(?:0|[1-9]\d*)$/,bu=function(e,t){var n=typeof e;return!!(t=t==null?9007199254740991:t)&&(n=="number"||n!="symbol"&&Yf.test(e))&&e>-1&&e%1==0&&e<t},vo=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},Cn={};Cn["[object Float32Array]"]=Cn["[object Float64Array]"]=Cn["[object Int8Array]"]=Cn["[object Int16Array]"]=Cn["[object Int32Array]"]=Cn["[object Uint8Array]"]=Cn["[object Uint8ClampedArray]"]=Cn["[object Uint16Array]"]=Cn["[object Uint32Array]"]=!0,Cn["[object Arguments]"]=Cn["[object Array]"]=Cn["[object ArrayBuffer]"]=Cn["[object Boolean]"]=Cn["[object DataView]"]=Cn["[object Date]"]=Cn["[object Error]"]=Cn["[object Function]"]=Cn["[object Map]"]=Cn["[object Number]"]=Cn["[object Object]"]=Cn["[object RegExp]"]=Cn["[object Set]"]=Cn["[object String]"]=Cn["[object WeakMap]"]=!1;var Za=function(e){return uo(e)&&vo(e.length)&&!!Cn[_o(e)]},So=function(e){return function(t){return e(t)}},la=du(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&$a.process,i=function(){try{var a=r&&r.require&&r.require("util").types;return a||o&&o.binding&&o.binding("util")}catch(s){}}();e.exports=i}),xu=la&&la.isTypedArray,Di=xu?So(xu):Za,Kf=Object.prototype.hasOwnProperty,Br=function(e,t){var n=Yn(e),r=!n&&ca(e),o=!n&&!r&&fa(e),i=!n&&!r&&!o&&Di(e),a=n||r||o||i,s=a?Wf(e.length,String):[],u=s.length;for(var c in e)!t&&!Kf.call(e,c)||a&&(c=="length"||o&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||bu(c,u))||s.push(c);return s},Ci=Object.prototype,Pn=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||Ci)},Zr=function(e,t){return function(n){return e(t(n))}},qf=Zr(Object.keys,Object),Ad=Object.prototype.hasOwnProperty,Dc=function(e){if(!Pn(e))return qf(e);var t=[];for(var n in Object(e))Ad.call(e,n)&&n!="constructor"&&t.push(n);return t},Qo=function(e){return e!=null&&vo(e.length)&&!oa(e)},Oi=function(e){return Qo(e)?Br(e):Dc(e)},Qf=function(e,t){return e&&wo(t,Oi(t),e)},Nd=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},Rd=Object.prototype.hasOwnProperty,Dd=function(e){if(!Cr(e))return Nd(e);var t=Pn(e),n=[];for(var r in e)(r!="constructor"||!t&&Rd.call(e,r))&&n.push(r);return n},da=function(e){return Qo(e)?Br(e,!0):Dd(e)},Cd=function(e,t){return e&&wo(t,da(t),e)},Cc=du(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?to.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(a,s){if(s)return a.slice();var u=a.length,c=i?i(u):new a.constructor(u);return a.copy(c),c}}),Oc=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Lc=function(e,t){for(var n=-1,r=e==null?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i},Jf=function(){return[]},Od=Object.prototype.propertyIsEnumerable,Mc=Object.getOwnPropertySymbols,kc=Mc?function(e){return e==null?[]:(e=Object(e),Lc(Mc(e),function(t){return Od.call(e,t)}))}:Jf,p=function(e,t){return wo(e,kc(e),t)},w=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},O=Zr(Object.getPrototypeOf,Object),q=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)w(t,kc(e)),e=O(e);return t}:Jf,ie=function(e,t){return wo(e,q(e),t)},Y=function(e,t,n){var r=t(e);return Yn(e)?r:w(r,n(e))},ee=function(e){return Y(e,Oi,kc)},ve=function(e){return Y(e,da,q)},ye=aa(to,"DataView"),Se=aa(to,"Promise"),he=aa(to,"Set"),Ae=aa(to,"WeakMap"),Le=Si(ye),pe=Si(Is),Re=Si(Se),X=Si(he),te=Si(Ae),me=_o;(ye&&me(new ye(new ArrayBuffer(1)))!="[object DataView]"||Is&&me(new Is)!="[object Map]"||Se&&me(Se.resolve())!="[object Promise]"||he&&me(new he)!="[object Set]"||Ae&&me(new Ae)!="[object WeakMap]")&&(me=function(e){var t=_o(e),n=t=="[object Object]"?e.constructor:void 0,r=n?Si(n):"";if(r)switch(r){case Le:return"[object DataView]";case pe:return"[object Map]";case Re:return"[object Promise]";case X:return"[object Set]";case te:return"[object WeakMap]"}return t});var Me=me,ue=Object.prototype.hasOwnProperty,ze=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ue.call(e,"index")&&(n.index=e.index,n.input=e.input),n},ce=to.Uint8Array,De=function(e){var t=new e.constructor(e.byteLength);return new ce(t).set(new ce(e)),t},de=function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Ce=/\w*$/,et=function(e){var t=new e.constructor(e.source,Ce.exec(e));return t.lastIndex=e.lastIndex,t},lt=wr?wr.prototype:void 0,Oe=lt?lt.valueOf:void 0,Ie=function(e){return Oe?Object(Oe.call(e)):{}},se=function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},ut=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return De(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return de(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return se(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return et(e);case"[object Set]":return new r;case"[object Symbol]":return Ie(e)}},yt=Object.create,Xe=function(){function e(){}return function(t){if(!Cr(t))return{};if(yt)return yt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Tt=function(e){return typeof e.constructor!="function"||Pn(e)?{}:Xe(O(e))},vt=function(e){return uo(e)&&Me(e)=="[object Map]"},St=la&&la.isMap,jt=St?So(St):vt,nr=function(e){return uo(e)&&Me(e)=="[object Set]"},fr=la&&la.isSet,Lt=fr?So(fr):nr,Rt={};Rt["[object Arguments]"]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object DataView]"]=Rt["[object Boolean]"]=Rt["[object Date]"]=Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt["[object Object]"]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object Symbol]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Error]"]=Rt["[object Function]"]=Rt["[object WeakMap]"]=!1;var _n=function e(t,n,r,o,i,a){var s,u=1&n,c=2&n,f=4&n;if(r&&(s=i?r(t,o,i,a):r(t)),s!==void 0)return s;if(!Cr(t))return t;var l=Yn(t);if(l){if(s=ze(t),!u)return Oc(t,s)}else{var d=Me(t),h=d=="[object Function]"||d=="[object GeneratorFunction]";if(fa(t))return Cc(t,u);if(d=="[object Object]"||d=="[object Arguments]"||h&&!i){if(s=c||h?{}:Tt(t),!u)return c?ie(t,Cd(s,t)):p(t,Qf(s,t))}else{if(!Rt[d])return i?t:{};s=ut(t,d,u)}}a||(a=new Go);var v=a.get(t);if(v)return v;a.set(t,s),Lt(t)?t.forEach(function(y){s.add(e(y,n,r,y,t,a))}):jt(t)&&t.forEach(function(y,E){s.set(E,e(y,n,r,E,t,a))});var m=l?void 0:(f?c?ve:ee:c?da:Oi)(t);return ua(m||t,function(y,E){m&&(y=t[E=y]),Ni(s,E,e(y,n,r,E,t,a))}),s},rr=function(e){return _n(e,4)},Kn=function(e){return function(){return e}},qn=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(n(i[u],u,i)===!1)break}return t}}(),lr=function(e,t){return e&&qn(e,t,Oi)},dr=function(e,t){return function(n,r){if(n==null)return n;if(!Qo(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}(lr),wn=function(e){return e},Et=function(e){return typeof e=="function"?e:wn},Nr=function(e,t){return(Yn(e)?ua:dr)(e,Et(t))},qt=Nr,at=function(e,t){var n=[];return dr(e,function(r,o,i){t(r,o,i)&&n.push(r)}),n},Ct=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ut=function(e){return this.__data__.has(e)};function On(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new sa;++t<n;)this.add(e[t])}On.prototype.add=On.prototype.push=Ct,On.prototype.has=Ut;var To=On,ha=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},C=function(e,t){return e.has(t)},Q=function(e,t,n,r,o,i){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e),f=i.get(t);if(c&&f)return c==t&&f==e;var l=-1,d=!0,h=2&n?new To:void 0;for(i.set(e,t),i.set(t,e);++l<s;){var v=e[l],m=t[l];if(r)var y=a?r(m,v,l,t,e,i):r(v,m,l,e,t,i);if(y!==void 0){if(y)continue;d=!1;break}if(h){if(!ha(t,function(E,g){if(!C(h,g)&&(v===E||o(v,E,n,r,i)))return h.push(g)})){d=!1;break}}else if(v!==m&&!o(v,m,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d},j=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n},Be=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n},It=wr?wr.prototype:void 0,N=It?It.valueOf:void 0,x=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new ce(e),new ce(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Qi(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=j;case"[object Set]":var u=1&r;if(s||(s=Be),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var f=Q(s(e),s(t),r,o,i,a);return a.delete(e),f;case"[object Symbol]":if(N)return N.call(e)==N.call(t)}return!1},M=Object.prototype.hasOwnProperty,U=function(e,t,n,r,o,i){var a=1&n,s=ee(e),u=s.length;if(u!=ee(t).length&&!a)return!1;for(var c=u;c--;){var f=s[c];if(!(a?f in t:M.call(t,f)))return!1}var l=i.get(e),d=i.get(t);if(l&&d)return l==t&&d==e;var h=!0;i.set(e,t),i.set(t,e);for(var v=a;++c<u;){var m=e[f=s[c]],y=t[f];if(r)var E=a?r(y,m,f,t,e,i):r(m,y,f,e,t,i);if(!(E===void 0?m===y||o(m,y,n,r,i):E)){h=!1;break}v||(v=f=="constructor")}if(h&&!v){var g=e.constructor,b=t.constructor;g==b||!("constructor"in e)||!("constructor"in t)||typeof g=="function"&&g instanceof g&&typeof b=="function"&&b instanceof b||(h=!1)}return i.delete(e),i.delete(t),h},$=Object.prototype.hasOwnProperty,F=function(e,t,n,r,o,i){var a=Yn(e),s=Yn(t),u=a?"[object Array]":Me(e),c=s?"[object Array]":Me(t),f=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",l=(c=c=="[object Arguments]"?"[object Object]":c)=="[object Object]",d=u==c;if(d&&fa(e)){if(!fa(t))return!1;a=!0,f=!1}if(d&&!f)return i||(i=new Go),a||Di(e)?Q(e,t,n,r,o,i):x(e,t,u,n,r,o,i);if(!(1&n)){var h=f&&$.call(e,"__wrapped__"),v=l&&$.call(t,"__wrapped__");if(h||v){var m=h?e.value():e,y=v?t.value():t;return i||(i=new Go),o(m,y,n,r,i)}}return!!d&&(i||(i=new Go),U(e,t,n,r,o,i))},k=function e(t,n,r,o,i){return t===n||(t==null||n==null||!uo(t)&&!uo(n)?t!=t&&n!=n:F(t,n,r,o,e,i))},z=function(e,t,n,r){var o=n.length,i=o,a=!r;if(e==null)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var u=(s=n[o])[0],c=e[u],f=s[1];if(a&&s[2]){if(c===void 0&&!(u in e))return!1}else{var l=new Go;if(r)var d=r(c,f,u,e,t,l);if(!(d===void 0?k(f,c,3,r,l):d))return!1}}return!0},R=function(e){return e==e&&!Cr(e)},L=function(e){for(var t=Oi(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,R(o)]}return t},T=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},B=function(e){var t=L(e);return t.length==1&&t[0][2]?T(t[0][0],t[0][1]):function(n){return n===e||z(n,e,t)}},W=function(e){return typeof e=="symbol"||uo(e)&&_o(e)=="[object Symbol]"},oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ae=/^\w*$/,re=function(e,t){if(Yn(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!W(e))||ae.test(e)||!oe.test(e)||t!=null&&e in Object(t)};function xe(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(xe.Cache||sa),n}xe.Cache=sa;var qe=xe,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/\\(\\)?/g,st=function(e){var t=qe(e,function(r){return n.size===500&&n.clear(),r}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_t,function(n,r,o,i){t.push(o?i.replace(He,"$1"):r||n)}),t}),ct=function(e,t){for(var n=-1,r=e==null?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},Ht=wr?wr.prototype:void 0,Fn=Ht?Ht.toString:void 0,jr=function e(t){if(typeof t=="string")return t;if(Yn(t))return ct(t,e)+"";if(W(t))return Fn?Fn.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},_u=function(e){return e==null?"":jr(e)},Yr=function(e,t){return Yn(e)?e:re(e,t)?[e]:st(_u(e))},ja=function(e){if(typeof e=="string"||W(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},no=function(e,t){for(var n=0,r=(t=Yr(t,e)).length;e!=null&&n<r;)e=e[ja(t[n++])];return n&&n==r?e:void 0},el=function(e,t,n){var r=e==null?void 0:no(e,t);return r===void 0?n:r},mp=function(e,t){return e!=null&&t in Object(e)},mh=function(e,t,n){for(var r=-1,o=(t=Yr(t,e)).length,i=!1;++r<o;){var a=ja(t[r]);if(!(i=e!=null&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=e==null?0:e.length)&&vo(o)&&bu(a,o)&&(Yn(e)||ca(e))},gh=function(e,t){return e!=null&&mh(e,t,mp)},gp=function(e,t){return re(e)&&R(t)?T(ja(e),t):function(n){var r=el(n,e);return r===void 0&&r===t?gh(n,e):k(t,r,3)}},yh=function(e){return function(t){return t==null?void 0:t[e]}},yp=function(e){return function(t){return no(t,e)}},Ep=function(e){return re(e)?yh(ja(e)):yp(e)},va=function(e){return typeof e=="function"?e:e==null?wn:typeof e=="object"?Yn(e)?gp(e[0],e[1]):B(e):Ep(e)},Eh=function(e,t){return(Yn(e)?Lc:at)(e,va(t))},bp=Object.prototype.hasOwnProperty,xp=function(e,t){return e!=null&&bp.call(e,t)},bh=function(e,t){return e!=null&&mh(e,t,xp)},_p=Object.prototype.hasOwnProperty,wp=function(e){if(e==null)return!0;if(Qo(e)&&(Yn(e)||typeof e=="string"||typeof e.splice=="function"||fa(e)||Di(e)||ca(e)))return!e.length;var t=Me(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Pn(e))return!Dc(e).length;for(var n in e)if(_p.call(e,n))return!1;return!0},xh=function(e){return e===void 0},_h=function(e,t){var n=-1,r=Qo(e)?Array(e.length):[];return dr(e,function(o,i,a){r[++n]=t(o,i,a)}),r},wh=function(e,t){return(Yn(e)?ct:_h)(e,va(t))},Sp=function(e,t,n,r){var o=-1,i=e==null?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n},Tp=function(e,t,n,r,o){return o(e,function(i,a,s){n=r?(r=!1,i):t(n,i,a,s)}),n},Sh=function(e,t,n){var r=Yn(e)?Sp:Tp,o=arguments.length<3;return r(e,va(t),n,o,dr)},Ip=function(e){return typeof e=="string"||!Yn(e)&&uo(e)&&_o(e)=="[object String]"},Ap=yh("length"),Np=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Rp=function(e){return Np.test(e)},Dp="[\\ud800-\\udfff]",Ld="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Md="\\ud83c[\\udffb-\\udfff]",Th="[^\\ud800-\\udfff]",Ih="(?:\\ud83c[\\udde6-\\uddff]){2}",Ah="[\\ud800-\\udbff][\\udc00-\\udfff]",Nh="(?:"+Ld+"|"+Md+")?",Cp="[\\ufe0e\\ufe0f]?"+Nh+("(?:\\u200d(?:"+[Th,Ih,Ah].join("|")+")[\\ufe0e\\ufe0f]?"+Nh+")*"),Op="(?:"+[Th+Ld+"?",Ld,Ih,Ah,Dp].join("|")+")",Rh=RegExp(Md+"(?="+Md+")|"+Op+Cp,"g"),Lp=function(e){for(var t=Rh.lastIndex=0;Rh.test(e);)++t;return t},Mp=function(e){return Rp(e)?Lp(e):Ap(e)},kp=function(e){if(e==null)return 0;if(Qo(e))return Ip(e)?Mp(e):e.length;var t=Me(e);return t=="[object Map]"||t=="[object Set]"?e.size:Dc(e).length},Gp=function(e,t,n){var r=Yn(e),o=r||fa(e)||Di(e);if(t=va(t),n==null){var i=e&&e.constructor;n=o?r?new i:[]:Cr(e)&&oa(i)?Xe(O(e)):{}}return(o?ua:lr)(e,function(a,s,u){return t(n,a,s,u)}),n},Dh=wr?wr.isConcatSpreadable:void 0,Pp=function(e){return Yn(e)||ca(e)||!!(Dh&&e&&e[Dh])},kd=function e(t,n,r,o,i){var a=-1,s=t.length;for(r||(r=Pp),i||(i=[]);++a<s;){var u=t[a];n>0&&r(u)?n>1?e(u,n-1,r,o,i):w(i,u):o||(i[i.length]=u)}return i},Fp=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Ch=Math.max,Oh=function(e,t,n){return t=Ch(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Ch(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),Fp(e,this,s)}},zp=Ii?function(e,t){return Ii(e,"toString",{configurable:!0,enumerable:!1,value:Kn(t),writable:!0})}:wn,Bp=Date.now,Lh=function(e){var t=0,n=0;return function(){var r=Bp(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(zp),tl=function(e,t){return Lh(Oh(e,t,wn),e+"")},Mh=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1},Up=function(e){return e!=e},Vp=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1},$p=function(e,t,n){return t==t?Vp(e,t,n):Mh(e,Up,n)},Xp=function(e,t){return!!(e!=null&&e.length)&&$p(e,t,0)>-1},Wp=function(e,t,n){for(var r=-1,o=e==null?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1},Hp=function(){},Zp=he&&1/Be(new he([,-0]))[1]==1/0?function(e){return new he(e)}:Hp,jp=function(e,t,n){var r=-1,o=Xp,i=e.length,a=!0,s=[],u=s;if(n)a=!1,o=Wp;else if(i>=200){var c=t?null:Zp(e);if(c)return Be(c);a=!1,o=C,u=new To}else u=t?[]:s;e:for(;++r<i;){var f=e[r],l=t?t(f):f;if(f=n||f!==0?f:0,a&&l==l){for(var d=u.length;d--;)if(u[d]===l)continue e;t&&u.push(l),s.push(f)}else o(u,l,n)||(u!==s&&u.push(l),s.push(f))}return s},kh=function(e){return uo(e)&&Qo(e)},Yp=tl(function(e){return jp(kd(e,1,kh,!0))}),Kp=function(e,t){return ct(t,function(n){return e[n]})},nl,Gh=function(e){return e==null?[]:Kp(e,Oi(e))};try{nl={clone:rr,constant:Kn,each:qt,filter:Eh,has:bh,isArray:Yn,isEmpty:wp,isFunction:oa,isUndefined:xh,keys:Oi,map:wh,reduce:Sh,size:kp,transform:Gp,union:Yp,values:Gh}}catch(e){}nl||(nl=window._);var je=nl,Gd=Jt;function Jt(e){this._isDirected=!je.has(e,"directed")||e.directed,this._isMultigraph=!!je.has(e,"multigraph")&&e.multigraph,this._isCompound=!!je.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=je.constant(void 0),this._defaultEdgeLabelFn=je.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Ph(e,t){e[t]?e[t]++:e[t]=1}function Fh(e,t){--e[t]||delete e[t]}function Gc(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}return o+""+i+""+(je.isUndefined(r)?"\0":r)}function qp(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};return r&&(s.name=r),s}function Pd(e,t){return Gc(e,t.v,t.w,t.name)}Jt.prototype._nodeCount=0,Jt.prototype._edgeCount=0,Jt.prototype.isDirected=function(){return this._isDirected},Jt.prototype.isMultigraph=function(){return this._isMultigraph},Jt.prototype.isCompound=function(){return this._isCompound},Jt.prototype.setGraph=function(e){return this._label=e,this},Jt.prototype.graph=function(){return this._label},Jt.prototype.setDefaultNodeLabel=function(e){return je.isFunction(e)||(e=je.constant(e)),this._defaultNodeLabelFn=e,this},Jt.prototype.nodeCount=function(){return this._nodeCount},Jt.prototype.nodes=function(){return je.keys(this._nodes)},Jt.prototype.sources=function(){var e=this;return je.filter(this.nodes(),function(t){return je.isEmpty(e._in[t])})},Jt.prototype.sinks=function(){var e=this;return je.filter(this.nodes(),function(t){return je.isEmpty(e._out[t])})},Jt.prototype.setNodes=function(e,t){var n=arguments,r=this;return je.each(e,function(o){n.length>1?r.setNode(o,t):r.setNode(o)}),this},Jt.prototype.setNode=function(e,t){return je.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Jt.prototype.node=function(e){return this._nodes[e]},Jt.prototype.hasNode=function(e){return je.has(this._nodes,e)},Jt.prototype.removeNode=function(e){var t=this;if(je.has(this._nodes,e)){var n=function(r){t.removeEdge(t._edgeObjs[r])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],je.each(this.children(e),function(r){t.setParent(r)}),delete this._children[e]),je.each(je.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],je.each(je.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Jt.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(je.isUndefined(t))t="\0";else{for(var n=t+="";!je.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Jt.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Jt.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Jt.prototype.children=function(e){if(je.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return je.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Jt.prototype.predecessors=function(e){var t=this._preds[e];if(t)return je.keys(t)},Jt.prototype.successors=function(e){var t=this._sucs[e];if(t)return je.keys(t)},Jt.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return je.union(t,this.successors(e))},Jt.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Jt.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;je.each(this._nodes,function(i,a){e(a)&&t.setNode(a,i)}),je.each(this._edgeObjs,function(i){t.hasNode(i.v)&&t.hasNode(i.w)&&t.setEdge(i,n.edge(i))});var r={};function o(i){var a=n.parent(i);return a===void 0||t.hasNode(a)?(r[i]=a,a):a in r?r[a]:o(a)}return this._isCompound&&je.each(t.nodes(),function(i){t.setParent(i,o(i))}),t},Jt.prototype.setDefaultEdgeLabel=function(e){return je.isFunction(e)||(e=je.constant(e)),this._defaultEdgeLabelFn=e,this},Jt.prototype.edgeCount=function(){return this._edgeCount},Jt.prototype.edges=function(){return je.values(this._edgeObjs)},Jt.prototype.setPath=function(e,t){var n=this,r=arguments;return je.reduce(e,function(o,i){return r.length>1?n.setEdge(o,i,t):n.setEdge(o,i),i}),this},Jt.prototype.setEdge=function(){var e,t,n,r,o=!1,i=arguments[0];typeof i=="object"&&i!==null&&"v"in i?(e=i.v,t=i.w,n=i.name,arguments.length===2&&(r=arguments[1],o=!0)):(e=i,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),e=""+e,t=""+t,je.isUndefined(n)||(n=""+n);var a=Gc(this._isDirected,e,t,n);if(je.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=r),this;if(!je.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=o?r:this._defaultEdgeLabelFn(e,t,n);var s=qp(this._isDirected,e,t,n);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,Ph(this._preds[t],e),Ph(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this},Jt.prototype.edge=function(e,t,n){var r=arguments.length===1?Pd(this._isDirected,arguments[0]):Gc(this._isDirected,e,t,n);return this._edgeLabels[r]},Jt.prototype.hasEdge=function(e,t,n){var r=arguments.length===1?Pd(this._isDirected,arguments[0]):Gc(this._isDirected,e,t,n);return je.has(this._edgeLabels,r)},Jt.prototype.removeEdge=function(e,t,n){var r=arguments.length===1?Pd(this._isDirected,arguments[0]):Gc(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Fh(this._preds[t],e),Fh(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},Jt.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var r=je.values(n);return t?je.filter(r,function(o){return o.v===t}):r}},Jt.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var r=je.values(n);return t?je.filter(r,function(o){return o.w===t}):r}},Jt.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var zh={Graph:Gd,version:"2.1.8"},Qp={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Jp(e),edges:e0(e)};return je.isUndefined(e.graph())||(t.value=je.clone(e.graph())),t},read:function(e){var t=new Gd(e.options).setGraph(e.value);return je.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),je.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Jp(e){return je.map(e.nodes(),function(t){var n=e.node(t),r=e.parent(t),o={v:t};return je.isUndefined(n)||(o.value=n),je.isUndefined(r)||(o.parent=r),o})}function e0(e){return je.map(e.edges(),function(t){var n=e.edge(t),r={v:t.v,w:t.w};return je.isUndefined(t.name)||(r.name=t.name),je.isUndefined(n)||(r.value=n),r})}var t0=function(e){var t,n={},r=[];function o(i){je.has(n,i)||(n[i]=!0,t.push(i),je.each(e.successors(i),o),je.each(e.predecessors(i),o))}return je.each(e.nodes(),function(i){t=[],o(i),t.length&&r.push(t)}),r},Bh=Po;function Po(){this._arr=[],this._keyIndices={}}Po.prototype.size=function(){return this._arr.length},Po.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Po.prototype.has=function(e){return je.has(this._keyIndices,e)},Po.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},Po.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Po.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!je.has(n,e)){var r=this._arr,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this._decrease(o),!0}return!1},Po.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Po.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Po.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},Po.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;e!==0&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},Po.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],i=n[t];n[e]=i,n[t]=o,r[i.key]=e,r[o.key]=t};var Uh=function(e,t,n,r){return function(o,i,a,s){var u,c,f={},l=new Bh,d=function(h){var v=h.v!==u?h.v:h.w,m=f[v],y=a(h),E=c.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+y);E<m.distance&&(m.distance=E,m.predecessor=u,l.decrease(v,E))};for(o.nodes().forEach(function(h){var v=h===i?0:Number.POSITIVE_INFINITY;f[h]={distance:v},l.add(h,v)});l.size()>0&&(u=l.removeMin(),(c=f[u]).distance!==Number.POSITIVE_INFINITY);)s(u).forEach(d);return f}(e,String(t),n||n0,r||function(o){return e.outEdges(o)})},n0=je.constant(1),r0=function(e,t,n){return je.transform(e.nodes(),function(r,o){r[o]=Uh(e,o,t,n)},{})},Vh=function(e){var t=0,n=[],r={},o=[];function i(a){var s=r[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(f){je.has(r,f)?r[f].onStack&&(s.lowlink=Math.min(s.lowlink,r[f].index)):(i(f),s.lowlink=Math.min(s.lowlink,r[f].lowlink))}),s.lowlink===s.index){var u,c=[];do u=n.pop(),r[u].onStack=!1,c.push(u);while(a!==u);o.push(c)}}return e.nodes().forEach(function(a){je.has(r,a)||i(a)}),o},o0=function(e){return je.filter(Vh(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},i0=function(e,t,n){return function(r,o,i){var a={},s=r.nodes();return s.forEach(function(u){a[u]={},a[u][u]={distance:0},s.forEach(function(c){u!==c&&(a[u][c]={distance:Number.POSITIVE_INFINITY})}),i(u).forEach(function(c){var f=c.v===u?c.w:c.v,l=o(c);a[u][f]={distance:l,predecessor:u}})}),s.forEach(function(u){var c=a[u];s.forEach(function(f){var l=a[f];s.forEach(function(d){var h=l[u],v=c[d],m=l[d],y=h.distance+v.distance;y<m.distance&&(m.distance=y,m.predecessor=v.predecessor)})})}),a}(e,t||a0,n||function(r){return e.outEdges(r)})},a0=je.constant(1),Fd=$h;function $h(e){var t={},n={},r=[];if(je.each(e.sinks(),function o(i){if(je.has(n,i))throw new rl;je.has(t,i)||(n[i]=!0,t[i]=!0,je.each(e.predecessors(i),o),delete n[i],r.push(i))}),je.size(t)!==e.nodeCount())throw new rl;return r}function rl(){}$h.CycleException=rl,rl.prototype=new Error;var Xh=function(e,t,n){je.isArray(t)||(t=[t]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return je.each(t,function(a){if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);Wh(e,a,n==="post",i,r,o)}),o};function Wh(e,t,n,r,o,i){je.has(r,t)||(r[t]=!0,n||i.push(t),je.each(o(t),function(a){Wh(e,a,n,r,o,i)}),n&&i.push(t))}var ol,s0={Graph:zh.Graph,json:Qp,alg:{components:t0,dijkstra:Uh,dijkstraAll:r0,findCycles:o0,floydWarshall:i0,isAcyclic:function(e){try{Fd(e)}catch(t){if(t instanceof Fd.CycleException)return!1;throw t}return!0},postorder:function(e,t){return Xh(e,t,"post")},preorder:function(e,t){return Xh(e,t,"pre")},prim:function(e,t){var n,r=new Gd,o={},i=new Bh;function a(u){var c=u.v===n?u.w:u.v,f=i.priority(c);if(f!==void 0){var l=t(u);l<f&&(o[c]=n,i.decrease(c,l))}}if(e.nodeCount()===0)return r;je.each(e.nodes(),function(u){i.add(u,Number.POSITIVE_INFINITY),r.setNode(u)}),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){if(n=i.removeMin(),je.has(o,n))r.setEdge(n,o[n]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(n).forEach(a)}return r},tarjan:Vh,topsort:Fd},version:zh.version};try{ol=s0}catch(e){}ol||(ol=window.graphlib);var Jo=ol,u0=function(e){return _n(e,5)},Pc=function(e,t,n){if(!Cr(n))return!1;var r=typeof t;return!!(r=="number"?Qo(n)&&bu(t,n.length):r=="string"&&t in n)&&Qi(n[t],e)},Hh=Object.prototype,c0=Hh.hasOwnProperty,f0=tl(function(e,t){e=Object(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&Pc(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=da(i),s=-1,u=a.length;++s<u;){var c=a[s],f=e[c];(f===void 0||Qi(f,Hh[c])&&!c0.call(e,c))&&(e[c]=i[c])}return e}),l0=function(e){return function(t,n,r){var o=Object(t);if(!Qo(t)){var i=va(n);t=Oi(t),n=function(s){return i(o[s],s,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}},d0=/^\s+|\s+$/g,h0=/^[-+]0x[0-9a-f]+$/i,v0=/^0b[01]+$/i,p0=/^0o[0-7]+$/i,m0=parseInt,g0=function(e){if(typeof e=="number")return e;if(W(e))return NaN;if(Cr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cr(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(d0,"");var n=v0.test(e);return n||p0.test(e)?m0(e.slice(2),n?2:8):h0.test(e)?NaN:+e},il=function(e){return e?(e=g0(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},y0=function(e){var t=il(e),n=t%1;return t==t?n?t-n:t:0},E0=Math.max,b0=l0(function(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:y0(n);return o<0&&(o=E0(r+o,0)),Mh(e,va(t),o)}),Zh=function(e){return e!=null&&e.length?kd(e,1):[]},x0=function(e,t){return e==null?e:qn(e,Et(t),da)},_0=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},w0=function(e,t){var n={};return t=va(t),lr(e,function(r,o,i){Ai(n,o,t(r,o,i))}),n},zd=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(a!=null&&(s===void 0?a==a&&!W(a):n(a,s)))var s=a,u=i}return u},S0=function(e,t){return e>t},T0=function(e){return e&&e.length?zd(e,wn,S0):void 0},Bd=function(e,t,n){(n!==void 0&&!Qi(e[t],n)||n===void 0&&!(t in e))&&Ai(e,t,n)},I0=Function.prototype,A0=Object.prototype,jh=I0.toString,N0=A0.hasOwnProperty,R0=jh.call(Object),D0=function(e){if(!uo(e)||_o(e)!="[object Object]")return!1;var t=O(e);if(t===null)return!0;var n=N0.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&jh.call(n)==R0},Ud=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},C0=function(e){return wo(e,da(e))},O0=function(e,t,n,r,o,i,a){var s=Ud(e,n),u=Ud(t,n),c=a.get(u);if(c)Bd(e,n,c);else{var f=i?i(s,u,n+"",e,t,a):void 0,l=f===void 0;if(l){var d=Yn(u),h=!d&&fa(u),v=!d&&!h&&Di(u);f=u,d||h||v?Yn(s)?f=s:kh(s)?f=Oc(s):h?(l=!1,f=Cc(u,!0)):v?(l=!1,f=se(u,!0)):f=[]:D0(u)||ca(u)?(f=s,ca(s)?f=C0(s):Cr(s)&&!oa(s)||(f=Tt(u))):l=!1}l&&(a.set(u,f),o(f,u,r,i,a),a.delete(u)),Bd(e,n,f)}},L0=function e(t,n,r,o,i){t!==n&&qn(n,function(a,s){if(i||(i=new Go),Cr(a))O0(t,n,s,r,e,o,i);else{var u=o?o(Ud(t,s),a,s+"",t,n,i):void 0;u===void 0&&(u=a),Bd(t,s,u)}},da)},M0=function(e){return tl(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,a&&Pc(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}(function(e,t,n){L0(e,t,n)}),Yh=function(e,t){return e<t},k0=function(e){return e&&e.length?zd(e,wn,Yh):void 0},G0=function(e,t){return e&&e.length?zd(e,va(t),Yh):void 0},P0=function(){return to.Date.now()},F0=function(e,t,n,r){if(!Cr(e))return e;for(var o=-1,i=(t=Yr(t,e)).length,a=i-1,s=e;s!=null&&++o<i;){var u=ja(t[o]),c=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(o!=a){var f=s[u];(c=r?r(f,u,s):void 0)===void 0&&(c=Cr(f)?f:bu(t[o+1])?[]:{})}Ni(s,u,c),s=s[u]}return e},z0=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=no(e,a);n(s,a)&&F0(i,Yr(a,e),s)}return i},B0=function(e,t){return z0(e,t,function(n,r){return gh(e,r)})},U0=function(e){return Lh(Oh(e,void 0,Zh),e+"")}(function(e,t){return e==null?{}:B0(e,t)}),V0=Math.ceil,$0=Math.max,X0=function(e,t,n,r){for(var o=-1,i=$0(V0((t-e)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=e,e+=n;return a},W0=function(e){return function(t,n,r){return r&&typeof r!="number"&&Pc(t,n,r)&&(n=r=void 0),t=il(t),n===void 0?(n=t,t=0):n=il(n),r=r===void 0?t<n?1:-1:il(r),X0(t,n,r,e)}}(),H0=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Z0=function(e,t){if(e!==t){var n=e!==void 0,r=e===null,o=e==e,i=W(e),a=t!==void 0,s=t===null,u=t==t,c=W(t);if(!s&&!c&&!i&&e>t||i&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!o)return 1;if(!r&&!i&&!c&&e<t||c&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!u)return-1}return 0},j0=function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var u=Z0(o[r],i[r]);if(u)return r>=s?u:u*(n[r]=="desc"?-1:1)}return e.index-t.index},Y0=function(e,t,n){t=t.length?ct(t,function(i){return Yn(i)?function(a){return no(a,i.length===1?i[0]:i)}:i}):[wn];var r=-1;t=ct(t,So(va));var o=_h(e,function(i,a,s){return{criteria:ct(t,function(u){return u(i)}),index:++r,value:i}});return H0(o,function(i,a){return j0(i,a,n)})},K0=tl(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Pc(e,t[0],t[1])?t=[]:n>2&&Pc(t[0],t[1],t[2])&&(t=[t[0]]),Y0(e,kd(t,1),[])}),q0=0,Q0=function(e){var t=++q0;return _u(e)+t},J0=function(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var s=r<i?t[r]:void 0;n(a,e[r],s)}return a},al,em=function(e,t){return J0(e||[],t||[],Ni)};try{al={cloneDeep:u0,constant:Kn,defaults:f0,each:qt,filter:Eh,find:b0,flatten:Zh,forEach:Nr,forIn:x0,has:bh,isUndefined:xh,last:_0,map:wh,mapValues:w0,max:T0,merge:M0,min:k0,minBy:G0,now:P0,pick:U0,range:W0,reduce:Sh,sortBy:K0,uniqueId:Q0,values:Gh,zipObject:em}}catch(e){}al||(al=window._);var P=al,tm=sl;function sl(){var e={};e._next=e._prev=e,this._sentinel=e}function Kh(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function nm(e,t){if(e!=="_next"&&e!=="_prev")return t}sl.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Kh(t),t},sl.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Kh(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},sl.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,nm)),n=n._prev;return"["+e.join(", ")+"]"};var rm=Jo.Graph,om=function(e,t){if(e.nodeCount()<=1)return[];var n=function(o,i){var a=new rm,s=0,u=0;P.forEach(o.nodes(),function(l){a.setNode(l,{v:l,in:0,out:0})}),P.forEach(o.edges(),function(l){var d=a.edge(l.v,l.w)||0,h=i(l),v=d+h;a.setEdge(l.v,l.w,v),u=Math.max(u,a.node(l.v).out+=h),s=Math.max(s,a.node(l.w).in+=h)});var c=P.range(u+s+3).map(function(){return new tm}),f=s+1;return P.forEach(a.nodes(),function(l){$d(c,f,a.node(l))}),{graph:a,buckets:c,zeroIdx:f}}(e,t||im),r=function(o,i,a){for(var s,u=[],c=i[i.length-1],f=i[0];o.nodeCount();){for(;s=f.dequeue();)Vd(o,i,a,s);for(;s=c.dequeue();)Vd(o,i,a,s);if(o.nodeCount()){for(var l=i.length-2;l>0;--l)if(s=i[l].dequeue()){u=u.concat(Vd(o,i,a,s,!0));break}}}return u}(n.graph,n.buckets,n.zeroIdx);return P.flatten(P.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)},im=P.constant(1);function Vd(e,t,n,r,o){var i=o?[]:void 0;return P.forEach(e.inEdges(r.v),function(a){var s=e.edge(a),u=e.node(a.v);o&&i.push({v:a.v,w:a.w}),u.out-=s,$d(t,n,u)}),P.forEach(e.outEdges(r.v),function(a){var s=e.edge(a),u=a.w,c=e.node(u);c.in-=s,$d(t,n,c)}),e.removeNode(r.v),i}function $d(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var qh={run:function(e){var t=e.graph().acyclicer==="greedy"?om(e,function(n){return function(r){return n.edge(r).weight}}(e)):function(n){var r=[],o={},i={};function a(s){P.has(i,s)||(i[s]=!0,o[s]=!0,P.forEach(n.outEdges(s),function(u){P.has(o,u.w)?r.push(u):a(u.w)}),delete o[s])}return P.forEach(n.nodes(),a),r}(e);P.forEach(t,function(n){var r=e.edge(n);e.removeEdge(n),r.forwardName=n.name,r.reversed=!0,e.setEdge(n.w,n.v,r,P.uniqueId("rev"))})},undo:function(e){P.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}},Qh=Jo.Graph,Ur={addDummyNode:Jh,simplify:function(e){var t=new Qh().setGraph(e.graph());return P.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),P.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},asNonCompoundGraph:function(e){var t=new Qh({multigraph:e.isMultigraph()}).setGraph(e.graph());return P.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),P.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t},successorWeights:function(e){var t=P.map(e.nodes(),function(n){var r={};return P.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return P.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=P.map(e.nodes(),function(n){var r={};return P.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return P.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,i=e.y,a=t.x-o,s=t.y-i,u=e.width/2,c=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a),{x:o+n,y:i+r}},buildLayerMatrix:function(e){var t=P.map(P.range(ev(e)+1),function(){return[]});return P.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;P.isUndefined(o)||(t[o][r.order]=n)}),t},normalizeRanks:function(e){var t=P.min(P.map(e.nodes(),function(n){return e.node(n).rank}));P.forEach(e.nodes(),function(n){var r=e.node(n);P.has(r,"rank")&&(r.rank-=t)})},removeEmptyRanks:function(e){var t=P.min(P.map(e.nodes(),function(i){return e.node(i).rank})),n=[];P.forEach(e.nodes(),function(i){var a=e.node(i).rank-t;n[a]||(n[a]=[]),n[a].push(i)});var r=0,o=e.graph().nodeRankFactor;P.forEach(n,function(i,a){P.isUndefined(i)&&a%o!=0?--r:r&&P.forEach(i,function(s){e.node(s).rank+=r})})},addBorderNode:function(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),Jh(e,"border",o,t)},maxRank:ev,partition:function(e,t){var n={lhs:[],rhs:[]};return P.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n},time:function(e,t){var n=P.now();try{return t()}finally{console.log(e+" time: "+(P.now()-n)+"ms")}},notime:function(e,t){return t()}};function Jh(e,t,n,r){var o;do o=P.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function ev(e){return P.max(P.map(e.nodes(),function(t){var n=e.node(t).rank;if(!P.isUndefined(n))return n}))}var tv={run:function(e){e.graph().dummyChains=[],P.forEach(e.edges(),function(t){(function(n,r){var o,i,a,s=r.v,u=n.node(s).rank,c=r.w,f=n.node(c).rank,l=r.name,d=n.edge(r),h=d.labelRank;if(f!==u+1){for(n.removeEdge(r),a=0,++u;u<f;++a,++u)d.points=[],i={width:0,height:0,edgeLabel:d,edgeObj:r,rank:u},o=Ur.addDummyNode(n,"edge",i,"_d"),u===h&&(i.width=d.width,i.height=d.height,i.dummy="edge-label",i.labelpos=d.labelpos),n.setEdge(s,o,{weight:d.weight},l),a===0&&n.graph().dummyChains.push(o),s=o;n.setEdge(s,c,{weight:d.weight},l)}})(e,t)})},undo:function(e){P.forEach(e.graph().dummyChains,function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)})}},nv=function(e){var t={};P.forEach(e.sources(),function n(r){var o=e.node(r);if(P.has(t,r))return o.rank;t[r]=!0;var i=P.min(P.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return i!==Number.POSITIVE_INFINITY&&i!=null||(i=0),o.rank=i})},rv=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen},am=Jo.Graph,ul=rv,ov=function(e){var t,n,r=new am({directed:!1}),o=e.nodes()[0],i=e.nodeCount();for(r.setNode(o,{});sm(r,e)<i;)t=um(r,e),n=r.hasNode(t.v)?ul(e,t):-ul(e,t),cm(r,e,n);return r};function sm(e,t){return P.forEach(e.nodes(),function n(r){P.forEach(t.nodeEdges(r),function(o){var i=o.v,a=r===i?o.w:i;e.hasNode(a)||ul(t,o)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}),e.nodeCount()}function um(e,t){return P.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return ul(t,n)})}function cm(e,t,n){P.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var fm=rv,lm=nv,dm=Jo.alg.preorder,hm=Jo.alg.postorder,vm=Ur.simplify,pm=Rs;function Rs(e){e=vm(e),lm(e);var t,n=ov(e);for(Wd(n),Xd(n,e);t=sv(n);)cv(n,e,t,uv(n,e,t))}function Xd(e,t){var n=hm(e,e.nodes());n=n.slice(0,n.length-1),P.forEach(n,function(r){(function(o,i,a){var s=o.node(a).parent;o.edge(a,s).cutvalue=iv(o,i,a)})(e,t,r)})}function iv(e,t,n){var r=e.node(n).parent,o=!0,i=t.edge(n,r),a=0;return i||(o=!1,i=t.edge(r,n)),a=i.weight,P.forEach(t.nodeEdges(n),function(s){var u,c,f=s.v===n,l=f?s.w:s.v;if(l!==r){var d=f===o,h=t.edge(s).weight;if(a+=d?h:-h,u=n,c=l,e.hasEdge(u,c)){var v=e.edge(n,l).cutvalue;a+=d?-v:v}}}),a}function Wd(e,t){arguments.length<2&&(t=e.nodes()[0]),av(e,{},1,t)}function av(e,t,n,r,o){var i=n,a=e.node(r);return t[r]=!0,P.forEach(e.neighbors(r),function(s){P.has(t,s)||(n=av(e,t,n,s,r))}),a.low=i,a.lim=n++,o?a.parent=o:delete a.parent,n}function sv(e){return P.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function uv(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var i=e.node(r),a=e.node(o),s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);var c=P.filter(t.edges(),function(f){return u===fv(e,e.node(f.v),s)&&u!==fv(e,e.node(f.w),s)});return P.minBy(c,function(f){return fm(t,f)})}function cv(e,t,n,r){var o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),Wd(e),Xd(e,t),function(a,s){var u=P.find(a.nodes(),function(f){return!s.node(f).parent}),c=dm(a,u);c=c.slice(1),P.forEach(c,function(f){var l=a.node(f).parent,d=s.edge(f,l),h=!1;d||(d=s.edge(l,f),h=!0),s.node(f).rank=s.node(l).rank+(h?d.minlen:-d.minlen)})}(e,t)}function fv(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}Rs.initLowLimValues=Wd,Rs.initCutValues=Xd,Rs.calcCutValue=iv,Rs.leaveEdge=sv,Rs.enterEdge=uv,Rs.exchangeEdges=cv;var lv=nv,mm=function(e){switch(e.graph().ranker){case"network-simplex":dv(e);break;case"tight-tree":(function(t){lv(t),ov(t)})(e);break;case"longest-path":gm(e);break;default:dv(e)}},gm=lv;function dv(e){pm(e)}var ym=function(e){var t=function(n){var r={},o=0;function i(a){var s=o;P.forEach(n.children(a),i),r[a]={low:s,lim:o++}}return P.forEach(n.children(),i),r}(e);P.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,i=function(l,d,h,v){var m,y,E=[],g=[],b=Math.min(d[h].low,d[v].low),_=Math.max(d[h].lim,d[v].lim);m=h;do m=l.parent(m),E.push(m);while(m&&(d[m].low>b||_>d[m].lim));for(y=m,m=v;(m=l.parent(m))!==y;)g.push(m);return{path:E.concat(g.reverse()),lca:y}}(e,t,o.v,o.w),a=i.path,s=i.lca,u=0,c=a[u],f=!0;n!==o.w;){if(r=e.node(n),f){for(;(c=a[u])!==s&&e.node(c).maxRank<r.rank;)u++;c===s&&(f=!1)}if(!f){for(;u<a.length-1&&e.node(c=a[u+1]).minRank<=r.rank;)u++;c=a[u]}e.setParent(n,c),n=e.successors(n)[0]}})},hv={run:function(e){var t=Ur.addDummyNode(e,"root",{},"_root"),n=function(a){var s={};function u(c,f){var l=a.children(c);l&&l.length&&P.forEach(l,function(d){u(d,f+1)}),s[c]=f}return P.forEach(a.children(),function(c){u(c,1)}),s}(e),r=P.max(P.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,P.forEach(e.edges(),function(a){e.edge(a).minlen*=o});var i=function(a){return P.reduce(a.edges(),function(s,u){return s+a.edge(u).weight},0)}(e)+1;P.forEach(e.children(),function(a){vv(e,t,o,i,r,n,a)}),e.graph().nodeRankFactor=o},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,P.forEach(e.edges(),function(n){e.edge(n).nestingEdge&&e.removeEdge(n)})}};function vv(e,t,n,r,o,i,a){var s=e.children(a);if(s.length){var u=Ur.addBorderNode(e,"_bt"),c=Ur.addBorderNode(e,"_bb"),f=e.node(a);e.setParent(u,a),f.borderTop=u,e.setParent(c,a),f.borderBottom=c,P.forEach(s,function(l){vv(e,t,n,r,o,i,l);var d=e.node(l),h=d.borderTop?d.borderTop:l,v=d.borderBottom?d.borderBottom:l,m=d.borderTop?r:2*r,y=h!==v?1:o-i[a]+1;e.setEdge(u,h,{weight:m,minlen:y,nestingEdge:!0}),e.setEdge(v,c,{weight:m,minlen:y,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:o+i[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:n})}var Em=function(e){P.forEach(e.children(),function t(n){var r=e.children(n),o=e.node(n);if(r.length&&P.forEach(r,t),P.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,a=o.maxRank+1;i<a;++i)pv(e,"borderLeft","_bl",n,o,i),pv(e,"borderRight","_br",n,o,i)}})};function pv(e,t,n,r,o,i){var a={width:0,height:0,rank:i,borderType:t},s=o[t][i-1],u=Ur.addDummyNode(e,"border",a,n);o[t][i]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})}var mv={adjust:function(e){var t=e.graph().rankdir.toLowerCase();t!=="lr"&&t!=="rl"||gv(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();t!=="bt"&&t!=="rl"||function(n){P.forEach(n.nodes(),function(r){Hd(n.node(r))}),P.forEach(n.edges(),function(r){var o=n.edge(r);P.forEach(o.points,Hd),P.has(o,"y")&&Hd(o)})}(e),t!=="lr"&&t!=="rl"||(function(n){P.forEach(n.nodes(),function(r){Zd(n.node(r))}),P.forEach(n.edges(),function(r){var o=n.edge(r);P.forEach(o.points,Zd),P.has(o,"x")&&Zd(o)})}(e),gv(e))}};function gv(e){P.forEach(e.nodes(),function(t){yv(e.node(t))}),P.forEach(e.edges(),function(t){yv(e.edge(t))})}function yv(e){var t=e.width;e.width=e.height,e.height=t}function Hd(e){e.y=-e.y}function Zd(e){var t=e.x;e.x=e.y,e.y=t}var bm=function(e){var t={},n=P.filter(e.nodes(),function(s){return!e.children(s).length}),r=P.max(P.map(n,function(s){return e.node(s).rank})),o=P.map(P.range(r+1),function(){return[]});function i(s){if(!P.has(t,s)){t[s]=!0;var u=e.node(s);o[u.rank].push(s),P.forEach(e.successors(s),i)}}var a=P.sortBy(n,function(s){return e.node(s).rank});return P.forEach(a,i),o},xm=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=_m(e,t[r-1],t[r]);return n};function _m(e,t,n){for(var r=P.zipObject(n,P.map(n,function(c,f){return f})),o=P.flatten(P.map(t,function(c){return P.sortBy(P.map(e.outEdges(c),function(f){return{pos:r[f.w],weight:e.edge(f).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var a=2*i-1;i-=1;var s=P.map(new Array(a),function(){return 0}),u=0;return P.forEach(o.forEach(function(c){var f=c.pos+i;s[f]+=c.weight;for(var l=0;f>0;)f%2&&(l+=s[f+1]),s[f=f-1>>1]+=c.weight;u+=c.weight*l})),u}var wm=function(e,t){return P.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=P.reduce(r,function(i,a){var s=e.edge(a),u=e.node(a.v);return{sum:i.sum+s.weight*u.order,weight:i.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}return{v:n}})},Sm=function(e,t){var n={};return P.forEach(e,function(r,o){var i=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i:o};P.isUndefined(r.barycenter)||(i.barycenter=r.barycenter,i.weight=r.weight)}),P.forEach(t.edges(),function(r){var o=n[r.v],i=n[r.w];P.isUndefined(o)||P.isUndefined(i)||(i.indegree++,o.out.push(n[r.w]))}),function(r){var o=[];function i(u){return function(c){c.merged||(P.isUndefined(c.barycenter)||P.isUndefined(u.barycenter)||c.barycenter>=u.barycenter)&&function(f,l){var d=0,h=0;f.weight&&(d+=f.barycenter*f.weight,h+=f.weight),l.weight&&(d+=l.barycenter*l.weight,h+=l.weight),f.vs=l.vs.concat(f.vs),f.barycenter=d/h,f.weight=h,f.i=Math.min(l.i,f.i),l.merged=!0}(u,c)}}function a(u){return function(c){c.in.push(u),--c.indegree==0&&r.push(c)}}for(;r.length;){var s=r.pop();o.push(s),P.forEach(s.in.reverse(),i(s)),P.forEach(s.out,a(s))}return P.map(P.filter(o,function(u){return!u.merged}),function(u){return P.pick(u,["vs","i","barycenter","weight"])})}(P.filter(n,function(r){return!r.indegree}))},Tm=function(e,t){var n=Ur.partition(e,function(l){return P.has(l,"barycenter")}),r=n.lhs,o=P.sortBy(n.rhs,function(l){return-l.i}),i=[],a=0,s=0,u=0;r.sort((c=!!t,function(l,d){return l.barycenter<d.barycenter?-1:l.barycenter>d.barycenter?1:c?d.i-l.i:l.i-d.i})),u=Ev(i,o,u),P.forEach(r,function(l){u+=l.vs.length,i.push(l.vs),a+=l.barycenter*l.weight,s+=l.weight,u=Ev(i,o,u)});var c,f={vs:P.flatten(i,!0)};return s&&(f.barycenter=a/s,f.weight=s),f};function Ev(e,t,n){for(var r;t.length&&(r=P.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}var Im=function e(t,n,r,o){var i=t.children(n),a=t.node(n),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,c={};s&&(i=P.filter(i,function(m){return m!==s&&m!==u}));var f=wm(t,i);P.forEach(f,function(m){if(t.children(m.v).length){var y=e(t,m.v,r,o);c[m.v]=y,P.has(y,"barycenter")&&(E=m,g=y,P.isUndefined(E.barycenter)?(E.barycenter=g.barycenter,E.weight=g.weight):(E.barycenter=(E.barycenter*E.weight+g.barycenter*g.weight)/(E.weight+g.weight),E.weight+=g.weight))}var E,g});var l=Sm(f,r);(function(m,y){P.forEach(m,function(E){E.vs=P.flatten(E.vs.map(function(g){return y[g]?y[g].vs:g}),!0)})})(l,c);var d=Tm(l,o);if(s&&(d.vs=P.flatten([s,d.vs,u],!0),t.predecessors(s).length)){var h=t.node(t.predecessors(s)[0]),v=t.node(t.predecessors(u)[0]);P.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+v.order)/(d.weight+2),d.weight+=2}return d},Am=Jo.Graph,Nm=function(e,t,n){var r=function(i){for(var a;i.hasNode(a=P.uniqueId("_root")););return a}(e),o=new Am({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(i){return e.node(i)});return P.forEach(e.nodes(),function(i){var a=e.node(i),s=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(o.setNode(i),o.setParent(i,s||r),P.forEach(e[n](i),function(u){var c=u.v===i?u.w:u.v,f=o.edge(c,i),l=P.isUndefined(f)?0:f.weight;o.setEdge(c,i,{weight:e.edge(u).weight+l})}),P.has(a,"minRank")&&o.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),o},Rm=function(e,t,n){var r,o={};P.forEach(n,function(i){for(var a,s,u=e.parent(i);u;){if((a=e.parent(u))?(s=o[a],o[a]=u):(s=r,r=u),s&&s!==u)return void t.setEdge(s,u);u=a}})},Dm=Jo.Graph,Cm=function(e){var t=Ur.maxRank(e),n=bv(e,P.range(1,t+1),"inEdges"),r=bv(e,P.range(t-1,-1,-1),"outEdges"),o=bm(e);xv(e,o);for(var i,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){Om(s%2?n:r,s%4>=2),o=Ur.buildLayerMatrix(e);var c=xm(e,o);c<a&&(u=0,i=P.cloneDeep(o),a=c)}xv(e,i)};function bv(e,t,n){return P.map(t,function(r){return Nm(e,r,n)})}function Om(e,t){var n=new Dm;P.forEach(e,function(r){var o=r.graph().root,i=Im(r,o,n,t);P.forEach(i.vs,function(a,s){r.node(a).order=s}),Rm(r,n,i.vs)})}function xv(e,t){P.forEach(t,function(n){P.forEach(n,function(r,o){e.node(r).order=o})})}var Lm=Jo.Graph,Mm=function(e){var t,n=Ur.buildLayerMatrix(e),r=P.merge(km(e,n),Gm(e,n)),o={};P.forEach(["u","d"],function(a){t=a==="u"?n:P.values(n).reverse(),P.forEach(["l","r"],function(s){s==="r"&&(t=P.map(t,function(l){return P.values(l).reverse()}));var u=(a==="u"?e.predecessors:e.successors).bind(e),c=Fm(e,t,r,u),f=zm(e,t,c.root,c.align,s==="r");s==="r"&&(f=P.mapValues(f,function(l){return-l})),o[a+s]=f})});var i=Bm(e,o);return Um(o,i),Vm(o,e.graph().align)};function km(e,t){var n={};return P.reduce(t,function(r,o){var i=0,a=0,s=r.length,u=P.last(o);return P.forEach(o,function(c,f){var l=function(h,v){if(h.node(v).dummy)return P.find(h.predecessors(v),function(m){return h.node(m).dummy})}(e,c),d=l?e.node(l).order:s;(l||c===u)&&(P.forEach(o.slice(a,f+1),function(h){P.forEach(e.predecessors(h),function(v){var m=e.node(v),y=m.order;!(y<i||d<y)||m.dummy&&e.node(h).dummy||_v(n,v,h)})}),a=f+1,i=d)}),o}),n}function Gm(e,t){var n={};function r(o,i,a,s,u){var c;P.forEach(P.range(i,a),function(f){c=o[f],e.node(c).dummy&&P.forEach(e.predecessors(c),function(l){var d=e.node(l);d.dummy&&(d.order<s||d.order>u)&&_v(n,l,c)})})}return P.reduce(t,function(o,i){var a,s=-1,u=0;return P.forEach(i,function(c,f){if(e.node(c).dummy==="border"){var l=e.predecessors(c);l.length&&(a=e.node(l[0]).order,r(i,u,f,s,a),u=f,s=a)}r(i,u,i.length,a,o.length)}),i}),n}function _v(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function Pm(e,t,n){if(t>n){var r=t;t=n,n=r}return P.has(e[t],n)}function Fm(e,t,n,r){var o={},i={},a={};return P.forEach(t,function(s){P.forEach(s,function(u,c){o[u]=u,i[u]=u,a[u]=c})}),P.forEach(t,function(s){var u=-1;P.forEach(s,function(c){var f=r(c);if(f.length)for(var l=((f=P.sortBy(f,function(m){return a[m]})).length-1)/2,d=Math.floor(l),h=Math.ceil(l);d<=h;++d){var v=f[d];i[c]===c&&u<a[v]&&!Pm(n,c,v)&&(i[v]=c,i[c]=o[c]=o[v],u=a[v])}})}),{root:o,align:i}}function zm(e,t,n,r,o){var i={},a=function(c,f,l,d){var h=new Lm,v=c.graph(),m=function(y,E,g){return function(b,_,S){var V,fe=b.node(_),ne=b.node(S),K=0;if(K+=fe.width/2,P.has(fe,"labelpos"))switch(fe.labelpos.toLowerCase()){case"l":V=-fe.width/2;break;case"r":V=fe.width/2}if(V&&(K+=g?V:-V),V=0,K+=(fe.dummy?E:y)/2,K+=(ne.dummy?E:y)/2,K+=ne.width/2,P.has(ne,"labelpos"))switch(ne.labelpos.toLowerCase()){case"l":V=ne.width/2;break;case"r":V=-ne.width/2}return V&&(K+=g?V:-V),V=0,K}}(v.nodesep,v.edgesep,d);return P.forEach(f,function(y){var E;P.forEach(y,function(g){var b=l[g];if(h.setNode(b),E){var _=l[E],S=h.edge(_,b);h.setEdge(_,b,Math.max(m(c,g,E),S||0))}E=g})}),h}(e,t,n,o),s=o?"borderLeft":"borderRight";function u(c,f){for(var l=a.nodes(),d=l.pop(),h={};d;)h[d]?c(d):(h[d]=!0,l.push(d),l=l.concat(f(d))),d=l.pop()}return u(function(c){i[c]=a.inEdges(c).reduce(function(f,l){return Math.max(f,i[l.v]+a.edge(l))},0)},a.predecessors.bind(a)),u(function(c){var f=a.outEdges(c).reduce(function(d,h){return Math.min(d,i[h.w]-a.edge(h))},Number.POSITIVE_INFINITY),l=e.node(c);f!==Number.POSITIVE_INFINITY&&l.borderType!==s&&(i[c]=Math.max(i[c],f))},a.successors.bind(a)),P.forEach(r,function(c){i[c]=i[n[c]]}),i}function Bm(e,t){return P.minBy(P.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return P.forIn(n,function(i,a){var s=function(u,c){return u.node(c).width}(e,a)/2;r=Math.max(i+s,r),o=Math.min(i-s,o)}),r-o})}function Um(e,t){var n=P.values(t),r=P.min(n),o=P.max(n);P.forEach(["u","d"],function(i){P.forEach(["l","r"],function(a){var s,u=i+a,c=e[u];if(c!==t){var f=P.values(c);(s=a==="l"?r-P.min(f):o-P.max(f))&&(e[u]=P.mapValues(c,function(l){return l+s}))}})})}function Vm(e,t){return P.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=P.sortBy(P.map(e,r));return(o[1]+o[2])/2})}var $m=Mm,Xm=function(e){(function(t){var n=Ur.buildLayerMatrix(t),r=t.graph().ranksep,o=0;P.forEach(n,function(i){var a=P.max(P.map(i,function(s){return t.node(s).height}));P.forEach(i,function(s){t.node(s).y=o+a/2}),o+=a+r})})(e=Ur.asNonCompoundGraph(e)),P.forEach($m(e),function(t,n){e.node(n).x=t})},Wm=Ur.normalizeRanks,Hm=Ur.removeEmptyRanks,Ya=Ur,Zm=Jo.Graph,jm=function(e,t){var n=t&&t.debugTiming?Ya.time:Ya.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return function(o){var i=new Zm({multigraph:!0,compound:!0}),a=Yd(o.graph());return i.setGraph(P.merge({},Km,jd(a,Ym),P.pick(a,qm))),P.forEach(o.nodes(),function(s){var u=Yd(o.node(s));i.setNode(s,P.defaults(jd(u,Qm),Jm)),i.setParent(s,o.parent(s))}),P.forEach(o.edges(),function(s){var u=Yd(o.edge(s));i.setEdge(s,P.merge({},tg,jd(u,eg),P.pick(u,ng)))}),i}(e)});n("  runLayout",function(){(function(o,i){i("    makeSpaceForEdgeLabels",function(){(function(a){var s=a.graph();s.ranksep/=2,P.forEach(a.edges(),function(u){var c=a.edge(u);c.minlen*=2,c.labelpos.toLowerCase()!=="c"&&(s.rankdir==="TB"||s.rankdir==="BT"?c.width+=c.labeloffset:c.height+=c.labeloffset)})})(o)}),i("    removeSelfEdges",function(){(function(a){P.forEach(a.edges(),function(s){if(s.v===s.w){var u=a.node(s.v);u.selfEdges||(u.selfEdges=[]),u.selfEdges.push({e:s,label:a.edge(s)}),a.removeEdge(s)}})})(o)}),i("    acyclic",function(){qh.run(o)}),i("    nestingGraph.run",function(){hv.run(o)}),i("    rank",function(){mm(Ya.asNonCompoundGraph(o))}),i("    injectEdgeLabelProxies",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);if(u.width&&u.height){var c=a.node(s.v),f={rank:(a.node(s.w).rank-c.rank)/2+c.rank,e:s};Ya.addDummyNode(a,"edge-proxy",f,"_ep")}})})(o)}),i("    removeEmptyRanks",function(){Hm(o)}),i("    nestingGraph.cleanup",function(){hv.cleanup(o)}),i("    normalizeRanks",function(){Wm(o)}),i("    assignRankMinMax",function(){(function(a){var s=0;P.forEach(a.nodes(),function(u){var c=a.node(u);c.borderTop&&(c.minRank=a.node(c.borderTop).rank,c.maxRank=a.node(c.borderBottom).rank,s=P.max(s,c.maxRank))}),a.graph().maxRank=s})(o)}),i("    removeEdgeLabelProxies",function(){(function(a){P.forEach(a.nodes(),function(s){var u=a.node(s);u.dummy==="edge-proxy"&&(a.edge(u.e).labelRank=u.rank,a.removeNode(s))})})(o)}),i("    normalize.run",function(){tv.run(o)}),i("    parentDummyChains",function(){ym(o)}),i("    addBorderSegments",function(){Em(o)}),i("    order",function(){Cm(o)}),i("    insertSelfEdges",function(){(function(a){var s=Ya.buildLayerMatrix(a);P.forEach(s,function(u){var c=0;P.forEach(u,function(f,l){var d=a.node(f);d.order=l+c,P.forEach(d.selfEdges,function(h){Ya.addDummyNode(a,"selfedge",{width:h.label.width,height:h.label.height,rank:d.rank,order:l+ ++c,e:h.e,label:h.label},"_se")}),delete d.selfEdges})})})(o)}),i("    adjustCoordinateSystem",function(){mv.adjust(o)}),i("    position",function(){Xm(o)}),i("    positionSelfEdges",function(){(function(a){P.forEach(a.nodes(),function(s){var u=a.node(s);if(u.dummy==="selfedge"){var c=a.node(u.e.v),f=c.x+c.width/2,l=c.y,d=u.x-f,h=c.height/2;a.setEdge(u.e,u.label),a.removeNode(s),u.label.points=[{x:f+2*d/3,y:l-h},{x:f+5*d/6,y:l-h},{x:f+d,y:l},{x:f+5*d/6,y:l+h},{x:f+2*d/3,y:l+h}],u.label.x=u.x,u.label.y=u.y}})})(o)}),i("    removeBorderNodes",function(){(function(a){P.forEach(a.nodes(),function(s){if(a.children(s).length){var u=a.node(s),c=a.node(u.borderTop),f=a.node(u.borderBottom),l=a.node(P.last(u.borderLeft)),d=a.node(P.last(u.borderRight));u.width=Math.abs(d.x-l.x),u.height=Math.abs(f.y-c.y),u.x=l.x+u.width/2,u.y=c.y+u.height/2}}),P.forEach(a.nodes(),function(s){a.node(s).dummy==="border"&&a.removeNode(s)})})(o)}),i("    normalize.undo",function(){tv.undo(o)}),i("    fixupEdgeLabelCoords",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);if(P.has(u,"x"))switch(u.labelpos!=="l"&&u.labelpos!=="r"||(u.width-=u.labeloffset),u.labelpos){case"l":u.x-=u.width/2+u.labeloffset;break;case"r":u.x+=u.width/2+u.labeloffset}})})(o)}),i("    undoCoordinateSystem",function(){mv.undo(o)}),i("    translateGraph",function(){(function(a){var s=Number.POSITIVE_INFINITY,u=0,c=Number.POSITIVE_INFINITY,f=0,l=a.graph(),d=l.marginx||0,h=l.marginy||0;function v(m){var y=m.x,E=m.y,g=m.width,b=m.height;s=Math.min(s,y-g/2),u=Math.max(u,y+g/2),c=Math.min(c,E-b/2),f=Math.max(f,E+b/2)}P.forEach(a.nodes(),function(m){v(a.node(m))}),P.forEach(a.edges(),function(m){var y=a.edge(m);P.has(y,"x")&&v(y)}),s-=d,c-=h,P.forEach(a.nodes(),function(m){var y=a.node(m);y.x-=s,y.y-=c}),P.forEach(a.edges(),function(m){var y=a.edge(m);P.forEach(y.points,function(E){E.x-=s,E.y-=c}),P.has(y,"x")&&(y.x-=s),P.has(y,"y")&&(y.y-=c)}),l.width=u-s+d,l.height=f-c+h})(o)}),i("    assignNodeIntersects",function(){(function(a){P.forEach(a.edges(),function(s){var u,c,f=a.edge(s),l=a.node(s.v),d=a.node(s.w);f.points?(u=f.points[0],c=f.points[f.points.length-1]):(f.points=[],u=d,c=l),f.points.unshift(Ya.intersectRect(l,u)),f.points.push(Ya.intersectRect(d,c))})})(o)}),i("    reversePoints",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);u.reversed&&u.points.reverse()})})(o)}),i("    acyclic.undo",function(){qh.undo(o)})})(r,n)}),n("  updateInputGraph",function(){(function(o,i){P.forEach(o.nodes(),function(a){var s=o.node(a),u=i.node(a);s&&(s.x=u.x,s.y=u.y,i.children(a).length&&(s.width=u.width,s.height=u.height))}),P.forEach(o.edges(),function(a){var s=o.edge(a),u=i.edge(a);s.points=u.points,P.has(u,"x")&&(s.x=u.x,s.y=u.y)}),o.graph().width=i.graph().width,o.graph().height=i.graph().height})(e,r)})})},Ym=["nodesep","edgesep","ranksep","marginx","marginy"],Km={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},qm=["acyclicer","ranker","rankdir","align"],Qm=["width","height"],Jm={width:0,height:0},eg=["minlen","weight","width","height","labeloffset"],tg={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ng=["labelpos"];function jd(e,t){return P.mapValues(P.pick(e,t),Number)}function Yd(e){var t={};return P.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var rg=Jo.Graph,wv={graphlib:Jo,layout:jm,debug:{debugOrdering:function(e){var t=Ur.buildLayerMatrix(e),n=new rg({compound:!0,multigraph:!0}).setGraph({});return P.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),P.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),P.forEach(t,function(r,o){var i="layer"+o;n.setNode(i,{rank:"same"}),P.reduce(r,function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}},util:{time:Ur.time,notime:Ur.notime},version:"0.8.5"},og=wv.graphlib,ig=wv.layout;class ag{constructor(t){this.cardinality=1,this.include=_i.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=Mr.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class sg{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function ug(e){const t=new sg;return e.nodes.map(n=>new ag(n)).forEach(n=>{t.nodes[n.name]=n,n.inputs.forEach(r=>{(function(o,i,a){a.name!==i.name&&o.edges.push(Object.assign(Object.assign({},a.attr),{v:a.name,w:i.name}))})(t,n,r)})}),t}class cg{constructor(t,n={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=_i.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=Mr.META,this.path=[],this.name=t,this.metaGraph=Kd(t,Ua.META,n)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(t=>this.metaGraph.node(t))}leaves(){let t,n=[],r=[this];for(;r.length;){let o=r.shift();o.isGroupNode?(t=o.metaGraph,t.nodes().forEach(i=>r.push(t.node(i)))):n.push(o.name)}return n}}class fg{constructor(t,n){this.v=t,this.w=n,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,n){this.baseEdgeList.push(t)}}function Sv(e,t={}){return new cg(e,t)}function Tv(e,t){return new fg(e,t)}function Kd(e,t,n){const r=n||{},o=new og.Graph(r);return o.setGraph({name:e,rankdir:r.rankdir,type:t,align:r.align}),o}class lg{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=Sv(qi,this.graphOptions),this.index[qi]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,n){this.index[t]=n}getBridgeGraph(t){const n=this.index[t];if(!n)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in n))return null;const r=n;if(r.bridgeGraph)return r.bridgeGraph;const o=Kd(kf,Ua.BRIDGE,this.graphOptions);if(r.bridgeGraph=o,!n.parentNode||!("metaGraph"in n.parentNode))return o;const i=n.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach(a=>{a.edges().filter(s=>s.v===t||s.w===t).forEach(s=>{const u=s.w===t;a.edge(s).baseEdgeList.forEach(c=>{const[f,l]=u?[c.w,s.v]:[c.v,s.w],d=this.getChildName(t,f),h={v:u?l:d,w:u?d:l};let v=o.edge(h);v||(v=Tv(h.v,h.w),v.inbound=u,o.setEdge(h.v,h.w,v)),v.addBaseEdge(c,this)})})}),o}getChildName(t,n){let r=this.index[n];for(;r;){if(r.parentNode&&r.parentNode.name===t)return r.name;r=r.parentNode}throw Error("Could not find immediate child for descendant: "+n)}getPredecessors(t){const n=this.index[t];if(!n)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(n,!0)}getSuccessors(t){const n=this.index[t];if(!n)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(n,!1)}getOneWayEdges(t,n){const r=[];if(!t.parentNode||!t.parentNode.isGroupNode)return r;const o=t.parentNode,i=o.metaGraph,a=this.getBridgeGraph(o.name);return Iv(i,t,n,r),Iv(a,t,n,r),r}}function dg(e,t){const{rankDirection:n,align:r}=t,o=new lg({rankdir:n,align:r});return function(i,a){Object.keys(a.nodes).forEach(s=>{const u=a.nodes[s],c=u.path;let f=i.root;f.depth=Math.max(c.length,f.depth);for(let l=0;l<c.length&&(f.depth=Math.max(f.depth,c.length-l),f.cardinality+=u.cardinality,l!==c.length-1);l++){const d=c[l];let h=i.node(d);h||(h=Sv(d,i.graphOptions),h.path=u.path.slice(0,l+1),h.parentNode=f,i.setNode(d,h),f.metaGraph.setNode(d,h)),f=h}i.setNode(u.name,u),u.parentNode=f,f.metaGraph.setNode(u.name,u)})}(o,e),function(i,a){const s=i.getNodeMap();let u=[],c=[];const f=(l,d)=>{let h=0;for(;l;)d[h++]=l.name,l=l.parentNode;return h-1};a.edges.forEach(l=>{u=[],c=[];let d=f(a.nodes[l.v],u),h=f(a.nodes[l.w],c);for(;u[d]===c[h];)if(d--,h--,d<0||h<0)throw Error("No difference found between ancestor paths.");const v=s[u[d+1]],m=u[d],y=c[h];let E=v.metaGraph.edge(m,y);E||(E=Tv(m,y),v.metaGraph.setEdge(m,y,E)),E.addBaseEdge(l,i)})}(o,e),o}function Iv(e,t,n,r){(n?e.inEdges(t.name):e.outEdges(t.name)).forEach(o=>{const i=e.edge(o);r.push(i)})}class hg{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new Nv(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(t){if(t in this.hasSubHierarchy)return;this.hasSubHierarchy[t]=!0;const n=this.index[t];if(n.node.type!==Mr.META)return;const r=n,o=r.node.metaGraph,i=r.coreGraph;o.nodes().forEach(f=>{const l=this.getOrCreateRenderNodeByName(f);i.setNode(f,l)}),o.edges().forEach(f=>{const l=o.edge(f),d=new Av(l);i.setEdge(f.v,f.w,d)});const a=r.node.parentNode;if(!a)return;const s=this.getRenderNodeByName(a.name),u=(f,...l)=>l.concat([f?"IN":"OUT"]).join("~~"),c=this.hierarchy.getBridgeGraph(t);c.edges().forEach(f=>{const l=c.edge(f),d=!!o.node(f.w),[h,v]=d?[f.w,f.v]:[f.v,f.w],m=S=>{const V=d?{v:S,w:t}:{v:t,w:S};return s.coreGraph.edge(V)};let y=m(v);y||(y=m(u(d,v,a.name)));const E=u(d,t),g=u(d,v,t);let b=i.node(g);if(!b){let S=i.node(E);if(!S){const fe={name:E,type:Mr.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:_i.UNSPECIFIED,inbound:d,attr:{}};S=new cl(fe),this.index[E]=S,i.setNode(E,S)}const V={name:g,type:Mr.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:_i.UNSPECIFIED,inbound:d,attr:{}};b=new cl(V),this.index[g]=b,i.setNode(g,b),i.setParent(g,E),S.node.cardinality++}const _=new Av(l);_.adjoiningMetaEdge=y,d?i.setEdge(g,h,_):i.setEdge(h,g,_)})}getOrCreateRenderNodeByName(t){if(!t)return null;if(t in this.index)return this.index[t];const n=this.getNodeByName(t);return n?(this.index[t]=n.isGroupNode?new Nv(n,this.hierarchy.graphOptions):new cl(n),this.index[t]):null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class cl{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class Av{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Nv extends cl{constructor(t,n){super(t);const r=t.metaGraph.graph();n.compound=!0,this.coreGraph=Kd(r.name,Ua.CORE,n)}}function Rv(e,t){e.node.isGroupNode&&function(n,r){const o=bs(r);n.coreGraph.nodes().map(i=>n.coreGraph.node(i)).forEach(i=>{var a,s,u,c,f,l;const{height:d,width:h}=i;switch(i.node.type){case Mr.NODE:Object.assign(i,o.nodeSize.node),i.height=d||o.nodeSize.node.height,i.width=h||o.nodeSize.node.width;break;case Mr.BRIDGE:Object.assign(i,o.nodeSize.bridge);break;case Mr.META:i.expanded?Rv(i,r):(Object.assign(i,o.nodeSize.meta),i.height=o.nodeSize.meta.height,i.width=o.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+i.node.type)}if(!i.expanded){const v=i.attr;(function(m,y=!1){if(m.coreBox.width=m.width,m.coreBox.height=m.height,!y){const E=`${m.displayName}`.length,g=3;m.width=Math.max(m.coreBox.width,E*g)}})(i,r&&(i.node.type===0&&!!(!((s=(a=r==null?void 0:r.nodeSize)===null||a===void 0?void 0:a.meta)===null||s===void 0)&&s.width)||i.node.type===1&&(!!(!((c=(u=r==null?void 0:r.nodeSize)===null||u===void 0?void 0:u.node)===null||c===void 0)&&c.width)||!!v.width)||i.node.type===2&&!!(!((l=(f=r==null?void 0:r.nodeSize)===null||f===void 0?void 0:f.bridge)===null||l===void 0)&&l.width)))}})}(e,t),e.node.type===Mr.META&&function(n,r){const o=bs(r),i=o.subScene.meta;Object.assign(n,i);const{nodeSep:a,rankSep:s,edgeSep:u,align:c}=o.graph.meta,f={nodesep:a,ranksep:s,edgesep:u,align:c};Object.assign(n.coreBox,function(h,v){const{ranksep:m,nodesep:y,edgesep:E,align:g}=v;Object.assign(h.graph(),{ranksep:m,nodesep:y,edgesep:E,align:g});const b=[];if(h.nodes().forEach(ne=>{h.node(ne).node.type!==Mr.BRIDGE&&b.push(ne)}),!b.length)return{width:0,height:0};ig(h);let _=1/0,S=1/0,V=-1/0,fe=-1/0;return b.forEach(ne=>{const K=h.node(ne),J=.5*K.width,ge=K.x-J,G=K.x+J;_=ge<_?ge:_,V=G>V?G:V;const Ee=.5*K.height,ke=K.y-Ee,Ue=K.y+Ee;S=ke<S?ke:S,fe=Ue>fe?Ue:fe}),h.edges().forEach(ne=>{const K=h.edge(ne),J=h.node(K.metaEdge.v),ge=h.node(K.metaEdge.w);if(K.points.length===3&&function(ke){let Ue=Dv(ke[0],ke[1]);for(let pt=1;pt<ke.length-1;pt++){const Ke=Dv(ke[pt],ke[pt+1]);if(Math.abs(Ke-Ue)>1)return!1;Ue=Ke}return!0}(K.points)){if(J!=null){const ke=J.expanded?J.x:qd(J);K.points[0].x=ke}if(ge!=null){const ke=ge.expanded?ge.x:qd(ge);K.points[2].x=ke}K.points=[K.points[0],K.points[1]]}const G=K.points[K.points.length-2];ge!=null&&(K.points[K.points.length-1]=Cv(G,ge));const Ee=K.points[1];J!=null&&(K.points[0]=Cv(Ee,J)),K.points.forEach(ke=>{_=ke.x<_?ke.x:_,V=ke.x>V?ke.x:V,S=ke.y<S?ke.y:S,fe=ke.y>fe?ke.y:fe})}),h.nodes().forEach(ne=>{const K=h.node(ne);K.x-=_,K.y-=S}),h.edges().forEach(ne=>{h.edge(ne).points.forEach(K=>{K.x-=_,K.y-=S})}),{width:V-_,height:fe-S}}(n.coreGraph,f));let l=0;n.coreGraph.nodeCount()>0&&l++;const d=l<=1?0:l;n.coreBox.width+=d+d,n.coreBox.height=i.labelHeight+n.coreBox.height,n.width=n.coreBox.width+i.paddingLeft+i.paddingRight,n.height=n.paddingTop+n.coreBox.height+n.paddingBottom}(e,t)}function Dv(e,t){const n=t.x-e.x,r=t.y-e.y;return 180*Math.atan(r/n)/Math.PI}function qd(e){return e.expanded?e.x:e.x-e.width/2+0+e.coreBox.width/2}function Cv(e,t){const n=t.expanded?t.x:qd(t),r=t.y,o=e.x-n,i=e.y-r;let a,s,u=t.expanded?t.width:t.coreBox.width,c=t.expanded?t.height:t.coreBox.height;return Math.abs(i)*u/2>Math.abs(o)*c/2?(i<0&&(c=-c),a=i===0?0:c/2*o/i,s=c/2):(o<0&&(u=-u),a=u/2,s=o===0?0:u/2*i/o),{x:n+a,y:r+s}}function vg(e,t,n){var r,o,i,a;const s=e.nodes.filter((l,d,h)=>h.findIndex(v=>v.id===l.id)!==d).map(l=>l.id);if(s.length)throw new Error(`Duplicated ids found: ${s.join(", ")}`);const u=function(l){const d={nodes:[]},h=l.compound,v=Object.keys(h||{}),m=new Map,y=(g,b=[])=>{if(m.has(g))return m.get(g);for(let _=0;_<v.length;_++){let S=v[_];if(h&&h[S].indexOf(g)!==-1)return b.unshift(S),y(S,b)}return b.length===0&&m.set(g,b),b},E=g=>l.edges.filter(b=>b.w===g).map(b=>({name:b.v}));return l.nodes.forEach(g=>{const b=g.id,_=[...y(b),b];let S=E(b);d.nodes.push({name:b,path:_,inputs:S,width:g.width,height:g.height,attr:Object.assign({},g)})}),d}(e),c=function(l,d){const h=(m,y)=>{for(let E of y.values())if(E.includes(m))return!0;return!1},v=(m,y=[])=>{if(Object.keys(m).length===0)return[...new Set(y)];const E=new Map(Object.keys(m).map(b=>[b,m[b]])),g={};for(let[b,_]of E)h(b,E)?g[b]=_:y=y.concat(b,_);return v(g,y)};return v(l).filter(m=>d.includes(m))}(e.compound||{},(t==null?void 0:t.expanded)||[]),f=function(l,d){return function(h){return new hg(h)}(dg(ug(l),d))}(u,{rankDirection:((o=(r=n==null?void 0:n.graph)===null||r===void 0?void 0:r.meta)===null||o===void 0?void 0:o.rankDir)||(t==null?void 0:t.rankDirection)||Es.graph.meta.rankDir,align:((a=(i=n==null?void 0:n.graph)===null||i===void 0?void 0:i.meta)===null||a===void 0?void 0:a.align)||Es.graph.meta.align});return function(l,d){d.forEach(h=>{const v=l.getRenderInfoNodes().find(E=>E.displayName===h);let m=v&&v.node&&v.node.name||"";const y=l.getRenderNodeByName(m);if(!y)throw new Error(`No nodes found: ${m}`);y.expanded=!0,l.buildSubHierarchy(m)})}(f,c),Rv(f.root,n),Lv(f.root)}function pg(e,t=!1){const n=JSON.parse(JSON.stringify(e)),r={nodes:[n],edges:[...n.edges]};return n.nodes.forEach(function o(i){(i.type===0||i.type===1)&&r.nodes.push(i),i.type===0&&(r.edges=r.edges.concat(i.edges)),Array.isArray(i.nodes)&&i.nodes.forEach(o)}),t&&r.nodes.forEach(o=>{const i=r.nodes.find(a=>a.id===o.parentNodeName);if(i){const a=i.x-i.width/2+i.paddingLeft,s=i.y-i.height/2+i.labelHeight+i.paddingTop;i.id!==qi&&(o.x+=a,o.y+=s),o.type===0&&o.edges.forEach(u=>{u.points.forEach(c=>{c.x+=o.x-o.width/2+o.paddingLeft,c.y+=o.y-o.height/2+o.labelHeight+o.paddingTop})})}}),r}function Ov(e,t,n,r){var o,i;let a=[];const s=((o=n.find(l=>l.id===e))===null||o===void 0?void 0:o.path)||[],u=((i=n.find(l=>l.id===t))===null||i===void 0?void 0:i.path)||[],c=[qi,...s].slice(0,s.length).reverse(),f=[qi,...u].slice(0,u.length);return c.forEach(l=>{const d=n.find(h=>h.id===l);a=a.concat(d.edges.filter(h=>h.baseEdgeList.some(v=>v.v===((r==null?void 0:r.v)||e)&&v.w===((r==null?void 0:r.w)||t))))}),f.filter(l=>!c.includes(l)).forEach(l=>{const d=n.find(h=>h.id===l);a=a.concat(d.edges.filter(h=>h.baseEdgeList.some(v=>v.v===((r==null?void 0:r.v)||e)&&v.w===((r==null?void 0:r.w)||t))))}),a}function Lv(e){const t=e.coreGraph.nodes().map(r=>e.coreGraph.node(r));return Object.assign(Object.assign({},Mv(e)),{expanded:e.expanded,nodes:e.expanded?(n=t,n.map(r=>r.node.type===Mr.META?Lv(r):Mv(r))):[],edges:e.expanded?mg(e):[]});var n}function Mv(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}function mg(e){return e.coreGraph.edges().map(t=>({renderInfoEdge:e.coreGraph.edge(t),edge:t})).filter(({renderInfoEdge:t})=>t.metaEdge).map(({edge:t,renderInfoEdge:n})=>{const r=function(o,i){const a=i.points.map(s=>Object.assign({},s));if(i.adjoiningMetaEdge){const s=i.adjoiningMetaEdge.points,u=i.metaEdge.inbound,c=u?s[s.length-1]:s[0],f=a[u?0:a.length-1],l=o.x-o.width/2,d=o.y-o.height/2,h=c.x-l,v=c.y-d,m=-o.paddingLeft,y=-(o.paddingTop+o.labelHeight);f.x=h+m,f.y=v+y}return a}(e,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:t.w,v:t.v,points:r,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:e.node.name}})}class gg extends Dt{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.edgesep=5,this.ranksep=50,this.controlPoints=!0,this.anchorPoint=!0,this.nodes=[],this.edges=[],this.combos=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}}init(t){const n=t.hiddenNodes||[],r=t.hiddenEdges||[],o=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(n)),this.edges=this.getDataByOrder((t.edges||[]).concat(r)),this.combos=(t.combos||[]).concat(o.map(i=>Object.assign(Object.assign({},i),{collapsed:!0})))}execute(){const t=this,{nodes:n,edges:r}=t;if(!n)return;const{graphDef:o,graphOption:i,graphSettings:a}=t.getLayoutConfig(),s=vg(o,i,a),u=pg(s,!0);return this.updatePosition(u),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}getNodePath(t){const n=this,{nodes:r,combos:o}=n,i=r.find(s=>s.id===t),a=(s,u=[])=>{const c=o.find(f=>f.id===s);return c?(u.unshift(s),c.parentId?a(c.parentId,u):u):u};return i&&i.comboId?a(i.comboId,[t]):[t]}getLayoutConfig(){var t,n,r;const o=this,{nodes:i,edges:a,combos:s,nodeSize:u,rankdir:c,align:f,edgesep:l,nodesep:d,ranksep:h,settings:v}=o,m=(s||[]).reduce((Ee,ke)=>{const Ue=i.filter(Ke=>Ke.comboId===ke.id).map(Ke=>Ke.id),pt=(s||[]).filter(Ke=>Ke.parentId===ke.id).map(Ke=>Ke.id);return(Ue.length||pt.length)&&(Ee[ke.id]=[...Ue,...pt]),Ee},{});let y;u?it(u)?y=()=>u:y=()=>[u,u]:y=Ee=>Ee&&Ee.size?it(Ee.size)?Ee.size:ht(Ee.size)?[Ee.size.width||40,Ee.size.height||40]:[Ee.size,Ee.size]:[40,40];const E=Ee=>Ee&&Ee.size?it(Ee.size)?Ee.size:[Ee.size,Ee.size]:[80,40],[g,b]=E(s==null?void 0:s[0]),_=(n=(t=o.graphSettings)===null||t===void 0?void 0:t.subScene)===null||n===void 0?void 0:n.meta,[S,V,fe,ne]=((r=s.find(Ee=>!Ee.collapsed))===null||r===void 0?void 0:r.padding)||[20,20,20,20],K={compound:m,nodes:[...(i||[]).map(Ee=>{const ke=y(Ee),Ue=ke[0],pt=ke[1];return Object.assign(Object.assign({},Ee),{width:Ue,height:pt})})],edges:[...(a||[]).map(Ee=>Object.assign(Object.assign({},Ee),{v:Ee.source,w:Ee.target}))]},J={expanded:(s||[]).filter(Ee=>!Ee.collapsed).map(Ee=>Ee.id)},ge={graph:{meta:{align:f,rankDir:c,nodeSep:d,edgeSep:l,rankSep:h}},subScene:{meta:{paddingTop:S||(_==null?void 0:_.paddingTop)||20,paddingRight:V||(_==null?void 0:_.paddingRight)||20,paddingBottom:fe||(_==null?void 0:_.paddingBottom)||20,paddingLeft:ne||(_==null?void 0:_.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:g,height:b}}},G=bs(v,Object.assign({},bs(ge,Es)));return o.graphSettings=G,{graphDef:K,graphOption:J,graphSettings:G}}updatePosition(t){const{nodes:n,edges:r}=t;this.updateNodePosition(n,r),this.updateEdgePosition(n,r)}getBegin(t,n){const r=this,{begin:o}=r,i=[0,0];if(o){let a=1/0,s=1/0;t.forEach(u=>{a>u.x&&(a=u.x),s>u.y&&(s=u.y)}),n.forEach(u=>{u.points.forEach(c=>{a>c.x&&(a=c.x),s>c.y&&(s=c.y)})}),i[0]=o[0]-a,i[1]=o[1]-s}return i}updateNodePosition(t,n){const r=this,{combos:o,nodes:i,edges:a,anchorPoint:s,graphSettings:u}=r,c=this.getBegin(t,n);t.forEach(f=>{var l;const{x:d,y:h,id:v,type:m,coreBox:y}=f;if(m===xs.META&&v!==qi){const E=o.findIndex(b=>b.id===v),g=(l=u==null?void 0:u.subScene)===null||l===void 0?void 0:l.meta;o[E].offsetX=d+c[0],o[E].offsetY=h+c[1],o[E].fixSize=[y.width,y.height],o[E].fixCollapseSize=[y.width,y.height],f.expanded?o[E].padding=[g==null?void 0:g.paddingTop,g==null?void 0:g.paddingRight,g==null?void 0:g.paddingBottom,g==null?void 0:g.paddingLeft]:o[E].padding=[0,0,0,0]}else if(m===xs.OP){const E=i.findIndex(g=>g.id===v);if(i[E].x=d+c[0],i[E].y=h+c[1],s){const g=[],b=n.filter(S=>S.v===v),_=n.filter(S=>S.w===v);b.length>0&&b.forEach(S=>{const V=S.points[0],fe=(V.x-d)/f.width+.5,ne=(V.y-h)/f.height+.5;g.push([fe,ne]),S.baseEdgeList.forEach(K=>{const J=a.find(ge=>ge.source===K.v&&ge.target===K.w);J&&(J.sourceAnchor=g.length-1)})}),_.length>0&&_.forEach(S=>{const V=S.points[S.points.length-1],fe=(V.x-d)/f.width+.5,ne=(V.y-h)/f.height+.5;g.push([fe,ne]),S.baseEdgeList.forEach(K=>{const J=a.find(ge=>ge.source===K.v&&ge.target===K.w);J&&(J.targetAnchor=g.length-1)})}),i[E].anchorPoints=g.length>0?g:i[E].anchorPoints||[]}}})}updateEdgePosition(t,n){const r=this,{combos:o,edges:i,controlPoints:a}=r,s=this.getBegin(t,n);a&&(o.forEach(u=>{u.inEdges=[],u.outEdges=[]}),i.forEach(u=>{var c,f,l,d;let h=t.find(E=>E.id===u.source),v=t.find(E=>E.id===u.target),m=[],y=[];if(h&&v)y=Ov(h==null?void 0:h.id,v==null?void 0:v.id,t);else if(!h||!v){const E=r.getNodePath(u.source),g=r.getNodePath(u.target),b=E.reverse().slice(h?0:1).find(S=>t.find(V=>V.id===S)),_=g.reverse().slice(v?0:1).find(S=>t.find(V=>V.id===S));h=t.find(S=>S.id===b),v=t.find(S=>S.id===_),y=Ov(h==null?void 0:h.id,v==null?void 0:v.id,t,{v:u.source,w:u.target})}if(m=y.reduce((E,g)=>[...E,...g.points.map(b=>Object.assign(Object.assign({},b),{x:b.x+s[0],y:b.y+s[1]}))],[]),m=m.slice(1,-1),u.controlPoints=m,(v==null?void 0:v.type)===Mr.META){const E=o.findIndex(g=>g.id===(v==null?void 0:v.id));if(!o[E]||!((c=o[E].inEdges)===null||c===void 0)&&c.some(g=>g.source===h.id&&g.target===v.id))return;(f=o[E].inEdges)===null||f===void 0||f.push({source:h.id,target:v.id,controlPoints:m})}if((h==null?void 0:h.type)===Mr.META){const E=o.findIndex(g=>g.id===(h==null?void 0:h.id));if(!o[E]||!((l=o[E].outEdges)===null||l===void 0)&&l.some(g=>g.source===h.id&&g.target===v.id))return;(d=o[E].outEdges)===null||d===void 0||d.push({source:h.id,target:v.id,controlPoints:m})}}))}getType(){return"dagreCompound"}getDataByOrder(t){return t.every(n=>n.layoutOrder!==void 0)||t.forEach((n,r)=>{n.layoutOrder=r}),t.sort((n,r)=>n.layoutOrder-r.layoutOrder)}}var yg=Z(75254),kv=Z.n(yg),Eg=Z(62657),bg=Z.n(Eg),xg=Z(21742),Gv=Z.n(xg),_g=Z(83136),Pv=Z.n(_g),wg=Z(25298),fl=Z.n(wg),Sg=Z(17069),ll=Z.n(Sg);const Tg=Object.prototype.toString;function dl(e){const t=Tg.call(e);return t.endsWith("Array]")&&!t.includes("Big")}function Ig(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!dl(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var n=t.fromIndex,r=n===void 0?0:n,o=t.toIndex,i=o===void 0?e.length:o;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>e.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<i;s++)e[s]>a&&(a=e[s]);return a}function Ag(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!dl(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var n=t.fromIndex,r=n===void 0?0:n,o=t.toIndex,i=o===void 0?e.length:o;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>e.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<i;s++)e[s]<a&&(a=e[s]);return a}function Fv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(dl(e)){if(e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(t.output!==void 0){if(!dl(t.output))throw new TypeError("output option must be an array if specified");n=t.output}else n=new Array(e.length);var r=Ag(e),o=Ig(e);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=t.min,a=i===void 0?t.autoMinMax?r:0:i,s=t.max,u=s===void 0?t.autoMinMax?o:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var c=(u-a)/(o-r),f=0;f<e.length;f++)n[f]=(e[f]-r)*c+a;return n}var hl=" ".repeat(2),zv=" ".repeat(4);function Ng(){return Bv(this)}function Bv(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxRows,r=n===void 0?15:n,o=t.maxColumns,i=o===void 0?10:o,a=t.maxNumSize,s=a===void 0?8:a;return"".concat(e.constructor.name,` {
`).concat(hl,`[
`).concat(zv).concat(Rg(e,r,i,s),`
`).concat(hl,`]
`).concat(hl,"rows: ").concat(e.rows,`
`).concat(hl,"columns: ").concat(e.columns,`
}`)}function Rg(e,t,n,r){for(var o=e.rows,i=e.columns,a=Math.min(o,t),s=Math.min(i,n),u=[],c=0;c<a;c++){for(var f=[],l=0;l<s;l++)f.push(Dg(e.get(c,l),r));u.push("".concat(f.join(" ")))}return s!==i&&(u[u.length-1]+=" ... ".concat(i-n," more columns")),a!==o&&u.push("... ".concat(o-t," more rows")),u.join(`
`.concat(zv))}function Dg(e,t){var n=String(e);if(n.length<=t)return n.padEnd(t," ");var r=e.toPrecision(t-2);if(r.length<=t)return r;var o=e.toExponential(t-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,t-a.length)+a}function Cg(e,t){e.prototype.add=function(r){return typeof r=="number"?this.addS(r):this.addM(r)},e.prototype.addS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)+r);return this},e.prototype.addM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)+r.get(o,i));return this},e.add=function(r,o){var i=new t(r);return i.add(o)},e.prototype.sub=function(r){return typeof r=="number"?this.subS(r):this.subM(r)},e.prototype.subS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)-r);return this},e.prototype.subM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)-r.get(o,i));return this},e.sub=function(r,o){var i=new t(r);return i.sub(o)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(r){return typeof r=="number"?this.mulS(r):this.mulM(r)},e.prototype.mulS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)*r);return this},e.prototype.mulM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)*r.get(o,i));return this},e.mul=function(r,o){var i=new t(r);return i.mul(o)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(r){return typeof r=="number"?this.divS(r):this.divM(r)},e.prototype.divS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)/r);return this},e.prototype.divM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)/r.get(o,i));return this},e.div=function(r,o){var i=new t(r);return i.div(o)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(r){return typeof r=="number"?this.modS(r):this.modM(r)},e.prototype.modS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)%r);return this},e.prototype.modM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)%r.get(o,i));return this},e.mod=function(r,o){var i=new t(r);return i.mod(o)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(r){return typeof r=="number"?this.andS(r):this.andM(r)},e.prototype.andS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)&r);return this},e.prototype.andM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)&r.get(o,i));return this},e.and=function(r,o){var i=new t(r);return i.and(o)},e.prototype.or=function(r){return typeof r=="number"?this.orS(r):this.orM(r)},e.prototype.orS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)|r);return this},e.prototype.orM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)|r.get(o,i));return this},e.or=function(r,o){var i=new t(r);return i.or(o)},e.prototype.xor=function(r){return typeof r=="number"?this.xorS(r):this.xorM(r)},e.prototype.xorS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)^r);return this},e.prototype.xorM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)^r.get(o,i));return this},e.xor=function(r,o){var i=new t(r);return i.xor(o)},e.prototype.leftShift=function(r){return typeof r=="number"?this.leftShiftS(r):this.leftShiftM(r)},e.prototype.leftShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)<<r);return this},e.prototype.leftShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)<<r.get(o,i));return this},e.leftShift=function(r,o){var i=new t(r);return i.leftShift(o)},e.prototype.signPropagatingRightShift=function(r){return typeof r=="number"?this.signPropagatingRightShiftS(r):this.signPropagatingRightShiftM(r)},e.prototype.signPropagatingRightShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>r);return this},e.prototype.signPropagatingRightShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>r.get(o,i));return this},e.signPropagatingRightShift=function(r,o){var i=new t(r);return i.signPropagatingRightShift(o)},e.prototype.rightShift=function(r){return typeof r=="number"?this.rightShiftS(r):this.rightShiftM(r)},e.prototype.rightShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>>r);return this},e.prototype.rightShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>>r.get(o,i));return this},e.rightShift=function(r,o){var i=new t(r);return i.rightShift(o)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,~this.get(r,o));return this},e.not=function(r){var o=new t(r);return o.not()},e.prototype.abs=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.abs(this.get(r,o)));return this},e.abs=function(r){var o=new t(r);return o.abs()},e.prototype.acos=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.acos(this.get(r,o)));return this},e.acos=function(r){var o=new t(r);return o.acos()},e.prototype.acosh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.acosh(this.get(r,o)));return this},e.acosh=function(r){var o=new t(r);return o.acosh()},e.prototype.asin=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.asin(this.get(r,o)));return this},e.asin=function(r){var o=new t(r);return o.asin()},e.prototype.asinh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.asinh(this.get(r,o)));return this},e.asinh=function(r){var o=new t(r);return o.asinh()},e.prototype.atan=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.atan(this.get(r,o)));return this},e.atan=function(r){var o=new t(r);return o.atan()},e.prototype.atanh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.atanh(this.get(r,o)));return this},e.atanh=function(r){var o=new t(r);return o.atanh()},e.prototype.cbrt=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cbrt(this.get(r,o)));return this},e.cbrt=function(r){var o=new t(r);return o.cbrt()},e.prototype.ceil=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.ceil(this.get(r,o)));return this},e.ceil=function(r){var o=new t(r);return o.ceil()},e.prototype.clz32=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.clz32(this.get(r,o)));return this},e.clz32=function(r){var o=new t(r);return o.clz32()},e.prototype.cos=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cos(this.get(r,o)));return this},e.cos=function(r){var o=new t(r);return o.cos()},e.prototype.cosh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cosh(this.get(r,o)));return this},e.cosh=function(r){var o=new t(r);return o.cosh()},e.prototype.exp=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.exp(this.get(r,o)));return this},e.exp=function(r){var o=new t(r);return o.exp()},e.prototype.expm1=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.expm1(this.get(r,o)));return this},e.expm1=function(r){var o=new t(r);return o.expm1()},e.prototype.floor=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.floor(this.get(r,o)));return this},e.floor=function(r){var o=new t(r);return o.floor()},e.prototype.fround=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.fround(this.get(r,o)));return this},e.fround=function(r){var o=new t(r);return o.fround()},e.prototype.log=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log(this.get(r,o)));return this},e.log=function(r){var o=new t(r);return o.log()},e.prototype.log1p=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log1p(this.get(r,o)));return this},e.log1p=function(r){var o=new t(r);return o.log1p()},e.prototype.log10=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log10(this.get(r,o)));return this},e.log10=function(r){var o=new t(r);return o.log10()},e.prototype.log2=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log2(this.get(r,o)));return this},e.log2=function(r){var o=new t(r);return o.log2()},e.prototype.round=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.round(this.get(r,o)));return this},e.round=function(r){var o=new t(r);return o.round()},e.prototype.sign=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sign(this.get(r,o)));return this},e.sign=function(r){var o=new t(r);return o.sign()},e.prototype.sin=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sin(this.get(r,o)));return this},e.sin=function(r){var o=new t(r);return o.sin()},e.prototype.sinh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sinh(this.get(r,o)));return this},e.sinh=function(r){var o=new t(r);return o.sinh()},e.prototype.sqrt=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sqrt(this.get(r,o)));return this},e.sqrt=function(r){var o=new t(r);return o.sqrt()},e.prototype.tan=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.tan(this.get(r,o)));return this},e.tan=function(r){var o=new t(r);return o.tan()},e.prototype.tanh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.tanh(this.get(r,o)));return this},e.tanh=function(r){var o=new t(r);return o.tanh()},e.prototype.trunc=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.trunc(this.get(r,o)));return this},e.trunc=function(r){var o=new t(r);return o.trunc()},e.pow=function(r,o){var i=new t(r);return i.pow(o)},e.prototype.pow=function(r){return typeof r=="number"?this.powS(r):this.powM(r)},e.prototype.powS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,Math.pow(this.get(o,i),r));return this},e.prototype.powM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,Math.pow(this.get(o,i),r.get(o,i)));return this}}function ei(e,t,n){var r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function ti(e,t,n){var r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function wu(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function Su(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function Og(e,t,n){return{row:Lg(e,t),column:Mg(e,n)}}function Lg(e,t){if(Ar()(t)!=="object")throw new TypeError("unexpected type for row indices");var n=t.some(function(r){return r<0||r>=e.rows});if(n)throw new RangeError("row indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function Mg(e,t){if(Ar()(t)!=="object")throw new TypeError("unexpected type for column indices");var n=t.some(function(r){return r<0||r>=e.columns});if(n)throw new RangeError("column indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function Uv(e,t,n,r,o){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(pl("startRow",t),pl("endRow",n),pl("startColumn",r),pl("endColumn",o),t>n||r>o||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||o<0||o>=e.columns)throw new RangeError("Submatrix indices are out of range")}function vl(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],r=0;r<e;r++)n.push(t);return n}function pl(e,t){if(typeof t!="number")throw new TypeError("".concat(e," must be a number"))}function kg(e){for(var t=vl(e.rows),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}function Gg(e){for(var t=vl(e.columns),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}function Pg(e){for(var t=0,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t+=e.get(n,r);return t}function Fg(e){for(var t=vl(e.rows,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}function zg(e){for(var t=vl(e.columns,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}function Bg(e){for(var t=1,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t*=e.get(n,r);return t}function Ug(e,t,n){for(var r=e.rows,o=e.columns,i=[],a=0;a<r;a++){for(var s=0,u=0,c=0,f=0;f<o;f++)c=e.get(a,f)-n[a],s+=c,u+=c*c;t?i.push((u-s*s/o)/(o-1)):i.push((u-s*s/o)/o)}return i}function Vg(e,t,n){for(var r=e.rows,o=e.columns,i=[],a=0;a<o;a++){for(var s=0,u=0,c=0,f=0;f<r;f++)c=e.get(f,a)-n[a],s+=c,u+=c*c;t?i.push((u-s*s/r)/(r-1)):i.push((u-s*s/r)/r)}return i}function $g(e,t,n){for(var r=e.rows,o=e.columns,i=r*o,a=0,s=0,u=0,c=0;c<r;c++)for(var f=0;f<o;f++)u=e.get(c,f)-n,a+=u,s+=u*u;return t?(s-a*a/i)/(i-1):(s-a*a/i)/i}function Xg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}function Wg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}function Hg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}function Zg(e){for(var t=[],n=0;n<e.rows;n++){for(var r=0,o=0;o<e.columns;o++)r+=Math.pow(e.get(n,o),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}function jg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}function Yg(e){for(var t=[],n=0;n<e.columns;n++){for(var r=0,o=0;o<e.rows;o++)r+=Math.pow(e.get(o,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}function Kg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}function qg(e){for(var t=e.size-1,n=0,r=0;r<e.columns;r++)for(var o=0;o<e.rows;o++)n+=Math.pow(e.get(o,r),2)/t;return Math.sqrt(n)}function Qg(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}var kr=function(){function e(){fl()(this,e)}return ll()(e,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(n){if(typeof n!="function")throw new TypeError("callback must be a function");for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.call(this,r,o);return this}},{key:"to1DArray",value:function(){for(var n=[],r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.push(this.get(r,o));return n}},{key:"to2DArray",value:function(){for(var n=[],r=0;r<this.rows;r++){n.push([]);for(var o=0;o<this.columns;o++)n[r].push(this.get(r,o))}return n}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var n=0;n<this.rows;n++)for(var r=0;r<=n;r++)if(this.get(n,r)!==this.get(r,n))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var n=0,r=0,o=-1,i=!0,a=!1;n<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(n,r)===0?r++:this.get(n,r)===1&&r>o?(a=!0,o=r):(i=!1,a=!0);n++}return i}},{key:"isReducedEchelonForm",value:function(){for(var n=0,r=0,o=-1,i=!0,a=!1;n<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(n,r)===0?r++:this.get(n,r)===1&&r>o?(a=!0,o=r):(i=!1,a=!0);for(var s=r+1;s<this.rows;s++)this.get(n,s)!==0&&(i=!1);n++}return i}},{key:"echelonForm",value:function(){for(var n=this.clone(),r=0,o=0;r<n.rows&&o<n.columns;){for(var i=r,a=r;a<n.rows;a++)n.get(a,o)>n.get(i,o)&&(i=a);if(n.get(i,o)===0)o++;else{n.swapRows(r,i);for(var s=n.get(r,o),u=o;u<n.columns;u++)n.set(r,u,n.get(r,u)/s);for(var c=r+1;c<n.rows;c++){var f=n.get(c,o)/n.get(r,o);n.set(c,o,0);for(var l=o+1;l<n.columns;l++)n.set(c,l,n.get(c,l)-n.get(r,l)*f)}r++,o++}}return n}},{key:"reducedEchelonForm",value:function(){for(var n=this.echelonForm(),r=n.columns,o=n.rows,i=o-1;i>=0;)if(n.maxRow(i)===0)i--;else{for(var a=0,s=!1;a<o&&s===!1;)n.get(i,a)===1?s=!0:a++;for(var u=0;u<i;u++)for(var c=n.get(u,a),f=a;f<r;f++){var l=n.get(u,f)-c*n.get(i,f);n.set(u,f,l)}i--}return n}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ar()(n)!=="object")throw new TypeError("options must be an object");var r=n.rows,o=r===void 0?1:r,i=n.columns,a=i===void 0?1:i;if(!Number.isInteger(o)||o<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");for(var s=new Ot(this.rows*o,this.columns*a),u=0;u<o;u++)for(var c=0;c<a;c++)s.setSubMatrix(this,this.rows*u,this.columns*c);return s}},{key:"fill",value:function(n){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,n);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(n){ei(this,n);for(var r=[],o=0;o<this.columns;o++)r.push(this.get(n,o));return r}},{key:"getRowVector",value:function(n){return Ot.rowVector(this.getRow(n))}},{key:"setRow",value:function(n,r){ei(this,n),r=wu(this,r);for(var o=0;o<this.columns;o++)this.set(n,o,r[o]);return this}},{key:"swapRows",value:function(n,r){ei(this,n),ei(this,r);for(var o=0;o<this.columns;o++){var i=this.get(n,o);this.set(n,o,this.get(r,o)),this.set(r,o,i)}return this}},{key:"getColumn",value:function(n){ti(this,n);for(var r=[],o=0;o<this.rows;o++)r.push(this.get(o,n));return r}},{key:"getColumnVector",value:function(n){return Ot.columnVector(this.getColumn(n))}},{key:"setColumn",value:function(n,r){ti(this,n),r=Su(this,r);for(var o=0;o<this.rows;o++)this.set(o,n,r[o]);return this}},{key:"swapColumns",value:function(n,r){ti(this,n),ti(this,r);for(var o=0;o<this.rows;o++){var i=this.get(o,n);this.set(o,n,this.get(o,r)),this.set(o,r,i)}return this}},{key:"addRowVector",value:function(n){n=wu(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)+n[o]);return this}},{key:"subRowVector",value:function(n){n=wu(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)-n[o]);return this}},{key:"mulRowVector",value:function(n){n=wu(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)*n[o]);return this}},{key:"divRowVector",value:function(n){n=wu(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)/n[o]);return this}},{key:"addColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)+n[r]);return this}},{key:"subColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)-n[r]);return this}},{key:"mulColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)*n[r]);return this}},{key:"divColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)/n[r]);return this}},{key:"mulRow",value:function(n,r){ei(this,n);for(var o=0;o<this.columns;o++)this.set(n,o,this.get(n,o)*r);return this}},{key:"mulColumn",value:function(n,r){ti(this,n);for(var o=0;o<this.rows;o++)this.set(o,n,this.get(o,n)*r);return this}},{key:"max",value:function(){for(var n=this.get(0,0),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.get(r,o)>n&&(n=this.get(r,o));return n}},{key:"maxIndex",value:function(){for(var n=this.get(0,0),r=[0,0],o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.get(o,i)>n&&(n=this.get(o,i),r[0]=o,r[1]=i);return r}},{key:"min",value:function(){for(var n=this.get(0,0),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.get(r,o)<n&&(n=this.get(r,o));return n}},{key:"minIndex",value:function(){for(var n=this.get(0,0),r=[0,0],o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.get(o,i)<n&&(n=this.get(o,i),r[0]=o,r[1]=i);return r}},{key:"maxRow",value:function(n){ei(this,n);for(var r=this.get(n,0),o=1;o<this.columns;o++)this.get(n,o)>r&&(r=this.get(n,o));return r}},{key:"maxRowIndex",value:function(n){ei(this,n);for(var r=this.get(n,0),o=[n,0],i=1;i<this.columns;i++)this.get(n,i)>r&&(r=this.get(n,i),o[1]=i);return o}},{key:"minRow",value:function(n){ei(this,n);for(var r=this.get(n,0),o=1;o<this.columns;o++)this.get(n,o)<r&&(r=this.get(n,o));return r}},{key:"minRowIndex",value:function(n){ei(this,n);for(var r=this.get(n,0),o=[n,0],i=1;i<this.columns;i++)this.get(n,i)<r&&(r=this.get(n,i),o[1]=i);return o}},{key:"maxColumn",value:function(n){ti(this,n);for(var r=this.get(0,n),o=1;o<this.rows;o++)this.get(o,n)>r&&(r=this.get(o,n));return r}},{key:"maxColumnIndex",value:function(n){ti(this,n);for(var r=this.get(0,n),o=[0,n],i=1;i<this.rows;i++)this.get(i,n)>r&&(r=this.get(i,n),o[0]=i);return o}},{key:"minColumn",value:function(n){ti(this,n);for(var r=this.get(0,n),o=1;o<this.rows;o++)this.get(o,n)<r&&(r=this.get(o,n));return r}},{key:"minColumnIndex",value:function(n){ti(this,n);for(var r=this.get(0,n),o=[0,n],i=1;i<this.rows;i++)this.get(i,n)<r&&(r=this.get(i,n),o[0]=i);return o}},{key:"diag",value:function(){for(var n=Math.min(this.rows,this.columns),r=[],o=0;o<n;o++)r.push(this.get(o,o));return r}},{key:"norm",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",r=0;if(n==="max")return this.max();if(n==="frobenius"){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)r=r+this.get(o,i)*this.get(o,i);return Math.sqrt(r)}else throw new RangeError("unknown norm type: ".concat(n))}},{key:"cumulativeSum",value:function(){for(var n=0,r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n+=this.get(r,o),this.set(r,o,n);return this}},{key:"dot",value:function(n){e.isMatrix(n)&&(n=n.to1DArray());var r=this.to1DArray();if(r.length!==n.length)throw new RangeError("vectors do not have the same size");for(var o=0,i=0;i<r.length;i++)o+=r[i]*n[i];return o}},{key:"mmul",value:function(n){n=Ot.checkMatrix(n);for(var r=this.rows,o=this.columns,i=n.columns,a=new Ot(r,i),s=new Float64Array(o),u=0;u<i;u++){for(var c=0;c<o;c++)s[c]=n.get(c,u);for(var f=0;f<r;f++){for(var l=0,d=0;d<o;d++)l+=this.get(f,d)*s[d];a.set(f,u,l)}}return a}},{key:"strassen2x2",value:function(n){n=Ot.checkMatrix(n);var r=new Ot(2,2),o=this.get(0,0),i=n.get(0,0),a=this.get(0,1),s=n.get(0,1),u=this.get(1,0),c=n.get(1,0),f=this.get(1,1),l=n.get(1,1),d=(o+f)*(i+l),h=(u+f)*i,v=o*(s-l),m=f*(c-i),y=(o+a)*l,E=(u-o)*(i+s),g=(a-f)*(c+l),b=d+m-y+g,_=v+y,S=h+m,V=d-h+v+E;return r.set(0,0,b),r.set(0,1,_),r.set(1,0,S),r.set(1,1,V),r}},{key:"strassen3x3",value:function(n){n=Ot.checkMatrix(n);var r=new Ot(3,3),o=this.get(0,0),i=this.get(0,1),a=this.get(0,2),s=this.get(1,0),u=this.get(1,1),c=this.get(1,2),f=this.get(2,0),l=this.get(2,1),d=this.get(2,2),h=n.get(0,0),v=n.get(0,1),m=n.get(0,2),y=n.get(1,0),E=n.get(1,1),g=n.get(1,2),b=n.get(2,0),_=n.get(2,1),S=n.get(2,2),V=(o+i+a-s-u-l-d)*E,fe=(o-s)*(-v+E),ne=u*(-h+v+y-E-g-b+S),K=(-o+s+u)*(h-v+E),J=(s+u)*(-h+v),ge=o*h,G=(-o+f+l)*(h-m+g),Ee=(-o+f)*(m-g),ke=(f+l)*(-h+m),Ue=(o+i+a-u-c-f-l)*g,pt=l*(-h+m+y-E-g-b+_),Ke=(-a+l+d)*(E+b-_),bt=(a-d)*(E-_),dt=a*b,Vt=(l+d)*(-b+_),un=(-a+u+c)*(g+b-S),Qn=(a-c)*(g-S),or=(u+c)*(-b+S),We=i*y,rn=c*_,hr=s*m,yn=f*v,zn=d*S,$e=ge+dt+We,ft=V+K+J+ge+Ke+dt+Vt,Ln=ge+G+ke+Ue+dt+un+or,$t=fe+ne+K+ge+dt+un+Qn,Wn=fe+K+J+ge+rn,cn=dt+un+Qn+or+hr,Mn=ge+G+Ee+pt+Ke+bt+dt,Gr=Ke+bt+dt+Vt+yn,Rr=ge+G+Ee+ke+zn;return r.set(0,0,$e),r.set(0,1,ft),r.set(0,2,Ln),r.set(1,0,$t),r.set(1,1,Wn),r.set(1,2,cn),r.set(2,0,Mn),r.set(2,1,Gr),r.set(2,2,Rr),r}},{key:"mmulStrassen",value:function(n){n=Ot.checkMatrix(n);var r=this.clone(),o=r.rows,i=r.columns,a=n.rows,s=n.columns;i!==a&&console.warn("Multiplying ".concat(o," x ").concat(i," and ").concat(a," x ").concat(s," matrix: dimensions do not match."));function u(d,h,v){var m=d.rows,y=d.columns;if(m===h&&y===v)return d;var E=e.zeros(h,v);return E=E.setSubMatrix(d,0,0),E}var c=Math.max(o,a),f=Math.max(i,s);r=u(r,c,f),n=u(n,c,f);function l(d,h,v,m){if(v<=512||m<=512)return d.mmul(h);v%2===1&&m%2===1?(d=u(d,v+1,m+1),h=u(h,v+1,m+1)):v%2===1?(d=u(d,v+1,m),h=u(h,v+1,m)):m%2===1&&(d=u(d,v,m+1),h=u(h,v,m+1));var y=parseInt(d.rows/2,10),E=parseInt(d.columns/2,10),g=d.subMatrix(0,y-1,0,E-1),b=h.subMatrix(0,y-1,0,E-1),_=d.subMatrix(0,y-1,E,d.columns-1),S=h.subMatrix(0,y-1,E,h.columns-1),V=d.subMatrix(y,d.rows-1,0,E-1),fe=h.subMatrix(y,h.rows-1,0,E-1),ne=d.subMatrix(y,d.rows-1,E,d.columns-1),K=h.subMatrix(y,h.rows-1,E,h.columns-1),J=l(e.add(g,ne),e.add(b,K),y,E),ge=l(e.add(V,ne),b,y,E),G=l(g,e.sub(S,K),y,E),Ee=l(ne,e.sub(fe,b),y,E),ke=l(e.add(g,_),K,y,E),Ue=l(e.sub(V,g),e.add(b,S),y,E),pt=l(e.sub(_,ne),e.add(fe,K),y,E),Ke=e.add(J,Ee);Ke.sub(ke),Ke.add(pt);var bt=e.add(G,ke),dt=e.add(ge,Ee),Vt=e.sub(J,ge);Vt.add(G),Vt.add(Ue);var un=e.zeros(2*Ke.rows,2*Ke.columns);return un=un.setSubMatrix(Ke,0,0),un=un.setSubMatrix(bt,Ke.rows,0),un=un.setSubMatrix(dt,0,Ke.columns),un=un.setSubMatrix(Vt,Ke.rows,Ke.columns),un.subMatrix(0,v-1,0,m-1)}return l(r,n,c,f)}},{key:"scaleRows",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ar()(n)!=="object")throw new TypeError("options must be an object");var r=n.min,o=r===void 0?0:r,i=n.max,a=i===void 0?1:i;if(!Number.isFinite(o))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(o>=a)throw new RangeError("min must be smaller than max");for(var s=new Ot(this.rows,this.columns),u=0;u<this.rows;u++){var c=this.getRow(u);Fv(c,{min:o,max:a,output:c}),s.setRow(u,c)}return s}},{key:"scaleColumns",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ar()(n)!=="object")throw new TypeError("options must be an object");var r=n.min,o=r===void 0?0:r,i=n.max,a=i===void 0?1:i;if(!Number.isFinite(o))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(o>=a)throw new RangeError("min must be smaller than max");for(var s=new Ot(this.rows,this.columns),u=0;u<this.columns;u++){var c=this.getColumn(u);Fv(c,{min:o,max:a,output:c}),s.setColumn(u,c)}return s}},{key:"flipRows",value:function(){for(var n=Math.ceil(this.columns/2),r=0;r<this.rows;r++)for(var o=0;o<n;o++){var i=this.get(r,o),a=this.get(r,this.columns-1-o);this.set(r,o,a),this.set(r,this.columns-1-o,i)}return this}},{key:"flipColumns",value:function(){for(var n=Math.ceil(this.rows/2),r=0;r<this.columns;r++)for(var o=0;o<n;o++){var i=this.get(o,r),a=this.get(this.rows-1-o,r);this.set(o,r,a),this.set(this.rows-1-o,r,i)}return this}},{key:"kroneckerProduct",value:function(n){n=Ot.checkMatrix(n);for(var r=this.rows,o=this.columns,i=n.rows,a=n.columns,s=new Ot(r*i,o*a),u=0;u<r;u++)for(var c=0;c<o;c++)for(var f=0;f<i;f++)for(var l=0;l<a;l++)s.set(i*u+f,a*c+l,this.get(u,c)*n.get(f,l));return s}},{key:"transpose",value:function(){for(var n=new Ot(this.columns,this.rows),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.set(o,r,this.get(r,o));return n}},{key:"sortRows",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vv,r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(n));return this}},{key:"sortColumns",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vv,r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(n));return this}},{key:"subMatrix",value:function(n,r,o,i){Uv(this,n,r,o,i);for(var a=new Ot(r-n+1,i-o+1),s=n;s<=r;s++)for(var u=o;u<=i;u++)a.set(s-n,u-o,this.get(s,u));return a}},{key:"subMatrixRow",value:function(n,r,o){if(r===void 0&&(r=0),o===void 0&&(o=this.columns-1),r>o||r<0||r>=this.columns||o<0||o>=this.columns)throw new RangeError("Argument out of range");for(var i=new Ot(n.length,o-r+1),a=0;a<n.length;a++)for(var s=r;s<=o;s++){if(n[a]<0||n[a]>=this.rows)throw new RangeError("Row index out of range: ".concat(n[a]));i.set(a,s-r,this.get(n[a],s))}return i}},{key:"subMatrixColumn",value:function(n,r,o){if(r===void 0&&(r=0),o===void 0&&(o=this.rows-1),r>o||r<0||r>=this.rows||o<0||o>=this.rows)throw new RangeError("Argument out of range");for(var i=new Ot(o-r+1,n.length),a=0;a<n.length;a++)for(var s=r;s<=o;s++){if(n[a]<0||n[a]>=this.columns)throw new RangeError("Column index out of range: ".concat(n[a]));i.set(s-r,a,this.get(s,n[a]))}return i}},{key:"setSubMatrix",value:function(n,r,o){n=Ot.checkMatrix(n);var i=r+n.rows-1,a=o+n.columns-1;Uv(this,r,i,o,a);for(var s=0;s<n.rows;s++)for(var u=0;u<n.columns;u++)this.set(r+s,o+u,n.get(s,u));return this}},{key:"selection",value:function(n,r){for(var o=Og(this,n,r),i=new Ot(n.length,r.length),a=0;a<o.row.length;a++)for(var s=o.row[a],u=0;u<o.column.length;u++){var c=o.column[u];i.set(a,u,this.get(s,c))}return i}},{key:"trace",value:function(){for(var n=Math.min(this.rows,this.columns),r=0,o=0;o<n;o++)r+=this.get(o,o);return r}},{key:"clone",value:function(){for(var n=new Ot(this.rows,this.columns),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.set(r,o,this.get(r,o));return n}},{key:"sum",value:function(n){switch(n){case"row":return kg(this);case"column":return Gg(this);case void 0:return Pg(this);default:throw new Error("invalid option: ".concat(n))}}},{key:"product",value:function(n){switch(n){case"row":return Fg(this);case"column":return zg(this);case void 0:return Bg(this);default:throw new Error("invalid option: ".concat(n))}}},{key:"mean",value:function(n){var r=this.sum(n);switch(n){case"row":{for(var o=0;o<this.rows;o++)r[o]/=this.columns;return r}case"column":{for(var i=0;i<this.columns;i++)r[i]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error("invalid option: ".concat(n))}}},{key:"variance",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ar()(n)==="object"&&(r=n,n=void 0),Ar()(r)!=="object")throw new TypeError("options must be an object");var o=r,i=o.unbiased,a=i===void 0?!0:i,s=o.mean,u=s===void 0?this.mean(n):s;if(typeof a!="boolean")throw new TypeError("unbiased must be a boolean");switch(n){case"row":{if(!Array.isArray(u))throw new TypeError("mean must be an array");return Ug(this,a,u)}case"column":{if(!Array.isArray(u))throw new TypeError("mean must be an array");return Vg(this,a,u)}case void 0:{if(typeof u!="number")throw new TypeError("mean must be a number");return $g(this,a,u)}default:throw new Error("invalid option: ".concat(n))}}},{key:"standardDeviation",value:function(n,r){Ar()(n)==="object"&&(r=n,n=void 0);var o=this.variance(n,r);if(n===void 0)return Math.sqrt(o);for(var i=0;i<o.length;i++)o[i]=Math.sqrt(o[i]);return o}},{key:"center",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ar()(n)==="object"&&(r=n,n=void 0),Ar()(r)!=="object")throw new TypeError("options must be an object");var o=r,i=o.center,a=i===void 0?this.mean(n):i;switch(n){case"row":{if(!Array.isArray(a))throw new TypeError("center must be an array");return Xg(this,a),this}case"column":{if(!Array.isArray(a))throw new TypeError("center must be an array");return Wg(this,a),this}case void 0:{if(typeof a!="number")throw new TypeError("center must be a number");return Hg(this,a),this}default:throw new Error("invalid option: ".concat(n))}}},{key:"scale",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ar()(n)==="object"&&(r=n,n=void 0),Ar()(r)!=="object")throw new TypeError("options must be an object");var o=r.scale;switch(n){case"row":{if(o===void 0)o=Zg(this);else if(!Array.isArray(o))throw new TypeError("scale must be an array");return jg(this,o),this}case"column":{if(o===void 0)o=Yg(this);else if(!Array.isArray(o))throw new TypeError("scale must be an array");return Kg(this,o),this}case void 0:{if(o===void 0)o=qg(this);else if(typeof o!="number")throw new TypeError("scale must be a number");return Qg(this,o),this}default:throw new Error("invalid option: ".concat(n))}}},{key:"toString",value:function(n){return Bv(this,n)}}],[{key:"from1DArray",value:function(n,r,o){var i=n*r;if(i!==o.length)throw new RangeError("data length does not match given dimensions");for(var a=new Ot(n,r),s=0;s<n;s++)for(var u=0;u<r;u++)a.set(s,u,o[s*r+u]);return a}},{key:"rowVector",value:function(n){for(var r=new Ot(1,n.length),o=0;o<n.length;o++)r.set(0,o,n[o]);return r}},{key:"columnVector",value:function(n){for(var r=new Ot(n.length,1),o=0;o<n.length;o++)r.set(o,0,n[o]);return r}},{key:"zeros",value:function(n,r){return new Ot(n,r)}},{key:"ones",value:function(n,r){return new Ot(n,r).fill(1)}},{key:"rand",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ar()(o)!=="object")throw new TypeError("options must be an object");for(var i=o.random,a=i===void 0?Math.random:i,s=new Ot(n,r),u=0;u<n;u++)for(var c=0;c<r;c++)s.set(u,c,a());return s}},{key:"randInt",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ar()(o)!=="object")throw new TypeError("options must be an object");var i=o.min,a=i===void 0?0:i,s=o.max,u=s===void 0?1e3:s,c=o.random,f=c===void 0?Math.random:c;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(a>=u)throw new RangeError("min must be smaller than max");for(var l=u-a,d=new Ot(n,r),h=0;h<n;h++)for(var v=0;v<r;v++){var m=a+Math.round(f()*l);d.set(h,v,m)}return d}},{key:"eye",value:function(n,r,o){r===void 0&&(r=n),o===void 0&&(o=1);for(var i=Math.min(n,r),a=this.zeros(n,r),s=0;s<i;s++)a.set(s,s,o);return a}},{key:"diag",value:function(n,r,o){var i=n.length;r===void 0&&(r=i),o===void 0&&(o=r);for(var a=Math.min(i,r,o),s=this.zeros(r,o),u=0;u<a;u++)s.set(u,u,n[u]);return s}},{key:"min",value:function(n,r){n=this.checkMatrix(n),r=this.checkMatrix(r);for(var o=n.rows,i=n.columns,a=new Ot(o,i),s=0;s<o;s++)for(var u=0;u<i;u++)a.set(s,u,Math.min(n.get(s,u),r.get(s,u)));return a}},{key:"max",value:function(n,r){n=this.checkMatrix(n),r=this.checkMatrix(r);for(var o=n.rows,i=n.columns,a=new this(o,i),s=0;s<o;s++)for(var u=0;u<i;u++)a.set(s,u,Math.max(n.get(s,u),r.get(s,u)));return a}},{key:"checkMatrix",value:function(n){return e.isMatrix(n)?n:new Ot(n)}},{key:"isMatrix",value:function(n){return n!=null&&n.klass==="Matrix"}}]),e}();kr.prototype.klass="Matrix",typeof Symbol!="undefined"&&(kr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ng);function Vv(e,t){return e-t}kr.random=kr.rand,kr.randomInt=kr.randInt,kr.diagonal=kr.diag,kr.prototype.diagonal=kr.prototype.diag,kr.identity=kr.eye,kr.prototype.negate=kr.prototype.neg,kr.prototype.tensorProduct=kr.prototype.kroneckerProduct;var Ot=function(e){Gv()(n,e);var t=Pv()(n);function n(r,o){var i;if(fl()(this,n),i=t.call(this),n.isMatrix(r))return kv()(i,r.clone());if(Number.isInteger(r)&&r>0)if(i.data=[],Number.isInteger(o)&&o>0)for(var a=0;a<r;a++)i.data.push(new Float64Array(o));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(r)){var s=r;if(r=s.length,o=s[0].length,typeof o!="number"||o===0)throw new TypeError("Data must be a 2D array with at least one element");i.data=[];for(var u=0;u<r;u++){if(s[u].length!==o)throw new RangeError("Inconsistent array dimensions");i.data.push(Float64Array.from(s[u]))}}else throw new TypeError("First argument must be a positive number or an array");return i.rows=r,i.columns=o,kv()(i,bg()(i))}return ll()(n,[{key:"set",value:function(o,i,a){return this.data[o][i]=a,this}},{key:"get",value:function(o,i){return this.data[o][i]}},{key:"removeRow",value:function(o){if(ei(this,o),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(o,1),this.rows-=1,this}},{key:"addRow",value:function(o,i){return i===void 0&&(i=o,o=this.rows),ei(this,o,!0),i=Float64Array.from(wu(this,i,!0)),this.data.splice(o,0,i),this.rows+=1,this}},{key:"removeColumn",value:function(o){if(ti(this,o),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(var i=0;i<this.rows;i++){for(var a=new Float64Array(this.columns-1),s=0;s<o;s++)a[s]=this.data[i][s];for(var u=o+1;u<this.columns;u++)a[u-1]=this.data[i][u];this.data[i]=a}return this.columns-=1,this}},{key:"addColumn",value:function(o,i){typeof i=="undefined"&&(i=o,o=this.columns),ti(this,o,!0),i=Su(this,i);for(var a=0;a<this.rows;a++){for(var s=new Float64Array(this.columns+1),u=0;u<o;u++)s[u]=this.data[a][u];for(s[u++]=i[a];u<this.columns+1;u++)s[u]=this.data[a][u-1];this.data[a]=s}return this.columns+=1,this}}]),n}(kr);Cg(kr,Ot);var Jg=function(e){Gv()(n,e);var t=Pv()(n);function n(r){var o;return fl()(this,n),o=t.call(this),o.data=r,o.rows=r.length,o.columns=r[0].length,o}return ll()(n,[{key:"set",value:function(o,i,a){return this.data[o][i]=a,this}},{key:"get",value:function(o,i){return this.data[o][i]}}]),n}(kr);function Tu(e,t){var n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):t!==0?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}var $v=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fl()(this,e),t=Jg.checkMatrix(t);var r=t.rows,o=t.columns,i=n.computeLeftSingularVectors,a=i===void 0?!0:i,s=n.computeRightSingularVectors,u=s===void 0?!0:s,c=n.autoTranspose,f=c===void 0?!1:c,l=!!a,d=!!u,h=!1,v;if(r<o)if(!f)v=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{v=t.transpose(),r=v.rows,o=v.columns,h=!0;var m=l;l=d,d=m}else v=t.clone();for(var y=Math.min(r,o),E=Math.min(r+1,o),g=new Float64Array(E),b=new Ot(r,y),_=new Ot(o,o),S=new Float64Array(o),V=new Float64Array(r),fe=new Float64Array(E),ne=0;ne<E;ne++)fe[ne]=ne;for(var K=Math.min(r-1,o),J=Math.max(0,Math.min(o-2,r)),ge=Math.max(K,J),G=0;G<ge;G++){if(G<K){g[G]=0;for(var Ee=G;Ee<r;Ee++)g[G]=Tu(g[G],v.get(Ee,G));if(g[G]!==0){v.get(G,G)<0&&(g[G]=-g[G]);for(var ke=G;ke<r;ke++)v.set(ke,G,v.get(ke,G)/g[G]);v.set(G,G,v.get(G,G)+1)}g[G]=-g[G]}for(var Ue=G+1;Ue<o;Ue++){if(G<K&&g[G]!==0){for(var pt=0,Ke=G;Ke<r;Ke++)pt+=v.get(Ke,G)*v.get(Ke,Ue);pt=-pt/v.get(G,G);for(var bt=G;bt<r;bt++)v.set(bt,Ue,v.get(bt,Ue)+pt*v.get(bt,G))}S[Ue]=v.get(G,Ue)}if(l&&G<K)for(var dt=G;dt<r;dt++)b.set(dt,G,v.get(dt,G));if(G<J){S[G]=0;for(var Vt=G+1;Vt<o;Vt++)S[G]=Tu(S[G],S[Vt]);if(S[G]!==0){S[G+1]<0&&(S[G]=0-S[G]);for(var un=G+1;un<o;un++)S[un]/=S[G];S[G+1]+=1}if(S[G]=-S[G],G+1<r&&S[G]!==0){for(var Qn=G+1;Qn<r;Qn++)V[Qn]=0;for(var or=G+1;or<r;or++)for(var We=G+1;We<o;We++)V[or]+=S[We]*v.get(or,We);for(var rn=G+1;rn<o;rn++)for(var hr=-S[rn]/S[G+1],yn=G+1;yn<r;yn++)v.set(yn,rn,v.get(yn,rn)+hr*V[yn])}if(d)for(var zn=G+1;zn<o;zn++)_.set(zn,G,S[zn])}}var $e=Math.min(o,r+1);if(K<o&&(g[K]=v.get(K,K)),r<$e&&(g[$e-1]=0),J+1<$e&&(S[J]=v.get(J,$e-1)),S[$e-1]=0,l){for(var ft=K;ft<y;ft++){for(var Ln=0;Ln<r;Ln++)b.set(Ln,ft,0);b.set(ft,ft,1)}for(var $t=K-1;$t>=0;$t--)if(g[$t]!==0){for(var Wn=$t+1;Wn<y;Wn++){for(var cn=0,Mn=$t;Mn<r;Mn++)cn+=b.get(Mn,$t)*b.get(Mn,Wn);cn=-cn/b.get($t,$t);for(var Gr=$t;Gr<r;Gr++)b.set(Gr,Wn,b.get(Gr,Wn)+cn*b.get(Gr,$t))}for(var Rr=$t;Rr<r;Rr++)b.set(Rr,$t,-b.get(Rr,$t));b.set($t,$t,1+b.get($t,$t));for(var qr=0;qr<$t-1;qr++)b.set(qr,$t,0)}else{for(var Xc=0;Xc<r;Xc++)b.set(Xc,$t,0);b.set($t,$t,1)}}if(d)for(var Qr=o-1;Qr>=0;Qr--){if(Qr<J&&S[Qr]!==0)for(var Cs=Qr+1;Cs<o;Cs++){for(var Os=0,Ou=Qr+1;Ou<o;Ou++)Os+=_.get(Ou,Qr)*_.get(Ou,Cs);Os=-Os/_.get(Qr+1,Qr);for(var Qa=Qr+1;Qa<o;Qa++)_.set(Qa,Cs,_.get(Qa,Cs)+Os*_.get(Qa,Qr))}for(var ih=0;ih<o;ih++)_.set(ih,Qr,0);_.set(Qr,Qr,1)}for(var hp=$e-1,ah=0,vp=Number.EPSILON;$e>0;){var mt=void 0,Wc=void 0;for(mt=$e-2;mt>=-1&&mt!==-1;mt--){var hE=Number.MIN_VALUE+vp*Math.abs(g[mt]+Math.abs(g[mt+1]));if(Math.abs(S[mt])<=hE||Number.isNaN(S[mt])){S[mt]=0;break}}if(mt===$e-2)Wc=4;else{var Io=void 0;for(Io=$e-1;Io>=mt&&Io!==mt;Io--){var vE=(Io!==$e?Math.abs(S[Io]):0)+(Io!==mt+1?Math.abs(S[Io-1]):0);if(Math.abs(g[Io])<=vp*vE){g[Io]=0;break}}Io===mt?Wc=3:Io===$e-1?Wc=1:(Wc=2,mt=Io)}switch(mt++,Wc){case 1:{var sh=S[$e-2];S[$e-2]=0;for(var zo=$e-2;zo>=mt;zo--){var Hc=Tu(g[zo],sh),uh=g[zo]/Hc,ch=sh/Hc;if(g[zo]=Hc,zo!==mt&&(sh=-ch*S[zo-1],S[zo-1]=uh*S[zo-1]),d)for(var Ja=0;Ja<o;Ja++)Hc=uh*_.get(Ja,zo)+ch*_.get(Ja,$e-1),_.set(Ja,$e-1,-ch*_.get(Ja,zo)+uh*_.get(Ja,$e-1)),_.set(Ja,zo,Hc)}break}case 2:{var fh=S[mt-1];S[mt-1]=0;for(var oi=mt;oi<$e;oi++){var Zc=Tu(g[oi],fh),lh=g[oi]/Zc,dh=fh/Zc;if(g[oi]=Zc,fh=-dh*S[oi],S[oi]=lh*S[oi],l)for(var es=0;es<r;es++)Zc=lh*b.get(es,oi)+dh*b.get(es,mt-1),b.set(es,mt-1,-dh*b.get(es,oi)+lh*b.get(es,mt-1)),b.set(es,oi,Zc)}break}case 3:{var jc=Math.max(Math.abs(g[$e-1]),Math.abs(g[$e-2]),Math.abs(S[$e-2]),Math.abs(g[mt]),Math.abs(S[mt])),Lu=g[$e-1]/jc,pp=g[$e-2]/jc,Tl=S[$e-2]/jc,hh=g[mt]/jc,pE=S[mt]/jc,Ls=((pp+Lu)*(pp-Lu)+Tl*Tl)/2,Il=Lu*Tl*(Lu*Tl),Yc=0;(Ls!==0||Il!==0)&&(Ls<0?Yc=0-Math.sqrt(Ls*Ls+Il):Yc=Math.sqrt(Ls*Ls+Il),Yc=Il/(Ls+Yc));for(var Ms=(hh+Lu)*(hh-Lu)+Yc,Mu=hh*pE,hn=mt;hn<$e-1;hn++){var co=Tu(Ms,Mu);co===0&&(co=Number.MIN_VALUE);var ii=Ms/co,ai=Mu/co;if(hn!==mt&&(S[hn-1]=co),Ms=ii*g[hn]+ai*S[hn],S[hn]=ii*S[hn]-ai*g[hn],Mu=ai*g[hn+1],g[hn+1]=ii*g[hn+1],d)for(var ts=0;ts<o;ts++)co=ii*_.get(ts,hn)+ai*_.get(ts,hn+1),_.set(ts,hn+1,-ai*_.get(ts,hn)+ii*_.get(ts,hn+1)),_.set(ts,hn,co);if(co=Tu(Ms,Mu),co===0&&(co=Number.MIN_VALUE),ii=Ms/co,ai=Mu/co,g[hn]=co,Ms=ii*S[hn]+ai*g[hn+1],g[hn+1]=-ai*S[hn]+ii*g[hn+1],Mu=ai*S[hn+1],S[hn+1]=ii*S[hn+1],l&&hn<r-1)for(var ns=0;ns<r;ns++)co=ii*b.get(ns,hn)+ai*b.get(ns,hn+1),b.set(ns,hn+1,-ai*b.get(ns,hn)+ii*b.get(ns,hn+1)),b.set(ns,hn,co)}S[$e-2]=Ms,ah=ah+1;break}case 4:{if(g[mt]<=0&&(g[mt]=g[mt]<0?-g[mt]:0,d))for(var Al=0;Al<=hp;Al++)_.set(Al,mt,-_.get(Al,mt));for(;mt<hp&&!(g[mt]>=g[mt+1]);){var Kc=g[mt];if(g[mt]=g[mt+1],g[mt+1]=Kc,d&&mt<o-1)for(var ku=0;ku<o;ku++)Kc=_.get(ku,mt+1),_.set(ku,mt+1,_.get(ku,mt)),_.set(ku,mt,Kc);if(l&&mt<r-1)for(var Gu=0;Gu<r;Gu++)Kc=b.get(Gu,mt+1),b.set(Gu,mt+1,b.get(Gu,mt)),b.set(Gu,mt,Kc);mt++}ah=0,$e--;break}}}if(h){var mE=_;_=b,b=mE}this.m=r,this.n=o,this.s=g,this.U=b,this.V=_}return ll()(e,[{key:"solve",value:function(n){for(var r=n,o=this.threshold,i=this.s.length,a=Ot.zeros(i,i),s=0;s<i;s++)Math.abs(this.s[s])<=o?a.set(s,s,0):a.set(s,s,1/this.s[s]);for(var u=this.U,c=this.rightSingularVectors,f=c.mmul(a),l=c.rows,d=u.rows,h=Ot.zeros(l,d),v=0;v<l;v++)for(var m=0;m<d;m++){for(var y=0,E=0;E<i;E++)y+=f.get(v,E)*u.get(m,E);h.set(v,m,y)}return h.mmul(r)}},{key:"solveForDiagonal",value:function(n){return this.solve(Ot.diag(n))}},{key:"inverse",value:function(){for(var n=this.V,r=this.threshold,o=n.rows,i=n.columns,a=new Ot(o,this.s.length),s=0;s<o;s++)for(var u=0;u<i;u++)Math.abs(this.s[u])>r&&a.set(s,u,n.get(s,u)/this.s[u]);for(var c=this.U,f=c.rows,l=c.columns,d=new Ot(o,f),h=0;h<o;h++)for(var v=0;v<f;v++){for(var m=0,y=0;y<l;y++)m+=a.get(h,y)*c.get(v,y);d.set(h,v,m)}return d}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var n=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,o=this.s,i=0,a=o.length;i<a;i++)o[i]>n&&r++;return r}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Ot.diag(this.s)}}]),e}();class ey{constructor(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}layout(){const t=this,{dimension:n,distances:r,linkDistance:o}=t;try{const i=Ot.mul(Ot.pow(r,2),-.5),a=i.mean("row"),s=i.mean("column"),u=i.mean();i.add(u).subRowVector(a).subColumnVector(s);const c=new $v(i),f=Ot.sqrt(c.diagonalMatrix).diagonal();return c.leftSingularVectors.toJSON().map(l=>Ot.mul([l],[f]).toJSON()[0].splice(0,n))}catch(i){const a=[];for(let s=0;s<r.length;s++){const u=Math.random()*o,c=Math.random()*o;a.push([u,c])}return a}}}const ty=800;class ny{constructor(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}layout(){const t=this,n=t.positions,r=[],o=t.iterations,i=t.width/10;t.maxDisplace=i,t.disp=r;for(let a=0;a<o;a++)n.forEach((s,u)=>{r[u]={x:0,y:0}}),t.getRepulsion(),t.updatePositions();return n}getRepulsion(){const t=this,n=t.positions,r=t.nodes,o=t.disp,i=t.k,a=t.radii||[];n.forEach((s,u)=>{o[u]={x:0,y:0},n.forEach((c,f)=>{if(u===f||a[u]!==a[f])return;let l=s[0]-c[0],d=s[1]-c[1],h=Math.sqrt(l*l+d*d);if(h===0){h=1;const v=u>f?1:-1;l=.01*v,d=.01*v}if(h<t.nodeSizeFunc(r[u])/2+t.nodeSizeFunc(r[f])/2){const v=i*i/h;o[u].x+=l/h*v,o[u].y+=d/h*v}})})}updatePositions(){const t=this,n=t.positions,r=t.disp,o=t.speed,i=t.strictRadial,a=t.focusID,s=t.maxDisplace||t.width/10;i&&r.forEach((c,f)=>{const l=n[f][0]-n[a][0],d=n[f][1]-n[a][1],h=Math.sqrt(l*l+d*d);let v=d/h,m=-l/h;const y=Math.sqrt(c.x*c.x+c.y*c.y);let E=Math.acos((v*c.x+m*c.y)/y);E>Math.PI/2&&(E-=Math.PI/2,v*=-1,m*=-1);const g=Math.cos(E)*y;c.x=v*g,c.y=m*g});const u=t.radii;n.forEach((c,f)=>{if(f===a)return;const l=Math.sqrt(r[f].x*r[f].x+r[f].y*r[f].y);if(l>0&&f!==a){const d=Math.min(s*(o/ty),l);if(c[0]+=r[f].x/l*d,c[1]+=r[f].y/l*d,i){let h=c[0]-n[a][0],v=c[1]-n[a][1];const m=Math.sqrt(h*h+v*v);h=h/m*u[f],v=v/m*u[f],c[0]=n[a][0]+h,c[1]=n[a][1]+v}}})}}function ry(e){const t=e.length,n=e[0].length,r=[];for(let o=0;o<t;o++){const i=[];for(let a=0;a<n;a++)e[o][a]!==0?i.push(1/(e[o][a]*e[o][a])):i.push(0);r.push(i)}return r}function oy(e,t){let n=-1;return e.forEach((r,o)=>{r.id===t&&(n=o)}),n}function Xv(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}class iy extends Dt{constructor(t){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const t=this,n=t.nodes,r=t.edges||[];if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const o=t.center;if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i=t.linkDistance;let a=null;if(gt(t.focusNode)){let ge=!1;for(let G=0;G<n.length;G++)n[G].id===t.focusNode&&(a=n[G],t.focusNode=a,ge=!0,G=n.length);ge||(a=null)}else a=t.focusNode;a||(a=n[0],t.focusNode=a);let s=oy(n,a.id);s<0&&(s=0),t.focusIndex=s;const u=rt({nodes:n,edges:r},!1),c=Sn(u),f=t.maxToFocus(c,s);t.handleInfinity(c,s,f+1),t.distances=c;const l=c[s],d=t.width||500,h=t.height||500;let v=d-o[0]>o[0]?o[0]:d-o[0],m=h-o[1]>o[1]?o[1]:h-o[1];v===0&&(v=d/2),m===0&&(m=h/2);const y=m>v?v:m,E=Math.max(...l),g=[];l.forEach((ge,G)=>{t.unitRadius||(t.unitRadius=y/E),g[G]=ge*t.unitRadius}),t.radii=g;const b=t.eIdealDisMatrix();t.eIdealDistances=b;const _=ry(b);t.weights=_;let V=new ey({linkDistance:i,distances:b}).layout();V.forEach(ge=>{kt(ge[0])&&(ge[0]=Math.random()*i),kt(ge[1])&&(ge[1]=Math.random()*i)}),t.positions=V,V.forEach((ge,G)=>{n[G].x=ge[0]+o[0],n[G].y=ge[1]+o[1]}),V.forEach(ge=>{ge[0]-=V[s][0],ge[1]-=V[s][1]}),t.run();const fe=t.preventOverlap,ne=t.nodeSize;let K;const J=t.strictRadial;if(fe){const ge=t.nodeSpacing;let G;le(ge)?G=()=>ge:Ye(ge)?G=ge:G=()=>0,ne?it(ne)?K=Ue=>(ne[0]>ne[1]?ne[0]:ne[1])+G(Ue):K=Ue=>ne+G(Ue):K=Ue=>Ue.size?it(Ue.size)?(Ue.size[0]>Ue.size[1]?Ue.size[0]:Ue.size[1])+G(Ue):ht(Ue.size)?(Ue.size.width>Ue.size.height?Ue.size.width:Ue.size.height)+G(Ue):Ue.size+G(Ue):10+G(Ue);const Ee={nodes:n,nodeSizeFunc:K,adjMatrix:u,positions:V,radii:g,height:h,width:d,strictRadial:J,focusID:s,iterations:t.maxPreventOverlapIteration||200,k:V.length/4.5};V=new ny(Ee).layout()}return V.forEach((ge,G)=>{n[G].x=ge[0]+o[0],n[G].y=ge[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}run(){const t=this,n=t.maxIteration,r=t.positions||[],o=t.weights||[],i=t.eIdealDistances||[],a=t.radii||[];for(let s=0;s<=n;s++){const u=s/n;t.oneIteration(u,r,a,i,o)}}oneIteration(t,n,r,o,i){const a=this,s=1-t,u=a.focusIndex;n.forEach((c,f)=>{const l=Xv(c,[0,0]),d=l===0?0:1/l;if(f===u)return;let h=0,v=0,m=0;n.forEach((E,g)=>{if(f===g)return;const b=Xv(c,E),_=b===0?0:1/b,S=o[g][f];m+=i[f][g],h+=i[f][g]*(E[0]+S*(c[0]-E[0])*_),v+=i[f][g]*(E[1]+S*(c[1]-E[1])*_)});const y=r[f]===0?0:1/r[f];m*=s,m+=t*y*y,h*=s,h+=t*y*c[0]*d,c[0]=h/m,v*=s,v+=t*y*c[1]*d,c[1]=v/m})}eIdealDisMatrix(){const t=this,n=t.nodes;if(!n)return[];const r=t.distances,o=t.linkDistance,i=t.radii||[],a=t.unitRadius||50,s=[];return r&&r.forEach((u,c)=>{const f=[];u.forEach((l,d)=>{if(c===d)f.push(0);else if(i[c]===i[d])if(t.sortBy==="data")f.push(l*(Math.abs(c-d)*t.sortStrength)/(i[c]/a));else if(t.sortBy){let h=n[c][t.sortBy]||0,v=n[d][t.sortBy]||0;gt(h)&&(h=h.charCodeAt(0)),gt(v)&&(v=v.charCodeAt(0)),f.push(l*(Math.abs(h-v)*t.sortStrength)/(i[c]/a))}else f.push(l*o/(i[c]/a));else{const h=(o+a)/2;f.push(l*h)}}),s.push(f)}),s}handleInfinity(t,n,r){const o=t.length;for(let i=0;i<o;i++)if(t[n][i]===1/0){t[n][i]=r,t[i][n]=r;for(let a=0;a<o;a++)t[i][a]!==1/0&&t[n][a]===1/0&&(t[n][a]=r+t[i][a],t[a][n]=r+t[i][a])}for(let i=0;i<o;i++)if(i!==n){for(let a=0;a<o;a++)if(t[i][a]===1/0){let s=Math.abs(t[n][i]-t[n][a]);s=s===0?1:s,t[i][a]=s}}}maxToFocus(t,n){let r=0;for(let o=0;o<t[n].length;o++)t[n][o]!==1/0&&(r=t[n][o]>r?t[n][o]:r);return r}getType(){return"radial"}}class Wv extends Dt{constructor(t){super(),this.nodeSize=30,this.minNodeSpacing=10,this.nodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){var t,n;const r=this,{nodes:o,edges:i}=r,a=o.length;if(a===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(a===1){o[0].x=s[0],o[0].y=s[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const{nodeSize:u,nodeSpacing:c}=r,f=[];let l,d=0;it(u)?l=Math.max(u[0],u[1]):l=u,it(c)?d=Math.max(c[0],c[1]):le(c)&&(d=c),o.forEach(b=>{f.push(b);let _=l;it(b.size)?_=Math.max(b.size[0],b.size[1]):le(b.size)?_=b.size:ht(b.size)&&(_=Math.max(b.size.width,b.size.height)),l=Math.max(l,_),Ye(c)&&(d=Math.max(c(b),d))}),r.clockwise=r.counterclockwise!==void 0?!r.counterclockwise:r.clockwise;const h={},v={};if(f.forEach((b,_)=>{h[b.id]=b,v[b.id]=_}),(r.sortBy==="degree"||!gt(r.sortBy)||f[0][r.sortBy]===void 0)&&(r.sortBy="degree",!le(o[0].degree))){const b=an(o.length,v,i);f.forEach((_,S)=>{_.degree=b[S].all})}f.sort((b,_)=>_[r.sortBy]-b[r.sortBy]),r.maxValueNode=f[0],r.maxLevelDiff=r.maxLevelDiff||r.maxValueNode[r.sortBy]/4;const m=[[]];let y=m[0];f.forEach(b=>{if(y.length>0){const _=Math.abs(y[0][r.sortBy]-b[r.sortBy]);r.maxLevelDiff&&_>=r.maxLevelDiff&&(y=[],m.push(y))}y.push(b)});let E=l+(d||r.minNodeSpacing);if(!r.preventOverlap){const b=m.length>0&&m[0].length>1,S=(Math.min(r.width,r.height)/2-E)/(m.length+(b?1:0));E=Math.min(E,S)}let g=0;if(m.forEach(b=>{let _=r.sweep;_===void 0&&(_=2*Math.PI-2*Math.PI/b.length);const S=b.dTheta=_/Math.max(1,b.length-1);if(b.length>1&&r.preventOverlap){const V=Math.cos(S)-Math.cos(0),fe=Math.sin(S)-Math.sin(0),ne=Math.sqrt(E*E/(V*V+fe*fe));g=Math.max(ne,g)}b.r=g,g+=E}),r.equidistant){let b=0,_=0;for(let S=0;S<m.length;S++){const fe=m[S].r-_;b=Math.max(b,fe)}_=0,m.forEach((S,V)=>{V===0&&(_=S.r),S.r=_,_+=b})}return m.forEach(b=>{const _=b.dTheta,S=b.r;b.forEach((V,fe)=>{const ne=r.startAngle+(r.clockwise?1:-1)*_*fe;V.x=s[0]+S*Math.cos(ne),V.y=s[1]+S*Math.sin(ne)})}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:i}}getType(){return"concentric"}}class Hv extends Dt{constructor(t){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const t=this,{nodes:n,edges:r=[]}=t,o=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i=t.linkDistance,a=rt({nodes:n,edges:r},!1),s=Sn(a);t.handleInfinity(s);const u=Bn(s,i);t.scaledDistances=u;const c=t.runMDS();return t.positions=c,c.forEach((f,l)=>{n[l].x=f[0]+o[0],n[l].y=f[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}runMDS(){const t=this,n=2,r=t.scaledDistances,o=Ot.mul(Ot.pow(r,2),-.5),i=o.mean("row"),a=o.mean("column"),s=o.mean();o.add(s).subRowVector(i).subColumnVector(a);const u=new $v(o),c=Ot.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(f=>Ot.mul([f],[c]).toJSON()[0].splice(0,n))}handleInfinity(t){let n=-999999;t.forEach(r=>{r.forEach(o=>{o!==1/0&&n<o&&(n=o)})}),t.forEach((r,o)=>{r.forEach((i,a)=>{i===1/0&&(t[o][a]=n)})})}getType(){return"mds"}}const ay=800;class sy extends Dt{constructor(t){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.animate=!0,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}}execute(){var t,n;const r=this,o=r.nodes;if(r.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(r.timeInterval),!o||o.length===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const i=r.center;if(o.length===1){o[0].x=i[0],o[0].y=i[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const a={},s={};return o.forEach((u,c)=>{le(u.x)||(u.x=Math.random()*this.width),le(u.y)||(u.y=Math.random()*this.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,r.run()}run(){var t;const n=this,r=n.nodes;if(!r)return;const{edges:o,maxIteration:i,workerEnabled:a,clustering:s,animate:u}=n,c={};if(s&&r.forEach(f=>{c[f.cluster]===void 0&&(c[f.cluster]={name:f.cluster,cx:0,cy:0,count:0})}),a||!u){for(let f=0;f<i;f++)n.runOneStep(c);(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window=="undefined")return;let f=0;this.timeInterval=window.setInterval(()=>{var l;n.runOneStep(c),f++,f>=i&&((l=n.onLayoutEnd)===null||l===void 0||l.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:r,edges:o}}runOneStep(t){var n;const r=this,o=r.nodes;if(!o)return;const{edges:i,center:a,gravity:s,speed:u,clustering:c}=r,f=r.height*r.width,l=Math.sqrt(f)/10,d=f/(o.length+1),h=Math.sqrt(d),v=[];if(o.forEach((m,y)=>{v[y]={x:0,y:0}}),r.applyCalculate(o,i,v,h,d),c){for(const y in t)t[y].cx=0,t[y].cy=0,t[y].count=0;o.forEach(y=>{const E=t[y.cluster];le(y.x)&&(E.cx+=y.x),le(y.y)&&(E.cy+=y.y),E.count++});for(const y in t)t[y].cx/=t[y].count,t[y].cy/=t[y].count;const m=r.clusterGravity||s;o.forEach((y,E)=>{if(!le(y.x)||!le(y.y))return;const g=t[y.cluster],b=Math.sqrt((y.x-g.cx)*(y.x-g.cx)+(y.y-g.cy)*(y.y-g.cy)),_=h*m;v[E].x-=_*(y.x-g.cx)/b,v[E].y-=_*(y.y-g.cy)/b})}o.forEach((m,y)=>{if(!le(m.x)||!le(m.y))return;const E=.01*h*s;v[y].x-=E*(m.x-a[0]),v[y].y-=E*(m.y-a[1])}),o.forEach((m,y)=>{if(le(m.fx)&&le(m.fy)){m.x=m.fx,m.y=m.fy;return}if(!le(m.x)||!le(m.y))return;const E=Math.sqrt(v[y].x*v[y].x+v[y].y*v[y].y);if(E>0){const g=Math.min(l*(u/ay),E);m.x+=v[y].x/E*g,m.y+=v[y].y/E*g}}),(n=r.tick)===null||n===void 0||n.call(r)}applyCalculate(t,n,r,o,i){const a=this;a.calRepulsive(t,r,i),n&&a.calAttractive(n,r,o)}calRepulsive(t,n,r){t.forEach((o,i)=>{n[i]={x:0,y:0},t.forEach((a,s)=>{if(i===s||!le(o.x)||!le(a.x)||!le(o.y)||!le(a.y))return;let u=o.x-a.x,c=o.y-a.y,f=u*u+c*c;if(f===0){f=1;const d=i>s?1:-1;u=.01*d,c=.01*d}const l=r/f;n[i].x+=u*l,n[i].y+=c*l})})}calAttractive(t,n,r){t.forEach(o=>{const i=Je(o,"source"),a=Je(o,"target");if(!i||!a)return;const s=this.nodeIdxMap[i],u=this.nodeIdxMap[a];if(s===u)return;const c=this.nodeMap[i],f=this.nodeMap[a];if(!le(f.x)||!le(c.x)||!le(f.y)||!le(c.y))return;const l=f.x-c.x,d=f.y-c.y,h=Math.sqrt(l*l+d*d),v=h*h/r;n[u].x-=l/h*v,n[u].y-=d/h*v,n[s].x+=l/h*v,n[s].y+=d/h*v})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"fruchterman"}}var Ka=Z(6557),Fe=Z(97335),ni=Z(26409),ri=Z(78608),uy=Z(73806),ml=Z.n(uy),cy=Z(59933),fy=Z.n(cy),ly=Z(24669),dy=Z.n(ly),hy=Z(15721),ro=Z.n(hy),gE=null,vy=1;function Zv(){return vy++}var yE=null,EE=null,_e;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(_e||(_e={}));var py=function(){function e(){(0,ni.Z)(this,e),this.config=void 0}return(0,ri.Z)(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(n){this.config=n}}]),e}(),bE=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Fc;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(Fc||(Fc={}));var jv;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(jv||(jv={}));var Iu;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(Iu||(Iu={}));var zc;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(zc||(zc={}));var my="__DefineValuePlaceholder__";function gy(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Yv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Kv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yv(Object(n),!0).forEach(function(r){(0,Fe.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yv(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var yy=function(){function e(t,n){(0,ni.Z)(this,e),this.engine=t,this.configService=n,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,ri.Z)(e,[{key:"init",value:function(){var n=this.configService.get(),r=n.canvas,o=n.engineOptions;this.initPromise=this.engine.init(Kv({canvas:r||gy(),antialiasing:!1},o))}},{key:"setBundle",value:function(n){this.compiledBundle=JSON.parse(JSON.stringify(n))}},{key:"setDispatch",value:function(n){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=n),this}},{key:"setMaxIteration",value:function(n){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=n),this}},{key:"setBinding",value:function(n,r){var o=this;if(typeof n=="string"){var i=fy()(r)||ml()(r)||dy()(r);if(this.compiledBundle&&this.compiledBundle.context){var a=this.compiledBundle.context.defines.find(function(u){return u.name===n});if(a)return a.value=r,this;var s=this.compiledBundle.context.uniforms.find(function(u){return u.name===n});s&&(i?(s.data=r,s.isReferer=!1,s.storageClass===Iu.Uniform?this.model&&this.model.updateUniform(n,r):this.model&&this.model.updateBuffer(n,r)):(s.isReferer=!0,s.data=r))}}else Object.keys(n).forEach(function(u){o.setBinding(u,n[u])});return this}},{key:"execute",value:function(){var t=(0,Ka.Z)(ro().mark(function r(){var o=this,i,a,s=arguments;return ro().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){c.next=6;break}return this.compiledBundle.context&&(i>1?this.compiledBundle.context.maxIteration=i:this.compiledBundle.context.maxIteration++),c.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(f){var l=f.isReferer;return l}).forEach(function(f){var l=f.data,d=f.name;o.model.confirmInput(l.model,d)}),a=0;a<i;a++)this.model.run();return this.engine.endFrame(),c.abrupt("return",this);case 12:case"end":return c.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"getOutput",value:function(){var t=(0,Ka.Z)(ro().mark(function r(){return ro().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.model.readData());case 1:case"end":return i.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"compile",value:function(){var t=(0,Ka.Z)(ro().mark(function r(){var o,i,a;return ro().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initPromise;case 2:return o=Kv({},this.compiledBundle.context),i=this.engine.supportWebGPU?this.engine.useWGSL?zc.WGSL:zc.GLSL450:zc.GLSL100,a=this.compiledBundle.shaders[i],o.defines.filter(function(c){return c.runtime}).forEach(function(c){var f="".concat(my).concat(c.name);a=a.replace(f,"".concat(c.value))}),o.shader=a,o.uniforms.forEach(function(c){if(!c.data&&c.storageClass===Iu.StorageBuffer){var f=1;c.type===Fc.FloatArray?f=1:c.type===Fc.Vector4FloatArray&&(f=4),c.data=new Float32Array(o.output.length*f).fill(0)}}),this.compiledBundle.context=o,u.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=u.sent;case 12:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()}]),e}(),Ey=Z(40224),by=Z.n(Ey),xy=function(){function e(t,n){(0,ni.Z)(this,e),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,i=n.stride,a=n.normalized,s=n.size,u=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return(0,ri.Z)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),pa,Bc,ma,Fo,Uc,qa,Vc,gl,Li,Ds,Kr,Mi,ki,yl,_y=(pa={},(0,Fe.Z)(pa,_e.POINTS,"points"),(0,Fe.Z)(pa,_e.LINES,"lines"),(0,Fe.Z)(pa,_e.LINE_LOOP,"line loop"),(0,Fe.Z)(pa,_e.LINE_STRIP,"line strip"),(0,Fe.Z)(pa,_e.TRIANGLES,"triangles"),(0,Fe.Z)(pa,_e.TRIANGLE_FAN,"triangle fan"),(0,Fe.Z)(pa,_e.TRIANGLE_STRIP,"triangle strip"),pa),qv=(Bc={},(0,Fe.Z)(Bc,_e.STATIC_DRAW,"static"),(0,Fe.Z)(Bc,_e.DYNAMIC_DRAW,"dynamic"),(0,Fe.Z)(Bc,_e.STREAM_DRAW,"stream"),Bc),Qd=(ma={},(0,Fe.Z)(ma,_e.BYTE,"int8"),(0,Fe.Z)(ma,_e.UNSIGNED_INT,"int16"),(0,Fe.Z)(ma,_e.INT,"int32"),(0,Fe.Z)(ma,_e.UNSIGNED_BYTE,"uint8"),(0,Fe.Z)(ma,_e.UNSIGNED_SHORT,"uint16"),(0,Fe.Z)(ma,_e.UNSIGNED_INT,"uint32"),(0,Fe.Z)(ma,_e.FLOAT,"float"),ma),wy=(Fo={},(0,Fe.Z)(Fo,_e.ALPHA,"alpha"),(0,Fe.Z)(Fo,_e.LUMINANCE,"luminance"),(0,Fe.Z)(Fo,_e.LUMINANCE_ALPHA,"luminance alpha"),(0,Fe.Z)(Fo,_e.RGB,"rgb"),(0,Fe.Z)(Fo,_e.RGBA,"rgba"),(0,Fe.Z)(Fo,_e.RGBA4,"rgba4"),(0,Fe.Z)(Fo,_e.RGB5_A1,"rgb5 a1"),(0,Fe.Z)(Fo,_e.RGB565,"rgb565"),(0,Fe.Z)(Fo,_e.DEPTH_COMPONENT,"depth"),(0,Fe.Z)(Fo,_e.DEPTH_STENCIL,"depth stencil"),Fo),Sy=(Uc={},(0,Fe.Z)(Uc,_e.DONT_CARE,"dont care"),(0,Fe.Z)(Uc,_e.NICEST,"nice"),(0,Fe.Z)(Uc,_e.FASTEST,"fast"),Uc),Qv=(qa={},(0,Fe.Z)(qa,_e.NEAREST,"nearest"),(0,Fe.Z)(qa,_e.LINEAR,"linear"),(0,Fe.Z)(qa,_e.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Fe.Z)(qa,_e.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Fe.Z)(qa,_e.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Fe.Z)(qa,_e.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),qa),Jv=(Vc={},(0,Fe.Z)(Vc,_e.REPEAT,"repeat"),(0,Fe.Z)(Vc,_e.CLAMP_TO_EDGE,"clamp"),(0,Fe.Z)(Vc,_e.MIRRORED_REPEAT,"mirror"),Vc),Ty=(gl={},(0,Fe.Z)(gl,_e.NONE,"none"),(0,Fe.Z)(gl,_e.BROWSER_DEFAULT_WEBGL,"browser"),gl),Iy=(Li={},(0,Fe.Z)(Li,_e.NEVER,"never"),(0,Fe.Z)(Li,_e.ALWAYS,"always"),(0,Fe.Z)(Li,_e.LESS,"less"),(0,Fe.Z)(Li,_e.LEQUAL,"lequal"),(0,Fe.Z)(Li,_e.GREATER,"greater"),(0,Fe.Z)(Li,_e.GEQUAL,"gequal"),(0,Fe.Z)(Li,_e.EQUAL,"equal"),(0,Fe.Z)(Li,_e.NOTEQUAL,"notequal"),Li),ep=(Ds={},(0,Fe.Z)(Ds,_e.FUNC_ADD,"add"),(0,Fe.Z)(Ds,_e.MIN_EXT,"min"),(0,Fe.Z)(Ds,_e.MAX_EXT,"max"),(0,Fe.Z)(Ds,_e.FUNC_SUBTRACT,"subtract"),(0,Fe.Z)(Ds,_e.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ds),El=(Kr={},(0,Fe.Z)(Kr,_e.ZERO,"zero"),(0,Fe.Z)(Kr,_e.ONE,"one"),(0,Fe.Z)(Kr,_e.SRC_COLOR,"src color"),(0,Fe.Z)(Kr,_e.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Fe.Z)(Kr,_e.SRC_ALPHA,"src alpha"),(0,Fe.Z)(Kr,_e.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Fe.Z)(Kr,_e.DST_COLOR,"dst color"),(0,Fe.Z)(Kr,_e.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Fe.Z)(Kr,_e.DST_ALPHA,"dst alpha"),(0,Fe.Z)(Kr,_e.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Fe.Z)(Kr,_e.CONSTANT_COLOR,"constant color"),(0,Fe.Z)(Kr,_e.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Fe.Z)(Kr,_e.CONSTANT_ALPHA,"constant alpha"),(0,Fe.Z)(Kr,_e.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Fe.Z)(Kr,_e.SRC_ALPHA_SATURATE,"src alpha saturate"),Kr),Ay=(Mi={},(0,Fe.Z)(Mi,_e.NEVER,"never"),(0,Fe.Z)(Mi,_e.ALWAYS,"always"),(0,Fe.Z)(Mi,_e.LESS,"less"),(0,Fe.Z)(Mi,_e.LEQUAL,"lequal"),(0,Fe.Z)(Mi,_e.GREATER,"greater"),(0,Fe.Z)(Mi,_e.GEQUAL,"gequal"),(0,Fe.Z)(Mi,_e.EQUAL,"equal"),(0,Fe.Z)(Mi,_e.NOTEQUAL,"notequal"),Mi),Au=(ki={},(0,Fe.Z)(ki,_e.ZERO,"zero"),(0,Fe.Z)(ki,_e.KEEP,"keep"),(0,Fe.Z)(ki,_e.REPLACE,"replace"),(0,Fe.Z)(ki,_e.INVERT,"invert"),(0,Fe.Z)(ki,_e.INCR,"increment"),(0,Fe.Z)(ki,_e.DECR,"decrement"),(0,Fe.Z)(ki,_e.INCR_WRAP,"increment wrap"),(0,Fe.Z)(ki,_e.DECR_WRAP,"decrement wrap"),ki),Ny=(yl={},(0,Fe.Z)(yl,_e.FRONT,"front"),(0,Fe.Z)(yl,_e.BACK,"back"),yl),Ry=function(){function e(t,n){(0,ni.Z)(this,e),this.buffer=void 0;var r=n.data,o=n.usage,i=n.type;this.buffer=t.buffer({data:r,usage:qv[o||_e.STATIC_DRAW],type:Qd[i||_e.UNSIGNED_BYTE]})}return(0,ri.Z)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(n){var r=n.data,o=n.offset;this.buffer.subdata(r,o)}}]),e}(),Dy=Z(10708);function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function np(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tp(Object(n),!0).forEach(function(r){(0,Fe.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Cy=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,rp=0,bl=!1,Oy=function(){function e(t,n){var r=this;(0,ni.Z)(this,e),this.reGl=t,this.context=n,this.entity=Zv(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach(function(c){var f=c.name,l=c.type,d=c.data,h=c.isReferer,v=c.storageClass;if(v===Iu.StorageBuffer){if(h)r.textureCache[f]={data:void 0},o["".concat(f,"Size")]=function(){return d.compiledBundle.context.output.textureSize};else{r.textureCache[f]=r.calcDataTexture(f,l,d);var m=r.textureCache[f],y=m.textureWidth,E=m.isOutput;o["".concat(f,"Size")]=[y,y],E&&(r.outputTextureName=f,r.context.needPingpong&&(r.outputTextureName="".concat(f,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(f,l,d)))}o[f]=function(){return bl&&console.log("[".concat(r.entity,"]: ").concat(f," ").concat(r.textureCache[f].id)),r.textureCache[f].texture}}else if(v===Iu.Uniform){if(d&&(Array.isArray(d)||ml()(d))&&d.length>16)throw new Error("invalid data type ".concat(l));o[f]=function(){return c.data}}});var i=this.getOuputDataTexture(),a=i.textureWidth,s=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var u={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:o,vert:Cy,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(u)}return(0,ri.Z)(e,[{key:"run",value:function(){var n=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){n.computeCommand()}),bl&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var t=(0,Ka.Z)(ro().mark(function r(){var o=this,i,a,s,u,c,f,l,d;return ro().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){i=o.reGl.read()}),!i){v.next=6;break}if(a=this.getOuputDataTexture(),s=a.originalDataLength,u=a.elementsPerTexel,c=a.typedArrayConstructor,f=c===void 0?Float32Array:c,l=[],u!==4)for(d=0;d<i.length;d+=4)u===1?l.push(i[d]):u===2?l.push(i[d],i[d+1]):l.push(i[d],i[d+1],i[d+2]);else l=i;return v.abrupt("return",new f(l.slice(0,s)));case 6:return v.abrupt("return",new Float32Array);case 7:case"end":return v.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"confirmInput",value:function(n,r){var o;this.entity===n.entity?(this.dynamicPingpong=!0,o=this):o=n,this.textureCache[r].id=o.getOuputDataTexture().id,this.textureCache[r].texture=o.getOuputDataTexture().texture,bl&&console.log("[".concat(this.entity,"]: confirm input ").concat(r," from model ").concat(o.entity,", ").concat(o.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=this.context.uniforms.find(function(c){var f=c.name;return f===n});if(i){var a=this.calcDataTexture(n,i.type,r),s=a.texture,u=a.data;this.textureCache[n].data=u,this.textureCache[n].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var n=this.context.output.name;this.textureCache[n].id=this.getOuputDataTexture().id,this.textureCache[n].texture=this.getOuputDataTexture().texture}var r=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=r,bl&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var n=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=n}},{key:"cloneDataTexture",value:function(n){var r=n.data,o=n.textureWidth;return np(np({},n),{},{id:rp++,texture:this.reGl.texture({width:o,height:o,data:r,type:"float"})})}},{key:"calcDataTexture",value:function(n,r,o){var i=1;r===Fc.Vector4FloatArray&&(i=4);for(var a=[],s=0;s<o.length;s+=i)i===1?a.push(o[s],0,0,0):i===2?a.push(o[s],o[s+1],0,0):i===3?a.push(o[s],o[s+1],o[s+2],0):i===4&&a.push(o[s],o[s+1],o[s+2],o[s+3]);var u=o.length,c=Math.ceil(u/i),f=Math.ceil(Math.sqrt(c)),l=f*f;c<l&&a.push.apply(a,(0,Dy.Z)(new Array((l-c)*4).fill(0)));var d=this.reGl.texture({width:f,height:f,data:a,type:"float"});return{id:rp++,data:a,originalDataLength:u,typedArrayConstructor:ml()(o)?o.constructor:void 0,textureWidth:f,texture:d,texelCount:c,elementsPerTexel:i,isOutput:n===this.context.output.name}}}]),e}(),Ly=function(){function e(t,n){(0,ni.Z)(this,e),this.elements=void 0;var r=n.data,o=n.usage,i=n.type,a=n.count;this.elements=t.elements({data:r,usage:qv[o||_e.STATIC_DRAW],type:Qd[i||_e.UNSIGNED_BYTE],count:a})}return(0,ri.Z)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var r=n.data;this.elements.subdata(r)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}(),My=function(){function e(t,n){(0,ni.Z)(this,e),this.framebuffer=void 0;var r=n.width,o=n.height,i=n.color,a=n.colors,s=n.depth,u=n.stencil,c={width:r,height:o};Array.isArray(a)&&(c.colors=a.map(function(f){return f.get()})),i&&typeof i!="boolean"&&(c.color=i.get()),this.framebuffer=t.framebuffer(c)}return(0,ri.Z)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var r=n.width,o=n.height;this.framebuffer.resize(r,o)}}]),e}(),ky=Z(74502),Gy=Z(69143),Py=Z.n(Gy);function Jd(e){var t={};return Object.keys(e).forEach(function(n){eh(n,e[n],t,"")}),t}function eh(e,t,n,r){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||ml()(t)||t===""||t.resize!==void 0){n["".concat(r&&r+".").concat(e)]=t;return}Py()(t)&&Object.keys(t).forEach(function(o){eh(o,t[o],n,"".concat(r&&r+".").concat(e))}),Array.isArray(t)&&t.forEach(function(o,i){Object.keys(o).forEach(function(a){eh(a,o[a],n,"".concat(r&&r+".").concat(e,"[").concat(i,"]"))})})}function op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Nu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?op(Object(n),!0).forEach(function(r){(0,Fe.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):op(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Fy=function(){function e(t,n){(0,ni.Z)(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var r=n.vs,o=n.fs,i=n.defines,a=n.attributes,s=n.uniforms,u=n.primitive,c=n.count,f=n.elements,l=n.depth,d=n.blend,h=n.stencil,v=n.cull,m=n.instances,y=n.scissor,E=n.viewport,g={};s&&(this.uniforms=Jd(s),Object.keys(s).forEach(function(V){g[V]=t.prop(V)}));var b={};Object.keys(a).forEach(function(V){b[V]=a[V].get()});var _=i&&this.generateDefines(i)||"",S={attributes:b,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(_,`
`).concat(o),uniforms:g,vert:`
`.concat(_,`
`).concat(r),primitive:_y[u===void 0?_e.TRIANGLES:u]};m&&(S.instances=m),c&&(S.count=c),f&&(S.elements=f.get()),y&&(S.scissor=y),E&&(S.viewport=E),this.initDepthDrawParams({depth:l},S),this.initBlendDrawParams({blend:d},S),this.initStencilDrawParams({stencil:h},S),this.initCullDrawParams({cull:v},S),this.drawCommand=t(S)}return(0,ri.Z)(e,[{key:"addUniforms",value:function(n){this.uniforms=Nu(Nu({},this.uniforms),Jd(n))}},{key:"draw",value:function(n){var r=Nu(Nu({},this.uniforms),Jd(n.uniforms||{})),o={};Object.keys(r).forEach(function(i){var a=(0,ky.Z)(r[i]);a==="boolean"||a==="number"||Array.isArray(r[i])||r[i].BYTES_PER_ELEMENT?o[i]=r[i]:a==="string"||(o[i]=r[i].get())}),this.drawCommand(o)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(n,r){var o=n.depth;o&&(r.depth={enable:o.enable===void 0?!0:!!o.enable,mask:o.mask===void 0?!0:!!o.mask,func:Iy[o.func||_e.LESS],range:o.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,r){var o=n.blend;if(o){var i=o.enable,a=o.func,s=o.equation,u=o.color,c=u===void 0?[0,0,0,0]:u;r.blend={enable:!!i,func:{srcRGB:El[a&&a.srcRGB||_e.SRC_ALPHA],srcAlpha:El[a&&a.srcAlpha||_e.SRC_ALPHA],dstRGB:El[a&&a.dstRGB||_e.ONE_MINUS_SRC_ALPHA],dstAlpha:El[a&&a.dstAlpha||_e.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ep[s&&s.rgb||_e.FUNC_ADD],alpha:ep[s&&s.alpha||_e.FUNC_ADD]},color:c}}}},{key:"initStencilDrawParams",value:function(n,r){var o=n.stencil;if(o){var i=o.enable,a=o.mask,s=a===void 0?-1:a,u=o.func,c=u===void 0?{cmp:_e.ALWAYS,ref:0,mask:-1}:u,f=o.opFront,l=f===void 0?{fail:_e.KEEP,zfail:_e.KEEP,zpass:_e.KEEP}:f,d=o.opBack,h=d===void 0?{fail:_e.KEEP,zfail:_e.KEEP,zpass:_e.KEEP}:d;r.stencil={enable:!!i,mask:s,func:Nu(Nu({},c),{},{cmp:Ay[c.cmp]}),opFront:{fail:Au[l.fail],zfail:Au[l.zfail],zpass:Au[l.zpass]},opBack:{fail:Au[h.fail],zfail:Au[h.zfail],zpass:Au[h.zpass]}}}}},{key:"initCullDrawParams",value:function(n,r){var o=n.cull;if(o){var i=o.enable,a=o.face,s=a===void 0?_e.BACK:a;r.cull={enable:!!i,face:Ny[s]}}}},{key:"generateDefines",value:function(n){return Object.keys(n).map(function(r){return"#define ".concat(r," ").concat(Number(n[r]))}).join(`
`)}}]),e}(),zy=function(){function e(t,n){(0,ni.Z)(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,i=o===void 0?_e.UNSIGNED_BYTE:o,a=n.width,s=n.height,u=n.flipY,c=u===void 0?!1:u,f=n.format,l=f===void 0?_e.RGBA:f,d=n.mipmap,h=d===void 0?!1:d,v=n.wrapS,m=v===void 0?_e.CLAMP_TO_EDGE:v,y=n.wrapT,E=y===void 0?_e.CLAMP_TO_EDGE:y,g=n.aniso,b=g===void 0?0:g,_=n.alignment,S=_===void 0?1:_,V=n.premultiplyAlpha,fe=V===void 0?!1:V,ne=n.mag,K=ne===void 0?_e.NEAREST:ne,J=n.min,ge=J===void 0?_e.NEAREST:J,G=n.colorSpace,Ee=G===void 0?_e.BROWSER_DEFAULT_WEBGL:G;this.width=a,this.height=s;var ke={width:a,height:s,type:Qd[i],format:wy[l],wrapS:Jv[m],wrapT:Jv[E],mag:Qv[K],min:Qv[ge],alignment:S,flipY:c,colorSpace:Ty[Ee],premultiplyAlpha:fe,aniso:b};r&&(ke.data=r),typeof h=="number"?ke.mipmap=Sy[h]:typeof h=="boolean"&&(ke.mipmap=h),this.texture=t.texture(ke)}return(0,ri.Z)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var r=n.width,o=n.height;this.texture.resize(r,o),this.width=r,this.height=o}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),By=function(){function e(){var t=this;(0,ni.Z)(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var n=(0,Ka.Z)(ro().mark(function r(o){return ro().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!o.uniforms){a.next=3;break}return a.next=3,Promise.all(Object.keys(o.uniforms).map(function(){var s=(0,Ka.Z)(ro().mark(function u(c){var f;return ro().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(o.uniforms[c]&&o.uniforms[c].load!==void 0)){d.next=5;break}return d.next=3,o.uniforms[c].load();case 3:f=d.sent,o.uniforms[c]=f;case 5:case"end":return d.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()));case 3:return a.abrupt("return",new Fy(t.gl,o));case 4:case"end":return a.stop()}},r)}));return function(r){return n.apply(this,arguments)}}(),this.createAttribute=function(n){return new xy(t.gl,n)},this.createBuffer=function(n){return new Ry(t.gl,n)},this.createElements=function(n){return new Ly(t.gl,n)},this.createTexture2D=function(n){return new zy(t.gl,n)},this.createFramebuffer=function(n){return new My(t.gl,n)},this.useFramebuffer=function(n,r){t.gl({framebuffer:n?n.get():null})(r)},this.createComputeModel=function(){var n=(0,Ka.Z)(ro().mark(function r(o){return ro().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Oy(t.gl,o));case 1:case"end":return a.stop()}},r)}));return function(r){return n.apply(this,arguments)}}(),this.clear=function(n){var r=n.color,o=n.depth,i=n.stencil,a=n.framebuffer,s=a===void 0?null:a,u={color:r,depth:o,stencil:i};u.framebuffer=s===null?s:s.get(),t.gl.clear(u)},this.setScissor=function(n){t.gl&&t.gl._gl&&(n.enable&&n.box?(t.gl._gl.enable(_e.SCISSOR_TEST),t.gl._gl.scissor(n.box.x,n.box.y,n.box.width,n.box.height)):t.gl._gl.disable(_e.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(n){var r=n.x,o=n.y,i=n.width,a=n.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(r,o,i,a),t.gl._refresh())},this.readPixels=function(n){var r=n.framebuffer,o=n.x,i=n.y,a=n.width,s=n.height,u={x:o,y:i,width:a,height:s};return r&&(u.framebuffer=r.get()),t.gl.read(u)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}return(0,ri.Z)(e,[{key:"init",value:function(){var t=(0,Ka.Z)(ro().mark(function r(o){return ro().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.inited){a.next=2;break}return a.abrupt("return");case 2:return this.$canvas=o.canvas,a.next=5,new Promise(function(s,u){by()({canvas:o.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(f,l){(f||!l)&&u(f),s(l)}})});case 5:this.gl=a.sent,this.inited=!0;case 7:case"end":return a.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}(),xl=function(){function e(){(0,ni.Z)(this,e),this.engine=void 0,this.configService=new py}return(0,ri.Z)(e,[{key:"setConfig",value:function(n){this.configService.set(n)}},{key:"setEngine",value:function(n){this.engine=n}},{key:"createEntity",value:function(){return Zv()}},{key:"createKernel",value:function(n){var r=new yy(this.engine,this.configService);return typeof n=="string"?r.setBundle(JSON.parse(n)):r.setBundle(n),r.init(),r}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=new e;return r.setConfig(n),r.setEngine(new By),r}}]),e}();const Ru=(e,t)=>{let n;return e?le(e)?n=()=>e:n=e:n=()=>t||1,n},Uy=(e,t)=>{const n=[],r=[],o={};let i=0;for(i=0;i<e.length;i++){const s=e[i];o[s.id]=i,n.push(s.x),n.push(s.y),n.push(0),n.push(0),r.push([])}for(i=0;i<t.length;i++){const s=t[i],u=Je(s,"source"),c=Je(s,"target");!isNaN(o[u])&&!isNaN(o[c])&&(r[o[u]].push(o[c]),r[o[c]].push(o[u]))}let a=0;for(i=0;i<e.length;i++){const s=n.length,u=r[i],c=u.length;n[i*4+2]=s,n[i*4+3]=c,a=Math.max(a,c);for(let f=0;f<c;++f){const l=u[f];n.push(+l)}}for(;n.length%4!==0;)n.push(0);return{maxEdgePerVetex:a,array:new Float32Array(n)}},Vy=(e,t,n,r)=>{const o=[],i=[],a={};let s=0;for(s=0;s<e.length;s++){const c=e[s];a[c.id]=s,o.push(c.x),o.push(c.y),o.push(0),o.push(0),i.push([])}for(s=0;s<t.length;s++){const c=t[s],f=Je(c,"source"),l=Je(c,"target");i[a[f]].push(a[l]),i[a[f]].push(n(c)),i[a[f]].push(r(c)),i[a[f]].push(0),i[a[l]].push(a[f]),i[a[l]].push(n(c)),i[a[l]].push(r(c)),i[a[l]].push(0)}let u=0;for(s=0;s<e.length;s++){const c=o.length,f=i[s],l=f.length;o[s*4+2]=c+1048576*l/4,o[s*4+3]=0,u=Math.max(u,l/4);for(let d=0;d<l;++d){const h=f[d];o.push(+h)}}for(;o.length%4!==0;)o.push(0);return{maxEdgePerVetex:u,array:new Float32Array(o)}},$y=(e,t)=>{const n=[],r=e.length,o={};return t.forEach(i=>{e.forEach((a,s)=>{if(o[i[a]]===void 0&&(o[i[a]]=Object.keys(o).length),n.push(o[i[a]]),s===r-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(o).length}},ip=e=>{const t=[],n=e.length,r=e[0].length;for(let o=0;o<r;o++)e.forEach((i,a)=>{if(t.push(i[o]),a===n-1)for(;t.length%4!==0;)t.push(0)});return new Float32Array(t)},xE=null,Xy='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',_E=null,Wy='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var _l=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{c(r.next(f))}catch(l){a(l)}}function u(f){try{c(r.throw(f))}catch(l){a(l)}}function c(f){f.done?i(f.value):o(f.value).then(s,u)}c((r=r.apply(e,t||[])).next())})};class Hy extends Dt{constructor(t){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return _l(this,void 0,void 0,function*(){const t=this,n=t.nodes;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}const o={},i={};n.forEach((a,s)=>{le(a.x)||(a.x=Math.random()*this.width),le(a.y)||(a.y=Math.random()*this.height),o[a.id]=a,i[a.id]=s}),t.nodeMap=o,t.nodeIdxMap=i,yield t.run()})}executeWithWorker(t,n){return _l(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.center;if(!o||o.length===0)return;if(o.length===1){o[0].x=i[0],o[0].y=i[1];return}const a={},s={};o.forEach((u,c)=>{le(u.x)||(u.x=Math.random()*this.width),le(u.y)||(u.y=Math.random()*this.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,yield r.run(t,n)})}run(t,n){return _l(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.edges,a=r.maxIteration,s=r.center,u=r.height*r.width;let c=Math.sqrt(u)/10;const f=u/(o.length+1),l=Math.sqrt(f),d=r.speed,h=r.clustering,{array:v,count:m}=$y([r.clusterField],o);o.forEach((J,ge)=>{let G=0,Ee=0;le(J.fx)&&le(J.fy)&&(G=J.fx||.001,Ee=J.fy||.001),v[4*ge+1]=G,v[4*ge+2]=Ee});const y=o.length,{maxEdgePerVetex:E,array:g}=Uy(o,i),b=r.workerEnabled;let _;b?_=xl.create({canvas:t,engineOptions:{supportCompute:!0}}):_=xl.create({engineOptions:{supportCompute:!0}});const S=r.onLayoutEnd,V=[];for(let J=0;J<m;J++)V.push(0,0,0,0);const fe=_.createKernel(Xy).setDispatch([y,1,1]).setBinding({u_Data:g,u_K:l,u_K2:f,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:d,u_MaxDisplace:c,u_Clustering:h?1:0,u_Center:s,u_AttributeArray:v,u_ClusterCenters:V,MAX_EDGE_PER_VERTEX:E,VERTEX_COUNT:y});let ne;h&&(ne=_.createKernel(Wy).setDispatch([m,1,1]).setBinding({u_Data:g,u_NodeAttributes:v,u_ClusterCenters:V,VERTEX_COUNT:y,CLUSTER_COUNT:m})),yield _l(this,void 0,void 0,function*(){for(let ge=0;ge<a;ge++)yield fe.execute(),h&&(ne.setBinding({u_Data:fe}),yield ne.execute(),fe.setBinding({u_ClusterCenters:ne})),fe.setBinding({u_MaxDisplace:c*=.99});const J=yield fe.getOutput();t?n.postMessage({type:tt.GPUEND,vertexEdgeData:J}):o.forEach((ge,G)=>{const Ee=J[4*G],ke=J[4*G+1];ge.x=Ee,ge.y=ke}),S&&S()})})}getType(){return"fruchterman-gpu"}}const wE=null,Zy='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',SE=null,jy='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var th=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{c(r.next(f))}catch(l){a(l)}}function u(f){try{c(r.throw(f))}catch(l){a(l)}}function c(f){f.done?i(f.value):o(f.value).then(s,u)}c((r=r.apply(e,t||[])).next())})};class Yy extends Dt{constructor(t){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return th(this,void 0,void 0,function*(){const t=this,n=t.nodes;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}const o={},i={};n.forEach((a,s)=>{le(a.x)||(a.x=Math.random()*t.width),le(a.y)||(a.y=Math.random()*t.height),o[a.id]=a,i[a.id]=s}),t.nodeMap=o,t.nodeIdxMap=i,t.nodeStrength=Ru(t.nodeStrength,1),t.edgeStrength=Ru(t.edgeStrength,1),yield t.run()})}executeWithWorker(t,n){const r=this,o=r.nodes,i=r.center;if(!o||o.length===0)return;if(o.length===1){o[0].x=i[0],o[0].y=i[1];return}const a={},s={};o.forEach((u,c)=>{le(u.x)||(u.x=Math.random()*r.width),le(u.y)||(u.y=Math.random()*r.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,r.nodeStrength=Ru(r.nodeStrength,1),r.edgeStrength=Ru(r.edgeStrength,1),r.run(t,n)}run(t,n){return th(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.edges,a=r.maxIteration;!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const s=o.length;r.linkDistance=Ru(r.linkDistance),r.edgeStrength=Ru(r.edgeStrength);const{maxEdgePerVetex:u,array:c}=Vy(o,i,r.linkDistance,r.edgeStrength);r.degrees=an(o.length,r.nodeIdxMap,i).map(G=>G.all);const f=[],l=[],d=[],h=[],v=[],m=[],y=[];r.getMass||(r.getMass=G=>r.degrees[r.nodeIdxMap[G.id]]||1);const E=r.gravity,g=r.center;o.forEach((G,Ee)=>{f.push(r.getMass(G)),l.push(r.nodeStrength(G)),r.degrees[Ee]||(r.degrees[Ee]=0);let ke=[g[0],g[1],E];if(r.getCenter){const Ue=r.getCenter(G,r.degrees[Ee]);Ue&&le(Ue[0])&&le(Ue[1])&&le(Ue[2])&&(ke=Ue)}d.push(ke[0]),h.push(ke[1]),v.push(ke[2]),le(G.fx)&&le(G.fy)?(m.push(G.fx||.001),y.push(G.fy||.001)):(m.push(0),y.push(0))});const b=ip([f,r.degrees,l,m]),_=ip([d,h,v,y]),S=r.workerEnabled;let V;S?V=xl.create({canvas:t,engineOptions:{supportCompute:!0}}):V=xl.create({engineOptions:{supportCompute:!0}});const fe=r.onLayoutEnd,ne=[];c.forEach(G=>{ne.push(G)});for(let G=0;G<4;G++)ne.push(0);const K=V.createKernel(Zy).setDispatch([s,1,1]).setBinding({u_Data:c,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:b,u_NodeAttributeArray2:_,MAX_EDGE_PER_VERTEX:u,VERTEX_COUNT:s,u_AveMovement:ne,u_interval:r.interval}),J=V.createKernel(jy).setDispatch([1,1,1]).setBinding({u_Data:c,VERTEX_COUNT:s,u_AveMovement:[0,0,0,0]});yield th(this,void 0,void 0,function*(){for(let Ee=0;Ee<a;Ee++){yield K.execute(),J.setBinding({u_Data:K}),yield J.execute();const ke=Math.max(.02,r.interval-Ee*.002);K.setBinding({u_interval:ke,u_AveMovement:J})}const G=yield K.getOutput();t?n.postMessage({type:tt.GPUEND,vertexEdgeData:G}):o.forEach((Ee,ke)=>{const Ue=G[4*ke],pt=G[4*ke+1];Ee.x=Ue,Ee.y=pt}),fe&&fe()})})}getType(){return"gForce-gpu"}}class Ky extends Dt{constructor(t){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const t=this,n=t.nodes,r=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){const t=this,n=t.nodes,r=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const o=t.center,i=t.velocityDecay,a=t.comboMap;t.previousLayouted||t.initPos(a);for(let c=0;c<r;c++){const f=[];n.forEach((l,d)=>{f[d]={x:0,y:0}}),t.applyCalculate(f),t.applyComboCenterForce(f),n.forEach((l,d)=>{!le(l.x)||!le(l.y)||(l.x+=f[d].x*i,l.y+=f[d].y*i)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}const s=[0,0];n.forEach(c=>{!le(c.x)||!le(c.y)||(s[0]+=c.x,s[1]+=c.y)}),s[0]/=n.length,s[1]/=n.length;const u=[o[0]-s[0],o[1]-s[1]];n.forEach((c,f)=>{!le(c.x)||!le(c.y)||(c.x+=u[0],c.y+=u[1])}),t.combos.forEach(c=>{const f=a[c.id];f&&f.empty&&(c.x=f.cx||c.x,c.y=f.cy||c.y)}),t.previousLayouted=!0}initVals(){const t=this,n=t.edges,r=t.nodes,o=t.combos,i={},a={},s={};r.forEach((J,ge)=>{a[J.id]=J,s[J.id]=ge}),t.nodeMap=a,t.indexMap=s;const u={};o.forEach(J=>{u[J.id]=J}),t.oriComboMap=u,t.comboMap=t.getComboMap();const c=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||c,t.preventNodeOverlap=t.preventNodeOverlap||c;const f=t.collideStrength;f&&(t.comboCollideStrength=f,t.nodeCollideStrength=f),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(let J=0;J<n.length;++J){const ge=Je(n[J],"source"),G=Je(n[J],"target");i[ge]?i[ge]++:i[ge]=1,i[G]?i[G]++:i[G]=1}const l=[];for(let J=0;J<n.length;++J){const ge=Je(n[J],"source"),G=Je(n[J],"target");l[J]=i[ge]/(i[ge]+i[G])}this.bias=l;const d=t.nodeSize,h=t.nodeSpacing;let v,m;if(le(h)?m=()=>h:Ye(h)?m=h:m=()=>0,this.nodeSpacing=m,!d)v=J=>J.size?it(J.size)?(J.size[0]>J.size[1]?J.size[0]:J.size[1])/2:ht(J.size)?(J.size.width>J.size.height?J.size.width:J.size.height)/2:J.size/2:10;else if(Ye(d))v=J=>d(J);else if(it(d)){const ge=(d[0]>d[1]?d[0]:d[1])/2;v=G=>ge}else{const J=d/2;v=ge=>J}this.nodeSize=v;const y=t.comboSpacing;let E;le(y)?E=()=>y:Ye(y)?E=y:E=()=>0,this.comboSpacing=E;const g=t.comboPadding;let b;le(g)?b=()=>g:it(g)?b=()=>Math.max.apply(null,g):Ye(g)?b=g:b=()=>0,this.comboPadding=b;let _=this.linkDistance,S;_||(_=10),le(_)?S=J=>_:S=_,this.linkDistance=S;let V=this.edgeStrength,fe;V||(V=1),le(V)?fe=J=>V:fe=V,this.edgeStrength=fe;let ne=this.nodeStrength,K;ne||(ne=30),le(ne)?K=J=>ne:K=ne,this.nodeStrength=K}initPos(t){this.nodes.forEach((o,i)=>{const a=o.comboId,s=t[a];a&&s?(o.x=s.cx+100/(i+1),o.y=s.cy+100/(i+1)):(o.x=100/(i+1),o.y=100/(i+1))})}getComboMap(){const t=this,n=t.nodeMap,r=t.comboTrees,o=t.oriComboMap,i={};return(r||[]).forEach(a=>{const s=[];En(a,u=>{if(u.itemType==="node"||!o[u.id])return!0;if(i[u.id]===void 0){const l={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:t.oriComboMap[u.id].depth||0,children:[]};i[u.id]=l}const c=u.children;c&&c.forEach(l=>{if(!i[l.id]&&!n[l.id])return!0;s.push(l)});const f=i[u.id];if(f.cx=0,f.cy=0,s.length===0){f.empty=!0;const l=o[u.id];f.cx=l.x,f.cy=l.y}return s.forEach(l=>{if(f.count++,l.itemType!=="node"){const h=i[l.id];le(h.cx)&&(f.cx+=h.cx),le(h.cy)&&(f.cy+=h.cy);return}const d=n[l.id];d&&(le(d.x)&&(f.cx+=d.x),le(d.y)&&(f.cy+=d.y))}),f.cx/=f.count||1,f.cy/=f.count||1,f.children=s,!0})}),i}applyComboCenterForce(t){const n=this,r=n.gravity,o=n.comboGravity||r,i=this.alpha,a=n.comboTrees,s=n.indexMap,u=n.nodeMap,c=n.comboMap;(a||[]).forEach(f=>{En(f,l=>{if(l.itemType==="node"||!c[l.id])return!0;const h=c[l.id],v=(h.depth+1)/10*.5,m=h.cx,y=h.cy;return h.cx=0,h.cy=0,h.children.forEach(E=>{if(E.itemType!=="node"){const ne=c[E.id];ne&&le(ne.cx)&&(h.cx+=ne.cx),ne&&le(ne.cy)&&(h.cy+=ne.cy);return}const g=u[E.id],b=g.x-m||.005,_=g.y-y||.005,S=Math.sqrt(b*b+_*_),V=s[g.id],fe=o*i/S*v;t[V].x-=b*fe,t[V].y-=_*fe,le(g.x)&&(h.cx+=g.x),le(g.y)&&(h.cy+=g.y)}),h.cx/=h.count||1,h.cy/=h.count||1,!0})})}applyCalculate(t){const n=this,r=n.comboMap,o=n.nodes,i={};o.forEach((s,u)=>{o.forEach((c,f)=>{if(u<f)return;const l=s.x-c.x||.005,d=s.y-c.y||.005;let h=l*l+d*d;const v=Math.sqrt(h);h<1&&(h=v),i[`${s.id}-${c.id}`]={vx:l,vy:d,vl2:h,vl:v},i[`${c.id}-${s.id}`]={vl2:h,vl:v,vx:-l,vy:-d}})}),n.updateComboSizes(r),n.calRepulsive(t,i),n.calAttractive(t,i),n.preventComboOverlap&&n.comboNonOverlapping(t,r)}updateComboSizes(t){const n=this,r=n.comboTrees,o=n.nodeMap,i=n.nodeSize,a=n.comboSpacing,s=n.comboPadding;(r||[]).forEach(u=>{const c=[];En(u,f=>{if(f.itemType==="node")return!0;const l=t[f.id];if(!l)return!1;const d=f.children;d&&d.forEach(m=>{!t[m.id]&&!o[m.id]||c.push(m)}),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,c.forEach(m=>{if(m.itemType!=="node")return!0;const y=o[m.id];if(!y)return!0;const E=i(y),g=y.x-E,b=y.y-E,_=y.x+E,S=y.y+E;l.minX>g&&(l.minX=g),l.minY>b&&(l.minY=b),l.maxX<_&&(l.maxX=_),l.maxY<S&&(l.maxY=S)});let h=n.oriComboMap[f.id].size||10;it(h)&&(h=h[0]);const v=Math.max(l.maxX-l.minX,l.maxY-l.minY,h);return l.r=v/2+a(l)/2+s(l),!0})})}comboNonOverlapping(t,n){const r=this,o=r.comboTree,i=r.comboCollideStrength,a=r.indexMap,s=r.nodeMap;En(o,u=>{if(!n[u.id]&&!s[u.id]&&u.id!=="comboTreeRoot")return!1;const c=u.children;return c&&c.length>1&&c.forEach((f,l)=>{if(f.itemType==="node")return!1;const d=n[f.id];d&&c.forEach((h,v)=>{if(l<=v||h.itemType==="node")return!1;const m=n[h.id];if(!m)return!1;const y=d.cx-m.cx||.005,E=d.cy-m.cy||.005,g=y*y+E*E,b=d.r||1,_=m.r||1,S=b+_,V=_*_,fe=b*b;if(g<S*S){const ne=f.children;if(!ne||ne.length===0)return!1;const K=h.children;if(!K||K.length===0)return!1;const J=Math.sqrt(g),ge=(S-J)/J*i,G=y*ge,Ee=E*ge,ke=V/(fe+V),Ue=1-ke;ne.forEach(pt=>{if(pt.itemType!=="node")return!1;if(!s[pt.id])return;const Ke=a[pt.id];K.forEach(bt=>{if(bt.itemType!=="node"||!s[bt.id])return!1;const dt=a[bt.id];t[Ke].x+=G*ke,t[Ke].y+=Ee*ke,t[dt].x-=G*Ue,t[dt].y-=Ee*Ue})})}})}),!0})}calRepulsive(t,n){const r=this,o=r.nodes,i=r.width*r.optimizeRangeFactor,a=r.nodeStrength,s=r.alpha,u=r.nodeCollideStrength,c=r.preventNodeOverlap,f=r.nodeSize,l=r.nodeSpacing,d=r.depthRepulsiveForceScale,h=r.center;o.forEach((v,m)=>{if(!(!v.x||!v.y)){if(h){const y=r.gravity,E=v.x-h[0]||.005,g=v.y-h[1]||.005,b=Math.sqrt(E*E+g*g);t[m].x-=E*y*s/b,t[m].y-=g*y*s/b}o.forEach((y,E)=>{if(m===E||!y.x||!y.y)return;const{vl2:g,vl:b}=n[`${v.id}-${y.id}`];if(b>i)return;const{vx:_,vy:S}=n[`${v.id}-${y.id}`];let V=Math.log(Math.abs(y.depth-v.depth)/10)+1||1;V=V<1?1:V,y.comboId!==v.comboId&&(V+=1);const fe=V?Math.pow(d,V):1,ne=a(y)*s/g*fe;if(t[m].x+=_*ne,t[m].y+=S*ne,m<E&&c){const K=f(v)+l(v)||1,J=f(y)+l(y)||1,ge=K+J;if(g<ge*ge){const G=(ge-b)/b*u,Ee=J*J;let ke=Ee/(K*K+Ee);const Ue=_*G,pt=S*G;t[m].x+=Ue*ke,t[m].y+=pt*ke,ke=1-ke,t[E].x-=Ue*ke,t[E].y-=pt*ke}}})}})}calAttractive(t,n){const r=this,o=r.edges,i=r.linkDistance,a=r.alpha,s=r.edgeStrength,u=r.bias,c=r.depthAttractiveForceScale;o.forEach((f,l)=>{const d=Je(f,"source"),h=Je(f,"target");if(!d||!h||d===h)return;const v=r.indexMap[d],m=r.indexMap[h],y=r.nodeMap[d],E=r.nodeMap[h];if(!y||!E)return;let g=y.depth===E.depth?0:Math.log(Math.abs(y.depth-E.depth)/10);y.comboId===E.comboId&&(g=g/2);let b=g?Math.pow(c,g):1;if(y.comboId!==E.comboId&&b===1?b=c/2:y.comboId===E.comboId&&(b=2),!le(E.x)||!le(y.x)||!le(E.y)||!le(y.y))return;const{vl:_,vx:S,vy:V}=n[`${h}-${d}`],fe=(_-i(f))/_*a*s(f)*b,ne=S*fe,K=V*fe,J=u[l];t[m].x-=ne*J,t[m].y-=K*J,t[v].x+=ne*(1-J),t[v].y+=K*(1-J)})}getType(){return"comboForce"}}class qy extends Dt{constructor(t){super(),this.center=[0,0],this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.comboPadding=10,this.comboTrees=[],this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,n=t.nodes,r=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){var t;const n=this,{nodes:r,edges:o,combos:i,comboEdges:a,center:s}=n,u={};r.forEach(E=>{u[E.id]=E});const c={};i.forEach(E=>{c[E.id]=E});const f=n.getInnerGraphs(u),l=[],d=[],h={};let v=!0;this.comboTrees.forEach(E=>{const g=f[E.id];if(!g)return;const b=Object.assign(Object.assign({},E),{x:g.x||c[E.id].x,y:g.y||c[E.id].y,fx:g.fx||c[E.id].fx,fy:g.fy||c[E.id].fy,mass:g.mass||c[E.id].mass,size:g.size});d.push(b),!isNaN(b.x)&&b.x!==0&&!isNaN(b.y)&&b.y!==0?v=!1:(b.x=Math.random()*100,b.y=Math.random()*100),l.push(E.id),En(E,_=>(_.id!==E.id&&(h[_.id]=E.id),!0))}),r.forEach(E=>{if(E.comboId&&c[E.comboId])return;const g=Object.assign({},E);d.push(g),!isNaN(g.x)&&g.x!==0&&!isNaN(g.y)&&g.y!==0?v=!1:(g.x=Math.random()*100,g.y=Math.random()*100),l.push(E.id)});const m=[];if(o.concat(a).forEach(E=>{const g=h[E.source]||E.source,b=h[E.target]||E.target;g!==b&&l.includes(g)&&l.includes(b)&&m.push({source:g,target:b})}),d!=null&&d.length){if(d.length===1)d[0].x=s[0],d[0].y=s[1];else{const E={nodes:d,edges:m},g=this.outerLayout||new Vn({gravity:1,factor:4,linkDistance:(_,S,V)=>{var fe,ne;const K=((((fe=S.size)===null||fe===void 0?void 0:fe[0])||30)+(((ne=V.size)===null||ne===void 0?void 0:ne[0])||30))/2;return Math.min(K*1.5,700)}}),b=(t=g.getType)===null||t===void 0?void 0:t.call(g);g.updateCfg({center:s,kg:5,preventOverlap:!0,animate:!1}),v&&nt[b]&&(d.length<100?new Hv:new Tn).layout(E),g.layout(E)}d.forEach(E=>{const g=f[E.id];if(!g){const b=u[E.id];b&&(b.x=E.x,b.y=E.y);return}g.visited=!0,g.x=E.x,g.y=E.y,g.nodes.forEach(b=>{b.x+=E.x,b.y+=E.y})})}const y=Object.keys(f);for(let E=y.length-1;E>=0;E--){const g=y[E],b=f[g];b&&(b.nodes.forEach(_=>{b.visited||(_.x+=b.x||0,_.y+=b.y||0),u[_.id]&&(u[_.id].x=_.x,u[_.id].y=_.y)}),c[g]&&(c[g].x=b.x,c[g].y=b.y))}return{nodes:r,edges:o,combos:i,comboEdges:a}}getInnerGraphs(t){const n=this,{comboTrees:r,nodeSize:o,edges:i,comboPadding:a,spacing:s}=n,u={},c=this.innerLayout||new Wv({type:"concentric",sortBy:"id"});return c.center=[0,0],c.preventOverlap=!0,c.nodeSpacing=s,(r||[]).forEach(f=>{En(f,l=>{var d;let h=(a==null?void 0:a(l))||10;if(it(h)&&(h=Math.max(...h)),!((d=l.children)===null||d===void 0)&&d.length){const v=l.children.map(K=>{if(K.itemType==="combo")return u[K.id];const J=t[K.id]||{};return Object.assign(Object.assign({},J),K)}),m=v.map(K=>K.id),y={nodes:v,edges:i.filter(K=>m.includes(K.source)&&m.includes(K.target))};let E=1/0;v.forEach(K=>{var J;K.size||(K.size=((J=u[K.id])===null||J===void 0?void 0:J.size)||(o==null?void 0:o(K))||[30,30]),le(K.size)&&(K.size=[K.size,K.size]),E>K.size[0]&&(E=K.size[0]),E>K.size[1]&&(E=K.size[1])}),c.layout(y);const{minX:g,minY:b,maxX:_,maxY:S}=Jn(v),V={x:(_+g)/2,y:(S+b)/2};y.nodes.forEach(K=>{K.x-=V.x,K.y-=V.y});const fe=Math.max(_-g,E)+h*2,ne=Math.max(S-b,E)+h*2;u[l.id]={id:l.id,nodes:v,size:[fe,ne]}}else if(l.itemType==="combo"){const v=h?[h*2,h*2]:[30,30];u[l.id]={id:l.id,nodes:[],size:v}}return!0})}),u}initVals(){const t=this,n=t.nodeSize,r=t.spacing;let o,i;if(le(r)?i=()=>r:Ye(r)?i=r:i=()=>0,this.spacing=i,!n)o=u=>{const c=i(u);return u.size?it(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+c)/2:ht(u.size)?((u.size.width>u.size.height?u.size.width:u.size.height)+c)/2:(u.size+c)/2:10+c/2};else if(Ye(n))o=u=>{const c=n(u),f=i(u);return it(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+f)/2:((c||10)+f)/2};else if(it(n)){const c=(n[0]>n[1]?n[0]:n[1])/2;o=f=>c+i(f)/2}else{const u=n/2;o=c=>u+i(c)/2}this.nodeSize=o;const a=t.comboPadding;let s;le(a)?s=()=>a:it(a)?s=()=>Math.max.apply(null,a):Ye(a)?s=a:s=()=>0,this.comboPadding=s}getType(){return"comboCombined"}}class nh{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const n=this.rx-t.rx,r=this.ry-t.ry;return Math.hypot(n,r)}setPos(t,n){this.rx=t,this.ry=n}resetForce(){this.fx=0,this.fy=0}addForce(t){const n=t.rx-this.rx,r=t.ry-this.ry;let o=Math.hypot(n,r);o=o<1e-4?1e-4:o;const i=this.g*(this.degree+1)*(t.degree+1)/o;this.fx+=i*n/o,this.fy+=i*r/o}in(t){return t.contains(this.rx,this.ry)}add(t){const n=this.mass+t.mass,r=(this.rx*this.mass+t.rx*t.mass)/n,o=(this.ry*this.mass+t.ry*t.mass)/n,i=this.degree+t.degree,a={rx:r,ry:o,mass:n,degree:i};return new nh(a)}}class Du{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,n){const r=this.length/2;return t<=this.xmid+r&&t>=this.xmid-r&&n<=this.ymid+r&&n>=this.ymid-r}NW(){const t=this.xmid-this.length/4,n=this.ymid+this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}NE(){const t=this.xmid+this.length/4,n=this.ymid+this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}SW(){const t=this.xmid-this.length/4,n=this.ymid-this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}SE(){const t=this.xmid+this.length/4,n=this.ymid-this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}}class Cu{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,t!=null&&(this.quad=t)}insert(t){if(this.body==null){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new Cu(this.quad.NW()),this.NE=new Cu(this.quad.NE()),this.SW=new Cu(this.quad.SW()),this.SE=new Cu(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(t){if(!(this.body==null||t===this.body))if(this._isExternal())t.addForce(this.body);else{const n=this.quad?this.quad.getLength():0,r=this.body.distanceTo(t);n/r<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}class Qy extends Dt{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,{nodes:n,onLayoutEnd:r,prune:o}=t;let i=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const a=[],s=n.length;for(let u=0;u<s;u+=1){const c=n[u];let f=10,l=10;le(c.size)&&(f=c.size,l=c.size),it(c.size)?(isNaN(c.size[0])||(f=c.size[0]),isNaN(c.size[1])||(l=c.size[1])):ht(c.size)&&(f=c.size.width,l=c.size.height),t.getWidth&&!isNaN(t.getWidth(c))&&(l=t.getWidth(c)),t.getHeight&&!isNaN(t.getHeight(c))&&(f=t.getHeight(c));const d=Math.max(f,l);a.push(d)}t.barnesHut===void 0&&s>250&&(t.barnesHut=!0),t.prune===void 0&&s>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(i=250,s<=200&&s>100?i=1e3:s>200&&(i=1200),this.maxIteration=i):this.maxIteration===0&&o&&(i=100,s<=200&&s>100?i=500:s>200&&(i=950),this.maxIteration=i),t.kr||(t.kr=50,s>100&&s<=500?t.kr=20:s>500&&(t.kr=1)),t.kg||(t.kg=20,s>100&&s<=500?t.kg=10:s>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(a),r()}updateNodesByForces(t){const n=this,{edges:r,maxIteration:o}=n;let i=n.nodes;const a=r.filter(v=>{const m=Je(v,"source"),y=Je(v,"target");return m!==y}),s=i.length,u=a.length,c=[],f={},l={},d=[];for(let v=0;v<s;v+=1)f[i[v].id]=v,c[v]=0,(i[v].x===void 0||isNaN(i[v].x))&&(i[v].x=Math.random()*1e3),(i[v].y===void 0||isNaN(i[v].y))&&(i[v].y=Math.random()*1e3),d.push({x:i[v].x,y:i[v].y});for(let v=0;v<u;v+=1){let m,y,E=0,g=0;for(let b=0;b<s;b+=1){const _=Je(a[v],"source"),S=Je(a[v],"target");i[b].id===_?(m=i[b],E=b):i[b].id===S&&(y=i[b],g=b),l[v]={sourceIdx:E,targetIdx:g}}m&&(c[f[m.id]]+=1),y&&(c[f[y.id]]+=1)}let h=o;if(i=this.iterate(h,f,l,u,c,t),n.prune){for(let v=0;v<u;v+=1)c[l[v].sourceIdx]<=1?(i[l[v].sourceIdx].x=i[l[v].targetIdx].x,i[l[v].sourceIdx].y=i[l[v].targetIdx].y):c[l[v].targetIdx]<=1&&(i[l[v].targetIdx].x=i[l[v].sourceIdx].x,i[l[v].targetIdx].y=i[l[v].sourceIdx].y);n.prune=!1,n.barnesHut=!1,h=100,i=this.iterate(h,f,l,u,c,t)}return i}iterate(t,n,r,o,i,a){const s=this;let{nodes:u}=s;const{kr:c,preventOverlap:f}=s,{barnesHut:l}=s,d=u.length;let h=0;const v=100;let m=t;const y=50;let E=[];const g=[],b=[];for(let _=0;_<d;_+=1)if(E[2*_]=0,E[2*_+1]=0,l){const S={id:_,rx:u[_].x,ry:u[_].y,mass:1,g:c,degree:i[_]};b[_]=new nh(S)}for(;m>0;){for(let S=0;S<d;S+=1)g[2*S]=E[2*S],g[2*S+1]=E[2*S+1],E[2*S]=0,E[2*S+1]=0;E=this.getAttrForces(m,y,o,n,r,i,a,E),l&&(f&&m>y||!f)?E=this.getOptRepGraForces(E,b,i):E=this.getRepGraForces(m,y,E,v,a,i);const _=this.updatePos(E,g,h,i);u=_.nodes,h=_.sg,m--,s.tick&&s.tick()}return u}getAttrForces(t,n,r,o,i,a,s,u){const c=this,{nodes:f,preventOverlap:l,dissuadeHubs:d,mode:h,prune:v}=c;for(let m=0;m<r;m+=1){const y=f[i[m].sourceIdx],E=i[m].sourceIdx,g=f[i[m].targetIdx],b=i[m].targetIdx;if(v&&(a[E]<=1||a[b]<=1))continue;const _=[g.x-y.x,g.y-y.y];let S=Math.hypot(_[0],_[1]);S=S<1e-4?1e-4:S,_[0]=_[0]/S,_[1]=_[1]/S,l&&t<n&&(S=S-s[E]-s[b]);let V=S,fe=V;h==="linlog"&&(V=Math.log(1+S),fe=V),d&&(V=S/a[E],fe=S/a[b]),l&&t<n&&S<=0?(V=0,fe=0):l&&t<n&&S>0&&(V=S,fe=S),u[2*o[y.id]]+=V*_[0],u[2*o[g.id]]-=fe*_[0],u[2*o[y.id]+1]+=V*_[1],u[2*o[g.id]+1]-=fe*_[1]}return u}getRepGraForces(t,n,r,o,i,a){const s=this,{nodes:u,preventOverlap:c,kr:f,kg:l,center:d,prune:h}=s,v=u.length;for(let m=0;m<v;m+=1){for(let b=m+1;b<v;b+=1){if(h&&(a[m]<=1||a[b]<=1))continue;const _=[u[b].x-u[m].x,u[b].y-u[m].y];let S=Math.hypot(_[0],_[1]);S=S<1e-4?1e-4:S,_[0]=_[0]/S,_[1]=_[1]/S,c&&t<n&&(S=S-i[m]-i[b]);let V=f*(a[m]+1)*(a[b]+1)/S;c&&t<n&&S<0?V=o*(a[m]+1)*(a[b]+1):c&&t<n&&S===0?V=0:c&&t<n&&S>0&&(V=f*(a[m]+1)*(a[b]+1)/S),r[2*m]-=V*_[0],r[2*b]+=V*_[0],r[2*m+1]-=V*_[1],r[2*b+1]+=V*_[1]}const y=[u[m].x-d[0],u[m].y-d[1]],E=Math.hypot(y[0],y[1]);y[0]=y[0]/E,y[1]=y[1]/E;const g=l*(a[m]+1);r[2*m]-=g*y[0],r[2*m+1]-=g*y[1]}return r}getOptRepGraForces(t,n,r){const o=this,{nodes:i,kg:a,center:s,prune:u}=o,c=i.length;let f=9e10,l=-9e10,d=9e10,h=-9e10;for(let g=0;g<c;g+=1)u&&r[g]<=1||(n[g].setPos(i[g].x,i[g].y),i[g].x>=l&&(l=i[g].x),i[g].x<=f&&(f=i[g].x),i[g].y>=h&&(h=i[g].y),i[g].y<=d&&(d=i[g].y));const v=Math.max(l-f,h-d),m={xmid:(l+f)/2,ymid:(h+d)/2,length:v,massCenter:s,mass:c},y=new Du(m),E=new Cu(y);for(let g=0;g<c;g+=1)u&&r[g]<=1||n[g].in(y)&&E.insert(n[g]);for(let g=0;g<c;g+=1){if(u&&r[g]<=1)continue;n[g].resetForce(),E.updateForce(n[g]),t[2*g]-=n[g].fx,t[2*g+1]-=n[g].fy;const b=[i[g].x-s[0],i[g].y-s[1]];let _=Math.hypot(b[0],b[1]);_=_<1e-4?1e-4:_,b[0]=b[0]/_,b[1]=b[1]/_;const S=a*(r[g]+1);t[2*g]-=S*b[0],t[2*g+1]-=S*b[1]}return t}updatePos(t,n,r,o){const i=this,{nodes:a,ks:s,tao:u,prune:c,ksmax:f}=i,l=a.length,d=[],h=[];let v=0,m=0;for(let E=0;E<l;E+=1){if(c&&o[E]<=1)continue;const g=[t[2*E]-n[2*E],t[2*E+1]-n[2*E+1]],b=Math.hypot(g[0],g[1]),_=[t[2*E]+n[2*E],t[2*E+1]+n[2*E+1]],S=Math.hypot(_[0],_[1]);d[E]=b,h[E]=S/2,v+=(o[E]+1)*d[E],m+=(o[E]+1)*h[E]}const y=r;r=u*m/v,y!==0&&(r=r>1.5*y?1.5*y:r);for(let E=0;E<l;E+=1){if(c&&o[E]<=1||le(a[E].fx)&&le(a[E].fy))continue;let g=s*r/(1+r*Math.sqrt(d[E])),b=Math.hypot(t[2*E],t[2*E+1]);b=b<1e-4?1e-4:b;const _=f/b;g=g>_?_:g;const S=g*t[2*E],V=g*t[2*E+1];a[E].x+=S,a[E].y+=V}return{nodes:a,sg:r}}}class ga{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(t,n,r){this.cells=[],this.CELL_W=r.CELL_W||ga.DEFAULT_CELL_W,this.CELL_H=r.CELL_H||ga.DEFAULT_CELL_H,this.columnNum=Math.ceil(t/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),ga.MIN_DIST=Math.pow(t,2)+Math.pow(n,2);for(let o=0;o<this.columnNum;o++){const i=[];for(let a=0;a<this.rowNum;a++){const s={dx:o,dy:a,x:o*this.CELL_W,y:a*this.CELL_H,occupied:!1};i.push(s)}this.cells.push(i)}}findGridByNodeId(t){var n,r;for(let o=0;o<this.columnNum;o++)for(let i=0;i<this.rowNum;i++)if(this.cells[o][i].node&&((r=(n=this.cells[o][i])===null||n===void 0?void 0:n.node)===null||r===void 0?void 0:r.id)===t)return{column:o,row:i};return null}sqdist(t,n){return Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)}occupyNearest(t){let n=ga.MIN_DIST,r,o=null;for(let i=0;i<this.columnNum;i++)for(let a=0;a<this.rowNum;a++)!this.cells[i][a].occupied&&(r=this.sqdist(t,this.cells[i][a]))<n&&(n=r,o=this.cells[i][a]);return o&&(o.occupied=!0),o}insertColumn(t,n){if(!(n<=0)){for(let r=0;r<n;r++){this.cells[r+this.columnNum]=[];for(let o=0;o<this.rowNum;o++)this.cells[r+this.columnNum][o]={dx:r,dy:o,x:r*this.CELL_W,y:o*this.CELL_H,occupied:!1,node:null}}for(let r=this.columnNum-1;r>t;r--)for(let o=0;o<this.rowNum;o++)this.cells[r+n][o]=Object.assign(Object.assign({},this.cells[r][o]),{x:(r+n)*this.CELL_W,y:o*this.CELL_H}),this.cells[r][o]={x:r*this.CELL_W,y:o*this.CELL_H,occupied:!0,node:null};for(let r=0;r<this.additionColumn.length;r++)this.additionColumn[r]>=t&&(this.additionColumn[r]+=n);for(let r=0;r<n;r++)this.additionColumn.push(t+r+1);this.columnNum+=n}}insertRow(t,n){if(!(n<=0)){for(let r=0;r<n;r++)for(let o=0;o<this.columnNum;o++)this.cells[o][r+this.rowNum]={dx:o,dy:r,x:o*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(let r=0;r<this.columnNum;r++)for(let o=this.rowNum-1;o>t;o--)this.cells[r][o+n]=Object.assign(Object.assign({},this.cells[r][o]),{dx:r,dy:o+n,x:r*this.CELL_W,y:(o+n)*this.CELL_H}),this.cells[r][o]={dx:r,dy:o,x:r*this.CELL_W,y:o*this.CELL_H,occupied:!1,node:null};for(let r=0;r<this.additionRow.length;r++)this.additionRow[r]>=t&&(this.additionRow[r]+=n);for(let r=0;r<n;r++)this.additionRow.push(t+r+1);this.rowNum+=n}}getNodes(){const t=[];for(let n=0;n<this.columnNum;n++)for(let r=0;r<this.rowNum;r++)this.cells[n][r].node&&t.push(this.cells[n][r]);return t}}ga.MIN_DIST=50,ga.DEFAULT_CELL_W=80,ga.DEFAULT_CELL_H=80;function Jy(e,t){if(!e.nodes||e.nodes.length===0)return e;const n=t.width,r=t.height,o=t.nodeMinGap;let i=1e4,a=1e4;e.nodes.forEach(u=>{const c=u.size[0]||50,f=u.size[1]||50;i=Math.min(c,i),a=Math.min(f,a)});const s=new ga;s.init(n,r,{CELL_H:a,CELL_W:i}),e.nodes.forEach(u=>{const c=s.occupyNearest(u);c&&(c.node={id:u.id,size:u.size},u.x=c.x,u.y=c.y,u.dx=c.dx,u.dy=c.dy)});for(let u=0;u<e.nodes.length;u++){const c=e.nodes[u],f=s.findGridByNodeId(c.id);if(!f)throw new Error("can not find node cell");const{column:l,row:d}=f;if(c.size[0]+o>i){const h=Math.ceil((c.size[0]+o)/i)-1;let v=h;for(let m=0;m<h&&(s.additionColumn.indexOf(l+m+1)>-1&&!s.cells[l+m+1][d].node);m++)v--;s.insertColumn(l,v)}if(c.size[1]+o>a){const h=Math.ceil((c.size[1]+o)/a)-1;let v=h;for(let m=0;m<h&&(s.additionRow.indexOf(d+m+1)>-1&&!s.cells[l][d+m+1].node);m++)v--;s.insertRow(d,v)}}for(let u=0;u<s.columnNum;u++)for(let c=0;c<s.rowNum;c++){const f=s.cells[u][c];if(f.node){const l=e.nodes.find(d=>{var h;return d.id===((h=f==null?void 0:f.node)===null||h===void 0?void 0:h.id)});l&&(l.x=f.x+l.size[0]/2,l.y=f.y+l.size[1]/2)}}}const ap=1200,sp=800,wl=1e7,$c=10,up=3.141592653589793,rh=1.5707963267948966,eE=up*.375,tE=up*.625,Sl=new Map,nE=10,rE=10;let oh=.8;const cp=.1,oE=.5;function iE(e,t,n){const r=e.x-e.size[0]/2,o=e.y-e.size[1]/2,i=e.x+e.size[0]/2,a=e.y+e.size[1]/2,s=t.x-t.size[0]/2,u=t.y-t.size[1]/2,c=t.x+t.size[0]/2,f=t.y+t.size[1]/2,l=e.x,d=e.y,h=t.x,v=t.y,m=h-l,y=Math.atan2(m,v-d);let E=0,g=0,b=0,_=0;y>rh?(g=o-f,E=s-i,b=parseFloat(g?(g/Math.cos(y)).toFixed(2):E.toFixed(2)),_=parseFloat(E?(E/Math.sin(y)).toFixed(2):g.toFixed(2))):0<y&&y<=rh?(g=u-a,E=s-i,g>E?b=_=parseFloat(g?(g/Math.cos(y)).toFixed(2):E.toFixed(2)):b=_=parseFloat(E?(E/Math.sin(y)).toFixed(2):g.toFixed(2))):y<-rh?(g=o-f,E=-(c-r),g>E?b=_=parseFloat(g?(g/Math.cos(y)).toFixed(2):E.toFixed(2)):b=_=parseFloat(E?(E/Math.sin(y)).toFixed(2):g.toFixed(2))):(g=u-a,Math.abs(m)>(i-r)/2?E=r-c:E=m,g>E?b=_=parseFloat(g?(g/Math.cos(y)).toFixed(2):E.toFixed(2)):b=_=parseFloat(E&&y!==0?(E/Math.sin(y)).toFixed(2):g.toFixed(2)));const S=parseFloat(y.toFixed(2));let V=n;return n&&(V=eE<S&&S<tE),{distance:Math.abs(b<_?b:_),isHoriz:V}}function fp(e,t){const r=(Sl.get(e.id)||[]).find(fe=>fe.source===t.id||fe.target===t.id),o=e.size[0]*e.size[1],i=t.size[0]*t.size[1],a=o>i?t:e,s=o>i?e:t,u=a.x-a.size[0]/2,c=a.y-a.size[1]/2,f=a.x+a.size[0]/2,l=a.y+a.size[1]/2,d=s.x-s.size[0]/2,h=s.y-s.size[1]/2,v=s.x+s.size[0]/2,m=s.y+s.size[1]/2,y=a.x,E=a.y,g=s.x,b=s.y,_=f>=d&&v>=u&&l>=h&&m>=c;let S=0,V=0;if(_){V=Math.sqrt(Math.pow(g-y,2)+Math.pow(b-E,2));const fe=u>d?u:d,ne=c>h?c:h,K=f<v?f:v,J=l<m?l:m,ge=K-fe,G=J-ne,Ee=ge*G;V===0&&(V=1e-7),S=$c*1/V*100+Ee,S*=wl}else{let fe=!1;const ne=iE(a,s,fe);V=ne.distance,fe=ne.isHoriz,V<=$c?V!==0?r?S+=$c+wl*1/V:S+=$c+wl*$c/V:S+=wl:(S+=V,r&&(S+=V*V))}return S}function lp(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];(r.x<0||r.y<0||r.x>ap||r.y>sp)&&(t+=1e12);for(let o=n+1;o<e.length;o++)t+=fp(r,e[o])}return t}function aE(e,t,n,r){const o=new Map;n.forEach((u,c)=>{o.set(u.id,u)});const i=r.filter(u=>u.source===e.id||u.target===e.id)||[],a=[];i.forEach(u=>{const c=u.source===e.id?u.target:u.source,f=o.get(c);f&&a.push(f)});let s=!0;for(let u=0;u<a.length;u++){const c=a[u],f=Math.atan((e.y-c.y)/(c.x-e.y))*180,l=Math.atan((t.y-c.y)/(c.x-t.y))*180,d=f<30||f>150,h=l<30||l>150,v=f>70&&f<110,m=l>70&&l<110;if(d&&!h||f*l<0){s=!1;break}else if(v&&!m||f*l<0){s=!1;break}else if((c.x-e.x)*(c.x-t.x)<0){s=!1;break}else if((c.y-e.y)*(c.y-t.y)<0){s=!1;break}}return s}function sE(e,t){let n=!1;const r=1,o=nE*r,i=rE*r,a=[o,-o,0,0],s=[0,0,i,-i];for(let u=0;u<e.length;++u){const c=e[u];let f=dp(c,e);for(let l=0;l<a.length;l++)if(aE(c,{x:c.x+a[l],y:c.y+s[l]},e,t)){c.x+=a[l],c.y+=s[l];const h=dp(c,e),v=Math.random();h<f||v<oh&&v>cp?(f=h,n=!0):(c.x-=a[l],c.y-=s[l])}}return oh>cp&&(oh*=oE),n?lp(e):0}function dp(e,t){let n=0;(e.x<0||e.y<0||e.x+e.size[0]+20>ap||e.y+e.size[1]+20>sp)&&(n+=1e12);for(let r=0;r<t.length;++r)e.id!==t[r].id&&(n+=fp(e,t[r]));return n}function uE(e,t){if(e.length===0)return{nodes:e,edges:t};e.forEach(u=>{const c=t.filter(f=>f.source===u.id||f.target===u.id);Sl.set(u,c)}),e.sort((u,c)=>{var f,l;return((f=Sl.get(u.id))===null||f===void 0?void 0:f.length)-((l=Sl.get(c.id))===null||l===void 0?void 0:l.length)});let n=lp(e),r=20,o=1,i=0;const a=50;let s=0;for(;r>0&&(s++,!(s>=a));){const u=sE(e,t);u!==0&&(i=u),o=i-n,n=i,o===0?--r:r=20}return e.forEach(u=>{u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:e,edges:t}}var cE=uE;function fE(e,t){const{nodes:n,edges:r}=e,o=t.width,i=t.height;if(!(n!=null&&n.length))return Promise.resolve();const a=[];n.forEach(v=>{if(r.filter(y=>y.source===v.id||y.target===v.id).length>1){const y=Object.assign({},v);delete y.size,a.push(y)}});const s=[];r.forEach(v=>{const m=a.find(E=>E.id===v.source),y=a.find(E=>E.id===v.target);m&&y&&s.push(v)});const u=new ys({type:"dagre",ranksep:t.nodeMinGap,nodesep:t.nodeMinGap}),{nodes:c}=u.layout({nodes:a,edges:s});n.forEach(v=>{const m=(c||[]).find(y=>y.id===v.id);v.x=(m==null?void 0:m.x)||o/2,v.y=(m==null?void 0:m.y)||i/2});const f=JSON.parse(JSON.stringify(n)),l=JSON.parse(JSON.stringify(r)),d=ss().nodes(f).force("link",D(l).id(v=>v.id).distance(v=>s.find(y=>y.source===v.source&&y.target===v.target)?30:20)).force("charge",$s()).force("center",Xs(o/2,i/2)).force("x",Ve(o/2)).force("y",Ze(i/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(v=>{d.on("end",()=>{n.forEach(S=>{const V=f.find(fe=>fe.id===S.id);V&&(S.x=V.x,S.y=V.y)});const m=Math.min(...n.map(S=>S.x)),y=Math.max(...n.map(S=>S.x)),E=Math.min(...n.map(S=>S.y)),g=Math.max(...n.map(S=>S.y)),b=o/(y-m),_=i/(g-E);n.forEach(S=>{S.x!==void 0&&b<1&&(S.x=(S.x-m)*b),S.y!==void 0&&_<1&&(S.y=(S.y-E)*_)}),n.forEach(S=>{S.sizeTemp=S.size,S.size=[10,10]}),cE(n,r),n.forEach(S=>{S.size=S.sizeTemp||[],delete S.sizeTemp}),Jy({nodes:n,edges:r},t),v()})})}class lE extends Dt{constructor(t){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},t&&this.updateCfg(t)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const t=this,n=t.nodes,r=t.edges;return n==null||n.forEach(o=>{o.size||(o.size=[50,50])}),fE({nodes:n,edges:r},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{t.onLayoutEnd&&t.onLayoutEnd()})}getType(){return"er"}}class dE extends Dt{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const t=this,n=t.nodes,r=.9,o=t.center;return!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),n&&n.forEach(i=>{i.x=(Math.random()-.5)*r*t.width+o[0],i.y=(Math.random()-.5)*r*t.height+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:this.edges}}getType(){return"random"}}class TE{constructor(t){const n=getLayoutByName(t.type);this.layoutInstance=new n(t)}layout(t){return this.layoutInstance.layout(t)}updateCfg(t){this.layoutInstance.updateCfg(t)}init(t){this.correctLayers(t.nodes),this.layoutInstance.init(t)}correctLayers(t){if(!(t!=null&&t.length))return;let n=1/0;const r=[];if(t.forEach(o=>{isString(o.layer)&&(o.layer=parseInt(o.layer,10)),!(o.layer===void 0||isNaN(o.layer))&&(r.push(o),o.layer<n&&(n=o.layer))}),n<=0){const o=Math.abs(n)+1;r.forEach(i=>i.layer+=o)}}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const IE={force:Gt,fruchterman:sy,forceAtlas2:Qy,gForce:Vn,force2:is,dagre:ys,dagreCompound:gg,circular:In,radial:iy,concentric:Wv,grid:Tn,mds:Hv,comboForce:Ky,comboCombined:qy,random:dE,"gForce-gpu":Yy,"fruchterman-gpu":Hy,er:lE}},12315:function(be,ot,Z){"use strict";Z.d(ot,{Z:function(){return Zu}});var H=Z(87363),gt=Z.n(H),Qe=Z(9624),Ge=Z(50410),xt=Z(58709),it={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},le=it,kt=Z(6481),sn=function(D,we){return H.createElement(kt.Z,(0,xt.Z)({},D,{ref:we,icon:le}))},ht=H.forwardRef(sn),on=ht,Je=Z(82187),an=Z.n(Je),At=Z(97335),Sn=Z(95979),rt=Z(75161),Bn=Z(74502),Mt=Z(9862),En=Z(29809),Jn=Z(27101),vr=(0,H.createContext)(null),oo=Z(10708),Ao=Z(91359),Gi=Z(70349),Pr=Z(34143),Ye=Z(93500),bn=function(D){var we=D.activeTabOffset,Te=D.horizontal,Ne=D.rtl,Ve=D.indicator,Ze=Ve===void 0?{}:Ve,Pe=Ze.size,tt=Ze.align,nt=tt===void 0?"center":tt,Gt=(0,H.useState)(),Pt=(0,rt.Z)(Gt,2),en=Pt[0],fn=Pt[1],Gn=(0,H.useRef)(),ln=gt().useCallback(function(Ft){return typeof Pe=="function"?Pe(Ft):typeof Pe=="number"?Pe:Ft},[Pe]);function In(){Ye.Z.cancel(Gn.current)}return(0,H.useEffect)(function(){var Ft={};if(we)if(Te){Ft.width=ln(we.width);var zt=Ne?"right":"left";nt==="start"&&(Ft[zt]=we[zt]),nt==="center"&&(Ft[zt]=we[zt]+we.width/2,Ft.transform=Ne?"translateX(50%)":"translateX(-50%)"),nt==="end"&&(Ft[zt]=we[zt]+we.width,Ft.transform="translateX(-100%)")}else Ft.height=ln(we.height),nt==="start"&&(Ft.top=we.top),nt==="center"&&(Ft.top=we.top+we.height/2,Ft.transform="translateY(-50%)"),nt==="end"&&(Ft.top=we.top+we.height,Ft.transform="translateY(-100%)");return In(),Gn.current=(0,Ye.Z)(function(){var vn=en&&Ft&&Object.keys(Ft).every(function(pn){var Qt=Ft[pn],Yt=en[pn];return typeof Qt=="number"&&typeof Yt=="number"?Math.round(Qt)===Math.round(Yt):Qt===Yt});vn||fn(Ft)}),In},[JSON.stringify(we),Te,Ne,nt,ln]),{style:en}},er=bn,Hn={width:0,height:0,left:0,top:0};function Or(A,D,we){return(0,H.useMemo)(function(){for(var Te,Ne=new Map,Ve=D.get((Te=A[0])===null||Te===void 0?void 0:Te.key)||Hn,Ze=Ve.left+Ve.width,Pe=0;Pe<A.length;Pe+=1){var tt=A[Pe].key,nt=D.get(tt);if(!nt){var Gt;nt=D.get((Gt=A[Pe-1])===null||Gt===void 0?void 0:Gt.key)||Hn}var Pt=Ne.get(tt)||(0,Sn.Z)({},nt);Pt.right=Ze-Pt.left-Pt.width,Ne.set(tt,Pt)}return Ne},[A.map(function(Te){return Te.key}).join("_"),D,we])}function Un(A,D){var we=H.useRef(A),Te=H.useState({}),Ne=(0,rt.Z)(Te,2),Ve=Ne[1];function Ze(Pe){var tt=typeof Pe=="function"?Pe(we.current):Pe;tt!==we.current&&D(tt,we.current),we.current=tt,Ve({})}return[we.current,Ze]}var Sr=.1,Dt=.01,Tn=20,tr=Math.pow(.995,Tn);function Vn(A,D){var we=(0,H.useState)(),Te=(0,rt.Z)(we,2),Ne=Te[0],Ve=Te[1],Ze=(0,H.useState)(0),Pe=(0,rt.Z)(Ze,2),tt=Pe[0],nt=Pe[1],Gt=(0,H.useState)(0),Pt=(0,rt.Z)(Gt,2),en=Pt[0],fn=Pt[1],Gn=(0,H.useState)(),ln=(0,rt.Z)(Gn,2),In=ln[0],Ft=ln[1],zt=(0,H.useRef)();function vn(tn){var dn=tn.touches[0],Nt=dn.screenX,nn=dn.screenY;Ve({x:Nt,y:nn}),window.clearInterval(zt.current)}function pn(tn){if(Ne){var dn=tn.touches[0],Nt=dn.screenX,nn=dn.screenY;Ve({x:Nt,y:nn});var Wt=Nt-Ne.x,Kt=nn-Ne.y;D(Wt,Kt);var ar=Date.now();nt(ar),fn(ar-tt),Ft({x:Wt,y:Kt})}}function Qt(){if(Ne&&(Ve(null),Ft(null),In)){var tn=In.x/en,dn=In.y/en,Nt=Math.abs(tn),nn=Math.abs(dn);if(Math.max(Nt,nn)<Sr)return;var Wt=tn,Kt=dn;zt.current=window.setInterval(function(){if(Math.abs(Wt)<Dt&&Math.abs(Kt)<Dt){window.clearInterval(zt.current);return}Wt*=tr,Kt*=tr,D(Wt*Tn,Kt*Tn)},Tn)}}var Yt=(0,H.useRef)();function Xn(tn){var dn=tn.deltaX,Nt=tn.deltaY,nn=0,Wt=Math.abs(dn),Kt=Math.abs(Nt);Wt===Kt?nn=Yt.current==="x"?dn:Nt:Wt>Kt?(nn=dn,Yt.current="x"):(nn=Nt,Yt.current="y"),D(-nn,-nn)&&tn.preventDefault()}var An=(0,H.useRef)(null);An.current={onTouchStart:vn,onTouchMove:pn,onTouchEnd:Qt,onWheel:Xn},H.useEffect(function(){function tn(Wt){An.current.onTouchStart(Wt)}function dn(Wt){An.current.onTouchMove(Wt)}function Nt(Wt){An.current.onTouchEnd(Wt)}function nn(Wt){An.current.onWheel(Wt)}return document.addEventListener("touchmove",dn,{passive:!1}),document.addEventListener("touchend",Nt,{passive:!0}),A.current.addEventListener("touchstart",tn,{passive:!0}),A.current.addEventListener("wheel",nn,{passive:!1}),function(){document.removeEventListener("touchmove",dn),document.removeEventListener("touchend",Nt)}},[])}var ir=Z(82566);function pr(A){var D=(0,H.useState)(0),we=(0,rt.Z)(D,2),Te=we[0],Ne=we[1],Ve=(0,H.useRef)(0),Ze=(0,H.useRef)();return Ze.current=A,(0,ir.o)(function(){var Pe;(Pe=Ze.current)===null||Pe===void 0||Pe.call(Ze)},[Te]),function(){Ve.current===Te&&(Ve.current+=1,Ne(Ve.current))}}function rs(A){var D=(0,H.useRef)([]),we=(0,H.useState)({}),Te=(0,rt.Z)(we,2),Ne=Te[1],Ve=(0,H.useRef)(typeof A=="function"?A():A),Ze=pr(function(){var tt=Ve.current;D.current.forEach(function(nt){tt=nt(tt)}),D.current=[],Ve.current=tt,Ne({})});function Pe(tt){D.current.push(tt),Ze()}return[Ve.current,Pe]}var ya={width:0,height:0,left:0,top:0,right:0};function os(A,D,we,Te,Ne,Ve,Ze){var Pe=Ze.tabs,tt=Ze.tabPosition,nt=Ze.rtl,Gt,Pt,en;return["top","bottom"].includes(tt)?(Gt="width",Pt=nt?"right":"left",en=Math.abs(we)):(Gt="height",Pt="top",en=-we),(0,H.useMemo)(function(){if(!Pe.length)return[0,0];for(var fn=Pe.length,Gn=fn,ln=0;ln<fn;ln+=1){var In=A.get(Pe[ln].key)||ya;if(Math.floor(In[Pt]+In[Gt])>Math.floor(en+D)){Gn=ln-1;break}}for(var Ft=0,zt=fn-1;zt>=0;zt-=1){var vn=A.get(Pe[zt].key)||ya;if(vn[Pt]<en){Ft=zt+1;break}}return Ft>=Gn?[0,0]:[Ft,Gn]},[A,D,Te,Ne,Ve,en,tt,Pe.map(function(fn){return fn.key}).join("_"),nt])}function Ea(A){var D;return A instanceof Map?(D={},A.forEach(function(we,Te){D[Te]=we})):D=A,JSON.stringify(D)}var Tr="TABS_DQ";function ba(A){return String(A).replace(/"/g,Tr)}function si(A,D,we,Te){return!(!we||Te||A===!1||A===void 0&&(D===!1||D===null))}var Pi=H.forwardRef(function(A,D){var we=A.prefixCls,Te=A.editable,Ne=A.locale,Ve=A.style;return!Te||Te.showAdd===!1?null:H.createElement("button",{ref:D,type:"button",className:"".concat(we,"-nav-add"),style:Ve,"aria-label":(Ne==null?void 0:Ne.addAriaLabel)||"Add tab",onClick:function(Pe){Te.onEdit("add",{event:Pe})}},Te.addIcon||"+")}),ui=Pi,xa=H.forwardRef(function(A,D){var we=A.position,Te=A.prefixCls,Ne=A.extra;if(!Ne)return null;var Ve,Ze={};return(0,Bn.Z)(Ne)==="object"&&!H.isValidElement(Ne)?Ze=Ne:Ze.right=Ne,we==="right"&&(Ve=Ze.right),we==="left"&&(Ve=Ze.left),Ve?H.createElement("div",{className:"".concat(Te,"-extra-content"),ref:D},Ve):null}),ci=xa,fi=Z(66970),mr=Z(6423),io=Z(84895),li=H.forwardRef(function(A,D){var we=A.prefixCls,Te=A.id,Ne=A.tabs,Ve=A.locale,Ze=A.mobile,Pe=A.more,tt=Pe===void 0?{}:Pe,nt=A.style,Gt=A.className,Pt=A.editable,en=A.tabBarGutter,fn=A.rtl,Gn=A.removeAriaLabel,ln=A.onTabClick,In=A.getPopupContainer,Ft=A.popupClassName,zt=(0,H.useState)(!1),vn=(0,rt.Z)(zt,2),pn=vn[0],Qt=vn[1],Yt=(0,H.useState)(null),Xn=(0,rt.Z)(Yt,2),An=Xn[0],tn=Xn[1],dn=tt.icon,Nt=dn===void 0?"More":dn,nn="".concat(Te,"-more-popup"),Wt="".concat(we,"-dropdown"),Kt=An!==null?"".concat(nn,"-").concat(An):null,ar=Ve==null?void 0:Ve.dropdownAriaLabel;function yr(Bt,ur){Bt.preventDefault(),Bt.stopPropagation(),Pt.onEdit("remove",{key:ur,event:Bt})}var Lr=H.createElement(mr.ZP,{onClick:function(ur){var Er=ur.key,br=ur.domEvent;ln(Er,br),Qt(!1)},prefixCls:"".concat(Wt,"-menu"),id:nn,tabIndex:-1,role:"listbox","aria-activedescendant":Kt,selectedKeys:[An],"aria-label":ar!==void 0?ar:"expanded dropdown"},Ne.map(function(Bt){var ur=Bt.closable,Er=Bt.disabled,br=Bt.closeIcon,xr=Bt.key,eo=Bt.label,$r=si(ur,br,Pt,Er);return H.createElement(mr.sN,{key:xr,id:"".concat(nn,"-").concat(xr),role:"option","aria-controls":Te&&"".concat(Te,"-panel-").concat(xr),disabled:Er},H.createElement("span",null,eo),$r&&H.createElement("button",{type:"button","aria-label":Gn||"remove",tabIndex:0,className:"".concat(Wt,"-menu-item-remove"),onClick:function(yo){yo.stopPropagation(),yr(yo,xr)}},br||Pt.removeIcon||"\xD7"))}));function Fr(Bt){for(var ur=Ne.filter(function($r){return!$r.disabled}),Er=ur.findIndex(function($r){return $r.key===An})||0,br=ur.length,xr=0;xr<br;xr+=1){Er=(Er+Bt+br)%br;var eo=ur[Er];if(!eo.disabled){tn(eo.key);return}}}function Zt(Bt){var ur=Bt.which;if(!pn){[io.Z.DOWN,io.Z.SPACE,io.Z.ENTER].includes(ur)&&(Qt(!0),Bt.preventDefault());return}switch(ur){case io.Z.UP:Fr(-1),Bt.preventDefault();break;case io.Z.DOWN:Fr(1),Bt.preventDefault();break;case io.Z.ESC:Qt(!1);break;case io.Z.SPACE:case io.Z.ENTER:An!==null&&ln(An,Bt);break}}(0,H.useEffect)(function(){var Bt=document.getElementById(Kt);Bt&&Bt.scrollIntoView&&Bt.scrollIntoView(!1)},[An]),(0,H.useEffect)(function(){pn||tn(null)},[pn]);var so=(0,At.Z)({},fn?"marginRight":"marginLeft",en);Ne.length||(so.visibility="hidden",so.order=1);var Jr=an()((0,At.Z)({},"".concat(Wt,"-rtl"),fn)),sr=Ze?null:H.createElement(fi.Z,(0,xt.Z)({prefixCls:Wt,overlay:Lr,visible:Ne.length?pn:!1,onVisibleChange:Qt,overlayClassName:an()(Jr,Ft),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:In},tt),H.createElement("button",{type:"button",className:"".concat(we,"-nav-more"),style:so,"aria-haspopup":"listbox","aria-controls":nn,id:"".concat(Te,"-more"),"aria-expanded":pn,onKeyDown:Zt},Nt));return H.createElement("div",{className:an()("".concat(we,"-nav-operations"),Gt),style:nt,ref:D},sr,H.createElement(ui,{prefixCls:we,locale:Ve,editable:Pt}))}),_a=H.memo(li,function(A,D){return D.tabMoving}),di=function(D){var we=D.prefixCls,Te=D.id,Ne=D.active,Ve=D.focus,Ze=D.tab,Pe=Ze.key,tt=Ze.label,nt=Ze.disabled,Gt=Ze.closeIcon,Pt=Ze.icon,en=D.closable,fn=D.renderWrapper,Gn=D.removeAriaLabel,ln=D.editable,In=D.onClick,Ft=D.onFocus,zt=D.onBlur,vn=D.onKeyDown,pn=D.onMouseDown,Qt=D.onMouseUp,Yt=D.style,Xn=D.tabCount,An=D.currentPosition,tn="".concat(we,"-tab"),dn=si(en,Gt,ln,nt);function Nt(yr){nt||In(yr)}function nn(yr){yr.preventDefault(),yr.stopPropagation(),ln.onEdit("remove",{key:Pe,event:yr})}var Wt=H.useMemo(function(){return Pt&&typeof tt=="string"?H.createElement("span",null,tt):tt},[tt,Pt]),Kt=H.useRef(null);H.useEffect(function(){Ve&&Kt.current&&Kt.current.focus()},[Ve]);var ar=H.createElement("div",{key:Pe,"data-node-key":ba(Pe),className:an()(tn,(0,At.Z)((0,At.Z)((0,At.Z)((0,At.Z)({},"".concat(tn,"-with-remove"),dn),"".concat(tn,"-active"),Ne),"".concat(tn,"-disabled"),nt),"".concat(tn,"-focus"),Ve)),style:Yt,onClick:Nt},H.createElement("div",{ref:Kt,role:"tab","aria-selected":Ne,id:Te&&"".concat(Te,"-tab-").concat(Pe),className:"".concat(tn,"-btn"),"aria-controls":Te&&"".concat(Te,"-panel-").concat(Pe),"aria-disabled":nt,tabIndex:nt?null:Ne?0:-1,onClick:function(Lr){Lr.stopPropagation(),Nt(Lr)},onKeyDown:vn,onMouseDown:pn,onMouseUp:Qt,onFocus:Ft,onBlur:zt},Ve&&H.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"Tab ".concat(An," of ").concat(Xn)),Pt&&H.createElement("span",{className:"".concat(tn,"-icon")},Pt),tt&&Wt),dn&&H.createElement("button",{type:"button",role:"tab","aria-label":Gn||"remove",tabIndex:Ne?0:-1,className:"".concat(tn,"-remove"),onClick:function(Lr){Lr.stopPropagation(),nn(Lr)}},Gt||ln.removeIcon||"\xD7"));return fn?fn(ar):ar},I=di,hi=function(D,we){var Te=D.offsetWidth,Ne=D.offsetHeight,Ve=D.offsetTop,Ze=D.offsetLeft,Pe=D.getBoundingClientRect(),tt=Pe.width,nt=Pe.height,Gt=Pe.left,Pt=Pe.top;return Math.abs(tt-Te)<1?[tt,nt,Gt-we.left,Pt-we.top]:[Te,Ne,Ze,Ve]},kn=function(D){var we=D.current||{},Te=we.offsetWidth,Ne=Te===void 0?0:Te,Ve=we.offsetHeight,Ze=Ve===void 0?0:Ve;if(D.current){var Pe=D.current.getBoundingClientRect(),tt=Pe.width,nt=Pe.height;if(Math.abs(tt-Ne)<1)return[tt,nt]}return[Ne,Ze]},Bo=function(D,we){return D[we?0:1]},Fi=H.forwardRef(function(A,D){var we=A.className,Te=A.style,Ne=A.id,Ve=A.animated,Ze=A.activeKey,Pe=A.rtl,tt=A.extra,nt=A.editable,Gt=A.locale,Pt=A.tabPosition,en=A.tabBarGutter,fn=A.children,Gn=A.onTabClick,ln=A.onTabScroll,In=A.indicator,Ft=H.useContext(vr),zt=Ft.prefixCls,vn=Ft.tabs,pn=(0,H.useRef)(null),Qt=(0,H.useRef)(null),Yt=(0,H.useRef)(null),Xn=(0,H.useRef)(null),An=(0,H.useRef)(null),tn=(0,H.useRef)(null),dn=(0,H.useRef)(null),Nt=Pt==="top"||Pt==="bottom",nn=Un(0,function(gn,wt){Nt&&ln&&ln({direction:gn>wt?"left":"right"})}),Wt=(0,rt.Z)(nn,2),Kt=Wt[0],ar=Wt[1],yr=Un(0,function(gn,wt){!Nt&&ln&&ln({direction:gn>wt?"top":"bottom"})}),Lr=(0,rt.Z)(yr,2),Fr=Lr[0],Zt=Lr[1],so=(0,H.useState)([0,0]),Jr=(0,rt.Z)(so,2),sr=Jr[0],Bt=Jr[1],ur=(0,H.useState)([0,0]),Er=(0,rt.Z)(ur,2),br=Er[0],xr=Er[1],eo=(0,H.useState)([0,0]),$r=(0,rt.Z)(eo,2),No=$r[0],yo=$r[1],Ro=(0,H.useState)([0,0]),Xr=(0,rt.Z)(Ro,2),mn=Xr[0],zr=Xr[1],$o=rs(new Map),ju=(0,rt.Z)($o,2),Jc=ju[0],Yu=ju[1],Aa=Or(vn,Jc,br[0]),Na=Bo(sr,Nt),$i=Bo(br,Nt),us=Bo(No,Nt),Xo=Bo(mn,Nt),Ws=Math.floor(Na)<Math.floor($i+us),lo=Ws?Na-Xo:Na-us,Xi="".concat(zt,"-nav-operations-hidden"),Do=0,Wr=0;Nt&&Pe?(Do=0,Wr=Math.max(0,$i-lo)):(Do=Math.min(0,lo-$i),Wr=0);function Ra(gn){return gn<Do?Do:gn>Wr?Wr:gn}var Co=(0,H.useRef)(null),Ku=(0,H.useState)(),Wo=(0,rt.Z)(Ku,2),Wi=Wo[0],qu=Wo[1];function Hs(){qu(Date.now())}function Zs(){Co.current&&clearTimeout(Co.current)}Vn(Xn,function(gn,wt){function xn(Nn,Hr){Nn(function(jn){var bi=Ra(jn+Hr);return bi})}return Ws?(Nt?xn(ar,gn):xn(Zt,wt),Zs(),Hs(),!0):!1}),(0,H.useEffect)(function(){return Zs(),Wi&&(Co.current=setTimeout(function(){qu(0)},100)),Zs},[Wi]);var js=os(Aa,lo,Nt?Kt:Fr,$i,us,Xo,(0,Sn.Z)((0,Sn.Z)({},A),{},{tabs:vn})),Ys=(0,rt.Z)(js,2),Qu=Ys[0],Ks=Ys[1],Dn=(0,Gi.Z)(function(){var gn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ze,wt=Aa.get(gn)||{width:0,height:0,left:0,right:0,top:0};if(Nt){var xn=Kt;Pe?wt.right<Kt?xn=wt.right:wt.right+wt.width>Kt+lo&&(xn=wt.right+wt.width-lo):wt.left<-Kt?xn=-wt.left:wt.left+wt.width>-Kt+lo&&(xn=-(wt.left+wt.width-lo)),Zt(0),ar(Ra(xn))}else{var Nn=Fr;wt.top<-Fr?Nn=-wt.top:wt.top+wt.height>-Fr+lo&&(Nn=-(wt.top+wt.height-lo)),ar(0),Zt(Ra(Nn))}}),Da=(0,H.useState)(),qs=(0,rt.Z)(Da,2),cr=qs[0],Ho=qs[1],Ca=(0,H.useState)(!1),Oo=(0,rt.Z)(Ca,2),Qs=Oo[0],pi=Oo[1],Zn=vn.filter(function(gn){return!gn.disabled}).map(function(gn){return gn.key}),Eo=function(wt){var xn=Zn.indexOf(cr||Ze),Nn=Zn.length,Hr=(xn+wt+Nn)%Nn,jn=Zn[Hr];Ho(jn)},Zo=function(wt){var xn=wt.code,Nn=Pe&&Nt,Hr=Zn[0],jn=Zn[Zn.length-1];switch(xn){case"ArrowLeft":{Nt&&Eo(Nn?1:-1);break}case"ArrowRight":{Nt&&Eo(Nn?-1:1);break}case"ArrowUp":{wt.preventDefault(),Nt||Eo(-1);break}case"ArrowDown":{wt.preventDefault(),Nt||Eo(1);break}case"Home":{wt.preventDefault(),Ho(Hr);break}case"End":{wt.preventDefault(),Ho(jn);break}case"Enter":case"Space":{wt.preventDefault(),Gn(cr!=null?cr:Ze,wt);break}case"Backspace":case"Delete":{var bi=Zn.indexOf(cr),_r=vn.find(function(bo){return bo.key===cr}),Zi=si(_r==null?void 0:_r.closable,_r==null?void 0:_r.closeIcon,nt,_r==null?void 0:_r.disabled);Zi&&(wt.preventDefault(),wt.stopPropagation(),nt.onEdit("remove",{key:cr,event:wt}),bi===Zn.length-1?Eo(-1):Eo(1));break}}},mi={};Nt?mi[Pe?"marginRight":"marginLeft"]=en:mi.marginTop=en;var Oa=vn.map(function(gn,wt){var xn=gn.key;return H.createElement(I,{id:Ne,prefixCls:zt,key:xn,tab:gn,style:wt===0?void 0:mi,closable:gn.closable,editable:nt,active:xn===Ze,focus:xn===cr,renderWrapper:fn,removeAriaLabel:Gt==null?void 0:Gt.removeAriaLabel,tabCount:Zn.length,currentPosition:wt+1,onClick:function(Hr){Gn(xn,Hr)},onKeyDown:Zo,onFocus:function(){Qs||Ho(xn),Dn(xn),Hs(),Xn.current&&(Pe||(Xn.current.scrollLeft=0),Xn.current.scrollTop=0)},onBlur:function(){Ho(void 0)},onMouseDown:function(){pi(!0)},onMouseUp:function(){pi(!1)}})}),cs=function(){return Yu(function(){var wt,xn=new Map,Nn=(wt=An.current)===null||wt===void 0?void 0:wt.getBoundingClientRect();return vn.forEach(function(Hr){var jn,bi=Hr.key,_r=(jn=An.current)===null||jn===void 0?void 0:jn.querySelector('[data-node-key="'.concat(ba(bi),'"]'));if(_r){var Zi=hi(_r,Nn),bo=(0,rt.Z)(Zi,4),ji=bo[0],eu=bo[1],tu=bo[2],tf=bo[3];xn.set(bi,{width:ji,height:eu,left:tu,top:tf})}}),xn})};(0,H.useEffect)(function(){cs()},[vn.map(function(gn){return gn.key}).join("_")]);var fs=pr(function(){var gn=kn(pn),wt=kn(Qt),xn=kn(Yt);Bt([gn[0]-wt[0]-xn[0],gn[1]-wt[1]-xn[1]]);var Nn=kn(dn);yo(Nn);var Hr=kn(tn);zr(Hr);var jn=kn(An);xr([jn[0]-Nn[0],jn[1]-Nn[1]]),cs()}),ef=vn.slice(0,Qu),Js=vn.slice(Ks+1),Lo=[].concat((0,oo.Z)(ef),(0,oo.Z)(Js)),Hi=Aa.get(Ze),ls=er({activeTabOffset:Hi,horizontal:Nt,indicator:In,rtl:Pe}),La=ls.style;(0,H.useEffect)(function(){Dn()},[Ze,Do,Wr,Ea(Hi),Ea(Aa),Nt]),(0,H.useEffect)(function(){fs()},[Pe]);var Mo=!!Lo.length,jo="".concat(zt,"-nav-wrap"),gi,yi,Ei,ds;return Nt?Pe?(yi=Kt>0,gi=Kt!==Wr):(gi=Kt<0,yi=Kt!==Do):(Ei=Fr<0,ds=Fr!==Do),H.createElement(Ao.Z,{onResize:fs},H.createElement("div",{ref:(0,Pr.x1)(D,pn),role:"tablist","aria-orientation":Nt?"horizontal":"vertical",className:an()("".concat(zt,"-nav"),we),style:Te,onKeyDown:function(){Hs()}},H.createElement(ci,{ref:Qt,position:"left",extra:tt,prefixCls:zt}),H.createElement(Ao.Z,{onResize:fs},H.createElement("div",{className:an()(jo,(0,At.Z)((0,At.Z)((0,At.Z)((0,At.Z)({},"".concat(jo,"-ping-left"),gi),"".concat(jo,"-ping-right"),yi),"".concat(jo,"-ping-top"),Ei),"".concat(jo,"-ping-bottom"),ds)),ref:Xn},H.createElement(Ao.Z,{onResize:fs},H.createElement("div",{ref:An,className:"".concat(zt,"-nav-list"),style:{transform:"translate(".concat(Kt,"px, ").concat(Fr,"px)"),transition:Wi?"none":void 0}},Oa,H.createElement(ui,{ref:dn,prefixCls:zt,locale:Gt,editable:nt,style:(0,Sn.Z)((0,Sn.Z)({},Oa.length===0?void 0:mi),{},{visibility:Mo?"hidden":null})}),H.createElement("div",{className:an()("".concat(zt,"-ink-bar"),(0,At.Z)({},"".concat(zt,"-ink-bar-animated"),Ve.inkBar)),style:La}))))),H.createElement(_a,(0,xt.Z)({},A,{removeAriaLabel:Gt==null?void 0:Gt.removeAriaLabel,ref:tn,prefixCls:zt,tabs:Lo,className:!Mo&&Xi,tabMoving:!!Wi})),H.createElement(ci,{ref:Yt,position:"right",extra:tt,prefixCls:zt})))}),ao=Fi,wa=H.forwardRef(function(A,D){var we=A.prefixCls,Te=A.className,Ne=A.style,Ve=A.id,Ze=A.active,Pe=A.tabKey,tt=A.children;return H.createElement("div",{id:Ve&&"".concat(Ve,"-panel-").concat(Pe),role:"tabpanel",tabIndex:Ze?0:-1,"aria-labelledby":Ve&&"".concat(Ve,"-tab-").concat(Pe),"aria-hidden":!Ze,style:Ne,className:an()(we,Ze&&"".concat(we,"-active"),Te),ref:D},tt)}),po=wa,Sa=["renderTabBar"],zi=["label","key"],is=function(D){var we=D.renderTabBar,Te=(0,Mt.Z)(D,Sa),Ne=H.useContext(vr),Ve=Ne.tabs;if(we){var Ze=(0,Sn.Z)((0,Sn.Z)({},Te),{},{panes:Ve.map(function(Pe){var tt=Pe.label,nt=Pe.key,Gt=(0,Mt.Z)(Pe,zi);return H.createElement(po,(0,xt.Z)({tab:tt,key:nt,tabKey:nt},Gt))})});return we(Ze,ao)}return H.createElement(ao,Te)},gr=is,Rn=Z(54755),mo=["key","forceRender","style","className","destroyInactiveTabPane"],Vr=function(D){var we=D.id,Te=D.activeKey,Ne=D.animated,Ve=D.tabPosition,Ze=D.destroyInactiveTabPane,Pe=H.useContext(vr),tt=Pe.prefixCls,nt=Pe.tabs,Gt=Ne.tabPane,Pt="".concat(tt,"-tabpane");return H.createElement("div",{className:an()("".concat(tt,"-content-holder"))},H.createElement("div",{className:an()("".concat(tt,"-content"),"".concat(tt,"-content-").concat(Ve),(0,At.Z)({},"".concat(tt,"-content-animated"),Gt))},nt.map(function(en){var fn=en.key,Gn=en.forceRender,ln=en.style,In=en.className,Ft=en.destroyInactiveTabPane,zt=(0,Mt.Z)(en,mo),vn=fn===Te;return H.createElement(Rn.ZP,(0,xt.Z)({key:fn,visible:vn,forceRender:Gn,removeOnLeave:!!(Ze||Ft),leavedClassName:"".concat(Pt,"-hidden")},Ne.tabPaneMotion),function(pn,Qt){var Yt=pn.style,Xn=pn.className;return H.createElement(po,(0,xt.Z)({},zt,{prefixCls:Pt,id:we,tabKey:fn,animated:Gt,active:vn,style:(0,Sn.Z)((0,Sn.Z)({},ln),Yt),className:an()(In,Xn),ref:Qt}))})})))},go=Vr,qc=Z(96112);function Pu(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},D;return A===!1?D={inkBar:!1,tabPane:!1}:A===!0?D={inkBar:!0,tabPane:!1}:D=(0,Sn.Z)({inkBar:!0},(0,Bn.Z)(A)==="object"?A:{}),D.tabPaneMotion&&D.tabPane===void 0&&(D.tabPane=!0),!D.tabPaneMotion&&D.tabPane&&(D.tabPane=!1),D}var ks=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],Gs=0,Uo=H.forwardRef(function(A,D){var we=A.id,Te=A.prefixCls,Ne=Te===void 0?"rc-tabs":Te,Ve=A.className,Ze=A.items,Pe=A.direction,tt=A.activeKey,nt=A.defaultActiveKey,Gt=A.editable,Pt=A.animated,en=A.tabPosition,fn=en===void 0?"top":en,Gn=A.tabBarGutter,ln=A.tabBarStyle,In=A.tabBarExtraContent,Ft=A.locale,zt=A.more,vn=A.destroyInactiveTabPane,pn=A.renderTabBar,Qt=A.onChange,Yt=A.onTabClick,Xn=A.onTabScroll,An=A.getPopupContainer,tn=A.popupClassName,dn=A.indicator,Nt=(0,Mt.Z)(A,ks),nn=H.useMemo(function(){return(Ze||[]).filter(function(mn){return mn&&(0,Bn.Z)(mn)==="object"&&"key"in mn})},[Ze]),Wt=Pe==="rtl",Kt=Pu(Pt),ar=(0,H.useState)(!1),yr=(0,rt.Z)(ar,2),Lr=yr[0],Fr=yr[1];(0,H.useEffect)(function(){Fr((0,Jn.Z)())},[]);var Zt=(0,En.Z)(function(){var mn;return(mn=nn[0])===null||mn===void 0?void 0:mn.key},{value:tt,defaultValue:nt}),so=(0,rt.Z)(Zt,2),Jr=so[0],sr=so[1],Bt=(0,H.useState)(function(){return nn.findIndex(function(mn){return mn.key===Jr})}),ur=(0,rt.Z)(Bt,2),Er=ur[0],br=ur[1];(0,H.useEffect)(function(){var mn=nn.findIndex(function($o){return $o.key===Jr});if(mn===-1){var zr;mn=Math.max(0,Math.min(Er,nn.length-1)),sr((zr=nn[mn])===null||zr===void 0?void 0:zr.key)}br(mn)},[nn.map(function(mn){return mn.key}).join("_"),Jr,Er]);var xr=(0,En.Z)(null,{value:we}),eo=(0,rt.Z)(xr,2),$r=eo[0],No=eo[1];(0,H.useEffect)(function(){we||(No("rc-tabs-".concat(Gs)),Gs+=1)},[]);function yo(mn,zr){Yt==null||Yt(mn,zr);var $o=mn!==Jr;sr(mn),$o&&(Qt==null||Qt(mn))}var Ro={id:$r,activeKey:Jr,animated:Kt,tabPosition:fn,rtl:Wt,mobile:Lr},Xr=(0,Sn.Z)((0,Sn.Z)({},Ro),{},{editable:Gt,locale:Ft,more:zt,tabBarGutter:Gn,onTabClick:yo,onTabScroll:Xn,extra:In,style:ln,panes:null,getPopupContainer:An,popupClassName:tn,indicator:dn});return H.createElement(vr.Provider,{value:{tabs:nn,prefixCls:Ne}},H.createElement("div",(0,xt.Z)({ref:D,id:we,className:an()(Ne,"".concat(Ne,"-").concat(fn),(0,At.Z)((0,At.Z)((0,At.Z)({},"".concat(Ne,"-mobile"),Lr),"".concat(Ne,"-editable"),Gt),"".concat(Ne,"-rtl"),Wt),Ve)},Nt),H.createElement(gr,(0,xt.Z)({},Xr,{renderTabBar:pn})),H.createElement(go,(0,xt.Z)({destroyInactiveTabPane:vn},Ro,{animated:Kt}))))}),vi=Uo,Bi=vi,Ps=Z(57626),Ir=Z(15713),Ui=Z(10695),Ta=Z(29456);const Vo={motionAppear:!1,motionEnter:!0,motionLeave:!0};function Ia(A,D={inkBar:!0,tabPane:!1}){let we;return D===!1?we={inkBar:!1,tabPane:!1}:D===!0?we={inkBar:!0,tabPane:!0}:we=Object.assign({inkBar:!0},typeof D=="object"?D:{}),we.tabPane&&(we.tabPaneMotion=Object.assign(Object.assign({},Vo),{motionName:(0,Ta.m)(A,"switch")})),we}var Vi=Z(37941),Fs=function(A,D){var we={};for(var Te in A)Object.prototype.hasOwnProperty.call(A,Te)&&D.indexOf(Te)<0&&(we[Te]=A[Te]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ne=0,Te=Object.getOwnPropertySymbols(A);Ne<Te.length;Ne++)D.indexOf(Te[Ne])<0&&Object.prototype.propertyIsEnumerable.call(A,Te[Ne])&&(we[Te[Ne]]=A[Te[Ne]]);return we};function zs(A){return A.filter(D=>D)}function Fu(A,D){if(A)return A.map(Te=>{var Ne;const Ve=(Ne=Te.destroyOnHidden)!==null&&Ne!==void 0?Ne:Te.destroyInactiveTabPane;return Object.assign(Object.assign({},Te),{destroyInactiveTabPane:Ve})});const we=(0,Vi.Z)(D).map(Te=>{if(H.isValidElement(Te)){const{key:Ne,props:Ve}=Te,Ze=Ve||{},{tab:Pe}=Ze,tt=Fs(Ze,["tab"]);return Object.assign(Object.assign({key:String(Ne)},tt),{label:Pe})}return null});return zs(we)}var Xt=Z(53837),fo=Z(77865),$n=Z(90229),Bs=Z(4079),Us=Z(49106),as=A=>{const{componentCls:D,motionDurationSlow:we}=A;return[{[D]:{[`${D}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${we}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${we}`}}}}},[(0,Us.oN)(A,"slide-up"),(0,Us.oN)(A,"slide-down")]]};const zu=A=>{const{componentCls:D,tabsCardPadding:we,cardBg:Te,cardGutter:Ne,colorBorderSecondary:Ve,itemSelectedColor:Ze}=A;return{[`${D}-card`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{margin:0,padding:we,background:Te,border:`${(0,Xt.bf)(A.lineWidth)} ${A.lineType} ${Ve}`,transition:`all ${A.motionDurationSlow} ${A.motionEaseInOut}`},[`${D}-tab-active`]:{color:Ze,background:A.colorBgContainer},[`${D}-tab-focus:has(${D}-tab-btn:focus-visible)`]:(0,fo.oN)(A,-3),[`& ${D}-tab${D}-tab-focus ${D}-tab-btn:focus-visible`]:{outline:"none"},[`${D}-ink-bar`]:{visibility:"hidden"}},[`&${D}-top, &${D}-bottom`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab + ${D}-tab`]:{marginLeft:{_skip_check_:!0,value:(0,Xt.bf)(Ne)}}}},[`&${D}-top`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{borderRadius:`${(0,Xt.bf)(A.borderRadiusLG)} ${(0,Xt.bf)(A.borderRadiusLG)} 0 0`},[`${D}-tab-active`]:{borderBottomColor:A.colorBgContainer}}},[`&${D}-bottom`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{borderRadius:`0 0 ${(0,Xt.bf)(A.borderRadiusLG)} ${(0,Xt.bf)(A.borderRadiusLG)}`},[`${D}-tab-active`]:{borderTopColor:A.colorBgContainer}}},[`&${D}-left, &${D}-right`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab + ${D}-tab`]:{marginTop:(0,Xt.bf)(Ne)}}},[`&${D}-left`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{borderRadius:{_skip_check_:!0,value:`${(0,Xt.bf)(A.borderRadiusLG)} 0 0 ${(0,Xt.bf)(A.borderRadiusLG)}`}},[`${D}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:A.colorBgContainer}}}},[`&${D}-right`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${(0,Xt.bf)(A.borderRadiusLG)} ${(0,Xt.bf)(A.borderRadiusLG)} 0`}},[`${D}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:A.colorBgContainer}}}}}}},Bu=A=>{const{componentCls:D,itemHoverColor:we,dropdownEdgeChildVerticalPadding:Te}=A;return{[`${D}-dropdown`]:Object.assign(Object.assign({},(0,fo.Wf)(A)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:A.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${D}-dropdown-menu`]:{maxHeight:A.tabsDropdownHeight,margin:0,padding:`${(0,Xt.bf)(Te)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:A.colorBgContainer,backgroundClip:"padding-box",borderRadius:A.borderRadiusLG,outline:"none",boxShadow:A.boxShadowSecondary,"&-item":Object.assign(Object.assign({},fo.vS),{display:"flex",alignItems:"center",minWidth:A.tabsDropdownWidth,margin:0,padding:`${(0,Xt.bf)(A.paddingXXS)} ${(0,Xt.bf)(A.paddingSM)}`,color:A.colorText,fontWeight:"normal",fontSize:A.fontSize,lineHeight:A.lineHeight,cursor:"pointer",transition:`all ${A.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:A.marginSM},color:A.colorIcon,fontSize:A.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:we}},"&:hover":{background:A.controlItemBgHover},"&-disabled":{"&, &:hover":{color:A.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},Vs=A=>{const{componentCls:D,margin:we,colorBorderSecondary:Te,horizontalMargin:Ne,verticalItemPadding:Ve,verticalItemMargin:Ze,calc:Pe}=A;return{[`${D}-top, ${D}-bottom`]:{flexDirection:"column",[`> ${D}-nav, > div > ${D}-nav`]:{margin:Ne,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${(0,Xt.bf)(A.lineWidth)} ${A.lineType} ${Te}`,content:"''"},[`${D}-ink-bar`]:{height:A.lineWidthBold,"&-animated":{transition:`width ${A.motionDurationSlow}, left ${A.motionDurationSlow},
            right ${A.motionDurationSlow}`}},[`${D}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:A.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:A.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:A.boxShadowTabsOverflowRight},[`&${D}-nav-wrap-ping-left::before`]:{opacity:1},[`&${D}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${D}-top`]:{[`> ${D}-nav,
        > div > ${D}-nav`]:{"&::before":{bottom:0},[`${D}-ink-bar`]:{bottom:0}}},[`${D}-bottom`]:{[`> ${D}-nav, > div > ${D}-nav`]:{order:1,marginTop:we,marginBottom:0,"&::before":{top:0},[`${D}-ink-bar`]:{top:0}},[`> ${D}-content-holder, > div > ${D}-content-holder`]:{order:0}},[`${D}-left, ${D}-right`]:{[`> ${D}-nav, > div > ${D}-nav`]:{flexDirection:"column",minWidth:Pe(A.controlHeight).mul(1.25).equal(),[`${D}-tab`]:{padding:Ve,textAlign:"center"},[`${D}-tab + ${D}-tab`]:{margin:Ze},[`${D}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:A.controlHeight},"&::before":{top:0,boxShadow:A.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:A.boxShadowTabsOverflowBottom},[`&${D}-nav-wrap-ping-top::before`]:{opacity:1},[`&${D}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${D}-ink-bar`]:{width:A.lineWidthBold,"&-animated":{transition:`height ${A.motionDurationSlow}, top ${A.motionDurationSlow}`}},[`${D}-nav-list, ${D}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${D}-left`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${D}-content-holder, > div > ${D}-content-holder`]:{marginLeft:{_skip_check_:!0,value:(0,Xt.bf)(Pe(A.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${(0,Xt.bf)(A.lineWidth)} ${A.lineType} ${A.colorBorder}`},[`> ${D}-content > ${D}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:A.paddingLG}}}},[`${D}-right`]:{[`> ${D}-nav, > div > ${D}-nav`]:{order:1,[`${D}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${D}-content-holder, > div > ${D}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:Pe(A.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${(0,Xt.bf)(A.lineWidth)} ${A.lineType} ${A.colorBorder}`},[`> ${D}-content > ${D}-tabpane`]:{paddingRight:{_skip_check_:!0,value:A.paddingLG}}}}}},Uu=A=>{const{componentCls:D,cardPaddingSM:we,cardPaddingLG:Te,cardHeightSM:Ne,cardHeightLG:Ve,horizontalItemPaddingSM:Ze,horizontalItemPaddingLG:Pe}=A;return{[D]:{"&-small":{[`> ${D}-nav`]:{[`${D}-tab`]:{padding:Ze,fontSize:A.titleFontSizeSM}}},"&-large":{[`> ${D}-nav`]:{[`${D}-tab`]:{padding:Pe,fontSize:A.titleFontSizeLG,lineHeight:A.lineHeightLG}}}},[`${D}-card`]:{[`&${D}-small`]:{[`> ${D}-nav`]:{[`${D}-tab`]:{padding:we},[`${D}-nav-add`]:{minWidth:Ne,minHeight:Ne}},[`&${D}-bottom`]:{[`> ${D}-nav ${D}-tab`]:{borderRadius:`0 0 ${(0,Xt.bf)(A.borderRadius)} ${(0,Xt.bf)(A.borderRadius)}`}},[`&${D}-top`]:{[`> ${D}-nav ${D}-tab`]:{borderRadius:`${(0,Xt.bf)(A.borderRadius)} ${(0,Xt.bf)(A.borderRadius)} 0 0`}},[`&${D}-right`]:{[`> ${D}-nav ${D}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${(0,Xt.bf)(A.borderRadius)} ${(0,Xt.bf)(A.borderRadius)} 0`}}},[`&${D}-left`]:{[`> ${D}-nav ${D}-tab`]:{borderRadius:{_skip_check_:!0,value:`${(0,Xt.bf)(A.borderRadius)} 0 0 ${(0,Xt.bf)(A.borderRadius)}`}}}},[`&${D}-large`]:{[`> ${D}-nav`]:{[`${D}-tab`]:{padding:Te},[`${D}-nav-add`]:{minWidth:Ve,minHeight:Ve}}}}}},Vu=A=>{const{componentCls:D,itemActiveColor:we,itemHoverColor:Te,iconCls:Ne,tabsHorizontalItemMargin:Ve,horizontalItemPadding:Ze,itemSelectedColor:Pe,itemColor:tt}=A,nt=`${D}-tab`;return{[nt]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:Ze,fontSize:A.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:tt,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:we}},"&-btn":{outline:"none",transition:`all ${A.motionDurationSlow}`,[`${nt}-icon:not(:last-child)`]:{marginInlineEnd:A.marginSM}},"&-remove":Object.assign({flex:"none",marginRight:{_skip_check_:!0,value:A.calc(A.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:A.marginXS},color:A.colorIcon,fontSize:A.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${A.motionDurationSlow}`,"&:hover":{color:A.colorTextHeading}},(0,fo.Qy)(A)),"&:hover":{color:Te},[`&${nt}-active ${nt}-btn`]:{color:Pe,textShadow:A.tabsActiveTextShadow},[`&${nt}-focus ${nt}-btn:focus-visible`]:(0,fo.oN)(A),[`&${nt}-disabled`]:{color:A.colorTextDisabled,cursor:"not-allowed"},[`&${nt}-disabled ${nt}-btn, &${nt}-disabled ${D}-remove`]:{"&:focus, &:active":{color:A.colorTextDisabled}},[`& ${nt}-remove ${Ne}`]:{margin:0},[`${Ne}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:A.marginSM}}},[`${nt} + ${nt}`]:{margin:{_skip_check_:!0,value:Ve}}}},$u=A=>{const{componentCls:D,tabsHorizontalItemMarginRTL:we,iconCls:Te,cardGutter:Ne,calc:Ve}=A;return{[`${D}-rtl`]:{direction:"rtl",[`${D}-nav`]:{[`${D}-tab`]:{margin:{_skip_check_:!0,value:we},[`${D}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[Te]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:(0,Xt.bf)(A.marginSM)}},[`${D}-tab-remove`]:{marginRight:{_skip_check_:!0,value:(0,Xt.bf)(A.marginXS)},marginLeft:{_skip_check_:!0,value:(0,Xt.bf)(Ve(A.marginXXS).mul(-1).equal())},[Te]:{margin:0}}}},[`&${D}-left`]:{[`> ${D}-nav`]:{order:1},[`> ${D}-content-holder`]:{order:0}},[`&${D}-right`]:{[`> ${D}-nav`]:{order:0},[`> ${D}-content-holder`]:{order:1}},[`&${D}-card${D}-top, &${D}-card${D}-bottom`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-tab + ${D}-tab`]:{marginRight:{_skip_check_:!0,value:Ne},marginLeft:{_skip_check_:!0,value:0}}}}},[`${D}-dropdown-rtl`]:{direction:"rtl"},[`${D}-menu-item`]:{[`${D}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},Xu=A=>{const{componentCls:D,tabsCardPadding:we,cardHeight:Te,cardGutter:Ne,itemHoverColor:Ve,itemActiveColor:Ze,colorBorderSecondary:Pe}=A;return{[D]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,fo.Wf)(A)),{display:"flex",[`> ${D}-nav, > div > ${D}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${D}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${A.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${D}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${A.motionDurationSlow}`},[`${D}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${D}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${D}-nav-more`]:{position:"relative",padding:we,background:"transparent",border:0,color:A.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:A.calc(A.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${D}-nav-add`]:Object.assign({minWidth:Te,minHeight:Te,marginLeft:{_skip_check_:!0,value:Ne},background:"transparent",border:`${(0,Xt.bf)(A.lineWidth)} ${A.lineType} ${Pe}`,borderRadius:`${(0,Xt.bf)(A.borderRadiusLG)} ${(0,Xt.bf)(A.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:A.colorText,transition:`all ${A.motionDurationSlow} ${A.motionEaseInOut}`,"&:hover":{color:Ve},"&:active, &:focus:not(:focus-visible)":{color:Ze}},(0,fo.Qy)(A,-3))},[`${D}-extra-content`]:{flex:"none"},[`${D}-ink-bar`]:{position:"absolute",background:A.inkBarColor,pointerEvents:"none"}}),Vu(A)),{[`${D}-content`]:{position:"relative",width:"100%"},[`${D}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${D}-tabpane`]:Object.assign(Object.assign({},(0,fo.Qy)(A)),{"&-hidden":{display:"none"}})}),[`${D}-centered`]:{[`> ${D}-nav, > div > ${D}-nav`]:{[`${D}-nav-wrap`]:{[`&:not([class*='${D}-nav-wrap-ping']) > ${D}-nav-list`]:{margin:"auto"}}}}}},Wu=A=>{const{cardHeight:D,cardHeightSM:we,cardHeightLG:Te,controlHeight:Ne,controlHeightLG:Ve}=A,Ze=D||Ve,Pe=we||Ne,tt=Te||Ve+8;return{zIndexPopup:A.zIndexPopupBase+50,cardBg:A.colorFillAlter,cardHeight:Ze,cardHeightSM:Pe,cardHeightLG:tt,cardPadding:`${(Ze-A.fontHeight)/2-A.lineWidth}px ${A.padding}px`,cardPaddingSM:`${(Pe-A.fontHeight)/2-A.lineWidth}px ${A.paddingXS}px`,cardPaddingLG:`${(tt-A.fontHeightLG)/2-A.lineWidth}px ${A.padding}px`,titleFontSize:A.fontSize,titleFontSizeLG:A.fontSizeLG,titleFontSizeSM:A.fontSize,inkBarColor:A.colorPrimary,horizontalMargin:`0 0 ${A.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${A.paddingSM}px 0`,horizontalItemPaddingSM:`${A.paddingXS}px 0`,horizontalItemPaddingLG:`${A.padding}px 0`,verticalItemPadding:`${A.paddingXS}px ${A.paddingLG}px`,verticalItemMargin:`${A.margin}px 0 0 0`,itemColor:A.colorText,itemSelectedColor:A.colorPrimary,itemHoverColor:A.colorPrimaryHover,itemActiveColor:A.colorPrimaryActive,cardGutter:A.marginXXS/2}};var ss=(0,$n.I$)("Tabs",A=>{const D=(0,Bs.IX)(A,{tabsCardPadding:A.cardPadding,dropdownEdgeChildVerticalPadding:A.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${(0,Xt.bf)(A.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${(0,Xt.bf)(A.horizontalItemGutter)}`});return[Uu(D),$u(D),Vs(D),Bu(D),zu(D),Xu(D),as(D)]},Wu),Xs=()=>null,Hu=function(A,D){var we={};for(var Te in A)Object.prototype.hasOwnProperty.call(A,Te)&&D.indexOf(Te)<0&&(we[Te]=A[Te]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ne=0,Te=Object.getOwnPropertySymbols(A);Ne<Te.length;Ne++)D.indexOf(Te[Ne])<0&&Object.prototype.propertyIsEnumerable.call(A,Te[Ne])&&(we[Te[Ne]]=A[Te[Ne]]);return we};const Ar=A=>{var D,we,Te,Ne,Ve,Ze,Pe,tt,nt,Gt,Pt;const{type:en,className:fn,rootClassName:Gn,size:ln,onEdit:In,hideAdd:Ft,centered:zt,addIcon:vn,removeIcon:pn,moreIcon:Qt,more:Yt,popupClassName:Xn,children:An,items:tn,animated:dn,style:Nt,indicatorSize:nn,indicator:Wt,destroyInactiveTabPane:Kt,destroyOnHidden:ar}=A,yr=Hu(A,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","removeIcon","moreIcon","more","popupClassName","children","items","animated","style","indicatorSize","indicator","destroyInactiveTabPane","destroyOnHidden"]),{prefixCls:Lr}=yr,{direction:Fr,tabs:Zt,getPrefixCls:so,getPopupContainer:Jr}=H.useContext(Ps.E_),sr=so("tabs",Lr),Bt=(0,Ir.Z)(sr),[ur,Er,br]=ss(sr,Bt);let xr;en==="editable-card"&&(xr={onEdit:(mn,{key:zr,event:$o})=>{In==null||In(mn==="add"?$o:zr,mn)},removeIcon:(D=pn!=null?pn:Zt==null?void 0:Zt.removeIcon)!==null&&D!==void 0?D:H.createElement(Qe.Z,null),addIcon:(vn!=null?vn:Zt==null?void 0:Zt.addIcon)||H.createElement(on,null),showAdd:Ft!==!0});const eo=so(),$r=(0,Ui.Z)(ln),No=Fu(tn,An),yo=Ia(sr,dn),Ro=Object.assign(Object.assign({},Zt==null?void 0:Zt.style),Nt),Xr={align:(we=Wt==null?void 0:Wt.align)!==null&&we!==void 0?we:(Te=Zt==null?void 0:Zt.indicator)===null||Te===void 0?void 0:Te.align,size:(Pe=(Ve=(Ne=Wt==null?void 0:Wt.size)!==null&&Ne!==void 0?Ne:nn)!==null&&Ve!==void 0?Ve:(Ze=Zt==null?void 0:Zt.indicator)===null||Ze===void 0?void 0:Ze.size)!==null&&Pe!==void 0?Pe:Zt==null?void 0:Zt.indicatorSize};return ur(H.createElement(Bi,Object.assign({direction:Fr,getPopupContainer:Jr},yr,{items:No,className:an()({[`${sr}-${$r}`]:$r,[`${sr}-card`]:["card","editable-card"].includes(en),[`${sr}-editable-card`]:en==="editable-card",[`${sr}-centered`]:zt},Zt==null?void 0:Zt.className,fn,Gn,Er,br,Bt),popupClassName:an()(Xn,Er,br,Bt),style:Ro,editable:xr,more:Object.assign({icon:(Pt=(Gt=(nt=(tt=Zt==null?void 0:Zt.more)===null||tt===void 0?void 0:tt.icon)!==null&&nt!==void 0?nt:Zt==null?void 0:Zt.moreIcon)!==null&&Gt!==void 0?Gt:Qt)!==null&&Pt!==void 0?Pt:H.createElement(Ge.Z,null),transitionName:`${eo}-slide-up`},Yt),prefixCls:sr,animated:yo,indicator:Xr,destroyInactiveTabPane:ar!=null?ar:Kt})))};Ar.TabPane=Xs;var Zu=Ar},66970:function(be,ot,Z){"use strict";Z.d(ot,{Z:function(){return Pr}});var H=Z(58709),gt=Z(97335),Qe=Z(75161),Ge=Z(9862),xt=Z(59437),it=Z(82187),le=Z.n(it),kt=Z(34143),sn=Z(87363),ht=Z.n(sn),on=Z(84895),Je=Z(93500),an=on.Z.ESC,At=on.Z.TAB;function Sn(Ye){var bn=Ye.visible,er=Ye.triggerRef,Hn=Ye.onVisibleChange,Or=Ye.autoFocus,Un=Ye.overlayRef,Sr=sn.useRef(!1),Dt=function(){if(bn){var ir,pr;(ir=er.current)===null||ir===void 0||(pr=ir.focus)===null||pr===void 0||pr.call(ir),Hn==null||Hn(!1)}},Tn=function(){var ir;return(ir=Un.current)!==null&&ir!==void 0&&ir.focus?(Un.current.focus(),Sr.current=!0,!0):!1},tr=function(ir){switch(ir.keyCode){case an:Dt();break;case At:{var pr=!1;Sr.current||(pr=Tn()),pr?ir.preventDefault():Dt();break}}};sn.useEffect(function(){return bn?(window.addEventListener("keydown",tr),Or&&(0,Je.Z)(Tn,3),function(){window.removeEventListener("keydown",tr),Sr.current=!1}):function(){Sr.current=!1}},[bn])}var rt=(0,sn.forwardRef)(function(Ye,bn){var er=Ye.overlay,Hn=Ye.arrow,Or=Ye.prefixCls,Un=(0,sn.useMemo)(function(){var Dt;return typeof er=="function"?Dt=er():Dt=er,Dt},[er]),Sr=(0,kt.sQ)(bn,(0,kt.C4)(Un));return ht().createElement(ht().Fragment,null,Hn&&ht().createElement("div",{className:"".concat(Or,"-arrow")}),ht().cloneElement(Un,{ref:(0,kt.Yr)(Un)?Sr:void 0}))}),Bn=rt,Mt={adjustX:1,adjustY:1},En=[0,0],Jn={topLeft:{points:["bl","tl"],overflow:Mt,offset:[0,-4],targetOffset:En},top:{points:["bc","tc"],overflow:Mt,offset:[0,-4],targetOffset:En},topRight:{points:["br","tr"],overflow:Mt,offset:[0,-4],targetOffset:En},bottomLeft:{points:["tl","bl"],overflow:Mt,offset:[0,4],targetOffset:En},bottom:{points:["tc","bc"],overflow:Mt,offset:[0,4],targetOffset:En},bottomRight:{points:["tr","br"],overflow:Mt,offset:[0,4],targetOffset:En}},vr=Jn,oo=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function Ao(Ye,bn){var er,Hn=Ye.arrow,Or=Hn===void 0?!1:Hn,Un=Ye.prefixCls,Sr=Un===void 0?"rc-dropdown":Un,Dt=Ye.transitionName,Tn=Ye.animation,tr=Ye.align,Vn=Ye.placement,ir=Vn===void 0?"bottomLeft":Vn,pr=Ye.placements,rs=pr===void 0?vr:pr,ya=Ye.getPopupContainer,os=Ye.showAction,Ea=Ye.hideAction,Tr=Ye.overlayClassName,ba=Ye.overlayStyle,si=Ye.visible,Pi=Ye.trigger,ui=Pi===void 0?["hover"]:Pi,xa=Ye.autoFocus,ci=Ye.overlay,fi=Ye.children,mr=Ye.onVisibleChange,io=(0,Ge.Z)(Ye,oo),li=ht().useState(),_a=(0,Qe.Z)(li,2),di=_a[0],I=_a[1],hi="visible"in Ye?si:di,kn=ht().useRef(null),Bo=ht().useRef(null),Fi=ht().useRef(null);ht().useImperativeHandle(bn,function(){return kn.current});var ao=function(Vr){I(Vr),mr==null||mr(Vr)};Sn({visible:hi,triggerRef:Fi,onVisibleChange:ao,autoFocus:xa,overlayRef:Bo});var wa=function(Vr){var go=Ye.onOverlayClick;I(!1),go&&go(Vr)},po=function(){return ht().createElement(Bn,{ref:Bo,overlay:ci,prefixCls:Sr,arrow:Or})},Sa=function(){return typeof ci=="function"?po:po()},zi=function(){var Vr=Ye.minOverlayWidthMatchTrigger,go=Ye.alignPoint;return"minOverlayWidthMatchTrigger"in Ye?Vr:!go},is=function(){var Vr=Ye.openClassName;return Vr!==void 0?Vr:"".concat(Sr,"-open")},gr=ht().cloneElement(fi,{className:le()((er=fi.props)===null||er===void 0?void 0:er.className,hi&&is()),ref:(0,kt.Yr)(fi)?(0,kt.sQ)(Fi,(0,kt.C4)(fi)):void 0}),Rn=Ea;return!Rn&&ui.indexOf("contextMenu")!==-1&&(Rn=["click"]),ht().createElement(xt.Z,(0,H.Z)({builtinPlacements:rs},io,{prefixCls:Sr,ref:kn,popupClassName:le()(Tr,(0,gt.Z)({},"".concat(Sr,"-show-arrow"),Or)),popupStyle:ba,action:ui,showAction:os,hideAction:Rn,popupPlacement:ir,popupAlign:tr,popupTransitionName:Dt,popupAnimation:Tn,popupVisible:hi,stretch:zi()?"minWidth":"",popup:Sa(),onPopupVisibleChange:ao,onPopupClick:wa,getPopupContainer:ya}),gr)}var Gi=ht().forwardRef(Ao),Pr=Gi},40224:function(be){(function(ot,Z){be.exports=Z()})(this,function(){"use strict";var ot=function(p){return p instanceof Uint8Array||p instanceof Uint16Array||p instanceof Uint32Array||p instanceof Int8Array||p instanceof Int16Array||p instanceof Int32Array||p instanceof Float32Array||p instanceof Float64Array||p instanceof Uint8ClampedArray},Z=function(p,w){for(var O=Object.keys(w),q=0;q<O.length;++q)p[O[q]]=w[O[q]];return p},H=`
`;function gt(p){return typeof atob!="undefined"?atob(p):"base64:"+p}function Qe(p){var w=new Error("(regl) "+p);throw console.error(w),w}function Ge(p,w){p||Qe(w)}function xt(p){return p?": "+p:""}function it(p,w,O){p in w||Qe("unknown parameter ("+p+")"+xt(O)+". possible values: "+Object.keys(w).join())}function le(p,w){ot(p)||Qe("invalid parameter type"+xt(w)+". must be a typed array")}function kt(p,w){switch(w){case"number":return typeof p=="number";case"object":return typeof p=="object";case"string":return typeof p=="string";case"boolean":return typeof p=="boolean";case"function":return typeof p=="function";case"undefined":return typeof p=="undefined";case"symbol":return typeof p=="symbol"}}function sn(p,w,O){kt(p,w)||Qe("invalid parameter type"+xt(O)+". expected "+w+", got "+typeof p)}function ht(p,w){p>=0&&(p|0)===p||Qe("invalid parameter type, ("+p+")"+xt(w)+". must be a nonnegative integer")}function on(p,w,O){w.indexOf(p)<0&&Qe("invalid value"+xt(O)+". must be one of: "+w)}var Je=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function an(p){Object.keys(p).forEach(function(w){Je.indexOf(w)<0&&Qe('invalid regl constructor argument "'+w+'". must be one of '+Je)})}function At(p,w){for(p=p+"";p.length<w;)p=" "+p;return p}function Sn(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function rt(p,w){this.number=p,this.line=w,this.errors=[]}function Bn(p,w,O){this.file=p,this.line=w,this.message=O}function Mt(){var p=new Error,w=(p.stack||p).toString(),O=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(w);if(O)return O[1];var q=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(w);return q?q[1]:"unknown"}function En(){var p=new Error,w=(p.stack||p).toString(),O=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(w);if(O)return O[1];var q=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(w);return q?q[1]:"unknown"}function Jn(p,w){var O=p.split(`
`),q=1,ie=0,Y={unknown:new Sn,0:new Sn};Y.unknown.name=Y[0].name=w||Mt(),Y.unknown.lines.push(new rt(0,""));for(var ee=0;ee<O.length;++ee){var ve=O[ee],ye=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ve);if(ye)switch(ye[1]){case"line":var Se=/(\d+)(\s+\d+)?/.exec(ye[2]);Se&&(q=Se[1]|0,Se[2]&&(ie=Se[2]|0,ie in Y||(Y[ie]=new Sn)));break;case"define":var he=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ye[2]);he&&(Y[ie].name=he[1]?gt(he[2]):he[2]);break}Y[ie].lines.push(new rt(q++,ve))}return Object.keys(Y).forEach(function(Ae){var Le=Y[Ae];Le.lines.forEach(function(pe){Le.index[pe.number]=pe})}),Y}function vr(p){var w=[];return p.split(`
`).forEach(function(O){if(!(O.length<5)){var q=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(O);q?w.push(new Bn(q[1]|0,q[2]|0,q[3].trim())):O.length>0&&w.push(new Bn("unknown",0,O))}}),w}function oo(p,w){w.forEach(function(O){var q=p[O.file];if(q){var ie=q.index[O.line];if(ie){ie.errors.push(O),q.hasErrors=!0;return}}p.unknown.hasErrors=!0,p.unknown.lines[0].errors.push(O)})}function Ao(p,w,O,q,ie){if(!p.getShaderParameter(w,p.COMPILE_STATUS)){var Y=p.getShaderInfoLog(w),ee=q===p.FRAGMENT_SHADER?"fragment":"vertex";Or(O,"string",ee+" shader source must be a string",ie);var ve=Jn(O,ie),ye=vr(Y);oo(ve,ye),Object.keys(ve).forEach(function(Se){var he=ve[Se];if(!he.hasErrors)return;var Ae=[""],Le=[""];function pe(Re,X){Ae.push(Re),Le.push(X||"")}pe("file number "+Se+": "+he.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),he.lines.forEach(function(Re){if(Re.errors.length>0){pe(At(Re.number,4)+"|  ","background-color:yellow; font-weight:bold"),pe(Re.line+H,"color:red; background-color:yellow; font-weight:bold");var X=0;Re.errors.forEach(function(te){var me=te.message,Me=/^\s*'(.*)'\s*:\s*(.*)$/.exec(me);if(Me){var ue=Me[1];switch(me=Me[2],ue){case"assign":ue="=";break}X=Math.max(Re.line.indexOf(ue,X),0)}else X=0;pe(At("| ",6)),pe(At("^^^",X+3)+H,"font-weight:bold"),pe(At("| ",6)),pe(me+H,"font-weight:bold")}),pe(At("| ",6)+H)}else pe(At(Re.number,4)+"|  "),pe(Re.line+H,"color:red")}),typeof document!="undefined"&&!window.chrome?(Le[0]=Ae.join("%c"),console.log.apply(console,Le)):console.log(Ae.join(""))}),Ge.raise("Error compiling "+ee+" shader, "+ve[0].name)}}function Gi(p,w,O,q,ie){if(!p.getProgramParameter(w,p.LINK_STATUS)){var Y=p.getProgramInfoLog(w),ee=Jn(O,ie),ve=Jn(q,ie),ye='Error linking program with vertex shader, "'+ve[0].name+'", and fragment shader "'+ee[0].name+'"';typeof document!="undefined"?console.log("%c"+ye+H+"%c"+Y,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ye+H+Y),Ge.raise(ye)}}function Pr(p){p._commandRef=Mt()}function Ye(p,w,O,q){Pr(p);function ie(ye){return ye?q.id(ye):0}p._fragId=ie(p.static.frag),p._vertId=ie(p.static.vert);function Y(ye,Se){Object.keys(Se).forEach(function(he){ye[q.id(he)]=!0})}var ee=p._uniformSet={};Y(ee,w.static),Y(ee,w.dynamic);var ve=p._attributeSet={};Y(ve,O.static),Y(ve,O.dynamic),p._hasCount="count"in p.static||"count"in p.dynamic||"elements"in p.static||"elements"in p.dynamic}function bn(p,w){var O=En();Qe(p+" in command "+(w||Mt())+(O==="unknown"?"":" called from "+O))}function er(p,w,O){p||bn(w,O||Mt())}function Hn(p,w,O,q){p in w||bn("unknown parameter ("+p+")"+xt(O)+". possible values: "+Object.keys(w).join(),q||Mt())}function Or(p,w,O,q){kt(p,w)||bn("invalid parameter type"+xt(O)+". expected "+w+", got "+typeof p,q||Mt())}function Un(p){p()}function Sr(p,w,O){p.texture?on(p.texture._texture.internalformat,w,"unsupported texture format for attachment"):on(p.renderbuffer._renderbuffer.format,O,"unsupported renderbuffer format for attachment")}var Dt=33071,Tn=9728,tr=9984,Vn=9985,ir=9986,pr=9987,rs=5120,ya=5121,os=5122,Ea=5123,Tr=5124,ba=5125,si=5126,Pi=32819,ui=32820,xa=33635,ci=34042,fi=36193,mr={};mr[rs]=mr[ya]=1,mr[os]=mr[Ea]=mr[fi]=mr[xa]=mr[Pi]=mr[ui]=2,mr[Tr]=mr[ba]=mr[si]=mr[ci]=4;function io(p,w){return p===ui||p===Pi||p===xa?2:p===ci?4:mr[p]*w}function li(p){return!(p&p-1)&&!!p}function _a(p,w,O){var q,ie=w.width,Y=w.height,ee=w.channels;Ge(ie>0&&ie<=O.maxTextureSize&&Y>0&&Y<=O.maxTextureSize,"invalid texture shape"),(p.wrapS!==Dt||p.wrapT!==Dt)&&Ge(li(ie)&&li(Y),"incompatible wrap mode for texture, both width and height must be power of 2"),w.mipmask===1?ie!==1&&Y!==1&&Ge(p.minFilter!==tr&&p.minFilter!==ir&&p.minFilter!==Vn&&p.minFilter!==pr,"min filter requires mipmap"):(Ge(li(ie)&&li(Y),"texture must be a square power of 2 to support mipmapping"),Ge(w.mipmask===(ie<<1)-1,"missing or incomplete mipmap data")),w.type===si&&(O.extensions.indexOf("oes_texture_float_linear")<0&&Ge(p.minFilter===Tn&&p.magFilter===Tn,"filter not supported, must enable oes_texture_float_linear"),Ge(!p.genMipmaps,"mipmap generation not supported with float textures"));var ve=w.images;for(q=0;q<16;++q)if(ve[q]){var ye=ie>>q,Se=Y>>q;Ge(w.mipmask&1<<q,"missing mipmap data");var he=ve[q];if(Ge(he.width===ye&&he.height===Se,"invalid shape for mip images"),Ge(he.format===w.format&&he.internalformat===w.internalformat&&he.type===w.type,"incompatible type for mip image"),!he.compressed)if(he.data){var Ae=Math.ceil(io(he.type,ee)*ye/he.unpackAlignment)*he.unpackAlignment;Ge(he.data.byteLength===Ae*Se,"invalid data for image, buffer size is inconsistent with image format")}else he.element||he.copy}else p.genMipmaps||Ge((w.mipmask&1<<q)===0,"extra mipmap data");w.compressed&&Ge(!p.genMipmaps,"mipmap generation for compressed images not supported")}function di(p,w,O,q){var ie=p.width,Y=p.height,ee=p.channels;Ge(ie>0&&ie<=q.maxTextureSize&&Y>0&&Y<=q.maxTextureSize,"invalid texture shape"),Ge(ie===Y,"cube map must be square"),Ge(w.wrapS===Dt&&w.wrapT===Dt,"wrap mode not supported by cube map");for(var ve=0;ve<O.length;++ve){var ye=O[ve];Ge(ye.width===ie&&ye.height===Y,"inconsistent cube map face shape"),w.genMipmaps&&(Ge(!ye.compressed,"can not generate mipmap for compressed textures"),Ge(ye.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Se=ye.images,he=0;he<16;++he){var Ae=Se[he];if(Ae){var Le=ie>>he,pe=Y>>he;Ge(ye.mipmask&1<<he,"missing mipmap data"),Ge(Ae.width===Le&&Ae.height===pe,"invalid shape for mip images"),Ge(Ae.format===p.format&&Ae.internalformat===p.internalformat&&Ae.type===p.type,"incompatible type for mip image"),Ae.compressed||(Ae.data?Ge(Ae.data.byteLength===Le*pe*Math.max(io(Ae.type,ee),Ae.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ae.element||Ae.copy)}}}}var I=Z(Ge,{optional:Un,raise:Qe,commandRaise:bn,command:er,parameter:it,commandParameter:Hn,constructor:an,type:sn,commandType:Or,isTypedArray:le,nni:ht,oneOf:on,shaderError:Ao,linkError:Gi,callSite:En,saveCommandRef:Pr,saveDrawInfo:Ye,framebufferFormat:Sr,guessCommand:Mt,texture2D:_a,textureCube:di}),hi=0,kn=0,Bo=5,Fi=6;function ao(p,w){this.id=hi++,this.type=p,this.data=w}function wa(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function po(p){if(p.length===0)return[];var w=p.charAt(0),O=p.charAt(p.length-1);if(p.length>1&&w===O&&(w==='"'||w==="'"))return['"'+wa(p.substr(1,p.length-2))+'"'];var q=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(p);if(q)return po(p.substr(0,q.index)).concat(po(q[1])).concat(po(p.substr(q.index+q[0].length)));var ie=p.split(".");if(ie.length===1)return['"'+wa(p)+'"'];for(var Y=[],ee=0;ee<ie.length;++ee)Y=Y.concat(po(ie[ee]));return Y}function Sa(p){return"["+po(p).join("][")+"]"}function zi(p,w){return new ao(p,Sa(w+""))}function is(p){return typeof p=="function"&&!p._reglType||p instanceof ao}function gr(p,w){if(typeof p=="function")return new ao(kn,p);if(typeof p=="number"||typeof p=="boolean")return new ao(Bo,p);if(Array.isArray(p))return new ao(Fi,p.map((O,q)=>gr(O,w+"["+q+"]")));if(p instanceof ao)return p;I(!1,"invalid option type in uniform "+w)}var Rn={DynamicVariable:ao,define:zi,isDynamic:is,unbox:gr,accessor:Sa},mo={next:typeof requestAnimationFrame=="function"?function(p){return requestAnimationFrame(p)}:function(p){return setTimeout(p,16)},cancel:typeof cancelAnimationFrame=="function"?function(p){return cancelAnimationFrame(p)}:clearTimeout},Vr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function go(){var p={"":0},w=[""];return{id:function(O){var q=p[O];return q||(q=p[O]=w.length,w.push(O),q)},str:function(O){return w[O]}}}function qc(p,w,O){var q=document.createElement("canvas");Z(q.style,{border:0,margin:0,padding:0,top:0,left:0}),p.appendChild(q),p===document.body&&(q.style.position="absolute",Z(p.style,{margin:0,padding:0}));function ie(){var ve=window.innerWidth,ye=window.innerHeight;if(p!==document.body){var Se=p.getBoundingClientRect();ve=Se.right-Se.left,ye=Se.bottom-Se.top}q.width=O*ve,q.height=O*ye,Z(q.style,{width:ve+"px",height:ye+"px"})}var Y;p!==document.body&&typeof ResizeObserver=="function"?(Y=new ResizeObserver(function(){setTimeout(ie)}),Y.observe(p)):window.addEventListener("resize",ie,!1);function ee(){Y?Y.disconnect():window.removeEventListener("resize",ie),p.removeChild(q)}return ie(),{canvas:q,onDestroy:ee}}function Pu(p,w){function O(q){try{return p.getContext(q,w)}catch(ie){return null}}return O("webgl")||O("experimental-webgl")||O("webgl-experimental")}function ks(p){return typeof p.nodeName=="string"&&typeof p.appendChild=="function"&&typeof p.getBoundingClientRect=="function"}function Gs(p){return typeof p.drawArrays=="function"||typeof p.drawElements=="function"}function Uo(p){return typeof p=="string"?p.split():(I(Array.isArray(p),"invalid extension array"),p)}function vi(p){return typeof p=="string"?(I(typeof document!="undefined","not supported outside of DOM"),document.querySelector(p)):p}function Bi(p){var w=p||{},O,q,ie,Y,ee={},ve=[],ye=[],Se=typeof window=="undefined"?1:window.devicePixelRatio,he=!1,Ae=function(Re){Re&&I.raise(Re)},Le=function(){};if(typeof w=="string"?(I(typeof document!="undefined","selector queries only supported in DOM enviroments"),O=document.querySelector(w),I(O,"invalid query string for element")):typeof w=="object"?ks(w)?O=w:Gs(w)?(Y=w,ie=Y.canvas):(I.constructor(w),"gl"in w?Y=w.gl:"canvas"in w?ie=vi(w.canvas):"container"in w&&(q=vi(w.container)),"attributes"in w&&(ee=w.attributes,I.type(ee,"object","invalid context attributes")),"extensions"in w&&(ve=Uo(w.extensions)),"optionalExtensions"in w&&(ye=Uo(w.optionalExtensions)),"onDone"in w&&(I.type(w.onDone,"function","invalid or missing onDone callback"),Ae=w.onDone),"profile"in w&&(he=!!w.profile),"pixelRatio"in w&&(Se=+w.pixelRatio,I(Se>0,"invalid pixel ratio"))):I.raise("invalid arguments to regl"),O&&(O.nodeName.toLowerCase()==="canvas"?ie=O:q=O),!Y){if(!ie){I(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var pe=qc(q||document.body,Ae,Se);if(!pe)return null;ie=pe.canvas,Le=pe.onDestroy}ee.premultipliedAlpha===void 0&&(ee.premultipliedAlpha=!0),Y=Pu(ie,ee)}return Y?{gl:Y,canvas:ie,container:q,extensions:ve,optionalExtensions:ye,pixelRatio:Se,profile:he,onDone:Ae,onDestroy:Le}:(Le(),Ae("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ps(p,w){var O={};function q(ee){I.type(ee,"string","extension name must be string");var ve=ee.toLowerCase(),ye;try{ye=O[ve]=p.getExtension(ve)}catch(Se){}return!!ye}for(var ie=0;ie<w.extensions.length;++ie){var Y=w.extensions[ie];if(!q(Y))return w.onDestroy(),w.onDone('"'+Y+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return w.optionalExtensions.forEach(q),{extensions:O,restore:function(){Object.keys(O).forEach(function(ee){if(O[ee]&&!q(ee))throw new Error("(regl): error restoring extension "+ee)})}}}function Ir(p,w){for(var O=Array(p),q=0;q<p;++q)O[q]=w(q);return O}var Ui=5120,Ta=5121,Vo=5122,Ia=5123,Vi=5124,Fs=5125,zs=5126;function Fu(p){for(var w=16;w<=1<<28;w*=16)if(p<=w)return w;return 0}function Xt(p){var w,O;return w=(p>65535)<<4,p>>>=w,O=(p>255)<<3,p>>>=O,w|=O,O=(p>15)<<2,p>>>=O,w|=O,O=(p>3)<<1,p>>>=O,w|=O,w|p>>1}function fo(){var p=Ir(8,function(){return[]});function w(Y){var ee=Fu(Y),ve=p[Xt(ee)>>2];return ve.length>0?ve.pop():new ArrayBuffer(ee)}function O(Y){p[Xt(Y.byteLength)>>2].push(Y)}function q(Y,ee){var ve=null;switch(Y){case Ui:ve=new Int8Array(w(ee),0,ee);break;case Ta:ve=new Uint8Array(w(ee),0,ee);break;case Vo:ve=new Int16Array(w(2*ee),0,ee);break;case Ia:ve=new Uint16Array(w(2*ee),0,ee);break;case Vi:ve=new Int32Array(w(4*ee),0,ee);break;case Fs:ve=new Uint32Array(w(4*ee),0,ee);break;case zs:ve=new Float32Array(w(4*ee),0,ee);break;default:return null}return ve.length!==ee?ve.subarray(0,ee):ve}function ie(Y){O(Y.buffer)}return{alloc:w,free:O,allocType:q,freeType:ie}}var $n=fo();$n.zero=fo();var Bs=3408,Us=3410,Qc=3411,as=3412,zu=3413,Bu=3414,Vs=3415,Uu=33901,Vu=33902,$u=3379,Xu=3386,Wu=34921,ss=36347,$s=36348,Xs=35661,Hu=35660,Ar=34930,Zu=36349,A=34076,D=34024,we=7936,Te=7937,Ne=7938,Ve=35724,Ze=34047,Pe=36063,tt=34852,nt=3553,Gt=34067,Pt=34069,en=33984,fn=6408,Gn=5126,ln=5121,In=36160,Ft=36053,zt=36064,vn=16384,pn=function(p,w){var O=1;w.ext_texture_filter_anisotropic&&(O=p.getParameter(Ze));var q=1,ie=1;w.webgl_draw_buffers&&(q=p.getParameter(tt),ie=p.getParameter(Pe));var Y=!!w.oes_texture_float;if(Y){var ee=p.createTexture();p.bindTexture(nt,ee),p.texImage2D(nt,0,fn,1,1,0,fn,Gn,null);var ve=p.createFramebuffer();if(p.bindFramebuffer(In,ve),p.framebufferTexture2D(In,zt,nt,ee,0),p.bindTexture(nt,null),p.checkFramebufferStatus(In)!==Ft)Y=!1;else{p.viewport(0,0,1,1),p.clearColor(1,0,0,1),p.clear(vn);var ye=$n.allocType(Gn,4);p.readPixels(0,0,1,1,fn,Gn,ye),p.getError()?Y=!1:(p.deleteFramebuffer(ve),p.deleteTexture(ee),Y=ye[0]===1),$n.freeType(ye)}}var Se=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),he=!0;if(!Se){var Ae=p.createTexture(),Le=$n.allocType(ln,36);p.activeTexture(en),p.bindTexture(Gt,Ae),p.texImage2D(Pt,0,fn,3,3,0,fn,ln,Le),$n.freeType(Le),p.bindTexture(Gt,null),p.deleteTexture(Ae),he=!p.getError()}return{colorBits:[p.getParameter(Us),p.getParameter(Qc),p.getParameter(as),p.getParameter(zu)],depthBits:p.getParameter(Bu),stencilBits:p.getParameter(Vs),subpixelBits:p.getParameter(Bs),extensions:Object.keys(w).filter(function(pe){return!!w[pe]}),maxAnisotropic:O,maxDrawbuffers:q,maxColorAttachments:ie,pointSizeDims:p.getParameter(Uu),lineWidthDims:p.getParameter(Vu),maxViewportDims:p.getParameter(Xu),maxCombinedTextureUnits:p.getParameter(Xs),maxCubeMapSize:p.getParameter(A),maxRenderbufferSize:p.getParameter(D),maxTextureUnits:p.getParameter(Ar),maxTextureSize:p.getParameter($u),maxAttributes:p.getParameter(Wu),maxVertexUniforms:p.getParameter(ss),maxVertexTextureUnits:p.getParameter(Hu),maxVaryingVectors:p.getParameter($s),maxFragmentUniforms:p.getParameter(Zu),glsl:p.getParameter(Ve),renderer:p.getParameter(Te),vendor:p.getParameter(we),version:p.getParameter(Ne),readFloat:Y,npotTextureCube:he}};function Qt(p){return!!p&&typeof p=="object"&&Array.isArray(p.shape)&&Array.isArray(p.stride)&&typeof p.offset=="number"&&p.shape.length===p.stride.length&&(Array.isArray(p.data)||ot(p.data))}var Yt=function(p){return Object.keys(p).map(function(w){return p[w]})},Xn={shape:Wt,flatten:nn};function An(p,w,O){for(var q=0;q<w;++q)O[q]=p[q]}function tn(p,w,O,q){for(var ie=0,Y=0;Y<w;++Y)for(var ee=p[Y],ve=0;ve<O;++ve)q[ie++]=ee[ve]}function dn(p,w,O,q,ie,Y){for(var ee=Y,ve=0;ve<w;++ve)for(var ye=p[ve],Se=0;Se<O;++Se)for(var he=ye[Se],Ae=0;Ae<q;++Ae)ie[ee++]=he[Ae]}function Nt(p,w,O,q,ie){for(var Y=1,ee=O+1;ee<w.length;++ee)Y*=w[ee];var ve=w[O];if(w.length-O===4){var ye=w[O+1],Se=w[O+2],he=w[O+3];for(ee=0;ee<ve;++ee)dn(p[ee],ye,Se,he,q,ie),ie+=Y}else for(ee=0;ee<ve;++ee)Nt(p[ee],w,O+1,q,ie),ie+=Y}function nn(p,w,O,q){var ie=1;if(w.length)for(var Y=0;Y<w.length;++Y)ie*=w[Y];else ie=0;var ee=q||$n.allocType(O,ie);switch(w.length){case 0:break;case 1:An(p,w[0],ee);break;case 2:tn(p,w[0],w[1],ee);break;case 3:dn(p,w[0],w[1],w[2],ee,0);break;default:Nt(p,w,0,ee,0)}return ee}function Wt(p){for(var w=[],O=p;O.length;O=O[0])w.push(O.length);return w}var Kt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ar=5120,yr=5122,Lr=5124,Fr=5121,Zt=5123,so=5125,Jr=5126,sr=5126,Bt={int8:ar,int16:yr,int32:Lr,uint8:Fr,uint16:Zt,uint32:so,float:Jr,float32:sr},ur=35048,Er=35040,br={dynamic:ur,stream:Er,static:35044},xr=Xn.flatten,eo=Xn.shape,$r=35044,No=35040,yo=5121,Ro=5126,Xr=[];Xr[5120]=1,Xr[5122]=2,Xr[5124]=4,Xr[5121]=1,Xr[5123]=2,Xr[5125]=4,Xr[5126]=4;function mn(p){return Kt[Object.prototype.toString.call(p)]|0}function zr(p,w){for(var O=0;O<w.length;++O)p[O]=w[O]}function $o(p,w,O,q,ie,Y,ee){for(var ve=0,ye=0;ye<O;++ye)for(var Se=0;Se<q;++Se)p[ve++]=w[ie*ye+Y*Se+ee]}function ju(p,w,O,q){var ie=0,Y={};function ee(X){this.id=ie++,this.buffer=p.createBuffer(),this.type=X,this.usage=$r,this.byteLength=0,this.dimension=1,this.dtype=yo,this.persistentData=null,O.profile&&(this.stats={size:0})}ee.prototype.bind=function(){p.bindBuffer(this.type,this.buffer)},ee.prototype.destroy=function(){Le(this)};var ve=[];function ye(X,te){var me=ve.pop();return me||(me=new ee(X)),me.bind(),Ae(me,te,No,0,1,!1),me}function Se(X){ve.push(X)}function he(X,te,me){X.byteLength=te.byteLength,p.bufferData(X.type,te,me)}function Ae(X,te,me,Me,ue,ze){var ce;if(X.usage=me,Array.isArray(te)){if(X.dtype=Me||Ro,te.length>0){var De;if(Array.isArray(te[0])){ce=eo(te);for(var de=1,Ce=1;Ce<ce.length;++Ce)de*=ce[Ce];X.dimension=de,De=xr(te,ce,X.dtype),he(X,De,me),ze?X.persistentData=De:$n.freeType(De)}else if(typeof te[0]=="number"){X.dimension=ue;var et=$n.allocType(X.dtype,te.length);zr(et,te),he(X,et,me),ze?X.persistentData=et:$n.freeType(et)}else ot(te[0])?(X.dimension=te[0].length,X.dtype=Me||mn(te[0])||Ro,De=xr(te,[te.length,te[0].length],X.dtype),he(X,De,me),ze?X.persistentData=De:$n.freeType(De)):I.raise("invalid buffer data")}}else if(ot(te))X.dtype=Me||mn(te),X.dimension=ue,he(X,te,me),ze&&(X.persistentData=new Uint8Array(new Uint8Array(te.buffer)));else if(Qt(te)){ce=te.shape;var lt=te.stride,Oe=te.offset,Ie=0,se=0,ut=0,yt=0;ce.length===1?(Ie=ce[0],se=1,ut=lt[0],yt=0):ce.length===2?(Ie=ce[0],se=ce[1],ut=lt[0],yt=lt[1]):I.raise("invalid shape"),X.dtype=Me||mn(te.data)||Ro,X.dimension=se;var Xe=$n.allocType(X.dtype,Ie*se);$o(Xe,te.data,Ie,se,ut,yt,Oe),he(X,Xe,me),ze?X.persistentData=Xe:$n.freeType(Xe)}else te instanceof ArrayBuffer?(X.dtype=yo,X.dimension=ue,he(X,te,me),ze&&(X.persistentData=new Uint8Array(new Uint8Array(te)))):I.raise("invalid buffer data")}function Le(X){w.bufferCount--,q(X);var te=X.buffer;I(te,"buffer must not be deleted already"),p.deleteBuffer(te),X.buffer=null,delete Y[X.id]}function pe(X,te,me,Me){w.bufferCount++;var ue=new ee(te);Y[ue.id]=ue;function ze(de){var Ce=$r,et=null,lt=0,Oe=0,Ie=1;return Array.isArray(de)||ot(de)||Qt(de)||de instanceof ArrayBuffer?et=de:typeof de=="number"?lt=de|0:de&&(I.type(de,"object","buffer arguments must be an object, a number or an array"),"data"in de&&(I(et===null||Array.isArray(et)||ot(et)||Qt(et),"invalid data for buffer"),et=de.data),"usage"in de&&(I.parameter(de.usage,br,"invalid buffer usage"),Ce=br[de.usage]),"type"in de&&(I.parameter(de.type,Bt,"invalid buffer type"),Oe=Bt[de.type]),"dimension"in de&&(I.type(de.dimension,"number","invalid dimension"),Ie=de.dimension|0),"length"in de&&(I.nni(lt,"buffer length must be a nonnegative integer"),lt=de.length|0)),ue.bind(),et?Ae(ue,et,Ce,Oe,Ie,Me):(lt&&p.bufferData(ue.type,lt,Ce),ue.dtype=Oe||yo,ue.usage=Ce,ue.dimension=Ie,ue.byteLength=lt),O.profile&&(ue.stats.size=ue.byteLength*Xr[ue.dtype]),ze}function ce(de,Ce){I(Ce+de.byteLength<=ue.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+de.byteLength+" starting from offset "+Ce+" to a buffer of size "+ue.byteLength),p.bufferSubData(ue.type,Ce,de)}function De(de,Ce){var et=(Ce||0)|0,lt;if(ue.bind(),ot(de)||de instanceof ArrayBuffer)ce(de,et);else if(Array.isArray(de)){if(de.length>0)if(typeof de[0]=="number"){var Oe=$n.allocType(ue.dtype,de.length);zr(Oe,de),ce(Oe,et),$n.freeType(Oe)}else if(Array.isArray(de[0])||ot(de[0])){lt=eo(de);var Ie=xr(de,lt,ue.dtype);ce(Ie,et),$n.freeType(Ie)}else I.raise("invalid buffer data")}else if(Qt(de)){lt=de.shape;var se=de.stride,ut=0,yt=0,Xe=0,Tt=0;lt.length===1?(ut=lt[0],yt=1,Xe=se[0],Tt=0):lt.length===2?(ut=lt[0],yt=lt[1],Xe=se[0],Tt=se[1]):I.raise("invalid shape");var vt=Array.isArray(de.data)?ue.dtype:mn(de.data),St=$n.allocType(vt,ut*yt);$o(St,de.data,ut,yt,Xe,Tt,de.offset),ce(St,et),$n.freeType(St)}else I.raise("invalid data for buffer subdata");return ze}return me||ze(X),ze._reglType="buffer",ze._buffer=ue,ze.subdata=De,O.profile&&(ze.stats=ue.stats),ze.destroy=function(){Le(ue)},ze}function Re(){Yt(Y).forEach(function(X){X.buffer=p.createBuffer(),p.bindBuffer(X.type,X.buffer),p.bufferData(X.type,X.persistentData||X.byteLength,X.usage)})}return O.profile&&(w.getTotalBufferSize=function(){var X=0;return Object.keys(Y).forEach(function(te){X+=Y[te].stats.size}),X}),{create:pe,createStream:ye,destroyStream:Se,clear:function(){Yt(Y).forEach(Le),ve.forEach(Le)},getBuffer:function(X){return X&&X._buffer instanceof ee?X._buffer:null},restore:Re,_initBuffer:Ae}}var Jc=0,Yu=0,Aa=1,Na=1,$i=4,us=4,Xo={points:Jc,point:Yu,lines:Aa,line:Na,triangles:$i,triangle:us,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ws=0,lo=1,Xi=4,Do=5120,Wr=5121,Ra=5122,Co=5123,Ku=5124,Wo=5125,Wi=34963,qu=35040,Hs=35044;function Zs(p,w,O,q){var ie={},Y=0,ee={uint8:Wr,uint16:Co};w.oes_element_index_uint&&(ee.uint32=Wo);function ve(Re){this.id=Y++,ie[this.id]=this,this.buffer=Re,this.primType=Xi,this.vertCount=0,this.type=0}ve.prototype.bind=function(){this.buffer.bind()};var ye=[];function Se(Re){var X=ye.pop();return X||(X=new ve(O.create(null,Wi,!0,!1)._buffer)),Ae(X,Re,qu,-1,-1,0,0),X}function he(Re){ye.push(Re)}function Ae(Re,X,te,me,Me,ue,ze){Re.buffer.bind();var ce;if(X){var De=ze;!ze&&(!ot(X)||Qt(X)&&!ot(X.data))&&(De=w.oes_element_index_uint?Wo:Co),O._initBuffer(Re.buffer,X,te,De,3)}else p.bufferData(Wi,ue,te),Re.buffer.dtype=ce||Wr,Re.buffer.usage=te,Re.buffer.dimension=3,Re.buffer.byteLength=ue;if(ce=ze,!ze){switch(Re.buffer.dtype){case Wr:case Do:ce=Wr;break;case Co:case Ra:ce=Co;break;case Wo:case Ku:ce=Wo;break;default:I.raise("unsupported type for element array")}Re.buffer.dtype=ce}Re.type=ce,I(ce!==Wo||!!w.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var de=Me;de<0&&(de=Re.buffer.byteLength,ce===Co?de>>=1:ce===Wo&&(de>>=2)),Re.vertCount=de;var Ce=me;if(me<0){Ce=Xi;var et=Re.buffer.dimension;et===1&&(Ce=Ws),et===2&&(Ce=lo),et===3&&(Ce=Xi)}Re.primType=Ce}function Le(Re){q.elementsCount--,I(Re.buffer!==null,"must not double destroy elements"),delete ie[Re.id],Re.buffer.destroy(),Re.buffer=null}function pe(Re,X){var te=O.create(null,Wi,!0),me=new ve(te._buffer);q.elementsCount++;function Me(ue){if(!ue)te(),me.primType=Xi,me.vertCount=0,me.type=Wr;else if(typeof ue=="number")te(ue),me.primType=Xi,me.vertCount=ue|0,me.type=Wr;else{var ze=null,ce=Hs,De=-1,de=-1,Ce=0,et=0;Array.isArray(ue)||ot(ue)||Qt(ue)?ze=ue:(I.type(ue,"object","invalid arguments for elements"),"data"in ue&&(ze=ue.data,I(Array.isArray(ze)||ot(ze)||Qt(ze),"invalid data for element buffer")),"usage"in ue&&(I.parameter(ue.usage,br,"invalid element buffer usage"),ce=br[ue.usage]),"primitive"in ue&&(I.parameter(ue.primitive,Xo,"invalid element buffer primitive"),De=Xo[ue.primitive]),"count"in ue&&(I(typeof ue.count=="number"&&ue.count>=0,"invalid vertex count for elements"),de=ue.count|0),"type"in ue&&(I.parameter(ue.type,ee,"invalid buffer type"),et=ee[ue.type]),"length"in ue?Ce=ue.length|0:(Ce=de,et===Co||et===Ra?Ce*=2:(et===Wo||et===Ku)&&(Ce*=4))),Ae(me,ze,ce,De,de,Ce,et)}return Me}return Me(Re),Me._reglType="elements",Me._elements=me,Me.subdata=function(ue,ze){return te.subdata(ue,ze),Me},Me.destroy=function(){Le(me)},Me}return{create:pe,createStream:Se,destroyStream:he,getElements:function(Re){return typeof Re=="function"&&Re._elements instanceof ve?Re._elements:null},clear:function(){Yt(ie).forEach(Le)}}}var js=new Float32Array(1),Ys=new Uint32Array(js.buffer),Qu=5123;function Ks(p){for(var w=$n.allocType(Qu,p.length),O=0;O<p.length;++O)if(isNaN(p[O]))w[O]=65535;else if(p[O]===1/0)w[O]=31744;else if(p[O]===-1/0)w[O]=64512;else{js[0]=p[O];var q=Ys[0],ie=q>>>31<<15,Y=(q<<1>>>24)-127,ee=q>>13&1023;if(Y<-24)w[O]=ie;else if(Y<-14){var ve=-14-Y;w[O]=ie+(ee+1024>>ve)}else Y>15?w[O]=ie+31744:w[O]=ie+(Y+15<<10)+ee}return w}function Dn(p){return Array.isArray(p)||ot(p)}var Da=function(p){return!(p&p-1)&&!!p},qs=34467,cr=3553,Ho=34067,Ca=34069,Oo=6408,Qs=6406,pi=6407,Zn=6409,Eo=6410,Zo=32854,mi=32855,Oa=36194,cs=32819,fs=32820,ef=33635,Js=34042,Lo=6402,Hi=34041,ls=35904,La=35906,Mo=36193,jo=33776,gi=33777,yi=33778,Ei=33779,ds=35986,gn=35987,wt=34798,xn=35840,Nn=35841,Hr=35842,jn=35843,bi=36196,_r=5121,Zi=5123,bo=5125,ji=5126,eu=10242,tu=10243,tf=10497,Ju=33071,Nl=33648,Rl=10240,nf=10241,ec=9728,Dl=9729,nu=9984,tc=9985,rf=9986,nc=9987,Cl=33170,ru=4352,Ol=4353,of=4354,Ll=34046,Ml=3317,kl=37440,af=37441,Gl=37443,sf=37444,hs=33984,Pl=[nu,rf,tc,nc],rc=[0,Zn,Eo,pi,Oo],ho={};ho[Zn]=ho[Qs]=ho[Lo]=1,ho[Hi]=ho[Eo]=2,ho[pi]=ho[ls]=3,ho[Oo]=ho[La]=4;function Ma(p){return"[object "+p+"]"}var oc=Ma("HTMLCanvasElement"),uf=Ma("OffscreenCanvas"),cf=Ma("CanvasRenderingContext2D"),Fl=Ma("ImageBitmap"),ic=Ma("HTMLImageElement"),ff=Ma("HTMLVideoElement"),lf=Object.keys(Kt).concat([oc,uf,cf,Fl,ic,ff]),ka=[];ka[_r]=1,ka[ji]=4,ka[Mo]=2,ka[Zi]=2,ka[bo]=4;var Dr=[];Dr[Zo]=2,Dr[mi]=2,Dr[Oa]=2,Dr[Hi]=4,Dr[jo]=.5,Dr[gi]=.5,Dr[yi]=1,Dr[Ei]=1,Dr[ds]=.5,Dr[gn]=1,Dr[wt]=1,Dr[xn]=.5,Dr[Nn]=.25,Dr[Hr]=.5,Dr[jn]=.25,Dr[bi]=.5;function df(p){return Array.isArray(p)&&(p.length===0||typeof p[0]=="number")}function ac(p){if(!Array.isArray(p))return!1;var w=p.length;return!(w===0||!Dn(p[0]))}function xi(p){return Object.prototype.toString.call(p)}function hf(p){return xi(p)===oc}function ou(p){return xi(p)===uf}function zl(p){return xi(p)===cf}function sc(p){return xi(p)===Fl}function vf(p){return xi(p)===ic}function uc(p){return xi(p)===ff}function pf(p){if(!p)return!1;var w=xi(p);return lf.indexOf(w)>=0?!0:df(p)||ac(p)||Qt(p)}function cc(p){return Kt[Object.prototype.toString.call(p)]|0}function Bl(p,w){var O=w.length;switch(p.type){case _r:case Zi:case bo:case ji:var q=$n.allocType(p.type,O);q.set(w),p.data=q;break;case Mo:p.data=Ks(w);break;default:I.raise("unsupported texture type, must specify a typed array")}}function Ul(p,w){return $n.allocType(p.type===Mo?ji:p.type,w)}function fc(p,w){p.type===Mo?(p.data=Ks(w),$n.freeType(w)):p.data=w}function Vl(p,w,O,q,ie,Y){for(var ee=p.width,ve=p.height,ye=p.channels,Se=ee*ve*ye,he=Ul(p,Se),Ae=0,Le=0;Le<ve;++Le)for(var pe=0;pe<ee;++pe)for(var Re=0;Re<ye;++Re)he[Ae++]=w[O*pe+q*Le+ie*Re+Y];fc(p,he)}function iu(p,w,O,q,ie,Y){var ee;if(typeof Dr[p]!="undefined"?ee=Dr[p]:ee=ho[p]*ka[w],Y&&(ee*=6),ie){for(var ve=0,ye=O;ye>=1;)ve+=ee*ye*ye,ye/=2;return ve}else return ee*O*q}function $l(p,w,O,q,ie,Y,ee){var ve={"don't care":ru,"dont care":ru,nice:of,fast:Ol},ye={repeat:tf,clamp:Ju,mirror:Nl},Se={nearest:ec,linear:Dl},he=Z({mipmap:nc,"nearest mipmap nearest":nu,"linear mipmap nearest":tc,"nearest mipmap linear":rf,"linear mipmap linear":nc},Se),Ae={none:0,browser:sf},Le={uint8:_r,rgba4:cs,rgb565:ef,"rgb5 a1":fs},pe={alpha:Qs,luminance:Zn,"luminance alpha":Eo,rgb:pi,rgba:Oo,rgba4:Zo,"rgb5 a1":mi,rgb565:Oa},Re={};w.ext_srgb&&(pe.srgb=ls,pe.srgba=La),w.oes_texture_float&&(Le.float32=Le.float=ji),w.oes_texture_half_float&&(Le.float16=Le["half float"]=Mo),w.webgl_depth_texture&&(Z(pe,{depth:Lo,"depth stencil":Hi}),Z(Le,{uint16:Zi,uint32:bo,"depth stencil":Js})),w.webgl_compressed_texture_s3tc&&Z(Re,{"rgb s3tc dxt1":jo,"rgba s3tc dxt1":gi,"rgba s3tc dxt3":yi,"rgba s3tc dxt5":Ei}),w.webgl_compressed_texture_atc&&Z(Re,{"rgb atc":ds,"rgba atc explicit alpha":gn,"rgba atc interpolated alpha":wt}),w.webgl_compressed_texture_pvrtc&&Z(Re,{"rgb pvrtc 4bppv1":xn,"rgb pvrtc 2bppv1":Nn,"rgba pvrtc 4bppv1":Hr,"rgba pvrtc 2bppv1":jn}),w.webgl_compressed_texture_etc1&&(Re["rgb etc1"]=bi);var X=Array.prototype.slice.call(p.getParameter(qs));Object.keys(Re).forEach(function(C){var Q=Re[C];X.indexOf(Q)>=0&&(pe[C]=Q)});var te=Object.keys(pe);O.textureFormats=te;var me=[];Object.keys(pe).forEach(function(C){var Q=pe[C];me[Q]=C});var Me=[];Object.keys(Le).forEach(function(C){var Q=Le[C];Me[Q]=C});var ue=[];Object.keys(Se).forEach(function(C){var Q=Se[C];ue[Q]=C});var ze=[];Object.keys(he).forEach(function(C){var Q=he[C];ze[Q]=C});var ce=[];Object.keys(ye).forEach(function(C){var Q=ye[C];ce[Q]=C});var De=te.reduce(function(C,Q){var j=pe[Q];return j===Zn||j===Qs||j===Zn||j===Eo||j===Lo||j===Hi||w.ext_srgb&&(j===ls||j===La)?C[j]=j:j===mi||Q.indexOf("rgba")>=0?C[j]=Oo:C[j]=pi,C},{});function de(){this.internalformat=Oo,this.format=Oo,this.type=_r,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=sf,this.width=0,this.height=0,this.channels=0}function Ce(C,Q){C.internalformat=Q.internalformat,C.format=Q.format,C.type=Q.type,C.compressed=Q.compressed,C.premultiplyAlpha=Q.premultiplyAlpha,C.flipY=Q.flipY,C.unpackAlignment=Q.unpackAlignment,C.colorSpace=Q.colorSpace,C.width=Q.width,C.height=Q.height,C.channels=Q.channels}function et(C,Q){if(!(typeof Q!="object"||!Q)){if("premultiplyAlpha"in Q&&(I.type(Q.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),C.premultiplyAlpha=Q.premultiplyAlpha),"flipY"in Q&&(I.type(Q.flipY,"boolean","invalid texture flip"),C.flipY=Q.flipY),"alignment"in Q&&(I.oneOf(Q.alignment,[1,2,4,8],"invalid texture unpack alignment"),C.unpackAlignment=Q.alignment),"colorSpace"in Q&&(I.parameter(Q.colorSpace,Ae,"invalid colorSpace"),C.colorSpace=Ae[Q.colorSpace]),"type"in Q){var j=Q.type;I(w.oes_texture_float||!(j==="float"||j==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),I(w.oes_texture_half_float||!(j==="half float"||j==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),I(w.webgl_depth_texture||!(j==="uint16"||j==="uint32"||j==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),I.parameter(j,Le,"invalid texture type"),C.type=Le[j]}var Be=C.width,It=C.height,N=C.channels,x=!1;"shape"in Q?(I(Array.isArray(Q.shape)&&Q.shape.length>=2,"shape must be an array"),Be=Q.shape[0],It=Q.shape[1],Q.shape.length===3&&(N=Q.shape[2],I(N>0&&N<=4,"invalid number of channels"),x=!0),I(Be>=0&&Be<=O.maxTextureSize,"invalid width"),I(It>=0&&It<=O.maxTextureSize,"invalid height")):("radius"in Q&&(Be=It=Q.radius,I(Be>=0&&Be<=O.maxTextureSize,"invalid radius")),"width"in Q&&(Be=Q.width,I(Be>=0&&Be<=O.maxTextureSize,"invalid width")),"height"in Q&&(It=Q.height,I(It>=0&&It<=O.maxTextureSize,"invalid height")),"channels"in Q&&(N=Q.channels,I(N>0&&N<=4,"invalid number of channels"),x=!0)),C.width=Be|0,C.height=It|0,C.channels=N|0;var M=!1;if("format"in Q){var U=Q.format;I(w.webgl_depth_texture||!(U==="depth"||U==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),I.parameter(U,pe,"invalid texture format");var $=C.internalformat=pe[U];C.format=De[$],U in Le&&("type"in Q||(C.type=Le[U])),U in Re&&(C.compressed=!0),M=!0}!x&&M?C.channels=ho[C.format]:x&&!M?C.channels!==rc[C.format]&&(C.format=C.internalformat=rc[C.channels]):M&&x&&I(C.channels===ho[C.format],"number of channels inconsistent with specified format")}}function lt(C){p.pixelStorei(kl,C.flipY),p.pixelStorei(af,C.premultiplyAlpha),p.pixelStorei(Gl,C.colorSpace),p.pixelStorei(Ml,C.unpackAlignment)}function Oe(){de.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ie(C,Q){var j=null;if(pf(Q)?j=Q:Q&&(I.type(Q,"object","invalid pixel data type"),et(C,Q),"x"in Q&&(C.xOffset=Q.x|0),"y"in Q&&(C.yOffset=Q.y|0),pf(Q.data)&&(j=Q.data)),I(!C.compressed||j instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Q.copy){I(!j,"can not specify copy and data field for the same texture");var Be=ie.viewportWidth,It=ie.viewportHeight;C.width=C.width||Be-C.xOffset,C.height=C.height||It-C.yOffset,C.needsCopy=!0,I(C.xOffset>=0&&C.xOffset<Be&&C.yOffset>=0&&C.yOffset<It&&C.width>0&&C.width<=Be&&C.height>0&&C.height<=It,"copy texture read out of bounds")}else if(!j)C.width=C.width||1,C.height=C.height||1,C.channels=C.channels||4;else if(ot(j))C.channels=C.channels||4,C.data=j,!("type"in Q)&&C.type===_r&&(C.type=cc(j));else if(df(j))C.channels=C.channels||4,Bl(C,j),C.alignment=1,C.needsFree=!0;else if(Qt(j)){var N=j.data;!Array.isArray(N)&&C.type===_r&&(C.type=cc(N));var x=j.shape,M=j.stride,U,$,F,k,z,R;x.length===3?(F=x[2],R=M[2]):(I(x.length===2,"invalid ndarray pixel data, must be 2 or 3D"),F=1,R=1),U=x[0],$=x[1],k=M[0],z=M[1],C.alignment=1,C.width=U,C.height=$,C.channels=F,C.format=C.internalformat=rc[F],C.needsFree=!0,Vl(C,N,k,z,R,j.offset)}else if(hf(j)||ou(j)||zl(j))hf(j)||ou(j)?C.element=j:C.element=j.canvas,C.width=C.element.width,C.height=C.element.height,C.channels=4;else if(sc(j))C.element=j,C.width=j.width,C.height=j.height,C.channels=4;else if(vf(j))C.element=j,C.width=j.naturalWidth,C.height=j.naturalHeight,C.channels=4;else if(uc(j))C.element=j,C.width=j.videoWidth,C.height=j.videoHeight,C.channels=4;else if(ac(j)){var L=C.width||j[0].length,T=C.height||j.length,B=C.channels;Dn(j[0][0])?B=B||j[0][0].length:B=B||1;for(var W=Xn.shape(j),oe=1,ae=0;ae<W.length;++ae)oe*=W[ae];var re=Ul(C,oe);Xn.flatten(j,W,"",re),fc(C,re),C.alignment=1,C.width=L,C.height=T,C.channels=B,C.format=C.internalformat=rc[B],C.needsFree=!0}C.type===ji?I(O.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):C.type===Mo&&I(O.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function se(C,Q,j){var Be=C.element,It=C.data,N=C.internalformat,x=C.format,M=C.type,U=C.width,$=C.height;lt(C),Be?p.texImage2D(Q,j,x,x,M,Be):C.compressed?p.compressedTexImage2D(Q,j,N,U,$,0,It):C.needsCopy?(q(),p.copyTexImage2D(Q,j,x,C.xOffset,C.yOffset,U,$,0)):p.texImage2D(Q,j,x,U,$,0,x,M,It||null)}function ut(C,Q,j,Be,It){var N=C.element,x=C.data,M=C.internalformat,U=C.format,$=C.type,F=C.width,k=C.height;lt(C),N?p.texSubImage2D(Q,It,j,Be,U,$,N):C.compressed?p.compressedTexSubImage2D(Q,It,j,Be,M,F,k,x):C.needsCopy?(q(),p.copyTexSubImage2D(Q,It,j,Be,C.xOffset,C.yOffset,F,k)):p.texSubImage2D(Q,It,j,Be,F,k,U,$,x)}var yt=[];function Xe(){return yt.pop()||new Oe}function Tt(C){C.needsFree&&$n.freeType(C.data),Oe.call(C),yt.push(C)}function vt(){de.call(this),this.genMipmaps=!1,this.mipmapHint=ru,this.mipmask=0,this.images=Array(16)}function St(C,Q,j){var Be=C.images[0]=Xe();C.mipmask=1,Be.width=C.width=Q,Be.height=C.height=j,Be.channels=C.channels=4}function jt(C,Q){var j=null;if(pf(Q))j=C.images[0]=Xe(),Ce(j,C),Ie(j,Q),C.mipmask=1;else if(et(C,Q),Array.isArray(Q.mipmap))for(var Be=Q.mipmap,It=0;It<Be.length;++It)j=C.images[It]=Xe(),Ce(j,C),j.width>>=It,j.height>>=It,Ie(j,Be[It]),C.mipmask|=1<<It;else j=C.images[0]=Xe(),Ce(j,C),Ie(j,Q),C.mipmask=1;Ce(C,C.images[0]),C.compressed&&(C.internalformat===jo||C.internalformat===gi||C.internalformat===yi||C.internalformat===Ei)&&I(C.width%4===0&&C.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function nr(C,Q){for(var j=C.images,Be=0;Be<j.length;++Be){if(!j[Be])return;se(j[Be],Q,Be)}}var fr=[];function Lt(){var C=fr.pop()||new vt;de.call(C),C.mipmask=0;for(var Q=0;Q<16;++Q)C.images[Q]=null;return C}function Rt(C){for(var Q=C.images,j=0;j<Q.length;++j)Q[j]&&Tt(Q[j]),Q[j]=null;fr.push(C)}function _n(){this.minFilter=ec,this.magFilter=ec,this.wrapS=Ju,this.wrapT=Ju,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ru}function rr(C,Q){if("min"in Q){var j=Q.min;I.parameter(j,he),C.minFilter=he[j],Pl.indexOf(C.minFilter)>=0&&!("faces"in Q)&&(C.genMipmaps=!0)}if("mag"in Q){var Be=Q.mag;I.parameter(Be,Se),C.magFilter=Se[Be]}var It=C.wrapS,N=C.wrapT;if("wrap"in Q){var x=Q.wrap;typeof x=="string"?(I.parameter(x,ye),It=N=ye[x]):Array.isArray(x)&&(I.parameter(x[0],ye),I.parameter(x[1],ye),It=ye[x[0]],N=ye[x[1]])}else{if("wrapS"in Q){var M=Q.wrapS;I.parameter(M,ye),It=ye[M]}if("wrapT"in Q){var U=Q.wrapT;I.parameter(U,ye),N=ye[U]}}if(C.wrapS=It,C.wrapT=N,"anisotropic"in Q){var $=Q.anisotropic;I(typeof $=="number"&&$>=1&&$<=O.maxAnisotropic,"aniso samples must be between 1 and "),C.anisotropic=Q.anisotropic}if("mipmap"in Q){var F=!1;switch(typeof Q.mipmap){case"string":I.parameter(Q.mipmap,ve,"invalid mipmap hint"),C.mipmapHint=ve[Q.mipmap],C.genMipmaps=!0,F=!0;break;case"boolean":F=C.genMipmaps=Q.mipmap;break;case"object":I(Array.isArray(Q.mipmap),"invalid mipmap type"),C.genMipmaps=!1,F=!0;break;default:I.raise("invalid mipmap type")}F&&!("min"in Q)&&(C.minFilter=nu)}}function Kn(C,Q){p.texParameteri(Q,nf,C.minFilter),p.texParameteri(Q,Rl,C.magFilter),p.texParameteri(Q,eu,C.wrapS),p.texParameteri(Q,tu,C.wrapT),w.ext_texture_filter_anisotropic&&p.texParameteri(Q,Ll,C.anisotropic),C.genMipmaps&&(p.hint(Cl,C.mipmapHint),p.generateMipmap(Q))}var qn=0,lr={},dr=O.maxTextureUnits,wn=Array(dr).map(function(){return null});function Et(C){de.call(this),this.mipmask=0,this.internalformat=Oo,this.id=qn++,this.refCount=1,this.target=C,this.texture=p.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new _n,ee.profile&&(this.stats={size:0})}function Nr(C){p.activeTexture(hs),p.bindTexture(C.target,C.texture)}function qt(){var C=wn[0];C?p.bindTexture(C.target,C.texture):p.bindTexture(cr,null)}function at(C){var Q=C.texture;I(Q,"must not double destroy texture");var j=C.unit,Be=C.target;j>=0&&(p.activeTexture(hs+j),p.bindTexture(Be,null),wn[j]=null),p.deleteTexture(Q),C.texture=null,C.params=null,C.pixels=null,C.refCount=0,delete lr[C.id],Y.textureCount--}Z(Et.prototype,{bind:function(){var C=this;C.bindCount+=1;var Q=C.unit;if(Q<0){for(var j=0;j<dr;++j){var Be=wn[j];if(Be){if(Be.bindCount>0)continue;Be.unit=-1}wn[j]=C,Q=j;break}Q>=dr&&I.raise("insufficient number of texture units"),ee.profile&&Y.maxTextureUnits<Q+1&&(Y.maxTextureUnits=Q+1),C.unit=Q,p.activeTexture(hs+Q),p.bindTexture(C.target,C.texture)}return Q},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&at(this)}});function Ct(C,Q){var j=new Et(cr);lr[j.id]=j,Y.textureCount++;function Be(x,M){var U=j.texInfo;_n.call(U);var $=Lt();return typeof x=="number"?typeof M=="number"?St($,x|0,M|0):St($,x|0,x|0):x?(I.type(x,"object","invalid arguments to regl.texture"),rr(U,x),jt($,x)):St($,1,1),U.genMipmaps&&($.mipmask=($.width<<1)-1),j.mipmask=$.mipmask,Ce(j,$),I.texture2D(U,$,O),j.internalformat=$.internalformat,Be.width=$.width,Be.height=$.height,Nr(j),nr($,cr),Kn(U,cr),qt(),Rt($),ee.profile&&(j.stats.size=iu(j.internalformat,j.type,$.width,$.height,U.genMipmaps,!1)),Be.format=me[j.internalformat],Be.type=Me[j.type],Be.mag=ue[U.magFilter],Be.min=ze[U.minFilter],Be.wrapS=ce[U.wrapS],Be.wrapT=ce[U.wrapT],Be}function It(x,M,U,$){I(!!x,"must specify image data");var F=M|0,k=U|0,z=$|0,R=Xe();return Ce(R,j),R.width=0,R.height=0,Ie(R,x),R.width=R.width||(j.width>>z)-F,R.height=R.height||(j.height>>z)-k,I(j.type===R.type&&j.format===R.format&&j.internalformat===R.internalformat,"incompatible format for texture.subimage"),I(F>=0&&k>=0&&F+R.width<=j.width&&k+R.height<=j.height,"texture.subimage write out of bounds"),I(j.mipmask&1<<z,"missing mipmap data"),I(R.data||R.element||R.needsCopy,"missing image data"),Nr(j),ut(R,cr,F,k,z),qt(),Tt(R),Be}function N(x,M){var U=x|0,$=M|0||U;if(U===j.width&&$===j.height)return Be;Be.width=j.width=U,Be.height=j.height=$,Nr(j);for(var F=0;j.mipmask>>F;++F){var k=U>>F,z=$>>F;if(!k||!z)break;p.texImage2D(cr,F,j.format,k,z,0,j.format,j.type,null)}return qt(),ee.profile&&(j.stats.size=iu(j.internalformat,j.type,U,$,!1,!1)),Be}return Be(C,Q),Be.subimage=It,Be.resize=N,Be._reglType="texture2d",Be._texture=j,ee.profile&&(Be.stats=j.stats),Be.destroy=function(){j.decRef()},Be}function Ut(C,Q,j,Be,It,N){var x=new Et(Ho);lr[x.id]=x,Y.cubeCount++;var M=new Array(6);function U(k,z,R,L,T,B){var W,oe=x.texInfo;for(_n.call(oe),W=0;W<6;++W)M[W]=Lt();if(typeof k=="number"||!k){var ae=k|0||1;for(W=0;W<6;++W)St(M[W],ae,ae)}else if(typeof k=="object")if(z)jt(M[0],k),jt(M[1],z),jt(M[2],R),jt(M[3],L),jt(M[4],T),jt(M[5],B);else if(rr(oe,k),et(x,k),"faces"in k){var re=k.faces;for(I(Array.isArray(re)&&re.length===6,"cube faces must be a length 6 array"),W=0;W<6;++W)I(typeof re[W]=="object"&&!!re[W],"invalid input for cube map face"),Ce(M[W],x),jt(M[W],re[W])}else for(W=0;W<6;++W)jt(M[W],k);else I.raise("invalid arguments to cube map");for(Ce(x,M[0]),O.npotTextureCube||I(Da(x.width)&&Da(x.height),"your browser does not support non power or two texture dimensions"),oe.genMipmaps?x.mipmask=(M[0].width<<1)-1:x.mipmask=M[0].mipmask,I.textureCube(x,oe,M,O),x.internalformat=M[0].internalformat,U.width=M[0].width,U.height=M[0].height,Nr(x),W=0;W<6;++W)nr(M[W],Ca+W);for(Kn(oe,Ho),qt(),ee.profile&&(x.stats.size=iu(x.internalformat,x.type,U.width,U.height,oe.genMipmaps,!0)),U.format=me[x.internalformat],U.type=Me[x.type],U.mag=ue[oe.magFilter],U.min=ze[oe.minFilter],U.wrapS=ce[oe.wrapS],U.wrapT=ce[oe.wrapT],W=0;W<6;++W)Rt(M[W]);return U}function $(k,z,R,L,T){I(!!z,"must specify image data"),I(typeof k=="number"&&k===(k|0)&&k>=0&&k<6,"invalid face");var B=R|0,W=L|0,oe=T|0,ae=Xe();return Ce(ae,x),ae.width=0,ae.height=0,Ie(ae,z),ae.width=ae.width||(x.width>>oe)-B,ae.height=ae.height||(x.height>>oe)-W,I(x.type===ae.type&&x.format===ae.format&&x.internalformat===ae.internalformat,"incompatible format for texture.subimage"),I(B>=0&&W>=0&&B+ae.width<=x.width&&W+ae.height<=x.height,"texture.subimage write out of bounds"),I(x.mipmask&1<<oe,"missing mipmap data"),I(ae.data||ae.element||ae.needsCopy,"missing image data"),Nr(x),ut(ae,Ca+k,B,W,oe),qt(),Tt(ae),U}function F(k){var z=k|0;if(z!==x.width){U.width=x.width=z,U.height=x.height=z,Nr(x);for(var R=0;R<6;++R)for(var L=0;x.mipmask>>L;++L)p.texImage2D(Ca+R,L,x.format,z>>L,z>>L,0,x.format,x.type,null);return qt(),ee.profile&&(x.stats.size=iu(x.internalformat,x.type,U.width,U.height,!1,!0)),U}}return U(C,Q,j,Be,It,N),U.subimage=$,U.resize=F,U._reglType="textureCube",U._texture=x,ee.profile&&(U.stats=x.stats),U.destroy=function(){x.decRef()},U}function On(){for(var C=0;C<dr;++C)p.activeTexture(hs+C),p.bindTexture(cr,null),wn[C]=null;Yt(lr).forEach(at),Y.cubeCount=0,Y.textureCount=0}ee.profile&&(Y.getTotalTextureSize=function(){var C=0;return Object.keys(lr).forEach(function(Q){C+=lr[Q].stats.size}),C});function To(){for(var C=0;C<dr;++C){var Q=wn[C];Q&&(Q.bindCount=0,Q.unit=-1,wn[C]=null)}Yt(lr).forEach(function(j){j.texture=p.createTexture(),p.bindTexture(j.target,j.texture);for(var Be=0;Be<32;++Be)if(j.mipmask&1<<Be)if(j.target===cr)p.texImage2D(cr,Be,j.internalformat,j.width>>Be,j.height>>Be,0,j.internalformat,j.type,null);else for(var It=0;It<6;++It)p.texImage2D(Ca+It,Be,j.internalformat,j.width>>Be,j.height>>Be,0,j.internalformat,j.type,null);Kn(j.texInfo,j.target)})}function ha(){for(var C=0;C<dr;++C){var Q=wn[C];Q&&(Q.bindCount=0,Q.unit=-1,wn[C]=null),p.activeTexture(hs+C),p.bindTexture(cr,null),p.bindTexture(Ho,null)}}return{create2D:Ct,createCube:Ut,clear:On,getTexture:function(C){return null},restore:To,refresh:ha}}var Yi=36161,au=32854,Xl=32855,mf=36194,gf=33189,yf=36168,Ef=34041,bf=35907,xf=34836,lc=34842,_f=34843,xo=[];xo[au]=2,xo[Xl]=2,xo[mf]=2,xo[gf]=2,xo[yf]=1,xo[Ef]=4,xo[bf]=4,xo[xf]=16,xo[lc]=8,xo[_f]=6;function dc(p,w,O){return xo[p]*w*O}var Wl=function(p,w,O,q,ie){var Y={rgba4:au,rgb565:mf,"rgb5 a1":Xl,depth:gf,stencil:yf,"depth stencil":Ef};w.ext_srgb&&(Y.srgba=bf),w.ext_color_buffer_half_float&&(Y.rgba16f=lc,Y.rgb16f=_f),w.webgl_color_buffer_float&&(Y.rgba32f=xf);var ee=[];Object.keys(Y).forEach(function(pe){var Re=Y[pe];ee[Re]=pe});var ve=0,ye={};function Se(pe){this.id=ve++,this.refCount=1,this.renderbuffer=pe,this.format=au,this.width=0,this.height=0,ie.profile&&(this.stats={size:0})}Se.prototype.decRef=function(){--this.refCount<=0&&he(this)};function he(pe){var Re=pe.renderbuffer;I(Re,"must not double destroy renderbuffer"),p.bindRenderbuffer(Yi,null),p.deleteRenderbuffer(Re),pe.renderbuffer=null,pe.refCount=0,delete ye[pe.id],q.renderbufferCount--}function Ae(pe,Re){var X=new Se(p.createRenderbuffer());ye[X.id]=X,q.renderbufferCount++;function te(Me,ue){var ze=0,ce=0,De=au;if(typeof Me=="object"&&Me){var de=Me;if("shape"in de){var Ce=de.shape;I(Array.isArray(Ce)&&Ce.length>=2,"invalid renderbuffer shape"),ze=Ce[0]|0,ce=Ce[1]|0}else"radius"in de&&(ze=ce=de.radius|0),"width"in de&&(ze=de.width|0),"height"in de&&(ce=de.height|0);"format"in de&&(I.parameter(de.format,Y,"invalid renderbuffer format"),De=Y[de.format])}else typeof Me=="number"?(ze=Me|0,typeof ue=="number"?ce=ue|0:ce=ze):Me?I.raise("invalid arguments to renderbuffer constructor"):ze=ce=1;if(I(ze>0&&ce>0&&ze<=O.maxRenderbufferSize&&ce<=O.maxRenderbufferSize,"invalid renderbuffer size"),!(ze===X.width&&ce===X.height&&De===X.format))return te.width=X.width=ze,te.height=X.height=ce,X.format=De,p.bindRenderbuffer(Yi,X.renderbuffer),p.renderbufferStorage(Yi,De,ze,ce),I(p.getError()===0,"invalid render buffer format"),ie.profile&&(X.stats.size=dc(X.format,X.width,X.height)),te.format=ee[X.format],te}function me(Me,ue){var ze=Me|0,ce=ue|0||ze;return ze===X.width&&ce===X.height||(I(ze>0&&ce>0&&ze<=O.maxRenderbufferSize&&ce<=O.maxRenderbufferSize,"invalid renderbuffer size"),te.width=X.width=ze,te.height=X.height=ce,p.bindRenderbuffer(Yi,X.renderbuffer),p.renderbufferStorage(Yi,X.format,ze,ce),I(p.getError()===0,"invalid render buffer format"),ie.profile&&(X.stats.size=dc(X.format,X.width,X.height))),te}return te(pe,Re),te.resize=me,te._reglType="renderbuffer",te._renderbuffer=X,ie.profile&&(te.stats=X.stats),te.destroy=function(){X.decRef()},te}ie.profile&&(q.getTotalRenderbufferSize=function(){var pe=0;return Object.keys(ye).forEach(function(Re){pe+=ye[Re].stats.size}),pe});function Le(){Yt(ye).forEach(function(pe){pe.renderbuffer=p.createRenderbuffer(),p.bindRenderbuffer(Yi,pe.renderbuffer),p.renderbufferStorage(Yi,pe.format,pe.width,pe.height)}),p.bindRenderbuffer(Yi,null)}return{create:Ae,clear:function(){Yt(ye).forEach(he)},restore:Le}},Yo=36160,hc=36161,Ki=3553,vs=34069,vc=36064,su=36096,wf=36128,Sf=33306,pc=36053,Hl=36054,Tf=36055,If=36057,Zl=36061,Af=36193,jl=5121,Nf=5126,mc=6407,Rf=6408,Df=6402,Cf=[mc,Rf],uu=[];uu[Rf]=4,uu[mc]=3;var gc=[];gc[jl]=1,gc[Nf]=4,gc[Af]=2;var Yl=32854,Kl=32855,ql=36194,Ql=33189,vh=36168,Of=34041,ph=35907,Jl=34836,ed=34842,td=34843,nd=[Yl,Kl,ql,ph,ed,td,Jl],Ga={};Ga[pc]="complete",Ga[Hl]="incomplete attachment",Ga[If]="incomplete dimensions",Ga[Tf]="incomplete, missing attachment",Ga[Zl]="unsupported";function rd(p,w,O,q,ie,Y){var ee={cur:null,next:null,dirty:!1,setFBO:null},ve=["rgba"],ye=["rgba4","rgb565","rgb5 a1"];w.ext_srgb&&ye.push("srgba"),w.ext_color_buffer_half_float&&ye.push("rgba16f","rgb16f"),w.webgl_color_buffer_float&&ye.push("rgba32f");var Se=["uint8"];w.oes_texture_half_float&&Se.push("half float","float16"),w.oes_texture_float&&Se.push("float","float32");function he(Oe,Ie,se){this.target=Oe,this.texture=Ie,this.renderbuffer=se;var ut=0,yt=0;Ie?(ut=Ie.width,yt=Ie.height):se&&(ut=se.width,yt=se.height),this.width=ut,this.height=yt}function Ae(Oe){Oe&&(Oe.texture&&Oe.texture._texture.decRef(),Oe.renderbuffer&&Oe.renderbuffer._renderbuffer.decRef())}function Le(Oe,Ie,se){if(Oe)if(Oe.texture){var ut=Oe.texture._texture,yt=Math.max(1,ut.width),Xe=Math.max(1,ut.height);I(yt===Ie&&Xe===se,"inconsistent width/height for supplied texture"),ut.refCount+=1}else{var Tt=Oe.renderbuffer._renderbuffer;I(Tt.width===Ie&&Tt.height===se,"inconsistent width/height for renderbuffer"),Tt.refCount+=1}}function pe(Oe,Ie){Ie&&(Ie.texture?p.framebufferTexture2D(Yo,Oe,Ie.target,Ie.texture._texture.texture,0):p.framebufferRenderbuffer(Yo,Oe,hc,Ie.renderbuffer._renderbuffer.renderbuffer))}function Re(Oe){var Ie=Ki,se=null,ut=null,yt=Oe;typeof Oe=="object"&&(yt=Oe.data,"target"in Oe&&(Ie=Oe.target|0)),I.type(yt,"function","invalid attachment data");var Xe=yt._reglType;return Xe==="texture2d"?(se=yt,I(Ie===Ki)):Xe==="textureCube"?(se=yt,I(Ie>=vs&&Ie<vs+6,"invalid cube map target")):Xe==="renderbuffer"?(ut=yt,Ie=hc):I.raise("invalid regl object for attachment"),new he(Ie,se,ut)}function X(Oe,Ie,se,ut,yt){if(se){var Xe=q.create2D({width:Oe,height:Ie,format:ut,type:yt});return Xe._texture.refCount=0,new he(Ki,Xe,null)}else{var Tt=ie.create({width:Oe,height:Ie,format:ut});return Tt._renderbuffer.refCount=0,new he(hc,null,Tt)}}function te(Oe){return Oe&&(Oe.texture||Oe.renderbuffer)}function me(Oe,Ie,se){Oe&&(Oe.texture?Oe.texture.resize(Ie,se):Oe.renderbuffer&&Oe.renderbuffer.resize(Ie,se),Oe.width=Ie,Oe.height=se)}var Me=0,ue={};function ze(){this.id=Me++,ue[this.id]=this,this.framebuffer=p.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ce(Oe){Oe.colorAttachments.forEach(Ae),Ae(Oe.depthAttachment),Ae(Oe.stencilAttachment),Ae(Oe.depthStencilAttachment)}function De(Oe){var Ie=Oe.framebuffer;I(Ie,"must not double destroy framebuffer"),p.deleteFramebuffer(Ie),Oe.framebuffer=null,Y.framebufferCount--,delete ue[Oe.id]}function de(Oe){var Ie;p.bindFramebuffer(Yo,Oe.framebuffer);var se=Oe.colorAttachments;for(Ie=0;Ie<se.length;++Ie)pe(vc+Ie,se[Ie]);for(Ie=se.length;Ie<O.maxColorAttachments;++Ie)p.framebufferTexture2D(Yo,vc+Ie,Ki,null,0);p.framebufferTexture2D(Yo,Sf,Ki,null,0),p.framebufferTexture2D(Yo,su,Ki,null,0),p.framebufferTexture2D(Yo,wf,Ki,null,0),pe(su,Oe.depthAttachment),pe(wf,Oe.stencilAttachment),pe(Sf,Oe.depthStencilAttachment);var ut=p.checkFramebufferStatus(Yo);!p.isContextLost()&&ut!==pc&&I.raise("framebuffer configuration not supported, status = "+Ga[ut]),p.bindFramebuffer(Yo,ee.next?ee.next.framebuffer:null),ee.cur=ee.next,p.getError()}function Ce(Oe,Ie){var se=new ze;Y.framebufferCount++;function ut(Xe,Tt){var vt;I(ee.next!==se,"can not update framebuffer which is currently in use");var St=0,jt=0,nr=!0,fr=!0,Lt=null,Rt=!0,_n="rgba",rr="uint8",Kn=1,qn=null,lr=null,dr=null,wn=!1;if(typeof Xe=="number")St=Xe|0,jt=Tt|0||St;else if(!Xe)St=jt=1;else{I.type(Xe,"object","invalid arguments for framebuffer");var Et=Xe;if("shape"in Et){var Nr=Et.shape;I(Array.isArray(Nr)&&Nr.length>=2,"invalid shape for framebuffer"),St=Nr[0],jt=Nr[1]}else"radius"in Et&&(St=jt=Et.radius),"width"in Et&&(St=Et.width),"height"in Et&&(jt=Et.height);("color"in Et||"colors"in Et)&&(Lt=Et.color||Et.colors,Array.isArray(Lt)&&I(Lt.length===1||w.webgl_draw_buffers,"multiple render targets not supported")),Lt||("colorCount"in Et&&(Kn=Et.colorCount|0,I(Kn>0,"invalid color buffer count")),"colorTexture"in Et&&(Rt=!!Et.colorTexture,_n="rgba4"),"colorType"in Et&&(rr=Et.colorType,Rt?(I(w.oes_texture_float||!(rr==="float"||rr==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),I(w.oes_texture_half_float||!(rr==="half float"||rr==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):rr==="half float"||rr==="float16"?(I(w.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),_n="rgba16f"):(rr==="float"||rr==="float32")&&(I(w.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),_n="rgba32f"),I.oneOf(rr,Se,"invalid color type")),"colorFormat"in Et&&(_n=Et.colorFormat,ve.indexOf(_n)>=0?Rt=!0:ye.indexOf(_n)>=0?Rt=!1:Rt?I.oneOf(Et.colorFormat,ve,"invalid color format for texture"):I.oneOf(Et.colorFormat,ye,"invalid color format for renderbuffer"))),("depthTexture"in Et||"depthStencilTexture"in Et)&&(wn=!!(Et.depthTexture||Et.depthStencilTexture),I(!wn||w.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Et&&(typeof Et.depth=="boolean"?nr=Et.depth:(qn=Et.depth,fr=!1)),"stencil"in Et&&(typeof Et.stencil=="boolean"?fr=Et.stencil:(lr=Et.stencil,nr=!1)),"depthStencil"in Et&&(typeof Et.depthStencil=="boolean"?nr=fr=Et.depthStencil:(dr=Et.depthStencil,nr=!1,fr=!1))}var qt=null,at=null,Ct=null,Ut=null;if(Array.isArray(Lt))qt=Lt.map(Re);else if(Lt)qt=[Re(Lt)];else for(qt=new Array(Kn),vt=0;vt<Kn;++vt)qt[vt]=X(St,jt,Rt,_n,rr);I(w.webgl_draw_buffers||qt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),I(qt.length<=O.maxColorAttachments,"too many color attachments, not supported"),St=St||qt[0].width,jt=jt||qt[0].height,qn?at=Re(qn):nr&&!fr&&(at=X(St,jt,wn,"depth","uint32")),lr?Ct=Re(lr):fr&&!nr&&(Ct=X(St,jt,!1,"stencil","uint8")),dr?Ut=Re(dr):!qn&&!lr&&fr&&nr&&(Ut=X(St,jt,wn,"depth stencil","depth stencil")),I(!!qn+!!lr+!!dr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var On=null;for(vt=0;vt<qt.length;++vt)if(Le(qt[vt],St,jt),I(!qt[vt]||qt[vt].texture&&Cf.indexOf(qt[vt].texture._texture.format)>=0||qt[vt].renderbuffer&&nd.indexOf(qt[vt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+vt+" is invalid"),qt[vt]&&qt[vt].texture){var To=uu[qt[vt].texture._texture.format]*gc[qt[vt].texture._texture.type];On===null?On=To:I(On===To,"all color attachments much have the same number of bits per pixel.")}return Le(at,St,jt),I(!at||at.texture&&at.texture._texture.format===Df||at.renderbuffer&&at.renderbuffer._renderbuffer.format===Ql,"invalid depth attachment for framebuffer object"),Le(Ct,St,jt),I(!Ct||Ct.renderbuffer&&Ct.renderbuffer._renderbuffer.format===vh,"invalid stencil attachment for framebuffer object"),Le(Ut,St,jt),I(!Ut||Ut.texture&&Ut.texture._texture.format===Of||Ut.renderbuffer&&Ut.renderbuffer._renderbuffer.format===Of,"invalid depth-stencil attachment for framebuffer object"),ce(se),se.width=St,se.height=jt,se.colorAttachments=qt,se.depthAttachment=at,se.stencilAttachment=Ct,se.depthStencilAttachment=Ut,ut.color=qt.map(te),ut.depth=te(at),ut.stencil=te(Ct),ut.depthStencil=te(Ut),ut.width=se.width,ut.height=se.height,de(se),ut}function yt(Xe,Tt){I(ee.next!==se,"can not resize a framebuffer which is currently in use");var vt=Math.max(Xe|0,1),St=Math.max(Tt|0||vt,1);if(vt===se.width&&St===se.height)return ut;for(var jt=se.colorAttachments,nr=0;nr<jt.length;++nr)me(jt[nr],vt,St);return me(se.depthAttachment,vt,St),me(se.stencilAttachment,vt,St),me(se.depthStencilAttachment,vt,St),se.width=ut.width=vt,se.height=ut.height=St,de(se),ut}return ut(Oe,Ie),Z(ut,{resize:yt,_reglType:"framebuffer",_framebuffer:se,destroy:function(){De(se),ce(se)},use:function(Xe){ee.setFBO({framebuffer:ut},Xe)}})}function et(Oe){var Ie=Array(6);function se(yt){var Xe;I(Ie.indexOf(ee.next)<0,"can not update framebuffer which is currently in use");var Tt={color:null},vt=0,St=null,jt="rgba",nr="uint8",fr=1;if(typeof yt=="number")vt=yt|0;else if(!yt)vt=1;else{I.type(yt,"object","invalid arguments for framebuffer");var Lt=yt;if("shape"in Lt){var Rt=Lt.shape;I(Array.isArray(Rt)&&Rt.length>=2,"invalid shape for framebuffer"),I(Rt[0]===Rt[1],"cube framebuffer must be square"),vt=Rt[0]}else"radius"in Lt&&(vt=Lt.radius|0),"width"in Lt?(vt=Lt.width|0,"height"in Lt&&I(Lt.height===vt,"must be square")):"height"in Lt&&(vt=Lt.height|0);("color"in Lt||"colors"in Lt)&&(St=Lt.color||Lt.colors,Array.isArray(St)&&I(St.length===1||w.webgl_draw_buffers,"multiple render targets not supported")),St||("colorCount"in Lt&&(fr=Lt.colorCount|0,I(fr>0,"invalid color buffer count")),"colorType"in Lt&&(I.oneOf(Lt.colorType,Se,"invalid color type"),nr=Lt.colorType),"colorFormat"in Lt&&(jt=Lt.colorFormat,I.oneOf(Lt.colorFormat,ve,"invalid color format for texture"))),"depth"in Lt&&(Tt.depth=Lt.depth),"stencil"in Lt&&(Tt.stencil=Lt.stencil),"depthStencil"in Lt&&(Tt.depthStencil=Lt.depthStencil)}var _n;if(St)if(Array.isArray(St))for(_n=[],Xe=0;Xe<St.length;++Xe)_n[Xe]=St[Xe];else _n=[St];else{_n=Array(fr);var rr={radius:vt,format:jt,type:nr};for(Xe=0;Xe<fr;++Xe)_n[Xe]=q.createCube(rr)}for(Tt.color=Array(_n.length),Xe=0;Xe<_n.length;++Xe){var Kn=_n[Xe];I(typeof Kn=="function"&&Kn._reglType==="textureCube","invalid cube map"),vt=vt||Kn.width,I(Kn.width===vt&&Kn.height===vt,"invalid cube map shape"),Tt.color[Xe]={target:vs,data:_n[Xe]}}for(Xe=0;Xe<6;++Xe){for(var qn=0;qn<_n.length;++qn)Tt.color[qn].target=vs+Xe;Xe>0&&(Tt.depth=Ie[0].depth,Tt.stencil=Ie[0].stencil,Tt.depthStencil=Ie[0].depthStencil),Ie[Xe]?Ie[Xe](Tt):Ie[Xe]=Ce(Tt)}return Z(se,{width:vt,height:vt,color:_n})}function ut(yt){var Xe,Tt=yt|0;if(I(Tt>0&&Tt<=O.maxCubeMapSize,"invalid radius for cube fbo"),Tt===se.width)return se;var vt=se.color;for(Xe=0;Xe<vt.length;++Xe)vt[Xe].resize(Tt);for(Xe=0;Xe<6;++Xe)Ie[Xe].resize(Tt);return se.width=se.height=Tt,se}return se(Oe),Z(se,{faces:Ie,resize:ut,_reglType:"framebufferCube",destroy:function(){Ie.forEach(function(yt){yt.destroy()})}})}function lt(){ee.cur=null,ee.next=null,ee.dirty=!0,Yt(ue).forEach(function(Oe){Oe.framebuffer=p.createFramebuffer(),de(Oe)})}return Z(ee,{getFramebuffer:function(Oe){if(typeof Oe=="function"&&Oe._reglType==="framebuffer"){var Ie=Oe._framebuffer;if(Ie instanceof ze)return Ie}return null},create:Ce,createCube:et,clear:function(){Yt(ue).forEach(De)},restore:lt})}var od=5126,cu=34962;function yc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=od,this.offset=0,this.stride=0,this.divisor=0}function id(p,w,O,q,ie){for(var Y=O.maxAttributes,ee=new Array(Y),ve=0;ve<Y;++ve)ee[ve]=new yc;var ye=0,Se={},he={Record:yc,scope:{},state:ee,currentVAO:null,targetVAO:null,restore:Le()?ue:function(){},createVAO:ze,getVAO:Re,destroyBuffer:Ae,setVAO:Le()?X:te,clear:Le()?me:function(){}};function Ae(ce){for(var De=0;De<ee.length;++De){var de=ee[De];de.buffer===ce&&(p.disableVertexAttribArray(De),de.buffer=null)}}function Le(){return w.oes_vertex_array_object}function pe(){return w.angle_instanced_arrays}function Re(ce){return typeof ce=="function"&&ce._vao?ce._vao:null}function X(ce){if(ce!==he.currentVAO){var De=Le();ce?De.bindVertexArrayOES(ce.vao):De.bindVertexArrayOES(null),he.currentVAO=ce}}function te(ce){if(ce!==he.currentVAO){if(ce)ce.bindAttrs();else for(var De=pe(),de=0;de<ee.length;++de){var Ce=ee[de];Ce.buffer?(p.enableVertexAttribArray(de),p.vertexAttribPointer(de,Ce.size,Ce.type,Ce.normalized,Ce.stride,Ce.offfset),De&&Ce.divisor&&De.vertexAttribDivisorANGLE(de,Ce.divisor)):(p.disableVertexAttribArray(de),p.vertexAttrib4f(de,Ce.x,Ce.y,Ce.z,Ce.w))}he.currentVAO=ce}}function me(){Yt(Se).forEach(function(ce){ce.destroy()})}function Me(){this.id=++ye,this.attributes=[];var ce=Le();ce?this.vao=ce.createVertexArrayOES():this.vao=null,Se[this.id]=this,this.buffers=[]}Me.prototype.bindAttrs=function(){for(var ce=pe(),De=this.attributes,de=0;de<De.length;++de){var Ce=De[de];Ce.buffer?(p.enableVertexAttribArray(de),p.bindBuffer(cu,Ce.buffer.buffer),p.vertexAttribPointer(de,Ce.size,Ce.type,Ce.normalized,Ce.stride,Ce.offset),ce&&Ce.divisor&&ce.vertexAttribDivisorANGLE(de,Ce.divisor)):(p.disableVertexAttribArray(de),p.vertexAttrib4f(de,Ce.x,Ce.y,Ce.z,Ce.w))}for(var et=De.length;et<Y;++et)p.disableVertexAttribArray(et)},Me.prototype.refresh=function(){var ce=Le();ce&&(ce.bindVertexArrayOES(this.vao),this.bindAttrs(),he.currentVAO=this)},Me.prototype.destroy=function(){if(this.vao){var ce=Le();this===he.currentVAO&&(he.currentVAO=null,ce.bindVertexArrayOES(null)),ce.deleteVertexArrayOES(this.vao),this.vao=null}Se[this.id]&&(delete Se[this.id],q.vaoCount-=1)};function ue(){var ce=Le();ce&&Yt(Se).forEach(function(De){De.refresh()})}function ze(ce){var De=new Me;q.vaoCount+=1;function de(Ce){I(Array.isArray(Ce),"arguments to vertex array constructor must be an array"),I(Ce.length<Y,"too many attributes"),I(Ce.length>0,"must specify at least one attribute");var et={},lt=De.attributes;lt.length=Ce.length;for(var Oe=0;Oe<Ce.length;++Oe){var Ie=Ce[Oe],se=lt[Oe]=new yc,ut=Ie.data||Ie;if(Array.isArray(ut)||ot(ut)||Qt(ut)){var yt;De.buffers[Oe]&&(yt=De.buffers[Oe],ot(ut)&&yt._buffer.byteLength>=ut.byteLength?yt.subdata(ut):(yt.destroy(),De.buffers[Oe]=null)),De.buffers[Oe]||(yt=De.buffers[Oe]=ie.create(Ie,cu,!1,!0)),se.buffer=ie.getBuffer(yt),se.size=se.buffer.dimension|0,se.normalized=!1,se.type=se.buffer.dtype,se.offset=0,se.stride=0,se.divisor=0,se.state=1,et[Oe]=1}else ie.getBuffer(Ie)?(se.buffer=ie.getBuffer(Ie),se.size=se.buffer.dimension|0,se.normalized=!1,se.type=se.buffer.dtype,se.offset=0,se.stride=0,se.divisor=0,se.state=1):ie.getBuffer(Ie.buffer)?(se.buffer=ie.getBuffer(Ie.buffer),se.size=(+Ie.size||se.buffer.dimension)|0,se.normalized=!!Ie.normalized||!1,"type"in Ie?(I.parameter(Ie.type,Bt,"invalid buffer type"),se.type=Bt[Ie.type]):se.type=se.buffer.dtype,se.offset=(Ie.offset||0)|0,se.stride=(Ie.stride||0)|0,se.divisor=(Ie.divisor||0)|0,se.state=1,I(se.size>=1&&se.size<=4,"size must be between 1 and 4"),I(se.offset>=0,"invalid offset"),I(se.stride>=0&&se.stride<=255,"stride must be between 0 and 255"),I(se.divisor>=0,"divisor must be positive"),I(!se.divisor||!!w.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ie?(I(Oe>0,"first attribute must not be a constant"),se.x=+Ie.x||0,se.y=+Ie.y||0,se.z=+Ie.z||0,se.w=+Ie.w||0,se.state=2):I(!1,"invalid attribute spec for location "+Oe)}for(var Xe=0;Xe<De.buffers.length;++Xe)!et[Xe]&&De.buffers[Xe]&&(De.buffers[Xe].destroy(),De.buffers[Xe]=null);return De.refresh(),de}return de.destroy=function(){for(var Ce=0;Ce<De.buffers.length;++Ce)De.buffers[Ce]&&De.buffers[Ce].destroy();De.buffers.length=0,De.destroy()},de._vao=De,de._reglType="vao",de(ce)}return he}var Lf=35632,ad=35633,Ec=35718,sd=35721;function ud(p,w,O,q){var ie={},Y={};function ee(X,te,me,Me){this.name=X,this.id=te,this.location=me,this.info=Me}function ve(X,te){for(var me=0;me<X.length;++me)if(X[me].id===te.id){X[me].location=te.location;return}X.push(te)}function ye(X,te,me){var Me=X===Lf?ie:Y,ue=Me[te];if(!ue){var ze=w.str(te);ue=p.createShader(X),p.shaderSource(ue,ze),p.compileShader(ue),I.shaderError(p,ue,ze,X,me),Me[te]=ue}return ue}var Se={},he=[],Ae=0;function Le(X,te){this.id=Ae++,this.fragId=X,this.vertId=te,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,q.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function pe(X,te,me){var Me,ue,ze=ye(Lf,X.fragId),ce=ye(ad,X.vertId),De=X.program=p.createProgram();if(p.attachShader(De,ze),p.attachShader(De,ce),me)for(Me=0;Me<me.length;++Me){var de=me[Me];p.bindAttribLocation(De,de[0],de[1])}p.linkProgram(De),I.linkError(p,De,w.str(X.fragId),w.str(X.vertId),te);var Ce=p.getProgramParameter(De,Ec);q.profile&&(X.stats.uniformsCount=Ce);var et=X.uniforms;for(Me=0;Me<Ce;++Me)if(ue=p.getActiveUniform(De,Me),ue)if(ue.size>1)for(var lt=0;lt<ue.size;++lt){var Oe=ue.name.replace("[0]","["+lt+"]");ve(et,new ee(Oe,w.id(Oe),p.getUniformLocation(De,Oe),ue))}else ve(et,new ee(ue.name,w.id(ue.name),p.getUniformLocation(De,ue.name),ue));var Ie=p.getProgramParameter(De,sd);q.profile&&(X.stats.attributesCount=Ie);var se=X.attributes;for(Me=0;Me<Ie;++Me)ue=p.getActiveAttrib(De,Me),ue&&ve(se,new ee(ue.name,w.id(ue.name),p.getAttribLocation(De,ue.name),ue))}q.profile&&(O.getMaxUniformsCount=function(){var X=0;return he.forEach(function(te){te.stats.uniformsCount>X&&(X=te.stats.uniformsCount)}),X},O.getMaxAttributesCount=function(){var X=0;return he.forEach(function(te){te.stats.attributesCount>X&&(X=te.stats.attributesCount)}),X});function Re(){ie={},Y={};for(var X=0;X<he.length;++X)pe(he[X],null,he[X].attributes.map(function(te){return[te.location,te.name]}))}return{clear:function(){var X=p.deleteShader.bind(p);Yt(ie).forEach(X),ie={},Yt(Y).forEach(X),Y={},he.forEach(function(te){p.deleteProgram(te.program)}),he.length=0,Se={},O.shaderCount=0},program:function(X,te,me,Me){I.command(X>=0,"missing vertex shader",me),I.command(te>=0,"missing fragment shader",me);var ue=Se[te];ue||(ue=Se[te]={});var ze=ue[X];if(ze&&(ze.refCount++,!Me))return ze;var ce=new Le(te,X);return O.shaderCount++,pe(ce,me,Me),ze||(ue[X]=ce),he.push(ce),Z(ce,{destroy:function(){if(ce.refCount--,ce.refCount<=0){p.deleteProgram(ce.program);var De=he.indexOf(ce);he.splice(De,1),O.shaderCount--}ue[ce.vertId].refCount<=0&&(p.deleteShader(Y[ce.vertId]),delete Y[ce.vertId],delete Se[ce.fragId][ce.vertId]),Object.keys(Se[ce.fragId]).length||(p.deleteShader(ie[ce.fragId]),delete ie[ce.fragId],delete Se[ce.fragId])}})},restore:Re,shader:ye,frag:-1,vert:-1}}var cd=6408,ps=5121,fd=3333,fu=5126;function ld(p,w,O,q,ie,Y,ee){function ve(he){var Ae;w.next===null?(I(ie.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Ae=ps):(I(w.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Ae=w.next.colorAttachments[0].texture._texture.type,Y.oes_texture_float?(I(Ae===ps||Ae===fu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Ae===fu&&I(ee.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):I(Ae===ps,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Le=0,pe=0,Re=q.framebufferWidth,X=q.framebufferHeight,te=null;ot(he)?te=he:he&&(I.type(he,"object","invalid arguments to regl.read()"),Le=he.x|0,pe=he.y|0,I(Le>=0&&Le<q.framebufferWidth,"invalid x offset for regl.read"),I(pe>=0&&pe<q.framebufferHeight,"invalid y offset for regl.read"),Re=(he.width||q.framebufferWidth-Le)|0,X=(he.height||q.framebufferHeight-pe)|0,te=he.data||null),te&&(Ae===ps?I(te instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Ae===fu&&I(te instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),I(Re>0&&Re+Le<=q.framebufferWidth,"invalid width for read pixels"),I(X>0&&X+pe<=q.framebufferHeight,"invalid height for read pixels"),O();var me=Re*X*4;return te||(Ae===ps?te=new Uint8Array(me):Ae===fu&&(te=te||new Float32Array(me))),I.isTypedArray(te,"data buffer for regl.read() must be a typedarray"),I(te.byteLength>=me,"data buffer for regl.read() too small"),p.pixelStorei(fd,4),p.readPixels(Le,pe,Re,X,cd,Ae,te),te}function ye(he){var Ae;return w.setFBO({framebuffer:he.framebuffer},function(){Ae=ve(he)}),Ae}function Se(he){return!he||!("framebuffer"in he)?ve(he):ye(he)}return Se}function Pa(p){return Array.prototype.slice.call(p)}function Fa(p){return Pa(p).join("")}function dd(){var p=0,w=[],O=[];function q(Ae){for(var Le=0;Le<O.length;++Le)if(O[Le]===Ae)return w[Le];var pe="g"+p++;return w.push(pe),O.push(Ae),pe}function ie(){var Ae=[];function Le(){Ae.push.apply(Ae,Pa(arguments))}var pe=[];function Re(){var X="v"+p++;return pe.push(X),arguments.length>0&&(Ae.push(X,"="),Ae.push.apply(Ae,Pa(arguments)),Ae.push(";")),X}return Z(Le,{def:Re,toString:function(){return Fa([pe.length>0?"var "+pe.join(",")+";":"",Fa(Ae)])}})}function Y(){var Ae=ie(),Le=ie(),pe=Ae.toString,Re=Le.toString;function X(te,me){Le(te,me,"=",Ae.def(te,me),";")}return Z(function(){Ae.apply(Ae,Pa(arguments))},{def:Ae.def,entry:Ae,exit:Le,save:X,set:function(te,me,Me){X(te,me),Ae(te,me,"=",Me,";")},toString:function(){return pe()+Re()}})}function ee(){var Ae=Fa(arguments),Le=Y(),pe=Y(),Re=Le.toString,X=pe.toString;return Z(Le,{then:function(){return Le.apply(Le,Pa(arguments)),this},else:function(){return pe.apply(pe,Pa(arguments)),this},toString:function(){var te=X();return te&&(te="else{"+te+"}"),Fa(["if(",Ae,"){",Re(),"}",te])}})}var ve=ie(),ye={};function Se(Ae,Le){var pe=[];function Re(){var ue="a"+pe.length;return pe.push(ue),ue}Le=Le||0;for(var X=0;X<Le;++X)Re();var te=Y(),me=te.toString,Me=ye[Ae]=Z(te,{arg:Re,toString:function(){return Fa(["function(",pe.join(),"){",me(),"}"])}});return Me}function he(){var Ae=['"use strict";',ve,"return {"];Object.keys(ye).forEach(function(Re){Ae.push('"',Re,'":',ye[Re].toString(),",")}),Ae.push("}");var Le=Fa(Ae).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),pe=Function.apply(null,w.concat(Le));return pe.apply(null,O)}return{global:ve,link:q,block:ie,proc:Se,scope:Y,cond:ee,compile:he}}var za="xyzw".split(""),Mf=5121,Ba=1,ms=2,gs=0,bc=1,xc=2,ys=3,lu=4,Es=5,bs=6,_c="dither",qi="blend.enable",kf="blend.color",Mr="blend.equation",_i="blend.func",Ua="depth.enable",xs="depth.func",_s="depth.range",du="depth.mask",wc="colorMask",Qi="cull.enable",ws="cull.face",Sc="frontFace",Tc="lineWidth",Gf="polygonOffset.enable",Ic="polygonOffset.offset",Pf="sample.alpha",Ji="sample.enable",Va="sample.coverage",Ff="stencil.enable",zf="stencil.mask",Ac="stencil.func",Nc="stencil.opFront",$a="stencil.opBack",Bf="scissor.enable",to="scissor.box",wr="viewport",Xa="profile",ea="framebuffer",Ss="vert",Ko="frag",ta="elements",na="primitive",ra="count",Ts="offset",_o="instances",Cr="vao",hu="Width",oa="Height",wi=ea+hu,ia=ea+oa,hd=wr+hu,vd=wr+oa,Si="drawingBuffer",Uf=Si+hu,Vf=Si+oa,pd=[_i,Mr,Ac,Nc,$a,Va,wr,to,Ic],Wa=34962,md=34963,gd=35632,yd=35633,$f=3553,aa=34067,Is=2884,As=3042,Ed=3024,bd=2960,xd=2929,_d=3089,wd=32823,Sd=32926,Td=32928,Ti=5126,Ns=35664,vu=35665,pu=35666,Ha=5124,mu=35667,gu=35668,yu=35669,Rc=35670,qo=35671,sa=35672,Eu=35673,ko=35674,Go=35675,ua=35676,Ii=35678,Ai=35680,Xf=4,Ni=1028,wo=1029,Wf=2304,uo=2305,Hf=32775,Zf=32776,Id=519,Ri=7680,ca=0,Yn=1,jf=32774,fa=513,Yf=36160,bu=36064,vo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Cn=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Za={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},So={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},la={frag:gd,vert:yd},xu={cw:Wf,ccw:uo};function Di(p){return Array.isArray(p)||ot(p)||Qt(p)}function Kf(p){return p.sort(function(w,O){return w===wr?-1:O===wr?1:w<O?-1:1})}function Br(p,w,O,q){this.thisDep=p,this.contextDep=w,this.propDep=O,this.append=q}function Ci(p){return p&&!(p.thisDep||p.contextDep||p.propDep)}function Pn(p){return new Br(!1,!1,!1,p)}function Zr(p,w){var O=p.type;if(O===gs){var q=p.data.length;return new Br(!0,q>=1,q>=2,w)}else if(O===lu){var ie=p.data;return new Br(ie.thisDep,ie.contextDep,ie.propDep,w)}else{if(O===Es)return new Br(!1,!1,!1,w);if(O===bs){for(var Y=!1,ee=!1,ve=!1,ye=0;ye<p.data.length;++ye){var Se=p.data[ye];if(Se.type===bc)ve=!0;else if(Se.type===xc)ee=!0;else if(Se.type===ys)Y=!0;else if(Se.type===gs){Y=!0;var he=Se.data;he>=1&&(ee=!0),he>=2&&(ve=!0)}else Se.type===lu&&(Y=Y||Se.data.thisDep,ee=ee||Se.data.contextDep,ve=ve||Se.data.propDep)}return new Br(Y,ee,ve,w)}else return new Br(O===ys,O===xc,O===bc,w)}}var qf=new Br(!1,!1,!1,function(){});function Ad(p,w,O,q,ie,Y,ee,ve,ye,Se,he,Ae,Le,pe,Re){var X=Se.Record,te={add:32774,subtract:32778,"reverse subtract":32779};O.ext_blend_minmax&&(te.min=Hf,te.max=Zf);var me=O.angle_instanced_arrays,Me=O.webgl_draw_buffers,ue={dirty:!0,profile:Re.profile},ze={},ce=[],De={},de={};function Ce(N){return N.replace(".","_")}function et(N,x,M){var U=Ce(N);ce.push(N),ze[U]=ue[U]=!!M,De[U]=x}function lt(N,x,M){var U=Ce(N);ce.push(N),Array.isArray(M)?(ue[U]=M.slice(),ze[U]=M.slice()):ue[U]=ze[U]=M,de[U]=x}et(_c,Ed),et(qi,As),lt(kf,"blendColor",[0,0,0,0]),lt(Mr,"blendEquationSeparate",[jf,jf]),lt(_i,"blendFuncSeparate",[Yn,ca,Yn,ca]),et(Ua,xd,!0),lt(xs,"depthFunc",fa),lt(_s,"depthRange",[0,1]),lt(du,"depthMask",!0),lt(wc,wc,[!0,!0,!0,!0]),et(Qi,Is),lt(ws,"cullFace",wo),lt(Sc,Sc,uo),lt(Tc,Tc,1),et(Gf,wd),lt(Ic,"polygonOffset",[0,0]),et(Pf,Sd),et(Ji,Td),lt(Va,"sampleCoverage",[1,!1]),et(Ff,bd),lt(zf,"stencilMask",-1),lt(Ac,"stencilFunc",[Id,0,-1]),lt(Nc,"stencilOpSeparate",[Ni,Ri,Ri,Ri]),lt($a,"stencilOpSeparate",[wo,Ri,Ri,Ri]),et(Bf,_d),lt(to,"scissor",[0,0,p.drawingBufferWidth,p.drawingBufferHeight]),lt(wr,wr,[0,0,p.drawingBufferWidth,p.drawingBufferHeight]);var Oe={gl:p,context:Le,strings:w,next:ze,current:ue,draw:Ae,elements:Y,buffer:ie,shader:he,attributes:Se.state,vao:Se,uniforms:ye,framebuffer:ve,extensions:O,timer:pe,isBufferArgs:Di},Ie={primTypes:Xo,compareFuncs:Za,blendFuncs:vo,blendEquations:te,stencilOps:So,glTypes:Bt,orientationType:xu};I.optional(function(){Oe.isArrayLike=Dn}),Me&&(Ie.backBuffer=[wo],Ie.drawBuffer=Ir(q.maxDrawbuffers,function(N){return N===0?[0]:Ir(N,function(x){return bu+x})}));var se=0;function ut(){var N=dd(),x=N.link,M=N.global;N.id=se++,N.batchId="0";var U=x(Oe),$=N.shared={props:"a0"};Object.keys(Oe).forEach(function(L){$[L]=M.def(U,".",L)}),I.optional(function(){N.CHECK=x(I),N.commandStr=I.guessCommand(),N.command=x(N.commandStr),N.assert=function(L,T,B){L("if(!(",T,"))",this.CHECK,".commandRaise(",x(B),",",this.command,");")},Ie.invalidBlendCombinations=Cn});var F=N.next={},k=N.current={};Object.keys(de).forEach(function(L){Array.isArray(ue[L])&&(F[L]=M.def($.next,".",L),k[L]=M.def($.current,".",L))});var z=N.constants={};Object.keys(Ie).forEach(function(L){z[L]=M.def(JSON.stringify(Ie[L]))}),N.invoke=function(L,T){switch(T.type){case gs:var B=["this",$.context,$.props,N.batchId];return L.def(x(T.data),".call(",B.slice(0,Math.max(T.data.length+1,4)),")");case bc:return L.def($.props,T.data);case xc:return L.def($.context,T.data);case ys:return L.def("this",T.data);case lu:return T.data.append(N,L),T.data.ref;case Es:return T.data.toString();case bs:return T.data.map(function(W){return N.invoke(L,W)})}},N.attribCache={};var R={};return N.scopeAttrib=function(L){var T=w.id(L);if(T in R)return R[T];var B=Se.scope[T];B||(B=Se.scope[T]=new X);var W=R[T]=x(B);return W},N}function yt(N){var x=N.static,M=N.dynamic,U;if(Xa in x){var $=!!x[Xa];U=Pn(function(k,z){return $}),U.enable=$}else if(Xa in M){var F=M[Xa];U=Zr(F,function(k,z){return k.invoke(z,F)})}return U}function Xe(N,x){var M=N.static,U=N.dynamic;if(ea in M){var $=M[ea];return $?($=ve.getFramebuffer($),I.command($,"invalid framebuffer object"),Pn(function(k,z){var R=k.link($),L=k.shared;z.set(L.framebuffer,".next",R);var T=L.context;return z.set(T,"."+wi,R+".width"),z.set(T,"."+ia,R+".height"),R})):Pn(function(k,z){var R=k.shared;z.set(R.framebuffer,".next","null");var L=R.context;return z.set(L,"."+wi,L+"."+Uf),z.set(L,"."+ia,L+"."+Vf),"null"})}else if(ea in U){var F=U[ea];return Zr(F,function(k,z){var R=k.invoke(z,F),L=k.shared,T=L.framebuffer,B=z.def(T,".getFramebuffer(",R,")");I.optional(function(){k.assert(z,"!"+R+"||"+B,"invalid framebuffer object")}),z.set(T,".next",B);var W=L.context;return z.set(W,"."+wi,B+"?"+B+".width:"+W+"."+Uf),z.set(W,"."+ia,B+"?"+B+".height:"+W+"."+Vf),B})}else return null}function Tt(N,x,M){var U=N.static,$=N.dynamic;function F(R){if(R in U){var L=U[R];I.commandType(L,"object","invalid "+R,M.commandStr);var T=!0,B=L.x|0,W=L.y|0,oe,ae;return"width"in L?(oe=L.width|0,I.command(oe>=0,"invalid "+R,M.commandStr)):T=!1,"height"in L?(ae=L.height|0,I.command(ae>=0,"invalid "+R,M.commandStr)):T=!1,new Br(!T&&x&&x.thisDep,!T&&x&&x.contextDep,!T&&x&&x.propDep,function(qe,_t){var He=qe.shared.context,st=oe;"width"in L||(st=_t.def(He,".",wi,"-",B));var ct=ae;return"height"in L||(ct=_t.def(He,".",ia,"-",W)),[B,W,st,ct]})}else if(R in $){var re=$[R],xe=Zr(re,function(qe,_t){var He=qe.invoke(_t,re);I.optional(function(){qe.assert(_t,He+"&&typeof "+He+'==="object"',"invalid "+R)});var st=qe.shared.context,ct=_t.def(He,".x|0"),Ht=_t.def(He,".y|0"),Fn=_t.def('"width" in ',He,"?",He,".width|0:","(",st,".",wi,"-",ct,")"),jr=_t.def('"height" in ',He,"?",He,".height|0:","(",st,".",ia,"-",Ht,")");return I.optional(function(){qe.assert(_t,Fn+">=0&&"+jr+">=0","invalid "+R)}),[ct,Ht,Fn,jr]});return x&&(xe.thisDep=xe.thisDep||x.thisDep,xe.contextDep=xe.contextDep||x.contextDep,xe.propDep=xe.propDep||x.propDep),xe}else return x?new Br(x.thisDep,x.contextDep,x.propDep,function(qe,_t){var He=qe.shared.context;return[0,0,_t.def(He,".",wi),_t.def(He,".",ia)]}):null}var k=F(wr);if(k){var z=k;k=new Br(k.thisDep,k.contextDep,k.propDep,function(R,L){var T=z.append(R,L),B=R.shared.context;return L.set(B,"."+hd,T[2]),L.set(B,"."+vd,T[3]),T})}return{viewport:k,scissor_box:F(to)}}function vt(N,x){var M=N.static,U=typeof M[Ko]=="string"&&typeof M[Ss]=="string";if(U){if(Object.keys(x.dynamic).length>0)return null;var $=x.static,F=Object.keys($);if(F.length>0&&typeof $[F[0]]=="number"){for(var k=[],z=0;z<F.length;++z)I(typeof $[F[z]]=="number","must specify all vertex attribute locations when using vaos"),k.push([$[F[z]]|0,F[z]]);return k}}return null}function St(N,x,M){var U=N.static,$=N.dynamic;function F(T){if(T in U){var B=w.id(U[T]);I.optional(function(){he.shader(la[T],B,I.guessCommand())});var W=Pn(function(){return B});return W.id=B,W}else if(T in $){var oe=$[T];return Zr(oe,function(ae,re){var xe=ae.invoke(re,oe),qe=re.def(ae.shared.strings,".id(",xe,")");return I.optional(function(){re(ae.shared.shader,".shader(",la[T],",",qe,",",ae.command,");")}),qe})}return null}var k=F(Ko),z=F(Ss),R=null,L;return Ci(k)&&Ci(z)?(R=he.program(z.id,k.id,null,M),L=Pn(function(T,B){return T.link(R)})):L=new Br(k&&k.thisDep||z&&z.thisDep,k&&k.contextDep||z&&z.contextDep,k&&k.propDep||z&&z.propDep,function(T,B){var W=T.shared.shader,oe;k?oe=k.append(T,B):oe=B.def(W,".",Ko);var ae;z?ae=z.append(T,B):ae=B.def(W,".",Ss);var re=W+".program("+ae+","+oe;return I.optional(function(){re+=","+T.command}),B.def(re+")")}),{frag:k,vert:z,progVar:L,program:R}}function jt(N,x){var M=N.static,U=N.dynamic;function $(){if(ta in M){var T=M[ta];Di(T)?T=Y.getElements(Y.create(T,!0)):T&&(T=Y.getElements(T),I.command(T,"invalid elements",x.commandStr));var B=Pn(function(oe,ae){if(T){var re=oe.link(T);return oe.ELEMENTS=re,re}return oe.ELEMENTS=null,null});return B.value=T,B}else if(ta in U){var W=U[ta];return Zr(W,function(oe,ae){var re=oe.shared,xe=re.isBufferArgs,qe=re.elements,_t=oe.invoke(ae,W),He=ae.def("null"),st=ae.def(xe,"(",_t,")"),ct=oe.cond(st).then(He,"=",qe,".createStream(",_t,");").else(He,"=",qe,".getElements(",_t,");");return I.optional(function(){oe.assert(ct.else,"!"+_t+"||"+He,"invalid elements")}),ae.entry(ct),ae.exit(oe.cond(st).then(qe,".destroyStream(",He,");")),oe.ELEMENTS=He,He})}return null}var F=$();function k(){if(na in M){var T=M[na];return I.commandParameter(T,Xo,"invalid primitve",x.commandStr),Pn(function(W,oe){return Xo[T]})}else if(na in U){var B=U[na];return Zr(B,function(W,oe){var ae=W.constants.primTypes,re=W.invoke(oe,B);return I.optional(function(){W.assert(oe,re+" in "+ae,"invalid primitive, must be one of "+Object.keys(Xo))}),oe.def(ae,"[",re,"]")})}else if(F)return Ci(F)?F.value?Pn(function(W,oe){return oe.def(W.ELEMENTS,".primType")}):Pn(function(){return Xf}):new Br(F.thisDep,F.contextDep,F.propDep,function(W,oe){var ae=W.ELEMENTS;return oe.def(ae,"?",ae,".primType:",Xf)});return null}function z(T,B){if(T in M){var W=M[T]|0;return I.command(!B||W>=0,"invalid "+T,x.commandStr),Pn(function(ae,re){return B&&(ae.OFFSET=W),W})}else if(T in U){var oe=U[T];return Zr(oe,function(ae,re){var xe=ae.invoke(re,oe);return B&&(ae.OFFSET=xe,I.optional(function(){ae.assert(re,xe+">=0","invalid "+T)})),xe})}else if(B&&F)return Pn(function(ae,re){return ae.OFFSET="0",0});return null}var R=z(Ts,!0);function L(){if(ra in M){var T=M[ra]|0;return I.command(typeof T=="number"&&T>=0,"invalid vertex count",x.commandStr),Pn(function(){return T})}else if(ra in U){var B=U[ra];return Zr(B,function(ae,re){var xe=ae.invoke(re,B);return I.optional(function(){ae.assert(re,"typeof "+xe+'==="number"&&'+xe+">=0&&"+xe+"===("+xe+"|0)","invalid vertex count")}),xe})}else if(F)if(Ci(F)){if(F)return R?new Br(R.thisDep,R.contextDep,R.propDep,function(ae,re){var xe=re.def(ae.ELEMENTS,".vertCount-",ae.OFFSET);return I.optional(function(){ae.assert(re,xe+">=0","invalid vertex offset/element buffer too small")}),xe}):Pn(function(ae,re){return re.def(ae.ELEMENTS,".vertCount")});var W=Pn(function(){return-1});return I.optional(function(){W.MISSING=!0}),W}else{var oe=new Br(F.thisDep||R.thisDep,F.contextDep||R.contextDep,F.propDep||R.propDep,function(ae,re){var xe=ae.ELEMENTS;return ae.OFFSET?re.def(xe,"?",xe,".vertCount-",ae.OFFSET,":-1"):re.def(xe,"?",xe,".vertCount:-1")});return I.optional(function(){oe.DYNAMIC=!0}),oe}return null}return{elements:F,primitive:k(),count:L(),instances:z(_o,!1),offset:R}}function nr(N,x){var M=N.static,U=N.dynamic,$={};return ce.forEach(function(F){var k=Ce(F);function z(R,L){if(F in M){var T=R(M[F]);$[k]=Pn(function(){return T})}else if(F in U){var B=U[F];$[k]=Zr(B,function(W,oe){return L(W,oe,W.invoke(oe,B))})}}switch(F){case Qi:case qi:case _c:case Ff:case Ua:case Bf:case Gf:case Pf:case Ji:case du:return z(function(R){return I.commandType(R,"boolean",F,x.commandStr),R},function(R,L,T){return I.optional(function(){R.assert(L,"typeof "+T+'==="boolean"',"invalid flag "+F,R.commandStr)}),T});case xs:return z(function(R){return I.commandParameter(R,Za,"invalid "+F,x.commandStr),Za[R]},function(R,L,T){var B=R.constants.compareFuncs;return I.optional(function(){R.assert(L,T+" in "+B,"invalid "+F+", must be one of "+Object.keys(Za))}),L.def(B,"[",T,"]")});case _s:return z(function(R){return I.command(Dn(R)&&R.length===2&&typeof R[0]=="number"&&typeof R[1]=="number"&&R[0]<=R[1],"depth range is 2d array",x.commandStr),R},function(R,L,T){I.optional(function(){R.assert(L,R.shared.isArrayLike+"("+T+")&&"+T+".length===2&&typeof "+T+'[0]==="number"&&typeof '+T+'[1]==="number"&&'+T+"[0]<="+T+"[1]","depth range must be a 2d array")});var B=L.def("+",T,"[0]"),W=L.def("+",T,"[1]");return[B,W]});case _i:return z(function(R){I.commandType(R,"object","blend.func",x.commandStr);var L="srcRGB"in R?R.srcRGB:R.src,T="srcAlpha"in R?R.srcAlpha:R.src,B="dstRGB"in R?R.dstRGB:R.dst,W="dstAlpha"in R?R.dstAlpha:R.dst;return I.commandParameter(L,vo,k+".srcRGB",x.commandStr),I.commandParameter(T,vo,k+".srcAlpha",x.commandStr),I.commandParameter(B,vo,k+".dstRGB",x.commandStr),I.commandParameter(W,vo,k+".dstAlpha",x.commandStr),I.command(Cn.indexOf(L+", "+B)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+L+", "+B+")",x.commandStr),[vo[L],vo[B],vo[T],vo[W]]},function(R,L,T){var B=R.constants.blendFuncs;I.optional(function(){R.assert(L,T+"&&typeof "+T+'==="object"',"invalid blend func, must be an object")});function W(He,st){var ct=L.def('"',He,st,'" in ',T,"?",T,".",He,st,":",T,".",He);return I.optional(function(){R.assert(L,ct+" in "+B,"invalid "+F+"."+He+st+", must be one of "+Object.keys(vo))}),ct}var oe=W("src","RGB"),ae=W("dst","RGB");I.optional(function(){var He=R.constants.invalidBlendCombinations;R.assert(L,He+".indexOf("+oe+'+", "+'+ae+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var re=L.def(B,"[",oe,"]"),xe=L.def(B,"[",W("src","Alpha"),"]"),qe=L.def(B,"[",ae,"]"),_t=L.def(B,"[",W("dst","Alpha"),"]");return[re,qe,xe,_t]});case Mr:return z(function(R){if(typeof R=="string")return I.commandParameter(R,te,"invalid "+F,x.commandStr),[te[R],te[R]];if(typeof R=="object")return I.commandParameter(R.rgb,te,F+".rgb",x.commandStr),I.commandParameter(R.alpha,te,F+".alpha",x.commandStr),[te[R.rgb],te[R.alpha]];I.commandRaise("invalid blend.equation",x.commandStr)},function(R,L,T){var B=R.constants.blendEquations,W=L.def(),oe=L.def(),ae=R.cond("typeof ",T,'==="string"');return I.optional(function(){function re(xe,qe,_t){R.assert(xe,_t+" in "+B,"invalid "+qe+", must be one of "+Object.keys(te))}re(ae.then,F,T),R.assert(ae.else,T+"&&typeof "+T+'==="object"',"invalid "+F),re(ae.else,F+".rgb",T+".rgb"),re(ae.else,F+".alpha",T+".alpha")}),ae.then(W,"=",oe,"=",B,"[",T,"];"),ae.else(W,"=",B,"[",T,".rgb];",oe,"=",B,"[",T,".alpha];"),L(ae),[W,oe]});case kf:return z(function(R){return I.command(Dn(R)&&R.length===4,"blend.color must be a 4d array",x.commandStr),Ir(4,function(L){return+R[L]})},function(R,L,T){return I.optional(function(){R.assert(L,R.shared.isArrayLike+"("+T+")&&"+T+".length===4","blend.color must be a 4d array")}),Ir(4,function(B){return L.def("+",T,"[",B,"]")})});case zf:return z(function(R){return I.commandType(R,"number",k,x.commandStr),R|0},function(R,L,T){return I.optional(function(){R.assert(L,"typeof "+T+'==="number"',"invalid stencil.mask")}),L.def(T,"|0")});case Ac:return z(function(R){I.commandType(R,"object",k,x.commandStr);var L=R.cmp||"keep",T=R.ref||0,B="mask"in R?R.mask:-1;return I.commandParameter(L,Za,F+".cmp",x.commandStr),I.commandType(T,"number",F+".ref",x.commandStr),I.commandType(B,"number",F+".mask",x.commandStr),[Za[L],T,B]},function(R,L,T){var B=R.constants.compareFuncs;I.optional(function(){function re(){R.assert(L,Array.prototype.join.call(arguments,""),"invalid stencil.func")}re(T+"&&typeof ",T,'==="object"'),re('!("cmp" in ',T,")||(",T,".cmp in ",B,")")});var W=L.def('"cmp" in ',T,"?",B,"[",T,".cmp]",":",Ri),oe=L.def(T,".ref|0"),ae=L.def('"mask" in ',T,"?",T,".mask|0:-1");return[W,oe,ae]});case Nc:case $a:return z(function(R){I.commandType(R,"object",k,x.commandStr);var L=R.fail||"keep",T=R.zfail||"keep",B=R.zpass||"keep";return I.commandParameter(L,So,F+".fail",x.commandStr),I.commandParameter(T,So,F+".zfail",x.commandStr),I.commandParameter(B,So,F+".zpass",x.commandStr),[F===$a?wo:Ni,So[L],So[T],So[B]]},function(R,L,T){var B=R.constants.stencilOps;I.optional(function(){R.assert(L,T+"&&typeof "+T+'==="object"',"invalid "+F)});function W(oe){return I.optional(function(){R.assert(L,'!("'+oe+'" in '+T+")||("+T+"."+oe+" in "+B+")","invalid "+F+"."+oe+", must be one of "+Object.keys(So))}),L.def('"',oe,'" in ',T,"?",B,"[",T,".",oe,"]:",Ri)}return[F===$a?wo:Ni,W("fail"),W("zfail"),W("zpass")]});case Ic:return z(function(R){I.commandType(R,"object",k,x.commandStr);var L=R.factor|0,T=R.units|0;return I.commandType(L,"number",k+".factor",x.commandStr),I.commandType(T,"number",k+".units",x.commandStr),[L,T]},function(R,L,T){I.optional(function(){R.assert(L,T+"&&typeof "+T+'==="object"',"invalid "+F)});var B=L.def(T,".factor|0"),W=L.def(T,".units|0");return[B,W]});case ws:return z(function(R){var L=0;return R==="front"?L=Ni:R==="back"&&(L=wo),I.command(!!L,k,x.commandStr),L},function(R,L,T){return I.optional(function(){R.assert(L,T+'==="front"||'+T+'==="back"',"invalid cull.face")}),L.def(T,'==="front"?',Ni,":",wo)});case Tc:return z(function(R){return I.command(typeof R=="number"&&R>=q.lineWidthDims[0]&&R<=q.lineWidthDims[1],"invalid line width, must be a positive number between "+q.lineWidthDims[0]+" and "+q.lineWidthDims[1],x.commandStr),R},function(R,L,T){return I.optional(function(){R.assert(L,"typeof "+T+'==="number"&&'+T+">="+q.lineWidthDims[0]+"&&"+T+"<="+q.lineWidthDims[1],"invalid line width")}),T});case Sc:return z(function(R){return I.commandParameter(R,xu,k,x.commandStr),xu[R]},function(R,L,T){return I.optional(function(){R.assert(L,T+'==="cw"||'+T+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),L.def(T+'==="cw"?'+Wf+":"+uo)});case wc:return z(function(R){return I.command(Dn(R)&&R.length===4,"color.mask must be length 4 array",x.commandStr),R.map(function(L){return!!L})},function(R,L,T){return I.optional(function(){R.assert(L,R.shared.isArrayLike+"("+T+")&&"+T+".length===4","invalid color.mask")}),Ir(4,function(B){return"!!"+T+"["+B+"]"})});case Va:return z(function(R){I.command(typeof R=="object"&&R,k,x.commandStr);var L="value"in R?R.value:1,T=!!R.invert;return I.command(typeof L=="number"&&L>=0&&L<=1,"sample.coverage.value must be a number between 0 and 1",x.commandStr),[L,T]},function(R,L,T){I.optional(function(){R.assert(L,T+"&&typeof "+T+'==="object"',"invalid sample.coverage")});var B=L.def('"value" in ',T,"?+",T,".value:1"),W=L.def("!!",T,".invert");return[B,W]})}}),$}function fr(N,x){var M=N.static,U=N.dynamic,$={};return Object.keys(M).forEach(function(F){var k=M[F],z;if(typeof k=="number"||typeof k=="boolean")z=Pn(function(){return k});else if(typeof k=="function"){var R=k._reglType;R==="texture2d"||R==="textureCube"?z=Pn(function(L){return L.link(k)}):R==="framebuffer"||R==="framebufferCube"?(I.command(k.color.length>0,'missing color attachment for framebuffer sent to uniform "'+F+'"',x.commandStr),z=Pn(function(L){return L.link(k.color[0])})):I.commandRaise('invalid data for uniform "'+F+'"',x.commandStr)}else Dn(k)?z=Pn(function(L){var T=L.global.def("[",Ir(k.length,function(B){return I.command(typeof k[B]=="number"||typeof k[B]=="boolean","invalid uniform "+F,L.commandStr),k[B]}),"]");return T}):I.commandRaise('invalid or missing data for uniform "'+F+'"',x.commandStr);z.value=k,$[F]=z}),Object.keys(U).forEach(function(F){var k=U[F];$[F]=Zr(k,function(z,R){return z.invoke(R,k)})}),$}function Lt(N,x){var M=N.static,U=N.dynamic,$={};return Object.keys(M).forEach(function(F){var k=M[F],z=w.id(F),R=new X;if(Di(k))R.state=Ba,R.buffer=ie.getBuffer(ie.create(k,Wa,!1,!0)),R.type=0;else{var L=ie.getBuffer(k);if(L)R.state=Ba,R.buffer=L,R.type=0;else if(I.command(typeof k=="object"&&k,"invalid data for attribute "+F,x.commandStr),"constant"in k){var T=k.constant;R.buffer="null",R.state=ms,typeof T=="number"?R.x=T:(I.command(Dn(T)&&T.length>0&&T.length<=4,"invalid constant for attribute "+F,x.commandStr),za.forEach(function(qe,_t){_t<T.length&&(R[qe]=T[_t])}))}else{Di(k.buffer)?L=ie.getBuffer(ie.create(k.buffer,Wa,!1,!0)):L=ie.getBuffer(k.buffer),I.command(!!L,'missing buffer for attribute "'+F+'"',x.commandStr);var B=k.offset|0;I.command(B>=0,'invalid offset for attribute "'+F+'"',x.commandStr);var W=k.stride|0;I.command(W>=0&&W<256,'invalid stride for attribute "'+F+'", must be integer betweeen [0, 255]',x.commandStr);var oe=k.size|0;I.command(!("size"in k)||oe>0&&oe<=4,'invalid size for attribute "'+F+'", must be 1,2,3,4',x.commandStr);var ae=!!k.normalized,re=0;"type"in k&&(I.commandParameter(k.type,Bt,"invalid type for attribute "+F,x.commandStr),re=Bt[k.type]);var xe=k.divisor|0;"divisor"in k&&(I.command(xe===0||me,'cannot specify divisor for attribute "'+F+'", instancing not supported',x.commandStr),I.command(xe>=0,'invalid divisor for attribute "'+F+'"',x.commandStr)),I.optional(function(){var qe=x.commandStr,_t=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(k).forEach(function(He){I.command(_t.indexOf(He)>=0,'unknown parameter "'+He+'" for attribute pointer "'+F+'" (valid parameters are '+_t+")",qe)})}),R.buffer=L,R.state=Ba,R.size=oe,R.normalized=ae,R.type=re||L.dtype,R.offset=B,R.stride=W,R.divisor=xe}}$[F]=Pn(function(qe,_t){var He=qe.attribCache;if(z in He)return He[z];var st={isStream:!1};return Object.keys(R).forEach(function(ct){st[ct]=R[ct]}),R.buffer&&(st.buffer=qe.link(R.buffer),st.type=st.type||st.buffer+".dtype"),He[z]=st,st})}),Object.keys(U).forEach(function(F){var k=U[F];function z(R,L){var T=R.invoke(L,k),B=R.shared,W=R.constants,oe=B.isBufferArgs,ae=B.buffer;I.optional(function(){R.assert(L,T+"&&(typeof "+T+'==="object"||typeof '+T+'==="function")&&('+oe+"("+T+")||"+ae+".getBuffer("+T+")||"+ae+".getBuffer("+T+".buffer)||"+oe+"("+T+'.buffer)||("constant" in '+T+"&&(typeof "+T+'.constant==="number"||'+B.isArrayLike+"("+T+".constant))))",'invalid dynamic attribute "'+F+'"')});var re={isStream:L.def(!1)},xe=new X;xe.state=Ba,Object.keys(xe).forEach(function(st){re[st]=L.def(""+xe[st])});var qe=re.buffer,_t=re.type;L("if(",oe,"(",T,")){",re.isStream,"=true;",qe,"=",ae,".createStream(",Wa,",",T,");",_t,"=",qe,".dtype;","}else{",qe,"=",ae,".getBuffer(",T,");","if(",qe,"){",_t,"=",qe,".dtype;",'}else if("constant" in ',T,"){",re.state,"=",ms,";","if(typeof "+T+'.constant === "number"){',re[za[0]],"=",T,".constant;",za.slice(1).map(function(st){return re[st]}).join("="),"=0;","}else{",za.map(function(st,ct){return re[st]+"="+T+".constant.length>"+ct+"?"+T+".constant["+ct+"]:0;"}).join(""),"}}else{","if(",oe,"(",T,".buffer)){",qe,"=",ae,".createStream(",Wa,",",T,".buffer);","}else{",qe,"=",ae,".getBuffer(",T,".buffer);","}",_t,'="type" in ',T,"?",W.glTypes,"[",T,".type]:",qe,".dtype;",re.normalized,"=!!",T,".normalized;");function He(st){L(re[st],"=",T,".",st,"|0;")}return He("size"),He("offset"),He("stride"),He("divisor"),L("}}"),L.exit("if(",re.isStream,"){",ae,".destroyStream(",qe,");","}"),re}$[F]=Zr(k,z)}),$}function Rt(N,x){var M=N.static,U=N.dynamic;if(Cr in M){var $=M[Cr];return $!==null&&Se.getVAO($)===null&&($=Se.createVAO($)),Pn(function(k){return k.link(Se.getVAO($))})}else if(Cr in U){var F=U[Cr];return Zr(F,function(k,z){var R=k.invoke(z,F);return z.def(k.shared.vao+".getVAO("+R+")")})}return null}function _n(N){var x=N.static,M=N.dynamic,U={};return Object.keys(x).forEach(function($){var F=x[$];U[$]=Pn(function(k,z){return typeof F=="number"||typeof F=="boolean"?""+F:k.link(F)})}),Object.keys(M).forEach(function($){var F=M[$];U[$]=Zr(F,function(k,z){return k.invoke(z,F)})}),U}function rr(N,x,M,U,$){var F=N.static,k=N.dynamic;I.optional(function(){var He=[ea,Ss,Ko,ta,na,Ts,ra,_o,Xa,Cr].concat(ce);function st(ct){Object.keys(ct).forEach(function(Ht){I.command(He.indexOf(Ht)>=0,'unknown parameter "'+Ht+'"',$.commandStr)})}st(F),st(k)});var z=vt(N,x),R=Xe(N,$),L=Tt(N,R,$),T=jt(N,$),B=nr(N,$),W=St(N,$,z);function oe(He){var st=L[He];st&&(B[He]=st)}oe(wr),oe(Ce(to));var ae=Object.keys(B).length>0,re={framebuffer:R,draw:T,shader:W,state:B,dirty:ae,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(re.profile=yt(N,$),re.uniforms=fr(M,$),re.drawVAO=re.scopeVAO=Rt(N,$),!re.drawVAO&&W.program&&!z&&O.angle_instanced_arrays){var xe=!0,qe=W.program.attributes.map(function(He){var st=x.static[He];return xe=xe&&!!st,st});if(xe&&qe.length>0){var _t=Se.getVAO(Se.createVAO(qe));re.drawVAO=new Br(null,null,null,function(He,st){return He.link(_t)}),re.useVAO=!0}}return z?re.useVAO=!0:re.attributes=Lt(x,$),re.context=_n(U,$),re}function Kn(N,x,M){var U=N.shared,$=U.context,F=N.scope();Object.keys(M).forEach(function(k){x.save($,"."+k);var z=M[k],R=z.append(N,x);Array.isArray(R)?F($,".",k,"=[",R.join(),"];"):F($,".",k,"=",R,";")}),x(F)}function qn(N,x,M,U){var $=N.shared,F=$.gl,k=$.framebuffer,z;Me&&(z=x.def($.extensions,".webgl_draw_buffers"));var R=N.constants,L=R.drawBuffer,T=R.backBuffer,B;M?B=M.append(N,x):B=x.def(k,".next"),U||x("if(",B,"!==",k,".cur){"),x("if(",B,"){",F,".bindFramebuffer(",Yf,",",B,".framebuffer);"),Me&&x(z,".drawBuffersWEBGL(",L,"[",B,".colorAttachments.length]);"),x("}else{",F,".bindFramebuffer(",Yf,",null);"),Me&&x(z,".drawBuffersWEBGL(",T,");"),x("}",k,".cur=",B,";"),U||x("}")}function lr(N,x,M){var U=N.shared,$=U.gl,F=N.current,k=N.next,z=U.current,R=U.next,L=N.cond(z,".dirty");ce.forEach(function(T){var B=Ce(T);if(!(B in M.state)){var W,oe;if(B in k){W=k[B],oe=F[B];var ae=Ir(ue[B].length,function(xe){return L.def(W,"[",xe,"]")});L(N.cond(ae.map(function(xe,qe){return xe+"!=="+oe+"["+qe+"]"}).join("||")).then($,".",de[B],"(",ae,");",ae.map(function(xe,qe){return oe+"["+qe+"]="+xe}).join(";"),";"))}else{W=L.def(R,".",B);var re=N.cond(W,"!==",z,".",B);L(re),B in De?re(N.cond(W).then($,".enable(",De[B],");").else($,".disable(",De[B],");"),z,".",B,"=",W,";"):re($,".",de[B],"(",W,");",z,".",B,"=",W,";")}}}),Object.keys(M.state).length===0&&L(z,".dirty=false;"),x(L)}function dr(N,x,M,U){var $=N.shared,F=N.current,k=$.current,z=$.gl;Kf(Object.keys(M)).forEach(function(R){var L=M[R];if(!(U&&!U(L))){var T=L.append(N,x);if(De[R]){var B=De[R];Ci(L)?T?x(z,".enable(",B,");"):x(z,".disable(",B,");"):x(N.cond(T).then(z,".enable(",B,");").else(z,".disable(",B,");")),x(k,".",R,"=",T,";")}else if(Dn(T)){var W=F[R];x(z,".",de[R],"(",T,");",T.map(function(oe,ae){return W+"["+ae+"]="+oe}).join(";"),";")}else x(z,".",de[R],"(",T,");",k,".",R,"=",T,";")}})}function wn(N,x){me&&(N.instancing=x.def(N.shared.extensions,".angle_instanced_arrays"))}function Et(N,x,M,U,$){var F=N.shared,k=N.stats,z=F.current,R=F.timer,L=M.profile;function T(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var B,W;function oe(He){B=x.def(),He(B,"=",T(),";"),typeof $=="string"?He(k,".count+=",$,";"):He(k,".count++;"),pe&&(U?(W=x.def(),He(W,"=",R,".getNumPendingQueries();")):He(R,".beginQuery(",k,");"))}function ae(He){He(k,".cpuTime+=",T(),"-",B,";"),pe&&(U?He(R,".pushScopeStats(",W,",",R,".getNumPendingQueries(),",k,");"):He(R,".endQuery();"))}function re(He){var st=x.def(z,".profile");x(z,".profile=",He,";"),x.exit(z,".profile=",st,";")}var xe;if(L){if(Ci(L)){L.enable?(oe(x),ae(x.exit),re("true")):re("false");return}xe=L.append(N,x),re(xe)}else xe=x.def(z,".profile");var qe=N.block();oe(qe),x("if(",xe,"){",qe,"}");var _t=N.block();ae(_t),x.exit("if(",xe,"){",_t,"}")}function Nr(N,x,M,U,$){var F=N.shared;function k(R){switch(R){case Ns:case mu:case qo:return 2;case vu:case gu:case sa:return 3;case pu:case yu:case Eu:return 4;default:return 1}}function z(R,L,T){var B=F.gl,W=x.def(R,".location"),oe=x.def(F.attributes,"[",W,"]"),ae=T.state,re=T.buffer,xe=[T.x,T.y,T.z,T.w],qe=["buffer","normalized","offset","stride"];function _t(){x("if(!",oe,".buffer){",B,".enableVertexAttribArray(",W,");}");var st=T.type,ct;if(T.size?ct=x.def(T.size,"||",L):ct=L,x("if(",oe,".type!==",st,"||",oe,".size!==",ct,"||",qe.map(function(Fn){return oe+"."+Fn+"!=="+T[Fn]}).join("||"),"){",B,".bindBuffer(",Wa,",",re,".buffer);",B,".vertexAttribPointer(",[W,ct,st,T.normalized,T.stride,T.offset],");",oe,".type=",st,";",oe,".size=",ct,";",qe.map(function(Fn){return oe+"."+Fn+"="+T[Fn]+";"}).join(""),"}"),me){var Ht=T.divisor;x("if(",oe,".divisor!==",Ht,"){",N.instancing,".vertexAttribDivisorANGLE(",[W,Ht],");",oe,".divisor=",Ht,";}")}}function He(){x("if(",oe,".buffer){",B,".disableVertexAttribArray(",W,");",oe,".buffer=null;","}if(",za.map(function(st,ct){return oe+"."+st+"!=="+xe[ct]}).join("||"),"){",B,".vertexAttrib4f(",W,",",xe,");",za.map(function(st,ct){return oe+"."+st+"="+xe[ct]+";"}).join(""),"}")}ae===Ba?_t():ae===ms?He():(x("if(",ae,"===",Ba,"){"),_t(),x("}else{"),He(),x("}"))}U.forEach(function(R){var L=R.name,T=M.attributes[L],B;if(T){if(!$(T))return;B=T.append(N,x)}else{if(!$(qf))return;var W=N.scopeAttrib(L);I.optional(function(){N.assert(x,W+".state","missing attribute "+L)}),B={},Object.keys(new X).forEach(function(oe){B[oe]=x.def(W,".",oe)})}z(N.link(R),k(R.info.type),B)})}function qt(N,x,M,U,$){for(var F=N.shared,k=F.gl,z,R=0;R<U.length;++R){var L=U[R],T=L.name,B=L.info.type,W=M.uniforms[T],oe=N.link(L),ae=oe+".location",re;if(W){if(!$(W))continue;if(Ci(W)){var xe=W.value;if(I.command(xe!==null&&typeof xe!="undefined",'missing uniform "'+T+'"',N.commandStr),B===Ii||B===Ai){I.command(typeof xe=="function"&&(B===Ii&&(xe._reglType==="texture2d"||xe._reglType==="framebuffer")||B===Ai&&(xe._reglType==="textureCube"||xe._reglType==="framebufferCube")),"invalid texture for uniform "+T,N.commandStr);var qe=N.link(xe._texture||xe.color[0]._texture);x(k,".uniform1i(",ae,",",qe+".bind());"),x.exit(qe,".unbind();")}else if(B===ko||B===Go||B===ua){I.optional(function(){I.command(Dn(xe),"invalid matrix for uniform "+T,N.commandStr),I.command(B===ko&&xe.length===4||B===Go&&xe.length===9||B===ua&&xe.length===16,"invalid length for matrix uniform "+T,N.commandStr)});var _t=N.global.def("new Float32Array(["+Array.prototype.slice.call(xe)+"])"),He=2;B===Go?He=3:B===ua&&(He=4),x(k,".uniformMatrix",He,"fv(",ae,",false,",_t,");")}else{switch(B){case Ti:I.commandType(xe,"number","uniform "+T,N.commandStr),z="1f";break;case Ns:I.command(Dn(xe)&&xe.length===2,"uniform "+T,N.commandStr),z="2f";break;case vu:I.command(Dn(xe)&&xe.length===3,"uniform "+T,N.commandStr),z="3f";break;case pu:I.command(Dn(xe)&&xe.length===4,"uniform "+T,N.commandStr),z="4f";break;case Rc:I.commandType(xe,"boolean","uniform "+T,N.commandStr),z="1i";break;case Ha:I.commandType(xe,"number","uniform "+T,N.commandStr),z="1i";break;case qo:I.command(Dn(xe)&&xe.length===2,"uniform "+T,N.commandStr),z="2i";break;case mu:I.command(Dn(xe)&&xe.length===2,"uniform "+T,N.commandStr),z="2i";break;case sa:I.command(Dn(xe)&&xe.length===3,"uniform "+T,N.commandStr),z="3i";break;case gu:I.command(Dn(xe)&&xe.length===3,"uniform "+T,N.commandStr),z="3i";break;case Eu:I.command(Dn(xe)&&xe.length===4,"uniform "+T,N.commandStr),z="4i";break;case yu:I.command(Dn(xe)&&xe.length===4,"uniform "+T,N.commandStr),z="4i";break}x(k,".uniform",z,"(",ae,",",Dn(xe)?Array.prototype.slice.call(xe):xe,");")}continue}else re=W.append(N,x)}else{if(!$(qf))continue;re=x.def(F.uniforms,"[",w.id(T),"]")}B===Ii?(I(!Array.isArray(re),"must specify a scalar prop for textures"),x("if(",re,"&&",re,'._reglType==="framebuffer"){',re,"=",re,".color[0];","}")):B===Ai&&(I(!Array.isArray(re),"must specify a scalar prop for cube maps"),x("if(",re,"&&",re,'._reglType==="framebufferCube"){',re,"=",re,".color[0];","}")),I.optional(function(){function jr(no,el){N.assert(x,no,'bad data or missing for uniform "'+T+'".  '+el)}function _u(no){I(!Array.isArray(re),"must not specify an array type for uniform"),jr("typeof "+re+'==="'+no+'"',"invalid type, expected "+no)}function Yr(no,el){Array.isArray(re)?I(re.length===no,"must have length "+no):jr(F.isArrayLike+"("+re+")&&"+re+".length==="+no,"invalid vector, should have length "+no,N.commandStr)}function ja(no){I(!Array.isArray(re),"must not specify a value type"),jr("typeof "+re+'==="function"&&'+re+'._reglType==="texture'+(no===$f?"2d":"Cube")+'"',"invalid texture type",N.commandStr)}switch(B){case Ha:_u("number");break;case mu:Yr(2,"number");break;case gu:Yr(3,"number");break;case yu:Yr(4,"number");break;case Ti:_u("number");break;case Ns:Yr(2,"number");break;case vu:Yr(3,"number");break;case pu:Yr(4,"number");break;case Rc:_u("boolean");break;case qo:Yr(2,"boolean");break;case sa:Yr(3,"boolean");break;case Eu:Yr(4,"boolean");break;case ko:Yr(4,"number");break;case Go:Yr(9,"number");break;case ua:Yr(16,"number");break;case Ii:ja($f);break;case Ai:ja(aa);break}});var st=1;switch(B){case Ii:case Ai:var ct=x.def(re,"._texture");x(k,".uniform1i(",ae,",",ct,".bind());"),x.exit(ct,".unbind();");continue;case Ha:case Rc:z="1i";break;case mu:case qo:z="2i",st=2;break;case gu:case sa:z="3i",st=3;break;case yu:case Eu:z="4i",st=4;break;case Ti:z="1f";break;case Ns:z="2f",st=2;break;case vu:z="3f",st=3;break;case pu:z="4f",st=4;break;case ko:z="Matrix2fv";break;case Go:z="Matrix3fv";break;case ua:z="Matrix4fv";break}if(x(k,".uniform",z,"(",ae,","),z.charAt(0)==="M"){var Ht=Math.pow(B-ko+2,2),Fn=N.global.def("new Float32Array(",Ht,")");Array.isArray(re)?x("false,(",Ir(Ht,function(jr){return Fn+"["+jr+"]="+re[jr]}),",",Fn,")"):x("false,(Array.isArray(",re,")||",re," instanceof Float32Array)?",re,":(",Ir(Ht,function(jr){return Fn+"["+jr+"]="+re+"["+jr+"]"}),",",Fn,")")}else st>1?x(Ir(st,function(jr){return Array.isArray(re)?re[jr]:re+"["+jr+"]"})):(I(!Array.isArray(re),"uniform value must not be an array"),x(re));x(");")}}function at(N,x,M,U){var $=N.shared,F=$.gl,k=$.draw,z=U.draw;function R(){var ct=z.elements,Ht,Fn=x;return ct?((ct.contextDep&&U.contextDynamic||ct.propDep)&&(Fn=M),Ht=ct.append(N,Fn)):Ht=Fn.def(k,".",ta),Ht&&Fn("if("+Ht+")"+F+".bindBuffer("+md+","+Ht+".buffer.buffer);"),Ht}function L(){var ct=z.count,Ht,Fn=x;return ct?((ct.contextDep&&U.contextDynamic||ct.propDep)&&(Fn=M),Ht=ct.append(N,Fn),I.optional(function(){ct.MISSING&&N.assert(x,"false","missing vertex count"),ct.DYNAMIC&&N.assert(Fn,Ht+">=0","missing vertex count")})):(Ht=Fn.def(k,".",ra),I.optional(function(){N.assert(Fn,Ht+">=0","missing vertex count")})),Ht}var T=R();function B(ct){var Ht=z[ct];return Ht?Ht.contextDep&&U.contextDynamic||Ht.propDep?Ht.append(N,M):Ht.append(N,x):x.def(k,".",ct)}var W=B(na),oe=B(Ts),ae=L();if(typeof ae=="number"){if(ae===0)return}else M("if(",ae,"){"),M.exit("}");var re,xe;me&&(re=B(_o),xe=N.instancing);var qe=T+".type",_t=z.elements&&Ci(z.elements);function He(){function ct(){M(xe,".drawElementsInstancedANGLE(",[W,ae,qe,oe+"<<(("+qe+"-"+Mf+")>>1)",re],");")}function Ht(){M(xe,".drawArraysInstancedANGLE(",[W,oe,ae,re],");")}T?_t?ct():(M("if(",T,"){"),ct(),M("}else{"),Ht(),M("}")):Ht()}function st(){function ct(){M(F+".drawElements("+[W,ae,qe,oe+"<<(("+qe+"-"+Mf+")>>1)"]+");")}function Ht(){M(F+".drawArrays("+[W,oe,ae]+");")}T?_t?ct():(M("if(",T,"){"),ct(),M("}else{"),Ht(),M("}")):Ht()}me&&(typeof re!="number"||re>=0)?typeof re=="string"?(M("if(",re,">0){"),He(),M("}else if(",re,"<0){"),st(),M("}")):He():st()}function Ct(N,x,M,U,$){var F=ut(),k=F.proc("body",$);return I.optional(function(){F.commandStr=x.commandStr,F.command=F.link(x.commandStr)}),me&&(F.instancing=k.def(F.shared.extensions,".angle_instanced_arrays")),N(F,k,M,U),F.compile().body}function Ut(N,x,M,U){wn(N,x),M.useVAO?M.drawVAO?x(N.shared.vao,".setVAO(",M.drawVAO.append(N,x),");"):x(N.shared.vao,".setVAO(",N.shared.vao,".targetVAO);"):(x(N.shared.vao,".setVAO(null);"),Nr(N,x,M,U.attributes,function(){return!0})),qt(N,x,M,U.uniforms,function(){return!0}),at(N,x,x,M)}function On(N,x){var M=N.proc("draw",1);wn(N,M),Kn(N,M,x.context),qn(N,M,x.framebuffer),lr(N,M,x),dr(N,M,x.state),Et(N,M,x,!1,!0);var U=x.shader.progVar.append(N,M);if(M(N.shared.gl,".useProgram(",U,".program);"),x.shader.program)Ut(N,M,x,x.shader.program);else{M(N.shared.vao,".setVAO(null);");var $=N.global.def("{}"),F=M.def(U,".id"),k=M.def($,"[",F,"]");M(N.cond(k).then(k,".call(this,a0);").else(k,"=",$,"[",F,"]=",N.link(function(z){return Ct(Ut,N,x,z,1)}),"(",U,");",k,".call(this,a0);"))}Object.keys(x.state).length>0&&M(N.shared.current,".dirty=true;")}function To(N,x,M,U){N.batchId="a1",wn(N,x);function $(){return!0}Nr(N,x,M,U.attributes,$),qt(N,x,M,U.uniforms,$),at(N,x,x,M)}function ha(N,x,M,U){wn(N,x);var $=M.contextDep,F=x.def(),k="a0",z="a1",R=x.def();N.shared.props=R,N.batchId=F;var L=N.scope(),T=N.scope();x(L.entry,"for(",F,"=0;",F,"<",z,";++",F,"){",R,"=",k,"[",F,"];",T,"}",L.exit);function B(qe){return qe.contextDep&&$||qe.propDep}function W(qe){return!B(qe)}if(M.needsContext&&Kn(N,T,M.context),M.needsFramebuffer&&qn(N,T,M.framebuffer),dr(N,T,M.state,B),M.profile&&B(M.profile)&&Et(N,T,M,!1,!0),U)M.useVAO?M.drawVAO?B(M.drawVAO)?T(N.shared.vao,".setVAO(",M.drawVAO.append(N,T),");"):L(N.shared.vao,".setVAO(",M.drawVAO.append(N,L),");"):L(N.shared.vao,".setVAO(",N.shared.vao,".targetVAO);"):(L(N.shared.vao,".setVAO(null);"),Nr(N,L,M,U.attributes,W),Nr(N,T,M,U.attributes,B)),qt(N,L,M,U.uniforms,W),qt(N,T,M,U.uniforms,B),at(N,L,T,M);else{var oe=N.global.def("{}"),ae=M.shader.progVar.append(N,T),re=T.def(ae,".id"),xe=T.def(oe,"[",re,"]");T(N.shared.gl,".useProgram(",ae,".program);","if(!",xe,"){",xe,"=",oe,"[",re,"]=",N.link(function(qe){return Ct(To,N,M,qe,2)}),"(",ae,");}",xe,".call(this,a0[",F,"],",F,");")}}function C(N,x){var M=N.proc("batch",2);N.batchId="0",wn(N,M);var U=!1,$=!0;Object.keys(x.context).forEach(function(oe){U=U||x.context[oe].propDep}),U||(Kn(N,M,x.context),$=!1);var F=x.framebuffer,k=!1;F?(F.propDep?U=k=!0:F.contextDep&&U&&(k=!0),k||qn(N,M,F)):qn(N,M,null),x.state.viewport&&x.state.viewport.propDep&&(U=!0);function z(oe){return oe.contextDep&&U||oe.propDep}lr(N,M,x),dr(N,M,x.state,function(oe){return!z(oe)}),(!x.profile||!z(x.profile))&&Et(N,M,x,!1,"a1"),x.contextDep=U,x.needsContext=$,x.needsFramebuffer=k;var R=x.shader.progVar;if(R.contextDep&&U||R.propDep)ha(N,M,x,null);else{var L=R.append(N,M);if(M(N.shared.gl,".useProgram(",L,".program);"),x.shader.program)ha(N,M,x,x.shader.program);else{M(N.shared.vao,".setVAO(null);");var T=N.global.def("{}"),B=M.def(L,".id"),W=M.def(T,"[",B,"]");M(N.cond(W).then(W,".call(this,a0,a1);").else(W,"=",T,"[",B,"]=",N.link(function(oe){return Ct(ha,N,x,oe,2)}),"(",L,");",W,".call(this,a0,a1);"))}}Object.keys(x.state).length>0&&M(N.shared.current,".dirty=true;")}function Q(N,x){var M=N.proc("scope",3);N.batchId="a2";var U=N.shared,$=U.current;Kn(N,M,x.context),x.framebuffer&&x.framebuffer.append(N,M),Kf(Object.keys(x.state)).forEach(function(k){var z=x.state[k],R=z.append(N,M);Dn(R)?R.forEach(function(L,T){M.set(N.next[k],"["+T+"]",L)}):M.set(U.next,"."+k,R)}),Et(N,M,x,!0,!0),[ta,Ts,ra,_o,na].forEach(function(k){var z=x.draw[k];z&&M.set(U.draw,"."+k,""+z.append(N,M))}),Object.keys(x.uniforms).forEach(function(k){var z=x.uniforms[k].append(N,M);Array.isArray(z)&&(z="["+z.join()+"]"),M.set(U.uniforms,"["+w.id(k)+"]",z)}),Object.keys(x.attributes).forEach(function(k){var z=x.attributes[k].append(N,M),R=N.scopeAttrib(k);Object.keys(new X).forEach(function(L){M.set(R,"."+L,z[L])})}),x.scopeVAO&&M.set(U.vao,".targetVAO",x.scopeVAO.append(N,M));function F(k){var z=x.shader[k];z&&M.set(U.shader,"."+k,z.append(N,M))}F(Ss),F(Ko),Object.keys(x.state).length>0&&(M($,".dirty=true;"),M.exit($,".dirty=true;")),M("a1(",N.shared.context,",a0,",N.batchId,");")}function j(N){if(!(typeof N!="object"||Dn(N))){for(var x=Object.keys(N),M=0;M<x.length;++M)if(Rn.isDynamic(N[x[M]]))return!0;return!1}}function Be(N,x,M){var U=x.static[M];if(!U||!j(U))return;var $=N.global,F=Object.keys(U),k=!1,z=!1,R=!1,L=N.global.def("{}");F.forEach(function(B){var W=U[B];if(Rn.isDynamic(W)){typeof W=="function"&&(W=U[B]=Rn.unbox(W));var oe=Zr(W,null);k=k||oe.thisDep,R=R||oe.propDep,z=z||oe.contextDep}else{switch($(L,".",B,"="),typeof W){case"number":$(W);break;case"string":$('"',W,'"');break;case"object":Array.isArray(W)&&$("[",W.join(),"]");break;default:$(N.link(W));break}$(";")}});function T(B,W){F.forEach(function(oe){var ae=U[oe];if(Rn.isDynamic(ae)){var re=B.invoke(W,ae);W(L,".",oe,"=",re,";")}})}x.dynamic[M]=new Rn.DynamicVariable(lu,{thisDep:k,contextDep:z,propDep:R,ref:L,append:T}),delete x.static[M]}function It(N,x,M,U,$){var F=ut();F.stats=F.link($),Object.keys(x.static).forEach(function(z){Be(F,x,z)}),pd.forEach(function(z){Be(F,N,z)});var k=rr(N,x,M,U,F);return On(F,k),Q(F,k),C(F,k),Z(F.compile(),{destroy:function(){k.shader.program.destroy()}})}return{next:ze,current:ue,procs:function(){var N=ut(),x=N.proc("poll"),M=N.proc("refresh"),U=N.block();x(U),M(U);var $=N.shared,F=$.gl,k=$.next,z=$.current;U(z,".dirty=false;"),qn(N,x),qn(N,M,null,!0);var R;me&&(R=N.link(me)),O.oes_vertex_array_object&&M(N.link(O.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var L=0;L<q.maxAttributes;++L){var T=M.def($.attributes,"[",L,"]"),B=N.cond(T,".buffer");B.then(F,".enableVertexAttribArray(",L,");",F,".bindBuffer(",Wa,",",T,".buffer.buffer);",F,".vertexAttribPointer(",L,",",T,".size,",T,".type,",T,".normalized,",T,".stride,",T,".offset);").else(F,".disableVertexAttribArray(",L,");",F,".vertexAttrib4f(",L,",",T,".x,",T,".y,",T,".z,",T,".w);",T,".buffer=null;"),M(B),me&&M(R,".vertexAttribDivisorANGLE(",L,",",T,".divisor);")}return M(N.shared.vao,".currentVAO=null;",N.shared.vao,".setVAO(",N.shared.vao,".targetVAO);"),Object.keys(De).forEach(function(W){var oe=De[W],ae=U.def(k,".",W),re=N.block();re("if(",ae,"){",F,".enable(",oe,")}else{",F,".disable(",oe,")}",z,".",W,"=",ae,";"),M(re),x("if(",ae,"!==",z,".",W,"){",re,"}")}),Object.keys(de).forEach(function(W){var oe=de[W],ae=ue[W],re,xe,qe=N.block();if(qe(F,".",oe,"("),Dn(ae)){var _t=ae.length;re=N.global.def(k,".",W),xe=N.global.def(z,".",W),qe(Ir(_t,function(He){return re+"["+He+"]"}),");",Ir(_t,function(He){return xe+"["+He+"]="+re+"["+He+"];"}).join("")),x("if(",Ir(_t,function(He){return re+"["+He+"]!=="+xe+"["+He+"]"}).join("||"),"){",qe,"}")}else re=U.def(k,".",W),xe=U.def(z,".",W),qe(re,");",z,".",W,"=",re,";"),x("if(",re,"!==",xe,"){",qe,"}");M(qe)}),N.compile()}(),compile:It}}function Dc(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Qo=34918,Oi=34919,Qf=35007,Nd=function(p,w){if(!w.ext_disjoint_timer_query)return null;var O=[];function q(){return O.pop()||w.ext_disjoint_timer_query.createQueryEXT()}function ie(me){O.push(me)}var Y=[];function ee(me){var Me=q();w.ext_disjoint_timer_query.beginQueryEXT(Qf,Me),Y.push(Me),pe(Y.length-1,Y.length,me)}function ve(){w.ext_disjoint_timer_query.endQueryEXT(Qf)}function ye(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Se=[];function he(){return Se.pop()||new ye}function Ae(me){Se.push(me)}var Le=[];function pe(me,Me,ue){var ze=he();ze.startQueryIndex=me,ze.endQueryIndex=Me,ze.sum=0,ze.stats=ue,Le.push(ze)}var Re=[],X=[];function te(){var me,Me,ue=Y.length;if(ue!==0){X.length=Math.max(X.length,ue+1),Re.length=Math.max(Re.length,ue+1),Re[0]=0,X[0]=0;var ze=0;for(me=0,Me=0;Me<Y.length;++Me){var ce=Y[Me];w.ext_disjoint_timer_query.getQueryObjectEXT(ce,Oi)?(ze+=w.ext_disjoint_timer_query.getQueryObjectEXT(ce,Qo),ie(ce)):Y[me++]=ce,Re[Me+1]=ze,X[Me+1]=me}for(Y.length=me,me=0,Me=0;Me<Le.length;++Me){var De=Le[Me],de=De.startQueryIndex,Ce=De.endQueryIndex;De.sum+=Re[Ce]-Re[de];var et=X[de],lt=X[Ce];lt===et?(De.stats.gpuTime+=De.sum/1e6,Ae(De)):(De.startQueryIndex=et,De.endQueryIndex=lt,Le[me++]=De)}Le.length=me}}return{beginQuery:ee,endQuery:ve,pushScopeStats:pe,update:te,getNumPendingQueries:function(){return Y.length},clear:function(){O.push.apply(O,Y);for(var me=0;me<O.length;me++)w.ext_disjoint_timer_query.deleteQueryEXT(O[me]);Y.length=0,O.length=0},restore:function(){Y.length=0,O.length=0}}},Rd=16384,Dd=256,da=1024,Cd=34962,Cc="webglcontextlost",Oc="webglcontextrestored",Lc=1,Jf=2,Od=3;function Mc(p,w){for(var O=0;O<p.length;++O)if(p[O]===w)return O;return-1}function kc(p){var w=Bi(p);if(!w)return null;var O=w.gl,q=O.getContextAttributes(),ie=O.isContextLost(),Y=Ps(O,w);if(!Y)return null;var ee=go(),ve=Dc(),ye=Y.extensions,Se=Nd(O,ye),he=Vr(),Ae=O.drawingBufferWidth,Le=O.drawingBufferHeight,pe={tick:0,time:0,viewportWidth:Ae,viewportHeight:Le,framebufferWidth:Ae,framebufferHeight:Le,drawingBufferWidth:Ae,drawingBufferHeight:Le,pixelRatio:w.pixelRatio},Re={},X={elements:null,primitive:4,count:-1,offset:0,instances:-1},te=pn(O,ye),me=ju(O,ve,w,ue),Me=id(O,ye,te,ve,me);function ue(at){return Me.destroyBuffer(at)}var ze=Zs(O,ye,me,ve),ce=ud(O,ee,ve,w),De=$l(O,ye,te,function(){et.procs.poll()},pe,ve,w),de=Wl(O,ye,te,ve,w),Ce=rd(O,ye,te,De,de,ve),et=Ad(O,ee,ye,te,me,ze,De,Ce,Re,Me,ce,X,pe,Se,w),lt=ld(O,Ce,et.procs.poll,pe,q,ye,te),Oe=et.next,Ie=O.canvas,se=[],ut=[],yt=[],Xe=[w.onDestroy],Tt=null;function vt(){if(se.length===0){Se&&Se.update(),Tt=null;return}Tt=mo.next(vt),dr();for(var at=se.length-1;at>=0;--at){var Ct=se[at];Ct&&Ct(pe,null,0)}O.flush(),Se&&Se.update()}function St(){!Tt&&se.length>0&&(Tt=mo.next(vt))}function jt(){Tt&&(mo.cancel(vt),Tt=null)}function nr(at){at.preventDefault(),ie=!0,jt(),ut.forEach(function(Ct){Ct()})}function fr(at){O.getError(),ie=!1,Y.restore(),ce.restore(),me.restore(),De.restore(),de.restore(),Ce.restore(),Me.restore(),Se&&Se.restore(),et.procs.refresh(),St(),yt.forEach(function(Ct){Ct()})}Ie&&(Ie.addEventListener(Cc,nr,!1),Ie.addEventListener(Oc,fr,!1));function Lt(){se.length=0,jt(),Ie&&(Ie.removeEventListener(Cc,nr),Ie.removeEventListener(Oc,fr)),ce.clear(),Ce.clear(),de.clear(),De.clear(),ze.clear(),me.clear(),Me.clear(),Se&&Se.clear(),Xe.forEach(function(at){at()})}function Rt(at){I(!!at,"invalid args to regl({...})"),I.type(at,"object","invalid args to regl({...})");function Ct($){var F=Z({},$);delete F.uniforms,delete F.attributes,delete F.context,delete F.vao,"stencil"in F&&F.stencil.op&&(F.stencil.opBack=F.stencil.opFront=F.stencil.op,delete F.stencil.op);function k(z){if(z in F){var R=F[z];delete F[z],Object.keys(R).forEach(function(L){F[z+"."+L]=R[L]})}}return k("blend"),k("depth"),k("cull"),k("stencil"),k("polygonOffset"),k("scissor"),k("sample"),"vao"in $&&(F.vao=$.vao),F}function Ut($,F){var k={},z={};return Object.keys($).forEach(function(R){var L=$[R];if(Rn.isDynamic(L)){z[R]=Rn.unbox(L,R);return}else if(F&&Array.isArray(L)){for(var T=0;T<L.length;++T)if(Rn.isDynamic(L[T])){z[R]=Rn.unbox(L,R);return}}k[R]=L}),{dynamic:z,static:k}}var On=Ut(at.context||{},!0),To=Ut(at.uniforms||{},!0),ha=Ut(at.attributes||{},!1),C=Ut(Ct(at),!1),Q={gpuTime:0,cpuTime:0,count:0},j=et.compile(C,ha,To,On,Q),Be=j.draw,It=j.batch,N=j.scope,x=[];function M($){for(;x.length<$;)x.push(null);return x}function U($,F){var k;if(ie&&I.raise("context lost"),typeof $=="function")return N.call(this,null,$,0);if(typeof F=="function")if(typeof $=="number")for(k=0;k<$;++k)N.call(this,null,F,k);else if(Array.isArray($))for(k=0;k<$.length;++k)N.call(this,$[k],F,k);else return N.call(this,$,F,0);else if(typeof $=="number"){if($>0)return It.call(this,M($|0),$|0)}else if(Array.isArray($)){if($.length)return It.call(this,$,$.length)}else return Be.call(this,$)}return Z(U,{stats:Q,destroy:function(){j.destroy()}})}var _n=Ce.setFBO=Rt({framebuffer:Rn.define.call(null,Lc,"framebuffer")});function rr(at,Ct){var Ut=0;et.procs.poll();var On=Ct.color;On&&(O.clearColor(+On[0]||0,+On[1]||0,+On[2]||0,+On[3]||0),Ut|=Rd),"depth"in Ct&&(O.clearDepth(+Ct.depth),Ut|=Dd),"stencil"in Ct&&(O.clearStencil(Ct.stencil|0),Ut|=da),I(!!Ut,"called regl.clear with no buffer specified"),O.clear(Ut)}function Kn(at){if(I(typeof at=="object"&&at,"regl.clear() takes an object as input"),"framebuffer"in at)if(at.framebuffer&&at.framebuffer_reglType==="framebufferCube")for(var Ct=0;Ct<6;++Ct)_n(Z({framebuffer:at.framebuffer.faces[Ct]},at),rr);else _n(at,rr);else rr(null,at)}function qn(at){I.type(at,"function","regl.frame() callback must be a function"),se.push(at);function Ct(){var Ut=Mc(se,at);I(Ut>=0,"cannot cancel a frame twice");function On(){var To=Mc(se,On);se[To]=se[se.length-1],se.length-=1,se.length<=0&&jt()}se[Ut]=On}return St(),{cancel:Ct}}function lr(){var at=Oe.viewport,Ct=Oe.scissor_box;at[0]=at[1]=Ct[0]=Ct[1]=0,pe.viewportWidth=pe.framebufferWidth=pe.drawingBufferWidth=at[2]=Ct[2]=O.drawingBufferWidth,pe.viewportHeight=pe.framebufferHeight=pe.drawingBufferHeight=at[3]=Ct[3]=O.drawingBufferHeight}function dr(){pe.tick+=1,pe.time=Et(),lr(),et.procs.poll()}function wn(){De.refresh(),lr(),et.procs.refresh(),Se&&Se.update()}function Et(){return(Vr()-he)/1e3}wn();function Nr(at,Ct){I.type(Ct,"function","listener callback must be a function");var Ut;switch(at){case"frame":return qn(Ct);case"lost":Ut=ut;break;case"restore":Ut=yt;break;case"destroy":Ut=Xe;break;default:I.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ut.push(Ct),{cancel:function(){for(var On=0;On<Ut.length;++On)if(Ut[On]===Ct){Ut[On]=Ut[Ut.length-1],Ut.pop();return}}}}var qt=Z(Rt,{clear:Kn,prop:Rn.define.bind(null,Lc),context:Rn.define.bind(null,Jf),this:Rn.define.bind(null,Od),draw:Rt({}),buffer:function(at){return me.create(at,Cd,!1,!1)},elements:function(at){return ze.create(at,!1)},texture:De.create2D,cube:De.createCube,renderbuffer:de.create,framebuffer:Ce.create,framebufferCube:Ce.createCube,vao:Me.createVAO,attributes:q,frame:qn,on:Nr,limits:te,hasExtension:function(at){return te.extensions.indexOf(at.toLowerCase())>=0},read:lt,destroy:Lt,_gl:O,_refresh:wn,poll:function(){dr(),Se&&Se.update()},now:Et,stats:ve});return w.onDone(null,qt),qt}return kc})},62657:function(be){function ot(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}be.exports=ot,be.exports.__esModule=!0,be.exports.default=be.exports},83136:function(be,ot,Z){var H=Z(38836),gt=Z(68919),Qe=Z(75254);function Ge(xt){var it=gt();return function(){var kt=H(xt),sn;if(it){var ht=H(this).constructor;sn=Reflect.construct(kt,arguments,ht)}else sn=kt.apply(this,arguments);return Qe(this,sn)}}be.exports=Ge,be.exports.__esModule=!0,be.exports.default=be.exports},38836:function(be){function ot(Z){return be.exports=ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(gt){return gt.__proto__||Object.getPrototypeOf(gt)},be.exports.__esModule=!0,be.exports.default=be.exports,ot(Z)}be.exports=ot,be.exports.__esModule=!0,be.exports.default=be.exports},21742:function(be,ot,Z){var H=Z(80038);function gt(Qe,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Super expression must either be null or a function");Qe.prototype=Object.create(Ge&&Ge.prototype,{constructor:{value:Qe,writable:!0,configurable:!0}}),Object.defineProperty(Qe,"prototype",{writable:!1}),Ge&&H(Qe,Ge)}be.exports=gt,be.exports.__esModule=!0,be.exports.default=be.exports},68919:function(be){function ot(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Z){return!1}}be.exports=ot,be.exports.__esModule=!0,be.exports.default=be.exports},75254:function(be,ot,Z){var H=Z(31759).default,gt=Z(62657);function Qe(Ge,xt){if(xt&&(H(xt)==="object"||typeof xt=="function"))return xt;if(xt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gt(Ge)}be.exports=Qe,be.exports.__esModule=!0,be.exports.default=be.exports},80038:function(be){function ot(Z,H){return be.exports=ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Qe,Ge){return Qe.__proto__=Ge,Qe},be.exports.__esModule=!0,be.exports.default=be.exports,ot(Z,H)}be.exports=ot,be.exports.__esModule=!0,be.exports.default=be.exports},55347:function(be){function ot(Z,H){this.v=Z,this.k=H}be.exports=ot,be.exports.__esModule=!0,be.exports.default=be.exports},82353:function(be,ot,Z){var H=Z(75059);function gt(){var Qe,Ge,xt=typeof Symbol=="function"?Symbol:{},it=xt.iterator||"@@iterator",le=xt.toStringTag||"@@toStringTag";function kt(rt,Bn,Mt,En){var Jn=Bn&&Bn.prototype instanceof ht?Bn:ht,vr=Object.create(Jn.prototype);return H(vr,"_invoke",function(oo,Ao,Gi){var Pr,Ye,bn,er=0,Hn=Gi||[],Or=!1,Un={p:0,n:0,v:Qe,a:Sr,f:Sr.bind(Qe,4),d:function(Tn,tr){return Pr=Tn,Ye=0,bn=Qe,Un.n=tr,sn}};function Sr(Dt,Tn){for(Ye=Dt,bn=Tn,Ge=0;!Or&&er&&!tr&&Ge<Hn.length;Ge++){var tr,Vn=Hn[Ge],ir=Un.p,pr=Vn[2];Dt>3?(tr=pr===Tn)&&(bn=Vn[(Ye=Vn[4])?5:(Ye=3,3)],Vn[4]=Vn[5]=Qe):Vn[0]<=ir&&((tr=Dt<2&&ir<Vn[1])?(Ye=0,Un.v=Tn,Un.n=Vn[1]):ir<pr&&(tr=Dt<3||Vn[0]>Tn||Tn>pr)&&(Vn[4]=Dt,Vn[5]=Tn,Un.n=pr,Ye=0))}if(tr||Dt>1)return sn;throw Or=!0,Tn}return function(Dt,Tn,tr){if(er>1)throw TypeError("Generator is already running");for(Or&&Tn===1&&Sr(Tn,tr),Ye=Tn,bn=tr;(Ge=Ye<2?Qe:bn)||!Or;){Pr||(Ye?Ye<3?(Ye>1&&(Un.n=-1),Sr(Ye,bn)):Un.n=bn:Un.v=bn);try{if(er=2,Pr){if(Ye||(Dt="next"),Ge=Pr[Dt]){if(!(Ge=Ge.call(Pr,bn)))throw TypeError("iterator result is not an object");if(!Ge.done)return Ge;bn=Ge.value,Ye<2&&(Ye=0)}else Ye===1&&(Ge=Pr.return)&&Ge.call(Pr),Ye<2&&(bn=TypeError("The iterator does not provide a '"+Dt+"' method"),Ye=1);Pr=Qe}else if((Ge=(Or=Un.n<0)?bn:oo.call(Ao,Un))!==sn)break}catch(Vn){Pr=Qe,Ye=1,bn=Vn}finally{er=1}}return{value:Ge,done:Or}}}(rt,Mt,En),!0),vr}var sn={};function ht(){}function on(){}function Je(){}Ge=Object.getPrototypeOf;var an=[][it]?Ge(Ge([][it]())):(H(Ge={},it,function(){return this}),Ge),At=Je.prototype=ht.prototype=Object.create(an);function Sn(rt){return Object.setPrototypeOf?Object.setPrototypeOf(rt,Je):(rt.__proto__=Je,H(rt,le,"GeneratorFunction")),rt.prototype=Object.create(At),rt}return on.prototype=Je,H(At,"constructor",Je),H(Je,"constructor",on),on.displayName="GeneratorFunction",H(Je,le,"GeneratorFunction"),H(At),H(At,le,"Generator"),H(At,it,function(){return this}),H(At,"toString",function(){return"[object Generator]"}),(be.exports=gt=function(){return{w:kt,m:Sn}},be.exports.__esModule=!0,be.exports.default=be.exports)()}be.exports=gt,be.exports.__esModule=!0,be.exports.default=be.exports},43709:function(be,ot,Z){var H=Z(31747);function gt(Qe,Ge,xt,it,le){var kt=H(Qe,Ge,xt,it,le);return kt.next().then(function(sn){return sn.done?sn.value:kt.next()})}be.exports=gt,be.exports.__esModule=!0,be.exports.default=be.exports},31747:function(be,ot,Z){var H=Z(82353),gt=Z(23841);function Qe(Ge,xt,it,le,kt){return new gt(H().w(Ge,xt,it,le),kt||Promise)}be.exports=Qe,be.exports.__esModule=!0,be.exports.default=be.exports},23841:function(be,ot,Z){var H=Z(55347),gt=Z(75059);function Qe(Ge,xt){function it(kt,sn,ht,on){try{var Je=Ge[kt](sn),an=Je.value;return an instanceof H?xt.resolve(an.v).then(function(At){it("next",At,ht,on)},function(At){it("throw",At,ht,on)}):xt.resolve(an).then(function(At){Je.value=At,ht(Je)},function(At){return it("throw",At,ht,on)})}catch(At){on(At)}}var le;this.next||(gt(Qe.prototype),gt(Qe.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),gt(this,"_invoke",function(kt,sn,ht){function on(){return new xt(function(Je,an){it(kt,ht,Je,an)})}return le=le?le.then(on,on):on()},!0)}be.exports=Qe,be.exports.__esModule=!0,be.exports.default=be.exports},75059:function(be){function ot(Z,H,gt,Qe){var Ge=Object.defineProperty;try{Ge({},"",{})}catch(xt){Ge=0}be.exports=ot=function(it,le,kt,sn){if(le)Ge?Ge(it,le,{value:kt,enumerable:!sn,configurable:!sn,writable:!sn}):it[le]=kt;else{var ht=function(Je,an){ot(it,Je,function(At){return this._invoke(Je,an,At)})};ht("next",0),ht("throw",1),ht("return",2)}},be.exports.__esModule=!0,be.exports.default=be.exports,ot(Z,H,gt,Qe)}be.exports=ot,be.exports.__esModule=!0,be.exports.default=be.exports},20234:function(be){function ot(Z){var H=Object(Z),gt=[];for(var Qe in H)gt.unshift(Qe);return function Ge(){for(;gt.length;)if((Qe=gt.pop())in H)return Ge.value=Qe,Ge.done=!1,Ge;return Ge.done=!0,Ge}}be.exports=ot,be.exports.__esModule=!0,be.exports.default=be.exports},3079:function(be,ot,Z){var H=Z(55347),gt=Z(82353),Qe=Z(43709),Ge=Z(31747),xt=Z(23841),it=Z(20234),le=Z(46646);function kt(){"use strict";var sn=gt(),ht=sn.m(kt),on=(Object.getPrototypeOf?Object.getPrototypeOf(ht):ht.__proto__).constructor;function Je(Sn){var rt=typeof Sn=="function"&&Sn.constructor;return!!rt&&(rt===on||(rt.displayName||rt.name)==="GeneratorFunction")}var an={throw:1,return:2,break:3,continue:3};function At(Sn){var rt,Bn;return function(Mt){rt||(rt={stop:function(){return Bn(Mt.a,2)},catch:function(){return Mt.v},abrupt:function(Jn,vr){return Bn(Mt.a,an[Jn],vr)},delegateYield:function(Jn,vr,oo){return rt.resultName=vr,Bn(Mt.d,le(Jn),oo)},finish:function(Jn){return Bn(Mt.f,Jn)}},Bn=function(Jn,vr,oo){Mt.p=rt.prev,Mt.n=rt.next;try{return Jn(vr,oo)}finally{rt.next=Mt.n}}),rt.resultName&&(rt[rt.resultName]=Mt.v,rt.resultName=void 0),rt.sent=Mt.v,rt.next=Mt.n;try{return Sn.call(this,rt)}finally{Mt.p=rt.prev,Mt.n=rt.next}}}return(be.exports=kt=function(){return{wrap:function(Bn,Mt,En,Jn){return sn.w(At(Bn),Mt,En,Jn&&Jn.reverse())},isGeneratorFunction:Je,mark:sn.m,awrap:function(Bn,Mt){return new H(Bn,Mt)},AsyncIterator:xt,async:function(Bn,Mt,En,Jn,vr){return(Je(Mt)?Ge:Qe)(At(Bn),Mt,En,Jn,vr)},keys:it,values:le}},be.exports.__esModule=!0,be.exports.default=be.exports)()}be.exports=kt,be.exports.__esModule=!0,be.exports.default=be.exports},46646:function(be,ot,Z){var H=Z(53990).default;function gt(Qe){if(Qe!=null){var Ge=Qe[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],xt=0;if(Ge)return Ge.call(Qe);if(typeof Qe.next=="function")return Qe;if(!isNaN(Qe.length))return{next:function(){return Qe&&xt>=Qe.length&&(Qe=void 0),{value:Qe&&Qe[xt++],done:!Qe}}}}throw new TypeError(H(Qe)+" is not iterable")}be.exports=gt,be.exports.__esModule=!0,be.exports.default=be.exports},53990:function(be){function ot(Z){"@babel/helpers - typeof";return be.exports=ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},be.exports.__esModule=!0,be.exports.default=be.exports,ot(Z)}be.exports=ot,be.exports.__esModule=!0,be.exports.default=be.exports},15721:function(be,ot,Z){var H=Z(3079)();be.exports=H;try{regeneratorRuntime=H}catch(gt){typeof globalThis=="object"?globalThis.regeneratorRuntime=H:Function("r","regeneratorRuntime = r")(H)}}}]);
