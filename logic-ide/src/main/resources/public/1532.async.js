"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[1532],{81532:function(N,L,h){h.r(L),h.d(L,{UserSelectControlRenderer:function(){return B},default:function(){return b}});var n=h(15767),S=h(87363),P=h.n(S),T=h(84875),U=h.n(T),g=h(42977),M=h(94391),F=h(33170),R=h.n(F),j=h(45581),b=function(y){(0,n.ZT)(l,y);function l(t){return y.call(this,t)||this}return l.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},l.prototype.onSearch=function(t,e,i){return(0,n.mG)(this,void 0,void 0,function(){var o,d,a,s,m,p,c,u,f,r;return(0,n.Jh)(this,function(v){switch(v.label){case 0:if(o=this.props,d=o.searchApi,a=o.setLoading,s=o.env,d=(i==null?void 0:i.searchApi)||d,m=(i==null?void 0:i.searchTerm)||this.props.searchTerm||"term",p=(i==null?void 0:i.searchParam)||this.props.searchParam||{},c=(0,n.pi)((r={},r[m]=t,r),p),!(0,g.X1t)(d,c))return[2,Promise.resolve([])];a(!0),v.label=1;case 1:return v.trys.push([1,,3,4]),[4,s.fetcher(d,c,{cancelExecutor:e,autoAppend:!0})];case 2:return u=v.sent(),f=u.data&&u.data.options||u.data||[],[2,f];case 3:return a(!1),[7];case 4:return[2]}})})},l.prototype.deferLoad=function(t,e,i){return(0,n.mG)(this,void 0,void 0,function(){var o,d,a,s,m,p,c,u,f;return(0,n.Jh)(this,function(r){switch(r.label){case 0:if(o=this.props,d=o.env,a=o.deferApi,s=o.setLoading,m=o.formInited,p=o.addHook,a=(i==null?void 0:i.deferApi)||a,!d||!d.fetcher)throw new Error("fetcher is required");if(c=(0,g.nW9)(t,{}),!(0,g.X1t)(a,c))return[2,Promise.resolve([])];r.label=1;case 1:return r.trys.push([1,,3,4]),[4,d.fetcher(a,c)];case 2:return u=r.sent(),f=u.data&&u.data.options||u.data||[],e&&f.forEach(function(v){v.isRef=!0}),[2,f];case 3:return s(!1),[7];case 4:return[2]}})})},l.prototype.changeValue=function(t){return(0,n.mG)(this,void 0,void 0,function(){var e,i,o,d,a,s,m,p,c,u,f,r,v,O;return(0,n.Jh)(this,function(_){switch(_.label){case 0:return e=this.props,i=e.joinValues,o=e.extractValue,d=e.delimiter,a=e.multiple,s=e.valueField,m=e.onChange,p=e.options,c=e.setOptions,u=e.data,f=e.dispatchEvent,r=t,v=[],(Array.isArray(t)?t:t?[t]:[]).forEach(function(E){var A=R()(p,function(C){return C[s||"value"]==E[s||"value"]});A||v.push(E)}),i?a?r=Array.isArray(t)?t.map(function(E){return E[s||"value"]}).join(d):t?t[s||"value"]:"":r=r?r[s||"value"]:"":o&&(a?r=Array.isArray(t)?t.map(function(E){return E[s||"value"]}):t?[t[s||"value"]]:[]:r=r?r[s||"value"]:""),[4,f("change",(0,g.vXk)(this.props,{value:r,options:p,items:p}))];case 1:return O=_.sent(),O!=null&&O.prevented?[2]:(m(r),[2])}})})},l.prototype.renderStatic=function(){var t=this.props,e=t.selectedOptions,i=t.labelField,o=i===void 0?"label":i,d=t.classnames;return o==="avatar"?e.map(function(a,s){return P().createElement("img",{key:s,className:d("UserSelect-avatar-img"),src:a[o],alt:""})}):e.map(function(a){return a[o]}).join(",")},l.prototype.render=function(){var t=this,e=this.props,i=e.showNav,o=e.navTitle,d=e.searchable,a=e.options,s=e.className,m=e.style,p=e.selectedOptions,c=e.tabOptions,u=e.multi,f=e.multiple,r=e.isDep,v=e.isRef,O=e.placeholder,_=e.searchPlaceholder,E=e.tabMode,A=e.data,C=e.displayFields,I=e.labelField,W=e.loadingConfig,w=e.disabled;return c==null||c.forEach(function(D){D.deferLoad=t.deferLoad,D.onChange=t.changeValue,D.onSearch=t.onSearch}),P().createElement("div",{className:U()("UserSelectControl",s)},E?P().createElement(M._fn,{selection:p,tabOptions:c,multiple:f,displayFields:C,onChange:this.changeValue,onSearch:this.onSearch,deferLoad:this.deferLoad,data:A,disabled:w}):P().createElement(M.oFw,{loadingConfig:W,showNav:i,navTitle:o,selection:p,options:a,multi:u,multiple:f,searchable:d,placeholder:O,searchPlaceholder:_,deferLoad:this.deferLoad,onChange:this.changeValue,onSearch:this.onSearch,displayFields:C,labelField:I,isDep:r,isRef:v,disabled:w}))},l.defaultProps={showNav:!0},(0,n.gn)([g.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[String,Function,Object]),(0,n.w6)("design:returntype",Promise)],l.prototype,"onSearch",null),(0,n.gn)([g.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object,Boolean,Object]),(0,n.w6)("design:returntype",Promise)],l.prototype,"deferLoad",null),(0,n.gn)([g.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",Promise)],l.prototype,"changeValue",null),(0,n.gn)([(0,j.i)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],l.prototype,"render",null),l}(P().Component),B=function(y){(0,n.ZT)(l,y);function l(){return y!==null&&y.apply(this,arguments)||this}return l=(0,n.gn)([(0,g.oZB)({type:"users-select"})],l),l}(b)}}]);
