"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[8023],{93797:function(de,F,e){e.d(F,{E:function(){return te},Z:function(){return he}});var U=e(93525),s=e.n(U),L=e(54306),v=e.n(L),b=e(63466),j=e(21140),H=e(52510),_=e(87363),p=e.n(_),T=e(5671),c=e(9722),J=e(17696),k=e(19227),ae=e(75476),V=e(1167),G=e(22046),x=e(22150),P=e(11250),I=e(89357),g=e(83217),r=e(23360),f=e(27522),i=e(54145),h=e(34957),l=e(33130);function Y(W){return(0,l.jsxs)("div",{style:{margin:0,height:"95vh",overflowY:"scroll"},children:[(0,l.jsx)(h.Z,{isStatic:W.isStatic,editNode:W.editNode,jsTipMap:W.jsTipMap,onSubmit:W.onSubmit}),W!=null&&W.isCollapsed?"":(0,l.jsx)(i.ZP,{type:"text",style:{position:"absolute",top:10,right:15,fontSize:20,textAlign:"center"},onClick:function(){W==null||W.onClose()},children:"x"})]})}var oe=Y,w=e(9976),o=e(12490),M=function(t,u){var X,ee,K,ce,ue=u.getData(),re=u.getPosition(),fe=t.getNodes(),B;if(["ExtSharp","polygon"].indexOf(u.shape)>-1&&ue!=null&&ue.config&&ue.config.type)switch(ue.config.type){case"switch":var ge=200,ie=t.addNode({shape:"switch",position:re,width:ge,height:50,ports:o.Tt,data:u.data,attrs:{body:{stroke:"#8f8f8f",strokeWidth:1,fill:"#fff",rx:6,ry:6}}});t.removeNode(u);var d=t.addNode({shape:"switch-case",position:{y:re.y+100,x:re.x-ge/2},width:120,height:50,ports:o.Tt,data:{config:{type:"switch-case"}}}),m=t.addNode({shape:"switch-default",position:{y:re.y+100,x:re.x+ge},width:120,height:50,ports:o.Tt,data:{config:{type:"switch-default"}}}),S=t.addEdge({source:ie,sourcePort:(X=ie.ports.items.find(function(q){return q.group=="bottom"}))===null||X===void 0?void 0:X.id,target:d,targetPort:(ee=d.ports.items.find(function(q){return q.group=="top"}))===null||ee===void 0?void 0:ee.id,zIndex:0}),A=t.addEdge({source:ie,sourcePort:(K=ie.ports.items.find(function(q){return q.group=="bottom"}))===null||K===void 0?void 0:K.id,target:m,targetPort:(ce=m.ports.items.find(function(q){return q.group=="top"}))===null||ce===void 0?void 0:ce.id,zIndex:0});B=ie;break;case"switch-case":var C=t.createNode({shape:"switch-case",position:u.position(),width:120,height:50,ports:o.Tt,data:u.data});t.removeNode(u),t.addNode(C),B=C;break;case"switch-default":var se=t.createNode({shape:"switch-default",position:u.position(),width:120,height:50,ports:o.Tt,data:u.data});t.removeNode(u),t.addNode(se),B=se;break;case"switch-cases":var D=t.createNode({shape:"switch-cases",position:u.position(),width:120,height:50,ports:o.Tt,data:u.data});t.removeNode(u),t.addNode(D),B=D;break;case"string":var pe=t.createNode({shape:"string",position:u.position(),width:100,height:50,ports:o.Tt,data:u.data});t.removeNode(u),t.addNode(pe),B=pe;break;case"num":var Se=t.createNode({shape:"num",position:u.position(),width:100,height:50,ports:o.Tt,data:u.data});t.removeNode(u),t.addNode(Se),B=Se;break;case"assignment":var ye=t.createNode({shape:"assignment",position:u.position(),width:220,height:50,ports:o.Tt,data:u.data});t.removeNode(u),t.addNode(ye),B=ye;break;default:break}if(["\u5DE5\u5E8F\u7EC4"].indexOf(u.getAttrByPath("text/text"))>-1&&(u.zIndex=-1),console.log("node:added"),B&&fe.length==1){var le,be,xe,_e,$;t.addEdge({source:fe[0],sourcePort:(le=fe[0].ports.items.find(function(q){return q.group=="bottom"}))===null||le===void 0?void 0:le.id,target:B,targetPort:(be=B)===null||be===void 0||(xe=be.ports)===null||xe===void 0||(_e=xe.items)===null||_e===void 0||($=_e.find(function(q){return q.group=="top"}))===null||$===void 0?void 0:$.id,zIndex:0})}},R=e(71731),z=null,te=p().createContext({}),Q=function(t,u){for(var X=0,ee=t.length;X<ee;X+=1)t[X].style.visibility=u?"visible":"hidden"},me=function(t){var u,X,ee,K=(0,_.useState)(),ce=v()(K,2),ue=ce[0],re=ce[1],fe=(0,_.useState)(!t.showLeft),B=v()(fe,2),ge=B[0],ie=B[1],d=(0,_.useState)(!t.showRight),m=v()(d,2),S=m[0],A=m[1],C=(0,_.useState)(t.panelData),se=v()(C,2),D=se[0],pe=se[1],Se=(0,_.useState)(),ye=v()(Se,2),le=ye[0],be=ye[1],xe=(0,_.useState)(),_e=v()(xe,2),$=_e[0],q=_e[1],je=(0,_.useState)(),Te=v()(je,2),we=Te[0],Ae=Te[1],Oe=(0,_.useState)(t.graphIns),Ce=v()(Oe,2),ve=Ce[0],Me=Ce[1],Re=(0,_.useState)(),Pe=v()(Re,2),Be=Pe[0],Ne=Pe[1];(0,_.useEffect)(function(){try{var O;if((O=t.panelData)!==null&&O!==void 0&&O.Shapes){var n;(n=t.panelData)===null||n===void 0||n.Shapes.forEach(function(a){console.log("\u56FE\u5185\u90E8\u6CE8\u518C\u65B0\u8282\u70B9:"+a.name),T.kJ.registerNode(a.name,a.config,!0)})}}catch(a){console.error("\u6CE8\u518C\u8282\u70B9\u51FA\u9519\uFF1A"),console.error(a)}},[(u=t.panelData)===null||u===void 0?void 0:u.Shapes]),(0,_.useEffect)(function(){ve&&(ve.options.connecting.createEdge=t.createEdge)},[t.createEdge]),(0,_.useEffect)(function(){$&&Ie($)},[$]),(0,_.useEffect)(function(){if(ve&&t.graphJson)try{ve.fromJSON(t.graphJson),ve.centerContent()}catch(O){g.ZP.error("\u56FE\u6570\u636E\u6709\u8BEF\uFF0C\u5DF2\u5FFD\u7565"),console.error(O),console.log(t.graphJson)}},[t.graphJson]),(0,_.useEffect)(function(){ie(!(t!=null&&t.showLeft))},[t.showLeft]);function Ie(O){if(console.log("initGraph"),!!O){var n=t.graphIns;return n||(n=new T.kJ({container:O,embedding:{enabled:!0,findParent:function(y){var E=y.node,N=E.getBBox();return this.getNodes().filter(function(Z){var ne=Z.getData();if(ne&&ne.parent){var Ee=Z.getBBox();return N.isIntersectWithRect(Ee)}return!1})}},mousewheel:{enabled:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:15}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,snap:{radius:20},createEdge:t.createEdge,validateConnection:function(y){var E=y.targetMagnet;return!!E}},background:{color:"#fff"},grid:!0})),n.use(new V.H({enabled:!0,sharp:!0})).use(new J.A({enabled:!0})).use(new ae.Y({enabled:!0,multiple:!0,strict:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0,pointerEvents:"none"})).use(new x.T({enabled:!0})).use(new k.N).use(new c.T({enabled:!0})).use(new P.D).use(new R.w({resizing:{enabled:!0,minWidth:50,maxWidth:0,minHeight:50,maxHeight:0,orthogonal:!1,restrict:!1,preserveAspectRatio:!1}})).use(new I.a({container:we})),n.on("edge:dblclick",function(a){var y=a.cell}),n.on("edge:change:router",function(a){console.log("edge:change:router")}),n.on("edge:mouseenter",function(a){var y=a.cell;t.edgeTools&&t.edgeTools.forEach(function(E){switch(E){case"edge-editor":break;case"button-remove":y.addTools([{name:"button-remove",args:{distance:-10}}]);break;case"segments":y.addTools(["segments"]);break;case"vertices":y.addTools(["vertices"]);break;default:break}})}),n.on("edge:mouseleave",function(a){var y=a.cell;y.removeTools()}),n.on("node:mouseenter",function(a){var y,E,N=a.cell;((y=N.data)===null||y===void 0||(E=y.config)===null||E===void 0?void 0:E.type)!="start"&&(N.addTools([{name:"button-remove",args:{x:"100%",y:0,offset:{x:-10,y:10}}}]),N.setData({selected:!0}));var Z=$==null?void 0:$.querySelectorAll(".x6-port-body");Q(Z,!0)}),n.on("node:mouseleave",function(a){var y=a.cell;y.setData({selected:!1}),y.removeTools();var E=$==null?void 0:$.querySelectorAll(".x6-port-body");Q(E,!1)}),n.on("node:click",function(a){var y=a.e,E=a.x,N=a.y,Z=a.node,ne=a.view;Z.removeTools(),re(Z)}),n.on("node:added",function(a){var y=a.node,E=a.index,N=a.options;M(n,y)}),n.on("node:dblclick",function(a){var y=a.e,E=a.x,N=a.y,Z=a.node,ne=a.view;A(!1),re(Z)}),n.bindKey(["meta+c","ctrl+c"],function(){var a=n.getSelectedCells();return a.length&&n.copy(a,{useLocalStorage:!0}),!1}),n.bindKey(["meta+v","ctrl+v"],function(){debugger;if(!n.isClipboardEmpty({useLocalStorage:!0})){var a=n.paste({offset:32,useLocalStorage:!0});n.cleanSelection(),n.select(a)}return!1}),n.bindKey(["meta+x","ctrl+x"],function(){var a=n.getSelectedCells();return a.length&&n.cut(a),!1}),n.bindKey(["meta+z","ctrl+z"],function(){return n.canUndo()&&n.undo(),!1}),n.bindKey(["meta+shift+z","ctrl+shift+z"],function(){return n.canRedo()&&n.redo(),!1}),n.bindKey("backspace",function(){var a=n.getSelectedCells();n.removeCells(a)}),n.bindKey("delete",function(){var a=n.getSelectedCells();n.removeCells(a)}),n.on("blank:click",function(a){var y=a.e,E=a.x,N=a.y;console.log("blank:click",E,N),A(!0)}),n.on("blank:dblclick",function(a){var y=a.e,E=a.x,N=a.y;console.log("blank:dbclick",E,N),t.autoLayout&&t.autoLayout(n)}),n.bindKey(["ctrl+1","meta+1"],function(){var a=n.zoom();a<1.5&&n.zoom(.1)}),n.bindKey(["ctrl+2","meta+2"],function(){var a=n.zoom();a>.5&&n.zoom(-.1)}),Me(n),t.graphJson&&Object.keys(t.graphJson).length>0?n.fromJSON(t.graphJson):t.onGraphJsonEmpty&&t.onGraphJsonEmpty(n),t.onGraphInsChange&&t.onGraphInsChange(n),n.centerContent(),n}}(0,_.useEffect)(function(){var O;if((O=t.panelData)!==null&&O!==void 0&&O.Groups&&t.panelData.Nodes){var n,a,y=new G.t({title:"\u5C55\u5F00/\u6536\u8D77",target:ve,search:function(Z,ne){var Ee=Z.getData(),De=Ee.config;return!De||!De.name?!1:De.name.indexOf(ne)!==-1},placeholder:"\u641C\u7D22\u8282\u70B9",notFoundText:"\u672A\u627E\u5230",collapsable:!0,stencilGraphWidth:250,groups:(n=t.panelData)===null||n===void 0?void 0:n.Groups,layoutOptions:{rowHeight:70,columns:2}}),E={};t.panelData.Nodes.forEach(function(N){var Z=ve.createNode(N.getNodeConfig());t.panelData.Groups.forEach(function(ne){N.getGroups().includes(ne.name)&&(E[ne.name]?E[ne.name].push(Z):E[ne.name]=[Z])})}),Object.keys(E).forEach(function(N){y.load(s()(E[N]),N)}),le==null||(a=le.children.item(0))===null||a===void 0||a.remove(),le==null||le.appendChild(y.container),Ne(y)}},[(X=t.panelData)===null||X===void 0?void 0:X.Nodes,(ee=t.panelData)===null||ee===void 0?void 0:ee.Groups]);function Fe(){t.onSave&&t.onSave(ve)}var Ue=(0,_.useMemo)(function(){if(t.toolElements){var O;return(0,l.jsx)(r.Z.Header,{style:{padding:0,backgroundColor:"white"},children:(0,l.jsx)(f.Z,{style:{height:"50px"},children:(O=t.toolElements)===null||O===void 0?void 0:O.map(function(n){return n})})})}else return(0,l.jsx)("span",{})},[t.toolElements]);return(0,l.jsx)(te.Provider,{value:t.editorCtx,children:(0,l.jsxs)(r.Z,{style:{height:"100vh",width:"100%",margin:0},children:[Ue,(0,l.jsxs)(r.Z,{style:{height:"100vh"},children:[(0,l.jsx)(r.Z.Sider,{theme:"light",collapsed:ge,collapsedWidth:0,width:250,ref:function(n){return be(n)}}),(0,l.jsxs)(r.Z.Content,{className:"app-content",children:[(0,l.jsx)(w.Z,{ref:function(n){return q(n)}}),(0,l.jsx)("div",{className:"app-minimap",ref:function(n){return Ae(n)}})]}),(0,l.jsx)(r.Z.Sider,{style:{background:"transparent"},collapsed:S,collapsedWidth:0,width:600,children:(0,l.jsx)(oe,{isStatic:t.isStatic,editNode:ue,onSubmit:Fe,jsTipMap:t.jsTipMap,onClose:function(){A(!0)},isCollapsed:S})})]})]})})},he=me},9976:function(de,F,e){e.d(F,{Z:function(){return v}});var U=e(87363),s=e(33130),L=(0,U.forwardRef)(function(b,j){return(0,s.jsx)("div",{className:"drag-graph",ref:j})}),v=L},34957:function(de,F,e){var U=e(57213),s=e.n(U),L=e(54306),v=e.n(L),b=e(94990),j=e(87363),H=e.n(j),_=e(33130);F.Z=function(p){var T,c=(0,j.useState)(""),J=v()(c,2),k=J[0],ae=J[1],V=(0,j.useState)({}),G=v()(V,2),x=G[0],P=G[1],I=function(r){var f,i,h;(f=p.editNode)===null||f===void 0||f.setAttrByPath("text/text",r.name);var l=(i=p.editNode)===null||i===void 0?void 0:i.data.config;p.editNode&&(console.log("update graph data",r),p.editNode.setData(s()(s()({},p.editNode.data),{},{config:s()(s()({},l),r)}),{overwrite:!0})),console.log("submit---props.editNode.data.config"),console.log((h=p.editNode)===null||h===void 0?void 0:h.data.config),p==null||p.onSubmit()};return(0,j.useEffect)(function(){if(p.editNode&&p.editNode.data){var g=p.editNode.data.config||{};ae(p.editNode.data.configSchema||g.type)}},[p.editNode]),(0,j.useEffect)(function(){var g;if((g=p.editNode)!==null&&g!==void 0&&g.data){var r,f,i=((r=p.editNode)===null||r===void 0?void 0:r.data.config)||{},h=s()({},i),l=(f=p.editNode)===null||f===void 0?void 0:f.attrs;l&&l.text&&l.text.text&&(h.name=l.text.text),P(h)}},[(T=p.editNode)===null||T===void 0?void 0:T.data]),(0,_.jsx)(b.Z,{isStatic:p.isStatic,formId:k,values:s()({},x),onSubmit:I,jsTipMap:p.jsTipMap})}},12490:function(de,F,e){e.d(F,{Tt:function(){return U}});var U={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}},zIndex:1},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top"},{group:"right"},{group:"bottom"},{group:"left"}]},s={groups:{right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}},zIndex:1}},items:[{group:"right"}]},L={groups:{bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}},zIndex:1}},items:[{group:"bottom"}]}},94990:function(de,F,e){e.d(F,{Z:function(){return oe}});var U=e(57213),s=e.n(U),L=e(54306),v=e.n(L),b=e(87363),j=e.n(b),H=e(12472),_=e(70517),p=e(90010),T=e.n(p),c=e(23620),J=e(2069),k=e(37635),ae=e.n(k),V=function w(o){if(o=o==null)return o;var M="{";return Object.keys(o).forEach(function(R){var z=o[R];M+="".concat(R,":"),Array.isArray(z)?M+="[],":ae()(z)=="object"?M+=w(z)+",":typeof z=="string"?M+="'".concat(z,"',"):M+="".concat(z,",")}),M+="}",M},G=function(o,M){var R="";M&&(Object.keys(M).forEach(function(te){var Q=M[te];R+="".concat(te,":"),Array.isArray(Q)?R+="[],":ae()(Q)=="object"?R+=V(Q)+",":typeof Q=="string"?R+="'".concat(Q,"',"):R+="".concat(Q,",")}),R=R.substring(0,R.length-1));var z="const ".concat(o,"={").concat(R,"}");return z},x=e(33358),P=e(49500),I=e(16123),g=e(69078),r=e(93797),f=e(98896),i=e(33130),h=function(o){var M=(0,b.useContext)(r.E),R=(0,b.useState)(o==null?void 0:o.config),z=v()(R,2),te=z[0],Q=z[1],me=(0,b.useState)(o==null?void 0:o.values),he=v()(me,2),W=he[0],t=he[1],u=M==null?void 0:M.jsTips,X=(0,b.useState)(),ee=v()(X,2),K=ee[0],ce=ee[1];function ue(d,m,S){d==="formSubmited"?(console.log("\u5185\u90E8\u8868\u5355\u63D0\u4EA4\u4E86",S),o.onSubmit(S)):console.log("\u5185\u90E8\u8868\u5355\u89E6\u53D1\u4E86Broadcast",S)}(0,b.useEffect)(function(){(0,f.m)(_.Z)},[]),(0,b.useEffect)(function(){if(o.config&&o.config.body){var d,m=o.config.body[0];(d=m.body)===null||d===void 0||d.forEach(function(A){ie(A)});var S=K==null?void 0:K.getComponentByName("page1.form1");S==null||S.props.store.clear(),Q(o.config)}},[o.config]),(0,b.useEffect)(function(){var d=K==null?void 0:K.getComponentByName("page1.form1");d==null||d.props.store.clear(),d==null||d.props.store.setValues(o.values)},[te]),(0,b.useEffect)(function(){var d=K==null?void 0:K.getComponentByName("page1.form1");d==null||d.props.store.clear(),d==null||d.props.store.setValues(o.values),t(o.values)},[o.values]);var re=(0,b.useState)(),fe=v()(re,2),B=fe[0],ge=fe[1];function ie(d){d.type=="editor"&&d.language=="javascript"?d.editorDidMount=function(m,S){return ge(S),u&&Object.keys(u).forEach(function(A){var C=G(A,JSON.parse(u[A]));S==null||S.languages.typescript.javascriptDefaults.addExtraLib(C,"".concat(A,".ts"))}),function(){try{var A,C;console.log("effect dispose"),m==null||m.dispose(),m==null||(A=m.current)===null||A===void 0||A.dispose(),S==null||(C=S.current)===null||C===void 0||C.dispose()}catch(se){console.error("error in findEditorItem"),console.error(se)}}}:d.body&&d.body.forEach(function(m){ie(m)})}return(0,b.useEffect)(function(){u&&Object.keys(u).forEach(function(d){var m=G(d,JSON.parse(u[d]));B==null||B.languages.typescript.javascriptDefaults.addExtraLib(m,"".concat(d,".ts"))})},[u]),(0,i.jsxs)("div",{children:[(0,i.jsx)(J.qR,{theme:"cxd",position:"top-right",locale:"zh-CN"},"toast"),(0,i.jsx)(J.wx,{theme:"cxd",locale:"zh-CN"},"alert"),(0,c.sYA)(te,{onBroadcast:ue,data:W,scopeRef:function(m){return ce(m)}},{fetcher:function(m){var S=m.url,A=m.method,C=m.data,se=m.responseType,D=m.config,pe=m.headers;return D=D||{},D.withCredentials=!0,se&&(D.responseType=se),D.cancelExecutor&&(D.cancelToken=new _.Z.CancelToken(D.cancelExecutor)),D.headers=pe||{},D.headers.Authorization||(D.headers.Authorization="Bearer "+g.F.getTokenFormLocal()),A!=="post"&&A!=="put"&&A!=="patch"?(C&&(D.params=C),_.Z[A](S,D)):(C&&C instanceof FormData?(D.headers=D.headers||{},D.headers["Content-Type"]="multipart/form-data"):C&&typeof C!="string"&&!(C instanceof Blob)&&!(C instanceof ArrayBuffer)&&(C=JSON.stringify(C),D.headers=D.headers||{},D.headers["Content-Type"]="application/json"),_.Z[A](S,C,D))},isCancel:function(m){return _.Z.isCancel(m)},copy:function(m){T()(m),J.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:"cxd",jumpTo:function(m,S){debugger;S.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+m,"_blank"):window.location.hash=m}})]})},l=j().memo(h),Y=function(o){var M=(0,b.useState)({type:"page"}),R=v()(M,2),z=R[0],te=R[1];return(0,b.useEffect)(function(){if(o.formId){var Q=o.isStatic?o.formId+"-static":o.formId;(0,H.CD)(Q).then(function(me){te(me)}).catch(function(me){console.log(me),(0,H.CD)(o.formId).then(function(he){te(he)})})}},[o.formId]),(0,i.jsx)("div",{children:(0,i.jsx)(l,s()(s()({},o),{},{config:z}))})},oe=Y},98896:function(de,F,e){e.d(F,{m:function(){return b}});var U=e(25359),s=e.n(U),L=e(49811),v=e.n(L);function b(H){return j.apply(this,arguments)}function j(){return j=v()(s()().mark(function H(_){return s()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:_.interceptors.response.use(function(c){return console.log("axios response"),console.log(c),c&&c.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),c.data.error||(c.data.error={code:0}),c.data.code==500&&(c.data.error={code:500,message:c.data.msg}),c.data.data&&c.data.data.records&&(c.data.data.items=c.data.data.records),c):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(c.data),Promise.reject(new Error(c.data.message)))},function(c){if(console.log("\u6355\u6349axios error"),console.log(c),c.response&&c.response.data){var J,k=c.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((J=c.response.data.error)===null||J===void 0?void 0:J.code)==0&&(c.response.data.error.code=500),console.log(k),k}return Promise.reject(c)});case 1:case"end":return T.stop()}},H)})),j.apply(this,arguments)}},69078:function(de,F,e){e.d(F,{F:function(){return U}});var U={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(L){return localStorage.setItem("token",L)}}},12472:function(de,F,e){e.d(F,{CD:function(){return ae},UD:function(){return J},n4:function(){return G},wx:function(){return P}});var U=e(25359),s=e.n(U),L=e(49811),v=e.n(L),b=e(31837),j=e(21140),H=e.n(j),_=e(63466),p=e.n(_),T=e(57475),c=function(){function g(){H()(this,g)}return p()(g,null,[{key:"getAssetFromDb",value:function(){var r=v()(s()().mark(function i(h,l){var Y;return s()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,T.U2)("/api/ide/settings/asset/".concat(h,"/").concat(l));case 2:return Y=w.sent.data,w.abrupt("return",JSON.parse(Y.data.config));case 4:case"end":return w.stop()}},i)}));function f(i,h){return r.apply(this,arguments)}return f}()},{key:"saveAssetToDb",value:function(){var r=v()(s()().mark(function i(h,l,Y){return s()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,T.v_)("/api/ide/settings/asset/".concat(h,"/").concat(l),Y));case 1:case"end":return w.stop()}},i)}));function f(i,h,l){return r.apply(this,arguments)}return f}()},{key:"getRemoteAssetFromDb",value:function(){var r=v()(s()().mark(function i(h,l,Y){var oe;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,T.U2)("/api/ide/papi/".concat(h,"/api/ide/settings/asset/").concat(l,"/").concat(Y));case 2:return oe=o.sent.data,o.abrupt("return",JSON.parse(oe.data.config));case 4:case"end":return o.stop()}},i)}));function f(i,h,l){return r.apply(this,arguments)}return f}()},{key:"saveRemoteAssetToDb",value:function(){var r=v()(s()().mark(function i(h,l,Y,oe){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,T.v_)("/api/ide/papi/".concat(h,"/api/ide/settings/asset/").concat(l,"/").concat(Y),oe));case 1:case"end":return o.stop()}},i)}));function f(i,h,l,Y){return r.apply(this,arguments)}return f}()}]),g}();function J(g){return k.apply(this,arguments)}function k(){return k=v()(s()().mark(function g(r){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(b.j.getModel()!="db"){i.next=4;break}return i.abrupt("return",c.getAssetFromDb("page",r));case 4:return i.next=6,(0,T.U2)("/logic/setting/pages/".concat(r,".json"));case 6:return i.abrupt("return",i.sent.data);case 7:case"end":return i.stop()}},g)})),k.apply(this,arguments)}function ae(g){return V.apply(this,arguments)}function V(){return V=v()(s()().mark(function g(r){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(b.j.getModel()!="db"){i.next=4;break}return i.abrupt("return",c.getAssetFromDb("form",r));case 4:return i.next=6,(0,T.U2)("/logic/setting/forms/".concat(r,".json"));case 6:return i.abrupt("return",i.sent.data);case 7:case"end":return i.stop()}},g)})),V.apply(this,arguments)}function G(g,r){return x.apply(this,arguments)}function x(){return x=v()(s()().mark(function g(r,f){return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(b.j.getModel()!="db"){h.next=4;break}return h.abrupt("return",c.getAssetFromDb(r,f));case 4:return h.next=6,(0,T.U2)("/logic/setting/".concat(r,"s/").concat(f,".json"));case 6:return h.abrupt("return",h.sent.data);case 7:case"end":return h.stop()}},g)})),x.apply(this,arguments)}function P(g,r,f){return I.apply(this,arguments)}function I(){return I=v()(s()().mark(function g(r,f,i){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(b.j.getModel()!="db"){l.next=2;break}return l.abrupt("return",c.saveAssetToDb(r,f,i));case 2:case"end":return l.stop()}},g)})),I.apply(this,arguments)}},57475:function(de,F,e){e.d(F,{U2:function(){return _},gz:function(){return T},v_:function(){return ae}});var U=e(25359),s=e.n(U),L=e(57213),v=e.n(L),b=e(49811),j=e.n(b),H=e(70517);function _(x,P){return p.apply(this,arguments)}function p(){return p=j()(s()().mark(function x(P,I){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",H.Z.get(P,G(I)));case 1:case"end":return r.stop()}},x)})),p.apply(this,arguments)}function T(x,P,I){return c.apply(this,arguments)}function c(){return c=j()(s()().mark(function x(P,I,g){return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",H.Z.put(P,I,G(g)));case 1:case"end":return f.stop()}},x)})),c.apply(this,arguments)}function J(x,P){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function x(P,I){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",axios.delete(P,G(I)));case 1:case"end":return r.stop()}},x)})),k.apply(this,arguments)}function ae(x,P,I){return V.apply(this,arguments)}function V(){return V=j()(s()().mark(function x(P,I,g){return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",H.Z.post(P,I,G(g)));case 1:case"end":return f.stop()}},x)})),V.apply(this,arguments)}function G(x){var P={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(P.Authorization="Bearer "+localStorage.getItem("token")),v()(v()({},x),{},{headers:v()(v()({},P),x==null?void 0:x.headers)})}}}]);
