"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5039],{98257:function(xe,A,e){e.r(A),e.d(A,{default:function(){return de}});var z=e(54306),c=e.n(z),B=e(25359),j=e.n(B),G=e(49811),E=e.n(G),J=e(14990),O=e(22465),b=e(5671),w=e(17696),U=e(19227),H=e(75476),K=e(1167),W=e(22150),m=e(58856),Y=e(40767),I=e(75904),Q=e(18725),r=e(87363),X=e(10486),k=e(14232),q=e(37555),_=e(59998),ee=e(88287),t=e(33130),ne=function(o){var i,l=(0,r.useState)(),f=c()(l,2),n=f[0],d=f[1],Z=(0,r.useState)(),F=c()(Z,2),g=F[0],P=F[1],S=(0,r.useState)(!1),h=c()(S,2),L=h[0],ye=h[1],ue=(0,r.useState)(!0),V=c()(ue,2),C=V[0],N=V[1],ce=(0,r.useState)(),D=c()(ce,2),T=D[0],ve=D[1],fe=(0,r.useState)(),M=c()(fe,2),ge=M[0],he=M[1],R=(0,r.useRef)();(0,r.useEffect)(function(){T&&(n==null||n.centerCell(T))},[T,n]),(0,r.useEffect)(function(){var s=n==null?void 0:n.getNodes().find(function(y){return y.id==o.nextId});s==null||s.attr("body/fill","red"),ve(s)},[o.nextId]),(0,r.useEffect)(function(){var s;n==null||(s=n.getNodes().find(function(y){return y.id==o.nextId}))===null||s===void 0||s.attr("body/fill","red")},[n]),(0,r.useEffect)(function(){o.config&&P(o.config)},[o.config]),(0,r.useEffect)(function(){if(g){try{var s=(0,X.K)(),y=s.Shapes;(0,k.m)(y)}catch(u){console.error("\u6CE8\u518C\u8282\u70B9\u51FA\u9519\uFF1A"),console.error(u)}var a=new b.kJ({container:R.current,embedding:{enabled:!0,validate:function(v){return v.child.setData({hoverNode:v.parent}),!0}},mousewheel:{enabled:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:15}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,snap:{radius:20},createEdge:function(){return new b.bn.kS({tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0})},validateConnection:function(v){var $=v.targetMagnet;return!!$}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},background:{color:"#F2F7FA"},grid:!0});a.use(new K.H({enabled:!0,sharp:!0})).use(new w.A({enabled:!0})).use(new H.Y({enabled:!0,multiple:!0,strict:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0,pointerEvents:"none"})).use(new W.T({enabled:!0})).use(new U.N),a.on("edge:dblclick",function(){}),a.on("edge:mouseenter",function(){}),a.on("edge:mouseleave",function(){}),a.on("node:moved",function(){}),a.on("node:mouseenter",function(){}),a.on("node:mouseleave",function(){}),a.on("node:added",function(){}),a.on("node:dblclick",function(u){var v=u.node;N(!1)}),a==null||a.on("node:click",function(u){var v=u.node;he(v)}),a.on("blank:dblclick",function(u){var v=u.x,$=u.y}),a.fromJSON(g.visualConfig),(0,_.V)(a),d(a)}},[g]);var me=[{key:"2",label:"\u8282\u70B9\u914D\u7F6E",children:(0,t.jsx)(ee.Z,{editNode:ge,configSchemaProvider:o.configSchemaProvider})}];return(0,t.jsxs)(m.Z,{style:{margin:0,height:"100vh"},children:[(0,t.jsxs)(m.Z,{style:{},children:[(0,t.jsxs)(m.Z.Header,{style:{padding:0,backgroundColor:"white"},children:[(0,t.jsx)(Y.Z,{direction:"horizontal",children:(i=o.btns)===null||i===void 0?void 0:i.map(function(s){return s})}),(0,t.jsx)(I.ZP,{type:"text",icon:C?(0,t.jsx)(J.Z,{}):(0,t.jsx)(O.Z,{}),onClick:function(){N(!C)},style:{float:"right",right:"16px",fontSize:"16px",width:64,height:64}})]}),(0,t.jsx)(m.Z.Content,{className:"app-content",children:(0,t.jsx)(q.Z,{ref:R})})]}),(0,t.jsxs)(m.Z.Sider,{theme:"light",collapsed:C,collapsedWidth:0,style:{overflow:"scroll"},title:"ddd",width:500,children:[(0,t.jsx)(I.ZP,{type:"text",onClick:function(){N(!C)},style:{float:"right",fontSize:"16px",width:64,height:64},children:"x"}),(0,t.jsx)(Q.Z,{items:me,defaultActiveKey:"1"})]})]})},te=ne,oe=e(48364),Se=e(61719),ae=e(52615),p=e(70517),re=e(98306),ie=function(){var x=E()(j()().mark(function o(i){var l;return j()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.Z.get("/setting/node-form/".concat(i,".json"));case 2:return l=n.sent,console.log(l.data),n.abrupt("return",l.data);case 5:case"end":return n.stop()}},o)}));return function(i){return x.apply(this,arguments)}}(),se=function(){var x=E()(j()().mark(function o(i){var l;return j()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.Z.get("/setting/node-log/".concat(i,".json")).catch(function(d){return d});case 2:if(l=n.sent,console.log(l.data),!l.data){n.next=8;break}return n.abrupt("return",l.data);case 8:return n.next=10,p.Z.get("/setting/node-log/_def.json");case 10:return n.abrupt("return",n.sent.data);case 11:case"end":return n.stop()}},o)}));return function(i){return x.apply(this,arguments)}}(),le=function(){var o=(0,re.UO)(),i=o.id,l=o.version,f=(0,r.useState)(),n=c()(f,2),d=n[0],Z=n[1],F=(0,r.useState)(!1),g=c()(F,2),P=g[0],S=g[1];return(0,r.useEffect)(function(){S(!0),i&&(0,oe.Uh)(i,l).then(function(h){var L=h;L.configJson.id=i,Z(L),S(!1)}).catch(function(h){S(!1),console.log("err"),console.log(h)})},[i]),(0,t.jsx)("div",{children:(0,t.jsx)(ae.Z,{spinning:P,children:(0,t.jsx)(te,{btns:[(0,t.jsxs)("span",{style:{marginLeft:"25px",color:"red"},children:["\u903B\u8F91\u7248\u672C\uFF1A",l]}),(0,t.jsxs)("span",{style:{marginLeft:"10px"},children:["\u66F4\u65B0\u65F6\u95F4\uFF1A",d==null?void 0:d.updateTime]}),(0,t.jsxs)("span",{style:{marginLeft:"10px"},children:["\u540D\u79F0\uFF1A",d==null?void 0:d.name]})],nextId:"",config:d==null?void 0:d.configJson,configSchemaProvider:ie,itemLogSchemaProvider:se})})})},de=le}}]);
