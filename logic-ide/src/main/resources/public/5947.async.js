"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5947],{2325:function(re,P,u){u.d(P,{C:function(){return C}});var C=new Map,B=50,N=50;C.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),C.set("ExtShape1",{name:"ExtShape1",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"#ffcc00",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),C.set("ExtShape2",{name:"ExtShape2",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"#87CEEB",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,strokeWidth:3,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),C.set("ExtShape3",{name:"ExtShape3",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"#FFF8DC",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},26062:function(re,P,u){u.d(P,{m:function(){return W}});var C=u(5671),B=u(95812),N=u(57213),s=u.n(N),j=u(53914),f={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},c=u(33130),F=function(g){var _,m,x,p=g.node,v=(_=p.data.config)===null||_===void 0?void 0:_.name;return(0,c.jsx)("div",{className:f.customNode,children:(0,c.jsx)(j.Z,{addonBefore:v||"case",className:"input",value:p==null||(m=p.data)===null||m===void 0||(x=m.config)===null||x===void 0?void 0:x.case,width:150,onChange:function(k){var S=p.data;p.setData(s()(s()({},S),{},{config:s()(s()({},S.config),{},{case:k.target.value})}))}})})},A=function(g){var _,m=g.node;return(0,c.jsx)("div",{className:f.customNode,children:(0,c.jsx)(j.Z,{addonBefore:"switch",className:"input",value:(_=m.data)===null||_===void 0?void 0:_.config.condition,onChange:function(p){var v=m.data;m.setData(s()(s()({},v),{},{config:s()(s()({},v.config),{},{condition:p.target.value})}))},width:100})})},G=function(g){return(0,c.jsx)("div",{className:f.customNode,children:(0,c.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})},O=u(54306),D=u.n(O),T=u(93525),Q=u.n(T),X=u(63466),ie=u(21140),K=u(52510),y=u(87363),z=u(39220),oe=u(28369),M=u(83805),Z=u(15035),J=u(36342),q={width:64,height:"100%",marginInlineEnd:8,verticalAlign:"top"},H=null,ee=function(g){var _=oe.Z.useToken(),m=_.token,x=(0,y.useState)(g.cases||[]),p=D()(x,2),v=p[0],h=p[1],k=(0,y.useState)(!1),S=D()(k,2),$=S[0],R=S[1],a=(0,y.useState)(""),e=D()(a,2),o=e[0],r=e[1],t=(0,y.useState)(-1),n=D()(t,2),i=n[0],l=n[1],L=(0,y.useState)(""),w=D()(L,2),I=w[0],ne=w[1],se=(0,y.useRef)(null),ue=(0,y.useRef)(null),ae=function(b){if(g.onChange){debugger;g.onChange(b)}};(0,y.useEffect)(function(){h(g.cases||[])},[g.cases]),(0,y.useEffect)(function(){if($){var d;(d=se.current)===null||d===void 0||d.focus()}},[$]),(0,y.useEffect)(function(){var d;(d=ue.current)===null||d===void 0||d.focus()},[I]);var de=function(b){var Y=v.filter(function(V){return V!==b});console.log(Y),ae(Y)},ge=function(){R(!0)},fe=function(b){r(b.target.value)},ce=function(){o&&!v.includes(o)&&ae([].concat(Q()(v),[o])),R(!1),r("")},pe=function(b){ne(b.target.value)},le=function(){var b=Q()(v);b[i]=I,ae(b),l(-1),ne("")},he={height:"100%",background:m.colorBgContainer,borderStyle:"dashed"};return(0,c.jsxs)(M.Z,{gap:"4px 0",wrap:!0,vertical:!0,children:[v.map(function(d,b){if(i===b)return(0,c.jsx)(j.Z,{ref:ue,size:"small",style:q,value:I,onChange:pe,onBlur:le,onPressEnter:le},d);var Y=d.length>20,V=(0,c.jsx)(Z.Z,{closable:g.editable,style:{userSelect:"none"},onClose:function(){return de(d)},children:(0,c.jsx)("span",{onDoubleClick:function(ve){b!==0&&(l(b),ne(d),ve.preventDefault())},children:Y?"".concat(d.slice(0,20),"..."):d})},d);return Y?(0,c.jsx)(J.Z,{title:d,children:V},d):V}),$?(0,c.jsx)(j.Z,{ref:se,type:"text",value:o,onChange:fe,onBlur:ce,onPressEnter:ce}):g.editable&&(0,c.jsx)(Z.Z,{style:he,icon:(0,c.jsx)(z.Z,{}),onClick:ge})]})},U=ee,te=function(g){var _,m,x,p,v,h=g.node,k=(_=h.data.config)===null||_===void 0?void 0:_.name,S=(0,y.useState)(h==null||(m=h.data)===null||m===void 0||(x=m.config)===null||x===void 0?void 0:x.cases),$=D()(S,2),R=$[0],a=$[1];return(0,y.useEffect)(function(){var e,o;a(h==null||(e=h.data)===null||e===void 0||(o=e.config)===null||o===void 0?void 0:o.cases)},[h==null||(p=h.data)===null||p===void 0||(v=p.config)===null||v===void 0?void 0:v.cases]),(0,c.jsxs)("div",{className:f.customNode,children:[k||"cases",(0,c.jsx)(U,{className:"input",cases:R,editable:g.node.data.selected,width:150,onChange:function(o){var r=h.data;h.setData(s()(s()({},r),{},{config:s()(s()({},r.config),{},{cases:o})}))}})]})};function W(E){E.forEach(function(g){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+g.name),C.kJ.registerNode(g.name,g.config,!0)}),(0,B.z2)({shape:"switch",component:A}),(0,B.z2)({shape:"switch-case",component:F}),(0,B.z2)({shape:"switch-cases",component:te}),(0,B.z2)({shape:"switch-default",component:G})}},48364:function(re,P,u){u.d(P,{Fx:function(){return $},KX:function(){return y},L7:function(){return k},Sl:function(){return D},Uh:function(){return x},az:function(){return ie},gC:function(){return ee},m9:function(){return Z},ni:function(){return q},oX:function(){return v},oc:function(){return _},qB:function(){return G},rE:function(){return te},yi:function(){return E}});var C=u(57213),B=u.n(C),N=u(25359),s=u.n(N),j=u(49811),f=u.n(j),c=u(57475),F=u(5726),A=u.n(F);function G(a){return O.apply(this,arguments)}function O(){return O=f()(s()().mark(function a(e){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.U2)("/api/ide/logic/".concat(e)).then(function(t){var n,i=(n=t.data)===null||n===void 0?void 0:n.data;return i.configJson=JSON.parse(i.configJson),i}));case 1:case"end":return r.stop()}},a)})),O.apply(this,arguments)}function D(a,e){return T.apply(this,arguments)}function T(){return T=f()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.U2)("/api/ide/papi/".concat(e,"/api/ide/logic/").concat(o)).then(function(n){var i,l=(i=n.data)===null||i===void 0?void 0:i.data;return l.configJson=JSON.parse(l.configJson),l}));case 1:case"end":return t.stop()}},a)})),T.apply(this,arguments)}function Q(a){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime().mark(function a(e){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",get("/api/ide/logic/".concat(e,"/config")).then(function(t){var n;return(n=t.data)===null||n===void 0?void 0:n.data}));case 1:case"end":return r.stop()}},a)})),X.apply(this,arguments)}function ie(a,e,o){return K.apply(this,arguments)}function K(){return K=f()(s()().mark(function a(e,o,r){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.gz)("/api/ide/logic/edit/".concat(e),{version:o,configJson:r,updateTime:A()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return n.stop()}},a)})),K.apply(this,arguments)}function y(a,e,o,r){return z.apply(this,arguments)}function z(){return z=f()(s()().mark(function a(e,o,r,t){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,c.gz)("/api/ide/papi/".concat(e,"/api/ide/logic/edit/").concat(o),{version:r,configJson:t,updateTime:A()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return i.stop()}},a)})),z.apply(this,arguments)}function oe(a,e){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function a(e,o){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",get("/api/ide/logic-instance/".concat(e,"/").concat(o)).then(function(n){var i=n.data.data;return i}));case 1:case"end":return t.stop()}},a)})),M.apply(this,arguments)}function Z(a){return J.apply(this,arguments)}function J(){return J=f()(s()().mark(function a(e){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.U2)("/api/ide/logic-instance/".concat(e)).then(function(t){var n=t.data.data;return n}));case 1:case"end":return r.stop()}},a)})),J.apply(this,arguments)}function q(a,e){return H.apply(this,arguments)}function H(){return H=f()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.U2)("/api/ide/papi/".concat(e,"/api/ide/logic-instance/").concat(o)).then(function(n){var i=n.data.data;return i}));case 1:case"end":return t.stop()}},a)})),H.apply(this,arguments)}function ee(a){return U.apply(this,arguments)}function U(){return U=f()(s()().mark(function a(e){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[e.logicId],type:"="},{dataIndex:"bizId",values:[e.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(t){var n=t.data.data.records;return n&&n.map(function(i){i.itemLogs&&(i.itemLogs=JSON.parse(i.itemLogs))}),n}));case 1:case"end":return r.stop()}},a)})),U.apply(this,arguments)}function te(a,e){return W.apply(this,arguments)}function W(){return W=f()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-logs"),{filters:[{dataIndex:"logicId",values:[o.logicId],type:"="},{dataIndex:"bizId",values:[o.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(n){var i=n.data.data.records;return i&&i.map(function(l){l.itemLogs&&(l.itemLogs=JSON.parse(l.itemLogs))}),i}));case 1:case"end":return t.stop()}},a)})),W.apply(this,arguments)}function E(a){return g.apply(this,arguments)}function g(){return g=f()(s()().mark(function a(e){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[e],type:"="}],pageSize:1e3}).then(function(t){var n=t.data.data.records;return n&&n.length>0&&n[0].itemLogs&&(n[0].itemLogs=JSON.parse(n[0].itemLogs)),n[0]}));case 1:case"end":return r.stop()}},a)})),g.apply(this,arguments)}function _(a,e){return m.apply(this,arguments)}function m(){return m=f()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-logs"),{filters:[{dataIndex:"id",values:[o],type:"="}],pageSize:1e3}).then(function(n){var i=n.data.data.records;return i&&i.length>0&&i[0].itemLogs&&(i[0].itemLogs=JSON.parse(i[0].itemLogs)),i[0]}));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function x(a,e){return p.apply(this,arguments)}function p(){return p=f()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[e],type:"="},{dataIndex:"version",values:[o],type:"="}]}).then(function(n){var i=n.data.data.records[0],l=i.configJson;return i.configJson=JSON.parse(l),i.configJson.id=i.id,i.configJson.name=i.name,i}));case 1:case"end":return t.stop()}},a)})),p.apply(this,arguments)}function v(a,e,o){return h.apply(this,arguments)}function h(){return h=f()(s()().mark(function a(e,o,r){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-baks"),{filters:[{dataIndex:"id",values:[o],type:"="},{dataIndex:"version",values:[r],type:"="}]}).then(function(i){var l=i.data.data.records[0],L=l.configJson;return l.configJson=JSON.parse(L),l.configJson.id=l.id,l.configJson.name=l.name,l}));case 1:case"end":return n.stop()}},a)})),h.apply(this,arguments)}function k(a,e,o,r,t,n){return S.apply(this,arguments)}function S(){return S=f()(s()().mark(function a(e,o,r,t,n,i){var l;return s()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:l="",w.t0=n,w.next=w.t0==="biz"?4:6;break;case 4:return t?l="/api/runtime/logic/v1/biz/".concat(e,"/").concat(t,"/").concat(r,"?debug=true"):l="/api/runtime/logic/v1/run-biz/".concat(e,"/").concat(r,"?debug=true"),w.abrupt("break",8);case 6:return l="/api/runtime/logic/v1/run-api/".concat(e,"?debug=true"),w.abrupt("break",8);case 8:return w.abrupt("return",(0,c.v_)(l,o,{headers:B()({"Content-Type":"application/json"},i)}));case 9:case"end":return w.stop()}},a)})),S.apply(this,arguments)}function $(a,e,o,r,t,n,i){return R.apply(this,arguments)}function R(){return R=f()(s()().mark(function a(e,o,r,t,n,i,l){var L;return s()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:L="",I.t0=i,I.next=I.t0==="biz"?4:6;break;case 4:return n?L="/api/runtime/logic/v1/biz/".concat(o,"/").concat(n,"/").concat(t,"?debug=true"):L="/api/runtime/logic/v1/run-biz/".concat(o,"/").concat(t,"?debug=true"),I.abrupt("break",8);case 6:return L="/api/runtime/logic/v1/run-api/".concat(o,"?debug=true"),I.abrupt("break",8);case 8:return L="/api/ide/papi/".concat(e)+L,I.abrupt("return",(0,c.v_)(L,r,{headers:B()({"Content-Type":"application/json"},l)}));case 10:case"end":return I.stop()}},a)})),R.apply(this,arguments)}}}]);
