"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5947],{2325:function(ae,P,u){u.d(P,{C:function(){return C}});var C=new Map,B=50,N=50;C.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),C.set("ExtShape1",{name:"ExtShape1",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"#ffcc00",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),C.set("ExtShape2",{name:"ExtShape2",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"#87CEEB",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,strokeWidth:3,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),C.set("ExtShape3",{name:"ExtShape3",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"#FFF8DC",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},26062:function(ae,P,u){u.d(P,{m:function(){return W}});var C=u(5671),B=u(95812),N=u(57213),s=u.n(N),j=u(53914),p={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},c=u(33130),F=function(d){var y,v,I,m=d.node,h=(y=m.data.config)===null||y===void 0?void 0:y.name;return(0,c.jsx)("div",{className:p.customNode,children:(0,c.jsx)(j.Z,{addonBefore:h||"case",className:"input",value:m==null||(v=m.data)===null||v===void 0||(I=v.config)===null||I===void 0?void 0:I.case,width:150,onChange:function(k){var S=m.data;m.setData(s()(s()({},S),{},{config:s()(s()({},S.config),{},{case:k.target.value})}))}})})},A=function(d){var y,v=d.node;return(0,c.jsx)("div",{className:p.customNode,children:(0,c.jsx)(j.Z,{addonBefore:"switch",className:"input",value:(y=v.data)===null||y===void 0?void 0:y.config.condition,onChange:function(m){var h=v.data;v.setData(s()(s()({},h),{},{config:s()(s()({},h.config),{},{condition:m.target.value})}))},width:100})})},G=function(d){return(0,c.jsx)("div",{className:p.customNode,children:(0,c.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})},O=u(54306),D=u.n(O),z=u(93525),Q=u.n(z),X=u(63466),re=u(21140),K=u(52510),_=u(87363),T=u(39220),ie=u(28369),M=u(83805),Z=u(15035),J=u(36342),q={width:64,height:"100%",marginInlineEnd:8,verticalAlign:"top"},H=null,ee=function(d){var y=ie.Z.useToken(),v=y.token,I=(0,_.useState)(d.cases||[]),m=D()(I,2),h=m[0],f=m[1],k=(0,_.useState)(!1),S=D()(k,2),$=S[0],R=S[1],a=(0,_.useState)(""),e=D()(a,2),o=e[0],r=e[1],t=(0,_.useState)(-1),n=D()(t,2),i=n[0],l=n[1],x=(0,_.useState)(""),b=D()(x,2),w=b[0],ne=b[1],oe=(0,_.useRef)(null),se=(0,_.useRef)(null);(0,_.useEffect)(function(){d.onChange&&d.onChange(h)},[h]),(0,_.useEffect)(function(){f(d.cases||[])},[d.cases]),(0,_.useEffect)(function(){if($){var g;(g=oe.current)===null||g===void 0||g.focus()}},[$]),(0,_.useEffect)(function(){var g;(g=se.current)===null||g===void 0||g.focus()},[w]);var le=function(L){var Y=h.filter(function(V){return V!==L});console.log(Y),f(Y)},de=function(){R(!0)},ge=function(L){r(L.target.value)},ue=function(){o&&!h.includes(o)&&f([].concat(Q()(h),[o])),R(!1),r("")},fe=function(L){ne(L.target.value)},ce=function(){var L=Q()(h);L[i]=w,f(L),l(-1),ne("")},pe={height:"100%",background:v.colorBgContainer,borderStyle:"dashed"};return(0,c.jsxs)(M.Z,{gap:"4px 0",wrap:!0,vertical:!0,children:[h.map(function(g,L){if(i===L)return(0,c.jsx)(j.Z,{ref:se,size:"small",style:q,value:w,onChange:fe,onBlur:ce,onPressEnter:ce},g);var Y=g.length>20,V=(0,c.jsx)(Z.Z,{closable:d.editable,style:{userSelect:"none"},onClose:function(){return le(g)},children:(0,c.jsx)("span",{onDoubleClick:function(he){L!==0&&(l(L),ne(g),he.preventDefault())},children:Y?"".concat(g.slice(0,20),"..."):g})},g);return Y?(0,c.jsx)(J.Z,{title:g,children:V},g):V}),$?(0,c.jsx)(j.Z,{ref:oe,type:"text",value:o,onChange:ge,onBlur:ue,onPressEnter:ue}):(0,c.jsx)(Z.Z,{style:pe,icon:(0,c.jsx)(T.Z,{}),visible:d.editable,onClick:de})]})},U=ee,te=function(d){var y,v,I,m,h,f=d.node,k=(y=f.data.config)===null||y===void 0?void 0:y.name,S=(0,_.useState)(f==null||(v=f.data)===null||v===void 0||(I=v.config)===null||I===void 0?void 0:I.cases),$=D()(S,2),R=$[0],a=$[1];return(0,_.useEffect)(function(){var e,o;a(f==null||(e=f.data)===null||e===void 0||(o=e.config)===null||o===void 0?void 0:o.cases)},[f==null||(m=f.data)===null||m===void 0||(h=m.config)===null||h===void 0?void 0:h.cases]),(0,c.jsxs)("div",{className:p.customNode,children:[k||"cases",(0,c.jsx)(U,{className:"input",cases:R,editable:d.node.data.selected,width:150,onChange:function(o){var r=f.data;f.setData(s()(s()({},r),{},{config:s()(s()({},r.config),{},{cases:o})}))}})]})};function W(E){E.forEach(function(d){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+d.name),C.kJ.registerNode(d.name,d.config,!0)}),(0,B.z2)({shape:"switch",component:A}),(0,B.z2)({shape:"switch-case",component:F}),(0,B.z2)({shape:"switch-cases",component:te}),(0,B.z2)({shape:"switch-default",component:G})}},48364:function(ae,P,u){u.d(P,{Fx:function(){return $},KX:function(){return _},L7:function(){return k},Sl:function(){return D},Uh:function(){return I},az:function(){return re},gC:function(){return ee},m9:function(){return Z},ni:function(){return q},oX:function(){return h},oc:function(){return y},qB:function(){return G},rE:function(){return te},yi:function(){return E}});var C=u(57213),B=u.n(C),N=u(25359),s=u.n(N),j=u(49811),p=u.n(j),c=u(57475),F=u(5726),A=u.n(F);function G(a){return O.apply(this,arguments)}function O(){return O=p()(s()().mark(function a(e){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.U2)("/api/ide/logic/".concat(e)).then(function(t){var n,i=(n=t.data)===null||n===void 0?void 0:n.data;return i.configJson=JSON.parse(i.configJson),i}));case 1:case"end":return r.stop()}},a)})),O.apply(this,arguments)}function D(a,e){return z.apply(this,arguments)}function z(){return z=p()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.U2)("/api/ide/papi/".concat(e,"/api/ide/logic/").concat(o)).then(function(n){var i,l=(i=n.data)===null||i===void 0?void 0:i.data;return l.configJson=JSON.parse(l.configJson),l}));case 1:case"end":return t.stop()}},a)})),z.apply(this,arguments)}function Q(a){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime().mark(function a(e){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",get("/api/ide/logic/".concat(e,"/config")).then(function(t){var n;return(n=t.data)===null||n===void 0?void 0:n.data}));case 1:case"end":return r.stop()}},a)})),X.apply(this,arguments)}function re(a,e,o){return K.apply(this,arguments)}function K(){return K=p()(s()().mark(function a(e,o,r){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.gz)("/api/ide/logic/edit/".concat(e),{version:o,configJson:r,updateTime:A()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return n.stop()}},a)})),K.apply(this,arguments)}function _(a,e,o,r){return T.apply(this,arguments)}function T(){return T=p()(s()().mark(function a(e,o,r,t){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,c.gz)("/api/ide/papi/".concat(e,"/api/ide/logic/edit/").concat(o),{version:r,configJson:t,updateTime:A()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return i.stop()}},a)})),T.apply(this,arguments)}function ie(a,e){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function a(e,o){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",get("/api/ide/logic-instance/".concat(e,"/").concat(o)).then(function(n){var i=n.data.data;return i}));case 1:case"end":return t.stop()}},a)})),M.apply(this,arguments)}function Z(a){return J.apply(this,arguments)}function J(){return J=p()(s()().mark(function a(e){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.U2)("/api/ide/logic-instance/".concat(e)).then(function(t){var n=t.data.data;return n}));case 1:case"end":return r.stop()}},a)})),J.apply(this,arguments)}function q(a,e){return H.apply(this,arguments)}function H(){return H=p()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.U2)("/api/ide/papi/".concat(e,"/api/ide/logic-instance/").concat(o)).then(function(n){var i=n.data.data;return i}));case 1:case"end":return t.stop()}},a)})),H.apply(this,arguments)}function ee(a){return U.apply(this,arguments)}function U(){return U=p()(s()().mark(function a(e){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[e.logicId],type:"="},{dataIndex:"bizId",values:[e.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(t){var n=t.data.data.records;return n&&n.map(function(i){i.itemLogs&&(i.itemLogs=JSON.parse(i.itemLogs))}),n}));case 1:case"end":return r.stop()}},a)})),U.apply(this,arguments)}function te(a,e){return W.apply(this,arguments)}function W(){return W=p()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-logs"),{filters:[{dataIndex:"logicId",values:[o.logicId],type:"="},{dataIndex:"bizId",values:[o.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(n){var i=n.data.data.records;return i&&i.map(function(l){l.itemLogs&&(l.itemLogs=JSON.parse(l.itemLogs))}),i}));case 1:case"end":return t.stop()}},a)})),W.apply(this,arguments)}function E(a){return d.apply(this,arguments)}function d(){return d=p()(s()().mark(function a(e){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[e],type:"="}],pageSize:1e3}).then(function(t){var n=t.data.data.records;return n&&n.length>0&&n[0].itemLogs&&(n[0].itemLogs=JSON.parse(n[0].itemLogs)),n[0]}));case 1:case"end":return r.stop()}},a)})),d.apply(this,arguments)}function y(a,e){return v.apply(this,arguments)}function v(){return v=p()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-logs"),{filters:[{dataIndex:"id",values:[o],type:"="}],pageSize:1e3}).then(function(n){var i=n.data.data.records;return i&&i.length>0&&i[0].itemLogs&&(i[0].itemLogs=JSON.parse(i[0].itemLogs)),i[0]}));case 1:case"end":return t.stop()}},a)})),v.apply(this,arguments)}function I(a,e){return m.apply(this,arguments)}function m(){return m=p()(s()().mark(function a(e,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[e],type:"="},{dataIndex:"version",values:[o],type:"="}]}).then(function(n){var i=n.data.data.records[0],l=i.configJson;return i.configJson=JSON.parse(l),i.configJson.id=i.id,i.configJson.name=i.name,i}));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function h(a,e,o){return f.apply(this,arguments)}function f(){return f=p()(s()().mark(function a(e,o,r){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-baks"),{filters:[{dataIndex:"id",values:[o],type:"="},{dataIndex:"version",values:[r],type:"="}]}).then(function(i){var l=i.data.data.records[0],x=l.configJson;return l.configJson=JSON.parse(x),l.configJson.id=l.id,l.configJson.name=l.name,l}));case 1:case"end":return n.stop()}},a)})),f.apply(this,arguments)}function k(a,e,o,r,t,n){return S.apply(this,arguments)}function S(){return S=p()(s()().mark(function a(e,o,r,t,n,i){var l;return s()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:l="",b.t0=n,b.next=b.t0==="biz"?4:6;break;case 4:return t?l="/api/runtime/logic/v1/biz/".concat(e,"/").concat(t,"/").concat(r,"?debug=true"):l="/api/runtime/logic/v1/run-biz/".concat(e,"/").concat(r,"?debug=true"),b.abrupt("break",8);case 6:return l="/api/runtime/logic/v1/run-api/".concat(e,"?debug=true"),b.abrupt("break",8);case 8:return b.abrupt("return",(0,c.v_)(l,o,{headers:B()({"Content-Type":"application/json"},i)}));case 9:case"end":return b.stop()}},a)})),S.apply(this,arguments)}function $(a,e,o,r,t,n,i){return R.apply(this,arguments)}function R(){return R=p()(s()().mark(function a(e,o,r,t,n,i,l){var x;return s()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:x="",w.t0=i,w.next=w.t0==="biz"?4:6;break;case 4:return n?x="/api/runtime/logic/v1/biz/".concat(o,"/").concat(n,"/").concat(t,"?debug=true"):x="/api/runtime/logic/v1/run-biz/".concat(o,"/").concat(t,"?debug=true"),w.abrupt("break",8);case 6:return x="/api/runtime/logic/v1/run-api/".concat(o,"?debug=true"),w.abrupt("break",8);case 8:return x="/api/ide/papi/".concat(e)+x,w.abrupt("return",(0,c.v_)(x,r,{headers:B()({"Content-Type":"application/json"},l)}));case 10:case"end":return w.stop()}},a)})),R.apply(this,arguments)}}}]);
