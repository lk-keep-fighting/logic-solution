"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2126],{62126:function(R,S,g){g.r(S),g.d(S,{CheckboxControlRenderer:function(){return V},CityPicker:function(){return B},LocationControl:function(){return M},default:function(){return F}});var t=g(15767),_=g(87363),p=g.n(_),h=g(42977),j=g(94391),T=g(45581),I=function(c){var i,e=c.value,n=c.db,r=c.delimiter,s=r===void 0?",":r,o={code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""};if(!n||!e)return o;var a=e&&e.code||typeof e=="number"&&e||typeof e=="string"&&/(\d{6})/.test(e)&&RegExp.$1;if(a&&n[a]){a=parseInt(a,10),o.code=a;var l=a-a%1e4;n[l]&&(o.provinceCode=l,o.province=n[l]);var d=a-a%100;d!==l&&n[d]?(o.cityCode=d,o.city=n[d]):~((i=n.city[l])===null||i===void 0?void 0:i.indexOf(a))&&(o.cityCode=a,o.city=n[a]),a%100&&(o.district=n[a],o.districtCode=a)}return e&&e.street?o.street=e.street:typeof e=="string"&&~e.indexOf(s)&&(o.street=e.slice(e.indexOf(s)+s.length)),o},x=function(c){g.e(3882).then(g.bind(g,73882)).then(c)},B=function(c){(0,t.ZT)(i,c);function i(){var e=c!==null&&c.apply(this,arguments)||this;return e.state={code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""},e}return i.prototype.componentDidMount=function(){var e=this;this.loadDb(function(){return e.syncIn()})},i.prototype.componentDidUpdate=function(e){var n=this,r=this.props;r.value!==e.value&&this.loadDb(function(){return n.syncIn(r)})},i.prototype.loadDb=function(e){var n=this;if(this.state.db){e==null||e();return}x(function(r){n.setState({db:(0,t.pi)((0,t.pi)({},r.default),{province:r.province,city:r.city,district:r.district})},e)})},i.prototype.handleProvinceChange=function(e){this.setState(e?{province:e.label,provinceCode:e.value,city:"",cityCode:0,district:"",districtCode:0,street:"",code:e?e.value:0}:{code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""},this.syncOut)},i.prototype.handleCityChange=function(e){if(e.value%100)return this.handleDistrictChange(e,{cityCode:e.value});this.setState(e?{city:e.label,cityCode:e.value,district:"",districtCode:0,street:"",code:e.value}:{city:"",cityCode:0,district:"",districtCode:0,street:"",code:this.state.provinceCode},this.syncOut)},i.prototype.handleDistrictChange=function(e,n){n===void 0&&(n={}),this.setState(e?(0,t.pi)((0,t.pi)({},n),{district:e.label,districtCode:e.value,street:"",code:e.value}):(0,t.pi)((0,t.pi)({},n),{district:"",districtCode:0,street:"",code:this.state.cityCode}),this.syncOut)},i.prototype.handleStreetChange=function(e){this.setState({street:e.currentTarget.value})},i.prototype.handleStreetEnd=function(){this.syncOut()},i.prototype.syncIn=function(e){e===void 0&&(e=this.props);var n=this.state.db,r=e.value,s=e.delimiter;n&&this.setState(I({value:r,delimiter:s,db:n}))},i.prototype.syncOut=function(){var e=this.props,n=e.onChange,r=e.allowStreet,s=e.joinValues,o=e.extractValue,a=e.delimiter,l=this.state,d=l.code,f=l.province,v=l.city,y=l.district,u=l.street,w=l.provinceCode,O=l.cityCode,D=l.districtCode;n((typeof o=="undefined"?s:o)?d?r&&u?[d,u].join(a):String(d):"":{code:d,provinceCode:w,province:f,cityCode:O,city:v,districtCode:D,district:y,street:u})},i.prototype.render=function(){var e,n,r=this.props,s=r.classnames,o=r.className,a=r.style,l=r.disabled,d=r.allowCity,f=r.allowDistrict,v=r.allowStreet,y=r.searchable,u=r.translate,w=r.loadingConfig,O=r.popOverContainer,D=r.itemClassName,C=r.testIdBuilder,P=this.state,E=P.provinceCode,N=P.cityCode,Z=P.districtCode,U=P.street,m=P.db;return m?p().createElement("div",{className:s("CityPicker",o)},p().createElement(j.PhF,{className:s(D),searchable:y,disabled:l,options:m.province.map(function(b){return{label:m[b],value:b}}),value:E||"",onChange:this.handleProvinceChange,popOverContainer:O,testIdBuilder:C==null?void 0:C.getChild("province")}),d&&m.city[E]&&m.city[E].length?p().createElement(j.PhF,{className:s(D),searchable:y,disabled:l,options:m.city[E].map(function(b){return{label:m[b],value:b}}),value:N||"",onChange:this.handleCityChange,popOverContainer:O,testIdBuilder:C==null?void 0:C.getChild("city")}):null,N&&f&&(!((n=(e=m.district[E])===null||e===void 0?void 0:e[N])===null||n===void 0)&&n.length)?p().createElement(j.PhF,{className:s(D),searchable:y,disabled:l,options:m.district[E][N].map(function(b){return{label:m[b],value:b}}),value:Z||"",onChange:this.handleDistrictChange,popOverContainer:O,testIdBuilder:C==null?void 0:C.getChild("district")}):null,v&&E?p().createElement("input",(0,t.pi)({className:s("CityPicker-input"),value:U||"",onChange:this.handleStreetChange,onBlur:this.handleStreetEnd,placeholder:u("City.street"),disabled:l},C==null?void 0:C.getChild("street").getTestId())):null):p().createElement(j.$jN,{show:!0,size:"sm",loadingConfig:w})},i.defaultProps={joinValues:!0,extractValue:!0,delimiter:",",allowCity:!0,allowDistrict:!0,allowStreet:!1},(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[Object]),(0,t.w6)("design:returntype",void 0)],i.prototype,"handleProvinceChange",null),(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[Object]),(0,t.w6)("design:returntype",void 0)],i.prototype,"handleCityChange",null),(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[Object,Object]),(0,t.w6)("design:returntype",void 0)],i.prototype,"handleDistrictChange",null),(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[Object]),(0,t.w6)("design:returntype",void 0)],i.prototype,"handleStreetChange",null),(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[]),(0,t.w6)("design:returntype",void 0)],i.prototype,"handleStreetEnd",null),(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[Object]),(0,t.w6)("design:returntype",void 0)],i.prototype,"syncIn",null),(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[]),(0,t.w6)("design:returntype",void 0)],i.prototype,"syncOut",null),i}(p().Component),F=(0,h.YYN)((0,h.eAU)(B)),M=function(c){(0,t.ZT)(i,c);function i(){var e=c!==null&&c.apply(this,arguments)||this;return e.state={db:null},e}return i.prototype.doAction=function(e,n,r){var s,o,a=this.props,l=a.resetValue,d=a.onChange,f=a.formStore,v=a.store,y=a.name,u=e==null?void 0:e.actionType;if(u==="clear")d("");else if(u==="reset"){var w=(o=(0,h.E04)((s=f==null?void 0:f.pristine)!==null&&s!==void 0?s:v==null?void 0:v.pristine,y))!==null&&o!==void 0?o:l;d(w!=null?w:"")}},i.prototype.handleChange=function(e){return(0,t.mG)(this,void 0,void 0,function(){var n,r,s,o;return(0,t.Jh)(this,function(a){switch(a.label){case 0:return n=this.props,r=n.dispatchEvent,s=n.onChange,[4,r("change",(0,h.vXk)(this.props,{value:e},"value"))];case 1:return o=a.sent(),o!=null&&o.prevented?[2]:(s(e),[2])}})})},i.prototype.renderStatic=function(e){var n=this;e===void 0&&(e="");var r=this.props,s=r.value,o=r.delimiter,a=r.loadingConfig;if(!this.state.db)return x(function(u){n.setState({db:(0,t.pi)((0,t.pi)({},u.default),{province:u.province,city:u.city,district:u.district})})}),p().createElement(j.$jN,{size:"sm",show:!0,loadingConfig:a});if(!s)return p().createElement(p().Fragment,null,e);var l=I({value:s,delimiter:o,db:this.state.db}),d=l.province,f=l.city,v=l.district,y=l.street;return p().createElement(p().Fragment,null,[d,f,v,y].filter(function(u){return!!u}).join(o))},i.prototype.render=function(){var e=this.props,n=e.value,r=e.allowCity,s=e.allowDistrict,o=e.extractValue,a=e.joinValues,l=e.allowStreet,d=e.disabled,f=e.searchable,v=e.env,y=e.mobileUI,u=e.popOverContainer,w=e.itemClassName,O=e.testIdBuilder;return y?p().createElement(j.q9O,{value:n,popOverContainer:v==null?void 0:v.getModalContainer,onChange:this.handleChange,allowCity:r,allowDistrict:s,extractValue:o,joinValues:a,allowStreet:l,disabled:d,mobileUI:y}):p().createElement(F,{itemClassName:w,popOverContainer:u||(v==null?void 0:v.getModalContainer),searchable:f,value:n,onChange:this.handleChange,allowCity:r,allowDistrict:s,extractValue:o,joinValues:a,allowStreet:l,disabled:d,testIdBuilder:O})},(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[Object,Object,Boolean]),(0,t.w6)("design:returntype",void 0)],i.prototype,"doAction",null),(0,t.gn)([h.NjZ,(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[Object]),(0,t.w6)("design:returntype",Promise)],i.prototype,"handleChange",null),(0,t.gn)([(0,T.i)(),(0,t.w6)("design:type",Function),(0,t.w6)("design:paramtypes",[]),(0,t.w6)("design:returntype",void 0)],i.prototype,"render",null),i}(p().Component),V=function(c){(0,t.ZT)(i,c);function i(){return c!==null&&c.apply(this,arguments)||this}return i=(0,t.gn)([(0,h.xJW)({type:"input-city",sizeMutable:!1})],i),i}(M)}}]);
