"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[7271],{11331:function(K,I,r){var M=r(54306),A=r.n(M),T=r(70517),C=r(90010),x=r.n(C),O=r(23620),h=r(2069),P=r(87363),b=r.n(P),L=r(70256),B=r(33358),y=r(49500),d=r(16123),n=r(99273),t=r(33130);T.Z.interceptors.response.use(function(e){return console.log("axios response"),console.log(e),e&&e.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),e.data.error||(e.data.error={code:0}),e.data.code==500&&(e.data.error={code:500,message:e.data.msg}),e.data.data&&e.data.data.records&&(e.data.data.items=e.data.data.records),e):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(e.data),Promise.reject(new Error(e.data.message)))},function(e){if(console.log("\u6355\u6349axios error"),console.log(e),e.response&&e.response.data){var u,_=e.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((u=e.response.data.error)===null||u===void 0?void 0:u.code)==0&&(e.response.data.error.code=500),console.log(_),_}return Promise.reject(e)});var a=function(u){var _=(0,P.useState)({type:"page"}),f=A()(_,2),v=f[0],E=f[1],m="cxd",R="zh-CN";return(0,P.useEffect)(function(){u.pageId&&(0,L.UD)(u.pageId).then(function(g){E(g)})},[u.pageId]),(0,t.jsxs)("div",{children:[(0,t.jsx)(h.qR,{theme:m,position:"top-right",locale:R},"toast"),(0,t.jsx)(h.wx,{theme:m,locale:R},"alert"),(0,O.sYA)(v,{data:u.data},{fetcher:function(o){var s=o.url,c=o.method,i=o.data,p=o.responseType,l=o.config,w=o.headers;return l=l||{},l.withCredentials=!0,p&&(l.responseType=p),l.cancelExecutor&&(l.cancelToken=new T.Z.CancelToken(l.cancelExecutor)),l.headers=w||{},l.headers.Authorization||(l.headers.Authorization="Bearer "+n.F.getTokenFormLocal()),c!=="post"&&c!=="put"&&c!=="patch"?(i&&(l.params=i),T.Z[c](s,l)):(i&&i instanceof FormData?(l.headers=l.headers||{},l.headers["Content-Type"]="multipart/form-data"):i&&typeof i!="string"&&!(i instanceof Blob)&&!(i instanceof ArrayBuffer)&&(i=JSON.stringify(i),l.headers=l.headers||{},l.headers["Content-Type"]="application/json"),T.Z[c](s,i,l))},isCancel:function(o){return T.Z.isCancel(o)},copy:function(o){x()(o),h.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:m,jumpTo:function(o,s){debugger;s.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+o,"_blank"):window.location.hash=o}})]})};I.Z=a},77357:function(K,I,r){r.d(I,{nq:function(){return B}});var M=r(57213),A=r.n(M),T=r(21140),C=r.n(T),x=r(63466),O=r.n(x),h=r(83217),P=r(72107),b=null;function L(d,n,t,a){var e,u,_=d.data.config,f=_.type,v=t.flatMap(function(g){return g.source.cell===d.id?n[g.target.cell]:[]}),E=d.attrs,m=new P.Du((e=d.id)!==null&&e!==void 0?e:"",f);if(m=A()(A()({},_),{},{id:d.id,name:E==null||(u=E.text)===null||u===void 0?void 0:u.text}),!(a.findIndex(function(g){return g.id===m.id})>-1)&&(a.push(m),v.length!==0))switch(f){default:if(v.length>1||m.type==="switch"){var R;console.log((R=d.data)===null||R===void 0?void 0:R.config),console.log(v),m.branches=[],v.forEach(function(g){var o,s,c,i;console.log((o=g.data)===null||o===void 0?void 0:o.config),(s=m.branches)===null||s===void 0||s.push({when:(c=g.data)===null||c===void 0||(i=c.config)===null||i===void 0?void 0:i.case,nextId:g.id}),L(n[g.id],n,t,a)})}else m.nextId=v[0].id,L(n[v[0].id],n,t,a);break}}function B(d,n){var t=new P.Iz(d),a=[],e=[],u={},_=void 0;if(n.forEach(function(f){var v=f.id||"";if(f.shape==="edge")a.push(f);else{var E=f.attrs;u[v]=f,e.push(f),f.data.config.type==="start"&&(_=f)}}),!_){h.ZP.error("\u672A\u53D1\u73B0\u5F00\u59CB\u8282\u70B9\uFF0C\u8BF7\u914D\u7F6E\uFF01");return}return L(_,u,a,t.items),console.log("logic.items"),console.log(t.items),t}function y(d){var n=[];return d.items.forEach(function(t){var a={id:t.id,shape:t.type,size:{width:80,height:40},data:{config:t},attrs:{text:{text:t.name}}};if(n.push(a),t.branches&&t.branches.length>0)t.branches.forEach(function(u){var _={shape:"edge",source:{cell:t.id},target:{cell:u.nextId},labels:[{position:.5,attrs:{label:{text:u.when}}}]};n.push(_)});else if(t.nextId){var e={shape:"edge",source:{cell:t.id},target:{cell:t.nextId}};n.push(e)}}),n}},94744:function(K,I,r){r.d(I,{y:function(){return B}});var M=r(37635),A=r.n(M),T=r(21140),C=r.n(T),x=r(63466),O=r.n(x),h=r(72107),P=r(52510),b=r.n(P),L=O()(function y(d){C()(this,y),b()(this,"concept","EnvParam"),b()(this,"name",void 0),b()(this,"description",void 0),b()(this,"typeAnnotation",void 0),b()(this,"required",!1),b()(this,"defaultValue",void 0),this.name=d}),B=function(){function y(){C()(this,y)}return O()(y,null,[{key:"valueToTypeAnnotaion",value:function(n){var t=this,a={concept:h.Ld.TypeAnnotation,typeKind:"primitive",typeName:"string",defaultValue:n};if(Array.isArray(n))a.typeName="array";else{var e=A()(n);switch(e){case"boolean":a.typeKind="primitive",a.typeName="boolean";break;case"number":a.typeKind="primitive",a.typeName="number";break;case"string":a.typeKind="primitive",a.typeName="string";break;case"object":n==null?a.typeName="null":n instanceof Date?(a.typeKind="primitive",a.typeName="date"):n instanceof RegExp?(a.typeKind="primitive",a.typeName="regexp"):n instanceof Function?(a.typeKind="primitive",a.typeName="function"):(a.typeKind="anonymousStructure",a.typeName="object",a.properties=[],Object.keys(n).map(function(u){var _,f=n[u],v=t.valueToTypeAnnotaion(f),E=new h.X0(u);E.typeAnnotation=v,E.defaultValue=f,(_=a.properties)===null||_===void 0||_.push(E)}));break;default:a.typeKind="unknown",a.typeName=e;break}}return a}},{key:"typeAnnotaionToValue",value:function(n){var t,a,e=this,u;switch(n.typeName){case"array":u=(t=n.defaultValue)!==null&&t!==void 0?t:[];break;case"boolean":u=n.defaultValue?n.defaultValue=="true":!1;break;case"number":u=parseFloat(n.defaultValue);break;case"null":u=null;break;case"date":u=new Date(n.defaultValue);break;case"regexp":u=new RegExp(n.defaultValue);break;case"object":u={},(a=n.properties)===null||a===void 0||a.forEach(function(_){u[_.name]=e.typeAnnotaionToValue(_.typeAnnotation)});break;case"string":case"function":default:u=n.defaultValue;break}return u}},{key:"getParamArrayByJson",value:function(n){var t=[];return n&&Object.keys(n).forEach(function(a){var e=new h.dO(a);e.typeAnnotation=y.valueToTypeAnnotaion(n[a]),e.defaultValue=n[a],t.push(e)}),t}},{key:"getReturnArrayByJson",value:function(n){var t=[];return n&&Object.keys(n).forEach(function(a){var e=new h.z1(a);e.typeAnnotation=y.valueToTypeAnnotaion(n[a]),e.defaultValue=n[a],t.push(e)}),t}},{key:"getVariableArrayByJson",value:function(n){var t=[];return n&&Object.keys(n).forEach(function(a){var e=new h._w(a);e.typeAnnotation=y.valueToTypeAnnotaion(n[a]),e.defaultValue=n[a],t.push(e)}),t}},{key:"getEnvsArrayByJson",value:function(n){var t=[];return n&&Object.keys(n).forEach(function(a){var e=new L(a);e.typeAnnotation=y.valueToTypeAnnotaion(n[a]),e.defaultValue=n[a],t.push(e)}),t}},{key:"getJsonByParams",value:function(n){var t=this,a={};return n==null||n.forEach(function(e){a[e.name]=e.typeAnnotation?t.typeAnnotaionToValue(e.typeAnnotation):e.defaultValue}),a}}]),y}()},61719:function(K,I,r){r.d(I,{L7:function(){return n}});var M=r(57213),A=r.n(M),T=r(25359),C=r.n(T),x=r(49811),O=r.n(x),h=r(70517);function P(o,s){return axios.get(o,s)}function b(o,s,c){return axios.put(o,s,c)}function L(o,s){return axios.delete(o,s)}function B(o,s,c){return h.Z.post(o,s,c)}function y(o,s){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function o(s,c){return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",post("/api/runtime/logic/v1/run-fn/".concat(s),c,{headers:{"Content-Type":"application/json"}}));case 1:case"end":return p.stop()}},o)})),d.apply(this,arguments)}function n(o,s,c,i,p,l){return t.apply(this,arguments)}function t(){return t=O()(C()().mark(function o(s,c,i,p,l,w){var U;return C()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:U="",D.t0=l,D.next=D.t0==="biz"?4:6;break;case 4:return p?U="/api/runtime/logic/v1/biz/".concat(s,"/").concat(p,"/").concat(i,"?debug=true"):U="/api/runtime/logic/v1/run-biz/".concat(s,"/").concat(i,"?debug=true"),D.abrupt("break",8);case 6:return U="/api/runtime/logic/v1/run-api/".concat(s,"?debug=true"),D.abrupt("break",8);case 8:return D.abrupt("return",B(U,c,{headers:A()({"Content-Type":"application/json"},w)}));case 9:case"end":return D.stop()}},o)})),t.apply(this,arguments)}function a(o,s){return e.apply(this,arguments)}function e(){return e=_asyncToGenerator(_regeneratorRuntime().mark(function o(s,c){return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",axios.post("/api/form/logic_instance/query",{filters:[{dataIndex:"logicId",values:[s],type:"="},{dataIndex:"bizId",values:[c],type:"="}]}).then(function(l){var w=l.data.result.items[0];return w}));case 1:case"end":return p.stop()}},o)})),e.apply(this,arguments)}function u(o){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime().mark(function o(s){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",axios.get("/api/ide/logic-instance/".concat(s)).then(function(p){var l=p.data.data;return l}));case 1:case"end":return i.stop()}},o)})),_.apply(this,arguments)}function f(o){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function o(s){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",axios.post("/api/form/logic/add",s).then(function(p){var l=p.data.result;return l}));case 1:case"end":return i.stop()}},o)})),v.apply(this,arguments)}function E(o){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function o(s){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",axios.delete("/api/form/logic/delete/".concat(s)).then(function(p){return p.data.result}));case 1:case"end":return i.stop()}},o)})),m.apply(this,arguments)}function R(){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var s,c,i=arguments;return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=i.length>0&&i[0]!==void 0?i[0]:1,c=i.length>1&&i[1]!==void 0?i[1]:10,l.abrupt("return",axios.post("/api/form/logic/query",{page:s,pageSize:c}).then(function(w){return w.data}));case 3:case"end":return l.stop()}},o)})),g.apply(this,arguments)}}}]);
