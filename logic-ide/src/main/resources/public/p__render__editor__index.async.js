"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5315],{55639:function(q,P,e){e.r(P),e.d(P,{default:function(){return ge}});var B=e(54306),r=e.n(B),O=e(98306),p={editorContainer:"editorContainer___czC1W"},C=e(21140),Z=e.n(C),x=e(63466),M=e.n(x),y=e(58853),I=e.n(y),E=e(38888),c=e.n(E),s=e(87363),S=e(63204),a=e(33358),d=e(49500),Se=e(16123),u=e(33130),ee=function(l){I()(g,l);var D=c()(g);function g(){return Z()(this,g),D.apply(this,arguments)}return M()(g,[{key:"render",value:function(){var U,L="cxd",R="zh-CN",v=this.props,A=v.pageSchmea,T=v.preview,F=v.isMobile,N=v.onChange;return(0,u.jsx)(S.MLE,{value:A,isMobile:F,preview:T,onChange:N,showCustomRenderersPanel:!0})}}]),g}(s.Component),ne=ee,te=e(95812),se=e(40767),J=e(75904),ae=e(22983),re=e(46464),oe=e(54882),ue=e(43702),K=e(52943),ie=e(90010),b=e.n(ie),le=e(56868),h=e(70517),ce=e(70256),De=e(82162);h.Z.interceptors.response.use(function(l){return console.log("axios config"),console.log(l),l.data?l:Promise.reject(new Error(l.data.message))},function(l){if(console.log("axios error"),l.response.data){var D=l.response;return console.log("--\u300Bdata\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse\uFF01"),console.log(D),D}return Promise.reject(l)});var de=function(D){var g="cxd",me="zh-CN",U=(0,O.UO)(),L=U.render,R=U.id,v=(0,s.useState)({}),A=r()(v,2),T=A[0],F=A[1];(0,s.useEffect)(function(){console.log("Editor"),console.log(L),(0,ce.n4)(L,R).then(function(i){return F(i)})},[R]);var N=(0,s.useState)(!1),z=r()(N,2),W=z[0],he=z[1],ve=(0,s.useState)(!1),$=r()(ve,2),fe=$[0],G=$[1],pe=(0,s.useState)(!1),w=r()(pe,2),Q=w[0],X=w[1],Ce=(0,s.useState)(""),H=r()(Ce,2),V=H[0],xe=H[1],ye=(0,s.useState)(""),Y=r()(ye,2),k=Y[0],_=Y[1],Fe=te.Z.Text;return(0,u.jsxs)("div",{className:p.editorContainer,children:[(0,u.jsxs)(se.Z,{style:{margin:"5px",float:"right"},children:[(0,u.jsx)(J.ZP,{onClick:function(){return he(!W)},children:W?"\u7F16\u8F91":"\u9884\u89C8"},1),(0,u.jsx)(J.ZP,{type:"primary",onClick:function(n){b()(JSON.stringify(T))},children:"\u590D\u5236\u914D\u7F6E"},2)]}),(0,u.jsx)(ae.Z,{style:{margin:"0px"}}),(0,u.jsx)(ne,{pageSchmea:T,preview:W,onChange:function(n){return F(n)},style:{height:"100vh"}}),(0,u.jsxs)(re.Z,{open:fe,confirmLoading:Q,title:"\u914D\u7F6E\u751F\u6210\u5C0F\u52A9\u624B(Beta)",cancelText:"\u53D6\u6D88",okText:"\u4F7F\u7528\u914D\u7F6E",width:800,onOk:function(){G(!1),F(JSON.parse(k))},onCancel:function(){return G(!1)},children:[(0,u.jsx)(oe.Z.TextArea,{style:{margin:"5px"},placeholder:'\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\uFF0C\u5982"\u751F\u6210\u4E00\u4E2A\u4EFB\u52A1\u7BA1\u7406\u754C\u9762\uFF0C\u4EFB\u52A1\u4FE1\u606F\u5305\u542B\u4EFB\u52A1\u53F7id\u3001\u65F6\u95F4time\u3001\u8D1F\u8D23\u4EBAmgr_user',onChange:function(n){return xe(n.target.value)}}),(0,u.jsx)(J.ZP,{loading:Q,onClick:function(){if(V.length==0){ue.ZP.warning("\u8BF7\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\u63D0\u793A");return}G(!0),X(!0),h.Z.post("/openai/v1/chat/completions",{headers:{Authorization:"Bearer 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"},data:{model:"gpt-3.5-turbo",messages:[{role:"system",content:"\u4F60\u662F\u4E00\u4E2Aamis\u914D\u7F6E\u6587\u4EF6\u751F\u6210\u5668\uFF0C\u5E2E\u6211\u751F\u6210json\u914D\u7F6E\u6587\u4EF6"},{role:"user",content:V}]}}).then(function(n){var f=n.choices[0].message.content;X(!1);var m=f.indexOf("```"),o=f.lastIndexOf("```"),j=f.substring(m+7,o);console.log(j),_(j)})},icon:(0,u.jsx)(le.Z,{}),type:"primary",style:{width:"100%",marginTop:"5px",marginBottom:"5px"},children:"\u751F\u6210\u914D\u7F6E\u2193"}),(0,u.jsx)(K.ML,{value:k,onChange:function(n){return _(n)},height:300,language:"json",options:{fetcher:function(n){var f=n.url,m=n.method,o=n.data,j=n.responseType,t=n.config,Ee=n.headers;return t=t||{},t.withCredentials=!0,j&&(t.responseType=j),t.cancelExecutor&&(t.cancelToken=new h.Z.CancelToken(t.cancelExecutor)),t.headers=Ee||{},m!=="post"&&m!=="put"&&m!=="patch"?(o&&(t.params=o),h.Z[m](f,t)):(o&&o instanceof FormData?(t.headers=t.headers||{},t.headers["Content-Type"]="multipart/form-data"):o&&typeof o!="string"&&!(o instanceof Blob)&&!(o instanceof ArrayBuffer)&&(o=JSON.stringify(o),t.headers=t.headers||{},t.headers["Content-Type"]="application/json"),h.Z[m](f,o,t))},isCancel:function(n){return h.Z.isCancel(n)},copy:function(n){b()(n),K.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:g}})]})]})},ge=de},70256:function(q,P,e){e.d(P,{CD:function(){return M},UD:function(){return Z},n4:function(){return I}});var B=e(25359),r=e.n(B),O=e(49811),p=e.n(O),C=e(70517);function Z(c){return x.apply(this,arguments)}function x(){return x=p()(r()().mark(function c(s){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.Z.get("/setting/pages/".concat(s,".json"));case 2:return a.abrupt("return",a.sent.data);case 3:case"end":return a.stop()}},c)})),x.apply(this,arguments)}function M(c){return y.apply(this,arguments)}function y(){return y=p()(r()().mark(function c(s){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.Z.get("/setting/forms/".concat(s,".json"));case 2:return a.abrupt("return",a.sent.data);case 3:case"end":return a.stop()}},c)})),y.apply(this,arguments)}function I(c,s){return E.apply(this,arguments)}function E(){return E=p()(r()().mark(function c(s,S){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,C.Z.get("/setting/".concat(s,"s/").concat(S,".json"));case 2:return d.abrupt("return",d.sent.data);case 3:case"end":return d.stop()}},c)})),E.apply(this,arguments)}}}]);
