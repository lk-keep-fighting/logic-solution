"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5315],{55639:function($,A,e){e.r(A),e.d(A,{default:function(){return me}});var S=e(54306),s=e.n(S),j=e(98306),g={editorContainer:"editorContainer___czC1W"},h=e(21140),C=e.n(h),f=e(63466),T=e.n(f),D=e(58853),F=e.n(D),v=e(38888),E=e.n(v),o=e(87363),p=e(63204),c=e(33358),r=e(49500),a=e(16123),d=e(78057),n=e(33130),_=function(m){F()(P,m);var B=E()(P);function P(){return C()(this,P),B.apply(this,arguments)}return T()(P,[{key:"render",value:function(){var K,L="cxd",w="zh-CN",O=this.props,W=O.pageSchmea,U=O.preview,Z=O.isMobile,J=O.onChange;return(0,n.jsx)(p.MLE,{value:W,isMobile:Z,preview:U,onChange:J,showCustomRenderersPanel:!0})}}]),P}(o.Component),b=_,re=e(4283),I=e(54145),ue=e(8051),oe=e(51394),le=e(53914),ie=e(83217),z=e(2069),_e=e(90010),k=e.n(_e),ce=e(56868),x=e(70517),Q=e(70256),Pe=e(82162);x.Z.interceptors.response.use(function(m){return m.data?m:Promise.reject(new Error(m.data.message))},function(m){if(console.log("axios error"),m.response.data){var B=m.response;return console.log("--\u300Bdata\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse\uFF01"),console.log(B),B}return Promise.reject(m)});var de=function(B){var P="cxd",ge="zh-CN",K=(0,j.UO)(),L=K.render,w=K.id,O=(0,o.useState)({}),W=s()(O,2),U=W[0],Z=W[1];(0,o.useEffect)(function(){console.log("Editor"),console.log(L),(0,Q.n4)(L,w).then(function(l){return Z(l)})},[w]);var J=(0,o.useState)(!1),X=s()(J,2),G=X[0],ve=X[1],pe=(0,o.useState)(!1),H=s()(pe,2),he=H[0],N=H[1],fe=(0,o.useState)(!1),V=s()(fe,2),Y=V[0],q=V[1],De=(0,o.useState)(""),ee=s()(De,2),ne=ee[0],Ce=ee[1],Ee=(0,o.useState)(""),se=s()(Ee,2),te=se[0],ae=se[1];return(0,n.jsxs)("div",{className:g.editorContainer,children:[(0,n.jsxs)(re.Z,{style:{margin:"5px",float:"right"},children:[(0,n.jsx)(I.ZP,{onClick:function(){return ve(!G)},children:G?"\u7F16\u8F91":"\u9884\u89C8"},1),(0,n.jsx)(I.ZP,{type:"primary",onClick:function(t){k()(JSON.stringify(U))},children:"\u590D\u5236\u914D\u7F6E"},2),(0,n.jsx)(I.ZP,{type:"primary",onClick:function(t){(0,Q.wx)(L,w,U)},children:"\u4FDD\u5B58\u5230DB"},3)]}),(0,n.jsx)(ue.Z,{style:{margin:"0px"}}),(0,n.jsx)(b,{pageSchmea:U,preview:G,onChange:function(t){return Z(t)},style:{height:"100vh"}}),(0,n.jsxs)(oe.Z,{open:he,confirmLoading:Y,title:"\u914D\u7F6E\u751F\u6210\u5C0F\u52A9\u624B(Beta)",cancelText:"\u53D6\u6D88",okText:"\u4F7F\u7528\u914D\u7F6E",width:800,onOk:function(){N(!1),Z(JSON.parse(te))},onCancel:function(){return N(!1)},children:[(0,n.jsx)(le.Z.TextArea,{style:{margin:"5px"},placeholder:'\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\uFF0C\u5982"\u751F\u6210\u4E00\u4E2A\u4EFB\u52A1\u7BA1\u7406\u754C\u9762\uFF0C\u4EFB\u52A1\u4FE1\u606F\u5305\u542B\u4EFB\u52A1\u53F7id\u3001\u65F6\u95F4time\u3001\u8D1F\u8D23\u4EBAmgr_user',onChange:function(t){return Ce(t.target.value)}}),(0,n.jsx)(I.ZP,{loading:Y,onClick:function(){if(ne.length==0){ie.ZP.warning("\u8BF7\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\u63D0\u793A");return}N(!0),q(!0),x.Z.post("/openai/v1/chat/completions",{headers:{Authorization:"Bearer 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"},data:{model:"gpt-3.5-turbo",messages:[{role:"system",content:"\u4F60\u662F\u4E00\u4E2Aamis\u914D\u7F6E\u6587\u4EF6\u751F\u6210\u5668\uFF0C\u5E2E\u6211\u751F\u6210json\u914D\u7F6E\u6587\u4EF6"},{role:"user",content:ne}]}}).then(function(t){var M=t.choices[0].message.content;q(!1);var y=M.indexOf("```"),i=M.lastIndexOf("```"),R=M.substring(y+7,i);console.log(R),ae(R)})},icon:(0,n.jsx)(ce.Z,{}),type:"primary",style:{width:"100%",marginTop:"5px",marginBottom:"5px"},children:"\u751F\u6210\u914D\u7F6E\u2193"}),(0,n.jsx)(z.ML,{value:te,onChange:function(t){return ae(t)},height:300,language:"json",options:{fetcher:function(t){var M=t.url,y=t.method,i=t.data,R=t.responseType,u=t.config,be=t.headers;return u=u||{},u.withCredentials=!0,R&&(u.responseType=R),u.cancelExecutor&&(u.cancelToken=new x.Z.CancelToken(u.cancelExecutor)),u.headers=be||{},y!=="post"&&y!=="put"&&y!=="patch"?(i&&(u.params=i),x.Z[y](M,u)):(i&&i instanceof FormData?(u.headers=u.headers||{},u.headers["Content-Type"]="multipart/form-data"):i&&typeof i!="string"&&!(i instanceof Blob)&&!(i instanceof ArrayBuffer)&&(i=JSON.stringify(i),u.headers=u.headers||{},u.headers["Content-Type"]="application/json"),x.Z[y](M,i,u))},isCancel:function(t){return x.Z.isCancel(t)},copy:function(t){k()(t),z.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:P}})]})]})},me=de},85002:function($,A,e){e.d(A,{Z:function(){return F}});var S=e(25359),s=e.n(S),j=e(49811),g=e.n(j),h=e(21140),C=e.n(h),f=e(63466),T=e.n(f),D=e(70517),F=function(){function v(){C()(this,v)}return T()(v,null,[{key:"getAssetFromDb",value:function(){var E=g()(s()().mark(function p(c,r){var a;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D.Z.get("/api/ide/settings/asset/".concat(c,"/").concat(r));case 2:return a=n.sent.data,n.abrupt("return",JSON.parse(a.data.config));case 4:case"end":return n.stop()}},p)}));function o(p,c){return E.apply(this,arguments)}return o}()},{key:"saveAssetToDb",value:function(){var E=g()(s()().mark(function p(c,r,a){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",D.Z.post("/api/ide/settings/asset/".concat(c,"/").concat(r),a));case 1:case"end":return n.stop()}},p)}));function o(p,c,r){return E.apply(this,arguments)}return o}()}]),v}()},70256:function($,A,e){e.d(A,{CD:function(){return F},UD:function(){return T},n4:function(){return E},wx:function(){return p}});var S=e(25359),s=e.n(S),j=e(49811),g=e.n(j),h=e(31837),C=e(70517),f=e(85002);function T(r){return D.apply(this,arguments)}function D(){return D=g()(s()().mark(function r(a){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:debugger;if(h.j.getModel()!="db"){n.next=5;break}return n.abrupt("return",f.Z.getAssetFromDb("page",a));case 5:return n.next=7,C.Z.get("/setting/pages/".concat(a,".json"));case 7:return n.abrupt("return",n.sent.data);case 8:case"end":return n.stop()}},r)})),D.apply(this,arguments)}function F(r){return v.apply(this,arguments)}function v(){return v=g()(s()().mark(function r(a){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(h.j.getModel()!="db"){n.next=4;break}return n.abrupt("return",f.Z.getAssetFromDb("form",a));case 4:return n.next=6,C.Z.get("/setting/forms/".concat(a,".json"));case 6:return n.abrupt("return",n.sent.data);case 7:case"end":return n.stop()}},r)})),v.apply(this,arguments)}function E(r,a){return o.apply(this,arguments)}function o(){return o=g()(s()().mark(function r(a,d){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(h.j.getModel()!="db"){_.next=4;break}return _.abrupt("return",f.Z.getAssetFromDb(a,d));case 4:return _.next=6,C.Z.get("/setting/".concat(a,"s/").concat(d,".json"));case 6:return _.abrupt("return",_.sent.data);case 7:case"end":return _.stop()}},r)})),o.apply(this,arguments)}function p(r,a,d){return c.apply(this,arguments)}function c(){return c=g()(s()().mark(function r(a,d,n){return s()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(h.j.getModel()!="db"){b.next=2;break}return b.abrupt("return",f.Z.saveAssetToDb(a,d,n));case 2:case"end":return b.stop()}},r)})),c.apply(this,arguments)}}}]);
