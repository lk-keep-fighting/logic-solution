"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5315],{42798:function(Se,A,e){e.r(A),e.d(A,{default:function(){return ce}});var W=e(48305),c=e.n(W),K=e(9413),Q={editorContainer:"editorContainer___czC1W"},U=e(25298),X=e.n(U),$=e(17069),H=e.n($),V=e(21742),Y=e.n(V),k=e(83136),w=e.n(k),u=e(87363),b=e(22763),ye=e(42327),Fe=e(3044),Ee=e(21644),je=e(77201),a=e(62086),q=function(r){Y()(i,r);var f=w()(i);function i(){return X()(this,i),f.apply(this,arguments)}return H()(i,[{key:"render",value:function(){var F,x="cxd",S="zh-CN",h=this.props,y=h.pageSchmea,g=h.preview,m=h.isMobile,E=h.onChange;return(0,a.jsx)(b.MLE,{value:y,isMobile:m,preview:g,onChange:E,showCustomRenderersPanel:!0})}}]),i}(u.Component),_=q,ee=e(58523),p=e(39765),ne=e(90171),te=e(39710),ae=e(57946),se=e(63121),B=e(94391),oe=e(874),D=e.n(oe),re=e(9565),d=e(950),P=e(99294),Ze=e(28120),ue=e(66345),ie=e(87735);(0,ue.znD)({type:"express-editor",name:"\u8868\u8FBE\u5F0F\u7F16\u8F91\u5668",component:ie.Z}),d.Z.interceptors.response.use(function(r){return r.data?r:Promise.reject(new Error(r.data.message))},function(r){if(console.log("axios error"),r.response.data){var f=r.response;return console.log("--\u300Bdata\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse\uFF01"),console.log(f),f}return Promise.reject(r)});var le=function(f){var i="cxd",de="zh-CN",F=(0,K.UO)(),x=F.render,S=F.id,h=(0,u.useState)({}),y=c()(h,2),g=y[0],m=y[1];(0,u.useEffect)(function(){console.log("Editor"),console.log(x),(0,P.n4)(x,S).then(function(s){return m(s)})},[S]);var E=(0,u.useState)(!1),T=c()(E,2),j=T[0],he=T[1],ve=(0,u.useState)(!1),O=c()(ve,2),fe=O[0],Z=O[1],ge=(0,u.useState)(!1),I=c()(ge,2),J=I[0],N=I[1],me=(0,u.useState)(""),M=c()(me,2),z=M[0],Ce=M[1],pe=(0,u.useState)(""),L=c()(pe,2),G=L[0],R=L[1];return(0,a.jsxs)("div",{className:Q.editorContainer,children:[(0,a.jsxs)(ee.Z,{style:{margin:"5px",float:"right"},children:[(0,a.jsx)(p.ZP,{onClick:function(){return he(!j)},children:j?"\u7F16\u8F91":"\u9884\u89C8"},1),(0,a.jsx)(p.ZP,{type:"primary",onClick:function(n){D()(JSON.stringify(g))},children:"\u590D\u5236\u914D\u7F6E"},2),(0,a.jsx)(p.ZP,{type:"primary",onClick:function(n){(0,P.wx)(x,S,g)},children:"\u4FDD\u5B58\u5230DB"},3)]}),(0,a.jsx)(ne.Z,{style:{margin:"0px"}}),(0,a.jsx)(_,{pageSchmea:g,preview:j,onChange:function(n){return m(n)},style:{height:"100vh"}}),(0,a.jsxs)(te.Z,{open:fe,confirmLoading:J,title:"\u914D\u7F6E\u751F\u6210\u5C0F\u52A9\u624B(Beta)",cancelText:"\u53D6\u6D88",okText:"\u4F7F\u7528\u914D\u7F6E",width:800,onOk:function(){Z(!1),m(JSON.parse(G))},onCancel:function(){return Z(!1)},children:[(0,a.jsx)(ae.Z.TextArea,{style:{margin:"5px"},placeholder:'\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\uFF0C\u5982"\u751F\u6210\u4E00\u4E2A\u4EFB\u52A1\u7BA1\u7406\u754C\u9762\uFF0C\u4EFB\u52A1\u4FE1\u606F\u5305\u542B\u4EFB\u52A1\u53F7id\u3001\u65F6\u95F4time\u3001\u8D1F\u8D23\u4EBAmgr_user',onChange:function(n){return Ce(n.target.value)}}),(0,a.jsx)(p.ZP,{loading:J,onClick:function(){if(z.length==0){se.ZP.warning("\u8BF7\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\u63D0\u793A");return}Z(!0),N(!0),d.Z.post("/openai/v1/chat/completions",{headers:{Authorization:"Bearer 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"},data:{model:"gpt-3.5-turbo",messages:[{role:"system",content:"\u4F60\u662F\u4E00\u4E2Aamis\u914D\u7F6E\u6587\u4EF6\u751F\u6210\u5668\uFF0C\u5E2E\u6211\u751F\u6210json\u914D\u7F6E\u6587\u4EF6"},{role:"user",content:z}]}}).then(function(n){var v=n.choices[0].message.content;N(!1);var l=v.indexOf("```"),o=v.lastIndexOf("```"),C=v.substring(l+7,o);console.log(C),R(C)})},icon:(0,a.jsx)(re.Z,{}),type:"primary",style:{width:"100%",marginTop:"5px",marginBottom:"5px"},children:"\u751F\u6210\u914D\u7F6E\u2193"}),(0,a.jsx)(B.MLE,{value:G,onChange:function(n){return R(n)},height:300,language:"json",options:{fetcher:function(n){var v=n.url,l=n.method,o=n.data,C=n.responseType,t=n.config,xe=n.headers;return t=t||{},t.withCredentials=!0,C&&(t.responseType=C),t.cancelExecutor&&(t.cancelToken=new d.Z.CancelToken(t.cancelExecutor)),t.headers=xe||{},l!=="post"&&l!=="put"&&l!=="patch"?(o&&(t.params=o),d.Z[l](v,t)):(o&&o instanceof FormData?(t.headers=t.headers||{},t.headers["Content-Type"]="multipart/form-data"):o&&typeof o!="string"&&!(o instanceof Blob)&&!(o instanceof ArrayBuffer)&&(o=JSON.stringify(o),t.headers=t.headers||{},t.headers["Content-Type"]="application/json"),d.Z[l](v,o,t))},isCancel:function(n){return d.Z.isCancel(n)},copy:function(n){D()(n),B.Amu.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:i}})]})]})},ce=le}}]);
