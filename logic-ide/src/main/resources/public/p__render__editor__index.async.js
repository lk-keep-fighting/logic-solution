"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5315],{10329:function(re,W,e){e.r(W),e.d(W,{default:function(){return Pe}});var L=e(54306),p=e.n(L),b=e(98306),A={editorContainer:"editorContainer___czC1W"},O=e(21140),P=e.n(O),B=e(63466),D=e.n(B),M=e(58853),j=e.n(M),Z=e(38888),m=e.n(Z),r=e(87363),N=e.n(r),s=e(63204),y=e(68608),c=e.n(y),se=e(52510),d=e.n(se),oe=function(o){j()(t,o);var g=m()(t);function t(){var n;P()(this,t);for(var i=arguments.length,f=new Array(i),h=0;h<i;h++)f[h]=arguments[h];return n=g.call.apply(g,[this].concat(f)),d()(c()(n),"ref",null),d()(c()(n),"rendererName","logic-editor"),d()(c()(n),"$schema","/schemas/UnkownSchema.json"),d()(c()(n),"name","\u81EA\u5B9A\u4E49"),d()(c()(n),"description","\u8FD9\u53EA\u662F\u4E2A\u793A\u4F8B"),d()(c()(n),"tags",["\u81EA\u5B9A\u4E49","\u8868\u5355\u9879"]),d()(c()(n),"icon","fa fa-user"),d()(c()(n),"previewSchema",{type:"logic-editor",target:"demo"}),d()(c()(n),"scaffold",{type:"logic-editor",target:"233"}),d()(c()(n),"panelTitle","\u81EA\u5B9A\u4E49\u7EC4\u4EF6"),d()(c()(n),"panelControls",[{type:"tabs",tabsMode:"line",className:"m-t-n-xs",contentClassName:"no-border p-l-none p-r-none",tabs:[{title:"\u5E38\u89C4",controls:[{name:"title",label:"title",type:"text"}]},{title:"Panel",controls:[{name:"nodes",label:"nodes",type:"editor",language:"json"}]}]}]),n}return D()(t,[{key:"render",value:function(){return"text"}}]),t}(s.vq3),ie=e(23620),ue=e(5671),le=e(1167),ce=e(22046),l=e(33130),G={body:{fill:"#fff",stroke:"#8f8f8f",strokeWidth:1}},w=function(o){j()(t,o);var g=m()(t);function t(){var n;P()(this,t);for(var i=arguments.length,f=new Array(i),h=0;h<i;h++)f[h]=arguments[h];return n=g.call.apply(g,[this].concat(f)),d()(c()(n),"container",void 0),d()(c()(n),"stencilContainer",void 0),d()(c()(n),"refContainer",function(x){n.container=x}),d()(c()(n),"refStencil",function(x){n.stencilContainer=x}),n}return D()(t,[{key:"componentDidMount",value:function(){console.log("did mount this.props"),console.log(this.props);var i=new ue.kJ({container:this.container,background:{color:"#F2F7FA"}});i.use(new le.H({enabled:!0,sharp:!0})),i.centerContent();var f=new ce.t({title:"Stencil",target:i,search:function(S,J){return S.shape.indexOf(J)!==-1},placeholder:"Search by shape name",notFoundText:"Not Found",collapsable:!0,stencilGraphHeight:0});this.stencilContainer.appendChild(f.container);var h=i.createNode({shape:"rect",x:40,y:40,width:80,height:40,label:"rect",attrs:G}),x=i.createNode({shape:"circle",x:180,y:40,width:40,height:40,label:"circle",attrs:G}),R=i.createNode({shape:"ellipse",x:280,y:40,width:80,height:40,label:"ellipse",attrs:G})}},{key:"componentWillReceiveProps",value:function(i,f){console.log("componentWillReceiveProps this.props"),console.log(this.props)}},{key:"render",value:function(){return(0,l.jsxs)("div",{className:"stencil-app",children:[(0,l.jsx)("div",{className:"app-stencil",ref:this.refStencil}),(0,l.jsx)("div",{className:"app-content",ref:this.refContainer})]})}}]),t}(N().Component),Ze=function(o){j()(t,o);var g=m()(t);function t(){return P()(this,t),g.apply(this,arguments)}return D()(t,[{key:"render",value:function(){return(0,l.jsx)(w,{})}}]),t}(r.Component);(0,ie.Thl)({type:"logic-editor",autoVar:!0})(w);var de=function(o){j()(t,o);var g=m()(t);function t(){return P()(this,t),g.apply(this,arguments)}return D()(t,[{key:"render",value:function(){var i,f="cxd",h="zh-CN",x=this.props,R=x.pageSchmea,I=x.preview,S=x.isMobile,J=x.onChange;return(0,l.jsx)(s.MLE,{value:R,isMobile:S,preview:I,onChange:J,showCustomRenderersPanel:!0,plugins:[oe]})}}]),t}(r.Component),he=de,pe=e(38243),me=e(40767),z=e(75904),ge=e(22983),ve=e(46464),fe=e(54882),Ce=e(43702),H=e(52943),xe=e(90010),Q=e.n(xe),ye=e(56868),F=e(70517),Se=e(70256),Ne=e(33358),Re=e(49500),Ie=e(16123),Je=e(82162);F.Z.interceptors.response.use(function(o){return console.log("axios config"),console.log(o),o.data?o:Promise.reject(new Error(o.data.message))},function(o){if(console.log("axios error"),o.response.data){var g=o.response;return console.log("--\u300Bdata\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse\uFF01"),console.log(g),g}return Promise.reject(o)});var Ee=function(g){var t="cxd",n="zh-CN",i=(0,b.UO)(),f=i.render,h=i.id,x=(0,r.useState)({}),R=p()(x,2),I=R[0],S=R[1];(0,r.useEffect)(function(){console.log("Editor"),console.log(f),(0,Se.n4)(f,h).then(function(C){return S(C)})},[h]);var J=(0,r.useState)(!1),V=p()(J,2),K=V[0],De=V[1],je=(0,r.useState)(!1),X=p()(je,2),Fe=X[0],$=X[1],Te=(0,r.useState)(!1),Y=p()(Te,2),k=Y[0],q=Y[1],Ae=(0,r.useState)(""),_=p()(Ae,2),ee=_[0],Oe=_[1],Be=(0,r.useState)(""),ne=p()(Be,2),te=ne[0],ae=ne[1],Ue=pe.Z.Text;return(0,l.jsxs)("div",{className:A.editorContainer,children:[(0,l.jsxs)(me.Z,{style:{margin:"5px",float:"right"},children:[(0,l.jsx)(z.ZP,{onClick:function(){return De(!K)},children:K?"\u7F16\u8F91":"\u9884\u89C8"},1),(0,l.jsx)(z.ZP,{type:"primary",onClick:function(a){Q()(JSON.stringify(I))},children:"\u590D\u5236\u914D\u7F6E"},2)]}),(0,l.jsx)(ge.Z,{style:{margin:"0px"}}),(0,l.jsx)(he,{pageSchmea:I,preview:K,onChange:function(a){return S(a)},style:{height:"100vh"}}),(0,l.jsxs)(ve.Z,{open:Fe,confirmLoading:k,title:"\u914D\u7F6E\u751F\u6210\u5C0F\u52A9\u624B(Beta)",cancelText:"\u53D6\u6D88",okText:"\u4F7F\u7528\u914D\u7F6E",width:800,onOk:function(){$(!1),S(JSON.parse(te))},onCancel:function(){return $(!1)},children:[(0,l.jsx)(fe.Z.TextArea,{style:{margin:"5px"},placeholder:'\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\uFF0C\u5982"\u751F\u6210\u4E00\u4E2A\u4EFB\u52A1\u7BA1\u7406\u754C\u9762\uFF0C\u4EFB\u52A1\u4FE1\u606F\u5305\u542B\u4EFB\u52A1\u53F7id\u3001\u65F6\u95F4time\u3001\u8D1F\u8D23\u4EBAmgr_user',onChange:function(a){return Oe(a.target.value)}}),(0,l.jsx)(z.ZP,{loading:k,onClick:function(){if(ee.length==0){Ce.ZP.warning("\u8BF7\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\u63D0\u793A");return}$(!0),q(!0),F.Z.post("/openai/v1/chat/completions",{headers:{Authorization:"Bearer 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"},data:{model:"gpt-3.5-turbo",messages:[{role:"system",content:"\u4F60\u662F\u4E00\u4E2Aamis\u914D\u7F6E\u6587\u4EF6\u751F\u6210\u5668\uFF0C\u5E2E\u6211\u751F\u6210json\u914D\u7F6E\u6587\u4EF6"},{role:"user",content:ee}]}}).then(function(a){var T=a.choices[0].message.content;q(!1);var E=T.indexOf("```"),v=T.lastIndexOf("```"),U=T.substring(E+7,v);console.log(U),ae(U)})},icon:(0,l.jsx)(ye.Z,{}),type:"primary",style:{width:"100%",marginTop:"5px",marginBottom:"5px"},children:"\u751F\u6210\u914D\u7F6E\u2193"}),(0,l.jsx)(H.ML,{value:te,onChange:function(a){return ae(a)},height:300,language:"json",options:{fetcher:function(a){var T=a.url,E=a.method,v=a.data,U=a.responseType,u=a.config,Me=a.headers;return u=u||{},u.withCredentials=!0,U&&(u.responseType=U),u.cancelExecutor&&(u.cancelToken=new F.Z.CancelToken(u.cancelExecutor)),u.headers=Me||{},E!=="post"&&E!=="put"&&E!=="patch"?(v&&(u.params=v),F.Z[E](T,u)):(v&&v instanceof FormData?(u.headers=u.headers||{},u.headers["Content-Type"]="multipart/form-data"):v&&typeof v!="string"&&!(v instanceof Blob)&&!(v instanceof ArrayBuffer)&&(v=JSON.stringify(v),u.headers=u.headers||{},u.headers["Content-Type"]="application/json"),F.Z[E](T,v,u))},isCancel:function(a){return F.Z.isCancel(a)},copy:function(a){Q()(a),H.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:t}})]})]})},Pe=Ee},70256:function(re,W,e){e.d(W,{CD:function(){return D},UD:function(){return P},n4:function(){return j}});var L=e(25359),p=e.n(L),b=e(49811),A=e.n(b),O=e(70517);function P(m){return B.apply(this,arguments)}function B(){return B=A()(p()().mark(function m(r){return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,O.Z.get("/setting/pages/".concat(r,".json"));case 2:return s.abrupt("return",s.sent.data);case 3:case"end":return s.stop()}},m)})),B.apply(this,arguments)}function D(m){return M.apply(this,arguments)}function M(){return M=A()(p()().mark(function m(r){return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,O.Z.get("/setting/forms/".concat(r,".json"));case 2:return s.abrupt("return",s.sent.data);case 3:case"end":return s.stop()}},m)})),M.apply(this,arguments)}function j(m,r){return Z.apply(this,arguments)}function Z(){return Z=A()(p()().mark(function m(r,N){return p()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,O.Z.get("/setting/".concat(r,"s/").concat(N,".json"));case 2:return y.abrupt("return",y.sent.data);case 3:case"end":return y.stop()}},m)})),Z.apply(this,arguments)}}}]);
