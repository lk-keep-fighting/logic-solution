"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[724],{80724:function(O,w,b){b.r(w),b.d(w,{App:function(){return C},default:function(){return k}});var u=b(15767),D=b(87363),r=b.n(D),y=b(94391),p=b(42977),C=function(B){(0,u.ZT)(s,B);function s(e){var t=this,n,o,a;t=B.call(this,e)||this;var i=e.store;return i.syncProps(e,void 0,["pages"]),i.updateActivePage(Object.assign({},(n=e.env)!==null&&n!==void 0?n:{},{showFullBreadcrumbPath:(o=e.showFullBreadcrumbPath)!==null&&o!==void 0?o:!1,showBreadcrumbHomePath:(a=e.showBreadcrumbHomePath)!==null&&a!==void 0?a:!0})),e.env.watchRouteChange&&(t.unWatchRouteChange=e.env.watchRouteChange(function(){var d,h,c;return i.updateActivePage(Object.assign({},(d=e.env)!==null&&d!==void 0?d:{},{showFullBreadcrumbPath:(h=e.showFullBreadcrumbPath)!==null&&h!==void 0?h:!1,showBreadcrumbHomePath:(c=e.showBreadcrumbHomePath)!==null&&c!==void 0?c:!0}))})),t}return s.prototype.componentDidMount=function(){return(0,u.mG)(this,void 0,void 0,function(){var e,t,n,o;return(0,u.Jh)(this,function(a){switch(a.label){case 0:return e=this.props,t=e.data,n=e.dispatchEvent,[4,n("init",t,this)];case 1:return o=a.sent(),o!=null&&o.prevented?[2]:(this.reload(),[2])}})})},s.prototype.componentDidUpdate=function(e){var t,n,o;return(0,u.mG)(this,void 0,void 0,function(){var a,i;return(0,u.Jh)(this,function(d){return a=this.props,i=a.store,i.syncProps(a,e,["pages"]),(0,p.rMT)(e.api,a.api,e.data,a.data)?this.reload():a.location&&a.location!==e.location&&i.updateActivePage(Object.assign({},(t=a.env)!==null&&t!==void 0?t:{},{showFullBreadcrumbPath:(n=a.showFullBreadcrumbPath)!==null&&n!==void 0?n:!1,showBreadcrumbHomePath:(o=a.showBreadcrumbHomePath)!==null&&o!==void 0?o:!0})),[2]})})},s.prototype.componentWillUnmount=function(){var e;(e=this.unWatchRouteChange)===null||e===void 0||e.call(this)},s.prototype.reload=function(e,t,n,o,a){return(0,u.mG)(this,void 0,void 0,function(){var i,d,h,c,m,l,A,N,f,v;return(0,u.Jh)(this,function(E){switch(E.label){case 0:return t?[2,this.receive(t,void 0,a)]:(i=this.props,d=i.api,h=i.store,c=i.env,m=i.showFullBreadcrumbPath,l=m===void 0?!1:m,A=i.showBreadcrumbHomePath,N=A===void 0?!0:A,f=i.locale,(0,p.X1t)(d,h.data)?[4,h.fetchInitData(d,h.data,{})]:[3,2]);case 1:v=E.sent(),c.replaceText&&(v.data=(0,p.lpb)(v.data,c.replaceText,c.replaceTextIgnoreKeys)),v!=null&&v.data.pages&&(v.data=(0,p.M15)(v.data,f),h.setPages(v.data.pages),h.updateActivePage(Object.assign({},c!=null?c:{},{showFullBreadcrumbPath:l,showBreadcrumbHomePath:N}))),E.label=2;case 2:return[2,h.data]}})})},s.prototype.receive=function(e,t,n){return(0,u.mG)(this,void 0,void 0,function(){var o;return(0,u.Jh)(this,function(a){return o=this.props.store,o.updateData(e,void 0,n),[2,this.reload()]})})},s.prototype.resolveDefinitions=function(e){var t,n=this.props,o=n.resolveDefinitions,a=n.store,i=(t=a.schema)===null||t===void 0?void 0:t.definitions;return(i==null?void 0:i[e])||o(e)},s.prototype.handleNavClick=function(e){e.preventDefault();var t=this.props.env,n=e.currentTarget.getAttribute("href");t.jumpTo(n,void 0,this.props.data)},s.prototype.renderHeader=function(){var e=this.props,t=e.classnames,n=e.brandName,o=e.header,a=e.render,i=e.store,d=e.logo,h=e.env;return!o&&!d&&!n?null:r().createElement(r().Fragment,null,r().createElement("div",{className:t("Layout-brandBar")},r().createElement("div",{onClick:i.toggleOffScreen,className:t("Layout-offScreenBtn")},r().createElement("i",{className:"bui-icon iconfont icon-collapse"})),r().createElement("div",{className:t("Layout-brand")},d&&~d.indexOf("<svg")?r().createElement(y.Vtq,{className:t("AppLogo-html"),html:d,filterHtml:h.filterHtml}):d?r().createElement("img",{className:t("AppLogo"),src:d}):r().createElement("span",{className:"visible-folded "},n==null?void 0:n.substring(0,1)),r().createElement("span",{className:"hidden-folded m-l-sm"},n))),r().createElement("div",{className:t("Layout-headerBar")},r().createElement("a",{onClick:i.toggleFolded,type:"button",className:t("AppFoldBtn")},r().createElement("i",{className:"fa fa-".concat(i.folded?"indent":"dedent"," fa-fw")})),o?a("header",o):null))},s.prototype.renderAside=function(){var e=this,t=this.props,n=t.store,o=t.env,a=t.asideBefore,i=t.asideAfter,d=t.render,h=t.data;return r().createElement(r().Fragment,null,a?d("aside-before",a):null,r().createElement(y.zot,{navigations:n.navigations,renderLink:function(c,m){var l=c.link,A=c.active,N=c.toggleExpand,f=c.classnames,v=c.depth,E=c.subHeader,g=[];if(l.visible===!1)return null;!E&&l.children&&l.children.some(function(P){return P==null?void 0:P.visible})&&g.push(r().createElement("span",{key:"expand-toggle",className:f("AsideNav-itemArrow"),onClick:function(P){return N(l,P)}}));var _=typeof l.badge=="string"?(0,p.hXT)(l.badge,h):l.badge;return _!=null&&g.push(r().createElement("b",{key:"badge",className:f("AsideNav-itemBadge",l.badgeClassName||"bg-info")},_)),!E&&l.icon?g.push(r().createElement(y.JO$,{key:"icon",cx:f,icon:l.icon,className:"AsideNav-itemIcon"})):n.folded&&v===1&&!E&&g.push(r().createElement("i",{key:"icon",className:f("AsideNav-itemIcon",l.children?"fa fa-folder":"fa fa-info")})),g.push(r().createElement("span",{className:f("AsideNav-itemLabel"),key:"label"},typeof l.label=="string"?(0,p.hXT)(l.label,h):l.label)),l.path?/^https?\:/.test(l.path)?r().createElement("a",{target:"_blank",key:"link",href:l.path,rel:"noopener"},g):r().createElement("a",{key:"link",onClick:e.handleNavClick,href:l.path||l.children&&l.children[0].path},g):r().createElement("a",{key:"link",onClick:l.children?function(){return N(l)}:void 0},g)},isActive:function(c){return!!o.isCurrentUrl(c==null?void 0:c.path,c)}}),i?d("aside-before",i):null)},s.prototype.renderFooter=function(){var e=this.props,t=e.render,n=e.footer;return n?t("footer",n):null},s.prototype.render=function(){var e=this,t,n=this.props,o=n.classnames,a=n.store,i=n.render,d=n.showBreadcrumb,h=d===void 0?!0:d,c=n.loadingConfig;return r().createElement(y.Ar2,{header:this.renderHeader(),aside:this.renderAside(),footer:this.renderFooter(),folded:a.folded,offScreen:a.offScreen,contentClassName:o("AppContent")},a.activePage&&a.schema?r().createElement(r().Fragment,null,h&&a.bcn.length?r().createElement("ul",{className:o("AppBcn")},a.bcn.map(function(m,l){return r().createElement("li",{key:l,className:o("AppBcn-item")},m.path?r().createElement("a",{href:m.path,onClick:e.handleNavClick},m.label):l!==a.bcn.length-1?r().createElement("a",null,m.label):m.label)})):null,r().createElement("div",{className:o("AppBody")},i("page",a.schema,{key:"".concat((t=a.activePage)===null||t===void 0?void 0:t.id,"-").concat(a.schemaKey),data:a.pageData,resolveDefinitions:this.resolveDefinitions}))):a.pages&&!a.activePage?r().createElement(y.TXS,null,r().createElement("div",{className:"text-center"},"\u9875\u9762\u4E0D\u5B58\u5728")):null,r().createElement(y.$jN,{loadingConfig:c,overlay:!0,show:a.loading||!a.pages,size:"lg"}))},s.propsList=["brandName","logo","header","asideBefore","asideAfter","pages","footer"],s.defaultProps={},(0,u.gn)([p.NjZ,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[String]),(0,u.w6)("design:returntype",void 0)],s.prototype,"resolveDefinitions",null),(0,u.gn)([p.NjZ,(0,u.w6)("design:type",Function),(0,u.w6)("design:paramtypes",[Object]),(0,u.w6)("design:returntype",void 0)],s.prototype,"handleNavClick",null),s}(r().Component),k=function(B){(0,u.ZT)(s,B);function s(e,t){var n=B.call(this,e)||this,o=t;return o.registerComponent(n),n}return s.prototype.componentWillUnmount=function(){var e=this.context;e.unRegisterComponent(this),B.prototype.componentWillUnmount.call(this)},s.prototype.setData=function(e,t){return this.props.store.updateData(e,void 0,t)},s.prototype.getData=function(){var e=this.props.store;return e.data},s.contextType=p.ZHe,s=(0,u.gn)([(0,p.Thl)({type:"app",storeType:p.dkQ.name}),(0,u.w6)("design:paramtypes",[Object,Object])],s),s}(C)}}]);
