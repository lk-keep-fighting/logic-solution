"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[8358],{72197:function(Z,D,t){t.d(D,{Z:function(){return Y}});var l=t(87363),u=t(84875),g=t.n(u),f=t(35822);function d(e,a,i){var o=i||{},n=o.noTrailing,s=n===void 0?!1:n,r=o.noLeading,c=r===void 0?!1:r,h=o.debounceMode,E=h===void 0?void 0:h,L,U=!1,_=0;function P(){L&&clearTimeout(L)}function A(B){var b=B||{},I=b.upcomingOnly,J=I===void 0?!1:I;P(),U=!J}function H(){for(var B=arguments.length,b=new Array(B),I=0;I<B;I++)b[I]=arguments[I];var J=this,M=Date.now()-_;if(U)return;function R(){_=Date.now(),a.apply(J,b)}function O(){L=void 0}!c&&E&&!L&&R(),P(),E===void 0&&M>e?c?(_=Date.now(),s||(L=setTimeout(E?O:R,e))):R():s!==!0&&(L=setTimeout(E?O:R,E===void 0?e-M:e))}return H.cancel=A,H}function X(e,a,i){var o=i||{},n=o.atBegin,s=n===void 0?!1:n;return d(e,a,{debounceMode:s!==!1})}var v=t(71594),F=t(88596),z=t(27183),p=t(91918),j=t(79987),G=t(48826);const T=new z.E4("antSpinMove",{to:{opacity:1}}),W=new z.E4("antRotate",{to:{transform:"rotate(405deg)"}}),x=e=>({[`${e.componentCls}`]:Object.assign(Object.assign({},(0,p.Wf)(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${e.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${e.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-e.dotSize/2},[`${e.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(e.dotSize-e.fontSize)/2+2,textShadow:`0 1px 2px ${e.colorBgContainer}`,fontSize:e.fontSize},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSize/2)-10},"&-sm":{[`${e.componentCls}-dot`]:{margin:-e.dotSizeSM/2},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeSM-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeSM/2)-10}},"&-lg":{[`${e.componentCls}-dot`]:{margin:-(e.dotSizeLG/2)},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeLG-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeLG/2)-10}}},[`${e.componentCls}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none",["&::after"]:{opacity:.4,pointerEvents:"auto"}}},["&-tip"]:{color:e.spinDotDefault},[`${e.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(e.dotSize-e.marginXXS/2)/2,height:(e.dotSize-e.marginXXS/2)/2,backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:T,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:W,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${e.componentCls}-dot`]:{fontSize:e.dotSizeSM,i:{width:(e.dotSizeSM-e.marginXXS/2)/2,height:(e.dotSizeSM-e.marginXXS/2)/2}},[`&-lg ${e.componentCls}-dot`]:{fontSize:e.dotSizeLG,i:{width:(e.dotSizeLG-e.marginXXS)/2,height:(e.dotSizeLG-e.marginXXS)/2}},[`&${e.componentCls}-show-text ${e.componentCls}-text`]:{display:"block"}})});var m=(0,j.Z)("Spin",e=>{const a=(0,G.TS)(e,{spinDotDefault:e.colorTextDescription});return[x(a)]},e=>({contentHeight:400,dotSize:e.controlHeightLG/2,dotSizeSM:e.controlHeightLG*.35,dotSizeLG:e.controlHeight})),S=function(e,a){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)a.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]]);return i};const w=null;let y=null;function N(e,a){const{indicator:i}=a,o=`${e}-dot`;return i===null?null:(0,v.l$)(i)?(0,v.Tm)(i,{className:g()(i.props.className,o)}):(0,v.l$)(y)?(0,v.Tm)(y,{className:g()(y.props.className,o)}):l.createElement("span",{className:g()(o,`${e}-dot-spin`)},l.createElement("i",{className:`${e}-dot-item`,key:1}),l.createElement("i",{className:`${e}-dot-item`,key:2}),l.createElement("i",{className:`${e}-dot-item`,key:3}),l.createElement("i",{className:`${e}-dot-item`,key:4}))}function C(e,a){return!!e&&!!a&&!isNaN(Number(a))}const K=e=>{const{spinPrefixCls:a,spinning:i=!0,delay:o=0,className:n,rootClassName:s,size:r="default",tip:c,wrapperClassName:h,style:E,children:L,hashId:U}=e,_=S(e,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[P,A]=l.useState(()=>i&&!C(i,o));l.useEffect(()=>{if(i){const V=X(o,()=>{A(!0)});return V(),()=>{var Q;(Q=V==null?void 0:V.cancel)===null||Q===void 0||Q.call(V)}}A(!1)},[o,i]);const H=l.useMemo(()=>typeof L!="undefined",[L]),{direction:B,spin:b}=l.useContext(F.E_),I=g()(a,b==null?void 0:b.className,{[`${a}-sm`]:r==="small",[`${a}-lg`]:r==="large",[`${a}-spinning`]:P,[`${a}-show-text`]:!!c,[`${a}-rtl`]:B==="rtl"},n,s,U),J=g()(`${a}-container`,{[`${a}-blur`]:P}),M=(0,f.Z)(_,["indicator","prefixCls"]),R=Object.assign(Object.assign({},b==null?void 0:b.style),E),O=l.createElement("div",Object.assign({},M,{style:R,className:I,"aria-live":"polite","aria-busy":P}),N(a,e),c&&H?l.createElement("div",{className:`${a}-text`},c):null);return H?l.createElement("div",Object.assign({},M,{className:g()(`${a}-nested-loading`,h,U)}),P&&l.createElement("div",{key:"loading"},O),l.createElement("div",{className:J,key:"container"},L)):O},$=e=>{const{prefixCls:a}=e,{getPrefixCls:i}=l.useContext(F.E_),o=i("spin",a),[n,s]=m(o),r=Object.assign(Object.assign({},e),{spinPrefixCls:o,hashId:s});return n(l.createElement(K,Object.assign({},r)))};$.setDefaultIndicator=e=>{y=e};var Y=$},60341:function(Z,D,t){t.d(D,{l:function(){return l.Z}});var l=t(93797)},2325:function(Z,D,t){t.d(D,{C:function(){return l}});var l=new Map,u=50,g=50;l.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:g,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),l.set("ExtShape1",{name:"ExtShape1",config:{width:100,height:g,attrs:{body:{rx:6,ry:6,fill:"#ffcc00",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),l.set("ExtShape2",{name:"ExtShape2",config:{width:100,height:g,attrs:{body:{rx:6,ry:6,fill:"#87CEEB",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,strokeWidth:3,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),l.set("ExtShape3",{name:"ExtShape3",config:{width:100,height:g,attrs:{body:{rx:6,ry:6,fill:"#FFF8DC",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},38533:function(Z,D,t){t.r(D),t.d(D,{default:function(){return a}});var l=t(93525),u=t.n(l),g=t(54306),f=t.n(g),d=t(60341),X=t(72197),v=t(87363),F=t(98306),z=t(25359),p=t.n(z),j=t(49811),G=t.n(j),T=t(21140),W=t.n(T),x=t(63466),m=t.n(x),S=t(70517),w=new S.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),y=function(){function i(){W()(this,i)}return m()(i,[{key:"updateRouteProcessDesign",value:function(){var o=G()(p()().mark(function s(r){return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",w.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify(r)));case 1:case"end":return h.stop()}},s)}));function n(s){return o.apply(this,arguments)}return n}()},{key:"getRouteProcessDesign",value:function(){var o=G()(p()().mark(function s(r,c){return p()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",w.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:c,productCode:r})));case 1:case"end":return E.stop()}},s)}));function n(s,r){return o.apply(this,arguments)}return n}()}]),i}(),N=t(89147),C=t(2325),K=t(48364),$=t(33130),Y=new y,e=function(){var o=(0,v.useState)({}),n=f()(o,2),s=n[0],r=n[1],c=(0,v.useState)({}),h=f()(c,2),E=h[0],L=h[1],U=(0,v.useState)(!1),_=f()(U,2),P=_[0],A=_[1],H=(0,v.useState)(),B=f()(H,2),b=B[0],I=B[1],J=(0,F.UO)(),M=J.id,R=J.version;return(0,v.useEffect)(function(){(0,N.m)(u()(C.C.values()))},[]),(0,v.useEffect)(function(){A(!0),M&&(0,K.Uh)(M,R).then(function(O){r(O),L(O.configJson.visualConfig),A(!1)}).catch(function(O){A(!1),console.log("err"),console.log(O)})},[M]),(0,$.jsx)("div",{children:(0,$.jsx)(X.Z,{spinning:P,children:(0,$.jsx)(d.l,{showLeft:!1,graphIns:b,isStatic:!0,toolElements:[(0,$.jsxs)("span",{style:{marginLeft:"25px",color:"red"},children:["\u903B\u8F91\u7248\u672C\uFF1A",R]}),(0,$.jsxs)("span",{style:{marginLeft:"10px"},children:["\u66F4\u65B0\u65F6\u95F4\uFF1A",s==null?void 0:s.updateTime]}),(0,$.jsxs)("span",{style:{marginLeft:"10px"},children:["\u540D\u79F0\uFF1A",s==null?void 0:s.name]})],graphJson:E})})})},a=e},89147:function(Z,D,t){t.d(D,{m:function(){return W}});var l=t(5671),u=t(95812),g=t(53914),f={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},d=t(33130),X=function(m){return(0,d.jsx)("div",{className:f.customNode,children:(0,d.jsx)(g.Z,{className:"input",value:m==null?void 0:m.data,width:80})})},v=t(371),F=function(m){return(0,d.jsx)("div",{className:styles.customNode,children:(0,d.jsx)(v.Z,{className:"input",value:m==null?void 0:m.data,width:80})})},z=t(57213),p=t.n(z),j=function(m){var S,w,y,N=m.node,C=(S=N.data.config)===null||S===void 0?void 0:S.name,K=C||"case";return(0,d.jsxs)("div",{className:f.customNode,children:[(0,d.jsx)("span",{children:"case"}),(0,d.jsx)(g.Z,{addonAfter:C,className:"input",value:N==null||(w=N.data)===null||w===void 0||(y=w.config)===null||y===void 0?void 0:y.case,width:150,onChange:function(Y){var e=N.data;N.setData(p()(p()({},e),{},{config:p()(p()({},e.config),{},{case:Y.target.value})}))}})]})},G=function(m){var S,w=m.node;return(0,d.jsx)("div",{className:f.customNode,children:(0,d.jsx)(g.Z,{addonBefore:"switch",className:"input",value:(S=w.data)===null||S===void 0?void 0:S.config.condition,onChange:function(N){var C=w.data;w.setData(p()(p()({},C),{},{config:p()(p()({},C.config),{},{condition:N.target.value})}))},width:100})})},T=function(m){return(0,d.jsx)("div",{className:f.customNode,children:(0,d.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function W(x){x.forEach(function(m){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+m.name),l.kJ.registerNode(m.name,m.config,!0)}),(0,u.z2)({shape:"string",component:X}),(0,u.z2)({shape:"num",component:F}),(0,u.z2)({shape:"switch",component:G}),(0,u.z2)({shape:"switch-case",component:j}),(0,u.z2)({shape:"switch-default",component:T})}},48364:function(Z,D,t){t.d(D,{Uh:function(){return Y},az:function(){return W},gC:function(){return w},m9:function(){return m},qB:function(){return p},yi:function(){return N}});var l=t(25359),u=t.n(l),g=t(49811),f=t.n(g),d=t(57475),X=t(5726),v=t.n(X);function F(a){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime().mark(function a(i){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",post("/api/ide/pub/logic/dev-to-test".concat(i)));case 1:case"end":return n.stop()}},a)})),z.apply(this,arguments)}function p(a){return j.apply(this,arguments)}function j(){return j=f()(u()().mark(function a(i){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.U2)("/api/ide/logic/".concat(i)).then(function(s){var r,c=(r=s.data)===null||r===void 0?void 0:r.data;return c.configJson=JSON.parse(c.configJson),c}));case 1:case"end":return n.stop()}},a)})),j.apply(this,arguments)}function G(a){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function a(i){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",get("/api/ide/logic/".concat(i,"/config")).then(function(s){var r;return(r=s.data)===null||r===void 0?void 0:r.data}));case 1:case"end":return n.stop()}},a)})),T.apply(this,arguments)}function W(a,i,o){return x.apply(this,arguments)}function x(){return x=f()(u()().mark(function a(i,o,n){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.gz)("/api/ide/logic/edit/".concat(i),{version:o,configJson:n,updateTime:v()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return r.stop()}},a)})),x.apply(this,arguments)}function m(a){return S.apply(this,arguments)}function S(){return S=f()(u()().mark(function a(i){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.U2)("/api/ide/logic-instance/".concat(i)).then(function(s){var r=s.data.data;return r}));case 1:case"end":return n.stop()}},a)})),S.apply(this,arguments)}function w(a){return y.apply(this,arguments)}function y(){return y=f()(u()().mark(function a(i){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[i.logicId],type:"="},{dataIndex:"bizId",values:[i.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(s){var r=s.data.data.records;return r&&r.map(function(c){c.itemLogs&&(c.itemLogs=JSON.parse(c.itemLogs))}),r}));case 1:case"end":return n.stop()}},a)})),y.apply(this,arguments)}function N(a){return C.apply(this,arguments)}function C(){return C=f()(u()().mark(function a(i){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[i],type:"="}],pageSize:1e3}).then(function(s){var r=s.data.data.records;return r&&r.length>0&&r[0].itemLogs&&(r[0].itemLogs=JSON.parse(r[0].itemLogs)),r[0]}));case 1:case"end":return n.stop()}},a)})),C.apply(this,arguments)}function K(a,i){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function a(i,o){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[i],type:"="},{dataIndex:"version",values:[o],type:"="}]}).then(function(r){var c=r.data.data.records[0].configJson,h=JSON.parse(c);return h}));case 1:case"end":return s.stop()}},a)})),$.apply(this,arguments)}function Y(a,i){return e.apply(this,arguments)}function e(){return e=f()(u()().mark(function a(i,o){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[i],type:"="},{dataIndex:"version",values:[o],type:"="}]}).then(function(r){var c=r.data.data.records[0],h=c.configJson;return c.configJson=JSON.parse(h),c.configJson.id=c.id,c.configJson.name=c.name,c}));case 1:case"end":return s.stop()}},a)})),e.apply(this,arguments)}}}]);
