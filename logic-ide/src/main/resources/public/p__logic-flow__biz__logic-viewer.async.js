"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[8358],{72197:function(K,$,t){t.d($,{Z:function(){return V}});var l=t(87363),d=t(84875),f=t.n(d),u=t(35822);function y(e,a,i){var o=i||{},n=o.noTrailing,s=n===void 0?!1:n,r=o.noLeading,c=r===void 0?!1:r,m=o.debounceMode,S=m===void 0?void 0:m,w,U=!1,J=0;function M(){w&&clearTimeout(w)}function X(_){var N=_||{},O=N.upcomingOnly,F=O===void 0?!1:O;M(),U=!F}function H(){for(var _=arguments.length,N=new Array(_),O=0;O<_;O++)N[O]=arguments[O];var F=this,R=Date.now()-J;if(U)return;function A(){J=Date.now(),a.apply(F,N)}function T(){w=void 0}!c&&S&&!w&&A(),M(),S===void 0&&R>e?c?(J=Date.now(),s||(w=setTimeout(S?T:A,e))):A():s!==!0&&(w=setTimeout(S?T:A,S===void 0?e-R:e))}return H.cancel=X,H}function P(e,a,i){var o=i||{},n=o.atBegin,s=n===void 0?!1:n;return y(e,a,{debounceMode:s!==!1})}var g=t(71594),G=t(88596),D=t(27183),L=t(91918),j=t(79987),z=t(48826);const p=new D.E4("antSpinMove",{to:{opacity:1}}),x=new D.E4("antRotate",{to:{transform:"rotate(405deg)"}}),v=e=>({[`${e.componentCls}`]:Object.assign(Object.assign({},(0,L.Wf)(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${e.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${e.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-e.dotSize/2},[`${e.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(e.dotSize-e.fontSize)/2+2,textShadow:`0 1px 2px ${e.colorBgContainer}`,fontSize:e.fontSize},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSize/2)-10},"&-sm":{[`${e.componentCls}-dot`]:{margin:-e.dotSizeSM/2},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeSM-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeSM/2)-10}},"&-lg":{[`${e.componentCls}-dot`]:{margin:-(e.dotSizeLG/2)},[`${e.componentCls}-text`]:{paddingTop:(e.dotSizeLG-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.dotSizeLG/2)-10}}},[`${e.componentCls}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none",["&::after"]:{opacity:.4,pointerEvents:"auto"}}},["&-tip"]:{color:e.spinDotDefault},[`${e.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(e.dotSize-e.marginXXS/2)/2,height:(e.dotSize-e.marginXXS/2)/2,backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:p,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:x,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${e.componentCls}-dot`]:{fontSize:e.dotSizeSM,i:{width:(e.dotSizeSM-e.marginXXS/2)/2,height:(e.dotSizeSM-e.marginXXS/2)/2}},[`&-lg ${e.componentCls}-dot`]:{fontSize:e.dotSizeLG,i:{width:(e.dotSizeLG-e.marginXXS)/2,height:(e.dotSizeLG-e.marginXXS)/2}},[`&${e.componentCls}-show-text ${e.componentCls}-text`]:{display:"block"}})});var I=(0,j.Z)("Spin",e=>{const a=(0,z.TS)(e,{spinDotDefault:e.colorTextDescription});return[v(a)]},e=>({contentHeight:400,dotSize:e.controlHeightLG/2,dotSizeSM:e.controlHeightLG*.35,dotSizeLG:e.controlHeight})),h=function(e,a){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)a.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(i[o[n]]=e[o[n]]);return i};const E=null;let b=null;function Y(e,a){const{indicator:i}=a,o=`${e}-dot`;return i===null?null:(0,g.l$)(i)?(0,g.Tm)(i,{className:f()(i.props.className,o)}):(0,g.l$)(b)?(0,g.Tm)(b,{className:f()(b.props.className,o)}):l.createElement("span",{className:f()(o,`${e}-dot-spin`)},l.createElement("i",{className:`${e}-dot-item`,key:1}),l.createElement("i",{className:`${e}-dot-item`,key:2}),l.createElement("i",{className:`${e}-dot-item`,key:3}),l.createElement("i",{className:`${e}-dot-item`,key:4}))}function B(e,a){return!!e&&!!a&&!isNaN(Number(a))}const W=e=>{const{spinPrefixCls:a,spinning:i=!0,delay:o=0,className:n,rootClassName:s,size:r="default",tip:c,wrapperClassName:m,style:S,children:w,hashId:U}=e,J=h(e,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[M,X]=l.useState(()=>i&&!B(i,o));l.useEffect(()=>{if(i){const Z=P(o,()=>{X(!0)});return Z(),()=>{var Q;(Q=Z==null?void 0:Z.cancel)===null||Q===void 0||Q.call(Z)}}X(!1)},[o,i]);const H=l.useMemo(()=>typeof w!="undefined",[w]),{direction:_,spin:N}=l.useContext(G.E_),O=f()(a,N==null?void 0:N.className,{[`${a}-sm`]:r==="small",[`${a}-lg`]:r==="large",[`${a}-spinning`]:M,[`${a}-show-text`]:!!c,[`${a}-rtl`]:_==="rtl"},n,s,U),F=f()(`${a}-container`,{[`${a}-blur`]:M}),R=(0,u.Z)(J,["indicator","prefixCls"]),A=Object.assign(Object.assign({},N==null?void 0:N.style),S),T=l.createElement("div",Object.assign({},R,{style:A,className:O,"aria-live":"polite","aria-busy":M}),Y(a,e),c&&H?l.createElement("div",{className:`${a}-text`},c):null);return H?l.createElement("div",Object.assign({},R,{className:f()(`${a}-nested-loading`,m,U)}),M&&l.createElement("div",{key:"loading"},T),l.createElement("div",{className:F,key:"container"},w)):T},C=e=>{const{prefixCls:a}=e,{getPrefixCls:i}=l.useContext(G.E_),o=i("spin",a),[n,s]=I(o),r=Object.assign(Object.assign({},e),{spinPrefixCls:o,hashId:s});return n(l.createElement(W,Object.assign({},r)))};C.setDefaultIndicator=e=>{b=e};var V=C},60341:function(K,$,t){t.d($,{l:function(){return l.Z}});var l=t(93797)},2325:function(K,$,t){t.d($,{C:function(){return l}});var l=new Map,d=50,f=50;l.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:f,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),l.set("ExtShape1",{name:"ExtShape1",config:{width:100,height:f,attrs:{body:{rx:6,ry:6,fill:"#ffcc00",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),l.set("ExtShape2",{name:"ExtShape2",config:{width:100,height:f,attrs:{body:{rx:6,ry:6,fill:"#87CEEB",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,strokeWidth:3,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),l.set("ExtShape3",{name:"ExtShape3",config:{width:100,height:f,attrs:{body:{rx:6,ry:6,fill:"#FFF8DC",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},38533:function(K,$,t){t.r($),t.d($,{default:function(){return a}});var l=t(93525),d=t.n(l),f=t(54306),u=t.n(f),y=t(60341),P=t(72197),g=t(87363),G=t(98306),D=t(25359),L=t.n(D),j=t(49811),z=t.n(j),p=t(21140),x=t.n(p),v=t(63466),I=t.n(v),h=t(70517),E=new h.Z.Axios({headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"}}),b=function(){function i(){x()(this,i)}return I()(i,[{key:"updateRouteProcessDesign",value:function(){var o=z()(L()().mark(function s(r){return L()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",E.post("/api/mes/asm-standard/route/update-route-process-design",JSON.stringify(r)));case 1:case"end":return m.stop()}},s)}));function n(s){return o.apply(this,arguments)}return n}()},{key:"getRouteProcessDesign",value:function(){var o=z()(L()().mark(function s(r,c){return L()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",E.post("/api/mes/asm-standard/route/route-process-design",JSON.stringify({version:c,productCode:r})));case 1:case"end":return S.stop()}},s)}));function n(s,r){return o.apply(this,arguments)}return n}()}]),i}(),Y=t(44095),B=t(2325),W=t(48364),C=t(33130),V=new b,e=function(){var o=(0,g.useState)({}),n=u()(o,2),s=n[0],r=n[1],c=(0,g.useState)({}),m=u()(c,2),S=m[0],w=m[1],U=(0,g.useState)(!1),J=u()(U,2),M=J[0],X=J[1],H=(0,g.useState)(),_=u()(H,2),N=_[0],O=_[1],F=(0,G.UO)(),R=F.id,A=F.version;return(0,g.useEffect)(function(){(0,Y.m)(d()(B.C.values()))},[]),(0,g.useEffect)(function(){X(!0),R&&(0,W.Uh)(R,A).then(function(T){r(T),w(T.configJson.visualConfig),X(!1)}).catch(function(T){X(!1),console.log("err"),console.log(T)})},[R]),(0,C.jsx)("div",{children:(0,C.jsx)(P.Z,{spinning:M,children:(0,C.jsx)(y.l,{showLeft:!1,graphIns:N,isStatic:!0,toolElements:[(0,C.jsxs)("span",{style:{marginLeft:"25px",color:"red"},children:["\u903B\u8F91\u7248\u672C\uFF1A",A]}),(0,C.jsxs)("span",{style:{marginLeft:"10px"},children:["\u66F4\u65B0\u65F6\u95F4\uFF1A",s==null?void 0:s.updateTime]}),(0,C.jsxs)("span",{style:{marginLeft:"10px"},children:["\u540D\u79F0\uFF1A",s==null?void 0:s.name]})],graphJson:S})})})},a=e},44095:function(K,$,t){t.d($,{m:function(){return j}});var l=t(5671),d=t(95812),f=t(57213),u=t.n(f),y=t(53914),P={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},g=t(33130),G=function(p){var x,v,I,h=p.node,E=(x=h.data.config)===null||x===void 0?void 0:x.name,b=E||"case";return(0,g.jsxs)("div",{className:P.customNode,children:[(0,g.jsx)("span",{children:"case"}),(0,g.jsx)(y.Z,{addonAfter:E,className:"input",value:h==null||(v=h.data)===null||v===void 0||(I=v.config)===null||I===void 0?void 0:I.case,width:150,onChange:function(B){var W=h.data;h.setData(u()(u()({},W),{},{config:u()(u()({},W.config),{},{case:B.target.value})}))}})]})},D=function(p){var x,v=p.node;return(0,g.jsx)("div",{className:P.customNode,children:(0,g.jsx)(y.Z,{addonBefore:"switch",className:"input",value:(x=v.data)===null||x===void 0?void 0:x.config.condition,onChange:function(h){var E=v.data;v.setData(u()(u()({},E),{},{config:u()(u()({},E.config),{},{condition:h.target.value})}))},width:100})})},L=function(p){return(0,g.jsx)("div",{className:P.customNode,children:(0,g.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function j(z){z.forEach(function(p){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+p.name),l.kJ.registerNode(p.name,p.config,!0)}),(0,d.z2)({shape:"switch",component:D}),(0,d.z2)({shape:"switch-case",component:G}),(0,d.z2)({shape:"switch-default",component:L})}},48364:function(K,$,t){t.d($,{Uh:function(){return V},az:function(){return x},gC:function(){return E},m9:function(){return I},qB:function(){return L},yi:function(){return Y}});var l=t(25359),d=t.n(l),f=t(49811),u=t.n(f),y=t(57475),P=t(5726),g=t.n(P);function G(a){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function a(i){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",post("/api/ide/pub/logic/dev-to-test".concat(i)));case 1:case"end":return n.stop()}},a)})),D.apply(this,arguments)}function L(a){return j.apply(this,arguments)}function j(){return j=u()(d()().mark(function a(i){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.U2)("/api/ide/logic/".concat(i)).then(function(s){var r,c=(r=s.data)===null||r===void 0?void 0:r.data;return c.configJson=JSON.parse(c.configJson),c}));case 1:case"end":return n.stop()}},a)})),j.apply(this,arguments)}function z(a){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function a(i){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",get("/api/ide/logic/".concat(i,"/config")).then(function(s){var r;return(r=s.data)===null||r===void 0?void 0:r.data}));case 1:case"end":return n.stop()}},a)})),p.apply(this,arguments)}function x(a,i,o){return v.apply(this,arguments)}function v(){return v=u()(d()().mark(function a(i,o,n){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,y.gz)("/api/ide/logic/edit/".concat(i),{version:o,configJson:n,updateTime:g()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return r.stop()}},a)})),v.apply(this,arguments)}function I(a){return h.apply(this,arguments)}function h(){return h=u()(d()().mark(function a(i){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.U2)("/api/ide/logic-instance/".concat(i)).then(function(s){var r=s.data.data;return r}));case 1:case"end":return n.stop()}},a)})),h.apply(this,arguments)}function E(a){return b.apply(this,arguments)}function b(){return b=u()(d()().mark(function a(i){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[i.logicId],type:"="},{dataIndex:"bizId",values:[i.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(s){var r=s.data.data.records;return r&&r.map(function(c){c.itemLogs&&(c.itemLogs=JSON.parse(c.itemLogs))}),r}));case 1:case"end":return n.stop()}},a)})),b.apply(this,arguments)}function Y(a){return B.apply(this,arguments)}function B(){return B=u()(d()().mark(function a(i){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[i],type:"="}],pageSize:1e3}).then(function(s){var r=s.data.data.records;return r&&r.length>0&&r[0].itemLogs&&(r[0].itemLogs=JSON.parse(r[0].itemLogs)),r[0]}));case 1:case"end":return n.stop()}},a)})),B.apply(this,arguments)}function W(a,i){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function a(i,o){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[i],type:"="},{dataIndex:"version",values:[o],type:"="}]}).then(function(r){var c=r.data.data.records[0].configJson,m=JSON.parse(c);return m}));case 1:case"end":return s.stop()}},a)})),C.apply(this,arguments)}function V(a,i){return e.apply(this,arguments)}function e(){return e=u()(d()().mark(function a(i,o){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,y.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[i],type:"="},{dataIndex:"version",values:[o],type:"="}]}).then(function(r){var c=r.data.data.records[0],m=c.configJson;return c.configJson=JSON.parse(m),c.configJson.id=c.id,c.configJson.name=c.name,c}));case 1:case"end":return s.stop()}},a)})),e.apply(this,arguments)}}}]);
