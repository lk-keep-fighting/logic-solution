"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2688],{2325:function(de,j,d){d.d(j,{C:function(){return L}});var L=new Map,v=50,E=50;L.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:E,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},21042:function(de,j,d){d.d(j,{m:function(){return M}});var L=d(5671),v=d(95812),E=d(57213),c=d.n(E),y=d(53914),f={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},s=d(33130),V=function(e){var n,r,a,t=e.node,o=(n=t.data.config)===null||n===void 0?void 0:n.name;return(0,s.jsx)("div",{className:f.customNode,children:(0,s.jsx)(y.Z,{addonBefore:o||"case",className:"input",value:t==null||(r=t.data)===null||r===void 0||(a=r.config)===null||a===void 0?void 0:a.case,width:150,onChange:function(g){var l=t.data;t.setData(c()(c()({},l),{},{config:c()(c()({},l.config),{},{case:g.target.value})}))}})})},Z=function(e){var n,r=e.node;return(0,s.jsx)("div",{className:f.customNode,children:(0,s.jsx)(y.Z,{addonBefore:"switch",className:"input",value:(n=r.data)===null||n===void 0?void 0:n.config.condition,onChange:function(t){var o=r.data;r.setData(c()(c()({},o),{},{config:c()(c()({},o.config),{},{condition:t.target.value})}))},width:100})})},X=function(e){return(0,s.jsx)("div",{className:f.customNode,children:(0,s.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})},N=d(54306),C=d.n(N),$=d(93525),G=d.n($),W=d(63466),le=d(21140),Y=d(52510),m=d(87363),D=d(39220),pe=d(28369),R=d(83805),K=d(15035),B=d(36342),Q={width:64,height:"100%",marginInlineEnd:8,verticalAlign:"top"},H=null,q=function(e){var n=pe.Z.useToken(),r=n.token,a=(0,m.useState)(e.cases||[]),t=C()(a,2),o=t[0],u=t[1],g=(0,m.useState)(!1),l=C()(g,2),h=l[0],w=l[1],ie=(0,m.useState)(""),I=C()(ie,2),x=I[0],A=I[1],be=(0,m.useState)(-1),ge=C()(be,2),fe=ge[0],ve=ge[1],we=(0,m.useState)(""),he=C()(we,2),se=he[0],ue=he[1],me=(0,m.useRef)(null),_e=(0,m.useRef)(null),ce=function(_){if(e.onChange){debugger;e.onChange(_)}};(0,m.useEffect)(function(){u(e.cases||[])},[e.cases]),(0,m.useEffect)(function(){if(h){var p;(p=me.current)===null||p===void 0||p.focus()}},[h]),(0,m.useEffect)(function(){var p;(p=_e.current)===null||p===void 0||p.focus()},[se]);var Ce=function(_){var U=o.filter(function(F){return F!==_});console.log(U),ce(U)},Se=function(){w(!0)},Ie=function(_){A(_.target.value)},ye=function(){x&&!o.includes(x)&&ce([].concat(G()(o),[x])),w(!1),A("")},Le=function(_){ue(_.target.value)},xe=function(){var _=G()(o);_[fe]=se,ce(_),ve(-1),ue("")},je={height:"100%",background:r.colorBgContainer,borderStyle:"dashed"};return(0,s.jsxs)(R.Z,{gap:"4px 0",wrap:!0,vertical:!0,children:[o.map(function(p,_){if(fe===_)return(0,s.jsx)(y.Z,{ref:_e,size:"small",style:Q,value:se,onChange:Le,onBlur:xe,onPressEnter:xe},p);var U=p.length>20,F=(0,s.jsx)(K.Z,{closable:e.editable,style:{userSelect:"none"},onClose:function(){return Ce(p)},children:(0,s.jsx)("span",{onDoubleClick:function(Ne){_!==0&&(ve(_),ue(p),Ne.preventDefault())},children:U?"".concat(p.slice(0,20),"..."):p})},p);return U?(0,s.jsx)(B.Z,{title:p,children:F},p):F}),h?(0,s.jsx)(y.Z,{ref:me,type:"text",value:x,onChange:Ie,onBlur:ye,onPressEnter:ye}):e.editable&&(0,s.jsx)(K.Z,{style:je,icon:(0,s.jsx)(D.Z,{}),onClick:Se})]})},k=q,ee=function(e){var n,r,a,t,o,u=e.node,g=(n=u.data.config)===null||n===void 0?void 0:n.name,l=(0,m.useState)(u==null||(r=u.data)===null||r===void 0||(a=r.config)===null||a===void 0?void 0:a.cases),h=C()(l,2),w=h[0],ie=h[1];return(0,m.useEffect)(function(){var I,x;ie(u==null||(I=u.data)===null||I===void 0||(x=I.config)===null||x===void 0?void 0:x.cases)},[u==null||(t=u.data)===null||t===void 0||(o=t.config)===null||o===void 0?void 0:o.cases]),(0,s.jsxs)("div",{className:f.customNode,children:[g||"cases",(0,s.jsx)(k,{className:"input",cases:w,editable:e.node.data.selected,width:150,onChange:function(x){var A=u.data;u.setData(c()(c()({},A),{},{config:c()(c()({},A.config),{},{cases:x})}))}})]})},S=d(14494),ne=function(e){var n,r,a=e.node,t=(n=a.data)===null||n===void 0?void 0:n.config.memo;return(0,s.jsx)(S.Z,{content:t?(0,s.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:t}):"",trigger:"click",mouseLeaveDelay:0,children:(0,s.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"white",border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center"},children:((r=a.data)===null||r===void 0?void 0:r.config.name)||"\u5F00\u59CB"})})},z=function(e){var n,r,a=e.node,t=(n=a.data.config)===null||n===void 0?void 0:n.memo;return(0,s.jsx)(S.Z,{content:t?(0,s.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:t}):"",trigger:"click",mouseLeaveDelay:0,children:(0,s.jsx)("div",{style:{fontSize:"12px",width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"white",border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center"},children:((r=a.data)===null||r===void 0?void 0:r.label)||"\u4EA4\u4E92\u70B9"})})},b=function(e){var n,r,a,t=e.node,o=(n=t.data.config)===null||n===void 0?void 0:n.name,u=(r=t.data.config)===null||r===void 0?void 0:r.type,g=(a=t.data.config)===null||a===void 0?void 0:a.memo,l=t.prop("imgSrc"),h=t.prop("text"),w=t.prop("backgroundColor");return(0,s.jsx)(S.Z,{content:g?(0,s.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:g}):"",trigger:"click",mouseLeaveDelay:0,children:(0,s.jsxs)("div",{className:f.customNode,style:{width:"100%",height:"100%",border:"1px solid #8f8f8f",borderRadius:"5px",position:"relative",overflow:"hidden",backgroundColor:w!=null&&w.includes("#")?w:""},children:[(0,s.jsx)("img",{src:l||"/logic/icons/".concat(u,".svg"),style:{width:20,height:20,position:"absolute",top:0,left:5,margin:0}}),(0,s.jsx)("div",{style:{marginTop:12,whiteSpace:"pre-wrap",padding:0,fontSize:"12px",wordWrap:"break-word",textAlign:"left",lineHeight:"1.2"},children:o||h})]})})},O=function(e){var n=e.node;return(0,s.jsx)(b,{node:n})},te=function(e){var n=e.node;return(0,s.jsx)(b,{node:n})},T=function(e){var n=e.node;return(0,s.jsx)(b,{node:n})},ae=function(e){var n=e.node;return(0,s.jsx)(b,{node:n})},P=function(e){var n=e.node;return(0,m.useEffect)(function(){n.prop("backgroundColor","#ffcc00")},[]),(0,s.jsx)(b,{node:n})},re=function(e){var n=e.node;return(0,m.useEffect)(function(){n.prop("backgroundColor","#87CEEB")},[]),(0,s.jsx)(b,{node:n})},J=function(e){var n=e.node;return(0,m.useEffect)(function(){n.prop("backgroundColor","#FFF8DC")},[]),(0,s.jsx)(b,{node:n})},oe=function(e){var n,r,a=e.node,t=(n=a.data.config)===null||n===void 0?void 0:n.name,o=(r=a.data.config)===null||r===void 0?void 0:r.memo,u=a.prop("imgSrc"),g=a.prop("text"),l=a.prop("backgroundColor");return(0,s.jsxs)(S.Z,{content:o?(0,s.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:o}):"",trigger:"click",mouseLeaveDelay:0,children:[(0,s.jsx)("div",{className:f.customNode,style:{width:"100%",height:"100%",border:"1px solid #8f8f8f",borderRadius:"5px",backgroundColor:l!=null&&l.includes("#")?l:"",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)("img",{src:u||"/logic/icons/delay.svg",style:{width:"30px",height:"30px",margin:0}})}),(0,s.jsx)("div",{style:{fontSize:"12px",marginTop:"1px",textAlign:"center"},children:g||"\u7B49\u5F85"})]})};function M(i){i.forEach(function(e){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+e.name),L.kJ.registerNode(e.name,e.config,!0)}),(0,v.z2)({shape:"start",component:ne}),(0,v.z2)({shape:"wait-for-continue",component:z}),(0,v.z2)({shape:"http",component:O}),(0,v.z2)({shape:"js",component:T}),(0,v.z2)({shape:"java",component:te}),(0,v.z2)({shape:"wait",component:oe}),(0,v.z2)({shape:"sub-logic",component:ae}),(0,v.z2)({shape:"ExtShape1",component:P}),(0,v.z2)({shape:"ExtShape2",component:re}),(0,v.z2)({shape:"ExtShape3",component:J}),(0,v.z2)({shape:"switch",component:Z}),(0,v.z2)({shape:"switch-case",component:V}),(0,v.z2)({shape:"switch-cases",component:ee}),(0,v.z2)({shape:"switch-default",component:X})}},48364:function(de,j,d){d.d(j,{Fx:function(){return oe},KX:function(){return m},L7:function(){return re},Sl:function(){return C},Uh:function(){return te},az:function(){return le},gC:function(){return q},m9:function(){return K},ni:function(){return Q},oX:function(){return ae},oc:function(){return b},qB:function(){return X},rE:function(){return ee},yi:function(){return ne}});var L=d(57213),v=d.n(L),E=d(25359),c=d.n(E),y=d(49811),f=d.n(y),s=d(57475),V=d(5726),Z=d.n(V);function X(i){return N.apply(this,arguments)}function N(){return N=f()(c()().mark(function i(e){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.U2)("/api/ide/logic/".concat(e)).then(function(a){var t,o=(t=a.data)===null||t===void 0?void 0:t.data;return o.configJson=JSON.parse(o.configJson),o}));case 1:case"end":return r.stop()}},i)})),N.apply(this,arguments)}function C(i,e){return $.apply(this,arguments)}function $(){return $=f()(c()().mark(function i(e,n){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.U2)("/api/ide/papi/".concat(e,"/api/ide/logic/").concat(n)).then(function(t){var o,u=(o=t.data)===null||o===void 0?void 0:o.data;return u.configJson=JSON.parse(u.configJson),u}));case 1:case"end":return a.stop()}},i)})),$.apply(this,arguments)}function G(i){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime().mark(function i(e){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",get("/api/ide/logic/".concat(e,"/config")).then(function(a){var t;return(t=a.data)===null||t===void 0?void 0:t.data}));case 1:case"end":return r.stop()}},i)})),W.apply(this,arguments)}function le(i,e,n){return Y.apply(this,arguments)}function Y(){return Y=f()(c()().mark(function i(e,n,r){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.gz)("/api/ide/logic/edit/".concat(e),{version:n,configJson:r,updateTime:Z()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return t.stop()}},i)})),Y.apply(this,arguments)}function m(i,e,n,r){return D.apply(this,arguments)}function D(){return D=f()(c()().mark(function i(e,n,r,a){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,s.gz)("/api/ide/papi/".concat(e,"/api/ide/logic/edit/").concat(n),{version:r,configJson:a,updateTime:Z()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return o.stop()}},i)})),D.apply(this,arguments)}function pe(i,e){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function i(e,n){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",get("/api/ide/logic-instance/".concat(e,"/").concat(n)).then(function(t){var o=t.data.data;return o}));case 1:case"end":return a.stop()}},i)})),R.apply(this,arguments)}function K(i){return B.apply(this,arguments)}function B(){return B=f()(c()().mark(function i(e){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.U2)("/api/ide/logic-instance/".concat(e)).then(function(a){var t=a.data.data;return t}));case 1:case"end":return r.stop()}},i)})),B.apply(this,arguments)}function Q(i,e){return H.apply(this,arguments)}function H(){return H=f()(c()().mark(function i(e,n){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.U2)("/api/ide/papi/".concat(e,"/api/ide/logic-instance/").concat(n)).then(function(t){var o=t.data.data;return o}));case 1:case"end":return a.stop()}},i)})),H.apply(this,arguments)}function q(i){return k.apply(this,arguments)}function k(){return k=f()(c()().mark(function i(e){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[e.logicId],type:"="},{dataIndex:"bizId",values:[e.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(a){var t=a.data.data.records;return t&&t.map(function(o){o.itemLogs&&(o.itemLogs=JSON.parse(o.itemLogs))}),t}));case 1:case"end":return r.stop()}},i)})),k.apply(this,arguments)}function ee(i,e){return S.apply(this,arguments)}function S(){return S=f()(c()().mark(function i(e,n){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-logs"),{filters:[{dataIndex:"logicId",values:[n.logicId],type:"="},{dataIndex:"bizId",values:[n.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(t){var o=t.data.data.records;return o&&o.map(function(u){u.itemLogs&&(u.itemLogs=JSON.parse(u.itemLogs))}),o}));case 1:case"end":return a.stop()}},i)})),S.apply(this,arguments)}function ne(i){return z.apply(this,arguments)}function z(){return z=f()(c()().mark(function i(e){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[e],type:"="}],pageSize:1e3}).then(function(a){var t=a.data.data.records;return t&&t.length>0&&t[0].itemLogs&&(t[0].itemLogs=JSON.parse(t[0].itemLogs)),t[0]}));case 1:case"end":return r.stop()}},i)})),z.apply(this,arguments)}function b(i,e){return O.apply(this,arguments)}function O(){return O=f()(c()().mark(function i(e,n){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-logs"),{filters:[{dataIndex:"id",values:[n],type:"="}],pageSize:1e3}).then(function(t){var o=t.data.data.records;return o&&o.length>0&&o[0].itemLogs&&(o[0].itemLogs=JSON.parse(o[0].itemLogs)),o[0]}));case 1:case"end":return a.stop()}},i)})),O.apply(this,arguments)}function te(i,e){return T.apply(this,arguments)}function T(){return T=f()(c()().mark(function i(e,n){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[e],type:"="},{dataIndex:"version",values:[n],type:"="}]}).then(function(t){var o=t.data.data.records[0],u=o.configJson;return o.configJson=JSON.parse(u),o.configJson.id=o.id,o.configJson.name=o.name,o}));case 1:case"end":return a.stop()}},i)})),T.apply(this,arguments)}function ae(i,e,n){return P.apply(this,arguments)}function P(){return P=f()(c()().mark(function i(e,n,r){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.v_)("/api/ide/papi/".concat(e,"/api/ide/logic-baks"),{filters:[{dataIndex:"id",values:[n],type:"="},{dataIndex:"version",values:[r],type:"="}]}).then(function(o){var u=o.data.data.records[0],g=u.configJson;return u.configJson=JSON.parse(g),u.configJson.id=u.id,u.configJson.name=u.name,u}));case 1:case"end":return t.stop()}},i)})),P.apply(this,arguments)}function re(i,e,n,r,a,t){return J.apply(this,arguments)}function J(){return J=f()(c()().mark(function i(e,n,r,a,t,o){var u;return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:u="",l.t0=t,l.next=l.t0==="biz"?4:6;break;case 4:return a?u="/api/runtime/logic/v1/biz/".concat(e,"/").concat(a,"/").concat(r,"?debug=true"):u="/api/runtime/logic/v1/run-biz/".concat(e,"/").concat(r,"?debug=true"),l.abrupt("break",8);case 6:return u="/api/runtime/logic/v1/run-api/".concat(e,"?debug=true"),l.abrupt("break",8);case 8:return l.abrupt("return",(0,s.v_)(u,n,{headers:v()({"Content-Type":"application/json"},o)}));case 9:case"end":return l.stop()}},i)})),J.apply(this,arguments)}function oe(i,e,n,r,a,t,o){return M.apply(this,arguments)}function M(){return M=f()(c()().mark(function i(e,n,r,a,t,o,u){var g;return c()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:g="",h.t0=o,h.next=h.t0==="biz"?4:6;break;case 4:return t?g="/api/runtime/logic/v1/biz/".concat(n,"/").concat(t,"/").concat(a,"?debug=true"):g="/api/runtime/logic/v1/run-biz/".concat(n,"/").concat(a,"?debug=true"),h.abrupt("break",8);case 6:return g="/api/runtime/logic/v1/run-api/".concat(n,"?debug=true"),h.abrupt("break",8);case 8:return g="/api/ide/papi/".concat(e)+g,h.abrupt("return",(0,s.v_)(g,r,{headers:v()({"Content-Type":"application/json"},u)}));case 10:case"end":return h.stop()}},i)})),M.apply(this,arguments)}}}]);
