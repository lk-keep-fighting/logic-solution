"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[7241],{14868:function(V,p,l){l.r(p),l.d(p,{ColorControl:function(){return _},default:function(){return N}});var i=l(15767),D=l(87363),o=l.n(D),f=l(61533),B=l.n(f),d=l(78185),v=l(70484),s=l(74583),k=l(39620),_=function(E){(0,i.ZT)(a,E);function a(t){var e=E.call(this,t)||this;return e.state={isOpened:!1,isFocused:!1,inputValue:e.props.value||"",tempValue:e.props.value||""},e.open=e.open.bind(e),e.close=e.close.bind(e),e.focus=e.focus.bind(e),e.blur=e.blur.bind(e),e.handleChange=e.handleChange.bind(e),e.handleTempChange=e.handleTempChange.bind(e),e.handleConfirm=e.handleConfirm.bind(e),e.handleFocus=e.handleFocus.bind(e),e.handleBlur=e.handleBlur.bind(e),e.clearValue=e.clearValue.bind(e),e.handleInputChange=e.handleInputChange.bind(e),e.handleClick=e.handleClick.bind(e),e.preview=o().createRef(),e.input=o().createRef(),e}return a.prototype.componentDidUpdate=function(t){var e=this.props;t.value!==e.value&&this.setState({inputValue:e.value||""})},a.prototype.handleFocus=function(){this.setState({isFocused:!0})},a.prototype.handleBlur=function(){this.setState({isFocused:!1,inputValue:this.props.value})},a.prototype.focus=function(){this.input.current&&this.input.current.focus()},a.prototype.blur=function(){this.input.current&&this.input.current.blur()},a.prototype.open=function(t){this.props.disabled||this.setState({isOpened:!0},t)},a.prototype.close=function(){this.setState({isOpened:!1})},a.prototype.clearValue=function(){var t=this.props,e=t.onChange,r=t.resetValue;e(r||"")},a.prototype.handleClick=function(){this.state.isOpened?this.close():this.open(this.focus)},a.prototype.handleInputChange=function(t){var e=this;if(this.props.allowCustomColor){var r=this.props.onChange;this.setState({inputValue:t.currentTarget.value},function(){var c=e.validateColor(e.state.inputValue);c&&r(e.state.inputValue)})}},a.prototype.validateColor=function(t){if(t===""||t==="inherit"||t==="transparent")return!1;var e=document.createElement("img");return e.style.color="rgb(0, 0, 0)",e.style.color=t,e.style.color!=="rgb(0, 0, 0)"?!0:(e.style.color="rgb(255, 255, 255)",e.style.color=t,e.style.color!=="rgb(255, 255, 255)")},a.prototype.handleChange=function(t){var e=this.props,r=e.onChange,c=e.format;r(c==="rgba"?"rgba(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,", ").concat(t.rgb.a,")"):c==="rgb"?"rgb(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,")"):c==="hsl"?"hsl(".concat(Math.round(t.hsl.h),", ").concat(Math.round(t.hsl.s*100),"%, ").concat(Math.round(t.hsl.l*100),"%)"):t.hex)},a.prototype.handleTempChange=function(t){var e=this.state.tempValue,r=this.props.format;r==="rgba"?e="rgba(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,", ").concat(t.rgb.a,")"):r==="rgb"?e="rgb(".concat(t.rgb.r,", ").concat(t.rgb.g,", ").concat(t.rgb.b,")"):r==="hsl"?e="hsl(".concat(Math.round(t.hsl.h),", ").concat(Math.round(t.hsl.s*100),"%, ").concat(Math.round(t.hsl.l*100),"%)"):e=t.hex,this.setState({tempValue:e})},a.prototype.handleConfirm=function(){var t=this.props.onChange,e=this.state.tempValue;t(e),this.close()},a.prototype.render=function(){var t=this,e=this.props,r=e.classPrefix,c=e.className,A=e.popoverClassName,C=e.value,I=e.placeholder,g=e.disabled,y=e.popOverContainer,O=e.format,T=e.clearable,U=e.placement,u=e.classnames,h=e.presetColors,P=e.allowCustomColor,m=e.mobileUI,w=this.props.translate,b=this.state.isOpened,x=this.state.isFocused,M=this.state.tempValue;return o().createElement("div",{className:u("ColorPicker",{"is-disabled":g,"is-focused":x,"is-opened":b},c)},o().createElement("span",{onClick:this.handleClick,className:u("ColorPicker-preview")},o().createElement("i",{ref:this.preview,className:"".concat(r,"ColorPicker-previewIcon"),style:{background:this.state.inputValue||"#ccc"}})),o().createElement("input",{ref:this.input,type:"text",autoComplete:"off",size:10,className:u("ColorPicker-input"),value:this.state.inputValue||"",placeholder:w(I),disabled:g,onChange:this.handleInputChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,readOnly:m}),T&&!g&&C?o().createElement("a",{onClick:this.clearValue,className:u("ColorPicker-clear")},o().createElement(v.JO,{icon:"input-clear",className:"icon"})):null,o().createElement("span",{className:u("ColorPicker-arrow")},o().createElement(v.JO,{icon:"right-arrow-bold",className:"icon",onClick:this.handleClick})),!m&&b?o().createElement(s.aVW,{placement:U||"auto",target:function(){return(0,f.findDOMNode)(t)},onHide:this.close,container:y||function(){return(0,f.findDOMNode)(t)},rootClose:!1,show:!0},o().createElement(s.v$m,{classPrefix:r,className:u("ColorPicker-popover",A),onHide:this.close,overlay:!0},P?o().createElement(d.xS,{styles:{},disableAlpha:!!~["rgb","hex"].indexOf(O),color:C,presetColors:h,onChangeComplete:this.handleChange}):o().createElement(d.Lf,{color:C,colors:Array.isArray(h)?h.filter(function(n){return typeof n=="string"||(0,s.Kn2)(n)}).map(function(n){return typeof n=="string"?n:(0,s.Kn2)(n)?n==null?void 0:n.color:n}):void 0,onChangeComplete:this.handleChange}))):null,m&&o().createElement(k.Z,{className:u("".concat(r,"ColorPicker-popup")),container:y,isShow:b,onHide:this.handleClick,showConfirm:!0,onConfirm:this.handleConfirm},P?o().createElement(d.xS,{styles:{},disableAlpha:!!~["rgb","hex"].indexOf(O),color:M,presetColors:h,onChangeComplete:this.handleTempChange}):o().createElement(d.Lf,{color:M,colors:Array.isArray(h)?h.filter(function(n){return typeof n=="string"||(0,s.Kn2)(n)}).map(function(n){return typeof n=="string"?n:(0,s.Kn2)(n)?n==null?void 0:n.color:n}):void 0,onChangeComplete:this.handleTempChange})))},a.defaultProps={format:"hex",clearable:!0,placeholder:"ColorPicker.placeholder",allowCustomColor:!0},(0,i.gn)([s.NjZ,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[String]),(0,i.w6)("design:returntype",void 0)],a.prototype,"validateColor",null),a}(o().PureComponent),N=(0,s.YYN)((0,s.eAU)((0,s.nmi)(_,{value:"onChange"})))},71180:function(V,p){function l(i){return i===void 0}p.Z=l}}]);
