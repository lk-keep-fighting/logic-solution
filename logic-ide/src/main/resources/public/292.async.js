"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[292],{2325:function(le,E,d){d.d(E,{C:function(){return j}});var j=new Map,h=50,N=50;j.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:N,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},38821:function(le,E,d){d.d(E,{m:function(){return s}});var j=d(5671),h=d(95812),N=d(57213),c=d.n(N),y=d(53914),v={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},i=d(33130),X=function(r){var e,n,t,a=r.node,u=(e=a.data.config)===null||e===void 0?void 0:e.name;return(0,i.jsx)("div",{className:v.customNode,children:(0,i.jsx)(y.Z,{addonBefore:u||"case",className:"input",value:a==null||(n=a.data)===null||n===void 0||(t=n.config)===null||t===void 0?void 0:t.case,width:150,onChange:function(f){var p=a.data;a.setData(c()(c()({},p),{},{config:c()(c()({},p.config),{},{case:f.target.value})}))}})})},W=function(r){var e,n=r.node;return(0,i.jsx)("div",{className:v.customNode,children:(0,i.jsx)(y.Z,{addonBefore:"switch",className:"input",value:(e=n.data)===null||e===void 0?void 0:e.config.condition,onChange:function(a){var u=n.data;n.setData(c()(c()({},u),{},{config:c()(c()({},u.config),{},{condition:a.target.value})}))},width:100})})},G=function(r){return(0,i.jsx)("div",{className:v.customNode,children:(0,i.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})},$=d(54306),S=d.n($),D=d(93525),Q=d.n(D),Y=d(63466),pe=d(21140),K=d(52510),m=d(87363),R=d(39220),ge=d(28369),k=d(83805),H=d(15035),B=d(36342),q={width:64,height:"100%",marginInlineEnd:8,verticalAlign:"top"},F=null,ee=function(r){var e=ge.Z.useToken(),n=e.token,t=(0,m.useState)(r.cases||[]),a=S()(t,2),u=a[0],l=a[1],f=(0,m.useState)(!1),p=S()(f,2),I=p[0],C=p[1],se=(0,m.useState)(""),L=S()(se,2),x=L[0],U=L[1],we=(0,m.useState)(-1),fe=S()(we,2),ve=fe[0],he=fe[1],Ce=(0,m.useState)(""),me=S()(Ce,2),ue=me[0],ce=me[1],_e=(0,m.useRef)(null),ye=(0,m.useRef)(null),de=function(_){if(r.onChange){debugger;r.onChange(_)}};(0,m.useEffect)(function(){l(r.cases||[])},[r.cases]),(0,m.useEffect)(function(){if(I){var g;(g=_e.current)===null||g===void 0||g.focus()}},[I]),(0,m.useEffect)(function(){var g;(g=ye.current)===null||g===void 0||g.focus()},[ue]);var Se=function(_){var Z=u.filter(function(V){return V!==_});console.log(Z),de(Z)},Ie=function(){C(!0)},Le=function(_){U(_.target.value)},xe=function(){x&&!u.includes(x)&&de([].concat(Q()(u),[x])),C(!1),U("")},je=function(_){ce(_.target.value)},be=function(){var _=Q()(u);_[ve]=ue,de(_),he(-1),ce("")},Ee={height:"100%",background:n.colorBgContainer,borderStyle:"dashed"};return(0,i.jsxs)(k.Z,{gap:"4px 0",wrap:!0,vertical:!0,children:[u.map(function(g,_){if(ve===_)return(0,i.jsx)(y.Z,{ref:ye,size:"small",style:q,value:ue,onChange:je,onBlur:be,onPressEnter:be},g);var Z=g.length>20,V=(0,i.jsx)(H.Z,{closable:r.editable,style:{userSelect:"none"},onClose:function(){return Se(g)},children:(0,i.jsx)("span",{onDoubleClick:function($e){_!==0&&(he(_),ce(g),$e.preventDefault())},children:Z?"".concat(g.slice(0,20),"..."):g})},g);return Z?(0,i.jsx)(B.Z,{title:g,children:V},g):V}),I?(0,i.jsx)(y.Z,{ref:_e,type:"text",value:x,onChange:Le,onBlur:xe,onPressEnter:xe}):r.editable&&(0,i.jsx)(H.Z,{style:Ee,icon:(0,i.jsx)(R.Z,{}),onClick:Ie})]})},z=ee,ne=function(r){var e,n,t,a,u,l=r.node,f=(e=l.data.config)===null||e===void 0?void 0:e.name,p=(0,m.useState)(l==null||(n=l.data)===null||n===void 0||(t=n.config)===null||t===void 0?void 0:t.cases),I=S()(p,2),C=I[0],se=I[1];return(0,m.useEffect)(function(){var L,x;se(l==null||(L=l.data)===null||L===void 0||(x=L.config)===null||x===void 0?void 0:x.cases)},[l==null||(a=l.data)===null||a===void 0||(u=a.config)===null||u===void 0?void 0:u.cases]),(0,i.jsxs)("div",{className:v.customNode,children:[f||"cases",(0,i.jsx)(z,{className:"input",cases:C,editable:r.node.data.selected,width:150,onChange:function(x){var U=l.data;l.setData(c()(c()({},U),{},{config:c()(c()({},U.config),{},{cases:x})}))}})]})},b=d(14494),te=function(r){var e,n,t=r.node,a=(e=t.data)===null||e===void 0?void 0:e.config.memo;return(0,i.jsx)(b.Z,{content:a?(0,i.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:a}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"white",border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center"},children:((n=t.data)===null||n===void 0?void 0:n.config.name)||"\u5F00\u59CB"})})},O=function(r){var e,n,t=r.node,a=(e=t.data.config)===null||e===void 0?void 0:e.memo;return(0,i.jsx)(b.Z,{content:a?(0,i.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:a}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{style:{fontSize:"12px",width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"white",border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center"},children:((n=t.data)===null||n===void 0?void 0:n.config.name)||"\u4EA4\u4E92\u70B9"})})},w=function(r){var e,n,t,a=r.node,u=(e=a.data.config)===null||e===void 0?void 0:e.name,l=(n=a.data.config)===null||n===void 0?void 0:n.type,f=(t=a.data.config)===null||t===void 0?void 0:t.memo,p=a.prop("imgSrc"),I=a.prop("text"),C=a.prop("backgroundColor");return(0,i.jsx)(b.Z,{content:f?(0,i.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:f}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsxs)("div",{className:v.customNode,style:{width:"100%",height:"100%",border:"1px solid #8f8f8f",borderRadius:"5px",position:"relative",overflow:"hidden",backgroundColor:C!=null&&C.includes("#")?C:""},children:[(0,i.jsx)("img",{src:p||"/logic/icons/".concat(l,".svg"),style:{width:20,height:20,position:"absolute",top:0,left:5,margin:0}}),(0,i.jsx)("div",{style:{marginTop:12,whiteSpace:"pre-wrap",padding:0,fontSize:"12px",wordWrap:"break-word",textAlign:"left",lineHeight:"1.2"},children:u||I})]})})},P=function(r){var e=r.node;return(0,i.jsx)(w,{node:e})},ae=function(r){var e=r.node;return(0,i.jsx)(w,{node:e})},T=function(r){var e=r.node;return(0,i.jsx)(w,{node:e})},re=function(r){var e=r.node;return e.setProp("imgSrc","/logic/icons/CarbonSubflowLocal.svg"),e.setProp("text","\u590D\u7528\u903B\u8F91"),(0,i.jsx)(w,{node:e})},J=function(r){var e=r.node;return(0,m.useEffect)(function(){e.prop("backgroundColor","#ffcc00")},[]),(0,i.jsx)(w,{node:e})},oe=function(r){var e=r.node;return(0,m.useEffect)(function(){e.prop("backgroundColor","#87CEEB")},[]),(0,i.jsx)(w,{node:e})},M=function(r){var e=r.node;return(0,m.useEffect)(function(){e.prop("backgroundColor","#FFF8DC")},[]),(0,i.jsx)(w,{node:e})},ie=function(r){var e,n,t=r.node,a=(e=t.data.config)===null||e===void 0?void 0:e.name,u=(n=t.data.config)===null||n===void 0?void 0:n.memo,l=t.prop("imgSrc"),f=t.prop("text"),p=t.prop("backgroundColor");return(0,i.jsxs)(b.Z,{content:u?(0,i.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:u}):"",trigger:"click",mouseLeaveDelay:0,children:[(0,i.jsx)("div",{className:v.customNode,style:{width:"100%",height:"100%",border:"1px solid #8f8f8f",borderRadius:"5px",backgroundColor:p!=null&&p.includes("#")?p:"",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)("img",{src:l||"/logic/icons/delay.svg",style:{width:"30px",height:"30px",margin:0}})}),(0,i.jsx)("div",{style:{fontSize:"12px",marginTop:"1px",textAlign:"center"},children:f||"\u7B49\u5F85"})]})},A=function(r){var e,n,t=r.node,a=(e=t.data)===null||e===void 0?void 0:e.config.memo;return(0,i.jsx)(b.Z,{content:a?(0,i.jsx)(y.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:a}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"white",border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center"},children:((n=t.data)===null||n===void 0?void 0:n.config.name)||"\u7ED3\u675F"})})};function s(o){o.forEach(function(r){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+r.name),j.kJ.registerNode(r.name,r.config,!0)}),(0,h.z2)({shape:"start",component:te}),(0,h.z2)({shape:"end",component:A}),(0,h.z2)({shape:"wait-for-continue",component:O}),(0,h.z2)({shape:"http",component:P}),(0,h.z2)({shape:"js",component:T}),(0,h.z2)({shape:"java",component:ae}),(0,h.z2)({shape:"wait",component:ie}),(0,h.z2)({shape:"sub-logic",component:re}),(0,h.z2)({shape:"ExtShape1",component:J}),(0,h.z2)({shape:"ExtShape2",component:oe}),(0,h.z2)({shape:"ExtShape3",component:M}),(0,h.z2)({shape:"switch",component:W}),(0,h.z2)({shape:"switch-case",component:X}),(0,h.z2)({shape:"switch-cases",component:ne}),(0,h.z2)({shape:"switch-default",component:G})}},48364:function(le,E,d){d.d(E,{Fx:function(){return ie},KX:function(){return m},L7:function(){return oe},Sl:function(){return S},Uh:function(){return ae},az:function(){return pe},gC:function(){return ee},m9:function(){return H},ni:function(){return q},oX:function(){return re},oc:function(){return w},qB:function(){return G},rE:function(){return ne},yi:function(){return te}});var j=d(57213),h=d.n(j),N=d(25359),c=d.n(N),y=d(49811),v=d.n(y),i=d(57475),X=d(5726),W=d.n(X);function G(s){return $.apply(this,arguments)}function $(){return $=v()(c()().mark(function s(o){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.U2)("/api/ide/logic/".concat(o)).then(function(n){var t,a=(t=n.data)===null||t===void 0?void 0:t.data;return a.configJson=JSON.parse(a.configJson),a}));case 1:case"end":return e.stop()}},s)})),$.apply(this,arguments)}function S(s,o){return D.apply(this,arguments)}function D(){return D=v()(c()().mark(function s(o,r){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.U2)("/api/ide/papi/".concat(o,"/api/ide/logic/").concat(r)).then(function(t){var a,u=(a=t.data)===null||a===void 0?void 0:a.data;return u.configJson=JSON.parse(u.configJson),u}));case 1:case"end":return n.stop()}},s)})),D.apply(this,arguments)}function Q(s){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime().mark(function s(o){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",get("/api/ide/logic/".concat(o,"/config")).then(function(n){var t;return(t=n.data)===null||t===void 0?void 0:t.data}));case 1:case"end":return e.stop()}},s)})),Y.apply(this,arguments)}function pe(s,o,r){return K.apply(this,arguments)}function K(){return K=v()(c()().mark(function s(o,r,e){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.gz)("/api/ide/logic/edit/".concat(o),{version:r,configJson:e,updateTime:W()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return t.stop()}},s)})),K.apply(this,arguments)}function m(s,o,r,e){return R.apply(this,arguments)}function R(){return R=v()(c()().mark(function s(o,r,e,n){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.gz)("/api/ide/papi/".concat(o,"/api/ide/logic/edit/").concat(r),{version:e,configJson:n,updateTime:W()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return a.stop()}},s)})),R.apply(this,arguments)}function ge(s,o){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function s(o,r){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",get("/api/ide/logic-instance/".concat(o,"/").concat(r)).then(function(t){var a=t.data.data;return a}));case 1:case"end":return n.stop()}},s)})),k.apply(this,arguments)}function H(s){return B.apply(this,arguments)}function B(){return B=v()(c()().mark(function s(o){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.U2)("/api/ide/logic-instance/".concat(o)).then(function(n){var t=n.data.data;return t}));case 1:case"end":return e.stop()}},s)})),B.apply(this,arguments)}function q(s,o){return F.apply(this,arguments)}function F(){return F=v()(c()().mark(function s(o,r){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.U2)("/api/ide/papi/".concat(o,"/api/ide/logic-instance/").concat(r)).then(function(t){var a=t.data.data;return a}));case 1:case"end":return n.stop()}},s)})),F.apply(this,arguments)}function ee(s){return z.apply(this,arguments)}function z(){return z=v()(c()().mark(function s(o){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[o.logicId],type:"="},{dataIndex:"bizId",values:[o.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(n){var t=n.data.data.records;return t&&t.map(function(a){a.itemLogs&&(a.itemLogs=JSON.parse(a.itemLogs))}),t}));case 1:case"end":return e.stop()}},s)})),z.apply(this,arguments)}function ne(s,o){return b.apply(this,arguments)}function b(){return b=v()(c()().mark(function s(o,r){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.v_)("/api/ide/papi/".concat(o,"/api/ide/logic-logs"),{filters:[{dataIndex:"logicId",values:[r.logicId],type:"="},{dataIndex:"bizId",values:[r.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(t){var a=t.data.data.records;return a&&a.map(function(u){u.itemLogs&&(u.itemLogs=JSON.parse(u.itemLogs))}),a}));case 1:case"end":return n.stop()}},s)})),b.apply(this,arguments)}function te(s){return O.apply(this,arguments)}function O(){return O=v()(c()().mark(function s(o){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[o],type:"="}],pageSize:1e3}).then(function(n){var t=n.data.data.records;return t&&t.length>0&&t[0].itemLogs&&(t[0].itemLogs=JSON.parse(t[0].itemLogs)),t[0]}));case 1:case"end":return e.stop()}},s)})),O.apply(this,arguments)}function w(s,o){return P.apply(this,arguments)}function P(){return P=v()(c()().mark(function s(o,r){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.v_)("/api/ide/papi/".concat(o,"/api/ide/logic-logs"),{filters:[{dataIndex:"id",values:[r],type:"="}],pageSize:1e3}).then(function(t){var a=t.data.data.records;return a&&a.length>0&&a[0].itemLogs&&(a[0].itemLogs=JSON.parse(a[0].itemLogs)),a[0]}));case 1:case"end":return n.stop()}},s)})),P.apply(this,arguments)}function ae(s,o){return T.apply(this,arguments)}function T(){return T=v()(c()().mark(function s(o,r){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[o],type:"="},{dataIndex:"version",values:[r],type:"="}]}).then(function(t){var a=t.data.data.records[0],u=a.configJson;return a.configJson=JSON.parse(u),a.configJson.id=a.id,a.configJson.name=a.name,a}));case 1:case"end":return n.stop()}},s)})),T.apply(this,arguments)}function re(s,o,r){return J.apply(this,arguments)}function J(){return J=v()(c()().mark(function s(o,r,e){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.v_)("/api/ide/papi/".concat(o,"/api/ide/logic-baks"),{filters:[{dataIndex:"id",values:[r],type:"="},{dataIndex:"version",values:[e],type:"="}]}).then(function(a){var u=a.data.data.records[0],l=u.configJson;return u.configJson=JSON.parse(l),u.configJson.id=u.id,u.configJson.name=u.name,u}));case 1:case"end":return t.stop()}},s)})),J.apply(this,arguments)}function oe(s,o,r,e,n,t){return M.apply(this,arguments)}function M(){return M=v()(c()().mark(function s(o,r,e,n,t,a){var u;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:u="",f.t0=t,f.next=f.t0==="biz"?4:6;break;case 4:return n?u="/api/runtime/logic/v1/biz/".concat(o,"/").concat(n,"/").concat(e,"?debug=true"):u="/api/runtime/logic/v1/run-biz/".concat(o,"/").concat(e,"?debug=true"),f.abrupt("break",8);case 6:return u="/api/runtime/logic/v1/run-api/".concat(o,"?debug=true"),f.abrupt("break",8);case 8:return f.abrupt("return",(0,i.v_)(u,r,{headers:h()({"Content-Type":"application/json"},a)}));case 9:case"end":return f.stop()}},s)})),M.apply(this,arguments)}function ie(s,o,r,e,n,t,a){return A.apply(this,arguments)}function A(){return A=v()(c()().mark(function s(o,r,e,n,t,a,u){var l;return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:l="",p.t0=a,p.next=p.t0==="biz"?4:6;break;case 4:return t?l="/api/runtime/logic/v1/biz/".concat(r,"/").concat(t,"/").concat(n,"?debug=true"):l="/api/runtime/logic/v1/run-biz/".concat(r,"/").concat(n,"?debug=true"),p.abrupt("break",8);case 6:return l="/api/runtime/logic/v1/run-api/".concat(r,"?debug=true"),p.abrupt("break",8);case 8:return l="/api/ide/papi/".concat(o)+l,p.abrupt("return",(0,i.v_)(l,e,{headers:h()({"Content-Type":"application/json"},u)}));case 10:case"end":return p.stop()}},s)})),A.apply(this,arguments)}}}]);
