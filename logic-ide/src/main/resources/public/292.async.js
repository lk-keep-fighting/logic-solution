"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[292],{2325:function(le,D,l){l.d(D,{C:function(){return j}});var j=new Map,m=50,k=50;j.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:k,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},38821:function(le,D,l){l.d(D,{m:function(){return u}});var j=l(5671),m=l(95812),k=l(57213),c=l.n(k),w=l(14494),g=l(53914),h={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},i=l(33130),K=function(a){var e,n,t,r,s=a.node,p=(e=s.data.config)===null||e===void 0?void 0:e.name,d=(n=s.data.config)===null||n===void 0?void 0:n.memo;return(0,i.jsx)(w.Z,{content:d?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:d}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{className:h.customNode,children:(0,i.jsx)(g.Z,{addonBefore:p||"case",className:"input",value:s==null||(t=s.data)===null||t===void 0||(r=t.config)===null||r===void 0?void 0:r.case,width:150,onChange:function(x){var b=s.data;s.setData(c()(c()({},b),{},{config:c()(c()({},b.config),{},{case:x.target.value})}))}})})})},G=function(a){var e,n,t,r=a.node,s=r.data,p=((e=r.data.config)===null||e===void 0?void 0:e.name)||"switch",d=(n=s.config)===null||n===void 0?void 0:n.memo;return(0,i.jsx)(w.Z,{content:d?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:d}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{style:{padding:"0px"},children:(0,i.jsx)(g.Z,{addonBefore:p,className:"input",value:(t=r.data)===null||t===void 0?void 0:t.config.condition,onChange:function(x){r.setData(c()(c()({},s),{},{config:c()(c()({},s.config),{},{condition:x.target.value})}))},width:100})})})},R=function(a){var e,n=a.node,t=(e=n.data.config)===null||e===void 0?void 0:e.memo;return(0,i.jsx)(w.Z,{content:t?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:t}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{className:h.customNode,children:(0,i.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})})},Q=l(54306),C=l.n(Q),ge=l(93525),E=l.n(ge),pe=l(63466),H=l(21140),ve=l(52510),_=l(87363),q=l(39220),B=l(28369),ee=l(83805),$=l(15035),ne=l(36342),O={width:64,height:"100%",marginInlineEnd:8,verticalAlign:"top"},fe=null,z=function(a){var e=B.Z.useToken(),n=e.token,t=(0,_.useState)(a.cases||[]),r=C()(t,2),s=r[0],p=r[1],d=(0,_.useState)(!1),v=C()(d,2),x=v[0],b=v[1],F=(0,_.useState)(""),V=C()(F,2),N=V[0],L=V[1],I=(0,_.useState)(-1),W=C()(I,2),he=W[0],me=W[1],Ce=(0,_.useState)(""),_e=C()(Ce,2),ue=_e[0],ce=_e[1],ye=(0,_.useRef)(null),xe=(0,_.useRef)(null),de=function(y){if(a.onChange){debugger;a.onChange(y)}};(0,_.useEffect)(function(){p(a.cases||[])},[a.cases]),(0,_.useEffect)(function(){if(x){var f;(f=ye.current)===null||f===void 0||f.focus()}},[x]),(0,_.useEffect)(function(){var f;(f=xe.current)===null||f===void 0||f.focus()},[ue]);var Se=function(y){var Y=s.filter(function(X){return X!==y});console.log(Y),de(Y)},Le=function(){b(!0)},Ie=function(y){L(y.target.value)},be=function(){N&&!s.includes(N)&&de([].concat(E()(s),[N])),b(!1),L("")},je=function(y){ce(y.target.value)},we=function(){var y=E()(s);y[he]=ue,de(y),me(-1),ce("")},Ee={height:"100%",background:n.colorBgContainer,borderStyle:"dashed"};return(0,i.jsxs)(ee.Z,{gap:"4px 0",wrap:!0,vertical:!0,children:[s.map(function(f,y){if(he===y)return(0,i.jsx)(g.Z,{ref:xe,size:"small",style:O,value:ue,onChange:je,onBlur:we,onPressEnter:we},f);var Y=f.length>20,X=(0,i.jsx)($.Z,{closable:a.editable,style:{userSelect:"none"},onClose:function(){return Se(f)},children:(0,i.jsx)("span",{onDoubleClick:function(Ne){y!==0&&(me(y),ce(f),Ne.preventDefault())},children:Y?"".concat(f.slice(0,20),"..."):f})},f);return Y?(0,i.jsx)(ne.Z,{title:f,children:X},f):X}),x?(0,i.jsx)(g.Z,{ref:ye,type:"text",value:N,onChange:Ie,onBlur:be,onPressEnter:be}):a.editable&&(0,i.jsx)($.Z,{style:Ee,icon:(0,i.jsx)(q.Z,{}),onClick:Le})]})},te=z,T=function(a){var e,n,t,r,s,p,d=a.node,v=(e=d.data.config)===null||e===void 0?void 0:e.name,x=(n=d.data.config)===null||n===void 0?void 0:n.memo,b=(0,_.useState)(d==null||(t=d.data)===null||t===void 0||(r=t.config)===null||r===void 0?void 0:r.cases),F=C()(b,2),V=F[0],N=F[1];return(0,_.useEffect)(function(){var L,I;N(d==null||(L=d.data)===null||L===void 0||(I=L.config)===null||I===void 0?void 0:I.cases)},[d==null||(s=d.data)===null||s===void 0||(p=s.config)===null||p===void 0?void 0:p.cases]),(0,i.jsx)(w.Z,{content:x?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:x}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsxs)("div",{className:h.customNode,children:[v||"cases",(0,i.jsx)(te,{className:"input",cases:V,editable:a.node.data.selected,width:150,onChange:function(I){var W=d.data;d.setData(c()(c()({},W),{},{config:c()(c()({},W.config),{},{cases:I})}))}})]})})},ae=function(a){var e,n,t=a.node,r=(e=t.data)===null||e===void 0?void 0:e.config.memo;return(0,i.jsx)(w.Z,{content:r?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:r}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"white",border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center"},children:((n=t.data)===null||n===void 0?void 0:n.config.name)||"\u5F00\u59CB"})})},P=function(a){var e,n,t=a.node,r=(e=t.data.config)===null||e===void 0?void 0:e.memo;return(0,i.jsx)(w.Z,{content:r?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:r}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{style:{fontSize:"12px",width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"white",border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center"},children:((n=t.data)===null||n===void 0?void 0:n.config.name)||"\u4EA4\u4E92\u70B9"})})},S=function(a){var e,n,t,r=a.node,s=(e=r.data.config)===null||e===void 0?void 0:e.name,p=(n=r.data.config)===null||n===void 0?void 0:n.type,d=(t=r.data.config)===null||t===void 0?void 0:t.memo,v=r.prop("imgSrc"),x=r.prop("text"),b=r.prop("backgroundColor");return(0,i.jsx)(w.Z,{content:d?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:d}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsxs)("div",{className:h.customNode,style:{width:"100%",height:"100%",border:"1px solid #8f8f8f",borderRadius:"5px",position:"relative",overflow:"hidden",backgroundColor:b!=null&&b.includes("#")?b:""},children:[(0,i.jsx)("img",{src:v||"/logic/icons/".concat(p,".svg"),style:{width:20,height:20,position:"absolute",top:0,left:5,margin:0}}),(0,i.jsx)("div",{style:{marginTop:12,whiteSpace:"pre-wrap",padding:0,fontSize:"12px",wordWrap:"break-word",textAlign:"left",lineHeight:"1.2"},children:s||x})]})})},Z=function(a){var e=a.node;return(0,i.jsx)(S,{node:e})},re=function(a){var e=a.node;return(0,i.jsx)(S,{node:e})},J=function(a){var e=a.node;return(0,i.jsx)(S,{node:e})},oe=function(a){var e=a.node;return e.setProp("imgSrc","/logic/icons/CarbonSubflowLocal.svg"),e.setProp("text","\u590D\u7528\u903B\u8F91"),(0,i.jsx)(S,{node:e})},A=function(a){var e=a.node;return(0,_.useEffect)(function(){e.prop("backgroundColor","#ffcc00")},[]),(0,i.jsx)(S,{node:e})},ie=function(a){var e=a.node;return(0,_.useEffect)(function(){e.prop("backgroundColor","#87CEEB")},[]),(0,i.jsx)(S,{node:e})},M=function(a){var e=a.node;return(0,_.useEffect)(function(){e.prop("backgroundColor","#FFF8DC")},[]),(0,i.jsx)(S,{node:e})},se=function(a){var e,n,t=a.node,r=(e=t.data.config)===null||e===void 0?void 0:e.name,s=(n=t.data.config)===null||n===void 0?void 0:n.memo,p=t.prop("imgSrc"),d=t.prop("text"),v=t.prop("backgroundColor");return(0,i.jsxs)(w.Z,{content:s?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:s}):"",trigger:"click",mouseLeaveDelay:0,children:[(0,i.jsx)("div",{className:h.customNode,style:{width:"100%",height:"100%",border:"1px solid #8f8f8f",borderRadius:"5px",backgroundColor:v!=null&&v.includes("#")?v:"",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)("img",{src:p||"/logic/icons/delay.svg",style:{width:"30px",height:"30px",margin:0}})}),(0,i.jsx)("div",{style:{fontSize:"12px",marginTop:"1px",textAlign:"center"},children:d||"\u7B49\u5F85"})]})},U=function(a){var e,n,t=a.node,r=(e=t.data)===null||e===void 0?void 0:e.config.memo;return(0,i.jsx)(w.Z,{content:r?(0,i.jsx)(g.Z.TextArea,{style:{width:300,height:200},readOnly:!0,value:r}):"",trigger:"click",mouseLeaveDelay:0,children:(0,i.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:"white",border:"2px solid",display:"flex",alignItems:"center",justifyContent:"center"},children:((n=t.data)===null||n===void 0?void 0:n.config.name)||"\u7ED3\u675F"})})};function u(o){o.forEach(function(a){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+a.name),j.kJ.registerNode(a.name,a.config,!0)}),(0,m.z2)({shape:"start",component:ae}),(0,m.z2)({shape:"end",component:U}),(0,m.z2)({shape:"wait-for-continue",component:P}),(0,m.z2)({shape:"http",component:Z}),(0,m.z2)({shape:"js",component:J}),(0,m.z2)({shape:"java",component:re}),(0,m.z2)({shape:"wait",component:se}),(0,m.z2)({shape:"sub-logic",component:oe}),(0,m.z2)({shape:"ExtShape1",component:A}),(0,m.z2)({shape:"ExtShape2",component:ie}),(0,m.z2)({shape:"ExtShape3",component:M}),(0,m.z2)({shape:"switch",component:G}),(0,m.z2)({shape:"switch-case",component:K}),(0,m.z2)({shape:"switch-cases",component:T}),(0,m.z2)({shape:"switch-default",component:R})}},48364:function(le,D,l){l.d(D,{Fx:function(){return se},KX:function(){return ve},L7:function(){return ie},Qy:function(){return q},Sl:function(){return Q},Uh:function(){return re},az:function(){return pe},gC:function(){return fe},m9:function(){return ee},ni:function(){return ne},oX:function(){return oe},oc:function(){return S},qB:function(){return G},rE:function(){return te},yi:function(){return ae}});var j=l(57213),m=l.n(j),k=l(25359),c=l.n(k),w=l(49811),g=l.n(w),h=l(57475),i=l(5726),K=l.n(i);function G(u){return R.apply(this,arguments)}function R(){return R=g()(c()().mark(function u(o){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.U2)("/api/ide/logic/".concat(o)).then(function(n){var t,r=(t=n.data)===null||t===void 0?void 0:t.data;return r.configJson=JSON.parse(r.configJson),r}));case 1:case"end":return e.stop()}},u)})),R.apply(this,arguments)}function Q(u,o){return C.apply(this,arguments)}function C(){return C=g()(c()().mark(function u(o,a){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.U2)("/api/ide/papi/".concat(o,"/api/ide/logic/").concat(a)).then(function(t){var r,s=(r=t.data)===null||r===void 0?void 0:r.data;return s.configJson=JSON.parse(s.configJson),s}));case 1:case"end":return n.stop()}},u)})),C.apply(this,arguments)}function ge(u){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function u(o){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",get("/api/ide/logic/".concat(o,"/config")).then(function(n){var t;return(t=n.data)===null||t===void 0?void 0:t.data}));case 1:case"end":return e.stop()}},u)})),E.apply(this,arguments)}function pe(u,o,a){return H.apply(this,arguments)}function H(){return H=g()(c()().mark(function u(o,a,e){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.gz)("/api/ide/logic/edit/".concat(o),{version:a,configJson:e,updateTime:K()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return t.stop()}},u)})),H.apply(this,arguments)}function ve(u,o,a,e){return _.apply(this,arguments)}function _(){return _=g()(c()().mark(function u(o,a,e,n){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,h.gz)("/api/ide/papi/".concat(o,"/api/ide/logic/edit/").concat(a),{version:e,configJson:n,updateTime:K()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return r.stop()}},u)})),_.apply(this,arguments)}function q(u,o){return B.apply(this,arguments)}function B(){return B=g()(c()().mark(function u(o,a){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.U2)("/api/ide/logic-instance/".concat(o,"/").concat(a)).then(function(t){var r=t.data.data;return r}));case 1:case"end":return n.stop()}},u)})),B.apply(this,arguments)}function ee(u){return $.apply(this,arguments)}function $(){return $=g()(c()().mark(function u(o){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.U2)("/api/ide/logic-instance/".concat(o)).then(function(n){var t=n.data.data;return t}));case 1:case"end":return e.stop()}},u)})),$.apply(this,arguments)}function ne(u,o){return O.apply(this,arguments)}function O(){return O=g()(c()().mark(function u(o,a){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.U2)("/api/ide/papi/".concat(o,"/api/ide/logic-instance/").concat(a)).then(function(t){var r=t.data.data;return r}));case 1:case"end":return n.stop()}},u)})),O.apply(this,arguments)}function fe(u){return z.apply(this,arguments)}function z(){return z=g()(c()().mark(function u(o){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[o.logicId],type:"="},{dataIndex:"bizId",values:[o.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(n){var t=n.data.data.records;return t&&t.map(function(r){r.itemLogs&&(r.itemLogs=JSON.parse(r.itemLogs))}),t}));case 1:case"end":return e.stop()}},u)})),z.apply(this,arguments)}function te(u,o){return T.apply(this,arguments)}function T(){return T=g()(c()().mark(function u(o,a){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.v_)("/api/ide/papi/".concat(o,"/api/ide/logic-logs"),{filters:[{dataIndex:"logicId",values:[a.logicId],type:"="},{dataIndex:"bizId",values:[a.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(t){var r=t.data.data.records;return r&&r.map(function(s){s.itemLogs&&(s.itemLogs=JSON.parse(s.itemLogs))}),r}));case 1:case"end":return n.stop()}},u)})),T.apply(this,arguments)}function ae(u){return P.apply(this,arguments)}function P(){return P=g()(c()().mark(function u(o){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[o],type:"="}],pageSize:1e3}).then(function(n){var t=n.data.data.records;return t&&t.length>0&&t[0].itemLogs&&(t[0].itemLogs=JSON.parse(t[0].itemLogs)),t[0]}));case 1:case"end":return e.stop()}},u)})),P.apply(this,arguments)}function S(u,o){return Z.apply(this,arguments)}function Z(){return Z=g()(c()().mark(function u(o,a){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.v_)("/api/ide/papi/".concat(o,"/api/ide/logic-logs"),{filters:[{dataIndex:"id",values:[a],type:"="}],pageSize:1e3}).then(function(t){var r=t.data.data.records;return r&&r.length>0&&r[0].itemLogs&&(r[0].itemLogs=JSON.parse(r[0].itemLogs)),r[0]}));case 1:case"end":return n.stop()}},u)})),Z.apply(this,arguments)}function re(u,o){return J.apply(this,arguments)}function J(){return J=g()(c()().mark(function u(o,a){return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[o],type:"="},{dataIndex:"version",values:[a],type:"="}]}).then(function(t){var r=t.data.data.records[0],s=r.configJson;return r.configJson=JSON.parse(s),r.configJson.id=r.id,r.configJson.name=r.name,r}));case 1:case"end":return n.stop()}},u)})),J.apply(this,arguments)}function oe(u,o,a){return A.apply(this,arguments)}function A(){return A=g()(c()().mark(function u(o,a,e){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.v_)("/api/ide/papi/".concat(o,"/api/ide/logic-baks"),{filters:[{dataIndex:"id",values:[a],type:"="},{dataIndex:"version",values:[e],type:"="}]}).then(function(r){var s=r.data.data.records[0],p=s.configJson;return s.configJson=JSON.parse(p),s.configJson.id=s.id,s.configJson.name=s.name,s}));case 1:case"end":return t.stop()}},u)})),A.apply(this,arguments)}function ie(u,o,a,e,n,t){return M.apply(this,arguments)}function M(){return M=g()(c()().mark(function u(o,a,e,n,t,r){var s;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:s="",d.t0=t,d.next=d.t0==="biz"?4:6;break;case 4:return n?s="/api/runtime/logic/v1/biz/".concat(o,"/").concat(n,"/").concat(e,"?debug=true"):s="/api/runtime/logic/v1/run-biz/".concat(o,"/").concat(e,"?debug=true"),d.abrupt("break",8);case 6:return s="/api/runtime/logic/v1/run-api/".concat(o,"?debug=true"),d.abrupt("break",8);case 8:return d.abrupt("return",(0,h.v_)(s,a,{headers:m()({"Content-Type":"application/json"},r)}));case 9:case"end":return d.stop()}},u)})),M.apply(this,arguments)}function se(u,o,a,e,n,t,r){return U.apply(this,arguments)}function U(){return U=g()(c()().mark(function u(o,a,e,n,t,r,s){var p;return c()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:p="",v.t0=r,v.next=v.t0==="biz"?4:6;break;case 4:return t?p="/api/runtime/logic/v1/biz/".concat(a,"/").concat(t,"/").concat(n,"?debug=true"):p="/api/runtime/logic/v1/run-biz/".concat(a,"/").concat(n,"?debug=true"),v.abrupt("break",8);case 6:return p="/api/runtime/logic/v1/run-api/".concat(a,"?debug=true"),v.abrupt("break",8);case 8:return p="/api/ide/papi/".concat(o)+p,v.abrupt("return",(0,h.v_)(p,e,{headers:m()({"Content-Type":"application/json"},s)}));case 10:case"end":return v.stop()}},u)})),U.apply(this,arguments)}}}]);
