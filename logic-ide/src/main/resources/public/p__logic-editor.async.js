"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[874],{8049:function(le,N,i){i.d(N,{Z:function(){return A}});var H=i(56159),h=i(87363),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},I=a,Z=i(45288),b=function(T,C){return h.createElement(Z.Z,(0,H.Z)({},T,{ref:C,icon:I}))},A=h.forwardRef(b)},19435:function(le,N,i){i.d(N,{O:function(){return O},A:function(){return H.Z}});var H=i(28576),h=i(54306),a=i.n(h),I=i(8049),Z=i(14990),b=i(22465),A=i(5671),W=i(17696),T=i(19227),C=i(75476),k=i(1167),ee=i(22150),R=i(40767),j=i(38243),$=i(58856),z=i(22983),J=i(39092),D=i(75904),w=i(18725),s=i(87363),G=i.n(s),x=i(10486),Y=i(14232),v=i(37555),e=i(59998),t=i(72107),d=i(88287),l=i(23620),n=i(33130),F=G().createContext({logic:new t.Iz("")}),U=function(c){var E,f=(0,s.useState)(),B=a()(f,2),o=B[0],P=B[1],oe=(0,s.useState)(),Q=a()(oe,2),L=Q[0],re=Q[1],te=(0,s.useState)(!1),ne=a()(te,2),m=ne[0],M=ne[1],_=(0,s.useState)(!0),ie=a()(_,2),V=ie[0],q=ie[1],ae=(0,s.useState)(),ue=a()(ae,2),se=ue[0],me=ue[1],be=(0,s.useState)(),ge=a()(be,2),p=ge[0],Ce=ge[1],$e=(0,s.useState)(),fe=a()($e,2),de=fe[0],Oe=fe[1],Ee=(0,s.useState)(),ve=a()(Ee,2),Ie=ve[0],he=ve[1],je=(0,s.useState)(),Se=a()(je,2),Pe=Se[0],Le=Se[1],xe=(0,s.useRef)(),pe=function(y){var g=y.node;he(g);var r=p==null?void 0:p.itemLogs.find(function(S){return S.config.id==g.id});me(r)};(0,s.useEffect)(function(){de&&(o==null||o.centerCell(de))},[de,o]),(0,s.useEffect)(function(){console.log("play curItemLog",se)},[se]),(0,s.useEffect)(function(){var u=o==null?void 0:o.getNodes().find(function(y){return y.id==c.nextId});u==null||u.attr("body/fill","red"),Oe(u)},[c.nextId]),(0,s.useEffect)(function(){var u;o==null||(u=o.getNodes().find(function(y){return y.id==c.nextId}))===null||u===void 0||u.attr("body/fill","red")},[o]),(0,s.useEffect)(function(){c.config&&re(c.config)},[c.config]),(0,s.useEffect)(function(){var u,y;console.log("props.debugLogs",c.debugLogs),((u=c.debugLogs)===null||u===void 0?void 0:u.length)>0&&setInterval(Ne,2e3);var g=[];c&&((y=c.debugLogs)===null||y===void 0||y.forEach(function(r){var S,X;g.push({children:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("span",{style:{cursor:"pointer",fontWeight:r.id==(p==null?void 0:p.id)?"bolder":"normal",color:r.id==(p==null?void 0:p.id)?"#52c41a":"black"},onClick:function(){Ce(r),console.log(r),o==null||o.fromJSON(L==null?void 0:L.visualConfig);var ye;r.itemLogs.forEach(function(Te){var ce=o==null?void 0:o.getNodes().find(function(Be){return Be.id==Te.config.id});ce&&(ce.attr("body/fill","#52c41a"),ye=ce)}),o==null||o.centerCell(ye),me({}),he({})},children:[(0,n.jsx)("p",{children:(S=r.itemLogs[0])===null||S===void 0?void 0:S.config.name}),((X=c.logicIns)===null||X===void 0?void 0:X.version)==r.version?(0,n.jsx)("p",{}):(0,n.jsx)("p",{children:(0,n.jsxs)(R.Z,{children:[(0,n.jsx)(j.Z.Paragraph,{style:{color:"red"},children:"\u7248\u672C\u53F7:"}),(0,n.jsxs)(j.Z.Paragraph,{copyable:{tooltips:["\u70B9\u51FB\u590D\u5236","\u590D\u5236\u6210\u529F!"],text:r.version},children:[r.version,(0,n.jsx)(j.Z.Link,{style:{margin:"5px"},href:"#/assets/logic/i/".concat(r.logicId,"/view/").concat(r.version),target:"_blank",children:(0,n.jsx)(I.Z,{})})]})]})}),(0,n.jsxs)("p",{children:["\u4E1A\u52A1\u6807\u8BC6\uFF1A",r.bizId]}),(0,n.jsx)("p",{children:r.serverTime}),(0,n.jsx)("p",{children:r.message})]})}),color:r.success?"green":"red"})})),Le(g)},[c.debugLogs,c.logicIns,o,p]),(0,s.useEffect)(function(){if(L){try{var u=(0,x.K)(),y=u.Shapes;(0,Y.m)(y)}catch(r){console.error("\u6CE8\u518C\u8282\u70B9\u51FA\u9519\uFF1A"),console.error(r)}var g=new A.kJ({container:xe.current,embedding:{enabled:!0,validate:function(S){return S.child.setData({hoverNode:S.parent}),!0}},mousewheel:{enabled:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:15}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,allowMulti:!0,snap:{radius:20},createEdge:function(){return new A.bn.kS({tools:[{name:"edge-editor",args:{attrs:{backgroundColor:"#fff"}}}],zIndex:0})},validateConnection:function(S){var X=S.targetMagnet;return!!X}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},background:{color:"#F2F7FA"},grid:!0});g.use(new k.H({enabled:!0,sharp:!0})).use(new W.A({enabled:!0})).use(new C.Y({enabled:!0,multiple:!0,strict:!0,rubberband:!0,movable:!0,showNodeSelectionBox:!0,pointerEvents:"none"})).use(new ee.T({enabled:!0})).use(new T.N),g.on("edge:dblclick",function(){}),g.on("edge:mouseenter",function(){}),g.on("edge:mouseleave",function(){}),g.on("node:moved",function(){}),g.on("node:mouseenter",function(){}),g.on("node:mouseleave",function(){}),g.on("node:added",function(){}),g.on("node:dblclick",function(r){var S=r.node;q(!1)}),g.on("blank:dblclick",function(r){var S=r.x,X=r.y}),g.fromJSON(L.visualConfig),(0,e.V)(g),P(g)}},[L]),(0,s.useEffect)(function(){o==null||o.off("node:click",pe),o==null||o.on("node:click",pe)},[p]);var Ne=function(){},Ae=[{key:"1",label:"\u65E5\u5FD7",children:(0,n.jsx)(l.gcu,{src:se})},{key:"2",label:"\u8282\u70B9\u914D\u7F6E",children:(0,n.jsx)(d.Z,{editNode:Ie,configSchemaProvider:c.configSchemaProvider})}];return(0,n.jsxs)($.Z,{style:{margin:0,height:"100vh"},children:[(0,n.jsxs)($.Z.Sider,{theme:"light",collapsedWidth:0,width:300,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0,borderRight:"0.5px solid"},children:[(0,n.jsx)(z.Z,{children:"\u72B6\u6001\u53D8\u66F4\u8BB0\u5F55"}),(0,n.jsx)(J.Z,{style:{height:"100%"},items:Pe})]}),(0,n.jsxs)($.Z,{style:{marginLeft:300},children:[(0,n.jsxs)($.Z.Header,{style:{backgroundColor:"white",padding:0},children:[(0,n.jsxs)(R.Z,{direction:"horizontal",style:{},children:[(0,n.jsx)(z.Z,{type:"vertical"}),(E=c.btns)===null||E===void 0?void 0:E.map(function(u){return u})]}),(0,n.jsx)(D.ZP,{type:"text",icon:V?(0,n.jsx)(Z.Z,{}):(0,n.jsx)(b.Z,{}),onClick:function(){q(!V)},style:{float:"right",right:"16px",fontSize:"16px",width:64,height:64}})]}),(0,n.jsx)($.Z.Content,{className:"app-content",children:(0,n.jsx)(v.Z,{ref:xe})})]}),(0,n.jsxs)($.Z.Sider,{theme:"light",collapsed:V,collapsedWidth:0,style:{overflow:"scroll"},title:"ddd",width:500,children:[(0,n.jsx)(D.ZP,{type:"text",onClick:function(){q(!V)},style:{float:"right",fontSize:"16px",width:64,height:64},children:"x"}),(0,n.jsx)(w.Z,{items:Ae,defaultActiveKey:"1"})]})]})},O=U},38882:function(le,N,i){i.r(N);var H=i(54306),h=i.n(H),a=i(19435),I=i(43702),Z=i(52615),b=i(87363),A=i.n(b),W=i(98306),T=i(48364),C=i(33130),k=function(){var R=(0,W.UO)(),j=R.id,$=(0,b.useState)(),z=h()($,2),J=z[0],D=z[1],w=(0,b.useState)(!1),s=h()(w,2),G=s[0],x=s[1],Y=(0,b.useCallback)(function(v){v.id=j,x(!0),D(v),(0,T.az)(v.id,v.version,JSON.stringify(v)).then(function(e){x(!1),I.ZP.success("\u4FDD\u5B58\u6210\u529F"),console.log("save logic"),console.log(v)}).catch(function(e){x(!1),console.log("err"),console.log(e),I.ZP.error("\u4FDD\u5B58\u5931\u8D25")})},[]);return(0,b.useEffect)(function(){x(!0),(0,T.YH)(j).then(function(v){var e=v;e.id=j,D(e),x(!1)}).catch(function(v){x(!1),console.log("err"),console.log(v)})},[]),(0,C.jsx)("div",{children:(0,C.jsx)(Z.Z,{spinning:G,children:(0,C.jsx)(a.A,{config:J,onSave:Y})})})};N.default=k},39092:function(le,N,i){i.d(N,{Z:function(){return v}});var H=i(3303),h=i.n(H),a=i(87363),I=i(35225),Z=function(e,t){var d={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(d[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(d[l[n]]=e[l[n]]);return d},A=e=>{var{prefixCls:t,className:d,color:l="blue",dot:n,pending:F=!1,position:U,label:O,children:K}=e,c=Z(e,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:E}=a.useContext(I.E_),f=E("timeline",t),B=h()(`${f}-item`,{[`${f}-item-pending`]:F},d),o=/blue|red|green|gray/.test(l||"")?void 0:l,P=h()(`${f}-item-head`,{[`${f}-item-head-custom`]:!!n,[`${f}-item-head-${l}`]:!o});return a.createElement("li",Object.assign({},c,{className:B}),O&&a.createElement("div",{className:`${f}-item-label`},O),a.createElement("div",{className:`${f}-item-tail`}),a.createElement("div",{className:P,style:{borderColor:o,color:o}},n),a.createElement("div",{className:`${f}-item-content`},K))},W=i(45074),T=i(11017),C=function(e,t){var d={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(d[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(d[l[n]]=e[l[n]]);return d},ee=e=>{var{prefixCls:t,className:d,pending:l=!1,children:n,items:F,rootClassName:U,reverse:O=!1,direction:K,hashId:c,pendingDot:E,mode:f=""}=e,B=C(e,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const o=(m,M)=>f==="alternate"?m==="right"?`${t}-item-right`:m==="left"?`${t}-item-left`:M%2===0?`${t}-item-left`:`${t}-item-right`:f==="left"?`${t}-item-left`:f==="right"?`${t}-item-right`:m==="right"?`${t}-item-right`:"",P=(0,W.Z)(F||[]),oe=typeof l=="boolean"?null:l;l&&P.push({pending:!!l,dot:E||a.createElement(T.Z,null),children:oe}),O&&P.reverse();const Q=P.length,L=`${t}-item-last`,re=P.filter(m=>!!m).map((m,M)=>{var _;const ie=M===Q-2?L:"",V=M===Q-1?L:"",{className:q}=m,ae=C(m,["className"]);return a.createElement(A,Object.assign({},ae,{className:h()([q,!O&&l?ie:V,o((_=m==null?void 0:m.position)!==null&&_!==void 0?_:"",M)]),key:(m==null?void 0:m.key)||M}))}),te=P.some(m=>!!(m!=null&&m.label)),ne=h()(t,{[`${t}-pending`]:!!l,[`${t}-reverse`]:!!O,[`${t}-${f}`]:!!f&&!te,[`${t}-label`]:te,[`${t}-rtl`]:K==="rtl"},d,U,c);return a.createElement("ul",Object.assign({},B,{className:ne}),re)},R=i(19875);function j(e,t){return e&&Array.isArray(e)?e:(0,R.Z)(t).map(d=>{var l,n;return Object.assign({children:(n=(l=d==null?void 0:d.props)===null||l===void 0?void 0:l.children)!==null&&n!==void 0?n:""},d.props)})}var $=j,z=i(90610),J=i(38202),D=i(13287);const w=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign({},(0,z.Wf)(e)),{margin:0,padding:0,listStyle:"none",[`${t}-item`]:{position:"relative",margin:0,paddingBottom:e.itemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.itemHeadSize,insetInlineStart:(e.itemHeadSize-e.tailWidth)/2,height:`calc(100% - ${e.itemHeadSize}px)`,borderInlineStart:`${e.tailWidth}px ${e.lineType} ${e.tailColor}`},"&-pending":{[`${t}-item-head`]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},[`${t}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:e.itemHeadSize,height:e.itemHeadSize,backgroundColor:e.dotBg,border:`${e.dotBorderWidth}px ${e.lineType} transparent`,borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:e.itemHeadSize/2,insetInlineStart:e.itemHeadSize/2,width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:-(e.fontSize*e.lineHeight-e.fontSize)+e.lineWidth,marginInlineStart:e.margin+e.itemHeadSize,marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${t}-item-tail`]:{display:"none"},[`> ${t}-item-content`]:{minHeight:e.controlHeightLG*1.2}}},[`&${t}-alternate,
        &${t}-right,
        &${t}-label`]:{[`${t}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:`-${e.marginXXS}px`,"&-custom":{marginInlineStart:e.tailWidth/2}},"&-left":{[`${t}-item-content`]:{insetInlineStart:`calc(50% - ${e.marginXXS}px)`,width:`calc(50% - ${e.marginSM}px)`,textAlign:"start"}},"&-right":{[`${t}-item-content`]:{width:`calc(50% - ${e.marginSM}px)`,margin:0,textAlign:"end"}}}},[`&${t}-right`]:{[`${t}-item-right`]:{[`${t}-item-tail,
            ${t}-item-head,
            ${t}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(e.itemHeadSize+e.tailWidth)/2}px)`},[`${t}-item-content`]:{width:`calc(100% - ${e.itemHeadSize+e.marginXS}px)`}}},[`&${t}-pending
        ${t}-item-last
        ${t}-item-tail`]:{display:"block",height:`calc(100% - ${e.margin}px)`,borderInlineStart:`${e.tailWidth}px dotted ${e.tailColor}`},[`&${t}-reverse
        ${t}-item-last
        ${t}-item-tail`]:{display:"none"},[`&${t}-reverse ${t}-item-pending`]:{[`${t}-item-tail`]:{insetBlockStart:e.margin,display:"block",height:`calc(100% - ${e.margin}px)`,borderInlineStart:`${e.tailWidth}px dotted ${e.tailColor}`},[`${t}-item-content`]:{minHeight:e.controlHeightLG*1.2}},[`&${t}-label`]:{[`${t}-item-label`]:{position:"absolute",insetBlockStart:-(e.fontSize*e.lineHeight-e.fontSize)+e.tailWidth,width:`calc(50% - ${e.marginSM}px)`,textAlign:"end"},[`${t}-item-right`]:{[`${t}-item-label`]:{insetInlineStart:`calc(50% + ${e.marginSM}px)`,width:`calc(50% - ${e.marginSM}px)`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${t}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}};var s=(0,J.Z)("Timeline",e=>{const t=(0,D.TS)(e,{itemHeadSize:10,customHeadPaddingVertical:e.paddingXXS,paddingInlineEnd:2});return[w(t)]},e=>({tailColor:e.colorSplit,tailWidth:e.lineWidthBold,dotBorderWidth:e.wireframe?e.lineWidthBold:e.lineWidth*3,dotBg:e.colorBgContainer,itemPaddingBottom:e.padding*1.25})),G=function(e,t){var d={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(d[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(d[l[n]]=e[l[n]]);return d};const x=e=>{const{getPrefixCls:t,direction:d,timeline:l}=a.useContext(I.E_),{prefixCls:n,children:F,items:U,className:O,style:K}=e,c=G(e,["prefixCls","children","items","className","style"]),E=t("timeline",n),[f,B]=s(E),o=$(U,F);return f(a.createElement(ee,Object.assign({},c,{className:h()(l==null?void 0:l.className,O),style:Object.assign(Object.assign({},l==null?void 0:l.style),K),prefixCls:E,direction:d,items:o,hashId:B})))};x.Item=A;var Y=x,v=Y}}]);
