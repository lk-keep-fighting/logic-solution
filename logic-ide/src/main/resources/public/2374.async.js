(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2374],{22374:function(B,x,v){"use strict";v.r(x),v.d(x,{CRUD2Renderer:function(){return ye},default:function(){return oe}});var r=v(15767),O=v(87363),C=v.n(O),W=v(61533),V=v.n(W),_=v(24465),Z=v.n(_),q=v(19334),H=v.n(q),ee=v(33886),z=v.n(ee),se=v(42950),de=v.n(se),c=v(42977),ue=v(12557),ce=v.n(ue),ne=v(94391),pe=v(69143),he=v.n(pe),fe=v(82691),ge=v.n(fe),ve=["selectedChange","columnSort","columnFilter","columnSearch","columnToggled","orderChange","rowClick","rowDbClick","rowMouseEnter","rowMouseLeave","selected"],oe=function(D){(0,r.ZT)(u,D);function u(t){var e=D.call(this,t)||this;e.stopingAutoRefresh=!1;var n=t.location,o=t.store,s=t.syncLocation,i=t.pageField,d=t.perPageField,a=t.parsePrimitiveQuery,l=e.getParseQueryOptions(t);e.mounted=!0,s&&n&&(n.query||n.search)?o.updateQuery((0,c.mB4)(n,l),void 0,i,d):s&&!n&&window.location.search&&o.updateQuery((0,c.mB4)(window.location,l),void 0,i,d),e.props.api&&e.props.store.updateData({items:[]});var f=t.mode,h=t.columns;return f==="table2"&&h&&o.updateColumns(h),e}return u.prototype.componentDidMount=function(){var t=this.props,e=t.store,n=t.pickerMode,o=t.loadType,s=t.loadDataOnce,i=t.maxLoadNum,d=o&&!s;if(d){var a=o==="more"?this.props.perPage||10:this.getPaginationPerPage();e.changePage(e.page,a)}else o||e.changePage(1,i||500);if(this.initQuery({}),n){var l=(0,c.v8S)(this.props);l&&e.setSelectedItems(l)}},u.prototype.componentDidUpdate=function(t){var e,n=this.props,o=t.store,s=n.parsePrimitiveQuery;t.columns!==n.columns&&o.updateColumns(n.columns);var i;this.props.pickerMode&&(0,c.RBK)(i=(0,c.v8S)(this.props),(0,c.v8S)(t))&&o.setSelectedItems(i);var d=!1;if(t.syncLocation&&t.location&&t.location.search!==n.location.search&&(o.updateQuery((0,c.mB4)(n.location,this.getParseQueryOptions(n)),void 0,n.pageField,n.perPageField),d=!!(n.api&&(0,c.RjM)(o.query,this.lastQuery,!1))),!d){if(t.api&&n.api&&(0,c.rMT)(t.api,n.api,o.fetchCtxOf(t.data,{pageField:t.pageField,perPageField:t.perPageField}),o.fetchCtxOf(n.data,{pageField:n.pageField,perPageField:n.perPageField})))d=!0;else if(!n.api&&(0,c.SSQ)(n.source)){var a=(0,c.OgC)(n.source,n.data,"| raw");(!this.lastData||this.lastData!==a)&&(o.initFromScope(n.data,n.source,{columns:(e=o.columns)!==null&&e!==void 0?e:n.columns}),this.lastData=a)}}d&&this.getData()},u.prototype.componentWillUnmount=function(){this.mounted=!1,clearTimeout(this.timer)},u.prototype.getPaginationPerPage=function(){var t=10,e=this.props,n=e.headerToolbar,o=e.footerToolbar;return(0,c.DLf)({headerToolbar:n,footerToolbar:o},function(s,i,d){i==="type"&&s==="pagination"&&!isNaN(d==null?void 0:d.perPage)&&(t=+d.perPage)}),t},u.prototype.getParseQueryOptions=function(t){var e,n=t.parsePrimitiveQuery,o={parsePrimitive:!!((0,c.Kn2)(n)?n!=null&&n.enable:n),primitiveTypes:(e=n==null?void 0:n.types)!==null&&e!==void 0?e:["boolean"]};return o},u.prototype.controlRef=function(t){for(;t&&t.getWrappedInstance;)t=t.getWrappedInstance();this.control=t},u.prototype.initQuery=function(t){var e=this.props,n=e.store,o=e.orderBy,s=e.orderDir,i=e.loadType,d={};o&&(d.orderBy=o,d.orderDir=s||"asc"),this.handleSearch({query:(0,r.pi)((0,r.pi)((0,r.pi)({},d),t),n.query),replaceQuery:this.props.initFetch!==!1,loadMore:i==="more",resetPage:!1}),n.setPristineQuery()},u.prototype.handleLoadMore=function(){var t=this.props,e=t.store,n=t.perPage,o=n===void 0?10:n;e.changePage(e.page+1,o),this.getData(void 0,void 0,void 0,!0)},u.prototype.handleSearch=function(t){var e,n,o=this.props,s=o.store,i=o.syncLocation,d=o.env,a=o.pageField,l=o.perPageField,f=o.parsePrimitiveQuery,h=this.getParseQueryOptions(this.props),y=t||{},p=y.query,g=y.resetQuery,m=y.replaceQuery,T=y.loadMore,P=y.resetPage;p=(0,r.pi)((0,r.pi)({},p),ce()((n=(e=p==null?void 0:p.__super)===null||e===void 0?void 0:e.diff)!==null&&n!==void 0?n:{},function(E){return E===void 0})),p=i?(0,c.J1H)((0,c.mUA)(p,void 0,!0)):p,f&&(p=(0,c.pa5)(p,h)),s.updateQuery(g?(0,r.pi)((0,r.pi)({},p),this.props.store.pristineQuery):p,i&&d&&d.updateLocation?function(E){return d.updateLocation(E,!0)}:void 0,a,l,m),P&&s.changePage(1),this.lastQuery=s.query,this.getData(void 0,void 0,void 0,T!=null?T:!1)},u.prototype.handleStopAutoRefresh=function(){this.timer&&clearTimeout(this.timer),this.stopingAutoRefresh=!0},u.prototype.handleStartAutoRefresh=function(){this.stopingAutoRefresh=!1,this.reload()},u.prototype.reloadTarget=function(t,e){},u.prototype.closeTarget=function(t){},u.prototype.updateQuery=function(t){t===void 0&&(t={}),this.props.store},u.prototype.getData=function(t,e,n,o){var s,i,d;return n===void 0&&(n=!1),(0,r.mG)(this,void 0,void 0,function(){var a,l,f,h,y,p,g,m,T,P,E,S,b,A,L,I,U,w,G,$,F,M,J,j;return(0,r.Jh)(this,function(Y){switch(Y.label){case 0:return a=this.props,l=a.store,f=a.api,h=a.messages,y=a.pageField,p=a.perPageField,g=a.interval,m=a.stopAutoRefreshWhen,T=a.silentPolling,P=a.syncLocation,E=a.syncResponse2Query,S=a.keepItemSelectionOnPageChange,b=a.stopAutoRefreshWhenModalIsOpen,A=a.pickerMode,L=a.env,I=a.loadType,U=a.loadDataOnce,w=a.source,G=a.columns,$=a.perPage,F=a.pullRefresh,!o&&S&&e&&!A&&(l.setSelectedItems([]),l.setUnSelectedItems([])),clearTimeout(this.timer),this.lastQuery=l.query,M=o!=null?o:I==="more",J=(0,c.nW9)(l.data,l.query),M&&$&&l.changePerPage($),(0,c.X1t)(f,J)?[4,l.fetchInitData(f,J,{successMessage:h&&h.fetchSuccess,errorMessage:h&&h.fetchFailed,autoAppend:!0,forceReload:n,loadDataOnce:U,source:w,silent:t,pageField:y,perPageField:p,loadDataMode:M,dataAppendTo:(F==null?void 0:F.dataAppendTo)||"bottom",syncResponse2Query:E,columns:(s=l.columns)!==null&&s!==void 0?s:G,isTable2:!0,minLoadingTime:F==null?void 0:F.minLoadingTime})]:[3,2];case 1:return j=Y.sent(),j!=null&&j.ok&&g&&!this.stopingAutoRefresh&&this.mounted&&(!m||!(m&&(0,c.fz_)(m,(0,c.nW9)(l.data,l.query))))&&(!b||!l.dialogOpen&&!(!((i=l==null?void 0:l.parentStore)===null||i===void 0)&&i.dialogOpen))&&(this.timer=setTimeout(this.getData.bind(this,T,void 0,!0),Math.max(g,1e3))),[3,3];case 2:w&&l.initFromScope(J,w,{columns:(d=l.columns)!==null&&d!==void 0?d:G}),Y.label=3;case 3:return[2,l.data]}})})},u.prototype.handleChangePage=function(t,e){var n,o=this.props,s=o.store,i=o.syncLocation,d=o.env,a=o.pageField,l=o.perPageField,f=o.autoJumpToTopOnPagerChange,h=(n={},n[a||"page"]=t,n);if(e&&(h[l||"perPage"]=e),s.updateQuery(h,i&&(d!=null&&d.updateLocation)?d.updateLocation:void 0,a,l),s.changePage(t,e),this.getData(),f&&this.control){(0,W.findDOMNode)(this.control).scrollIntoView();var y=window.scrollY;y&&window.scroll(0,y)}},u.prototype.handleSave=function(t,e,n,o,s,i){var d=this,a=this.props,l=a.store,f=a.quickSaveApi,h=a.quickSaveItemApi,y=a.primaryField,p=a.env,g=a.messages,m=a.reload;if(Array.isArray(t)){if(!(0,c.X1t)(f)){p&&p.alert("CRUD quickSaveApi is required");return}var T=(0,c.nW9)(l.data,{rows:t,rowsDiff:e,indexes:n,rowsOrigin:s});t.length&&t[0].hasOwnProperty(y||"id")&&(T.ids=t.map(function(S){return S[y||"id"]}).join(",")),o&&(T.unModifiedItems=o),l.saveRemote(f,T,{successMessage:g&&g.saveFailed,errorMessage:g&&g.saveSuccess}).then(function(){m&&d.reloadTarget((0,c.u22)(m,T),T),d.getData(void 0,void 0,!0)}).catch(function(){})}else{if(!(0,c.X1t)(h)){p&&p.alert("CRUD quickSaveItemApi is required!");return}var P=(0,c.nW9)(l.data,{item:t,modified:e,origin:s}),E=(0,c.nW9)(P,t);l.saveRemote(h,E).then(function(){m&&d.reloadTarget((0,c.u22)(m,P),P),d.getData(void 0,void 0,!0)}).catch(function(){i!=null&&i.resetOnFailed&&d.control.reset()})}},u.prototype.handleSaveOrder=function(t,e){var n=this,o=this.props,s=o.store,i=o.saveOrderApi,d=o.orderField,a=o.primaryField,l=o.env,f=o.reload;if(!i){l&&l.alert("CRUD saveOrderApi is required!");return}var h=(0,c.nW9)(s.data),y,p,g=[],m=a&&e[0]&&e[0].hasOwnProperty(a);if(m||(h.idMap={}),h.insertAfter={},e.forEach(function(b){if(~t.indexOf(b))if(y){var A=m?y[a]:e.indexOf(y);h.insertAfter[A]=h.insertAfter[A]||[],m||(h.idMap[A]=y),h.insertAfter[A].push(m?b[a]:b)}else g.push(b);else y=b,p=p||b}),p&&g.length){var T=m?p[a]:e.indexOf(p);m||(h.idMap[T]=p),h.insertBefore={},h.insertBefore[T]=g.map(function(b){return m?b[a]:b})}else if(g.length){var P=g[0],E=m?P[a]:e.indexOf(P);m||(h.idMap[E]=P),h.insertAfter[E]=g.slice(1).map(function(b){return m?b[a]:b})}if(d){var S=(s.page-1)*s.perPage||0;e=e.map(function(b,A){var L;return(0,c.ktx)(b,(L={},L[d]=S+A+1,L))})}h.rows=e.concat(),m&&(h.ids=e.map(function(b){return b[a]}).join(",")),m&&d&&(h.order=e.map(function(b){return H()(b,[a,d])})),(0,c.X1t)(i,h)&&s.saveRemote(i,h).then(function(){f&&n.reloadTarget((0,c.u22)(f,h),h),n.getData(void 0,void 0,!0)}).catch(function(){})},u.prototype.handleSelect=function(t,e){var n=this.props,o=n.store,s=n.keepItemSelectionOnPageChange,i=n.primaryField,d=n.multiple,a=n.pickerMode,l=n.onSelect,f=t,h=e;if((0,c.RBK)(o.selectedItemsAsArray,f)){if(s&&o.selectedItems.length){var y=o.selectedItems.concat(),p=o.unSelectedItems.concat();t.forEach(function(g){var m=z()(y,function(P){return P===g||P[i||"id"]&&P[i||"id"]==g[i||"id"]});~m?y[m]=g:y.push(g);var T=z()(p,function(P){return P===g||P[i||"id"]&&P[i||"id"]==g[i||"id"]});~T&&p.splice(T,1)}),e.forEach(function(g){var m=z()(p,function(P){return P===g||P[i||"id"]&&P[i||"id"]==g[i||"id"]}),T=z()(y,function(P){return P===g||P[i||"id"]&&P[i||"id"]==g[i||"id"]});~m?p[m]=g:p.push(g),!~m&&~T&&y.splice(T,1)}),f=y,h=p}a&&d===!1&&f.length>1&&h.push.apply(h,f.splice(0,f.length-1)),o.setSelectedItems(f),o.setUnSelectedItems(h),l&&l(f)}},u.prototype.handleQuerySearch=function(t,e){var n;e===void 0&&(e=!1);var o=this.props,s=o.store,i=o.syncLocation,d=o.env,a=o.pageField,l=o.perPageField;return s.updateQuery((0,r.pi)((0,r.pi)({},t),(n={},n[a||"page"]=1,n)),i&&d&&d.updateLocation?d.updateLocation:void 0,a,l),this.getData(void 0,void 0,e)},u.prototype.reload=function(t,e){return e?this.receive(e):this.getData(void 0,void 0,!0)},u.prototype.receive=function(t){return this.handleQuerySearch(t,!0)},u.prototype.doAction=function(t,e,n){if(n===void 0&&(n=!1),t.actionType&&["stopAutoRefresh","reload","search","startAutoRefresh","loadMore"].includes(t.actionType))return this["handle".concat(de()(t.actionType))](e)},u.prototype.handleAction=function(t,e,n,o,s){return o===void 0&&(o=!1),["stopAutoRefresh","reload","search","startAutoRefresh","loadMore"].includes(e.actionType)?this.doAction(e,n,o):this.props.onAction(t,e,n,o,s||this.context)},u.prototype.dispatchEvent=function(t,e,n,o){if(t==="selectedChange"&&this.control===n){var s=this.props.store;e.selectedItems=s.selectedItems.concat(),e.unSelectedItems=s.unSelectedItems.concat()}return this.props.dispatchEvent(t,e,n,o)},u.prototype.unSelectItem=function(t,e){var n=this.props.store,o=n.selectedItems.concat(),s=n.unSelectedItems.concat(),i=o.indexOf(t);~i&&s.push.apply(s,o.splice(i,1)),n.setSelectedItems(o),n.setUnSelectedItems(s)},u.prototype.clearSelection=function(){var t=this.props.store,e=t.selectedItems.concat(),n=t.unSelectedItems.concat();t.setSelectedItems([]),t.setUnSelectedItems(n.concat(e))},u.prototype.toggleAllColumns=function(t){var e=this.props.store;e.updateColumns(e.columns.map(function(n){return(0,r.pi)((0,r.pi)({},n),{toggled:t})}))},u.prototype.toggleToggle=function(t){var e=this.props.store,n=e.columns[t],o=n.toggled;e.updateColumns(e.columns.map(function(s,i){return(0,r.pi)((0,r.pi)({},s),{toggled:t===i?!o:s.toggled!==!1})}))},u.prototype.handlePullRefresh=function(){return(0,r.mG)(this,void 0,void 0,function(){var t,e,n,o;return(0,r.Jh)(this,function(s){switch(s.label){case 0:return t=this.props,e=t.dispatchEvent,n=t.data,[4,e("pullRefresh",n)];case 1:return o=s.sent(),o!=null&&o.prevented?[2]:(this.handleLoadMore(),[2])}})})},u.prototype.renderChild=function(t,e,n){n===void 0&&(n={});var o=this.props,s=o.render,i=o.store,d=o.primaryField,a=d===void 0?"id":d,l,f=i.selectedItems,h=i.unSelectedItems,y=i.items;/^filter/.test(t)?l=(0,c.nW9)((0,c.nW9)(i.filterData,i.getData(this.props.data)),{}):l=(0,c.nW9)(i.mergedData,{items:y.concat(),selectedItems:f.concat(),unSelectedItems:h.concat(),ids:f.map(function(g){return g.hasOwnProperty(a)?g[a]:null}).filter(function(g){return g}).join(",")});var p={activePage:i.page,lastPage:i.lastPage,perPage:i.perPage,total:i.total,onPageChange:this.handleChangePage,cols:i.columns,toggleAllColumns:this.toggleAllColumns,toggleToggle:this.toggleToggle,onQuery:this.handleQuerySearch};return e.type,s(t,e,(0,r.pi)((0,r.pi)({data:l},n),p))},u.prototype.renderToolbar=function(t,e){var n=this;return e?(e=[].concat(e),e.map(function(o,s){return n.renderChild("".concat(t,"/").concat(s),o,{key:s+""})})):null},u.prototype.renderFilter=function(t){var e=this;if(!t||Array.isArray(t)&&t.length===0)return null;var n=Array.isArray(t)?t:(0,c.Kn2)(t)&&t.type!=null?[t]:[];return n.length<1?null:n.map(function(o,s){return e.renderChild("filter/".concat(s),o,(0,r.pi)({key:s+"filter",data:e.props.store.filterData,onSubmit:function(i){return e.handleSearch({query:i,resetPage:!0})},onReset:function(i){var d={};Object.keys(i).forEach(function(a){return d[a]=""}),e.handleSearch({query:d,resetQuery:!0,replaceQuery:!0,resetPage:!0})}},e.props.mobileUI?{columnCount:1,mode:"normal",collapsible:!0,title:{type:"container",body:[{type:"icon",icon:"column-filter",className:"icon mr-2"},o.title||""]}}:{}))})},u.prototype.renderSelection=function(){var t=this,e=this.props,n=e.store,o=e.classnames,s=e.labelField,i=e.labelTpl,d=e.primaryField,a=e.translate,l=e.env;return n.selectedItems.length?C().createElement("div",{className:o("Crud-selection")},C().createElement("div",{className:o("Crud-selectionLabel")},a("CRUD.selected",{total:n.selectedItems.length})),n.selectedItems.map(function(f,h){return C().createElement("div",{key:h,className:o("Crud-value")},C().createElement("span",{"data-tooltip":a("delete"),"data-position":"bottom",className:o("Crud-valueIcon"),onClick:t.unSelectItem.bind(t,f,h)},"\xD7"),C().createElement("span",{className:o("Crud-valueLabel")},i?C().createElement(ne.Vtq,{html:(0,c.hXT)(i,f),filterHtml:l.filterHtml}):(0,c.E04)(f,s||"label")||(0,c.E04)(f,d||"id")))}),C().createElement("a",{onClick:this.clearSelection.bind(this),className:o("Crud-selectionClear")},a("clear"))):null},u.prototype.transformTable2cards=function(){for(var t,e=this.props,n=e.store,o=e.columns,s=e.card,i=e.mobileMode,d=[],a=i.fieldCount||4,l=[],f="",h=((t=n.columns)!==null&&t!==void 0?t:o)||[],y=0;y<h.length;y++){var p=h[y];if(he()(p))if(p.type==="operation")l.push.apply(l,(0,r.ev)([],(0,r.CR)((p==null?void 0:p.buttons)||[]),!1));else if(p.type==="button"&&p.name==="operation")l.push(p);else{if(!p.label&&p.title&&(p.label=p.title),p.type==="static-image"&&!f){f="${".concat(p.name,"}");continue}d.length<a&&(p.type==="static-image"&&p.title&&delete p.title,d.push(p))}}return d.length?{columnsCount:1,type:"cards",card:(0,r.pi)((0,r.pi)((0,r.pi)({},s),{body:d,actions:l}),f?{media:{type:"image",url:f,position:"right",className:""},mediaActionPosition:"outside"}:{})}:null},u.prototype.transMobileHeaderToolbar=function(t,e){var n=0,o={},s={},i=null;function d(a,l){Array.isArray(a)?a.forEach(function(f){return d(f,l)}):a&&typeof a=="object"&&(a.type==="button"?(n++,a.label==="\u65B0\u589E"&&(o=a,s=l)):a.type==="search-box"&&(i=a),(a.items||a.body)&&d(a.items||a.body,a))}t.forEach(function(a){d(a)}),n===1&&o&&(o.label="",o.icon="plus",o.className||(o.className=""),o.className+=" is-fixed-right-bottom",s&&(s.className||(s.className=""),s.className+=" is-fixed-right-bottom-wrapper")),i&&(n===0||n===1&&o)&&ge()(this.props.filterSchema)&&e()},u.prototype.render=function(){var t,e=this.props,n=e.columns,o=e.className,s=e.style,i=e.bodyClassName,d=e.filter,a=e.render,l=e.store,f=e.mode,h=f===void 0?"table2":f,y=e.syncLocation,p=e.children,g=e.bulkActions,m=e.pickerMode,T=e.selectable,P=e.multiple,E=e.valueField,S=e.primaryField,b=e.value,A=e.hideQuickSaveBtn,L=e.itemActions,I=e.classnames,U=e.keepItemSelectionOnPageChange,w=e.maxKeepItemSelectionLength,G=e.onEvent,$=e.onAction,F=e.popOverContainer,M=e.translate,J=e.onQuery,j=e.autoGenerateFilter,Y=e.onSelect,me=e.autoFillHeight,Pe=e.showSelection,re=e.headerToolbar,Te=e.footerToolbar,Ae=e.columnsTogglable,be=e.headerToolbarClassName,Ce=e.footerToolbarClassName,ae=e.id,N=e.testIdBuilder,Q=e.mobileMode,te=e.mobileUI,X=e.pullRefresh,Oe=(0,r._T)(e,["columns","className","style","bodyClassName","filter","render","store","mode","syncLocation","children","bulkActions","pickerMode","selectable","multiple","valueField","primaryField","value","hideQuickSaveBtn","itemActions","classnames","keepItemSelectionOnPageChange","maxKeepItemSelectionLength","onEvent","onAction","popOverContainer","translate","onQuery","autoGenerateFilter","onSelect","autoFillHeight","showSelection","headerToolbar","footerToolbar","columnsTogglable","headerToolbarClassName","footerToolbarClassName","id","testIdBuilder","mobileMode","mobileUI","pullRefresh"]),k,ie=!1,R=null;if(Q&&te&&h.includes("table")){var K=this.transformTable2cards();typeof Q=="string"&&Q==="cards"?K&&(R=K):typeof Q=="object"&&(R=(0,r.pi)((0,r.pi)((0,r.pi)({},K),Q),{card:(0,r.pi)((0,r.pi)({},K==null?void 0:K.card),Q.card)})),R&&this.transMobileHeaderToolbar(re,function(){ie=!0}),R&&!(X!=null&&X.disabled)&&(k=(0,r.pi)((0,r.pi)({normalText:M("pullRefresh.crud2NormalText"),pullingText:M("pullRefresh.crud2PullingText"),loosingText:M("pullRefresh.crud2LoosingText")},X),{disabled:!1}))}else k=X;var le=a("body",(0,r.pi)((0,r.pi)((0,r.pi)({},Oe),{onEvent:Z()(G,function(Fe,Ee){return!ve.includes(Ee)}),type:h,columns:h.startsWith("table")?l.columns||n:void 0,id:ae}),R),{key:"body",className:I("Crud2-body",i),ref:this.controlRef,autoGenerateFilter:!d&&j,autoFillHeight:me,checkAll:!1,selectable:!!(T!=null?T:m),itemActions:L,multiple:P,columnsTogglable:!1,selected:m||U?l.selectedItemsAsArray:void 0,keepItemSelectionOnPageChange:U,maxKeepItemSelectionLength:w,primaryField:S,testIdBuilder:N,items:l.data.items,query:l.query,orderBy:l.query.orderBy,orderDir:l.query.orderDir,popOverContainer:F,onSave:this.handleSave.bind(this),onSaveOrder:this.handleSaveOrder,onSearch:this.handleQuerySearch,onSort:this.handleQuerySearch,onSelect:this.handleSelect,onAction:this.handleAction,dispatchEvent:this.dispatchEvent,data:l.mergedData,loading:l.loading,host:this});return C().createElement("div",(0,r.pi)({className:I("Crud2",o,{"is-loading":l.loading,"is-mobile":te,"is-mobile-cards":Q==="cards"||(R==null?void 0:R.type)==="cards"}),style:s,"data-id":ae,"data-role":"container"},N==null?void 0:N.getTestId()),C().createElement("div",(0,r.pi)({className:I("Crud2-filter")},N==null?void 0:N.getChild("filter").getTestId()),this.renderFilter(d)),C().createElement("div",{className:I("Crud2-toolbar","Crud2-header-toolbar",be,{"is-sticky":ie})},this.renderToolbar("headerToolbar",re)),Pe&&U&&P!==!1?this.renderSelection():null,te&&k&&!k.disabled?C().createElement(ne.I8I,(0,r.pi)({},k,{translate:M,onRefresh:this.handlePullRefresh,direction:(t=k.gestureDirection)!==null&&t!==void 0?t:"up",loading:l.loading,completed:!l.loading&&l.lastPage>0&&l.page>=l.lastPage,completedText:l.total>0?void 0:""}),le):C().createElement(C().Fragment,null,le,C().createElement("div",{className:I("Crud2-toolbar","Crud2-footer-toolbar",Ce)},this.renderToolbar("footerToolbar",Te))))},u.propsList=["mode","syncLocation","value","multiple","valueField","pageField","perPageField","hideQuickSaveBtn","autoJumpToTopOnPagerChange","interval","silentPolling","stopAutoRefreshWhen","stopAutoRefreshWhenModalIsOpen","api","headerToolbar","footerToolbar","autoGenerateFilter","syncResponse2Query","keepItemSelectionOnPageChange","source","onChange","onInit","onSaved","onQuery","autoFillHeight","showSelection","headerToolbarClassName","footerToolbarClassName","primaryField","parsePrimitiveQuery","pullRefresh"],u.defaultProps={toolbarInline:!0,syncLocation:!0,hideQuickSaveBtn:!1,autoJumpToTopOnPagerChange:!0,silentPolling:!1,autoFillHeight:!1,showSelection:!0,primaryField:"id",parsePrimitiveQuery:!0,pullRefresh:{disabled:!1,showIcon:!0,showText:!0,iconType:"auto",color:"#777777",dataAppendTo:"bottom",gestureDirection:"up",minLoadingTime:0,contentText:{normalText:"\u70B9\u51FB\u52A0\u8F7D\u66F4\u591A",pullingText:"\u52A0\u8F7D\u4E2D...",loosingText:"\u91CA\u653E\u7ACB\u5373\u5237\u65B0",loadingText:"\u52A0\u8F7D\u4E2D...",successText:"\u52A0\u8F7D\u6210\u529F",completedText:"\u6CA1\u6709\u66F4\u591A\u6570\u636E\u4E86"}}},(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",void 0)],u.prototype,"getPaginationPerPage",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",void 0)],u.prototype,"controlRef",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Number,Number]),(0,r.w6)("design:returntype",void 0)],u.prototype,"handleChangePage",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Array,Array]),(0,r.w6)("design:returntype",void 0)],u.prototype,"handleSaveOrder",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Array,Array]),(0,r.w6)("design:returntype",void 0)],u.prototype,"handleSelect",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Boolean]),(0,r.w6)("design:returntype",void 0)],u.prototype,"handleQuerySearch",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Boolean]),(0,r.w6)("design:returntype",void 0)],u.prototype,"doAction",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Object,Boolean,Object]),(0,r.w6)("design:returntype",void 0)],u.prototype,"handleAction",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,C().Component,Object]),(0,r.w6)("design:returntype",void 0)],u.prototype,"dispatchEvent",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Boolean]),(0,r.w6)("design:returntype",void 0)],u.prototype,"toggleAllColumns",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Number]),(0,r.w6)("design:returntype",void 0)],u.prototype,"toggleToggle",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",Promise)],u.prototype,"handlePullRefresh",null),(0,r.gn)([c.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[String,Object,Object]),(0,r.w6)("design:returntype",void 0)],u.prototype,"renderChild",null),u}(C().Component),ye=function(D){(0,r.ZT)(u,D);function u(t,e){var n=D.call(this,t)||this,o=e;return o.registerComponent(n),n}return u.prototype.componentWillUnmount=function(){D.prototype.componentWillUnmount.call(this);var t=this.context;t.unRegisterComponent(this)},u.prototype.reload=function(t,e,n){return(0,r.mG)(this,void 0,void 0,function(){var o;return(0,r.Jh)(this,function(s){return o=this.context,t?[2,o.reload(e?"".concat(t,"?").concat((0,c.mUA)(e)):t,n)]:[2,D.prototype.reload.call(this,t,e)]})})},u.prototype.receive=function(t,e){return(0,r.mG)(this,void 0,void 0,function(){var n;return(0,r.Jh)(this,function(o){return n=this.context,e?[2,n.send(e,t)]:[2,D.prototype.receive.call(this,t)]})})},u.prototype.reloadTarget=function(t,e){var n=this.context;n.reload(t,e)},u.prototype.closeTarget=function(t){var e=this.context;e.close(t)},u.contextType=c.ZHe,u=(0,r.gn)([(0,c.Thl)({type:"crud2",storeType:c.qh2.name,isolateScope:!0}),(0,r.w6)("design:paramtypes",[Object,Object])],u),u}(oe)},2226:function(B){var x="Expected a function";function v(r){if(typeof r!="function")throw new TypeError(x);return function(){var O=arguments;switch(O.length){case 0:return!r.call(this);case 1:return!r.call(this,O[0]);case 2:return!r.call(this,O[0],O[1]);case 3:return!r.call(this,O[0],O[1],O[2])}return!r.apply(this,O)}}B.exports=v},24465:function(B,x,v){var r=v(5673),O=v(2226),C=v(12557);function W(V,_){return C(V,O(r(_)))}B.exports=W},12557:function(B,x,v){var r=v(75697),O=v(5673),C=v(32648),W=v(21699);function V(_,Z){if(_==null)return{};var q=r(W(_),function(H){return[H]});return Z=O(Z),C(_,q,function(H,ee){return Z(H,ee[0])})}B.exports=V}}]);
