"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5233],{44132:function(U,g,e){var b=e(54306),t=e.n(b),l=e(70517),m=e(90010),i=e.n(m),v=e(23620),D=e(2069),u=e(87363),a=e.n(u),o=e(70256),n=e(33358),d=e(49500),P=e(16123),M=e(78057),c=e(69078),r=e(98896),s=e(32126),f=e(31837),_=e(33130),E=function(R){var y=(0,u.useState)({type:"page"}),B=t()(y,2),x=B[0],S=B[1],J=(0,u.useState)(),w=t()(J,2),k=w[0],F=w[1],Z=(0,u.useState)(),W=t()(Z,2),N=W[0],$=W[1],L="cxd",K="zh-CN";return(0,u.useEffect)(function(){(0,r.m)(l.Z)},[]),(0,u.useEffect)(function(){R.pageId&&((0,o.UD)(R.pageId).then(function(A){S(A)}),(0,s.U)().then(function(A){F(JSON.parse(f.j.getEnv()))}))},[R.pageId]),(0,_.jsxs)("div",{children:[(0,_.jsx)(D.qR,{theme:L,position:"top-right",locale:K},"toast"),(0,_.jsx)(D.wx,{theme:L,locale:K},"alert"),(0,v.sYA)(x,{data:{envs:k}},{fetcher:function(O){var I=O.url,C=O.method,h=O.data,j=O.responseType,p=O.config,G=O.headers;return p=p||{},p.withCredentials=!0,j&&(p.responseType=j),p.cancelExecutor&&(p.cancelToken=new l.Z.CancelToken(p.cancelExecutor)),p.headers=G||{},p.headers.Authorization||(p.headers.Authorization="Bearer "+c.F.getTokenFormLocal()),C!=="post"&&C!=="put"&&C!=="patch"?(h&&(p.params=h),l.Z[C](I,p)):(h&&h instanceof FormData?(p.headers=p.headers||{},p.headers["Content-Type"]="multipart/form-data"):h&&typeof h!="string"&&!(h instanceof Blob)&&!(h instanceof ArrayBuffer)&&(h=JSON.stringify(h),p.headers=p.headers||{},p.headers["Content-Type"]="application/json"),l.Z[C](I,h,p))},isCancel:function(O){return l.Z.isCancel(O)},copy:function(O){i()(O),D.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:L,jumpTo:function(O,I){debugger;I.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+O,"_blank"):window.location.hash=O}})]})};g.Z=E},98896:function(U,g,e){e.d(g,{m:function(){return i}});var b=e(25359),t=e.n(b),l=e(49811),m=e.n(l);function i(D){return v.apply(this,arguments)}function v(){return v=m()(t()().mark(function D(u){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:u.interceptors.response.use(function(n){return console.log("axios response"),console.log(n),n&&n.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),n.data.error||(n.data.error={code:0}),n.data.code==500&&(n.data.error={code:500,message:n.data.msg}),n.data.data&&n.data.data.records&&(n.data.data.items=n.data.data.records),n):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(n.data),Promise.reject(new Error(n.data.message)))},function(n){if(console.log("\u6355\u6349axios error"),console.log(n),n.response&&n.response.data){var d,P=n.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((d=n.response.data.error)===null||d===void 0?void 0:d.code)==0&&(n.response.data.error.code=500),console.log(P),P}return Promise.reject(n)});case 1:case"end":return o.stop()}},D)})),v.apply(this,arguments)}},69078:function(U,g,e){e.d(g,{F:function(){return b}});var b={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(l){return localStorage.setItem("token",l)}}},78636:function(U,g,e){e.r(g);var b=e(54306),t=e.n(b),l=e(44132),m=e(38510),i=e(87363),v=e.n(i),D=e(33130),u=function(o){var n=(0,i.useState)({}),d=t()(n,2),P=d[0],M=d[1];return(0,i.useEffect)(function(){var c=new m.Z;c.getSettingIndexJson().then(function(r){c.getIndexJson().then(function(s){M(s)})})},[]),(0,D.jsx)(l.Z,{pageId:"index",data:P})};g.default=u},38510:function(U,g,e){e.d(g,{Z:function(){return P}});var b=e(25359),t=e.n(b),l=e(49811),m=e.n(l),i=e(21140),v=e.n(i),D=e(63466),u=e.n(D),a=e(31837),o=e(85002),n=e(57475),d=e(32126),P=function(){function M(){v()(this,M)}return u()(M,[{key:"initApp",value:function(){var c=m()(t()().mark(function s(){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,n.U2)("/setting/app.json");case 2:return _.abrupt("return",_.sent.data);case 3:case"end":return _.stop()}},s)}));function r(){return c.apply(this,arguments)}return r}()},{key:"getAppJson",value:function(){var c=m()(t()().mark(function s(f){return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(a.j.getModel()!="db"){E.next=4;break}return E.abrupt("return",o.Z.getAssetFromDb("app",f));case 4:return E.next=6,(0,n.U2)("/logic/setting/apps/".concat(f,".json"));case 6:return E.abrupt("return",E.sent.data);case 7:case"end":return E.stop()}},s)}));function r(s){return c.apply(this,arguments)}return r}()},{key:"getIndexJson",value:function(){var c=m()(t()().mark(function s(){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(a.j.getModel()!="db"){_.next=4;break}return _.abrupt("return",o.Z.getAssetFromDb("app","index"));case 4:return _.next=6,(0,n.U2)("/logic/setting/apps/index.json");case 6:return _.abrupt("return",_.sent.data);case 7:case"end":return _.stop()}},s)}));function r(){return c.apply(this,arguments)}return r}()},{key:"getSettingIndexJson",value:function(){var c=m()(t()().mark(function s(){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,d.U)();case 2:return _.abrupt("return",a.j);case 3:case"end":return _.stop()}},s)}));function r(){return c.apply(this,arguments)}return r}()}]),M}()},85002:function(U,g,e){e.d(g,{Z:function(){return o}});var b=e(25359),t=e.n(b),l=e(49811),m=e.n(l),i=e(21140),v=e.n(i),D=e(63466),u=e.n(D),a=e(57475),o=function(){function n(){v()(this,n)}return u()(n,null,[{key:"getAssetFromDb",value:function(){var d=m()(t()().mark(function M(c,r){var s;return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,a.U2)("/api/ide/settings/asset/".concat(c,"/").concat(r));case 2:return s=_.sent.data,_.abrupt("return",JSON.parse(s.data.config));case 4:case"end":return _.stop()}},M)}));function P(M,c){return d.apply(this,arguments)}return P}()},{key:"saveAssetToDb",value:function(){var d=m()(t()().mark(function M(c,r,s){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,a.v_)("/api/ide/settings/asset/".concat(c,"/").concat(r),s));case 1:case"end":return _.stop()}},M)}));function P(M,c,r){return d.apply(this,arguments)}return P}()}]),n}()},32126:function(U,g,e){e.d(g,{U:function(){return D}});var b=e(25359),t=e.n(b),l=e(49811),m=e.n(l),i=e(31837),v=e(57475);function D(){return u.apply(this,arguments)}function u(){return u=m()(t()().mark(function a(){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,v.U2)("/api/runtime/env").then(function(d){return d.data.data}).then(function(d){return i.j.setModel(d.UI_CONFIG_MODEL),i.j.setEnv(JSON.stringify(d)),i.j.setApiUrlPrefix(d.API_GATEWAY_PREFIX),i.j.setReryApi(d.CUSTOM_RETRY_URL),d}));case 1:case"end":return n.stop()}},a)})),u.apply(this,arguments)}},70256:function(U,g,e){e.d(g,{CD:function(){return o},UD:function(){return u},n4:function(){return d},wx:function(){return M}});var b=e(25359),t=e.n(b),l=e(49811),m=e.n(l),i=e(31837),v=e(85002),D=e(57475);function u(r){return a.apply(this,arguments)}function a(){return a=m()(t()().mark(function r(s){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(i.j.getModel()!="db"){_.next=4;break}return _.abrupt("return",v.Z.getAssetFromDb("page",s));case 4:return _.next=6,(0,D.U2)("/logic/setting/pages/".concat(s,".json"));case 6:return _.abrupt("return",_.sent.data);case 7:case"end":return _.stop()}},r)})),a.apply(this,arguments)}function o(r){return n.apply(this,arguments)}function n(){return n=m()(t()().mark(function r(s){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(i.j.getModel()!="db"){_.next=4;break}return _.abrupt("return",v.Z.getAssetFromDb("form",s));case 4:return _.next=6,(0,D.U2)("/logic/setting/forms/".concat(s,".json"));case 6:return _.abrupt("return",_.sent.data);case 7:case"end":return _.stop()}},r)})),n.apply(this,arguments)}function d(r,s){return P.apply(this,arguments)}function P(){return P=m()(t()().mark(function r(s,f){return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(i.j.getModel()!="db"){E.next=4;break}return E.abrupt("return",v.Z.getAssetFromDb(s,f));case 4:return E.next=6,(0,D.U2)("/logic/setting/".concat(s,"s/").concat(f,".json"));case 6:return E.abrupt("return",E.sent.data);case 7:case"end":return E.stop()}},r)})),P.apply(this,arguments)}function M(r,s,f){return c.apply(this,arguments)}function c(){return c=m()(t()().mark(function r(s,f,_){return t()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(i.j.getModel()!="db"){T.next=2;break}return T.abrupt("return",v.Z.saveAssetToDb(s,f,_));case 2:case"end":return T.stop()}},r)})),c.apply(this,arguments)}},57475:function(U,g,e){e.d(g,{U2:function(){return m},gz:function(){return i},v_:function(){return D}});var b=e(57213),t=e.n(b),l=e(70517);function m(a,o){return l.Z.get(a,u(o))}function i(a,o,n){return l.Z.put(a,o,u(n))}function v(a,o){return axios.delete(a,u(o))}function D(a,o,n){return l.Z.post(a,o,u(n))}function u(a){var o={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(o.Authorization="Bearer "+localStorage.getItem("token")),t()(t()({},a),{},{headers:t()(t()({},o),a==null?void 0:a.headers)})}},78057:function(){}}]);
