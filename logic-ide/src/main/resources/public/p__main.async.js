"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5233],{44132:function(U,b,e){var v=e(54306),s=e.n(v),i=e(70517),d=e(90010),g=e.n(d),f=e(23620),p=e(2069),m=e(87363),u=e.n(m),o=e(70256),n=e(33358),M=e(49500),E=e(16123),D=e(78057),l=e(69078),a=e(98896),t=e(33130),r=function(h){var T=(0,m.useState)({type:"page"}),w=s()(T,2),j=w[0],K=w[1],R="cxd",L="zh-CN";return(0,m.useEffect)(function(){(0,a.m)(i.Z)},[]),(0,m.useEffect)(function(){h.pageId&&(0,o.UD)(h.pageId).then(function(A){K(A)})},[h.pageId]),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.qR,{theme:R,position:"top-right",locale:L},"toast"),(0,t.jsx)(p.wx,{theme:R,locale:L},"alert"),(0,f.sYA)(j,{data:h.data},{fetcher:function(P){var I=P.url,C=P.method,O=P.data,B=P.responseType,c=P.config,W=P.headers;return c=c||{},c.withCredentials=!0,B&&(c.responseType=B),c.cancelExecutor&&(c.cancelToken=new i.Z.CancelToken(c.cancelExecutor)),c.headers=W||{},c.headers.Authorization||(c.headers.Authorization="Bearer "+l.F.getTokenFormLocal()),C!=="post"&&C!=="put"&&C!=="patch"?(O&&(c.params=O),i.Z[C](I,c)):(O&&O instanceof FormData?(c.headers=c.headers||{},c.headers["Content-Type"]="multipart/form-data"):O&&typeof O!="string"&&!(O instanceof Blob)&&!(O instanceof ArrayBuffer)&&(O=JSON.stringify(O),c.headers=c.headers||{},c.headers["Content-Type"]="application/json"),i.Z[C](I,O,c))},isCancel:function(P){return i.Z.isCancel(P)},copy:function(P){g()(P),p.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:R,jumpTo:function(P,I){debugger;I.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+P,"_blank"):window.location.hash=P}})]})};b.Z=r},98896:function(U,b,e){e.d(b,{m:function(){return g}});var v=e(25359),s=e.n(v),i=e(49811),d=e.n(i);function g(p){return f.apply(this,arguments)}function f(){return f=d()(s()().mark(function p(m){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:m.interceptors.response.use(function(n){return console.log("axios response"),console.log(n),n&&n.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),n.data.error||(n.data.error={code:0}),n.data.code==500&&(n.data.error={code:500,message:n.data.msg}),n.data.data&&n.data.data.records&&(n.data.data.items=n.data.data.records),n):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(n.data),Promise.reject(new Error(n.data.message)))},function(n){if(console.log("\u6355\u6349axios error"),console.log(n),n.response&&n.response.data){var M,E=n.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((M=n.response.data.error)===null||M===void 0?void 0:M.code)==0&&(n.response.data.error.code=500),console.log(E),E}return Promise.reject(n)});case 1:case"end":return o.stop()}},p)})),f.apply(this,arguments)}},69078:function(U,b,e){e.d(b,{F:function(){return v}});var v={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(i){return localStorage.setItem("token",i)}}},78636:function(U,b,e){e.r(b);var v=e(54306),s=e.n(v),i=e(44132),d=e(38510),g=e(87363),f=e.n(g),p=e(33130),m=function(o){var n=(0,g.useState)({}),M=s()(n,2),E=M[0],D=M[1];return(0,g.useEffect)(function(){var l=new d.Z;l.getSettingIndexJson().then(function(a){l.getIndexJson(a.setting).then(function(t){D(t)})})},[]),(0,p.jsx)(i.Z,{pageId:"index",data:E})};b.default=m},38510:function(U,b,e){e.d(b,{Z:function(){return M}});var v=e(25359),s=e.n(v),i=e(49811),d=e.n(i),g=e(21140),f=e.n(g),p=e(63466),m=e.n(p),u=e(31837),o=e(85002),n=e(57475),M=function(){function E(){f()(this,E)}return m()(E,[{key:"initApp",value:function(){var D=d()(s()().mark(function a(){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.U2)("/setting/app.json");case 2:return r.abrupt("return",r.sent.data);case 3:case"end":return r.stop()}},a)}));function l(){return D.apply(this,arguments)}return l}()},{key:"getAppJson",value:function(){var D=d()(s()().mark(function a(t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(u.j.getModel()!="db"){_.next=4;break}return _.abrupt("return",o.Z.getAssetFromDb("app",t));case 4:return _.next=6,(0,n.U2)("/setting/apps/".concat(t,".json"));case 6:return _.abrupt("return",_.sent.data);case 7:case"end":return _.stop()}},a)}));function l(a){return D.apply(this,arguments)}return l}()},{key:"getIndexJson",value:function(){var D=d()(s()().mark(function a(){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u.j.getModel()!="db"){r.next=4;break}return r.abrupt("return",o.Z.getAssetFromDb("app","index"));case 4:return r.next=6,(0,n.U2)("/setting/apps/index.json");case 6:return r.abrupt("return",r.sent.data);case 7:case"end":return r.stop()}},a)}));function l(){return D.apply(this,arguments)}return l}()},{key:"getSettingIndexJson",value:function(){var D=d()(s()().mark(function a(){var t;return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,n.U2)("/api/runtime/env");case 2:return t=_.sent.data,u.j.setModel(t.data.UI_CONFIG_MODEL),_.abrupt("return",u.j);case 5:case"end":return _.stop()}},a)}));function l(){return D.apply(this,arguments)}return l}()}]),E}()},85002:function(U,b,e){e.d(b,{Z:function(){return o}});var v=e(25359),s=e.n(v),i=e(49811),d=e.n(i),g=e(21140),f=e.n(g),p=e(63466),m=e.n(p),u=e(57475),o=function(){function n(){f()(this,n)}return m()(n,null,[{key:"getAssetFromDb",value:function(){var M=d()(s()().mark(function D(l,a){var t;return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,u.U2)("/api/ide/settings/asset/".concat(l,"/").concat(a));case 2:return t=_.sent.data,_.abrupt("return",JSON.parse(t.data.config));case 4:case"end":return _.stop()}},D)}));function E(D,l){return M.apply(this,arguments)}return E}()},{key:"saveAssetToDb",value:function(){var M=d()(s()().mark(function D(l,a,t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,u.v_)("/api/ide/settings/asset/".concat(l,"/").concat(a),t));case 1:case"end":return _.stop()}},D)}));function E(D,l,a){return M.apply(this,arguments)}return E}()}]),n}()},70256:function(U,b,e){e.d(b,{CD:function(){return o},UD:function(){return m},n4:function(){return M},wx:function(){return D}});var v=e(25359),s=e.n(v),i=e(49811),d=e.n(i),g=e(31837),f=e(85002),p=e(57475);function m(a){return u.apply(this,arguments)}function u(){return u=d()(s()().mark(function a(t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:debugger;if(g.j.getModel()!="db"){_.next=5;break}return _.abrupt("return",f.Z.getAssetFromDb("page",t));case 5:return _.next=7,(0,p.U2)("/setting/pages/".concat(t,".json"));case 7:return _.abrupt("return",_.sent.data);case 8:case"end":return _.stop()}},a)})),u.apply(this,arguments)}function o(a){return n.apply(this,arguments)}function n(){return n=d()(s()().mark(function a(t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(g.j.getModel()!="db"){_.next=4;break}return _.abrupt("return",f.Z.getAssetFromDb("form",t));case 4:return _.next=6,(0,p.U2)("/setting/forms/".concat(t,".json"));case 6:return _.abrupt("return",_.sent.data);case 7:case"end":return _.stop()}},a)})),n.apply(this,arguments)}function M(a,t){return E.apply(this,arguments)}function E(){return E=d()(s()().mark(function a(t,r){return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(g.j.getModel()!="db"){h.next=4;break}return h.abrupt("return",f.Z.getAssetFromDb(t,r));case 4:return h.next=6,(0,p.U2)("/setting/".concat(t,"s/").concat(r,".json"));case 6:return h.abrupt("return",h.sent.data);case 7:case"end":return h.stop()}},a)})),E.apply(this,arguments)}function D(a,t,r){return l.apply(this,arguments)}function l(){return l=d()(s()().mark(function a(t,r,_){return s()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(g.j.getModel()!="db"){T.next=2;break}return T.abrupt("return",f.Z.saveAssetToDb(t,r,_));case 2:case"end":return T.stop()}},a)})),l.apply(this,arguments)}},57475:function(U,b,e){e.d(b,{U2:function(){return d},v_:function(){return p}});var v=e(57213),s=e.n(v),i=e(70517);function d(u,o){return i.Z.get(u,m(o))}function g(u,o,n){return axios.put(u,o,m(n))}function f(u,o){return axios.delete(u,m(o))}function p(u,o,n){return i.Z.post(u,o,m(n))}function m(u){var o={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(o.Authorization=localStorage.getItem("token")),s()(s()({},u),{},{headers:s()(s()({},o),u==null?void 0:u.headers)})}},78057:function(){}}]);
