"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5233],{44132:function(T,E,e){var v=e(54306),a=e.n(v),i=e(70517),l=e(90010),d=e.n(l),O=e(23620),m=e(2069),f=e(87363),g=e.n(f),M=e(70256),p=e(33358),h=e(49500),c=e(16123),u=e(69078),r=e(33130);i.Z.interceptors.response.use(function(n){return console.log("axios response"),console.log(n),n&&n.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),n.data.error||(n.data.error={code:0}),n.data.code==500&&(n.data.error={code:500,message:n.data.msg}),n.data.data&&n.data.data.records&&(n.data.data.items=n.data.data.records),n):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(n.data),Promise.reject(new Error(n.data.message)))},function(n){if(console.log("\u6355\u6349axios error"),console.log(n),n.response&&n.response.data){var s,_=n.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((s=n.response.data.error)===null||s===void 0?void 0:s.code)==0&&(n.response.data.error.code=500),console.log(_),_}return Promise.reject(n)});var t=function(s){var _=(0,f.useState)({type:"page"}),b=a()(_,2),A=b[0],B=b[1],R="cxd",w="zh-CN";return(0,f.useEffect)(function(){s.pageId&&(0,M.UD)(s.pageId).then(function(U){B(U)})},[s.pageId]),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.qR,{theme:R,position:"top-right",locale:w},"toast"),(0,r.jsx)(m.wx,{theme:R,locale:w},"alert"),(0,O.sYA)(A,{data:s.data},{fetcher:function(D){var I=D.url,C=D.method,P=D.data,L=D.responseType,o=D.config,j=D.headers;return o=o||{},o.withCredentials=!0,L&&(o.responseType=L),o.cancelExecutor&&(o.cancelToken=new i.Z.CancelToken(o.cancelExecutor)),o.headers=j||{},o.headers.Authorization||(o.headers.Authorization="Bearer "+u.F.getTokenFormLocal()),C!=="post"&&C!=="put"&&C!=="patch"?(P&&(o.params=P),i.Z[C](I,o)):(P&&P instanceof FormData?(o.headers=o.headers||{},o.headers["Content-Type"]="multipart/form-data"):P&&typeof P!="string"&&!(P instanceof Blob)&&!(P instanceof ArrayBuffer)&&(P=JSON.stringify(P),o.headers=o.headers||{},o.headers["Content-Type"]="application/json"),i.Z[C](I,P,o))},isCancel:function(D){return i.Z.isCancel(D)},copy:function(D){d()(D),m.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:R,jumpTo:function(D,I){debugger;I.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+D,"_blank"):window.location.hash=D}})]})};E.Z=t},69078:function(T,E,e){e.d(E,{F:function(){return v}});var v={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(i){return localStorage.setItem("token",i)}}},78636:function(T,E,e){e.r(E);var v=e(54306),a=e.n(v),i=e(44132),l=e(38510),d=e(87363),O=e.n(d),m=e(33130),f=function(M){var p=(0,d.useState)({}),h=a()(p,2),c=h[0],u=h[1];return(0,d.useEffect)(function(){var r=new l.Z;r.getSettingIndexJson().then(function(t){r.getIndexJson(t.setting).then(function(n){u(n)})})},[]),(0,m.jsx)(i.Z,{pageId:"index",data:c})};E.default=f},38510:function(T,E,e){e.d(E,{Z:function(){return h}});var v=e(25359),a=e.n(v),i=e(49811),l=e.n(i),d=e(21140),O=e.n(d),m=e(63466),f=e.n(m),g=e(70517),M=e(31837),p=e(85002),h=function(){function c(){O()(this,c)}return f()(c,[{key:"initApp",value:function(){var u=l()(a()().mark(function t(){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,g.Z.get("/setting/app.json");case 2:return s.abrupt("return",s.sent.data);case 3:case"end":return s.stop()}},t)}));function r(){return u.apply(this,arguments)}return r}()},{key:"getAppJson",value:function(){var u=l()(a()().mark(function t(n){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(M.j.getModel()!="db"){_.next=4;break}return _.abrupt("return",p.Z.getAssetFromDb("app",n));case 4:return _.next=6,g.Z.get("/setting/apps/".concat(n,".json"));case 6:return _.abrupt("return",_.sent.data);case 7:case"end":return _.stop()}},t)}));function r(t){return u.apply(this,arguments)}return r}()},{key:"getIndexJson",value:function(){var u=l()(a()().mark(function t(){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(M.j.getModel()!="db"){s.next=4;break}return s.abrupt("return",p.Z.getAssetFromDb("app","index"));case 4:return s.next=6,g.Z.get("/setting/apps/index.json");case 6:return s.abrupt("return",s.sent.data);case 7:case"end":return s.stop()}},t)}));function r(){return u.apply(this,arguments)}return r}()},{key:"getSettingIndexJson",value:function(){var u=l()(a()().mark(function t(){var n;return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,g.Z.get("/api/runtime/env");case 2:return n=_.sent.data,M.j.setModel(n.data.UI_CONFIG_MODEL),_.abrupt("return",M.j);case 5:case"end":return _.stop()}},t)}));function r(){return u.apply(this,arguments)}return r}()}]),c}()},85002:function(T,E,e){e.d(E,{Z:function(){return M}});var v=e(25359),a=e.n(v),i=e(49811),l=e.n(i),d=e(21140),O=e.n(d),m=e(63466),f=e.n(m),g=e(70517),M=function(){function p(){O()(this,p)}return f()(p,null,[{key:"getAssetFromDb",value:function(){var h=l()(a()().mark(function u(r,t){var n;return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,g.Z.get("/api/ide/settings/asset/".concat(r,"/").concat(t));case 2:return n=_.sent.data,_.abrupt("return",JSON.parse(n.data.config));case 4:case"end":return _.stop()}},u)}));function c(u,r){return h.apply(this,arguments)}return c}()},{key:"saveAssetToDb",value:function(){var h=l()(a()().mark(function u(r,t,n){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",g.Z.post("/api/ide/settings/asset/".concat(r,"/").concat(t),n));case 1:case"end":return _.stop()}},u)}));function c(u,r,t){return h.apply(this,arguments)}return c}()}]),p}()},70256:function(T,E,e){e.d(E,{CD:function(){return M},UD:function(){return f},n4:function(){return h},wx:function(){return u}});var v=e(25359),a=e.n(v),i=e(49811),l=e.n(i),d=e(31837),O=e(70517),m=e(85002);function f(t){return g.apply(this,arguments)}function g(){return g=l()(a()().mark(function t(n){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:debugger;if(d.j.getModel()!="db"){_.next=5;break}return _.abrupt("return",m.Z.getAssetFromDb("page",n));case 5:return _.next=7,O.Z.get("/setting/pages/".concat(n,".json"));case 7:return _.abrupt("return",_.sent.data);case 8:case"end":return _.stop()}},t)})),g.apply(this,arguments)}function M(t){return p.apply(this,arguments)}function p(){return p=l()(a()().mark(function t(n){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(d.j.getModel()!="db"){_.next=4;break}return _.abrupt("return",m.Z.getAssetFromDb("form",n));case 4:return _.next=6,O.Z.get("/setting/forms/".concat(n,".json"));case 6:return _.abrupt("return",_.sent.data);case 7:case"end":return _.stop()}},t)})),p.apply(this,arguments)}function h(t,n){return c.apply(this,arguments)}function c(){return c=l()(a()().mark(function t(n,s){return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d.j.getModel()!="db"){b.next=4;break}return b.abrupt("return",m.Z.getAssetFromDb(n,s));case 4:return b.next=6,O.Z.get("/setting/".concat(n,"s/").concat(s,".json"));case 6:return b.abrupt("return",b.sent.data);case 7:case"end":return b.stop()}},t)})),c.apply(this,arguments)}function u(t,n,s){return r.apply(this,arguments)}function r(){return r=l()(a()().mark(function t(n,s,_){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(d.j.getModel()!="db"){A.next=2;break}return A.abrupt("return",m.Z.saveAssetToDb(n,s,_));case 2:case"end":return A.stop()}},t)})),r.apply(this,arguments)}}}]);
