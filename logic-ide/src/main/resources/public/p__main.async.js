"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5233],{25616:function(j,P,e){var U=e(26068),n=e.n(U),T=e(48305),o=e.n(T),g=e(59321),i=e(87363),R=e.n(i),C=e(874),f=e.n(C),p=e(51857),t=e(91416),O=e(4793),c=e(76465),v=e(51084),D=e(47787),b=e(33194),a=e(52758),_=e(38129),m=e(41648),d=e(22191),s=e(62086),l=function(u){var h=(0,i.useState)({type:"page"}),I=o()(h,2),L=I[0],A=I[1],w=(0,i.useState)(),x=o()(w,2),G=x[0],Z=x[1],$=(0,i.useState)(),k=o()($,2),Y=k[0],V=k[1],S="cxd",J="zh-CN";(0,i.useEffect)(function(){(0,_.m)(g.Z)},[]),(0,i.useEffect)(function(){u.pageId&&((0,O.UD)(u.pageId).then(function(W){A(W)}),d.S.getEnvJson().then(function(W){Z(JSON.parse(m.j.getEnv()))}))},[u.pageId]);var N=function(M,B){console.log("broadcast:",M,B),u.onBroadcast&&u.onBroadcast(M,B.data)};return(0,s.jsxs)("div",{children:[(0,s.jsx)(t.qR,{theme:S,position:"top-right",locale:J},"toast"),(0,s.jsx)(t.wx,{theme:S,locale:J},"alert"),(0,p.sYA)(L,{data:n()({envs:G},u.data),onBroadcast:N},{fetcher:function(M){var B=M.url,K=M.method,y=M.data,F=M.responseType,E=M.config,z=M.headers;return u.data&&u.data.runtime&&(B="/api/ide/papi/".concat(u.data.runtime).concat(B)),E=E||{},E.withCredentials=!0,F&&(E.responseType=F),E.cancelExecutor&&(E.cancelToken=new g.Z.CancelToken(E.cancelExecutor)),E.headers=z||{},E.headers.Authorization||(E.headers.Authorization="Bearer "+a.F.getTokenFormLocal()),K!=="post"&&K!=="put"&&K!=="patch"?(y&&(E.params=y),g.Z[K](B,E)):(y&&y instanceof FormData?(E.headers=E.headers||{},E.headers["Content-Type"]="multipart/form-data"):y&&typeof y!="string"&&!(y instanceof Blob)&&!(y instanceof ArrayBuffer)&&(y=JSON.stringify(y),E.headers=E.headers||{},E.headers["Content-Type"]="application/json"),g.Z[K](B,y,E))},isCancel:function(M){return g.Z.isCancel(M)},copy:function(M){f()(M),t.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:S,jumpTo:function(M,B){debugger;B.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+M,"_blank"):window.location.hash=M}})]})};P.Z=l},38129:function(j,P,e){e.d(P,{m:function(){return g}});var U=e(90228),n=e.n(U),T=e(87999),o=e.n(T);function g(R){return i.apply(this,arguments)}function i(){return i=o()(n()().mark(function R(C){return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:C.interceptors.response.use(function(t){return console.log("axios response"),console.log(t),t&&t.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),t.data.error||(t.data.error={code:0}),t.data.code==500&&(t.data.error={code:500,message:t.data.msg}),t.data.data&&t.data.data.records&&(t.data.data.items=t.data.data.records),t):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(t.data),Promise.reject(new Error(t.data.message)))},function(t){if(console.log("\u6355\u6349axios error"),console.log(t),t.response&&t.response.data){var O,c=t.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((O=t.response.data.error)===null||O===void 0?void 0:O.code)==0&&(t.response.data.error.code=500),console.log(c),c}return Promise.reject(t)});case 1:case"end":return p.stop()}},R)})),i.apply(this,arguments)}},52758:function(j,P,e){e.d(P,{F:function(){return U}});var U={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(T){return localStorage.setItem("token",T)}}},9589:function(j,P,e){e.r(P);var U=e(48305),n=e.n(U),T=e(25616),o=e(17767),g=e(22191),i=e(87363),R=e.n(i),C=e(62086),f=function(t){var O=(0,i.useState)({}),c=n()(O,2),v=c[0],D=c[1];return(0,i.useEffect)(function(){var b=new o.Z("");g.S.getEnvJson().then(function(a){b.getIndexJson().then(function(_){D(_)})})},[]),(0,C.jsx)(T.Z,{pageId:"index",data:v})};P.default=f},17767:function(j,P,e){e.d(P,{Z:function(){return O}});var U=e(90228),n=e.n(U),T=e(87999),o=e.n(T),g=e(25298),i=e.n(g),R=e(17069),C=e.n(R),f=e(82092),p=e.n(f),t=e(96179),O=function(){function c(v){i()(this,c),p()(this,"runtime",void 0),this.runtime=v}return C()(c,[{key:"isValidRuntime",value:function(){return this.runtime!=null&&this.runtime!=""&&this.runtime!=null}},{key:"initApp",value:function(){var v=o()(n()().mark(function b(){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,t.U2)("/setting/app.json");case 2:return _.abrupt("return",_.sent.data);case 3:case"end":return _.stop()}},b)}));function D(){return v.apply(this,arguments)}return D}()},{key:"getAppJson",value:function(){var v=o()(n()().mark(function b(a){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,t.U2)("/logic/setting/apps/".concat(a,".json"));case 2:return m.abrupt("return",m.sent.data);case 3:case"end":return m.stop()}},b)}));function D(b){return v.apply(this,arguments)}return D}()},{key:"getIndexJson",value:function(){var v=o()(n()().mark(function b(){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,t.U2)("/logic/setting/apps/index.json");case 2:return _.abrupt("return",_.sent.data);case 3:case"end":return _.stop()}},b)}));function D(){return v.apply(this,arguments)}return D}()}]),c}()},22191:function(j,P,e){e.d(P,{S:function(){return t}});var U=e(90228),n=e.n(U),T=e(87999),o=e.n(T),g=e(25298),i=e.n(g),R=e(17069),C=e.n(R),f=e(41648),p=e(96179),t=function(){function O(){i()(this,O)}return C()(O,null,[{key:"getEnvJson",value:function(){var c=o()(n()().mark(function D(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.U2)("/api/runtime/env").then(function(_){return _.data.data}).then(function(_){return f.j.setModel(_.UI_CONFIG_MODEL),f.j.setEnv(JSON.stringify(_)),f.j.setApiUrlPrefix(_.API_GATEWAY_PREFIX),f.j.setReryApi(_.CUSTOM_RETRY_URL),f.j.setReryApi(_.CUSTOM_RETRY_URL),_}));case 1:case"end":return a.stop()}},D)}));function v(){return c.apply(this,arguments)}return v}()},{key:"getRemoteRuntimeConfig",value:function(){var c=o()(n()().mark(function D(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.v_)("/api/ide/remote-runtimes").then(function(_){return _.data}).then(function(_){return console.log("remote runtimes:",_.data),f.j.setRemoteRuntimes(JSON.stringify(_.data)),_}));case 1:case"end":return a.stop()}},D)}));function v(){return c.apply(this,arguments)}return v}()}]),O}()},4793:function(j,P,e){e.d(P,{CD:function(){return v},UD:function(){return O},n4:function(){return b},wx:function(){return _}});var U=e(90228),n=e.n(U),T=e(87999),o=e.n(T),g=e(41648),i=e(25298),R=e.n(i),C=e(17069),f=e.n(C),p=e(96179),t=function(){function d(){R()(this,d)}return f()(d,null,[{key:"getAssetFromDb",value:function(){var s=o()(n()().mark(function r(u,h){var I;return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,p.U2)("/api/ide/settings/asset/".concat(u,"/").concat(h));case 2:return I=A.sent.data,A.abrupt("return",JSON.parse(I.data.config));case 4:case"end":return A.stop()}},r)}));function l(r,u){return s.apply(this,arguments)}return l}()},{key:"saveAssetToDb",value:function(){var s=o()(n()().mark(function r(u,h,I){return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,p.v_)("/api/ide/settings/asset/".concat(u,"/").concat(h),I));case 1:case"end":return A.stop()}},r)}));function l(r,u,h){return s.apply(this,arguments)}return l}()},{key:"getRemoteAssetFromDb",value:function(){var s=o()(n()().mark(function r(u,h,I){var L;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,p.U2)("/api/ide/papi/".concat(u,"/api/ide/settings/asset/").concat(h,"/").concat(I));case 2:return L=w.sent.data,w.abrupt("return",JSON.parse(L.data.config));case 4:case"end":return w.stop()}},r)}));function l(r,u,h){return s.apply(this,arguments)}return l}()},{key:"saveRemoteAssetToDb",value:function(){var s=o()(n()().mark(function r(u,h,I,L){return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,p.v_)("/api/ide/papi/".concat(u,"/api/ide/settings/asset/").concat(h,"/").concat(I),L));case 1:case"end":return w.stop()}},r)}));function l(r,u,h,I){return s.apply(this,arguments)}return l}()}]),d}();function O(d){return c.apply(this,arguments)}function c(){return c=o()(n()().mark(function d(s){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(g.j.getModel()!="db"){r.next=4;break}return r.abrupt("return",t.getAssetFromDb("page",s));case 4:return r.next=6,(0,p.U2)("/logic/setting/pages/".concat(s,".json"));case 6:return r.abrupt("return",r.sent.data);case 7:case"end":return r.stop()}},d)})),c.apply(this,arguments)}function v(d){return D.apply(this,arguments)}function D(){return D=o()(n()().mark(function d(s){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(g.j.getModel()!="db"){r.next=4;break}return r.abrupt("return",t.getAssetFromDb("form",s));case 4:return r.next=6,(0,p.U2)("/logic/setting/forms/".concat(s,".json"));case 6:return r.abrupt("return",r.sent.data);case 7:case"end":return r.stop()}},d)})),D.apply(this,arguments)}function b(d,s){return a.apply(this,arguments)}function a(){return a=o()(n()().mark(function d(s,l){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(g.j.getModel()!="db"){u.next=4;break}return u.abrupt("return",t.getAssetFromDb(s,l));case 4:return u.next=6,(0,p.U2)("/logic/setting/".concat(s,"s/").concat(l,".json"));case 6:return u.abrupt("return",u.sent.data);case 7:case"end":return u.stop()}},d)})),a.apply(this,arguments)}function _(d,s,l){return m.apply(this,arguments)}function m(){return m=o()(n()().mark(function d(s,l,r){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(g.j.getModel()!="db"){h.next=2;break}return h.abrupt("return",t.saveAssetToDb(s,l,r));case 2:case"end":return h.stop()}},d)})),m.apply(this,arguments)}},96179:function(j,P,e){e.d(P,{U2:function(){return C},gz:function(){return p},v_:function(){return v}});var U=e(90228),n=e.n(U),T=e(26068),o=e.n(T),g=e(87999),i=e.n(g),R=e(59321);function C(a,_){return f.apply(this,arguments)}function f(){return f=i()(n()().mark(function a(_,m){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",R.Z.get(_,b(m)));case 1:case"end":return s.stop()}},a)})),f.apply(this,arguments)}function p(a,_,m){return t.apply(this,arguments)}function t(){return t=i()(n()().mark(function a(_,m,d){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",R.Z.put(_,m,b(d)));case 1:case"end":return l.stop()}},a)})),t.apply(this,arguments)}function O(a,_){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function a(_,m){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",axios.delete(_,b(m)));case 1:case"end":return s.stop()}},a)})),c.apply(this,arguments)}function v(a,_,m){return D.apply(this,arguments)}function D(){return D=i()(n()().mark(function a(_,m,d){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",R.Z.post(_,m,b(d)));case 1:case"end":return l.stop()}},a)})),D.apply(this,arguments)}function b(a){var _={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(_.Authorization="Bearer "+localStorage.getItem("token")),o()(o()({},a),{},{headers:o()(o()({},_),a==null?void 0:a.headers)})}},33194:function(){}}]);
