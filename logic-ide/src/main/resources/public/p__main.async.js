"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5233],{68784:function(j,P,e){var U=e(26068),n=e.n(U),T=e(48305),l=e.n(T),p=e(950),u=e(87363),R=e.n(u),C=e(874),f=e.n(C),g=e(66345),s=e(94391),O=e(99294),d=e(42327),v=e(3044),D=e(21644),b=e(77201),t=e(30697),_=e(12146),m=e(33627),c=e(370),a=e(62086),i=function(o){var h=(0,u.useState)({type:"page"}),I=l()(h,2),L=I[0],A=I[1],w=(0,u.useState)(),S=l()(w,2),G=S[0],Z=S[1],$=(0,u.useState)(),J=l()($,2),Y=J[0],V=J[1],K="cxd",F="zh-CN";(0,u.useEffect)(function(){(0,_.m)(p.Z)},[]),(0,u.useEffect)(function(){o.pageId&&((0,O.UD)(o.pageId).then(function(k){A(k)}),c.S.getEnvJson().then(function(k){Z(JSON.parse(m.j.getEnv()))}))},[o.pageId]);var N=function(M,B){console.log("broadcast:",M,B),o.onBroadcast&&o.onBroadcast(M,B.data)};return(0,a.jsxs)("div",{children:[(0,a.jsx)(s.qRY,{theme:K,position:"top-right",locale:F},"toast"),(0,a.jsx)(s.wxo,{theme:K,locale:F},"alert"),(0,g.sYA)(L,{data:n()({envs:G},o.data),onBroadcast:N},{fetcher:function(M){var B=M.url,W=M.method,y=M.data,x=M.responseType,E=M.config,z=M.headers;return o.data&&o.data.runtime&&(B="/api/ide/papi/".concat(o.data.runtime).concat(B)),E=E||{},E.withCredentials=!0,x&&(E.responseType=x),E.cancelExecutor&&(E.cancelToken=new p.Z.CancelToken(E.cancelExecutor)),E.headers=z||{},E.headers.Authorization||(E.headers.Authorization="Bearer "+t.F.getTokenFormLocal()),W!=="post"&&W!=="put"&&W!=="patch"?(y&&(E.params=y),p.Z[W](B,E)):(y&&y instanceof FormData?(E.headers=E.headers||{},E.headers["Content-Type"]="multipart/form-data"):y&&typeof y!="string"&&!(y instanceof Blob)&&!(y instanceof ArrayBuffer)&&(y=JSON.stringify(y),E.headers=E.headers||{},E.headers["Content-Type"]="application/json"),p.Z[W](B,y,E))},isCancel:function(M){return p.Z.isCancel(M)},copy:function(M){f()(M),s.Amu.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:K,jumpTo:function(M,B){debugger;B.blank==!0?window.open(window.location.origin+window.location.pathname+"#"+M,"_blank"):window.location.hash=M}})]})};P.Z=i},12146:function(j,P,e){e.d(P,{m:function(){return p}});var U=e(90228),n=e.n(U),T=e(87999),l=e.n(T);function p(R){return u.apply(this,arguments)}function u(){return u=l()(n()().mark(function R(C){return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:C.interceptors.response.use(function(s){return console.log("axios response"),console.log(s),s&&s.data?(console.log("--\u8BF7\u6C42\u672A\u62A5\u9519\uFF0C\u9002\u914Dstatus=0"),s.data.error||(s.data.error={code:0}),s.data.code==500&&(s.data.error={code:500,message:s.data.msg}),s.data.data&&s.data.data.records&&(s.data.data.items=s.data.data.records),s):(console.log("--\u8FD4\u56DE\u6570\u636E\u4E3A\u7A7A\uFF0C\u5224\u65AD\u4E3A\u5F02\u5E38"),console.log(s.data),Promise.reject(new Error(s.data.message)))},function(s){if(console.log("\u6355\u6349axios error"),console.log(s),s.response&&s.response.data){var O,d=s.response;return console.log("--data\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse,\u9002\u914Dstatus=500\uFF01"),((O=s.response.data.error)===null||O===void 0?void 0:O.code)==0&&(s.response.data.error.code=500),console.log(d),d}return Promise.reject(s)});case 1:case"end":return g.stop()}},R)})),u.apply(this,arguments)}},30697:function(j,P,e){e.d(P,{F:function(){return U}});var U={getTokenFormLocal:function(){return localStorage.getItem("token")},setTokenToLocal:function(T){return localStorage.setItem("token",T)}}},23186:function(j,P,e){e.r(P);var U=e(48305),n=e.n(U),T=e(68784),l=e(35836),p=e(370),u=e(87363),R=e.n(u),C=e(62086),f=function(s){var O=(0,u.useState)({}),d=n()(O,2),v=d[0],D=d[1];return(0,u.useEffect)(function(){var b=new l.Z("");p.S.getEnvJson().then(function(t){b.getIndexJson().then(function(_){D(_)})})},[]),(0,C.jsx)(T.Z,{pageId:"index",data:v})};P.default=f},35836:function(j,P,e){e.d(P,{Z:function(){return O}});var U=e(90228),n=e.n(U),T=e(87999),l=e.n(T),p=e(25298),u=e.n(p),R=e(17069),C=e.n(R),f=e(82092),g=e.n(f),s=e(72591),O=function(){function d(v){u()(this,d),g()(this,"runtime",void 0),this.runtime=v}return C()(d,[{key:"isValidRuntime",value:function(){return this.runtime!=null&&this.runtime!=""&&this.runtime!=null}},{key:"initApp",value:function(){var v=l()(n()().mark(function b(){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,s.U2)("/setting/app.json");case 2:return _.abrupt("return",_.sent.data);case 3:case"end":return _.stop()}},b)}));function D(){return v.apply(this,arguments)}return D}()},{key:"getAppJson",value:function(){var v=l()(n()().mark(function b(t){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,s.U2)("/logic/setting/apps/".concat(t,".json"));case 2:return m.abrupt("return",m.sent.data);case 3:case"end":return m.stop()}},b)}));function D(b){return v.apply(this,arguments)}return D}()},{key:"getIndexJson",value:function(){var v=l()(n()().mark(function b(){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,s.U2)("/logic/setting/apps/index.json");case 2:return _.abrupt("return",_.sent.data);case 3:case"end":return _.stop()}},b)}));function D(){return v.apply(this,arguments)}return D}()}]),d}()},370:function(j,P,e){e.d(P,{S:function(){return s}});var U=e(90228),n=e.n(U),T=e(87999),l=e.n(T),p=e(25298),u=e.n(p),R=e(17069),C=e.n(R),f=e(33627),g=e(72591),s=function(){function O(){u()(this,O)}return C()(O,null,[{key:"getEnvJson",value:function(){var d=l()(n()().mark(function D(){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.U2)("/api/runtime/env").then(function(_){return _.data.data}).then(function(_){return f.j.setModel(_.UI_CONFIG_MODEL),f.j.setEnv(JSON.stringify(_)),f.j.setApiUrlPrefix(_.API_GATEWAY_PREFIX),f.j.setReryApi(_.CUSTOM_RETRY_URL),f.j.setReryApi(_.CUSTOM_RETRY_URL),_}));case 1:case"end":return t.stop()}},D)}));function v(){return d.apply(this,arguments)}return v}()},{key:"getRemoteRuntimeConfig",value:function(){var d=l()(n()().mark(function D(){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.v_)("/api/ide/remote-runtimes").then(function(_){return _.data}).then(function(_){return console.log("remote runtimes:",_.data),f.j.setRemoteRuntimes(JSON.stringify(_.data)),_}));case 1:case"end":return t.stop()}},D)}));function v(){return d.apply(this,arguments)}return v}()}]),O}()},99294:function(j,P,e){e.d(P,{CD:function(){return v},UD:function(){return O},n4:function(){return b},wx:function(){return _}});var U=e(90228),n=e.n(U),T=e(87999),l=e.n(T),p=e(33627),u=e(25298),R=e.n(u),C=e(17069),f=e.n(C),g=e(72591),s=function(){function c(){R()(this,c)}return f()(c,null,[{key:"getAssetFromDb",value:function(){var a=l()(n()().mark(function r(o,h){var I;return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,g.U2)("/api/ide/settings/asset/".concat(o,"/").concat(h));case 2:return I=A.sent.data,A.abrupt("return",JSON.parse(I.data.config));case 4:case"end":return A.stop()}},r)}));function i(r,o){return a.apply(this,arguments)}return i}()},{key:"saveAssetToDb",value:function(){var a=l()(n()().mark(function r(o,h,I){return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,g.v_)("/api/ide/settings/asset/".concat(o,"/").concat(h),I));case 1:case"end":return A.stop()}},r)}));function i(r,o,h){return a.apply(this,arguments)}return i}()},{key:"getRemoteAssetFromDb",value:function(){var a=l()(n()().mark(function r(o,h,I){var L;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,g.U2)("/api/ide/papi/".concat(o,"/api/ide/settings/asset/").concat(h,"/").concat(I));case 2:return L=w.sent.data,w.abrupt("return",JSON.parse(L.data.config));case 4:case"end":return w.stop()}},r)}));function i(r,o,h){return a.apply(this,arguments)}return i}()},{key:"saveRemoteAssetToDb",value:function(){var a=l()(n()().mark(function r(o,h,I,L){return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,g.v_)("/api/ide/papi/".concat(o,"/api/ide/settings/asset/").concat(h,"/").concat(I),L));case 1:case"end":return w.stop()}},r)}));function i(r,o,h,I){return a.apply(this,arguments)}return i}()}]),c}();function O(c){return d.apply(this,arguments)}function d(){return d=l()(n()().mark(function c(a){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(p.j.getModel()!="db"){r.next=4;break}return r.abrupt("return",s.getAssetFromDb("page",a));case 4:return r.next=6,(0,g.U2)("/logic/setting/pages/".concat(a,".json"));case 6:return r.abrupt("return",r.sent.data);case 7:case"end":return r.stop()}},c)})),d.apply(this,arguments)}function v(c){return D.apply(this,arguments)}function D(){return D=l()(n()().mark(function c(a){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(p.j.getModel()!="db"){r.next=4;break}return r.abrupt("return",s.getAssetFromDb("form",a));case 4:return r.next=6,(0,g.U2)("/logic/setting/forms/".concat(a,".json"));case 6:return r.abrupt("return",r.sent.data);case 7:case"end":return r.stop()}},c)})),D.apply(this,arguments)}function b(c,a){return t.apply(this,arguments)}function t(){return t=l()(n()().mark(function c(a,i){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(p.j.getModel()!="db"){o.next=4;break}return o.abrupt("return",s.getAssetFromDb(a,i));case 4:return o.next=6,(0,g.U2)("/logic/setting/".concat(a,"s/").concat(i,".json"));case 6:return o.abrupt("return",o.sent.data);case 7:case"end":return o.stop()}},c)})),t.apply(this,arguments)}function _(c,a,i){return m.apply(this,arguments)}function m(){return m=l()(n()().mark(function c(a,i,r){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(p.j.getModel()!="db"){h.next=2;break}return h.abrupt("return",s.saveAssetToDb(a,i,r));case 2:case"end":return h.stop()}},c)})),m.apply(this,arguments)}},72591:function(j,P,e){e.d(P,{U2:function(){return C},gz:function(){return g},v_:function(){return v}});var U=e(90228),n=e.n(U),T=e(26068),l=e.n(T),p=e(87999),u=e.n(p),R=e(950);function C(t,_){return f.apply(this,arguments)}function f(){return f=u()(n()().mark(function t(_,m){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",R.Z.get(_,b(m)));case 1:case"end":return a.stop()}},t)})),f.apply(this,arguments)}function g(t,_,m){return s.apply(this,arguments)}function s(){return s=u()(n()().mark(function t(_,m,c){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",R.Z.put(_,m,b(c)));case 1:case"end":return i.stop()}},t)})),s.apply(this,arguments)}function O(t,_){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function t(_,m){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",axios.delete(_,b(m)));case 1:case"end":return a.stop()}},t)})),d.apply(this,arguments)}function v(t,_,m){return D.apply(this,arguments)}function D(){return D=u()(n()().mark(function t(_,m,c){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",R.Z.post(_,m,b(c)));case 1:case"end":return i.stop()}},t)})),D.apply(this,arguments)}function b(t){var _={"Content-Type":"application/json;charset=UTF-8"};return localStorage.getItem("token")&&(_.Authorization="Bearer "+localStorage.getItem("token")),l()(l()({},t),{},{headers:l()(l()({},_),t==null?void 0:t.headers)})}},77201:function(){}}]);
