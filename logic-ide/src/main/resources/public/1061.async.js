"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[1061],{2325:function(k,L,e){e.d(L,{C:function(){return x}});var x=new Map,u=50,D=50;x.set("ExtSharp",{name:"ExtSharp",config:{width:100,height:D,attrs:{body:{rx:6,ry:6,fill:"rgba(95, 149, 255, 0.05)",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),x.set("ExtShape1",{name:"ExtShape1",config:{width:100,height:D,attrs:{body:{rx:6,ry:6,fill:"#ffcc00",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),x.set("ExtShape2",{name:"ExtShape2",config:{width:100,height:D,attrs:{body:{rx:6,ry:6,fill:"#87CEEB",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,strokeWidth:3,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}}),x.set("ExtShape3",{name:"ExtShape3",config:{width:100,height:D,attrs:{body:{rx:6,ry:6,fill:"#FFF8DC",stroke:"#8f8f8f",strokeWidth:1,refWidth:1,refHeight:1},image:{refX:2,refY:0},text:{refX:4,refY:20,fontSize:12,"text-anchor":"start"}},markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}})},42651:function(k,L,e){e.d(L,{Z:function(){return o}});var x=e(21140),u=e.n(x),D=e(63466),_=e.n(D),n=e(52510),p=e.n(n),o=function(){function c(r){u()(this,c),p()(this,"_nodeConfig",void 0),p()(this,"_groups",void 0),this._nodeConfig=JSON.parse(JSON.stringify(r)),this._nodeConfig._groups&&(this._groups=this._nodeConfig._groups)}return _()(c,[{key:"getNodeConfig",value:function(){return this._nodeConfig}},{key:"getGroups",value:function(){return this._groups}},{key:"setLabel",value:function(f){this._nodeConfig.attrs&&(this._nodeConfig.attrs.text.text=f)}},{key:"setGroups",value:function(f){this._groups=f}},{key:"setConfigSchemel",value:function(f){this._nodeConfig.data?(this._nodeConfig.data.configSchema=f,this._nodeConfig.data.config={type:f}):this._nodeConfig.data={configSchema:f,config:{type:f}}}},{key:"setConfigData",value:function(f){this._nodeConfig.data?this._nodeConfig.data.config=f:this._nodeConfig.data={config:f}}}]),c}()},3619:function(k,L,e){e.d(L,{V:function(){return u}});var x=e(17600),u=function(n){var p,o=n.getSelectedCells(),c=[],r=[];if(o&&o.length>2){o.forEach(function(i){i.isNode()?c.push(i):r.push(i)}),p=new x.Vq({type:"dagre",begin:[c[0].getPosition().x,c[0].getPosition().y],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),n.getEdges().forEach(function(i){var d=i.getSourceCellId(),w=0,N=i.getTargetCellId(),P=0;c.find(function(S){return S.id===d})&&w++,c.find(function(S){return S.id===N})&&P++,w>0&&P>0&&r.push(i)});debugger;var f=p.layout({nodes:c,edges:r}),E=f.nodes,m=E===void 0?[]:E;c.forEach(function(i){var d=m.find(function(w){return w.id===i.id});d.x-=i.size().width/2,d.y-=i.size().height/2,i.position(d.x,d.y)})}else{p=new x.Vq({type:"dagre",begin:[400,100],ranker:"network-simplex",rankdir:"TB",ranksep:20,nodeSize:50,align:"DL",controlPoints:!0}),c=n.getNodes(),r=n.getEdges();var l=p.layout({nodes:c,edges:r}),b=l.nodes,y=b===void 0?[]:b;c.forEach(function(i){var d=y.find(function(w){return w.id===i.id});d.x-=i.size().width/2,d.y-=i.size().height/2,i.position(d.x,d.y)})}},D=function(n,p){debugger;var o=new DagreLayout({type:"dagre",begin:[400,100],ranker:"tight-tree",rankdir:"TB",ranksep:20,nodeSize:50,controlPoints:!0}),c=o.layout({nodes:n,edges:p}),r=c.nodes,f=r===void 0?[]:r;n.forEach(function(E){var m=f.find(function(l){return l.id===E.id});m.x-=E.size().width/2,m.y-=E.size().height/2,E.position(m.x,m.y)})}},44095:function(k,L,e){e.d(L,{m:function(){return E}});var x=e(5671),u=e(95812),D=e(57213),_=e.n(D),n=e(53914),p={customNode:"customNode___zxYMy",input:"input___oBweR",switchNode:"switchNode___PXP4B"},o=e(33130),c=function(l){var b,y,i,d=l.node,w=(b=d.data.config)===null||b===void 0?void 0:b.name,N=w||"case";return(0,o.jsxs)("div",{className:p.customNode,children:[(0,o.jsx)("span",{children:"case"}),(0,o.jsx)(n.Z,{addonAfter:w,className:"input",value:d==null||(y=d.data)===null||y===void 0||(i=y.config)===null||i===void 0?void 0:i.case,width:150,onChange:function(S){var O=d.data;d.setData(_()(_()({},O),{},{config:_()(_()({},O.config),{},{case:S.target.value})}))}})]})},r=function(l){var b,y=l.node;return(0,o.jsx)("div",{className:p.customNode,children:(0,o.jsx)(n.Z,{addonBefore:"switch",className:"input",value:(b=y.data)===null||b===void 0?void 0:b.config.condition,onChange:function(d){var w=y.data;y.setData(_()(_()({},w),{},{config:_()(_()({},w.config),{},{condition:d.target.value})}))},width:100})})},f=function(l){return(0,o.jsx)("div",{className:p.customNode,children:(0,o.jsx)("div",{style:{textAlign:"center",fontSize:"15px"},children:"default"})})};function E(m){m.forEach(function(l){console.log("\u6CE8\u518C\u65B0\u8282\u70B9:"+l.name),x.kJ.registerNode(l.name,l.config,!0)}),(0,u.z2)({shape:"switch",component:r}),(0,u.z2)({shape:"switch-case",component:c}),(0,u.z2)({shape:"switch-default",component:f})}},9364:function(k,L,e){e.d(L,{K:function(){return c}});var x=e(93525),u=e.n(x),D=e(57213),_=e.n(D),n=e(12490),p=e(2325),o=e(42651);function c(r,f,E){var m=50,l=50,b={body:{}},y=[new o.Z({shape:"circle",width:m,height:l,attrs:{body:_()(_()({},b.body),{},{fill:"white"}),text:{text:"\u5F00\u59CB",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:n.Tt,data:{config:{type:"start"}},_groups:["ctrl"]}),new o.Z({shape:"circle",width:m,height:l,attrs:{body:_()(_()({},b.body),{},{fill:"white"}),text:{text:"\u4EA4\u4E92\u70B9",fontSize:12}},markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}],ports:n.Tt,data:{config:{type:"wait-for-continue"}},_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:50,height:l,label:"switch",attrs:{image:{"xlink:href":"/logic/icons/switch.svg",width:45,x:1,y:2},text:{text:"switch",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch"}},ports:n.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:m,height:l,attrs:{image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"case",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-case"}},ports:n.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:50,height:l,attrs:{image:{"xlink:href":"/logic/icons/text.svg",width:30,x:8,y:10},text:{text:"default",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"switch-default"}},ports:n.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",width:m,height:l,attrs:{image:{"xlink:href":"/logic/icons/delay.svg",width:30,x:8,y:10},text:{text:"\u7B49\u5F85",refX:.5,refY:"100%",refY2:4,textAnchor:"middle",textVerticalAnchor:"top"}},data:{config:{type:"wait",timeout:"2000"}},ports:n.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",body:{rx:6,ry:6,fill:"#0484fb",stroke:"#0484fb",strokeWidth:1,refWidth:1,refHeight:1},attrs:{text:{text:"http\u8BF7\u6C42"},image:{"xlink:href":"/logic/icons/http.svg",width:20,x:2,y:2}},data:{config:{type:"http",method:"POST"}},ports:n.Tt,_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",ports:n.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/logic/icons/code.svg"},text:{text:"js\u811A\u672C"}},data:{config:{type:"js"}},_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",ports:n.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/logic/icons/java.svg"},text:{text:"java\u65B9\u6CD5"}},data:{config:{type:"java"}},_groups:["ctrl"]}),new o.Z({shape:"ExtSharp",ports:n.Tt,attrs:{image:{width:15,x:2,y:2,"xlink:href":"/logic/icons/CarbonSubflowLocal.svg"},text:{text:"\u590D\u7528\u903B\u8F91"}},data:{config:{type:"sub-logic"}},_groups:["ctrl"]})];r&&r.length>0&&Array.prototype.push.apply(y,r);var i=u()(p.C.values());return{Nodes:y,Shapes:i}}},48364:function(k,L,e){e.d(L,{Uh:function(){return T},az:function(){return b},gC:function(){return w},m9:function(){return i},qB:function(){return f},yi:function(){return P}});var x=e(25359),u=e.n(x),D=e(49811),_=e.n(D),n=e(57475),p=e(5726),o=e.n(p);function c(s){return r.apply(this,arguments)}function r(){return r=_asyncToGenerator(_regeneratorRuntime().mark(function s(g){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",post("/api/ide/pub/logic/dev-to-test".concat(g)));case 1:case"end":return t.stop()}},s)})),r.apply(this,arguments)}function f(s){return E.apply(this,arguments)}function E(){return E=_()(u()().mark(function s(g){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,n.U2)("/api/ide/logic/".concat(g)).then(function(h){var a,v=(a=h.data)===null||a===void 0?void 0:a.data;return v.configJson=JSON.parse(v.configJson),v}));case 1:case"end":return t.stop()}},s)})),E.apply(this,arguments)}function m(s){return l.apply(this,arguments)}function l(){return l=_asyncToGenerator(_regeneratorRuntime().mark(function s(g){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",get("/api/ide/logic/".concat(g,"/config")).then(function(h){var a;return(a=h.data)===null||a===void 0?void 0:a.data}));case 1:case"end":return t.stop()}},s)})),l.apply(this,arguments)}function b(s,g,C){return y.apply(this,arguments)}function y(){return y=_()(u()().mark(function s(g,C,t){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.gz)("/api/ide/logic/edit/".concat(g),{version:C,configJson:t,updateTime:o()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return a.stop()}},s)})),y.apply(this,arguments)}function i(s){return d.apply(this,arguments)}function d(){return d=_()(u()().mark(function s(g){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,n.U2)("/api/ide/logic-instance/".concat(g)).then(function(h){var a=h.data.data;return a}));case 1:case"end":return t.stop()}},s)})),d.apply(this,arguments)}function w(s){return N.apply(this,arguments)}function N(){return N=_()(u()().mark(function s(g){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,n.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[g.logicId],type:"="},{dataIndex:"bizId",values:[g.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"id",desc:!0}]}).then(function(h){var a=h.data.data.records;return a&&a.map(function(v){v.itemLogs&&(v.itemLogs=JSON.parse(v.itemLogs))}),a}));case 1:case"end":return t.stop()}},s)})),N.apply(this,arguments)}function P(s){return S.apply(this,arguments)}function S(){return S=_()(u()().mark(function s(g){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,n.v_)("/api/ide/logic-logs",{filters:[{dataIndex:"id",values:[g],type:"="}],pageSize:1e3}).then(function(h){var a=h.data.data.records;return a&&a.length>0&&a[0].itemLogs&&(a[0].itemLogs=JSON.parse(a[0].itemLogs)),a[0]}));case 1:case"end":return t.stop()}},s)})),S.apply(this,arguments)}function O(s,g){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function s(g,C){return _regeneratorRuntime().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[g],type:"="},{dataIndex:"version",values:[C],type:"="}]}).then(function(a){var v=a.data.data.records[0].configJson,M=JSON.parse(v);return M}));case 1:case"end":return h.stop()}},s)})),I.apply(this,arguments)}function T(s,g){return B.apply(this,arguments)}function B(){return B=_()(u()().mark(function s(g,C){return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,n.v_)("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[g],type:"="},{dataIndex:"version",values:[C],type:"="}]}).then(function(a){var v=a.data.data.records[0],M=v.configJson;return v.configJson=JSON.parse(M),v.configJson.id=v.id,v.configJson.name=v.name,v}));case 1:case"end":return h.stop()}},s)})),B.apply(this,arguments)}}}]);
