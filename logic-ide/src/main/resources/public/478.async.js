(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[478],{12345:function(at,At,B){"use strict";B.d(At,{Z:function(){return ye}});var Z=B(56920),an=B(87363),Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},rt=Ce,ln=B(9462),Tt=function(Zn,xt){return an.createElement(ln.Z,(0,Z.Z)({},Zn,{ref:xt,icon:rt}))},ye=an.forwardRef(Tt)},61382:function(at,At,B){"use strict";B.d(At,{Z:function(){return ye}});var Z=B(56920),an=B(87363),Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},rt=Ce,ln=B(9462),Tt=function(Zn,xt){return an.createElement(ln.Z,(0,Z.Z)({},Zn,{ref:xt,icon:rt}))},ye=an.forwardRef(Tt)},371:function(at,At,B){"use strict";B.d(At,{Z:function(){return xr}});var Z=B(56983),an=B(56920),Ce=B(87363),rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},ln=rt,Tt=B(9462),ye=function(Ue,_t){return Ce.createElement(Tt.Z,(0,an.Z)({},Ue,{ref:_t,icon:ln}))},vn=Ce.forwardRef(ye),Zn=B(84875),xt=B.n(Zn),Lt=B(25940),ot=B(91744),wt=B(90885),Ye=B(48385),Et=B(64199),pt=B(56261),Ht=B(26729),wn=B(41857),pn=B(42471),dr=B(75586),Pn=B(29794);function sr(Ee,Ue){var _t=(0,Ce.useRef)(null);function en(){try{var It=Ee.selectionStart,Kt=Ee.selectionEnd,En=Ee.value,Cn=En.substring(0,It),jn=En.substring(Kt);_t.current={start:It,end:Kt,value:En,beforeTxt:Cn,afterTxt:jn}}catch(Vt){}}function tn(){if(Ee&&_t.current&&Ue)try{var It=Ee.value,Kt=_t.current,En=Kt.beforeTxt,Cn=Kt.afterTxt,jn=Kt.start,Vt=It.length;if(It.endsWith(Cn))Vt=It.length-_t.current.afterTxt.length;else if(It.startsWith(En))Vt=En.length;else{var _n=En[jn-1],Sn=It.indexOf(_n,jn-1);Sn!==-1&&(Vt=Sn+1)}Ee.setSelectionRange(Vt,Vt)}catch(wr){(0,Pn.ZP)(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(wr.message))}}return[en,tn]}var mn=B(96608),nn=function(){var Ue=(0,Ce.useState)(!1),_t=(0,wt.Z)(Ue,2),en=_t[0],tn=_t[1];return(0,pn.Z)(function(){tn((0,mn.Z)())},[]),en},ur=nn,lt=B(4447),ft=200,He=600;function Fe(Ee){var Ue=Ee.prefixCls,_t=Ee.upNode,en=Ee.downNode,tn=Ee.upDisabled,It=Ee.downDisabled,Kt=Ee.onStep,En=Ce.useRef(),Cn=Ce.useRef([]),jn=Ce.useRef();jn.current=Kt;var Vt=function(){clearTimeout(En.current)},_n=function(jr,$r){jr.preventDefault(),Vt(),jn.current($r);function eo(){jn.current($r),En.current=setTimeout(eo,ft)}En.current=setTimeout(eo,He)};Ce.useEffect(function(){return function(){Vt(),Cn.current.forEach(function(Ct){return lt.Z.cancel(Ct)})}},[]);var Sn=ur();if(Sn)return null;var wr="".concat(Ue,"-handler"),Ir=xt()(wr,"".concat(wr,"-up"),(0,Lt.Z)({},"".concat(wr,"-up-disabled"),tn)),uo=xt()(wr,"".concat(wr,"-down"),(0,Lt.Z)({},"".concat(wr,"-down-disabled"),It)),Nr=function(){return Cn.current.push((0,lt.Z)(Vt))},wo={unselectable:"on",role:"button",onMouseUp:Nr,onMouseLeave:Nr};return Ce.createElement("div",{className:"".concat(wr,"-wrap")},Ce.createElement("span",(0,an.Z)({},wo,{onMouseDown:function(jr){_n(jr,!0)},"aria-label":"Increase Value","aria-disabled":tn,className:Ir}),_t||Ce.createElement("span",{unselectable:"on",className:"".concat(Ue,"-handler-up-inner")})),Ce.createElement("span",(0,an.Z)({},wo,{onMouseDown:function(jr){_n(jr,!1)},"aria-label":"Decrease Value","aria-disabled":It,className:uo}),en||Ce.createElement("span",{unselectable:"on",className:"".concat(Ue,"-handler-down-inner")})))}function se(Ee){var Ue=typeof Ee=="number"?(0,pt.vP)(Ee):(0,pt._V)(Ee).fullStr,_t=Ue.includes(".");return _t?(0,pt._V)(Ue.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:Ee+"0"}var Y=B(74429),ce=function(){var Ee=(0,Ce.useRef)(0),Ue=function(){lt.Z.cancel(Ee.current)};return(0,Ce.useEffect)(function(){return Ue},[]),function(_t){Ue(),Ee.current=(0,lt.Z)(function(){_t()})}},ve=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep"],Xe=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","classes","className","classNames"],Ke=function(Ue,_t){return Ue||_t.isEmpty()?_t.toString():_t.toNumber()},We=function(Ue){var _t=(0,Et.ZP)(Ue);return _t.isInvalidate()?null:_t},dt=Ce.forwardRef(function(Ee,Ue){var _t,en=Ee.prefixCls,tn=en===void 0?"rc-input-number":en,It=Ee.className,Kt=Ee.style,En=Ee.min,Cn=Ee.max,jn=Ee.step,Vt=jn===void 0?1:jn,_n=Ee.defaultValue,Sn=Ee.value,wr=Ee.disabled,Ir=Ee.readOnly,uo=Ee.upHandler,Nr=Ee.downHandler,wo=Ee.keyboard,Ct=Ee.controls,jr=Ct===void 0?!0:Ct,$r=Ee.classNames,eo=Ee.stringMode,to=Ee.parser,Yr=Ee.formatter,_o=Ee.precision,Ro=Ee.decimalSeparator,ii=Ee.onChange,Xo=Ee.onInput,Yo=Ee.onPressEnter,Qn=Ee.onStep,ai=(0,Ye.Z)(Ee,ve),zo="".concat(tn,"-input"),si=Ce.useRef(null),ui=Ce.useState(!1),Wi=(0,wt.Z)(ui,2),Xi=Wi[0],Hi=Wi[1],Co=Ce.useRef(!1),Bo=Ce.useRef(!1),_i=Ce.useRef(!1),Ja=Ce.useState(function(){return(0,Et.ZP)(Sn!=null?Sn:_n)}),S=(0,wt.Z)(Ja,2),C=S[0],Ie=S[1];function Me(Mt){Sn===void 0&&Ie(Mt)}var Be=Ce.useCallback(function(Mt,Pt){if(!Pt)return _o>=0?_o:Math.max((0,pt.NX)(Mt),(0,pt.NX)(Vt))},[_o,Vt]),Ge=Ce.useCallback(function(Mt){var Pt=String(Mt);if(to)return to(Pt);var In=Pt;return Ro&&(In=In.replace(Ro,".")),In.replace(/[^\w.-]+/g,"")},[to,Ro]),ht=Ce.useRef(""),yt=Ce.useCallback(function(Mt,Pt){if(Yr)return Yr(Mt,{userTyping:Pt,input:String(ht.current)});var In=typeof Mt=="number"?(0,pt.vP)(Mt):Mt;if(!Pt){var mt=Be(In,Pt);if((0,pt.mE)(In)&&(Ro||mt>=0)){var Fn=Ro||".";In=(0,Ht.FH)(In,Fn,mt)}}return In},[Yr,Be,Ro]),zt=Ce.useState(function(){var Mt=_n!=null?_n:Sn;return C.isInvalidate()&&["string","number"].includes((0,ot.Z)(Mt))?Number.isNaN(Mt)?"":Mt:yt(C.toString(),!1)}),sn=(0,wt.Z)(zt,2),Mn=sn[0],un=sn[1];ht.current=Mn;function Tn(Mt,Pt){un(yt(Mt.isInvalidate()?Mt.toString(!1):Mt.toString(!Pt),Pt))}var dn=Ce.useMemo(function(){return We(Cn)},[Cn,_o]),bn=Ce.useMemo(function(){return We(En)},[En,_o]),qn=Ce.useMemo(function(){return!dn||!C||C.isInvalidate()?!1:dn.lessEquals(C)},[dn,C]),nr=Ce.useMemo(function(){return!bn||!C||C.isInvalidate()?!1:C.lessEquals(bn)},[bn,C]),Jn=sr(si.current,Xi),ir=(0,wt.Z)(Jn,2),Xn=ir[0],Ar=ir[1],cr=function(Pt){return dn&&!Pt.lessEquals(dn)?dn:bn&&!bn.lessEquals(Pt)?bn:null},Dn=function(Pt){return!cr(Pt)},Yn=function(Pt,In){var mt=Pt,Fn=Dn(mt)||mt.isEmpty();if(!mt.isEmpty()&&!In&&(mt=cr(mt)||mt,Fn=!0),!Ir&&!wr&&Fn){var Vr=mt.toString(),co=Be(Vr,In);return co>=0&&(mt=(0,Et.ZP)((0,Ht.FH)(Vr,".",co)),Dn(mt)||(mt=(0,Et.ZP)((0,Ht.FH)(Vr,".",co,!0)))),mt.equals(C)||(Me(mt),ii==null||ii(mt.isEmpty()?null:Ke(eo,mt)),Sn===void 0&&Tn(mt,In)),mt}return C},hr=ce(),kn=function Mt(Pt){if(Xn(),ht.current=Pt,un(Pt),!Bo.current){var In=Ge(Pt),mt=(0,Et.ZP)(In);mt.isNaN()||Yn(mt,!0)}Xo==null||Xo(Pt),hr(function(){var Fn=Pt;to||(Fn=Pt.replace(/ã€‚/g,".")),Fn!==Pt&&Mt(Fn)})},er=function(){Bo.current=!0},Bn=function(){Bo.current=!1,kn(si.current.value)},Bt=function(Pt){kn(Pt.target.value)},cn=function(Pt){var In;if(!(Pt&&qn||!Pt&&nr)){Co.current=!1;var mt=(0,Et.ZP)(_i.current?se(Vt):Vt);Pt||(mt=mt.negate());var Fn=(C||(0,Et.ZP)(0)).add(mt.toString()),Vr=Yn(Fn,!1);Qn==null||Qn(Ke(eo,Vr),{offset:_i.current?se(Vt):Vt,type:Pt?"up":"down"}),(In=si.current)===null||In===void 0||In.focus()}},Un=function(Pt){var In=(0,Et.ZP)(Ge(Mn)),mt=In;In.isNaN()?mt=Yn(C,Pt):mt=Yn(In,Pt),Sn!==void 0?Tn(C,!1):mt.isNaN()||Tn(mt,!1)},ar=function(){Co.current=!0},mo=function(Pt){var In=Pt.key,mt=Pt.shiftKey;Co.current=!0,_i.current=mt,In==="Enter"&&(Bo.current||(Co.current=!1),Un(!1),Yo==null||Yo(Pt)),wo!==!1&&!Bo.current&&["Up","ArrowUp","Down","ArrowDown"].includes(In)&&(cn(In==="Up"||In==="ArrowUp"),Pt.preventDefault())},Do=function(){Co.current=!1,_i.current=!1},Oo=function(){Un(!1),Hi(!1),Co.current=!1};return(0,pn.o)(function(){C.isInvalidate()||Tn(C,!1)},[_o]),(0,pn.o)(function(){var Mt=(0,Et.ZP)(Sn);Ie(Mt);var Pt=(0,Et.ZP)(Ge(Mn));(!Mt.equals(Pt)||!Co.current||Yr)&&Tn(Mt,Co.current)},[Sn]),(0,pn.o)(function(){Yr&&Ar()},[Mn]),Ce.createElement("div",{className:xt()(tn,$r==null?void 0:$r.input,It,(_t={},(0,Lt.Z)(_t,"".concat(tn,"-focused"),Xi),(0,Lt.Z)(_t,"".concat(tn,"-disabled"),wr),(0,Lt.Z)(_t,"".concat(tn,"-readonly"),Ir),(0,Lt.Z)(_t,"".concat(tn,"-not-a-number"),C.isNaN()),(0,Lt.Z)(_t,"".concat(tn,"-out-of-range"),!C.isInvalidate()&&!Dn(C)),_t)),style:Kt,onFocus:function(){Hi(!0)},onBlur:Oo,onKeyDown:mo,onKeyUp:Do,onCompositionStart:er,onCompositionEnd:Bn,onBeforeInput:ar},jr&&Ce.createElement(Fe,{prefixCls:tn,upNode:uo,downNode:Nr,upDisabled:qn,downDisabled:nr,onStep:cn}),Ce.createElement("div",{className:"".concat(zo,"-wrap")},Ce.createElement("input",(0,an.Z)({autoComplete:"off",role:"spinbutton","aria-valuemin":En,"aria-valuemax":Cn,"aria-valuenow":C.isInvalidate()?null:C.toString(),step:Vt},ai,{ref:(0,dr.sQ)(si,Ue),className:zo,value:Mn,onChange:Bt,disabled:wr,readOnly:Ir}))))}),ct=Ce.forwardRef(function(Ee,Ue){var _t=Ee.disabled,en=Ee.style,tn=Ee.prefixCls,It=Ee.value,Kt=Ee.prefix,En=Ee.suffix,Cn=Ee.addonBefore,jn=Ee.addonAfter,Vt=Ee.classes,_n=Ee.className,Sn=Ee.classNames,wr=(0,Ye.Z)(Ee,Xe),Ir=Ce.useRef(null),uo=function(wo){Ir.current&&(0,Y.nH)(Ir.current,wo)};return Ce.createElement(wn.Q,{inputElement:Ce.createElement(dt,(0,an.Z)({prefixCls:tn,disabled:_t,classNames:Sn,ref:(0,dr.sQ)(Ir,Ue)},wr)),className:_n,triggerFocus:uo,prefixCls:tn,value:It,disabled:_t,style:en,prefix:Kt,suffix:En,addonAfter:jn,addonBefore:Cn,classes:Vt,classNames:Sn,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"}})});ct.displayName="InputNumber";var Ft=ct,Jt=Ft,Rn=B(7514),Tr=B(88596),rn=B(72539),Er=B(99687),Dr=B(9384),br=B(6391),zr=B(74063),Br=B(40363),Or=B(91918),po=B(43740),or=B(79987),Lr=B(48826);const so=(Ee,Ue)=>{let{componentCls:_t,borderRadiusSM:en,borderRadiusLG:tn}=Ee;const It=Ue==="lg"?tn:en;return{[`&-${Ue}`]:{[`${_t}-handler-wrap`]:{borderStartEndRadius:It,borderEndEndRadius:It},[`${_t}-handler-up`]:{borderStartEndRadius:It},[`${_t}-handler-down`]:{borderEndEndRadius:It}}}},Ao=Ee=>{const{componentCls:Ue,lineWidth:_t,lineType:en,colorBorder:tn,borderRadius:It,fontSizeLG:Kt,controlHeightLG:En,controlHeightSM:Cn,colorError:jn,paddingInlineSM:Vt,colorTextDescription:_n,motionDurationMid:Sn,handleHoverColor:wr,paddingInline:Ir,paddingBlock:uo,handleBg:Nr,handleActiveBg:wo,colorTextDisabled:Ct,borderRadiusSM:jr,borderRadiusLG:$r,controlWidth:eo,handleVisible:to,handleBorderColor:Yr}=Ee;return[{[Ue]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,Or.Wf)(Ee)),(0,Br.ik)(Ee)),(0,Br.bi)(Ee,Ue)),{display:"inline-block",width:eo,margin:0,padding:0,border:`${_t}px ${en} ${tn}`,borderRadius:It,"&-rtl":{direction:"rtl",[`${Ue}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:Kt,borderRadius:$r,[`input${Ue}-input`]:{height:En-2*_t}},"&-sm":{padding:0,borderRadius:jr,[`input${Ue}-input`]:{height:Cn-2*_t,padding:`0 ${Vt}px`}},"&-out-of-range":{[`${Ue}-input-wrap`]:{input:{color:jn}}},"&-group":Object.assign(Object.assign(Object.assign({},(0,Or.Wf)(Ee)),(0,Br.s7)(Ee)),{"&-wrapper":{display:"inline-block",textAlign:"start",verticalAlign:"top",[`${Ue}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${Ue}-group-addon`]:{borderRadius:$r,fontSize:Ee.fontSizeLG}},"&-sm":{[`${Ue}-group-addon`]:{borderRadius:jr}},[`${Ue}-wrapper-disabled > ${Ue}-group-addon`]:Object.assign({},(0,Br.Xy)(Ee))}}),[`&-disabled ${Ue}-input`]:{cursor:"not-allowed"},[Ue]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},(0,Or.Wf)(Ee)),{width:"100%",padding:`${uo}px ${Ir}px`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:It,outline:0,transition:`all ${Sn} linear`,appearance:"textfield",fontSize:"inherit"}),(0,Br.nz)(Ee.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})}})},{[Ue]:Object.assign(Object.assign(Object.assign({[`&:hover ${Ue}-handler-wrap, &-focused ${Ue}-handler-wrap`]:{opacity:1},[`${Ue}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:Ee.handleWidth,height:"100%",background:Nr,borderStartStartRadius:0,borderStartEndRadius:It,borderEndEndRadius:It,borderEndStartRadius:0,opacity:to===!0?1:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`opacity ${Sn} linear ${Sn}`,[`${Ue}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${Ue}-handler-up-inner,
              ${Ue}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:Ee.handleFontSize}}},[`${Ue}-handler`]:{height:"50%",overflow:"hidden",color:_n,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${_t}px ${en} ${Yr}`,transition:`all ${Sn} linear`,"&:active":{background:wo},"&:hover":{height:"60%",[`
              ${Ue}-handler-up-inner,
              ${Ue}-handler-down-inner
            `]:{color:wr}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},(0,Or.Ro)()),{color:_n,transition:`all ${Sn} linear`,userSelect:"none"})},[`${Ue}-handler-up`]:{borderStartEndRadius:It},[`${Ue}-handler-down`]:{borderBlockStart:`${_t}px ${en} ${Yr}`,borderEndEndRadius:It}},so(Ee,"lg")),so(Ee,"sm")),{"&-disabled, &-readonly":{[`${Ue}-handler-wrap`]:{display:"none"},[`${Ue}-input`]:{color:"inherit"}},[`
          ${Ue}-handler-up-disabled,
          ${Ue}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${Ue}-handler-up-disabled:hover &-handler-up-inner,
          ${Ue}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:Ct}})},{[`${Ue}-borderless`]:{borderColor:"transparent",boxShadow:"none",[`${Ue}-handler-down`]:{borderBlockStartWidth:0}}}]},qr=Ee=>{const{componentCls:Ue,paddingBlock:_t,paddingInline:en,inputAffixPadding:tn,controlWidth:It,borderRadiusLG:Kt,borderRadiusSM:En}=Ee;return{[`${Ue}-affix-wrapper`]:Object.assign(Object.assign(Object.assign({},(0,Br.ik)(Ee)),(0,Br.bi)(Ee,`${Ue}-affix-wrapper`)),{position:"relative",display:"inline-flex",width:It,padding:0,paddingInlineStart:en,"&-lg":{borderRadius:Kt},"&-sm":{borderRadius:En},[`&:not(${Ue}-affix-wrapper-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${Ue}-disabled`]:{background:"transparent"},[`> div${Ue}`]:{width:"100%",border:"none",outline:"none",[`&${Ue}-focused`]:{boxShadow:"none !important"}},[`input${Ue}-input`]:{padding:`${_t}px 0`},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${Ue}-handler-wrap`]:{zIndex:2},[Ue]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:tn},"&-suffix":{position:"absolute",insetBlockStart:0,insetInlineEnd:0,zIndex:1,height:"100%",marginInlineEnd:en,marginInlineStart:tn}}})}};var T=(0,or.Z)("InputNumber",Ee=>{const Ue=(0,Lr.TS)(Ee,(0,Br.e5)(Ee));return[Ao(Ue),qr(Ue),(0,po.c)(Ue)]},Ee=>Object.assign(Object.assign({},(0,Br.TM)(Ee)),{controlWidth:90,handleWidth:Ee.controlHeightSM-Ee.lineWidth*2,handleFontSize:Ee.fontSize/2,handleVisible:"auto",handleActiveBg:Ee.colorFillAlter,handleBg:Ee.colorBgContainer,handleHoverColor:Ee.colorPrimary,handleBorderColor:Ee.colorBorder})),lo=function(Ee,Ue){var _t={};for(var en in Ee)Object.prototype.hasOwnProperty.call(Ee,en)&&Ue.indexOf(en)<0&&(_t[en]=Ee[en]);if(Ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tn=0,en=Object.getOwnPropertySymbols(Ee);tn<en.length;tn++)Ue.indexOf(en[tn])<0&&Object.prototype.propertyIsEnumerable.call(Ee,en[tn])&&(_t[en[tn]]=Ee[en[tn]]);return _t};const $n=Ce.forwardRef((Ee,Ue)=>{const{getPrefixCls:_t,direction:en}=Ce.useContext(Tr.E_),tn=Ce.useRef(null);Ce.useImperativeHandle(Ue,()=>tn.current);const{className:It,rootClassName:Kt,size:En,disabled:Cn,prefixCls:jn,addonBefore:Vt,addonAfter:_n,prefix:Sn,bordered:wr=!0,readOnly:Ir,status:uo,controls:Nr}=Ee,wo=lo(Ee,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","bordered","readOnly","status","controls"]),Ct=_t("input-number",jn),[jr,$r]=T(Ct),{compactSize:eo,compactItemClassnames:to}=(0,zr.ri)(Ct,en);let Yr=Ce.createElement(vn,{className:`${Ct}-handler-up-inner`}),_o=Ce.createElement(Z.Z,{className:`${Ct}-handler-down-inner`});const Ro=typeof Nr=="boolean"?Nr:void 0;typeof Nr=="object"&&(Yr=typeof Nr.upIcon=="undefined"?Yr:Ce.createElement("span",{className:`${Ct}-handler-up-inner`},Nr.upIcon),_o=typeof Nr.downIcon=="undefined"?_o:Ce.createElement("span",{className:`${Ct}-handler-down-inner`},Nr.downIcon));const{hasFeedback:ii,status:Xo,isFormItemInput:Yo,feedbackIcon:Qn}=Ce.useContext(br.aM),ai=(0,Rn.F)(Xo,uo),zo=(0,Dr.Z)(Co=>{var Bo;return(Bo=En!=null?En:eo)!==null&&Bo!==void 0?Bo:Co}),si=Ce.useContext(Er.Z),ui=Cn!=null?Cn:si,Wi=xt()({[`${Ct}-lg`]:zo==="large",[`${Ct}-sm`]:zo==="small",[`${Ct}-rtl`]:en==="rtl",[`${Ct}-borderless`]:!wr,[`${Ct}-in-form-item`]:Yo},(0,Rn.Z)(Ct,ai),$r),Xi=`${Ct}-group`,Hi=Ce.createElement(Jt,Object.assign({ref:tn,disabled:ui,className:xt()(It,Kt,to),upHandler:Yr,downHandler:_o,prefixCls:Ct,readOnly:Ir,controls:Ro,prefix:Sn,suffix:ii&&Qn,addonAfter:_n&&Ce.createElement(zr.BR,null,Ce.createElement(br.Ux,{override:!0,status:!0},_n)),addonBefore:Vt&&Ce.createElement(zr.BR,null,Ce.createElement(br.Ux,{override:!0,status:!0},Vt)),classNames:{input:Wi},classes:{affixWrapper:xt()((0,Rn.Z)(`${Ct}-affix-wrapper`,ai,ii),{[`${Ct}-affix-wrapper-sm`]:zo==="small",[`${Ct}-affix-wrapper-lg`]:zo==="large",[`${Ct}-affix-wrapper-rtl`]:en==="rtl",[`${Ct}-affix-wrapper-borderless`]:!wr},$r),wrapper:xt()({[`${Xi}-rtl`]:en==="rtl",[`${Ct}-wrapper-disabled`]:ui},$r),group:xt()({[`${Ct}-group-wrapper-sm`]:zo==="small",[`${Ct}-group-wrapper-lg`]:zo==="large",[`${Ct}-group-wrapper-rtl`]:en==="rtl"},(0,Rn.Z)(`${Ct}-group-wrapper`,ai,ii),$r)}},wo));return jr(Hi)}),Jr=$n,Ur=Ee=>Ce.createElement(rn.ZP,{theme:{components:{InputNumber:{handleVisible:!0}}}},Ce.createElement($n,Object.assign({},Ee)));Jr._InternalPanelDoNotUseOrYouWillBeFired=Ur;var xr=Jr},53914:function(at,At,B){"use strict";B.d(At,{Z:function(){return Ke}});var Z=B(87363),an=B(84875),Ce=B.n(an),rt=B(88596),ln=B(6391),Tt=B(40363),vn=We=>{const{getPrefixCls:dt,direction:ct}=(0,Z.useContext)(rt.E_),{prefixCls:Ft,className:Jt}=We,Rn=dt("input-group",Ft),Tr=dt("input"),[rn,Er]=(0,Tt.ZP)(Tr),Dr=Ce()(Rn,{[`${Rn}-lg`]:We.size==="large",[`${Rn}-sm`]:We.size==="small",[`${Rn}-compact`]:We.compact,[`${Rn}-rtl`]:ct==="rtl"},Er,Jt),br=(0,Z.useContext)(ln.aM),zr=(0,Z.useMemo)(()=>Object.assign(Object.assign({},br),{isFormItemInput:!1}),[br]);return rn(Z.createElement("span",{className:Dr,style:We.style,onMouseEnter:We.onMouseEnter,onMouseLeave:We.onMouseLeave,onFocus:We.onFocus,onBlur:We.onBlur},Z.createElement(ln.aM.Provider,{value:zr},We.children)))},Zn=B(99053),xt=B(56920),Lt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},ot=Lt,wt=B(9462),Ye=function(dt,ct){return Z.createElement(wt.Z,(0,xt.Z)({},dt,{ref:ct,icon:ot}))},Et=Z.forwardRef(Ye),pt=B(61382),Ht=B(35822),wn=B(75586),pn=B(50181),dr=function(We,dt){var ct={};for(var Ft in We)Object.prototype.hasOwnProperty.call(We,Ft)&&dt.indexOf(Ft)<0&&(ct[Ft]=We[Ft]);if(We!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Jt=0,Ft=Object.getOwnPropertySymbols(We);Jt<Ft.length;Jt++)dt.indexOf(Ft[Jt])<0&&Object.prototype.propertyIsEnumerable.call(We,Ft[Jt])&&(ct[Ft[Jt]]=We[Ft[Jt]]);return ct};const Pn=We=>We?Z.createElement(pt.Z,null):Z.createElement(Et,null),sr={click:"onClick",hover:"onMouseOver"};var nn=Z.forwardRef((We,dt)=>{const{visibilityToggle:ct=!0}=We,Ft=typeof ct=="object"&&ct.visible!==void 0,[Jt,Rn]=(0,Z.useState)(()=>Ft?ct.visible:!1),Tr=(0,Z.useRef)(null);Z.useEffect(()=>{Ft&&Rn(ct.visible)},[Ft,ct]);const rn=(0,pn.Z)(Tr),Er=()=>{const{disabled:lo}=We;lo||(Jt&&rn(),Rn($n=>{var Jr;const Ur=!$n;return typeof ct=="object"&&((Jr=ct.onVisibleChange)===null||Jr===void 0||Jr.call(ct,Ur)),Ur}))},Dr=lo=>{const{action:$n="click",iconRender:Jr=Pn}=We,Ur=sr[$n]||"",xr=Jr(Jt),Ee={[Ur]:Er,className:`${lo}-icon`,key:"passwordIcon",onMouseDown:Ue=>{Ue.preventDefault()},onMouseUp:Ue=>{Ue.preventDefault()}};return Z.cloneElement(Z.isValidElement(xr)?xr:Z.createElement("span",null,xr),Ee)},{className:br,prefixCls:zr,inputPrefixCls:Br,size:Or}=We,po=dr(We,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:or}=Z.useContext(rt.E_),Lr=or("input",Br),so=or("input-password",zr),Ao=ct&&Dr(so),qr=Ce()(so,br,{[`${so}-${Or}`]:!!Or}),T=Object.assign(Object.assign({},(0,Ht.Z)(po,["suffix","iconRender","visibilityToggle"])),{type:Jt?"text":"password",className:qr,prefixCls:Lr,suffix:Ao});return Or&&(T.size=Or),Z.createElement(Zn.Z,Object.assign({ref:(0,wn.sQ)(dt,Tr)},T))}),ur=B(88832),lt=B(71594),ft=B(54145),He=B(9384),Fe=B(74063),se=function(We,dt){var ct={};for(var Ft in We)Object.prototype.hasOwnProperty.call(We,Ft)&&dt.indexOf(Ft)<0&&(ct[Ft]=We[Ft]);if(We!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Jt=0,Ft=Object.getOwnPropertySymbols(We);Jt<Ft.length;Jt++)dt.indexOf(Ft[Jt])<0&&Object.prototype.propertyIsEnumerable.call(We,Ft[Jt])&&(ct[Ft[Jt]]=We[Ft[Jt]]);return ct},ce=Z.forwardRef((We,dt)=>{const{prefixCls:ct,inputPrefixCls:Ft,className:Jt,size:Rn,suffix:Tr,enterButton:rn=!1,addonAfter:Er,loading:Dr,disabled:br,onSearch:zr,onChange:Br,onCompositionStart:Or,onCompositionEnd:po}=We,or=se(We,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:Lr,direction:so}=Z.useContext(rt.E_),Ao=Z.useRef(!1),qr=Lr("input-search",ct),T=Lr("input",Ft),{compactSize:lo}=(0,Fe.ri)(qr,so),$n=(0,He.Z)(Vt=>{var _n;return(_n=Rn!=null?Rn:lo)!==null&&_n!==void 0?_n:Vt}),Jr=Z.useRef(null),Ur=Vt=>{Vt&&Vt.target&&Vt.type==="click"&&zr&&zr(Vt.target.value,Vt,{source:"clear"}),Br&&Br(Vt)},xr=Vt=>{var _n;document.activeElement===((_n=Jr.current)===null||_n===void 0?void 0:_n.input)&&Vt.preventDefault()},Ee=Vt=>{var _n,Sn;zr&&zr((Sn=(_n=Jr.current)===null||_n===void 0?void 0:_n.input)===null||Sn===void 0?void 0:Sn.value,Vt,{source:"input"})},Ue=Vt=>{Ao.current||Dr||Ee(Vt)},_t=typeof rn=="boolean"?Z.createElement(ur.Z,null):null,en=`${qr}-button`;let tn;const It=rn||{},Kt=It.type&&It.type.__ANT_BUTTON===!0;Kt||It.type==="button"?tn=(0,lt.Tm)(It,Object.assign({onMouseDown:xr,onClick:Vt=>{var _n,Sn;(Sn=(_n=It==null?void 0:It.props)===null||_n===void 0?void 0:_n.onClick)===null||Sn===void 0||Sn.call(_n,Vt),Ee(Vt)},key:"enterButton"},Kt?{className:en,size:$n}:{})):tn=Z.createElement(ft.ZP,{className:en,type:rn?"primary":void 0,size:$n,disabled:br,key:"enterButton",onMouseDown:xr,onClick:Ee,loading:Dr,icon:_t},rn),Er&&(tn=[tn,(0,lt.Tm)(Er,{key:"addonAfter"})]);const En=Ce()(qr,{[`${qr}-rtl`]:so==="rtl",[`${qr}-${$n}`]:!!$n,[`${qr}-with-button`]:!!rn},Jt),Cn=Vt=>{Ao.current=!0,Or==null||Or(Vt)},jn=Vt=>{Ao.current=!1,po==null||po(Vt)};return Z.createElement(Zn.Z,Object.assign({ref:(0,wn.sQ)(Jr,dt),onPressEnter:Ue},or,{size:$n,onCompositionStart:Cn,onCompositionEnd:jn,prefixCls:T,addonAfter:tn,suffix:Tr,onChange:Ur,className:En,disabled:br}))}),ve=B(71352);const Xe=Zn.Z;Xe.Group=vn,Xe.Search=ce,Xe.TextArea=ve.Z,Xe.Password=nn;var Ke=Xe},91711:function(at,At,B){"use strict";B.d(At,{Z:function(){return Ja}});var Z=B(87363),an=B(60859),Ce=B(12345),rt=B(56920),ln={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Tt=ln,ye=B(9462),vn=function(C,Ie){return Z.createElement(ye.Z,(0,rt.Z)({},C,{ref:Ie,icon:Tt}))},Zn=Z.forwardRef(vn),xt=B(84875),Lt=B.n(xt),ot=B(25940),wt=B(93914),Ye=B(90885),Et=B(91744),pt=B(48385),Ht=B(96608),wn=B(28922),pn=B(79681),dr=(0,Z.createContext)(null),Pn=Z.forwardRef(function(S,C){var Ie=S.prefixCls,Me=S.className,Be=S.style,Ge=S.id,ht=S.active,yt=S.tabKey,zt=S.children;return Z.createElement("div",{id:Ge&&"".concat(Ge,"-panel-").concat(yt),role:"tabpanel",tabIndex:ht?0:-1,"aria-labelledby":Ge&&"".concat(Ge,"-tab-").concat(yt),"aria-hidden":!ht,style:Be,className:Lt()(Ie,ht&&"".concat(Ie,"-active"),Me),ref:C},zt)}),sr=Pn,mn=["key","forceRender","style","className"];function nn(S){var C=S.id,Ie=S.activeKey,Me=S.animated,Be=S.tabPosition,Ge=S.destroyInactiveTabPane,ht=Z.useContext(dr),yt=ht.prefixCls,zt=ht.tabs,sn=Me.tabPane,Mn="".concat(yt,"-tabpane");return Z.createElement("div",{className:Lt()("".concat(yt,"-content-holder"))},Z.createElement("div",{className:Lt()("".concat(yt,"-content"),"".concat(yt,"-content-").concat(Be),(0,ot.Z)({},"".concat(yt,"-content-animated"),sn))},zt.map(function(un){var Tn=un.key,dn=un.forceRender,bn=un.style,qn=un.className,nr=(0,pt.Z)(un,mn),Jn=Tn===Ie;return Z.createElement(pn.ZP,(0,rt.Z)({key:Tn,visible:Jn,forceRender:dn,removeOnLeave:!!Ge,leavedClassName:"".concat(Mn,"-hidden")},Me.tabPaneMotion),function(ir,Xn){var Ar=ir.style,cr=ir.className;return Z.createElement(sr,(0,rt.Z)({},nr,{prefixCls:Mn,id:C,tabKey:Tn,animated:sn,active:Jn,style:(0,wt.Z)((0,wt.Z)({},bn),Ar),className:Lt()(qn,cr),ref:Xn}))})})))}var ur=B(59816),lt=B(92291),ft=B(84036),He=B(75586),Fe={width:0,height:0,left:0,top:0};function se(S,C,Ie){return(0,Z.useMemo)(function(){for(var Me,Be=new Map,Ge=C.get((Me=S[0])===null||Me===void 0?void 0:Me.key)||Fe,ht=Ge.left+Ge.width,yt=0;yt<S.length;yt+=1){var zt=S[yt].key,sn=C.get(zt);if(!sn){var Mn;sn=C.get((Mn=S[yt-1])===null||Mn===void 0?void 0:Mn.key)||Fe}var un=Be.get(zt)||(0,wt.Z)({},sn);un.right=ht-un.left-un.width,Be.set(zt,un)}return Be},[S.map(function(Me){return Me.key}).join("_"),C,Ie])}function Y(S,C){var Ie=Z.useRef(S),Me=Z.useState({}),Be=(0,Ye.Z)(Me,2),Ge=Be[1];function ht(yt){var zt=typeof yt=="function"?yt(Ie.current):yt;zt!==Ie.current&&C(zt,Ie.current),Ie.current=zt,Ge({})}return[Ie.current,ht]}var ce=.1,ve=.01,Xe=20,Ke=Math.pow(.995,Xe);function We(S,C){var Ie=(0,Z.useState)(),Me=(0,Ye.Z)(Ie,2),Be=Me[0],Ge=Me[1],ht=(0,Z.useState)(0),yt=(0,Ye.Z)(ht,2),zt=yt[0],sn=yt[1],Mn=(0,Z.useState)(0),un=(0,Ye.Z)(Mn,2),Tn=un[0],dn=un[1],bn=(0,Z.useState)(),qn=(0,Ye.Z)(bn,2),nr=qn[0],Jn=qn[1],ir=(0,Z.useRef)();function Xn(kn){var er=kn.touches[0],Bn=er.screenX,Bt=er.screenY;Ge({x:Bn,y:Bt}),window.clearInterval(ir.current)}function Ar(kn){if(Be){kn.preventDefault();var er=kn.touches[0],Bn=er.screenX,Bt=er.screenY;Ge({x:Bn,y:Bt});var cn=Bn-Be.x,Un=Bt-Be.y;C(cn,Un);var ar=Date.now();sn(ar),dn(ar-zt),Jn({x:cn,y:Un})}}function cr(){if(Be&&(Ge(null),Jn(null),nr)){var kn=nr.x/Tn,er=nr.y/Tn,Bn=Math.abs(kn),Bt=Math.abs(er);if(Math.max(Bn,Bt)<ce)return;var cn=kn,Un=er;ir.current=window.setInterval(function(){if(Math.abs(cn)<ve&&Math.abs(Un)<ve){window.clearInterval(ir.current);return}cn*=Ke,Un*=Ke,C(cn*Xe,Un*Xe)},Xe)}}var Dn=(0,Z.useRef)();function Yn(kn){var er=kn.deltaX,Bn=kn.deltaY,Bt=0,cn=Math.abs(er),Un=Math.abs(Bn);cn===Un?Bt=Dn.current==="x"?er:Bn:cn>Un?(Bt=er,Dn.current="x"):(Bt=Bn,Dn.current="y"),C(-Bt,-Bt)&&kn.preventDefault()}var hr=(0,Z.useRef)(null);hr.current={onTouchStart:Xn,onTouchMove:Ar,onTouchEnd:cr,onWheel:Yn},Z.useEffect(function(){function kn(cn){hr.current.onTouchStart(cn)}function er(cn){hr.current.onTouchMove(cn)}function Bn(cn){hr.current.onTouchEnd(cn)}function Bt(cn){hr.current.onWheel(cn)}return document.addEventListener("touchmove",er,{passive:!1}),document.addEventListener("touchend",Bn,{passive:!1}),S.current.addEventListener("touchstart",kn,{passive:!1}),S.current.addEventListener("wheel",Bt),function(){document.removeEventListener("touchmove",er),document.removeEventListener("touchend",Bn)}},[])}var dt=B(42471);function ct(S){var C=(0,Z.useState)(0),Ie=(0,Ye.Z)(C,2),Me=Ie[0],Be=Ie[1],Ge=(0,Z.useRef)(0),ht=(0,Z.useRef)();return ht.current=S,(0,dt.o)(function(){var yt;(yt=ht.current)===null||yt===void 0||yt.call(ht)},[Me]),function(){Ge.current===Me&&(Ge.current+=1,Be(Ge.current))}}function Ft(S){var C=(0,Z.useRef)([]),Ie=(0,Z.useState)({}),Me=(0,Ye.Z)(Ie,2),Be=Me[1],Ge=(0,Z.useRef)(typeof S=="function"?S():S),ht=ct(function(){var zt=Ge.current;C.current.forEach(function(sn){zt=sn(zt)}),C.current=[],Ge.current=zt,Be({})});function yt(zt){C.current.push(zt),ht()}return[Ge.current,yt]}var Jt={width:0,height:0,left:0,top:0,right:0};function Rn(S,C,Ie,Me,Be,Ge,ht){var yt=ht.tabs,zt=ht.tabPosition,sn=ht.rtl,Mn,un,Tn;return["top","bottom"].includes(zt)?(Mn="width",un=sn?"right":"left",Tn=Math.abs(Ie)):(Mn="height",un="top",Tn=-Ie),(0,Z.useMemo)(function(){if(!yt.length)return[0,0];for(var dn=yt.length,bn=dn,qn=0;qn<dn;qn+=1){var nr=S.get(yt[qn].key)||Jt;if(nr[un]+nr[Mn]>Tn+C){bn=qn-1;break}}for(var Jn=0,ir=dn-1;ir>=0;ir-=1){var Xn=S.get(yt[ir].key)||Jt;if(Xn[un]<Tn){Jn=ir+1;break}}return Jn>=bn?[0,0]:[Jn,bn]},[S,C,Me,Be,Ge,Tn,zt,yt.map(function(dn){return dn.key}).join("_"),sn])}function Tr(S){var C;return S instanceof Map?(C={},S.forEach(function(Ie,Me){C[Me]=Ie})):C=S,JSON.stringify(C)}var rn="TABS_DQ";function Er(S){return String(S).replace(/"/g,rn)}function Dr(S,C,Ie,Me){return!(!Ie||Me||S===!1||S===void 0&&(C===!1||C===null))}function br(S,C){var Ie=S.prefixCls,Me=S.editable,Be=S.locale,Ge=S.style;return!Me||Me.showAdd===!1?null:Z.createElement("button",{ref:C,type:"button",className:"".concat(Ie,"-nav-add"),style:Ge,"aria-label":(Be==null?void 0:Be.addAriaLabel)||"Add tab",onClick:function(yt){Me.onEdit("add",{event:yt})}},Me.addIcon||"+")}var zr=Z.forwardRef(br),Br=Z.forwardRef(function(S,C){var Ie=S.position,Me=S.prefixCls,Be=S.extra;if(!Be)return null;var Ge,ht={};return(0,Et.Z)(Be)==="object"&&!Z.isValidElement(Be)?ht=Be:ht.right=Be,Ie==="right"&&(Ge=ht.right),Ie==="left"&&(Ge=ht.left),Ge?Z.createElement("div",{className:"".concat(Me,"-extra-content"),ref:C},Ge):null}),Or=Br,po=B(63504),or=B(21614),Lr=B(83251);function so(S,C){var Ie=S.prefixCls,Me=S.id,Be=S.tabs,Ge=S.locale,ht=S.mobile,yt=S.moreIcon,zt=yt===void 0?"More":yt,sn=S.moreTransitionName,Mn=S.style,un=S.className,Tn=S.editable,dn=S.tabBarGutter,bn=S.rtl,qn=S.removeAriaLabel,nr=S.onTabClick,Jn=S.getPopupContainer,ir=S.popupClassName,Xn=(0,Z.useState)(!1),Ar=(0,Ye.Z)(Xn,2),cr=Ar[0],Dn=Ar[1],Yn=(0,Z.useState)(null),hr=(0,Ye.Z)(Yn,2),kn=hr[0],er=hr[1],Bn="".concat(Me,"-more-popup"),Bt="".concat(Ie,"-dropdown"),cn=kn!==null?"".concat(Bn,"-").concat(kn):null,Un=Ge==null?void 0:Ge.dropdownAriaLabel;function ar(mt,Fn){mt.preventDefault(),mt.stopPropagation(),Tn.onEdit("remove",{key:Fn,event:mt})}var mo=Z.createElement(or.ZP,{onClick:function(Fn){var Vr=Fn.key,co=Fn.domEvent;nr(Vr,co),Dn(!1)},prefixCls:"".concat(Bt,"-menu"),id:Bn,tabIndex:-1,role:"listbox","aria-activedescendant":cn,selectedKeys:[kn],"aria-label":Un!==void 0?Un:"expanded dropdown"},Be.map(function(mt){var Fn=mt.closable,Vr=mt.disabled,co=mt.closeIcon,go=mt.key,Ho=mt.label,Ko=Dr(Fn,co,Tn,Vr);return Z.createElement(or.sN,{key:go,id:"".concat(Bn,"-").concat(go),role:"option","aria-controls":Me&&"".concat(Me,"-panel-").concat(go),disabled:Vr},Z.createElement("span",null,Ho),Ko&&Z.createElement("button",{type:"button","aria-label":qn||"remove",tabIndex:0,className:"".concat(Bt,"-menu-item-remove"),onClick:function(fo){fo.stopPropagation(),ar(fo,go)}},co||Tn.removeIcon||"\xD7"))}));function Do(mt){for(var Fn=Be.filter(function(Ko){return!Ko.disabled}),Vr=Fn.findIndex(function(Ko){return Ko.key===kn})||0,co=Fn.length,go=0;go<co;go+=1){Vr=(Vr+mt+co)%co;var Ho=Fn[Vr];if(!Ho.disabled){er(Ho.key);return}}}function Oo(mt){var Fn=mt.which;if(!cr){[Lr.Z.DOWN,Lr.Z.SPACE,Lr.Z.ENTER].includes(Fn)&&(Dn(!0),mt.preventDefault());return}switch(Fn){case Lr.Z.UP:Do(-1),mt.preventDefault();break;case Lr.Z.DOWN:Do(1),mt.preventDefault();break;case Lr.Z.ESC:Dn(!1);break;case Lr.Z.SPACE:case Lr.Z.ENTER:kn!==null&&nr(kn,mt);break}}(0,Z.useEffect)(function(){var mt=document.getElementById(cn);mt&&mt.scrollIntoView&&mt.scrollIntoView(!1)},[kn]),(0,Z.useEffect)(function(){cr||er(null)},[cr]);var Mt=(0,ot.Z)({},bn?"marginRight":"marginLeft",dn);Be.length||(Mt.visibility="hidden",Mt.order=1);var Pt=Lt()((0,ot.Z)({},"".concat(Bt,"-rtl"),bn)),In=ht?null:Z.createElement(po.Z,{prefixCls:Bt,overlay:mo,trigger:["hover"],visible:Be.length?cr:!1,transitionName:sn,onVisibleChange:Dn,overlayClassName:Lt()(Pt,ir),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:Jn},Z.createElement("button",{type:"button",className:"".concat(Ie,"-nav-more"),style:Mt,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":Bn,id:"".concat(Me,"-more"),"aria-expanded":cr,onKeyDown:Oo},zt));return Z.createElement("div",{className:Lt()("".concat(Ie,"-nav-operations"),un),style:Mn,ref:C},In,Z.createElement(zr,{prefixCls:Ie,locale:Ge,editable:Tn}))}var Ao=Z.memo(Z.forwardRef(so),function(S,C){return C.tabMoving});function qr(S){var C,Ie=S.prefixCls,Me=S.id,Be=S.active,Ge=S.tab,ht=Ge.key,yt=Ge.label,zt=Ge.disabled,sn=Ge.closeIcon,Mn=S.closable,un=S.renderWrapper,Tn=S.removeAriaLabel,dn=S.editable,bn=S.onClick,qn=S.onFocus,nr=S.style,Jn="".concat(Ie,"-tab"),ir=Dr(Mn,sn,dn,zt);function Xn(Dn){zt||bn(Dn)}function Ar(Dn){Dn.preventDefault(),Dn.stopPropagation(),dn.onEdit("remove",{key:ht,event:Dn})}var cr=Z.createElement("div",{key:ht,"data-node-key":Er(ht),className:Lt()(Jn,(C={},(0,ot.Z)(C,"".concat(Jn,"-with-remove"),ir),(0,ot.Z)(C,"".concat(Jn,"-active"),Be),(0,ot.Z)(C,"".concat(Jn,"-disabled"),zt),C)),style:nr,onClick:Xn},Z.createElement("div",{role:"tab","aria-selected":Be,id:Me&&"".concat(Me,"-tab-").concat(ht),className:"".concat(Jn,"-btn"),"aria-controls":Me&&"".concat(Me,"-panel-").concat(ht),"aria-disabled":zt,tabIndex:zt?null:0,onClick:function(Yn){Yn.stopPropagation(),Xn(Yn)},onKeyDown:function(Yn){[Lr.Z.SPACE,Lr.Z.ENTER].includes(Yn.which)&&(Yn.preventDefault(),Xn(Yn))},onFocus:qn},yt),ir&&Z.createElement("button",{type:"button","aria-label":Tn||"remove",tabIndex:0,className:"".concat(Jn,"-remove"),onClick:function(Yn){Yn.stopPropagation(),Ar(Yn)}},sn||dn.removeIcon||"\xD7"));return un?un(cr):cr}var T=qr,lo=B(4447),$n=function(C){var Ie=C.activeTabOffset,Me=C.horizontal,Be=C.rtl,Ge=C.indicatorSize,ht=(0,Z.useState)(),yt=(0,Ye.Z)(ht,2),zt=yt[0],sn=yt[1],Mn=(0,Z.useRef)(),un=function(bn){return typeof Ge=="function"?Ge(bn):typeof Ge=="number"?Ge:bn};function Tn(){lo.Z.cancel(Mn.current)}return(0,Z.useEffect)(function(){var dn={};return Ie&&(Me?(Be?(dn.right=Ie.right+Ie.width/2,dn.transform="translateX(50%)"):(dn.left=Ie.left+Ie.width/2,dn.transform="translateX(-50%)"),dn.width=un(Ie.width)):(dn.top=Ie.top+Ie.height/2,dn.transform="translateY(-50%)",dn.height=un(Ie.height))),Tn(),Mn.current=(0,lo.Z)(function(){sn(dn)}),Tn},[Ie,Me,Be,Ge]),{style:zt}},Jr=$n,Ur=function(C){var Ie=C.current||{},Me=Ie.offsetWidth,Be=Me===void 0?0:Me,Ge=Ie.offsetHeight,ht=Ge===void 0?0:Ge;return[Be,ht]},xr=function(C,Ie){return C[Ie?0:1]};function Ee(S,C){var Ie,Me=Z.useContext(dr),Be=Me.prefixCls,Ge=Me.tabs,ht=S.className,yt=S.style,zt=S.id,sn=S.animated,Mn=S.activeKey,un=S.rtl,Tn=S.extra,dn=S.editable,bn=S.locale,qn=S.tabPosition,nr=S.tabBarGutter,Jn=S.children,ir=S.onTabClick,Xn=S.onTabScroll,Ar=S.indicatorSize,cr=(0,Z.useRef)(),Dn=(0,Z.useRef)(),Yn=(0,Z.useRef)(),hr=(0,Z.useRef)(),kn=(0,Z.useRef)(),er=(0,Z.useRef)(),Bn=(0,Z.useRef)(),Bt=qn==="top"||qn==="bottom",cn=Y(0,function(rr,On){Bt&&Xn&&Xn({direction:rr>On?"left":"right"})}),Un=(0,Ye.Z)(cn,2),ar=Un[0],mo=Un[1],Do=Y(0,function(rr,On){!Bt&&Xn&&Xn({direction:rr>On?"top":"bottom"})}),Oo=(0,Ye.Z)(Do,2),Mt=Oo[0],Pt=Oo[1],In=(0,Z.useState)([0,0]),mt=(0,Ye.Z)(In,2),Fn=mt[0],Vr=mt[1],co=(0,Z.useState)([0,0]),go=(0,Ye.Z)(co,2),Ho=go[0],Ko=go[1],Qo=(0,Z.useState)([0,0]),fo=(0,Ye.Z)(Qo,2),Ps=fo[0],xa=fo[1],na=(0,Z.useState)([0,0]),qo=(0,Ye.Z)(na,2),wa=qo[0],vr=qo[1],Jo=Ft(new Map),Si=(0,Ye.Z)(Jo,2),es=Si[0],ci=Si[1],Ti=se(Ge,es,Ho[0]),fi=xr(Fn,Bt),ra=xr(Ho,Bt),_a=xr(Ps,Bt),Fs=xr(wa,Bt),zs=fi<ra+_a,Uo=zs?fi-Fs:fi-_a,Fu="".concat(Be,"-nav-operations-hidden"),li=0,Ii=0;Bt&&un?(li=0,Ii=Math.max(0,ra-Uo)):(li=Math.min(0,Uo-ra),Ii=0);function di(rr){return rr<li?li:rr>Ii?Ii:rr}var Bs=(0,Z.useRef)(),zu=(0,Z.useState)(),hi=(0,Ye.Z)(zu,2),Sa=hi[0],Ni=hi[1];function Ta(){Ni(Date.now())}function ei(){window.clearTimeout(Bs.current)}We(hr,function(rr,On){function Wr(Xr,Lo){Xr(function(Mo){var Uu=di(Mo+Lo);return Uu})}return zs?(Bt?Wr(mo,rr):Wr(Pt,On),ei(),Ta(),!0):!1}),(0,Z.useEffect)(function(){return ei(),Sa&&(Bs.current=window.setTimeout(function(){Ni(0)},100)),ei},[Sa]);var Us=Rn(Ti,Uo,Bt?ar:Mt,ra,_a,Fs,(0,wt.Z)((0,wt.Z)({},S),{},{tabs:Ge})),vi=(0,Ye.Z)(Us,2),ts=vi[0],Bu=vi[1],$s=(0,ft.Z)(function(){var rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mn,On=Ti.get(rr)||{width:0,height:0,left:0,right:0,top:0};if(Bt){var Wr=ar;un?On.right<ar?Wr=On.right:On.right+On.width>ar+Uo&&(Wr=On.right+On.width-Uo):On.left<-ar?Wr=-On.left:On.left+On.width>-ar+Uo&&(Wr=-(On.left+On.width-Uo)),Pt(0),mo(di(Wr))}else{var Xr=Mt;On.top<-Mt?Xr=-On.top:On.top+On.height>-Mt+Uo&&(Xr=-(On.top+On.height-Uo)),mo(0),Pt(di(Xr))}}),oa={};qn==="top"||qn==="bottom"?oa[un?"marginRight":"marginLeft"]=nr:oa.marginTop=nr;var ns=Ge.map(function(rr,On){var Wr=rr.key;return Z.createElement(T,{id:zt,prefixCls:Be,key:Wr,tab:rr,style:On===0?void 0:oa,closable:rr.closable,editable:dn,active:Wr===Mn,renderWrapper:Jn,removeAriaLabel:bn==null?void 0:bn.removeAriaLabel,onClick:function(Lo){ir(Wr,Lo)},onFocus:function(){$s(Wr),Ta(),hr.current&&(un||(hr.current.scrollLeft=0),hr.current.scrollTop=0)}})}),Vs=function(){return ci(function(){var On=new Map;return Ge.forEach(function(Wr){var Xr,Lo=Wr.key,Mo=(Xr=kn.current)===null||Xr===void 0?void 0:Xr.querySelector('[data-node-key="'.concat(Er(Lo),'"]'));Mo&&On.set(Lo,{width:Mo.offsetWidth,height:Mo.offsetHeight,left:Mo.offsetLeft,top:Mo.offsetTop})}),On})};(0,Z.useEffect)(function(){Vs()},[Ge.map(function(rr){return rr.key}).join("_")]);var Ia=ct(function(){var rr=Ur(cr),On=Ur(Dn),Wr=Ur(Yn);Vr([rr[0]-On[0]-Wr[0],rr[1]-On[1]-Wr[1]]);var Xr=Ur(Bn);xa(Xr);var Lo=Ur(er);vr(Lo);var Mo=Ur(kn);Ko([Mo[0]-Xr[0],Mo[1]-Xr[1]]),Vs()}),rs=Ge.slice(0,ts),pr=Ge.slice(Bu+1),os=[].concat((0,ur.Z)(rs),(0,ur.Z)(pr)),Na=Ti.get(Mn),$o=Jr({activeTabOffset:Na,horizontal:Bt,rtl:un,indicatorSize:Ar}),is=$o.style;(0,Z.useEffect)(function(){$s()},[Mn,li,Ii,Tr(Na),Tr(Ti),Bt]),(0,Z.useEffect)(function(){Ia()},[un]);var ia=!!os.length,Vo="".concat(Be,"-nav-wrap"),aa,Zi,ji,Ai;return Bt?un?(Zi=ar>0,aa=ar!==Ii):(aa=ar<0,Zi=ar!==li):(ji=Mt<0,Ai=Mt!==li),Z.createElement(lt.Z,{onResize:Ia},Z.createElement("div",{ref:(0,He.x1)(C,cr),role:"tablist",className:Lt()("".concat(Be,"-nav"),ht),style:yt,onKeyDown:function(){Ta()}},Z.createElement(Or,{ref:Dn,position:"left",extra:Tn,prefixCls:Be}),Z.createElement(lt.Z,{onResize:Ia},Z.createElement("div",{className:Lt()(Vo,(Ie={},(0,ot.Z)(Ie,"".concat(Vo,"-ping-left"),aa),(0,ot.Z)(Ie,"".concat(Vo,"-ping-right"),Zi),(0,ot.Z)(Ie,"".concat(Vo,"-ping-top"),ji),(0,ot.Z)(Ie,"".concat(Vo,"-ping-bottom"),Ai),Ie)),ref:hr},Z.createElement(lt.Z,{onResize:Ia},Z.createElement("div",{ref:kn,className:"".concat(Be,"-nav-list"),style:{transform:"translate(".concat(ar,"px, ").concat(Mt,"px)"),transition:Sa?"none":void 0}},ns,Z.createElement(zr,{ref:Bn,prefixCls:Be,locale:bn,editable:dn,style:(0,wt.Z)((0,wt.Z)({},ns.length===0?void 0:oa),{},{visibility:ia?"hidden":null})}),Z.createElement("div",{className:Lt()("".concat(Be,"-ink-bar"),(0,ot.Z)({},"".concat(Be,"-ink-bar-animated"),sn.inkBar)),style:is}))))),Z.createElement(Ao,(0,rt.Z)({},S,{removeAriaLabel:bn==null?void 0:bn.removeAriaLabel,ref:er,prefixCls:Be,tabs:os,className:!ia&&Fu,tabMoving:!!Sa})),Z.createElement(Or,{ref:Yn,position:"right",extra:Tn,prefixCls:Be})))}var Ue=Z.forwardRef(Ee),_t=["renderTabBar"],en=["label","key"];function tn(S){var C=S.renderTabBar,Ie=(0,pt.Z)(S,_t),Me=Z.useContext(dr),Be=Me.tabs;if(C){var Ge=(0,wt.Z)((0,wt.Z)({},Ie),{},{panes:Be.map(function(ht){var yt=ht.label,zt=ht.key,sn=(0,pt.Z)(ht,en);return Z.createElement(sr,(0,rt.Z)({tab:yt,key:zt,tabKey:zt},sn))})});return C(Ge,Ue)}return Z.createElement(Ue,Ie)}var It=B(29794);function Kt(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},C;return S===!1?C={inkBar:!1,tabPane:!1}:S===!0?C={inkBar:!0,tabPane:!1}:C=(0,wt.Z)({inkBar:!0},(0,Et.Z)(S)==="object"?S:{}),C.tabPaneMotion&&C.tabPane===void 0&&(C.tabPane=!0),!C.tabPaneMotion&&C.tabPane&&(C.tabPane=!1),C}var En=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicatorSize"],Cn=0;function jn(S,C){var Ie,Me=S.id,Be=S.prefixCls,Ge=Be===void 0?"rc-tabs":Be,ht=S.className,yt=S.items,zt=S.direction,sn=S.activeKey,Mn=S.defaultActiveKey,un=S.editable,Tn=S.animated,dn=S.tabPosition,bn=dn===void 0?"top":dn,qn=S.tabBarGutter,nr=S.tabBarStyle,Jn=S.tabBarExtraContent,ir=S.locale,Xn=S.moreIcon,Ar=S.moreTransitionName,cr=S.destroyInactiveTabPane,Dn=S.renderTabBar,Yn=S.onChange,hr=S.onTabClick,kn=S.onTabScroll,er=S.getPopupContainer,Bn=S.popupClassName,Bt=S.indicatorSize,cn=(0,pt.Z)(S,En),Un=Z.useMemo(function(){return(yt||[]).filter(function(vr){return vr&&(0,Et.Z)(vr)==="object"&&"key"in vr})},[yt]),ar=zt==="rtl",mo=Kt(Tn),Do=(0,Z.useState)(!1),Oo=(0,Ye.Z)(Do,2),Mt=Oo[0],Pt=Oo[1];(0,Z.useEffect)(function(){Pt((0,Ht.Z)())},[]);var In=(0,wn.Z)(function(){var vr;return(vr=Un[0])===null||vr===void 0?void 0:vr.key},{value:sn,defaultValue:Mn}),mt=(0,Ye.Z)(In,2),Fn=mt[0],Vr=mt[1],co=(0,Z.useState)(function(){return Un.findIndex(function(vr){return vr.key===Fn})}),go=(0,Ye.Z)(co,2),Ho=go[0],Ko=go[1];(0,Z.useEffect)(function(){var vr=Un.findIndex(function(Si){return Si.key===Fn});if(vr===-1){var Jo;vr=Math.max(0,Math.min(Ho,Un.length-1)),Vr((Jo=Un[vr])===null||Jo===void 0?void 0:Jo.key)}Ko(vr)},[Un.map(function(vr){return vr.key}).join("_"),Fn,Ho]);var Qo=(0,wn.Z)(null,{value:Me}),fo=(0,Ye.Z)(Qo,2),Ps=fo[0],xa=fo[1];(0,Z.useEffect)(function(){Me||(xa("rc-tabs-".concat(Cn)),Cn+=1)},[]);function na(vr,Jo){hr==null||hr(vr,Jo);var Si=vr!==Fn;Vr(vr),Si&&(Yn==null||Yn(vr))}var qo={id:Ps,activeKey:Fn,animated:mo,tabPosition:bn,rtl:ar,mobile:Mt},wa=(0,wt.Z)((0,wt.Z)({},qo),{},{editable:un,locale:ir,moreIcon:Xn,moreTransitionName:Ar,tabBarGutter:qn,onTabClick:na,onTabScroll:kn,extra:Jn,style:nr,panes:null,getPopupContainer:er,popupClassName:Bn,indicatorSize:Bt});return Z.createElement(dr.Provider,{value:{tabs:Un,prefixCls:Ge}},Z.createElement("div",(0,rt.Z)({ref:C,id:Me,className:Lt()(Ge,"".concat(Ge,"-").concat(bn),(Ie={},(0,ot.Z)(Ie,"".concat(Ge,"-mobile"),Mt),(0,ot.Z)(Ie,"".concat(Ge,"-editable"),un),(0,ot.Z)(Ie,"".concat(Ge,"-rtl"),ar),Ie),ht)},cn),Z.createElement(tn,(0,rt.Z)({},wa,{renderTabBar:Dn})),Z.createElement(nn,(0,rt.Z)({destroyInactiveTabPane:cr},qo,{animated:mo}))))}var Vt=Z.forwardRef(jn),_n=Vt,Sn=_n,wr=B(88596),Ir=B(9384),uo=B(75079);const Nr={motionAppear:!1,motionEnter:!0,motionLeave:!0};function wo(S){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inkBar:!0,tabPane:!1},Ie;return C===!1?Ie={inkBar:!1,tabPane:!1}:C===!0?Ie={inkBar:!0,tabPane:!0}:Ie=Object.assign({inkBar:!0},typeof C=="object"?C:{}),Ie.tabPane&&(Ie.tabPaneMotion=Object.assign(Object.assign({},Nr),{motionName:(0,uo.m)(S,"switch")})),Ie}var Ct=B(82149),jr=function(S,C){var Ie={};for(var Me in S)Object.prototype.hasOwnProperty.call(S,Me)&&C.indexOf(Me)<0&&(Ie[Me]=S[Me]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Be=0,Me=Object.getOwnPropertySymbols(S);Be<Me.length;Be++)C.indexOf(Me[Be])<0&&Object.prototype.propertyIsEnumerable.call(S,Me[Be])&&(Ie[Me[Be]]=S[Me[Be]]);return Ie};function $r(S){return S.filter(C=>C)}function eo(S,C){if(S)return S;const Ie=(0,Ct.Z)(C).map(Me=>{if(Z.isValidElement(Me)){const{key:Be,props:Ge}=Me,ht=Ge||{},{tab:yt}=ht,zt=jr(ht,["tab"]);return Object.assign(Object.assign({key:String(Be)},zt),{label:yt})}return null});return $r(Ie)}var to=B(91918),Yr=B(79987),_o=B(48826),Ro=B(53301),Xo=S=>{const{componentCls:C,motionDurationSlow:Ie}=S;return[{[C]:{[`${C}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${Ie}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${Ie}`}}}}},[(0,Ro.oN)(S,"slide-up"),(0,Ro.oN)(S,"slide-down")]]};const Yo=S=>{const{componentCls:C,tabsCardPadding:Ie,cardBg:Me,cardGutter:Be,colorBorderSecondary:Ge,itemSelectedColor:ht}=S;return{[`${C}-card`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-tab`]:{margin:0,padding:Ie,background:Me,border:`${S.lineWidth}px ${S.lineType} ${Ge}`,transition:`all ${S.motionDurationSlow} ${S.motionEaseInOut}`},[`${C}-tab-active`]:{color:ht,background:S.colorBgContainer},[`${C}-ink-bar`]:{visibility:"hidden"}},[`&${C}-top, &${C}-bottom`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-tab + ${C}-tab`]:{marginLeft:{_skip_check_:!0,value:`${Be}px`}}}},[`&${C}-top`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-tab`]:{borderRadius:`${S.borderRadiusLG}px ${S.borderRadiusLG}px 0 0`},[`${C}-tab-active`]:{borderBottomColor:S.colorBgContainer}}},[`&${C}-bottom`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-tab`]:{borderRadius:`0 0 ${S.borderRadiusLG}px ${S.borderRadiusLG}px`},[`${C}-tab-active`]:{borderTopColor:S.colorBgContainer}}},[`&${C}-left, &${C}-right`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-tab + ${C}-tab`]:{marginTop:`${Be}px`}}},[`&${C}-left`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-tab`]:{borderRadius:{_skip_check_:!0,value:`${S.borderRadiusLG}px 0 0 ${S.borderRadiusLG}px`}},[`${C}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:S.colorBgContainer}}}},[`&${C}-right`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${S.borderRadiusLG}px ${S.borderRadiusLG}px 0`}},[`${C}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:S.colorBgContainer}}}}}}},Qn=S=>{const{componentCls:C,itemHoverColor:Ie,dropdownEdgeChildVerticalPadding:Me}=S;return{[`${C}-dropdown`]:Object.assign(Object.assign({},(0,to.Wf)(S)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:S.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${C}-dropdown-menu`]:{maxHeight:S.tabsDropdownHeight,margin:0,padding:`${Me}px 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:S.colorBgContainer,backgroundClip:"padding-box",borderRadius:S.borderRadiusLG,outline:"none",boxShadow:S.boxShadowSecondary,"&-item":Object.assign(Object.assign({},to.vS),{display:"flex",alignItems:"center",minWidth:S.tabsDropdownWidth,margin:0,padding:`${S.paddingXXS}px ${S.paddingSM}px`,color:S.colorText,fontWeight:"normal",fontSize:S.fontSize,lineHeight:S.lineHeight,cursor:"pointer",transition:`all ${S.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:S.marginSM},color:S.colorTextDescription,fontSize:S.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:Ie}},"&:hover":{background:S.controlItemBgHover},"&-disabled":{"&, &:hover":{color:S.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},ai=S=>{const{componentCls:C,margin:Ie,colorBorderSecondary:Me,horizontalMargin:Be,verticalItemPadding:Ge,verticalItemMargin:ht}=S;return{[`${C}-top, ${C}-bottom`]:{flexDirection:"column",[`> ${C}-nav, > div > ${C}-nav`]:{margin:Be,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${S.lineWidth}px ${S.lineType} ${Me}`,content:"''"},[`${C}-ink-bar`]:{height:S.lineWidthBold,"&-animated":{transition:`width ${S.motionDurationSlow}, left ${S.motionDurationSlow},
            right ${S.motionDurationSlow}`}},[`${C}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:S.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:S.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:S.boxShadowTabsOverflowRight},[`&${C}-nav-wrap-ping-left::before`]:{opacity:1},[`&${C}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${C}-top`]:{[`> ${C}-nav,
        > div > ${C}-nav`]:{"&::before":{bottom:0},[`${C}-ink-bar`]:{bottom:0}}},[`${C}-bottom`]:{[`> ${C}-nav, > div > ${C}-nav`]:{order:1,marginTop:`${Ie}px`,marginBottom:0,"&::before":{top:0},[`${C}-ink-bar`]:{top:0}},[`> ${C}-content-holder, > div > ${C}-content-holder`]:{order:0}},[`${C}-left, ${C}-right`]:{[`> ${C}-nav, > div > ${C}-nav`]:{flexDirection:"column",minWidth:S.controlHeight*1.25,[`${C}-tab`]:{padding:Ge,textAlign:"center"},[`${C}-tab + ${C}-tab`]:{margin:ht},[`${C}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:S.controlHeight},"&::before":{top:0,boxShadow:S.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:S.boxShadowTabsOverflowBottom},[`&${C}-nav-wrap-ping-top::before`]:{opacity:1},[`&${C}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${C}-ink-bar`]:{width:S.lineWidthBold,"&-animated":{transition:`height ${S.motionDurationSlow}, top ${S.motionDurationSlow}`}},[`${C}-nav-list, ${C}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${C}-left`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${C}-content-holder, > div > ${C}-content-holder`]:{marginLeft:{_skip_check_:!0,value:`-${S.lineWidth}px`},borderLeft:{_skip_check_:!0,value:`${S.lineWidth}px ${S.lineType} ${S.colorBorder}`},[`> ${C}-content > ${C}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:S.paddingLG}}}},[`${C}-right`]:{[`> ${C}-nav, > div > ${C}-nav`]:{order:1,[`${C}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${C}-content-holder, > div > ${C}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:-S.lineWidth},borderRight:{_skip_check_:!0,value:`${S.lineWidth}px ${S.lineType} ${S.colorBorder}`},[`> ${C}-content > ${C}-tabpane`]:{paddingRight:{_skip_check_:!0,value:S.paddingLG}}}}}},zo=S=>{const{componentCls:C,cardPaddingSM:Ie,cardPaddingLG:Me,horizontalItemPaddingSM:Be,horizontalItemPaddingLG:Ge}=S;return{[C]:{"&-small":{[`> ${C}-nav`]:{[`${C}-tab`]:{padding:Be,fontSize:S.titleFontSizeSM}}},"&-large":{[`> ${C}-nav`]:{[`${C}-tab`]:{padding:Ge,fontSize:S.titleFontSizeLG}}}},[`${C}-card`]:{[`&${C}-small`]:{[`> ${C}-nav`]:{[`${C}-tab`]:{padding:Ie}},[`&${C}-bottom`]:{[`> ${C}-nav ${C}-tab`]:{borderRadius:`0 0 ${S.borderRadius}px ${S.borderRadius}px`}},[`&${C}-top`]:{[`> ${C}-nav ${C}-tab`]:{borderRadius:`${S.borderRadius}px ${S.borderRadius}px 0 0`}},[`&${C}-right`]:{[`> ${C}-nav ${C}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${S.borderRadius}px ${S.borderRadius}px 0`}}},[`&${C}-left`]:{[`> ${C}-nav ${C}-tab`]:{borderRadius:{_skip_check_:!0,value:`${S.borderRadius}px 0 0 ${S.borderRadius}px`}}}},[`&${C}-large`]:{[`> ${C}-nav`]:{[`${C}-tab`]:{padding:Me}}}}}},si=S=>{const{componentCls:C,itemActiveColor:Ie,itemHoverColor:Me,iconCls:Be,tabsHorizontalItemMargin:Ge,horizontalItemPadding:ht,itemSelectedColor:yt,itemColor:zt}=S,sn=`${C}-tab`;return{[sn]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:ht,fontSize:S.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:zt,"&-btn, &-remove":Object.assign({"&:focus:not(:focus-visible), &:active":{color:Ie}},(0,to.Qy)(S)),"&-btn":{outline:"none",transition:"all 0.3s"},"&-remove":{flex:"none",marginRight:{_skip_check_:!0,value:-S.marginXXS},marginLeft:{_skip_check_:!0,value:S.marginXS},color:S.colorTextDescription,fontSize:S.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${S.motionDurationSlow}`,"&:hover":{color:S.colorTextHeading}},"&:hover":{color:Me},[`&${sn}-active ${sn}-btn`]:{color:yt,textShadow:S.tabsActiveTextShadow},[`&${sn}-disabled`]:{color:S.colorTextDisabled,cursor:"not-allowed"},[`&${sn}-disabled ${sn}-btn, &${sn}-disabled ${C}-remove`]:{"&:focus, &:active":{color:S.colorTextDisabled}},[`& ${sn}-remove ${Be}`]:{margin:0},[Be]:{marginRight:{_skip_check_:!0,value:S.marginSM}}},[`${sn} + ${sn}`]:{margin:{_skip_check_:!0,value:Ge}}}},ui=S=>{const{componentCls:C,tabsHorizontalItemMarginRTL:Ie,iconCls:Me,cardGutter:Be}=S;return{[`${C}-rtl`]:{direction:"rtl",[`${C}-nav`]:{[`${C}-tab`]:{margin:{_skip_check_:!0,value:Ie},[`${C}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[Me]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:`${S.marginSM}px`}},[`${C}-tab-remove`]:{marginRight:{_skip_check_:!0,value:`${S.marginXS}px`},marginLeft:{_skip_check_:!0,value:`-${S.marginXXS}px`},[Me]:{margin:0}}}},[`&${C}-left`]:{[`> ${C}-nav`]:{order:1},[`> ${C}-content-holder`]:{order:0}},[`&${C}-right`]:{[`> ${C}-nav`]:{order:0},[`> ${C}-content-holder`]:{order:1}},[`&${C}-card${C}-top, &${C}-card${C}-bottom`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-tab + ${C}-tab`]:{marginRight:{_skip_check_:!0,value:Be},marginLeft:{_skip_check_:!0,value:0}}}}},[`${C}-dropdown-rtl`]:{direction:"rtl"},[`${C}-menu-item`]:{[`${C}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},Wi=S=>{const{componentCls:C,tabsCardPadding:Ie,cardHeight:Me,cardGutter:Be,itemHoverColor:Ge,itemActiveColor:ht,colorBorderSecondary:yt}=S;return{[C]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,to.Wf)(S)),{display:"flex",[`> ${C}-nav, > div > ${C}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${C}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${S.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${C}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${S.motionDurationSlow}`},[`${C}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${C}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${C}-nav-more`]:{position:"relative",padding:Ie,background:"transparent",border:0,color:S.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:S.controlHeightLG/8,transform:"translateY(100%)",content:"''"}},[`${C}-nav-add`]:Object.assign({minWidth:Me,marginLeft:{_skip_check_:!0,value:Be},padding:`0 ${S.paddingXS}px`,background:"transparent",border:`${S.lineWidth}px ${S.lineType} ${yt}`,borderRadius:`${S.borderRadiusLG}px ${S.borderRadiusLG}px 0 0`,outline:"none",cursor:"pointer",color:S.colorText,transition:`all ${S.motionDurationSlow} ${S.motionEaseInOut}`,"&:hover":{color:Ge},"&:active, &:focus:not(:focus-visible)":{color:ht}},(0,to.Qy)(S))},[`${C}-extra-content`]:{flex:"none"},[`${C}-ink-bar`]:{position:"absolute",background:S.inkBarColor,pointerEvents:"none"}}),si(S)),{[`${C}-content`]:{position:"relative",width:"100%"},[`${C}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${C}-tabpane`]:{outline:"none","&-hidden":{display:"none"}}}),[`${C}-centered`]:{[`> ${C}-nav, > div > ${C}-nav`]:{[`${C}-nav-wrap`]:{[`&:not([class*='${C}-nav-wrap-ping'])`]:{justifyContent:"center"}}}}}};var Xi=(0,Yr.Z)("Tabs",S=>{const C=(0,_o.TS)(S,{tabsCardPadding:S.cardPadding||`${(S.cardHeight-Math.round(S.fontSize*S.lineHeight))/2-S.lineWidth}px ${S.padding}px`,dropdownEdgeChildVerticalPadding:S.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${S.horizontalItemGutter}px`,tabsHorizontalItemMarginRTL:`0 0 0 ${S.horizontalItemGutter}px`});return[zo(C),ui(C),ai(C),Qn(C),Yo(C),Wi(C),Xo(C)]},S=>{const C=S.controlHeightLG;return{zIndexPopup:S.zIndexPopupBase+50,cardBg:S.colorFillAlter,cardHeight:C,cardPadding:"",cardPaddingSM:`${S.paddingXXS*1.5}px ${S.padding}px`,cardPaddingLG:`${S.paddingXS}px ${S.padding}px ${S.paddingXXS*1.5}px`,titleFontSize:S.fontSize,titleFontSizeLG:S.fontSizeLG,titleFontSizeSM:S.fontSize,inkBarColor:S.colorPrimary,horizontalMargin:`0 0 ${S.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${S.paddingSM}px 0`,horizontalItemPaddingSM:`${S.paddingXS}px 0`,horizontalItemPaddingLG:`${S.padding}px 0`,verticalItemPadding:`${S.paddingXS}px ${S.paddingLG}px`,verticalItemMargin:`${S.margin}px 0 0 0`,itemColor:S.colorText,itemSelectedColor:S.colorPrimary,itemHoverColor:S.colorPrimaryHover,itemActiveColor:S.colorPrimaryActive,cardGutter:S.marginXXS/2}}),Co=()=>null,Bo=function(S,C){var Ie={};for(var Me in S)Object.prototype.hasOwnProperty.call(S,Me)&&C.indexOf(Me)<0&&(Ie[Me]=S[Me]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Be=0,Me=Object.getOwnPropertySymbols(S);Be<Me.length;Be++)C.indexOf(Me[Be])<0&&Object.prototype.propertyIsEnumerable.call(S,Me[Be])&&(Ie[Me[Be]]=S[Me[Be]]);return Ie};const _i=S=>{const{type:C,className:Ie,rootClassName:Me,size:Be,onEdit:Ge,hideAdd:ht,centered:yt,addIcon:zt,popupClassName:sn,children:Mn,items:un,animated:Tn,style:dn,indicatorSize:bn}=S,qn=Bo(S,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","popupClassName","children","items","animated","style","indicatorSize"]),{prefixCls:nr,moreIcon:Jn=Z.createElement(Ce.Z,null)}=qn,{direction:ir,tabs:Xn,getPrefixCls:Ar,getPopupContainer:cr}=Z.useContext(wr.E_),Dn=Ar("tabs",nr),[Yn,hr]=Xi(Dn);let kn;C==="editable-card"&&(kn={onEdit:(ar,mo)=>{let{key:Do,event:Oo}=mo;Ge==null||Ge(ar==="add"?Oo:Do,ar)},removeIcon:Z.createElement(an.Z,null),addIcon:zt||Z.createElement(Zn,null),showAdd:ht!==!0});const er=Ar(),Bn=eo(un,Mn),Bt=wo(Dn,Tn),cn=(0,Ir.Z)(Be),Un=Object.assign(Object.assign({},Xn==null?void 0:Xn.style),dn);return Yn(Z.createElement(Sn,Object.assign({direction:ir,getPopupContainer:cr,moreTransitionName:`${er}-slide-up`},qn,{items:Bn,className:Lt()({[`${Dn}-${cn}`]:cn,[`${Dn}-card`]:["card","editable-card"].includes(C),[`${Dn}-editable-card`]:C==="editable-card",[`${Dn}-centered`]:yt},Xn==null?void 0:Xn.className,Ie,Me,hr),popupClassName:Lt()(sn,hr),style:Un,editable:kn,moreIcon:Jn,prefixCls:Dn,animated:Bt,indicatorSize:bn!=null?bn:Xn==null?void 0:Xn.indicatorSize})))};_i.TabPane=Co;var Ja=_i},5726:function(at){(function(At,B){at.exports=B()})(this,function(){"use strict";var At=1e3,B=6e4,Z=36e5,an="millisecond",Ce="second",rt="minute",ln="hour",Tt="day",ye="week",vn="month",Zn="quarter",xt="year",Lt="date",ot="Invalid Date",wt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ye=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Et={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ft){var He=["th","st","nd","rd"],Fe=ft%100;return"["+ft+(He[(Fe-20)%10]||He[Fe]||He[0])+"]"}},pt=function(ft,He,Fe){var se=String(ft);return!se||se.length>=He?ft:""+Array(He+1-se.length).join(Fe)+ft},Ht={s:pt,z:function(ft){var He=-ft.utcOffset(),Fe=Math.abs(He),se=Math.floor(Fe/60),Y=Fe%60;return(He<=0?"+":"-")+pt(se,2,"0")+":"+pt(Y,2,"0")},m:function ft(He,Fe){if(He.date()<Fe.date())return-ft(Fe,He);var se=12*(Fe.year()-He.year())+(Fe.month()-He.month()),Y=He.clone().add(se,vn),ce=Fe-Y<0,ve=He.clone().add(se+(ce?-1:1),vn);return+(-(se+(Fe-Y)/(ce?Y-ve:ve-Y))||0)},a:function(ft){return ft<0?Math.ceil(ft)||0:Math.floor(ft)},p:function(ft){return{M:vn,y:xt,w:ye,d:Tt,D:Lt,h:ln,m:rt,s:Ce,ms:an,Q:Zn}[ft]||String(ft||"").toLowerCase().replace(/s$/,"")},u:function(ft){return ft===void 0}},wn="en",pn={};pn[wn]=Et;var dr="$isDayjsObject",Pn=function(ft){return ft instanceof ur||!(!ft||!ft[dr])},sr=function ft(He,Fe,se){var Y;if(!He)return wn;if(typeof He=="string"){var ce=He.toLowerCase();pn[ce]&&(Y=ce),Fe&&(pn[ce]=Fe,Y=ce);var ve=He.split("-");if(!Y&&ve.length>1)return ft(ve[0])}else{var Xe=He.name;pn[Xe]=He,Y=Xe}return!se&&Y&&(wn=Y),Y||!se&&wn},mn=function(ft,He){if(Pn(ft))return ft.clone();var Fe=typeof He=="object"?He:{};return Fe.date=ft,Fe.args=arguments,new ur(Fe)},nn=Ht;nn.l=sr,nn.i=Pn,nn.w=function(ft,He){return mn(ft,{locale:He.$L,utc:He.$u,x:He.$x,$offset:He.$offset})};var ur=function(){function ft(Fe){this.$L=sr(Fe.locale,null,!0),this.parse(Fe),this.$x=this.$x||Fe.x||{},this[dr]=!0}var He=ft.prototype;return He.parse=function(Fe){this.$d=function(se){var Y=se.date,ce=se.utc;if(Y===null)return new Date(NaN);if(nn.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var ve=Y.match(wt);if(ve){var Xe=ve[2]-1||0,Ke=(ve[7]||"0").substring(0,3);return ce?new Date(Date.UTC(ve[1],Xe,ve[3]||1,ve[4]||0,ve[5]||0,ve[6]||0,Ke)):new Date(ve[1],Xe,ve[3]||1,ve[4]||0,ve[5]||0,ve[6]||0,Ke)}}return new Date(Y)}(Fe),this.init()},He.init=function(){var Fe=this.$d;this.$y=Fe.getFullYear(),this.$M=Fe.getMonth(),this.$D=Fe.getDate(),this.$W=Fe.getDay(),this.$H=Fe.getHours(),this.$m=Fe.getMinutes(),this.$s=Fe.getSeconds(),this.$ms=Fe.getMilliseconds()},He.$utils=function(){return nn},He.isValid=function(){return this.$d.toString()!==ot},He.isSame=function(Fe,se){var Y=mn(Fe);return this.startOf(se)<=Y&&Y<=this.endOf(se)},He.isAfter=function(Fe,se){return mn(Fe)<this.startOf(se)},He.isBefore=function(Fe,se){return this.endOf(se)<mn(Fe)},He.$g=function(Fe,se,Y){return nn.u(Fe)?this[se]:this.set(Y,Fe)},He.unix=function(){return Math.floor(this.valueOf()/1e3)},He.valueOf=function(){return this.$d.getTime()},He.startOf=function(Fe,se){var Y=this,ce=!!nn.u(se)||se,ve=nn.p(Fe),Xe=function(Tr,rn){var Er=nn.w(Y.$u?Date.UTC(Y.$y,rn,Tr):new Date(Y.$y,rn,Tr),Y);return ce?Er:Er.endOf(Tt)},Ke=function(Tr,rn){return nn.w(Y.toDate()[Tr].apply(Y.toDate("s"),(ce?[0,0,0,0]:[23,59,59,999]).slice(rn)),Y)},We=this.$W,dt=this.$M,ct=this.$D,Ft="set"+(this.$u?"UTC":"");switch(ve){case xt:return ce?Xe(1,0):Xe(31,11);case vn:return ce?Xe(1,dt):Xe(0,dt+1);case ye:var Jt=this.$locale().weekStart||0,Rn=(We<Jt?We+7:We)-Jt;return Xe(ce?ct-Rn:ct+(6-Rn),dt);case Tt:case Lt:return Ke(Ft+"Hours",0);case ln:return Ke(Ft+"Minutes",1);case rt:return Ke(Ft+"Seconds",2);case Ce:return Ke(Ft+"Milliseconds",3);default:return this.clone()}},He.endOf=function(Fe){return this.startOf(Fe,!1)},He.$set=function(Fe,se){var Y,ce=nn.p(Fe),ve="set"+(this.$u?"UTC":""),Xe=(Y={},Y[Tt]=ve+"Date",Y[Lt]=ve+"Date",Y[vn]=ve+"Month",Y[xt]=ve+"FullYear",Y[ln]=ve+"Hours",Y[rt]=ve+"Minutes",Y[Ce]=ve+"Seconds",Y[an]=ve+"Milliseconds",Y)[ce],Ke=ce===Tt?this.$D+(se-this.$W):se;if(ce===vn||ce===xt){var We=this.clone().set(Lt,1);We.$d[Xe](Ke),We.init(),this.$d=We.set(Lt,Math.min(this.$D,We.daysInMonth())).$d}else Xe&&this.$d[Xe](Ke);return this.init(),this},He.set=function(Fe,se){return this.clone().$set(Fe,se)},He.get=function(Fe){return this[nn.p(Fe)]()},He.add=function(Fe,se){var Y,ce=this;Fe=Number(Fe);var ve=nn.p(se),Xe=function(dt){var ct=mn(ce);return nn.w(ct.date(ct.date()+Math.round(dt*Fe)),ce)};if(ve===vn)return this.set(vn,this.$M+Fe);if(ve===xt)return this.set(xt,this.$y+Fe);if(ve===Tt)return Xe(1);if(ve===ye)return Xe(7);var Ke=(Y={},Y[rt]=B,Y[ln]=Z,Y[Ce]=At,Y)[ve]||1,We=this.$d.getTime()+Fe*Ke;return nn.w(We,this)},He.subtract=function(Fe,se){return this.add(-1*Fe,se)},He.format=function(Fe){var se=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||ot;var ce=Fe||"YYYY-MM-DDTHH:mm:ssZ",ve=nn.z(this),Xe=this.$H,Ke=this.$m,We=this.$M,dt=Y.weekdays,ct=Y.months,Ft=Y.meridiem,Jt=function(rn,Er,Dr,br){return rn&&(rn[Er]||rn(se,ce))||Dr[Er].slice(0,br)},Rn=function(rn){return nn.s(Xe%12||12,rn,"0")},Tr=Ft||function(rn,Er,Dr){var br=rn<12?"AM":"PM";return Dr?br.toLowerCase():br};return ce.replace(Ye,function(rn,Er){return Er||function(Dr){switch(Dr){case"YY":return String(se.$y).slice(-2);case"YYYY":return nn.s(se.$y,4,"0");case"M":return We+1;case"MM":return nn.s(We+1,2,"0");case"MMM":return Jt(Y.monthsShort,We,ct,3);case"MMMM":return Jt(ct,We);case"D":return se.$D;case"DD":return nn.s(se.$D,2,"0");case"d":return String(se.$W);case"dd":return Jt(Y.weekdaysMin,se.$W,dt,2);case"ddd":return Jt(Y.weekdaysShort,se.$W,dt,3);case"dddd":return dt[se.$W];case"H":return String(Xe);case"HH":return nn.s(Xe,2,"0");case"h":return Rn(1);case"hh":return Rn(2);case"a":return Tr(Xe,Ke,!0);case"A":return Tr(Xe,Ke,!1);case"m":return String(Ke);case"mm":return nn.s(Ke,2,"0");case"s":return String(se.$s);case"ss":return nn.s(se.$s,2,"0");case"SSS":return nn.s(se.$ms,3,"0");case"Z":return ve}return null}(rn)||ve.replace(":","")})},He.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},He.diff=function(Fe,se,Y){var ce,ve=this,Xe=nn.p(se),Ke=mn(Fe),We=(Ke.utcOffset()-this.utcOffset())*B,dt=this-Ke,ct=function(){return nn.m(ve,Ke)};switch(Xe){case xt:ce=ct()/12;break;case vn:ce=ct();break;case Zn:ce=ct()/3;break;case ye:ce=(dt-We)/6048e5;break;case Tt:ce=(dt-We)/864e5;break;case ln:ce=dt/Z;break;case rt:ce=dt/B;break;case Ce:ce=dt/At;break;default:ce=dt}return Y?ce:nn.a(ce)},He.daysInMonth=function(){return this.endOf(vn).$D},He.$locale=function(){return pn[this.$L]},He.locale=function(Fe,se){if(!Fe)return this.$L;var Y=this.clone(),ce=sr(Fe,se,!0);return ce&&(Y.$L=ce),Y},He.clone=function(){return nn.w(this.$d,this)},He.toDate=function(){return new Date(this.valueOf())},He.toJSON=function(){return this.isValid()?this.toISOString():null},He.toISOString=function(){return this.$d.toISOString()},He.toString=function(){return this.$d.toUTCString()},ft}(),lt=ur.prototype;return mn.prototype=lt,[["$ms",an],["$s",Ce],["$m",rt],["$H",ln],["$W",Tt],["$M",vn],["$y",xt],["$D",Lt]].forEach(function(ft){lt[ft[1]]=function(He){return this.$g(He,ft[0],ft[1])}}),mn.extend=function(ft,He){return ft.$i||(ft(He,ur,mn),ft.$i=!0),mn},mn.locale=sr,mn.isDayjs=Pn,mn.unix=function(ft){return mn(1e3*ft)},mn.en=pn[wn],mn.Ls=pn,mn.p={},mn})},63504:function(at,At,B){"use strict";B.d(At,{Z:function(){return ur}});var Z=B(56920),an=B(25940),Ce=B(90885),rt=B(48385),ln=B(78323),Tt=B(84875),ye=B.n(Tt),vn=B(75586),Zn=B(87363),xt=B.n(Zn),Lt=B(83251),ot=B(4447),wt=Lt.Z.ESC,Ye=Lt.Z.TAB;function Et(lt){var ft=lt.visible,He=lt.triggerRef,Fe=lt.onVisibleChange,se=lt.autoFocus,Y=lt.overlayRef,ce=Zn.useRef(!1),ve=function(){if(ft){var dt,ct;(dt=He.current)===null||dt===void 0||(ct=dt.focus)===null||ct===void 0||ct.call(dt),Fe==null||Fe(!1)}},Xe=function(){var dt;return(dt=Y.current)!==null&&dt!==void 0&&dt.focus?(Y.current.focus(),ce.current=!0,!0):!1},Ke=function(dt){switch(dt.keyCode){case wt:ve();break;case Ye:{var ct=!1;ce.current||(ct=Xe()),ct?dt.preventDefault():ve();break}}};Zn.useEffect(function(){return ft?(window.addEventListener("keydown",Ke),se&&(0,ot.Z)(Xe,3),function(){window.removeEventListener("keydown",Ke),ce.current=!1}):function(){ce.current=!1}},[ft])}var pt=(0,Zn.forwardRef)(function(lt,ft){var He=lt.overlay,Fe=lt.arrow,se=lt.prefixCls,Y=(0,Zn.useMemo)(function(){var ve;return typeof He=="function"?ve=He():ve=He,ve},[He]),ce=(0,vn.sQ)(ft,Y==null?void 0:Y.ref);return xt().createElement(xt().Fragment,null,Fe&&xt().createElement("div",{className:"".concat(se,"-arrow")}),xt().cloneElement(Y,{ref:(0,vn.Yr)(Y)?ce:void 0}))}),Ht=pt,wn={adjustX:1,adjustY:1},pn=[0,0],dr={topLeft:{points:["bl","tl"],overflow:wn,offset:[0,-4],targetOffset:pn},top:{points:["bc","tc"],overflow:wn,offset:[0,-4],targetOffset:pn},topRight:{points:["br","tr"],overflow:wn,offset:[0,-4],targetOffset:pn},bottomLeft:{points:["tl","bl"],overflow:wn,offset:[0,4],targetOffset:pn},bottom:{points:["tc","bc"],overflow:wn,offset:[0,4],targetOffset:pn},bottomRight:{points:["tr","br"],overflow:wn,offset:[0,4],targetOffset:pn}},Pn=dr,sr=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function mn(lt,ft){var He,Fe=lt.arrow,se=Fe===void 0?!1:Fe,Y=lt.prefixCls,ce=Y===void 0?"rc-dropdown":Y,ve=lt.transitionName,Xe=lt.animation,Ke=lt.align,We=lt.placement,dt=We===void 0?"bottomLeft":We,ct=lt.placements,Ft=ct===void 0?Pn:ct,Jt=lt.getPopupContainer,Rn=lt.showAction,Tr=lt.hideAction,rn=lt.overlayClassName,Er=lt.overlayStyle,Dr=lt.visible,br=lt.trigger,zr=br===void 0?["hover"]:br,Br=lt.autoFocus,Or=lt.overlay,po=lt.children,or=lt.onVisibleChange,Lr=(0,rt.Z)(lt,sr),so=xt().useState(),Ao=(0,Ce.Z)(so,2),qr=Ao[0],T=Ao[1],lo="visible"in lt?Dr:qr,$n=xt().useRef(null),Jr=xt().useRef(null),Ur=xt().useRef(null);xt().useImperativeHandle(ft,function(){return $n.current});var xr=function(Cn){T(Cn),or==null||or(Cn)};Et({visible:lo,triggerRef:Ur,onVisibleChange:xr,autoFocus:Br,overlayRef:Jr});var Ee=function(Cn){var jn=lt.onOverlayClick;T(!1),jn&&jn(Cn)},Ue=function(){return xt().createElement(Ht,{ref:Jr,overlay:Or,prefixCls:ce,arrow:se})},_t=function(){return typeof Or=="function"?Ue:Ue()},en=function(){var Cn=lt.minOverlayWidthMatchTrigger,jn=lt.alignPoint;return"minOverlayWidthMatchTrigger"in lt?Cn:!jn},tn=function(){var Cn=lt.openClassName;return Cn!==void 0?Cn:"".concat(ce,"-open")},It=xt().cloneElement(po,{className:ye()((He=po.props)===null||He===void 0?void 0:He.className,lo&&tn()),ref:(0,vn.Yr)(po)?(0,vn.sQ)(Ur,po.ref):void 0}),Kt=Tr;return!Kt&&zr.indexOf("contextMenu")!==-1&&(Kt=["click"]),xt().createElement(ln.Z,(0,Z.Z)({builtinPlacements:Ft},Lr,{prefixCls:ce,ref:$n,popupClassName:ye()(rn,(0,an.Z)({},"".concat(ce,"-show-arrow"),se)),popupStyle:Er,action:zr,showAction:Rn,hideAction:Kt,popupPlacement:dt,popupAlign:Ke,popupTransitionName:ve,popupAnimation:Xe,popupVisible:lo,stretch:en()?"minWidth":"",popup:_t(),onPopupVisibleChange:xr,onPopupClick:Ee,getPopupContainer:Jt}),It)}var nn=xt().forwardRef(mn),ur=nn},17600:function(at,At,B){"use strict";B.d(At,{Vq:function(){return uu}});var Z={};B.r(Z),B.d(Z,{components:function(){return di},dfs:function(){return hi},dijkstra:function(){return oa},dijkstraAll:function(){return Vs},findCycles:function(){return os},floydWarshall:function(){return Yc},isAcyclic:function(){return $u},postorder:function(){return Aa},preorder:function(){return Xu},prim:function(){return li},tarjan:function(){return rs},topsort:function(){return Ws}});const an=e=>typeof e=="string",Ce=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},rt=/-(\w)/g,ln=Ce(e=>e.replace(rt,(t,n)=>n?n.toUpperCase():"")),Tt=Array.isArray,ye=e=>typeof e=="number",vn=e=>Number.isNaN(Number(e)),Zn=e=>{const t=parseFloat(e);return vn(t)?e:t},xt=e=>e!==null&&typeof e=="object",Lt=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Lt(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Lt(t[n])}),t}return e},ot=(e,t)=>{const n=e[t];return xt(n)?n.cell:n},wt=(e,t,n)=>{const r=[];for(let o=0;o<e;o++)r[o]={in:0,out:0,all:0};return n&&n.forEach(o=>{const i=ot(o,"source"),a=ot(o,"target");i&&r[t[i]]&&(r[t[i]].out+=1,r[t[i]].all+=1),a&&r[t[a]]&&(r[t[a]].in+=1,r[t[a]].all+=1)}),r},Ye=(e,t)=>{const n={};return e.forEach(r=>{n[r.id]={in:0,out:0,all:0}}),t&&t.forEach(r=>{const o=ot(r,"source"),i=ot(r,"target");o&&(n[o].out+=1,n[o].all+=1),i&&(n[i].in+=1,n[i].all+=1)}),n},Et=e=>{const t=[],n=e.length;for(let r=0;r<n;r+=1){t[r]=[];for(let o=0;o<n;o+=1)r===o?t[r][o]=0:e[r][o]===0||!e[r][o]?t[r][o]=1/0:t[r][o]=e[r][o]}for(let r=0;r<n;r+=1)for(let o=0;o<n;o+=1)for(let i=0;i<n;i+=1)t[o][i]>t[o][r]+t[r][i]&&(t[o][i]=t[o][r]+t[r][i]);return t},pt=(e,t)=>{const{nodes:n,edges:r}=e,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((a,s)=>{i[a.id]=s;const u=[];o.push(u)}),r==null||r.forEach(a=>{const s=ot(a,"source"),u=ot(a,"target"),c=i[s],f=i[u];c===void 0||f===void 0||(o[c][f]=1,t||(o[f][c]=1))}),o},Ht=(e,t)=>{const n=[];return e.forEach(r=>{const o=[];r.forEach(i=>{o.push(i*t)}),n.push(o)}),n},wn=(e,t)=>{if(e&&e.children){for(let n=e.children.length-1;n>=0;n--)if(!wn(e.children[n],t))return}return!!t(e)},pn=(e,t)=>{typeof t=="function"&&wn(e,t)},dr=e=>{let t=1/0,n=1/0,r=-1/0,o=-1/0;return e.forEach(i=>{let a=i.size;Tt(a)?a.length===1&&(a=[a[0],a[0]]):ye(a)?a=[a,a]:(a===void 0||isNaN(a))&&(a=[30,30]);const s=[a[0]/2,a[1]/2],u=i.x-s[0],c=i.x+s[0],f=i.y-s[1],l=i.y+s[1];t>u&&(t=u),n>f&&(n=f),r<c&&(r=c),o<l&&(o=l)}),{minX:t,minY:n,maxX:r,maxY:o}},Pn=e=>{const t={x:0,y:0};e.forEach(r=>{t.x+=r.x||0,t.y+=r.y||0});const n=e.length||1;return{x:t.x/n,y:t.y/n}},sr=(e,t,n)=>{var r,o;return e==="source"?((r=n==null?void 0:n.find(i=>i.target===t.id))===null||r===void 0?void 0:r.source)||{}:((o=n==null?void 0:n.find(i=>i.source===t.id))===null||o===void 0?void 0:o.target)||{}},mn=(e,t,n)=>{let r=[];switch(e){case"source":r=n==null?void 0:n.filter(i=>i.source===t.id).map(i=>i.target);break;case"target":r=n==null?void 0:n.filter(i=>i.target===t.id).map(i=>i.source);break;case"both":r=n==null?void 0:n.filter(i=>i.source===t.id).map(i=>i.target).concat(n==null?void 0:n.filter(i=>i.target===t.id).map(i=>i.source));break;default:break}const o=new Set(r);return Array.from(o)},nn=(e,t,n,r,o)=>{const i=n[t]||"";let a=(r==null?void 0:r.filter(s=>s[t]===i))||[];return e==="leaf"&&(a=a.filter(s=>{var u,c;return((u=o[s.id])===null||u===void 0?void 0:u.in)===0||((c=o[s.id])===null||c===void 0?void 0:c.out)===0})),a},ur=(e,t,n,r,o,i)=>{const{in:a,out:s}=o[t.id];let u=t,c=[];a===0?(u=sr("source",t,n),c=mn("both",u,n).map(l=>i[l])):s===0&&(u=sr("target",t,n),c=mn("both",u,n).map(l=>i[l])),c=c.filter(l=>o[l.id]&&(o[l.id].in===0||o[l.id].out===0));const f=nn(e,r,t,c,o);return{coreNode:u,relativeLeafNodes:c,sameTypeLeafNodes:f}},lt=e=>typeof e=="function",ft=(e,t,n)=>{let r;return n?r=n:ye(e)?r=()=>e:r=()=>t,r},He=(e,t,n=!0)=>!t&&t!==0?r=>r.size?Tt(r.size)?r.size[0]>r.size[1]?r.size[0]:r.size[1]:xt(r.size)?r.size.width>r.size.height?r.size.width:r.size.height:r.size:e:lt(t)?t:ye(t)?()=>t:Tt(t)?()=>{if(n){const r=Math.max(...t);return isNaN(r)?e:r}return t}:xt(t)?()=>{if(n){const r=Math.max(t.width,t.height);return isNaN(r)?e:r}return[t.width,t.height]}:()=>e,Fe=new Map,se=(e,t)=>{if(Fe.get(e)&&console.warn(`The layout with the name ${e} exists already, it will be overridden`),isObject(t)){class n extends Base{constructor(o){var i;super();const a=this,s={},u=Object.assign({},a.getDefaultCfg(),((i=t.getDefaultCfg)===null||i===void 0?void 0:i.call(t))||{});Object.assign(s,u,t,o),Object.keys(s).forEach(c=>{const f=s[c];a[c]=f})}}Fe.set(e,n)}else Fe.set(e,t);return Fe.get(e)},Y=e=>{Fe.has(e)&&Fe.delete(e)},ce=e=>Fe.has(e)?Fe.get(e):null;class ve{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class Xe extends ve{constructor(t){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const t=this,{nodes:n,edges:r,begin:o}=t,i=n.length;if(i===0)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r};if(i===1)return n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r};let{sortBy:a,width:s,height:u}=t;const{condense:c,preventOverlapPadding:f,preventOverlap:l,nodeSpacing:d,nodeSize:h}=t,v=[];n.forEach(y=>{v.push(y)});const m={};if(v.forEach((y,b)=>{m[y.id]=b}),(a==="degree"||!an(a)||v[0][a]===void 0)&&(a="degree",vn(n[0].degree))){const y=wt(v.length,m,r);v.forEach((b,w)=>{b.degree=y[w].all})}v.sort((y,b)=>b[a]-y[a]),!s&&typeof window!="undefined"&&(s=window.innerWidth),!u&&typeof window!="undefined"&&(u=window.innerHeight);const g=t.rows,E=t.cols!=null?t.cols:t.columns;if(t.cells=i,g!=null&&E!=null?(t.rows=g,t.cols=E):g!=null&&E==null?(t.rows=g,t.cols=Math.ceil(t.cells/t.rows)):g==null&&E!=null?(t.cols=E,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells){const y=t.small(),b=t.large();(y-1)*b>=t.cells?t.small(y-1):(b-1)*y>=t.cells&&t.large(b-1)}else for(;t.cols*t.rows<t.cells;){const y=t.small(),b=t.large();(b+1)*y>=t.cells?t.large(b+1):t.small(y+1)}if(t.cellWidth=s/t.cols,t.cellHeight=u/t.rows,c&&(t.cellWidth=0,t.cellHeight=0),l||d){const y=He(10,d),b=He(30,h,!1);v.forEach(w=>{(!w.x||!w.y)&&(w.x=0,w.y=0);const I=b(w)||30;let X,ge;Tt(I)?(X=I[0],ge=I[1]):(X=I,ge=I);const re=y!==void 0?y(w):f,Q=X+re,ee=ge+re;t.cellWidth=Math.max(t.cellWidth,Q),t.cellHeight=Math.max(t.cellHeight,ee)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(let y=0;y<v.length;y++){const b=v[y];let w;if(t.position&&(w=t.position(b)),w&&(w.row!==void 0||w.col!==void 0)){const I={row:w.row,col:w.col};if(I.col===void 0)for(I.col=0;t.used(I.row,I.col);)I.col++;else if(I.row===void 0)for(I.row=0;t.used(I.row,I.col);)I.row++;t.id2manPos[b.id]=I,t.use(I.row,I.col)}t.getPos(b)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:r,nodes:v}}small(t){const n=this;let r;const o=n.rows||5,i=n.cols||5;return t==null?r=Math.min(o,i):Math.min(o,i)===n.rows?n.rows=t:n.cols=t,r}large(t){const n=this;let r;const o=n.rows||5,i=n.cols||5;return t==null?r=Math.max(o,i):Math.max(o,i)===n.rows?n.rows=t:n.cols=t,r}used(t,n){return this.cellUsed[`c-${t}-${n}`]||!1}use(t,n){const r=this;r.cellUsed[`c-${t}-${n}`]=!0}moveToNextCell(){const t=this,n=t.cols||5;t.col++,t.col>=n&&(t.col=0,t.row++)}getPos(t){const n=this,{begin:r,cellWidth:o,cellHeight:i}=n;let a,s;const u=n.id2manPos[t.id];if(u)a=u.col*o+o/2+r[0],s=u.row*i+i/2+r[1];else{for(;n.used(n.row,n.col);)n.moveToNextCell();a=n.col*o+o/2+r[0],s=n.row*i+i/2+r[1],n.use(n.row,n.col),n.moveToNextCell()}t.x=a,t.y=s}getType(){return"grid"}}const Ke=(e,t)=>{let n;return e?ye(e)?n=r=>e:n=e:n=r=>t||1,n};class We extends ve{constructor(t){super(),this.maxIteration=500,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.collideStrength=1,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.animate=!0,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){var t,n;const r=this,o=r.nodes;if(r.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(r.timeInterval),!o||o.length===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const i=r.center;if(o.length===1){o[0].x=i[0],o[0].y=i[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const a={},s={};o.forEach((l,d)=>{ye(l.x)||(l.x=Math.random()*r.width),ye(l.y)||(l.y=Math.random()*r.height),a[l.id]=l,s[l.id]=d}),r.nodeMap=a,r.nodeIdxMap=s,r.linkDistance=Ke(r.linkDistance,1),r.nodeStrength=Ke(r.nodeStrength,1),r.edgeStrength=Ke(r.edgeStrength,1);const u=r.nodeSize;let c;if(r.preventOverlap){const l=r.nodeSpacing;let d;ye(l)?d=()=>l:lt(l)?d=l:d=()=>0,u?Tt(u)?c=h=>Math.max(u[0],u[1])+d(h):c=h=>u+d(h):c=h=>h.size?Tt(h.size)?Math.max(h.size[0],h.size[1])+d(h):xt(h.size)?Math.max(h.size.width,h.size.height)+d(h):h.size+d(h):10+d(h)}r.nodeSize=c;const f=r.edges;r.degrees=wt(o.length,r.nodeIdxMap,f),r.getMass||(r.getMass=l=>l.mass||r.degrees[r.nodeIdxMap[l.id]].all||1),r.run()}run(){var t;const n=this,{maxIteration:r,nodes:o,workerEnabled:i,minMovement:a,animate:s}=n;if(o)if(i||!s){for(let u=0;u<r;u++){const c=n.runOneStep(u);if(n.reachMoveThreshold(o,c,a))break}(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window=="undefined")return;let u=0;this.timeInterval=window.setInterval(()=>{var c,f;if(!o)return;const l=n.runOneStep(u)||[];n.reachMoveThreshold(o,l,a)&&((c=n.onLayoutEnd)===null||c===void 0||c.call(n),window.clearInterval(n.timeInterval)),u++,u>=r&&((f=n.onLayoutEnd)===null||f===void 0||f.call(n),window.clearInterval(n.timeInterval))},0)}}reachMoveThreshold(t,n,r){let o=0;return t.forEach((i,a)=>{const s=i.x-n[a].x,u=i.y-n[a].y;o+=Math.sqrt(s*s+u*u)}),o/=t.length,o<r}runOneStep(t){var n;const r=this,{nodes:o,edges:i}=r,a=[],s=[];if(!o)return;o.forEach((f,l)=>{a[2*l]=0,a[2*l+1]=0,s[2*l]=0,s[2*l+1]=0}),r.calRepulsive(a,o),i&&r.calAttractive(a,i),r.calGravity(a,o);const u=Math.max(.02,r.interval-t*.002);r.updateVelocity(a,s,u,o);const c=[];return o.forEach(f=>{c.push({x:f.x,y:f.y})}),r.updatePosition(s,u,o),(n=r.tick)===null||n===void 0||n.call(r),c}calRepulsive(t,n){const r=this,{getMass:o,factor:i,coulombDisScale:a,preventOverlap:s,collideStrength:u=1}=r,c=r.nodeStrength,f=r.nodeSize;n.forEach((l,d)=>{const h=o?o(l):1;n.forEach((v,m)=>{if(d>=m)return;let g=l.x-v.x,E=l.y-v.y;g===0&&E===0&&(g=Math.random()*.01,E=Math.random()*.01);const y=g*g+E*E,b=Math.sqrt(y),w=(b+.1)*a,I=g/b,X=E/b,ge=(c(l)+c(v))*.5*i/(w*w),re=o?o(v):1;if(t[2*d]+=I*ge,t[2*d+1]+=X*ge,t[2*m]-=I*ge,t[2*m+1]-=X*ge,s&&(f(l)+f(v))/2>b){const Q=u*(c(l)+c(v))*.5/y;t[2*d]+=I*Q/h,t[2*d+1]+=X*Q/h,t[2*m]-=I*Q/re,t[2*m+1]-=X*Q/re}})})}calAttractive(t,n){const r=this,{nodeMap:o,nodeIdxMap:i,linkDistance:a,edgeStrength:s}=r,u=r.nodeSize,c=r.getMass;n.forEach((f,l)=>{const d=ot(f,"source"),h=ot(f,"target"),v=o[d],m=o[h];let g=m.x-v.x,E=m.y-v.y;g===0&&E===0&&(g=Math.random()*.01,E=Math.random()*.01);const y=Math.sqrt(g*g+E*E),b=g/y,w=E/y,ge=((a(f,v,m)||1+(u(v)+u(m)||0)/2)-y)*s(f),re=i[d],Q=i[h],ee=c?c(v):1,be=c?c(m):1;t[2*re]-=b*ge/ee,t[2*re+1]-=w*ge/ee,t[2*Q]+=b*ge/be,t[2*Q+1]+=w*ge/be})}calGravity(t,n){const r=this,o=r.center,i=r.gravity,a=r.degrees,s=n.length;for(let u=0;u<s;u++){const c=n[u];let f=c.x-o[0],l=c.y-o[1],d=i;if(r.getCenter){const h=r.getCenter(c,a[u].all);h&&ye(h[0])&&ye(h[1])&&ye(h[2])&&(f=c.x-h[0],l=c.y-h[1],d=h[2])}d&&(t[2*u]-=d*f,t[2*u+1]-=d*l)}}updateVelocity(t,n,r,o){const i=this,a=r*i.damping;o.forEach((s,u)=>{let c=t[2*u]*a||.01,f=t[2*u+1]*a||.01;const l=Math.sqrt(c*c+f*f);if(l>i.maxSpeed){const d=i.maxSpeed/l;c=d*c,f=d*f}n[2*u]=c,n[2*u+1]=f})}updatePosition(t,n,r){r.forEach((o,i)=>{if(ye(o.fx)&&ye(o.fy)){o.x=o.fx,o.y=o.fy;return}const a=t[2*i]*n,s=t[2*i+1]*n;o.x+=a,o.y+=s})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"gForce"}}function dt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return ct(this.cover(t,n),t,n,e)}function ct(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var o,i=e._root,a={data:r},s=e._x0,u=e._y0,c=e._x1,f=e._y1,l,d,h,v,m,g,E,y;if(!i)return e._root=a,e;for(;i.length;)if((m=t>=(l=(s+c)/2))?s=l:c=l,(g=n>=(d=(u+f)/2))?u=d:f=d,o=i,!(i=i[E=g<<1|m]))return o[E]=a,e;if(h=+e._x.call(null,i.data),v=+e._y.call(null,i.data),t===h&&n===v)return a.next=i,o?o[E]=a:e._root=a,e;do o=o?o[E]=new Array(4):e._root=new Array(4),(m=t>=(l=(s+c)/2))?s=l:c=l,(g=n>=(d=(u+f)/2))?u=d:f=d;while((E=g<<1|m)===(y=(v>=d)<<1|h>=l));return o[y]=i,o[E]=a,e}function Ft(e){var t,n,r=e.length,o,i,a=new Array(r),s=new Array(r),u=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<r;++n)isNaN(o=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=o,s[n]=i,o<u&&(u=o),o>f&&(f=o),i<c&&(c=i),i>l&&(l=i));if(u>f||c>l)return this;for(this.cover(u,c).cover(f,l),n=0;n<r;++n)ct(this,a[n],s[n],e[n]);return this}function Jt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var a=o-n||1,s=this._root,u,c;n>e||e>=o||r>t||t>=i;)switch(c=(t<r)<<1|e<n,u=new Array(4),u[c]=s,s=u,a*=2,c){case 0:o=n+a,i=r+a;break;case 1:n=o-a,i=r+a;break;case 2:o=n+a,r=i-a;break;case 3:n=o-a,r=i-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this}function Rn(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Tr(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function rn(e,t,n,r,o){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=o}function Er(e,t,n){var r,o=this._x0,i=this._y0,a,s,u,c,f=this._x1,l=this._y1,d=[],h=this._root,v,m;for(h&&d.push(new rn(h,o,i,f,l)),n==null?n=1/0:(o=e-n,i=t-n,f=e+n,l=t+n,n*=n);v=d.pop();)if(!(!(h=v.node)||(a=v.x0)>f||(s=v.y0)>l||(u=v.x1)<o||(c=v.y1)<i))if(h.length){var g=(a+u)/2,E=(s+c)/2;d.push(new rn(h[3],g,E,u,c),new rn(h[2],a,E,g,c),new rn(h[1],g,s,u,E),new rn(h[0],a,s,g,E)),(m=(t>=E)<<1|e>=g)&&(v=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=v)}else{var y=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=y*y+b*b;if(w<n){var I=Math.sqrt(n=w);o=e-I,i=t-I,f=e+I,l=t+I,r=h.data}}return r}function Dr(e){if(isNaN(f=+this._x.call(null,e))||isNaN(l=+this._y.call(null,e)))return this;var t,n=this._root,r,o,i,a=this._x0,s=this._y0,u=this._x1,c=this._y1,f,l,d,h,v,m,g,E;if(!n)return this;if(n.length)for(;;){if((v=f>=(d=(a+u)/2))?a=d:u=d,(m=l>=(h=(s+c)/2))?s=h:c=h,t=n,!(n=n[g=m<<1|v]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,E=g)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(i=n.next)&&delete n.next,o?(i?o.next=i:delete o.next,this):t?(i?t[g]=i:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[E]=n:this._root=n),this):(this._root=i,this)}function br(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function zr(){return this._root}function Br(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Or(e){var t=[],n,r=this._root,o,i,a,s,u;for(r&&t.push(new rn(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,i=n.x0,a=n.y0,s=n.x1,u=n.y1)&&r.length){var c=(i+s)/2,f=(a+u)/2;(o=r[3])&&t.push(new rn(o,c,f,s,u)),(o=r[2])&&t.push(new rn(o,i,f,c,u)),(o=r[1])&&t.push(new rn(o,c,a,s,f)),(o=r[0])&&t.push(new rn(o,i,a,c,f))}return this}function po(e){var t=[],n=[],r;for(this._root&&t.push(new rn(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var o=r.node;if(o.length){var i,a=r.x0,s=r.y0,u=r.x1,c=r.y1,f=(a+u)/2,l=(s+c)/2;(i=o[0])&&t.push(new rn(i,a,s,f,l)),(i=o[1])&&t.push(new rn(i,f,s,u,l)),(i=o[2])&&t.push(new rn(i,a,l,f,c)),(i=o[3])&&t.push(new rn(i,f,l,u,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function or(e){return e[0]}function Lr(e){return arguments.length?(this._x=e,this):this._x}function so(e){return e[1]}function Ao(e){return arguments.length?(this._y=e,this):this._y}function qr(e,t,n){var r=new T(t==null?or:t,n==null?so:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function T(e,t,n,r,o,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function lo(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var $n=qr.prototype=T.prototype;$n.copy=function(){var e=new T(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=lo(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var o=0;o<4;++o)(r=t.source[o])&&(r.length?n.push({source:r,target:t.target[o]=new Array(4)}):t.target[o]=lo(r));return e},$n.add=dt,$n.addAll=Ft,$n.cover=Jt,$n.data=Rn,$n.extent=Tr,$n.find=Er,$n.remove=Dr,$n.removeAll=br,$n.root=zr,$n.size=Br,$n.visit=Or,$n.visitAfter=po,$n.x=Lr,$n.y=Ao;const Jr=.81,Ur=.1;function xr(e,t,n,r,o){const i=n/r,a=e.map((u,c)=>{const f=t[u.id],{data:l,x:d,y:h,size:v}=f,{nodeStrength:m}=l.layout.force;return{x:d,y:h,size:v,index:c,vx:0,vy:0,weight:i*m}}),s=qr(a,u=>u.x,u=>u.y).visitAfter(Ee);return a.forEach(u=>{_t(u,s)}),a.map((u,c)=>{const f=t[e[c].id],{mass:l=1}=f.data.layout.force;o[2*c]=u.vx/l,o[2*c+1]=u.vy/l}),o}function Ee(e){let t=0,n=0,r=0;if(e.length){for(let o=0;o<4;o++){const i=e[o];i&&i.weight&&(t+=i.weight,n+=i.x*i.weight,r+=i.y*i.weight)}e.x=n/t,e.y=r/t,e.weight=t}else{const o=e;e.x=o.data.x,e.y=o.data.y,e.weight=o.data.weight}}const Ue=(e,t,n,r,o,i)=>{const a=i.x-e.x||Ur,s=i.y-e.y||Ur,u=r-t,c=a*a+s*s,f=Math.sqrt(c)*c;if(u*u*Jr<c){const l=e.weight/f;return i.vx+=a*l,i.vy+=s*l,!0}if(e.length)return!1;if(e.data!==i){const l=e.data.weight/f;i.vx+=a*l,i.vy+=s*l}};function _t(e,t){t.visit((n,r,o,i,a)=>Ue(n,r,o,i,a,e))}const en=(e,t)=>{let n;return e?ye(e)?n=r=>e:n=e:n=r=>t||1,n};class tn extends ve{constructor(t){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=500,this.minMovement=.4,this.interval=.02,this.factor=1,this.linkDistance=200,this.gravity=0,this.clusterNodeStrength=20,this.preventOverlap=!0,this.distanceThresholdMode="mean",this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.judgingDistance=0,this.centripetalOptions={leaf:2,single:2,others:1,center:r=>({x:this.width/2,y:this.height/2})};const{getMass:n}=t;this.propsGetMass=n,this.updateCfg(t)}getCentripetalOptions(){const{leafCluster:t,clustering:n,nodeClusterBy:r,nodes:o,nodeMap:i,clusterNodeStrength:a}=this,s=h=>typeof a=="function"?a(h):a;let u={},c;if(t){c=this.getSameTypeLeafMap()||{};const h=Array.from(new Set(o==null?void 0:o.map(v=>v[r])))||[];u={single:100,leaf:(v,m,g)=>{const{relativeLeafNodes:E,sameTypeLeafNodes:y}=c[v.id]||{};return(y==null?void 0:y.length)===(E==null?void 0:E.length)||(h==null?void 0:h.length)===1?1:s(v)},others:1,center:(v,m,g)=>{var E;const{degree:y}=((E=v.data)===null||E===void 0?void 0:E.layout)||{};if(!y)return{x:100,y:100};let b;if(y===1){const{sameTypeLeafNodes:w=[]}=c[v.id]||{};w.length===1?b=void 0:w.length>1&&(b=Pn(w))}else b=void 0;return{x:b==null?void 0:b.x,y:b==null?void 0:b.y}}}}if(n){c||(c=this.getSameTypeLeafMap());const h=Array.from(new Set(o.map((m,g)=>m[r]))).filter(m=>m!==void 0),v={};h.forEach(m=>{const g=o.filter(E=>E[r]===m).map(E=>i[E.id]);v[m]=Pn(g)}),u={single:m=>s(m),leaf:m=>s(m),others:m=>s(m),center:(m,g,E)=>{const y=v[m[r]];return{x:y==null?void 0:y.x,y:y==null?void 0:y.y}}}}this.centripetalOptions=Object.assign(Object.assign({},this.centripetalOptions),u);const{leaf:f,single:l,others:d}=this.centripetalOptions;f&&typeof f!="function"&&(this.centripetalOptions.leaf=()=>f),l&&typeof l!="function"&&(this.centripetalOptions.single=()=>l),d&&typeof d!="function"&&(this.centripetalOptions.others=()=>d)}updateCfg(t){t&&Object.assign(this,t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){const t=this;t.stop();const{nodes:n,edges:r,defSpringLen:o}=t;if(t.judgingDistance=0,!n||n.length===0){t.onLayoutEnd([]);return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(n.length===1){n[0].x=i[0],n[0].y=i[1],t.onLayoutEnd([Object.assign({},n[0])]);return}t.degreesMap=Ye(n,r),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=f=>{let l=1;ye(f.mass)&&(l=f.mass);const d=t.degreesMap[f.id].all;return!d||d<5?l:d*5*l};const a=t.nodeSize;let s;if(t.preventOverlap){const f=t.nodeSpacing;let l;ye(f)?l=()=>f:lt(f)?l=f:l=()=>0,a?Tt(a)?s=d=>Math.max(a[0],a[1])+l(d):s=d=>a+l(d):s=d=>d.size?Tt(d.size)?Math.max(d.size[0],d.size[1])+l(d):xt(d.size)?Math.max(d.size.width,d.size.height)+l(d):d.size+l(d):10+l(d)}t.nodeSize=s,t.linkDistance=en(t.linkDistance,1),t.nodeStrength=en(t.nodeStrength,1),t.edgeStrength=en(t.edgeStrength,1);const u={},c={};n.forEach((f,l)=>{ye(f.x)||(f.x=Math.random()*t.width),ye(f.y)||(f.y=Math.random()*t.height);const d=t.degreesMap[f.id];u[f.id]=Object.assign(Object.assign({},f),{data:Object.assign(Object.assign({},f.data),{size:t.nodeSize(f)||30,layout:{inDegree:d.in,outDegree:d.out,degree:d.all,tDegree:d.in,sDegree:d.out,force:{mass:t.getMass(f),nodeStrength:t.nodeStrength(f,r)}}})}),c[f.id]=l}),t.nodeMap=u,t.nodeIdxMap=c,t.edgeInfos=[],r==null||r.forEach(f=>{const l=u[f.source],d=u[f.target];!l||!d?elf.edgeInfos.push({}):t.edgeInfos.push({edgeStrength:t.edgeStrength(f),linkDistance:o?o(Object.assign(Object.assign({},f),{source:l,target:d}),l,d):t.linkDistance(f,l,d)||1+(a(l)+a(l)||0)/2})}),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||(()=>{}),t.run()}run(){const t=this,{maxIteration:n,nodes:r,edges:o,workerEnabled:i,minMovement:a,animate:s,nodeMap:u,height:c}=t;if(t.currentMinY=0,t.currentMaxY=c,!r)return;const f=[];if(r.forEach((h,v)=>{f[2*v]=0,f[2*v+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){const h={};o.forEach(v=>{const{source:m,target:g}=v;h[m]=h[m]||[],h[m].push(v),h[g]=h[g]||[],h[g].push(v)}),this.relatedEdges=h}const l=n;if(i||!s){let h=0;for(let v=0;(t.judgingDistance>a||v<1)&&v<l;v++)h=v,t.runOneStep(v,f);t.onLayoutEnd(Object.values(u))}else{if(typeof window=="undefined")return;let h=0;this.timeInterval=window.setInterval(()=>{r&&(t.runOneStep(h,f),h++,(h>=l||t.judgingDistance<a)&&(t.onLayoutEnd(Object.values(u)),window.clearInterval(t.timeInterval)))},0)}}runOneStep(t,n){var r;const o=this,{nodes:i,edges:a,nodeMap:s,monitor:u}=o,c=[];if(!(i!=null&&i.length))return;o.calRepulsive(c),a&&o.calAttractive(c),o.calGravity(c),o.attractToSide(c);const f=o.interval;if(o.updateVelocity(c,n,f),o.updatePosition(n,f),(r=o.tick)===null||r===void 0||r.call(o),u){const l=this.calTotalEnergy(c);u({energy:l,nodes:i,edges:a,iterations:t})}}calTotalEnergy(t){const{nodes:n,nodeMap:r}=this;if(!(n!=null&&n.length))return 0;let o=0;return n.forEach((i,a)=>{const s=t[2*a],u=t[2*a+1],c=s*s+u*u,{mass:f=1}=r[i.id].data.layout.force;o+=f*c*.5}),o}calRepulsive(t){const n=this,{nodes:r,nodeMap:o,factor:i,coulombDisScale:a}=n,s=n.nodeSize;xr(r,o,i,a*a,t)}calAttractive(t){const n=this,{edges:r,nodeMap:o,nodeIdxMap:i,edgeInfos:a}=n,s=n.nodeSize;r.forEach((u,c)=>{const f=ot(u,"source"),l=ot(u,"target"),d=o[f],h=o[l];if(!d||!h)return;let v=h.x-d.x,m=h.y-d.y;!v&&!m&&(v=Math.random()*.01,m=Math.random()*.01);const g=Math.sqrt(v*v+m*m),E=v/g,y=m/g,{linkDistance:b=200,edgeStrength:w=200}=a[c]||{},X=(b-g)*w,ge=d.data.layout.force.mass||1,re=h.data.layout.force.mass||1,Q=1/ge,ee=1/re,be=E*X,k=y*X,xe=2*i[f],Ve=2*i[l];t[xe]-=be*Q,t[xe+1]-=k*Q,t[Ve]+=be*ee,t[Ve+1]+=k*ee})}calGravity(t){var n;const r=this,{nodes:o,edges:i=[],nodeMap:a,width:s,height:u,center:c,gravity:f,degreesMap:l,centripetalOptions:d}=r;if(!o)return;const h=o.length;for(let v=0;v<h;v++){const m=2*v,g=a[o[v].id],{mass:E=1}=g.data.layout.force;let y=0,b=0,w=f;const{in:I,out:X,all:ge}=l[g.id],re=(n=r.getCenter)===null||n===void 0?void 0:n.call(r,g,ge);if(re){const[Q,ee,be]=re;y=g.x-Q,b=g.y-ee,w=be}else y=g.x-c[0],b=g.y-c[1];if(w&&(t[m]-=w*y/E,t[m+1]-=w*b/E),d){const{leaf:Q,single:ee,others:be,center:k}=d,{x:xe,y:Ve,centerStrength:qe}=(k==null?void 0:k(g,o,i,s,u))||{x:0,y:0,centerStrength:0};if(!ye(xe)||!ye(Ve))continue;const Ut=(g.x-xe)/E,ut=(g.y-Ve)/E;if(qe&&(t[m]-=qe*Ut,t[m+1]-=qe*ut),ge===0){const Ot=ee(g);if(!Ot)continue;t[m]-=Ot*Ut,t[m+1]-=Ot*ut;continue}if(I===0||X===0){const Ot=Q(g,o,i);if(!Ot)continue;t[m]-=Ot*Ut,t[m+1]-=Ot*ut;continue}const Xt=be(g);if(!Xt)continue;t[m]-=Xt*Ut,t[m+1]-=Xt*ut}}}attractToSide(t){const{defSideCoe:n,height:r,nodes:o,relatedEdges:i,currentMinY:a=0,currentMaxY:s=this.height}=this;!n||typeof n!="function"||!(o!=null&&o.length)||o.forEach((u,c)=>{const f=n(u,i[u.id]||[]);if(f===0)return;const l=f<0?a:s,d=Math.abs(f);t[2*c+1]-=d*(u.y-l)})}updateVelocity(t,n,r){const o=this,{nodes:i,damping:a,maxSpeed:s}=o;i!=null&&i.length&&i.forEach((u,c)=>{let f=(n[2*c]+t[2*c]*r)*a||.01,l=(n[2*c+1]+t[2*c+1]*r)*a||.01;const d=Math.sqrt(f*f+l*l);if(d>s){const h=s/d;f=h*f,l=h*l}n[2*c]=f,n[2*c+1]=l})}updatePosition(t,n){const r=this,{nodes:o,distanceThresholdMode:i,nodeMap:a}=r;if(!(o!=null&&o.length)){this.judgingDistance=0;return}let s=0;i==="max"?r.judgingDistance=-1/0:i==="min"&&(r.judgingDistance=1/0);let u=1/0,c=-1/0;o.forEach((f,l)=>{const d=a[f.id];if(ye(f.fx)&&ye(f.fy)){f.x=f.fx,f.y=f.fy,d.x=f.x,d.y=f.y;return}const h=t[2*l]*n,v=t[2*l+1]*n;f.x+=h,f.y+=v,d.x=f.x,d.y=f.y,f.y<u&&(u=f.y),f.y>c&&(c=f.y);const m=Math.sqrt(h*h+v*v);switch(i){case"max":r.judgingDistance<m&&(r.judgingDistance=m);break;case"min":r.judgingDistance>m&&(r.judgingDistance=m);break;default:s=s+m;break}}),this.currentMinY=u,this.currentMaxY=c,(!i||i==="mean")&&(r.judgingDistance=s/o.length)}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"force2"}getSameTypeLeafMap(){const{nodeClusterBy:t,nodes:n,edges:r,nodeMap:o,degreesMap:i}=this;if(!(n!=null&&n.length))return;const a={};return n.forEach((s,u)=>{i[s.id].all===1&&(a[s.id]=ur("leaf",s,r,t,i,o))}),a}}function It(e){return function(){return e}}function Kt(e){return(e()-.5)*1e-6}var En={value:function(){}};function Cn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new jn(n)}function jn(e){this._=e}function Vt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}jn.prototype=Cn.prototype={constructor:jn,on:function(t,n){var r=this._,o=Vt(t+"",r),i,a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((i=(t=o[a]).type)&&(i=_n(r[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<s;)if(i=(t=o[a]).type)r[i]=Sn(r[i],t.name,n);else if(n==null)for(i in r)r[i]=Sn(r[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var r in n)t[r]=n[r].slice();return new jn(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var r=new Array(i),o=0,i,a;o<i;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],o=0,i=a.length;o<i;++o)a[o].value.apply(n,r)},apply:function(t,n,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],i=0,a=o.length;i<a;++i)o[i].value.apply(n,r)}};function _n(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Sn(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=En,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var wr=Cn,Ir=0,uo=0,Nr=0,wo=1e3,Ct,jr,$r=0,eo=0,to=0,Yr=typeof performance=="object"&&performance.now?performance:Date,_o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ro(){return eo||(_o(ii),eo=Yr.now()+to)}function ii(){eo=0}function Xo(){this._call=this._time=this._next=null}Xo.prototype=Yo.prototype={constructor:Xo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ro():+n)+(t==null?0:+t),!this._next&&jr!==this&&(jr?jr._next=this:Ct=this,jr=this),this._call=e,this._time=n,ui()},stop:function(){this._call&&(this._call=null,this._time=1/0,ui())}};function Yo(e,t,n){var r=new Xo;return r.restart(e,t,n),r}function Qn(){Ro(),++Ir;for(var e=Ct,t;e;)(t=eo-e._time)>=0&&e._call.call(null,t),e=e._next;--Ir}function ai(){eo=($r=Yr.now())+to,Ir=uo=0;try{Qn()}finally{Ir=0,si(),eo=0}}function zo(){var e=Yr.now(),t=e-$r;t>wo&&(to-=t,$r=e)}function si(){for(var e,t=Ct,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ct=n);jr=e,ui(r)}function ui(e){if(!Ir){uo&&(uo=clearTimeout(uo));var t=e-eo;t>24?(e<1/0&&(uo=setTimeout(ai,e-Yr.now()-to)),Nr&&(Nr=clearInterval(Nr))):(Nr||($r=Yr.now(),Nr=setInterval(zo,wo)),Ir=1,_o(ai))}}var Wi=1664525,Xi=1013904223,Hi=4294967296;function Co(){var e=1;return function(){return(e=(Wi*e+Xi)%Hi)/Hi}}function Bo(e){return e.x}function _i(e){return e.y}var Ja=10,S=Math.PI*(3-Math.sqrt(5));function C(e){var t,n=1,r=.001,o=1-Math.pow(r,1/300),i=0,a=.6,s=new Map,u=Yo(l),c=wr("tick","end"),f=Co();e==null&&(e=[]);function l(){d(),c.call("tick",t),n<r&&(u.stop(),c.call("end",t))}function d(m){var g,E=e.length,y;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(i-n)*o,s.forEach(function(w){w(n)}),g=0;g<E;++g)y=e[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function h(){for(var m=0,g=e.length,E;m<g;++m){if(E=e[m],E.index=m,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),isNaN(E.x)||isNaN(E.y)){var y=Ja*Math.sqrt(.5+m),b=m*S;E.x=y*Math.cos(b),E.y=y*Math.sin(b)}(isNaN(E.vx)||isNaN(E.vy))&&(E.vx=E.vy=0)}}function v(m){return m.initialize&&m.initialize(e,f),m}return h(),t={tick:d,restart:function(){return u.restart(l),t},stop:function(){return u.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),s.forEach(v),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(o=+g,t):+o},alphaTarget:function(g){return arguments.length?(i=+g,t):i},velocityDecay:function(g){return arguments.length?(a=1-g,t):1-a},randomSource:function(g){return arguments.length?(f=g,s.forEach(v),t):f},force:function(g,E){return arguments.length>1?(E==null?s.delete(g):s.set(g,v(E)),t):s.get(g)},find:function(g,E,y){var b=0,w=e.length,I,X,ge,re,Q;for(y==null?y=1/0:y*=y,b=0;b<w;++b)re=e[b],I=g-re.x,X=E-re.y,ge=I*I+X*X,ge<y&&(Q=re,y=ge);return Q},on:function(g,E){return arguments.length>1?(c.on(g,E),t):c.on(g)}}}function Ie(){var e,t,n,r,o=It(-30),i,a=1,s=1/0,u=.81;function c(h){var v,m=e.length,g=qr(e,Bo,_i).visitAfter(l);for(r=h,v=0;v<m;++v)t=e[v],g.visit(d)}function f(){if(e){var h,v=e.length,m;for(i=new Array(v),h=0;h<v;++h)m=e[h],i[m.index]=+o(m,h,e)}}function l(h){var v=0,m,g,E=0,y,b,w;if(h.length){for(y=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(v+=m.value,E+=g,y+=g*m.x,b+=g*m.y);h.x=y/E,h.y=b/E}else{m=h,m.x=m.data.x,m.y=m.data.y;do v+=i[m.data.index];while(m=m.next)}h.value=v}function d(h,v,m,g){if(!h.value)return!0;var E=h.x-t.x,y=h.y-t.y,b=g-v,w=E*E+y*y;if(b*b/u<w)return w<s&&(E===0&&(E=Kt(n),w+=E*E),y===0&&(y=Kt(n),w+=y*y),w<a&&(w=Math.sqrt(a*w)),t.vx+=E*h.value*r/w,t.vy+=y*h.value*r/w),!0;if(h.length||w>=s)return;(h.data!==t||h.next)&&(E===0&&(E=Kt(n),w+=E*E),y===0&&(y=Kt(n),w+=y*y),w<a&&(w=Math.sqrt(a*w)));do h.data!==t&&(b=i[h.data.index]*r/w,t.vx+=E*b,t.vy+=y*b);while(h=h.next)}return c.initialize=function(h,v){e=h,n=v,f()},c.strength=function(h){return arguments.length?(o=typeof h=="function"?h:It(+h),f(),c):o},c.distanceMin=function(h){return arguments.length?(a=h*h,c):Math.sqrt(a)},c.distanceMax=function(h){return arguments.length?(s=h*h,c):Math.sqrt(s)},c.theta=function(h){return arguments.length?(u=h*h,c):Math.sqrt(u)},c}function Me(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function o(){var i,a=n.length,s,u=0,c=0;for(i=0;i<a;++i)s=n[i],u+=s.x,c+=s.y;for(u=(u/a-e)*r,c=(c/a-t)*r,i=0;i<a;++i)s=n[i],s.x-=u,s.y-=c}return o.initialize=function(i){n=i},o.x=function(i){return arguments.length?(e=+i,o):e},o.y=function(i){return arguments.length?(t=+i,o):t},o.strength=function(i){return arguments.length?(r=+i,o):r},o}var Be=B(37635),Ge=B.n(Be);function ht(e){return e.index}function yt(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function zt(e){var t=ht,n=l,r,o=It(30),i,a,s,u,c,f=1;e==null&&(e=[]);function l(g){return 1/Math.min(s[g.source.index],s[g.target.index])}function d(g){for(var E=0,y=e.length;E<f;++E)for(var b=0,w,I,X,ge,re,Q,ee;b<y;++b)w=e[b],I=w.source,X=w.target,ge=X.x+X.vx-I.x-I.vx||Kt(c),re=X.y+X.vy-I.y-I.vy||Kt(c),Q=Math.sqrt(ge*ge+re*re),Q=(Q-i[b])/Q*g*r[b],ge*=Q,re*=Q,X.vx-=ge*(ee=u[b]),X.vy-=re*ee,I.vx+=ge*(ee=1-ee),I.vy+=re*ee}function h(){if(a){var g,E=a.length,y=e.length,b=new Map(a.map(function(I,X){return[t(I,X,a),I]})),w;for(g=0,s=new Array(E);g<y;++g)w=e[g],w.index=g,Ge()(w.source)!=="object"&&(w.source=yt(b,w.source)),Ge()(w.target)!=="object"&&(w.target=yt(b,w.target)),s[w.source.index]=(s[w.source.index]||0)+1,s[w.target.index]=(s[w.target.index]||0)+1;for(g=0,u=new Array(y);g<y;++g)w=e[g],u[g]=s[w.source.index]/(s[w.source.index]+s[w.target.index]);r=new Array(y),v(),i=new Array(y),m()}}function v(){if(a)for(var g=0,E=e.length;g<E;++g)r[g]=+n(e[g],g,e)}function m(){if(a)for(var g=0,E=e.length;g<E;++g)i[g]=+o(e[g],g,e)}return d.initialize=function(g,E){a=g,c=E,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(f=+g,d):f},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:It(+g),v(),d):n},d.distance=function(g){return arguments.length?(o=typeof g=="function"?g:It(+g),m(),d):o},d}function sn(e){return e.x+e.vx}function Mn(e){return e.y+e.vy}function un(e){var t,n,r,o=1,i=1;typeof e!="function"&&(e=It(e==null?1:+e));function a(){for(var c,f=t.length,l,d,h,v,m,g,E=0;E<i;++E)for(l=qr(t,sn,Mn).visitAfter(s),c=0;c<f;++c)d=t[c],m=n[d.index],g=m*m,h=d.x+d.vx,v=d.y+d.vy,l.visit(y);function y(b,w,I,X,ge){var re=b.data,Q=b.r,ee=m+Q;if(re){if(re.index>d.index){var be=h-re.x-re.vx,k=v-re.y-re.vy,xe=be*be+k*k;xe<ee*ee&&(be===0&&(be=Kt(r),xe+=be*be),k===0&&(k=Kt(r),xe+=k*k),xe=(ee-(xe=Math.sqrt(xe)))/xe*o,d.vx+=(be*=xe)*(ee=(Q*=Q)/(g+Q)),d.vy+=(k*=xe)*ee,re.vx-=be*(ee=1-ee),re.vy-=k*ee)}return}return w>h+ee||X<h-ee||I>v+ee||ge<v-ee}}function s(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function u(){if(t){var c,f=t.length,l;for(n=new Array(f),c=0;c<f;++c)l=t[c],n[l.index]=+e(l,c,t)}}return a.initialize=function(c,f){t=c,r=f,u()},a.iterations=function(c){return arguments.length?(i=+c,a):i},a.strength=function(c){return arguments.length?(o=+c,a):o},a.radius=function(c){return arguments.length?(e=typeof c=="function"?c:It(+c),u(),a):e},a}function Tn(e){var t=It(.1),n,r,o;typeof e!="function"&&(e=It(e==null?0:+e));function i(s){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vx+=(o[u]-f.x)*r[u]*s}function a(){if(n){var s,u=n.length;for(r=new Array(u),o=new Array(u),s=0;s<u;++s)r[s]=isNaN(o[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return i.initialize=function(s){n=s,a()},i.strength=function(s){return arguments.length?(t=typeof s=="function"?s:It(+s),a(),i):t},i.x=function(s){return arguments.length?(e=typeof s=="function"?s:It(+s),a(),i):e},i}function dn(e){var t=It(.1),n,r,o;typeof e!="function"&&(e=It(e==null?0:+e));function i(s){for(var u=0,c=n.length,f;u<c;++u)f=n[u],f.vy+=(o[u]-f.y)*r[u]*s}function a(){if(n){var s,u=n.length;for(r=new Array(u),o=new Array(u),s=0;s<u;++s)r[s]=isNaN(o[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return i.initialize=function(s){n=s,a()},i.strength=function(s){return arguments.length?(t=typeof s=="function"?s:It(+s),a(),i):t},i.y=function(s){return arguments.length?(e=typeof s=="function"?s:It(+s),a(),i):e},i}function bn(){function e(nt){return()=>nt}let t=nt=>nt.cluster,n=e(1),r=e(-1),o=e(100),i=e(.1),a=[0,0],s=[],u={},c=[],f=100,l=100,d={none:{x:0,y:0}},h=[],v,m="force",g=!0,E=.1;function y(nt){if(!g)return y;v.tick(),re();for(let zn=0,Zr=s.length,Kn,yr=nt*E;zn<Zr;++zn)Kn=s[zn],Kn.vx+=(d[t(Kn)].x-Kn.x)*yr,Kn.vy+=(d[t(Kn)].y-Kn.y)*yr}function b(){s&&w()}function w(){if(!s||!s.length)return;if(t(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const nt=I();v=C(nt.nodes).force("x",Tn(f).strength(.1)).force("y",dn(l).strength(.1)).force("collide",un(zn=>zn.r).iterations(4)).force("charge",Ie().strength(r)).force("links",zt(nt.nodes.length?nt.links:[]).distance(o).strength(i)),h=v.nodes(),re()}function I(){const nt=[],zn=[],Zr={};let Kn=[],yr={},Je=[];return yr=X(s),Je=ge(c),Kn=Object.keys(yr),Kn.forEach((Rt,fr)=>{const yn=yr[Rt];nt.push({id:Rt,size:yn.count,r:Math.sqrt(yn.sumforceNodeSize/Math.PI)}),Zr[Rt]=fr}),Je.forEach(Rt=>{const fr=ot(Rt,"source"),yn=ot(Rt,"target"),Sr=Zr[fr],Wn=Zr[yn];Sr!==void 0&&Wn!==void 0&&zn.push({source:Sr,target:Wn,count:Rt.count})}),{nodes:nt,links:zn}}function X(nt){const zn={};return nt.forEach(Zr=>{const Kn=t(Zr);zn[Kn]||(zn[Kn]={count:0,sumforceNodeSize:0})}),nt.forEach(Zr=>{const Kn=t(Zr),yr=n(Zr),Je=zn[Kn];Je.count=Je.count+1,Je.sumforceNodeSize=Je.sumforceNodeSize+Math.PI*(yr*yr)*1.3,zn[Kn]=Je}),zn}function ge(nt){const zn={},Zr=[];return nt.forEach(yr=>{const Je=Q(yr);let Rt=0;zn[Je]!==void 0&&(Rt=zn[Je]),Rt+=1,zn[Je]=Rt}),Object.entries(zn).forEach(([yr,Je])=>{const Rt=yr.split("~")[0],fr=yr.split("~")[1];Rt!==void 0&&fr!==void 0&&Zr.push({source:Rt,target:fr,count:Je})}),Zr}function re(){return d={none:{x:0,y:0}},h.forEach(nt=>{d[nt.id]={x:nt.x-a[0],y:nt.y-a[1]}}),d}function Q(nt){const zn=ot(nt,"source"),Zr=ot(nt,"target"),Kn=t(u[zn]),yr=t(u[Zr]);return Kn<=yr?`${Kn}~${yr}`:`${yr}~${Kn}`}function ee(nt){u={},nt.forEach(zn=>{u[zn.id]=zn})}function be(nt){return arguments.length?(m=nt,b(),y):m}function k(nt){return arguments.length?typeof nt=="string"?(t=zn=>zn[nt],y):(t=nt,y):t}function xe(nt){return arguments.length?(g=nt,y):g}function Ve(nt){return arguments.length?(E=nt,y):E}function qe(nt){return arguments.length?(f=nt,y):f}function Ut(nt){return arguments.length?(l=nt,y):l}function ut(nt){return arguments.length?(ee(nt||[]),s=nt||[],y):s}function Xt(nt){return arguments.length?(c=nt||[],b(),y):c}function Ot(nt){return arguments.length?(typeof nt=="function"?n=nt:n=e(+nt),b(),y):n}function gn(nt){return arguments.length?(typeof nt=="function"?r=nt:r=e(+nt),b(),y):r}function Vn(nt){return arguments.length?(typeof nt=="function"?o=nt:o=e(+nt),b(),y):o}function Cr(nt){return arguments.length?(typeof nt=="function"?i=nt:i=e(+nt),b(),y):i}function Fr(nt){return arguments.length?(a=nt,y):a}return y.initialize=nt=>{s=nt,b()},y.template=be,y.groupBy=k,y.enableGrouping=xe,y.strength=Ve,y.centerX=qe,y.centerY=Ut,y.nodes=ut,y.links=Xt,y.forceNodeSize=Ot,y.nodeSize=y.forceNodeSize,y.forceCharge=gn,y.forceLinkDistance=Vn,y.forceLinkStrength=Cr,y.offset=Fr,y.getFocis=re,y}const qn={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},nr={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};class Jn extends ve{constructor(t){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,t&&this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(t){const n=this;n.nodes=t.nodes||[];const r=t.edges||[];n.edges=r.map(o=>{const i={},a=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(o).forEach(s=>{a.indexOf(s)>-1||(i[s]=o[s])}),i}),n.ticking=!1}execute(t){const n=this,r=n.nodes,o=n.edges;if(n.ticking)return;let i=n.forceSimulation;const a=n.alphaMin,s=n.alphaDecay,u=n.alpha;if(i){if(t){if(n.clustering&&n.clusterForce&&(n.clusterForce.nodes(r),n.clusterForce.links(o)),i.nodes(r),o&&n.edgeForce)n.edgeForce.links(o);else if(o&&!n.edgeForce){const c=zt().id(f=>f.id).links(o);n.edgeStrength&&c.strength(n.edgeStrength),n.linkDistance&&c.distance(n.linkDistance),n.edgeForce=c,i.force("link",c)}}n.preventOverlap&&n.overlapProcess(i),i.alpha(u).restart(),this.ticking=!0}else try{const c=Ie();if(n.nodeStrength&&c.strength(n.nodeStrength),i=C().nodes(r),n.clustering){const f=bn();f.centerX(n.center[0]).centerY(n.center[1]).template("force").strength(n.clusterFociStrength),o&&f.links(o),r&&f.nodes(r),f.forceLinkDistance(n.clusterEdgeDistance).forceLinkStrength(n.clusterEdgeStrength).forceCharge(n.clusterNodeStrength).forceNodeSize(n.clusterNodeSize),n.clusterForce=f,i.force("group",f)}if(i.force("center",Me(n.center[0],n.center[1])).force("charge",c).alpha(u).alphaDecay(s).alphaMin(a),n.preventOverlap&&n.overlapProcess(i),o){const f=zt().id(l=>l.id).links(o);n.edgeStrength&&f.strength(n.edgeStrength),n.linkDistance&&f.distance(n.linkDistance),n.edgeForce=f,i.force("link",f)}if(n.workerEnabled&&!Xn()&&(n.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!n.workerEnabled)i.on("tick",()=>{n.tick()}).on("end",()=>{n.ticking=!1,n.onLayoutEnd&&n.onLayoutEnd()}),n.ticking=!0;else{i.stop();const f=ir(i);for(let l=1;l<=f;l++)i.tick(),postMessage({nodes:r,currentTick:l,totalTicks:f,type:qn.TICK},void 0);n.ticking=!1}n.forceSimulation=i,n.ticking=!0}catch(c){n.ticking=!1,console.warn(c)}}overlapProcess(t){const n=this,r=n.nodeSize,o=n.nodeSpacing;let i,a;const s=n.collideStrength;if(ye(o)?a=()=>o:lt(o)?a=o:a=()=>0,!r)i=u=>u.size?Tt(u.size)?(u.size[0]>u.size[1]?u.size[0]:u.size[1])/2+a(u):xt(u.size)?(u.size.width>u.size.height?u.size.width:u.size.height)/2+a(u):u.size/2+a(u):10+a(u);else if(lt(r))i=u=>r(u)+a(u);else if(Tt(r)){const c=(r[0]>r[1]?r[0]:r[1])/2;i=f=>c+a(f)}else if(ye(r)){const u=r/2;i=c=>u+a(c)}else i=()=>10;t.force("collisionForce",un(i).strength(s))}updateCfg(t){const n=this;n.ticking&&(n.forceSimulation.stop(),n.ticking=!1),n.forceSimulation=null,Object.assign(n,t)}destroy(){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0}}function ir(e){const t=e.alphaMin(),n=e.alphaTarget(),r=e.alpha(),o=Math.log((t-n)/(r-n))/Math.log(1-e.alphaDecay());return Math.ceil(o)}function Xn(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Ar(e,t,n,r){e.forEach((o,i)=>{e[i].children=[],e[i].parent=[]}),r?t.forEach(o=>{const i=ot(o,"source"),a=ot(o,"target");let s=0;i&&(s=n[i]);let u=0;a&&(u=n[a]);const c=e[s].children,f=e[u].parent;c.push(e[u].id),f.push(e[s].id)}):t.forEach(o=>{const i=ot(o,"source"),a=ot(o,"target");let s=0;i&&(s=n[i]);let u=0;a&&(u=n[a]);const c=e[s].children,f=e[u].children;c.push(e[u].id),f.push(e[s].id)})}function cr(e,t,n){const r=n.length;for(let o=0;o<r;o++){const i=ot(n[o],"source"),a=ot(n[o],"target");if(e.id===i&&t.id===a||t.id===i&&e.id===a)return!0}return!1}function Dn(e,t){const n=e.degree,r=t.degree;return n<r?-1:n>r?1:0}class Yn extends ve{constructor(t){super(),this.radius=null,this.nodeSize=void 0,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(t)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){var t;const n=this,r=n.nodes,o=n.edges,i=r.length;if(i===0){n.onLayoutEnd&&n.onLayoutEnd();return}!n.width&&typeof window!="undefined"&&(n.width=window.innerWidth),!n.height&&typeof window!="undefined"&&(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);const a=n.center;if(i===1){r[0].x=a[0],r[0].y=a[1],n.onLayoutEnd&&n.onLayoutEnd();return}let{radius:s,startRadius:u,endRadius:c}=n;const{divisions:f,startAngle:l,endAngle:d,angleRatio:h,ordering:v,clockwise:m,nodeSpacing:g,nodeSize:E}=n,y=(d-l)/i,b={};r.forEach((re,Q)=>{b[re.id]=Q}),n.nodeMap=b;const w=wt(r.length,b,o);if(n.degrees=w,g){const re=He(10,g),Q=He(10,E);let ee=-1/0;r.forEach(k=>{const xe=Q(k);ee<xe&&(ee=xe)});let be=0;r.forEach((k,xe)=>{xe===0?be+=ee||10:be+=(re(k)||0)+(ee||10)}),s=be/(2*Math.PI)}else!s&&!u&&!c?s=n.height>n.width?n.width/2:n.height/2:!u&&c?u=c:u&&!c&&(c=u);const I=y*h;let X=[];v==="topology"?X=n.topologyOrdering():v==="topology-directed"?X=n.topologyOrdering(!0):v==="degree"?X=n.degreeOrdering():X=r;const ge=Math.ceil(i/f);for(let re=0;re<i;++re){let Q=s;!Q&&u!==null&&c!==null&&(Q=u+re*(c-u)/(i-1)),Q||(Q=10+re*100/(i-1));let ee=l+re%ge*I+2*Math.PI/f*Math.floor(re/ge);m||(ee=d-re%ge*I-2*Math.PI/f*Math.floor(re/ge)),X[re].x=a[0]+Math.cos(ee)*Q,X[re].y=a[1]+Math.sin(ee)*Q,X[re].weight=w[re].all}return(t=n.onLayoutEnd)===null||t===void 0||t.call(n),{nodes:X,edges:this.edges}}topologyOrdering(t=!1){const n=this,r=n.degrees,o=n.edges,i=n.nodes,a=Lt(i),s=n.nodeMap,u=[a[0]],c=[i[0]],f=[],l=i.length;f[0]=!0,Ar(a,o,s,t);let d=0;return a.forEach((h,v)=>{if(v!==0)if((v===l-1||r[v].all!==r[v+1].all||cr(u[d],h,o))&&!f[v])u.push(h),c.push(i[s[h.id]]),f[v]=!0,d++;else{const m=u[d].children;let g=!1;for(let y=0;y<m.length;y++){const b=s[m[y]];if(r[b].all===r[v].all&&!f[b]){u.push(a[b]),c.push(i[s[a[b].id]]),f[b]=!0,g=!0;break}}let E=0;for(;!g&&(f[E]||(u.push(a[E]),c.push(i[s[a[E].id]]),f[E]=!0,g=!0),E++,E!==l););}}),c}degreeOrdering(){const t=this,n=t.nodes,r=[],o=t.degrees;return n.forEach((i,a)=>{i.degree=o[a].all,r.push(i)}),r.sort(Dn),r}getType(){return"circular"}}const hr=(e,t)=>{if(e!=="next"&&e!=="prev")return t},kn=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};class er{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return kn(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&kn(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let r=n.prev;for(;r!==n;)t.push(JSON.stringify(r,hr)),r=r==null?void 0:r.prev;return`[${t.join(", ")}]`}}var Bn;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(Bn||(Bn={}));function Bt(e,t){var n=e.get(t)||0;e.set(t,n+1)}function cn(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function Un(e,t,n,r){var o=String(t),i=String(n);if(!e&&o>i){var a=o;o=i,i=a}return o+Bn.EDGE_KEY_DELIM+i+Bn.EDGE_KEY_DELIM+(r===void 0?Bn.DEFAULT_EDGE_NAME:r)}function ar(e,t,n,r){var o=String(t),i=String(n),a={v:t,w:n};if(!e&&o>i){var s=a.v;a.v=a.w,a.w=s}return r!==void 0&&(a.name=r),a}function mo(e,t){return Un(e,t.v,t.w,t.name)}function Do(e){return typeof e=="function"}var Oo=function(t){return t.nodes().map(function(n){var r=t.node(n),o=t.parent(n),i={id:n,value:r,parent:o};return i.value===void 0&&delete i.value,i.parent===void 0&&delete i.parent,i})},Mt=function(t){return t.edges().map(function(n){var r=t.edge(n),o={v:n.v,w:n.w,value:r,name:n.name};return o.name===void 0&&delete o.name,o.value===void 0&&delete o.value,o})},Pt=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Oo(t),edges:Mt(t),value:t.graph()};return n.value===void 0&&delete n.value,n},In=function(t){var n=new Qo(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(r){n.setNode(r.id,r.value),r.parent&&n.setParent(r.id,r.parent)}),t.edges.forEach(function(r){n.setEdge(r.v,r.w,r.value,r.name)}),n};function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mt(Object(n),!0).forEach(function(r){Vr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ho(e,t,n){return t&&go(e.prototype,t),n&&go(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ko={compound:!1,multigraph:!1,directed:!0},Qo=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};co(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Bn.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(o){return t.label=o,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(o){return Do(o)?t.defaultNodeLabelFn=o:t.defaultNodeLabelFn=function(){return o},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(o){return t.nodesLabelMap.get(o)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(o){var i;return!(!((i=t.inEdgesMap.get(o))===null||i===void 0)&&i.size)})},this.sinks=function(){return t.nodes().filter(function(o){var i;return!(!((i=t.outEdgesMap.get(o))===null||i===void 0)&&i.size)})},this.setNodes=function(o,i){return o.map(function(a){return t.setNode(a,i)}),t},this.hasNode=function(o){return t.nodesLabelMap.has(o)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(o){if(t.isCompound()){var i,a=(i=t.parentMap)===null||i===void 0?void 0:i.get(o);if(a!==t.GRAPH_NODE)return a}},this.removeFromParentsChildList=function(o){var i=t.parentMap.get(o);t.childrenMap.get(i).delete(o)},this.setParent=function(o,i){var a,s;t.checkCompound();for(var u=i===void 0?t.GRAPH_NODE:i,c=t.parent(u);c;){if(o===c)throw new Error("Setting "+i+" as parent of "+o+" would create a cycle");c=t.parent(c)}i&&t.setNode(i),t.setNode(o),t.removeFromParentsChildList(o),(a=t.parentMap)===null||a===void 0||a.set(o,u);var f=t.childrenMap.get(u);return f.set(o,!0),(s=t.childrenMap)===null||s===void 0||s.set(u,f),t},this.children=function(o){var i=o===void 0?t.GRAPH_NODE:o;if(t.isCompound()){var a,s=(a=t.childrenMap)===null||a===void 0?void 0:a.get(i);return s?Array.from(s.keys()):void 0}if(i===t.GRAPH_NODE)return t.nodes();if(o&&t.hasNode(o))return[]},this.predecessors=function(o){var i=t.predecessorsMap.get(o);return i?Array.from(i.keys()):void 0},this.successors=function(o){var i=t.successorsMap.get(o);return i?Array.from(i.keys()):void 0},this.neighbors=function(o){var i;if(t.hasNode(o))return Array.from(new Set((i=t.predecessors(o))===null||i===void 0?void 0:i.concat(t.successors(o))))},this.isLeaf=function(o){var i;if(t.isDirected()){var a;return!(!((a=t.successors(o))===null||a===void 0)&&a.length)}return!(!((i=t.neighbors(o))===null||i===void 0)&&i.length)},this.filterNodes=function(o){var i=t.directed,a=t.multigraph,s=t.compound,u=new e({directed:i,multigraph:a,compound:s});if(u.setGraph(t.graph()),t.nodes().forEach(function(f){o(f)&&u.setNode(f,t.node(f))}),t.edges().forEach(function(f){u.hasNode(f.v)&&u.hasNode(f.w)&&u.setEdgeObj(f,t.edge(f))}),s){var c=function(l){for(var d=t.parent(l);d!==void 0&&!u.hasNode(d);)d=t.parent(d);return d};u.nodes().forEach(function(f){u.setParent(f,c(f))})}return u},this.setDefaultEdgeLabel=function(o){return Do(o)?t.defaultEdgeLabelFn=o:t.defaultEdgeLabelFn=function(){return o},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(o,i){return t.setEdge(o.v,o.w,i,o.name)},this.setPath=function(o,i){return o.reduce(function(a,s){return t.setEdge(a,s,i),s}),t},this.edgeFromArgs=function(o,i,a){return t.edge({v:o,w:i,name:a})},this.edge=function(o){return t.edgesLabelsMap.get(mo(t.isDirected(),o))},this.hasEdge=function(o,i,a){return t.edgesLabelsMap.has(mo(t.isDirected(),{v:o,w:i,name:a}))},this.removeEdgeObj=function(o){var i=o.v,a=o.w,s=o.name;return t.removeEdge(i,a,s)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(o,i){var a=t.inEdgesMap.get(o);if(a)return Array.from(a.values()).filter(function(s){return!i||s.v===i})},this.outEdges=function(o,i){var a=t.outEdgesMap.get(o);if(a)return Array.from(a.values()).filter(function(s){return!i||s.w===i})},this.nodeEdges=function(o,i){var a;if(t.hasNode(o))return(a=t.inEdges(o,i))===null||a===void 0?void 0:a.concat(t.outEdges(o,i))},this.toJSON=function(){return Pt(t)},this.nodeInDegree=function(o){var i=t.inEdgesMap.get(o);return i?i.size:0},this.nodeOutDegree=function(o){var i=t.outEdgesMap.get(o);return i?i.size:0},this.nodeDegree=function(o){return t.nodeInDegree(o)+t.nodeOutDegree(o)},this.source=function(o){return o.v},this.target=function(o){return o.w};var r=Fn(Fn({},Ko),n);this.compound=r.compound,this.directed=r.directed,this.multigraph=r.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return Ho(e,[{key:"setNode",value:function(n,r){var o=this.nodesLabelMap,i=this.defaultNodeLabelFn,a=this.isCompound,s=this.parentMap,u=this.childrenMap,c=this.inEdgesMap,f=this.outEdgesMap,l=this.predecessorsMap,d=this.successorsMap;if(o.has(n))return r!==void 0&&o.set(n,r),this;if(o.set(n,r||i(n)),a()){var h;s==null||s.set(n,this.GRAPH_NODE),u==null||u.set(n,new Map),u!=null&&u.has(this.GRAPH_NODE)||u==null||u.set(this.GRAPH_NODE,new Map),u==null||(h=u.get(this.GRAPH_NODE))===null||h===void 0||h.set(n,!0)}return[c,f,l,d].forEach(function(v){return v.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var r=this;if(this.hasNode(n)){var o=function(g){r.removeEdge(g.v,g.w,g.name)},i=this.inEdgesMap,a=this.outEdgesMap,s=this.predecessorsMap,u=this.successorsMap,c=this.nodesLabelMap;if(this.isCompound()){var f,l,d;this.removeFromParentsChildList(n),(f=this.parentMap)===null||f===void 0||f.delete(n),(l=this.children(n))===null||l===void 0||l.forEach(function(m){return r.setParent(m)}),(d=this.childrenMap)===null||d===void 0||d.delete(n)}var h=i.get(n),v=a.get(n);Array.from(h.values()).forEach(function(m){return o(m)}),Array.from(v.values()).forEach(function(m){return o(m)}),c.delete(n),i.delete(n),a.delete(n),s.delete(n),u.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,r,o,i){var a,s,u=ar(this.isDirected(),n,r,i),c=mo(this.isDirected(),u),f=u.v,l=u.w;if(this.edgesLabelsMap.has(c))return this.edgesLabelsMap.set(c,o),this;if(i!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(l),this.edgesLabelsMap.set(c,o||this.defaultEdgeLabelFn(f,l,i)),Object.freeze(u),this.edgesMap.set(c,u);var d=this.predecessorsMap.get(l),h=this.successorsMap.get(f);return Bt(d,f),Bt(h,l),(a=this.inEdgesMap.get(l))===null||a===void 0||a.set(c,u),(s=this.outEdgesMap.get(f))===null||s===void 0||s.set(c,u),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,r,o){var i=Un(this.isDirected(),n,r,o),a=this.edgesMap.get(i);if(a){var s=ar(this.isDirected(),n,r,o),u=s.v,c=s.w;this.edgesLabelsMap.delete(i),this.edgesMap.delete(i);var f=this.predecessorsMap.get(c),l=this.successorsMap.get(u);cn(f,u),cn(l,c),this.inEdgesMap.get(c).delete(i),this.outEdgesMap.get(u).delete(i),this.edgeCountNum-=1}return this}}]),e}();Qo.fromJSON=In;function fo(e){"@babel/helpers - typeof";return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fo(e)}function Ps(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function na(e,t,n){return t&&xa(e.prototype,t),n&&xa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qo(){return typeof Reflect!="undefined"&&Reflect.get?qo=Reflect.get:qo=function(t,n,r){var o=wa(t,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(arguments.length<3?t:r):i.value}},qo.apply(this,arguments)}function wa(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=fi(e),e!==null););return e}function vr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jo(e,t)}function Jo(e,t){return Jo=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},Jo(e,t)}function Si(e){var t=Ti();return function(){var r=fi(e),o;if(t){var i=fi(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return es(this,o)}}function es(e,t){if(t&&(fo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ci(e)}function ci(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ti(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function fi(e){return fi=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},fi(e)}var ra=null;function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fs(e,t,n){return t&&_a(e.prototype,t),n&&_a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Uo=Fs(function e(){var t=this;zs(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var r=t.keyIndice.get(n);if(r!==void 0)return t.arr[r].priority},this.swap=function(n,r){var o=t.arr,i=t.keyIndice,a=[o[n],o[r]],s=a[0],u=a[1];o[n]=u,o[r]=s,i.set(s.key,r),i.set(u.key,n)},this.innerDecrease=function(n){for(var r=t.arr,o=r[n].priority,i,a=n;a!==0;){var s;if(i=a>>1,((s=r[i])===null||s===void 0?void 0:s.priority)<o)break;t.swap(a,i),a=i}},this.heapify=function(n){var r=t.arr,o=n<<1,i=o+1,a=n;o<r.length&&(a=r[o].priority<r[a].priority?o:a,i<r.length&&(a=r[i].priority<r[a].priority?i:a),a!==n&&(t.swap(n,a),t.heapify(a)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,r){var o=t.keyIndice,i=t.arr;if(!o.has(n)){var a=i.length;return o.set(n,a),i.push({key:n,priority:r}),t.innerDecrease(a),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,r){if(!t.has(n))throw new Error("There's no key named ".concat(n));var o=t.keyIndice.get(n);if(r>t.arr[o].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[o].priority," New: ").concat(r));t.arr[o].priority=r,t.innerDecrease(o)}}),Fu=function(t,n){var r=new Qo,o=new Map,i=new Uo,a;function s(f){var l=f.v===a?f.w:f.v,d=i.priority(l);if(d!==void 0){var h=n(f);h<d&&(o.set(l,a),i.decrease(l,h))}}if(t.nodeCount()===0)return r;t.nodes().forEach(function(f){i.add(f,Number.POSITIVE_INFINITY),r.setNode(f)}),i.decrease(t.nodes()[0],0);for(var u=!1;i.size()>0;){var c;if(a=i.removeMin(),o.has(a))r.setEdge(a,o.get(a));else{if(u)throw new Error("Input graph is not connected: "+t.graph());u=!0}(c=t.nodeEdges(a))===null||c===void 0||c.forEach(s)}return r},li=Fu,Ii=function(t){var n=new Set,r=[],o=t.nodes();return o.forEach(function(i){for(var a=[],s=[i];s.length>0;){var u=s.pop();if(!n.has(u)){var c,f;n.add(u),a.push(u),(c=t.successors(u))===null||c===void 0||c.forEach(function(l){return s.push(l)}),(f=t.predecessors(u))===null||f===void 0||f.forEach(function(l){return s.push(l)})}}a.length&&r.push(a)}),r},di=Ii,Bs=function e(t,n,r,o,i,a){o.includes(n)||(o.push(n),r||a.push(n),i(n).forEach(function(s){return e(t,s,r,o,i,a)}),r&&a.push(n))},zu=function(t,n,r){var o=Array.isArray(n)?n:[n],i=function(c){return t.isDirected()?t.successors(c):t.neighbors(c)},a=[],s=[];return o.forEach(function(u){if(t.hasNode(u))Bs(t,u,r==="post",s,i,a);else throw new Error("Graph does not have node: "+u)}),a},hi=zu;function Sa(e,t){return vi(e)||Us(e,t)||Ta(e,t)||Ni()}function Ni(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ta(e,t){if(e){if(typeof e=="string")return ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ei(e,t)}}function ei(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Us(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,a,s;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));o=!0);}catch(u){i=!0,s=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function vi(e){if(Array.isArray(e))return e}var ts=function(){return 1},Bu=function(t,n,r,o){return $s(t,n,r||ts,o||function(i){return t.outEdges(i)})},$s=function(t,n,r,o){var i=new Map,a=new Uo,s,u,c=function(d){var h=d.v!==s?d.v:d.w,v=i.get(h),m=r(d),g=u.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+m);g<v.distance&&(v.distance=g,v.predecessor=s,a.decrease(h,g))};for(t.nodes().forEach(function(l){var d=l===n?0:Number.POSITIVE_INFINITY;i.set(l,{distance:d}),a.add(l,d)});a.size()>0&&(s=a.removeMin(),u=i.get(s),!(u&&u.distance===Number.POSITIVE_INFINITY));)o(s).forEach(c);var f={};return Array.from(i.entries()).forEach(function(l){var d=Sa(l,2),h=d[0],v=d[1];return f[String(h)]=v,f}),f},oa=Bu,ns=function(t,n,r){var o={};return t.nodes().forEach(function(i){return o[String(i)]=oa(t,i,n,r),o}),o},Vs=ns,Ia=function(t){var n=0,r=[],o=new Map,i=[];function a(s){var u,c={onStack:!0,lowlink:n,index:n};if(o.set(s,c),n+=1,r.push(s),(u=t.successors(s))===null||u===void 0||u.forEach(function(h){var v;if(o.has(h)){if(!((v=o.get(h))===null||v===void 0)&&v.onStack){var g=o.get(h);c.lowlink=Math.min(c.lowlink,g.index)}}else{a(h);var m=o.get(h);c.lowlink=Math.min(c.lowlink,m.lowlink)}}),c.lowlink===c.index){var f=[],l;do{l=r.pop();var d=o.get(l);d.onStack=!1,f.push(l)}while(s!==l);i.push(f)}}return t.nodes().forEach(function(s){o.has(s)||a(s)}),i},rs=Ia,pr=function(t){return rs(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})},os=pr;function Na(e){"@babel/helpers - typeof";return Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Na(e)}function $o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function is(e,t,n){return t&&$o(e.prototype,t),n&&$o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ia(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}function aa(e){var t=On();return function(){var r=Lo(e),o;if(t){var i=Lo(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return Zi(this,o)}}function Zi(e,t){if(t&&(Na(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ji(e)}function ji(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ai(e){var t=typeof Map=="function"?new Map:void 0;return Ai=function(r){if(r===null||!Wr(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,o)}function o(){return rr(r,arguments,Lo(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Xr(o,r)},Ai(e)}function rr(e,t,n){return On()?rr=Reflect.construct:rr=function(o,i,a){var s=[null];s.push.apply(s,i);var u=Function.bind.apply(o,s),c=new u;return a&&Xr(c,a.prototype),c},rr.apply(null,arguments)}function On(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Wr(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Xr(e,t){return Xr=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},Xr(e,t)}function Lo(e){return Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Lo(e)}var Mo=function(e){Vo(n,e);var t=aa(n);function n(){return ia(this,n),t.apply(this,arguments)}return is(n)}(Ai(Error));function Uu(e){var t=new Set,n=new Set,r=[];function o(i){if(n.has(i))throw new Mo;if(!t.has(i)){var a;n.add(i),t.add(i),(a=e.predecessors(i))===null||a===void 0||a.forEach(o),n.delete(i),r.push(i)}}if(e.sinks().forEach(o),t.size!==e.nodeCount())throw new Mo;return r}var Ws=Uu,Xs=function(t){try{Ws(t)}catch(n){if(n instanceof Mo)return!1;throw n}return!0},$u=Xs,Vu=function(t,n){return hi(t,n,"post")},Aa=Vu,Wu=function(t,n){return hi(t,n,"pre")},Xu=Wu,Hu=function(){return 1};function Zu(e,t,n){return jc(e,t||Hu,n||function(r){return e.outEdges(r)})}function jc(e,t,n){var r={},o=e.nodes();return o.forEach(function(i){var a=String(i);r[a]={},r[a][a]={distance:0},o.forEach(function(s){i!==s&&(r[a][String(s)]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(s){var u=s.v===i?s.w:s.v,c=t(s);r[a][String(u)]={distance:c,predecessor:i}})}),o.forEach(function(i){var a=String(i),s=r[a];o.forEach(function(u){var c=String(u),f=r[c];o.forEach(function(l){var d=String(l),h=f[a],v=s[d],m=f[d],g=h.distance+v.distance;g<m.distance&&(m.distance=g,m.predecessor=v.predecessor)})})}),r}var Yc=Zu;function Kc(e,t){return ef(e)||Jc(e,t)||qc(e,t)||Qc()}function Qc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qc(e,t){if(e){if(typeof e=="string")return ju(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ju(e,t)}}function ju(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jc(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,a,s;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));o=!0);}catch(u){i=!0,s=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function ef(e){if(Array.isArray(e))return e}function as(e){return e instanceof Graph}function tf(e){if(e.isMultigraph())return!1;for(var t=e.edges(),n=new Map,r=0;r<t.length;r++){var o=t[r];if(o.v===o.w)return!1;var i=[o.v,o.w].sort(),a=Kc(i,2),s=a[0],u=a[1],c="".concat(s,"-").concat(u);if(n.has(c))return!1;n.set(c,!0)}return!0}function nf(e){return e.nodes().length===0}function Hs(e){for(var t=e.edges(),n=0;n<t.length;n++){var r=t[n];if(r.v===r.w)return!0}return!1}var Th=function(t,n){if(!isSimpleGraph(t)||!isSimpleGraph(n)||!containAllSameNodes(t,n)||containSameEdges(t,n))return!1;var r=t.nodeCount();return t.edgeCount()+n.edgeCount()===r*(r-1)/2},Ih=function(t){if(!isSimpleGraph(t))return null;for(var n=t.nodeCount(),r=new Graph({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),o=t.nodes(),i=0;i<n;i++){var a=o[i];r.setNode(a,t.node(a));for(var s=i+1;s<n;s++){var u=o[s];t.hasEdge(a,u)||r.setEdge(a,u)}}return r};class zl extends er{}class Yu extends Qo{}const Bl=()=>1,Ul=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const r=Vl(e,t||Bl);return(n=$l(r.graph,r.buckets,r.zeroIdx).map(i=>e.outEdges(i.v,i.w)))===null||n===void 0?void 0:n.flat()},$l=(e,t,n)=>{let r=[];const o=t[t.length-1],i=t[0];let a;for(;e.nodeCount();){for(;a=i.dequeue();)ss(e,t,n,a);for(;a=o.dequeue();)ss(e,t,n,a);if(e.nodeCount()){for(let s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){r=r.concat(ss(e,t,n,a,!0));break}}}return r},ss=(e,t,n,r,o)=>{var i,a;const s=[];return(i=e.inEdges(r.v))===null||i===void 0||i.forEach(u=>{const c=e.edge(u),f=e.node(u.v);o&&s.push({v:u.v,w:u.w,in:0,out:0}),f.out===void 0&&(f.out=0),f.out-=c,us(t,n,f)}),(a=e.outEdges(r.v))===null||a===void 0||a.forEach(u=>{const c=e.edge(u),f=u.w,l=e.node(f);l.in===void 0&&(l.in=0),l.in-=c,us(t,n,l)}),e.removeNode(r.v),o?s:void 0},Vl=(e,t)=>{const n=new Yu;let r=0,o=0;e.nodes().forEach(u=>{n.setNode(u,{v:u,in:0,out:0})}),e.edges().forEach(u=>{const c=n.edge(u)||0,f=(t==null?void 0:t(u))||1,l=c+f;n.setEdge(u.v,u.w,l),o=Math.max(o,n.node(u.v).out+=f),r=Math.max(r,n.node(u.w).in+=f)});const i=[],a=o+r+3;for(let u=0;u<a;u++)i.push(new zl);const s=r+1;return n.nodes().forEach(u=>{us(i,s,n.node(u))}),{buckets:i,zeroIdx:s,graph:n}},us=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)};var rf=Ul;const of=e=>{const t=r=>o=>{var i;return((i=r.edge(o))===null||i===void 0?void 0:i.weight)||1},n=e.graph().acyclicer==="greedy"?rf(e,t(e)):Ku(e);n==null||n.forEach(r=>{const o=e.edge(r);e.removeEdgeObj(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,`rev-${Math.random()}`)})},Ku=e=>{const t=[],n={},r={},o=i=>{var a;r[i]||(r[i]=!0,n[i]=!0,(a=e.outEdges(i))===null||a===void 0||a.forEach(s=>{n[s.w]?t.push(s):o(s.w)}),delete n[i])};return e.nodes().forEach(o),t};var cs={run:of,undo:e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}};class Ri extends Qo{}const Wl=(e,t)=>Number(e)-Number(t),Ra=(e,t,n,r)=>{let o;do o=`${r}${Math.random()}`;while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o},Xl=e=>{const t=new Ri().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const r=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},af=e=>{const t=new Ri({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var r;!((r=e.children(n))===null||r===void 0)&&r.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},sf=(e,t)=>e==null?void 0:e.reduce((n,r,o)=>(n[r]=t[o],n),{}),Ah=e=>{const t={};return e.nodes().forEach(n=>{var r;const o={};(r=e.outEdges(n))===null||r===void 0||r.forEach(i=>{var a;o[i.w]=(o[i.w]||0)+(((a=e.edge(i))===null||a===void 0?void 0:a.weight)||0)}),t[n]=o}),t},Hl=e=>{const t=e.nodes(),n=t.map(r=>{var o;const i={};return(o=e.inEdges(r))===null||o===void 0||o.forEach(a=>{i[a.v]=(i[a.v]||0)+e.edge(a).weight}),i});return sf(t,n)},Ca=(e,t)=>{const n=Number(e.x),r=Number(e.y),o=Number(t.x)-n,i=Number(t.y)-r;let a=Number(e.width)/2,s=Number(e.height)/2;if(!o&&!i)return{x:0,y:0};let u,c;return Math.abs(i)*a>Math.abs(o)*s?(i<0&&(s=-s),u=s*o/i,c=s):(o<0&&(a=-a),u=a,c=a*i/o),{x:n+u,y:r+c}},fs=e=>{const t=[],n=Qu(e)+1;for(let r=0;r<n;r++)t.push([]);e.nodes().forEach(r=>{const o=e.node(r);if(!o)return;const i=o.rank;i!==void 0&&t[i]&&t[i].push(r)});for(let r=0;r<n;r++)t[r]=t[r].sort((o,i)=>{var a,s;return Wl((a=e.node(o))===null||a===void 0?void 0:a.order,(s=e.node(i))===null||s===void 0?void 0:s.order)});return t},Zs=e=>{const t=e.nodes().filter(r=>{var o;return((o=e.node(r))===null||o===void 0?void 0:o.rank)!==void 0}).map(r=>e.node(r).rank),n=Math.min(...t);e.nodes().forEach(r=>{const o=e.node(r);o.hasOwnProperty("rank")&&n!==1/0&&(o.rank-=n)})},Zo=e=>{const t=e.nodes(),n=t.filter(s=>{var u;return((u=e.node(s))===null||u===void 0?void 0:u.rank)!==void 0}).map(s=>e.node(s).rank),r=Math.min(...n),o=[];t.forEach(s=>{var u;const c=(((u=e.node(s))===null||u===void 0?void 0:u.rank)||0)-r;o[c]||(o[c]=[]),o[c].push(s)});let i=0;const a=e.graph().nodeRankFactor||0;for(let s=0;s<o.length;s++){const u=o[s];u===void 0?s%a!==0&&(i-=1):i&&(u==null||u.forEach(c=>{const f=e.node(c);f&&(f.rank=f.rank||0,f.rank+=i)}))}},sa=(e,t,n,r)=>{const o={width:0,height:0};return ye(n)&&ye(r)&&(o.rank=n,o.order=r),Ra(e,"border",o,t)},Qu=e=>{let t;return e.nodes().forEach(n=>{var r;const o=(r=e.node(n))===null||r===void 0?void 0:r.rank;o!==void 0&&(t===void 0||o>t)&&(t=o)}),t||(t=0),t},uf=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(r=>{t(r)?n.lhs.push(r):n.rhs.push(r)}),n},qu=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},Ju=(e,t)=>t(),js=(e,t)=>e.reduce((n,r)=>{const o=t(n),i=t(r);return o>i?r:n}),cf=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>Zl(e,t))},Zl=(e,t)=>{let n=t.v,r=e.node(n).rank;const o=t.w,i=e.node(o).rank,a=t.name,s=e.edge(t),u=s.labelRank;if(i===r+1)return;e.removeEdgeObj(t);const c=e.graph();let f,l,d;for(d=0,++r;r<i;++d,++r)s.points=[],l={edgeLabel:s,width:0,height:0,edgeObj:t,rank:r},f=Ra(e,"edge",l,"_d"),r===u&&(l.width=s.width,l.height=s.height,l.dummy="edge-label",l.labelpos=s.labelpos),e.setEdge(n,f,{weight:s.weight},a),d===0&&(c.dummyChains||(c.dummyChains=[]),c.dummyChains.push(f)),n=f;e.setEdge(n,o,{weight:s.weight},a)};var no={run:cf,undo:e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let r=e.node(n);const o=r.edgeLabel;let i;r.edgeObj&&e.setEdgeObj(r.edgeObj,o);let a=n;for(;r.dummy;)i=e.successors(a)[0],e.removeNode(a),o.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),a=i,r=e.node(a)})}};const Ys=e=>{var t;const n={},r=o=>{var i;const a=e.node(o);if(!a)return 0;if(n[o])return a.rank;n[o]=!0;let s;return(i=e.outEdges(o))===null||i===void 0||i.forEach(u=>{const c=r(u.w),f=e.edge(u).minlen,l=c-f;l&&(s===void 0||l<s)&&(s=l)}),s||(s=0),a.rank=s,s};(t=e.sources())===null||t===void 0||t.forEach(o=>r(o))},ec=e=>{var t;const n={};let r;const o=s=>{var u;const c=e.node(s);if(!c)return 0;if(n[s])return c.rank;n[s]=!0;let f;return(u=e.outEdges(s))===null||u===void 0||u.forEach(l=>{const d=o(l.w),h=e.edge(l).minlen,v=d-h;v&&(f===void 0||v<f)&&(f=v)}),f||(f=0),(r===void 0||f<r)&&(r=f),c.rank=f,f};(t=e.sources())===null||t===void 0||t.forEach(s=>{e.node(s)&&o(s)}),r===void 0&&(r=0);const i={},a=(s,u)=>{var c;const f=e.node(s),l=isNaN(f.layer)?u:f.layer;(f.rank===void 0||f.rank<l)&&(f.rank=l),!i[s]&&(i[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.map(d=>{a(d.w,l+e.edge(d).minlen)}))};e.nodes().forEach(s=>{const u=e.node(s);u&&(isNaN(u.layer)?u.rank-=r:a(s,u.layer))})},So=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen;var jl={longestPath:Ys,longestPathWithLayer:ec,slack:So};const tc=e=>{const t=new Ri({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});let o,i;for(;Yl(t,e)<r;)o=lf(t,e),i=t.hasNode(o.v)?So(e,o):-So(e,o),Ks(t,e,i);return t},Yl=(e,t)=>{const n=r=>{t.nodeEdges(r).forEach(o=>{const i=o.v,a=r===i?o.w:i;!e.hasNode(a)&&!So(t,o)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})};return e.nodes().forEach(n),e.nodeCount()},ff=e=>{const t=new Ri({directed:!1}),n=e.nodes()[0],r=e.nodes().filter(a=>!!e.node(a)).length;t.setNode(n,{});let o,i;for(;Kl(t,e)<r;)o=lf(t,e),i=t.hasNode(o.v)?So(e,o):-So(e,o),Ks(t,e,i);return t},Kl=(e,t)=>{const n=r=>{var o;(o=t.nodeEdges(r))===null||o===void 0||o.forEach(i=>{const a=i.v,s=r===a?i.w:a;!e.hasNode(s)&&(t.node(s).layer!==void 0||!So(t,i))&&(e.setNode(s,{}),e.setEdge(r,s,{}),n(s))})};return e.nodes().forEach(n),e.nodeCount()},lf=(e,t)=>js(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?So(t,n):1/0),Ks=(e,t,n)=>{e.nodes().forEach(r=>{t.node(r).rank||(t.node(r).rank=0),t.node(r).rank+=n})};var Ql={feasibleTree:tc,feasibleTreeWithLayer:ff};const{preorder:ql,postorder:df}=Z,hf=e=>{const t=Xl(e);Ys(t);const n=tc(t);Ci(n),vf(n,t);let r,o;for(;r=pf(n);)o=mf(n,t,r),gf(n,t,r,o)},vf=(e,t)=>{let n=df(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(r=>{Qs(e,t,r)})},Qs=(e,t,n)=>{const o=e.node(n).parent;e.edgeFromArgs(n,o).cutvalue=Jl(e,t,n)},Jl=(e,t,n)=>{var r;const i=e.node(n).parent;let a=!0,s=t.edgeFromArgs(n,i),u=0;return s||(a=!1,s=t.edgeFromArgs(i,n)),u=s.weight,(r=t.nodeEdges(n))===null||r===void 0||r.forEach(c=>{const f=c.v===n,l=f?c.w:c.v;if(l!==i){const d=f===a,h=t.edge(c).weight;if(u+=d?h:-h,Ef(e,n,l)){const v=e.edgeFromArgs(n,l).cutvalue;u+=d?-v:v}}}),u},Ci=(e,t=e.nodes()[0])=>{ds(e,{},1,t)},ds=(e,t,n,r,o)=>{var i;const a=n;let s=n;const u=e.node(r);return t[r]=!0,(i=e.neighbors(r))===null||i===void 0||i.forEach(c=>{t[c]||(s=ds(e,t,s,c,r))}),u.low=a,u.lim=s++,o?u.parent=o:delete u.parent,s},pf=e=>e.edges().find(t=>e.edge(t).cutvalue<0),mf=(e,t,n)=>{let r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);const i=e.node(r),a=e.node(o);let s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);const c=t.edges().filter(f=>u===nc(e,e.node(f.v),s)&&u!==nc(e,e.node(f.w),s));return js(c,f=>So(t,f))},gf=(e,t,n,r)=>{const o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),Ci(e),vf(e,t),yf(e,t)},yf=(e,t)=>{const n=e.nodes().find(o=>{var i;return!(!((i=t.node(o))===null||i===void 0)&&i.parent)});let r=ql(e,n);r=r==null?void 0:r.slice(1),r==null||r.forEach(o=>{const i=e.node(o).parent;let a=t.edgeFromArgs(o,i),s=!1;a||(a=t.edgeFromArgs(i,o),s=!0),t.node(o).rank=t.node(i).rank+(s?a.minlen:-a.minlen)})},Ef=(e,t,n)=>e.hasEdge(t,n),nc=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim;var bf=hf;const xf=e=>{switch(e.graph().ranker){case"network-simplex":_f(e);break;case"tight-tree":jo(e);break;case"longest-path":wf(e);break;default:jo(e)}},wf=Ys,jo=e=>{ec(e),ff(e)},_f=e=>{bf(e)};var ed=xf;const Di=e=>{var t;const n={};let r=0;const o=i=>{var a;const s=r;(a=e.children(i))===null||a===void 0||a.forEach(o),n[i]={low:s,lim:r++}};return(t=e.children())===null||t===void 0||t.forEach(o),n},rc=(e,t,n,r)=>{const o=[],i=[],a=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim);let u,c;u=n;do u=e.parent(u),o.push(u);while(u&&(t[u].low>a||s>t[u].lim));for(c=u,u=r;u&&u!==c;)i.push(u),u=e.parent(u);return{lca:c,path:o.concat(i.reverse())}};var qs=e=>{var t;const n=Di(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(r=>{var o,i;let a=r,s=e.node(a);const u=s.edgeObj;if(!u)return;const c=rc(e,n,u.v,u.w),f=c.path,l=c.lca;let d=0,h=f[d],v=!0;for(;a!==u.w;){if(s=e.node(a),v){for(;h!==l&&((o=e.node(h))===null||o===void 0?void 0:o.maxRank)<s.rank;)d++,h=f[d];h===l&&(v=!1)}if(!v){for(;d<f.length-1&&((i=e.node(f[d+1]))===null||i===void 0?void 0:i.minRank)<=s.rank;)d++;h=f[d]}e.setParent(a,h),a=e.successors(a)[0]}})};const Sf=e=>{var t;const n=Ra(e,"root",{},"_root"),r=Tf(e);let o=Math.max(...Object.values(r));Math.abs(o)===1/0&&(o=1);const i=o-1,a=2*i+1;e.graph().nestingRoot=n,e.edges().forEach(u=>{e.edge(u).minlen*=a});const s=If(e)+1;(t=e.children())===null||t===void 0||t.forEach(u=>{oc(e,n,a,s,i,r,u)}),e.graph().nodeRankFactor=a},oc=(e,t,n,r,o,i,a)=>{const s=e.children(a);if(!(s!=null&&s.length)){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}const u=sa(e,"_bt"),c=sa(e,"_bb"),f=e.node(a);e.setParent(u,a),f.borderTop=u,e.setParent(c,a),f.borderBottom=c,s==null||s.forEach(l=>{oc(e,t,n,r,o,i,l);const d=e.node(l),h=d.borderTop?d.borderTop:l,v=d.borderBottom?d.borderBottom:l,m=d.borderTop?r:2*r,g=h!==v?1:o-i[a]+1;e.setEdge(u,h,{minlen:g,weight:m,nestingEdge:!0}),e.setEdge(v,c,{minlen:g,weight:m,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:o+i[a]})},Tf=e=>{var t;const n={},r=(o,i)=>{const a=e.children(o);a==null||a.forEach(s=>r(s,i+1)),n[o]=i};return(t=e.children())===null||t===void 0||t.forEach(o=>r(o,1)),n},If=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t};var Nf={run:Sf,cleanup:e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})}};const nd=e=>{var t;const n=r=>{const o=e.children(r),i=e.node(r);if(o!=null&&o.length&&o.forEach(a=>n(a)),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let a=i.minRank,s=i.maxRank+1;a<s;a+=1)Af(e,"borderLeft","_bl",r,i,a),Af(e,"borderRight","_br",r,i,a)}};(t=e.children())===null||t===void 0||t.forEach(r=>n(r))},Af=(e,t,n,r,o,i)=>{const a={rank:i,borderType:t,width:0,height:0},s=o[t][i-1],u=Ra(e,"border",a,n);o[t][i]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})};var rd=nd;const od=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&Rf(e)},id=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&Cf(e),(n==="lr"||n==="rl")&&(ad(e),Rf(e))},Rf=e=>{e.nodes().forEach(t=>{ic(e.node(t))}),e.edges().forEach(t=>{ic(e.edge(t))})},ic=e=>{const t=e.width;e.width=e.height,e.height=t},Cf=e=>{e.nodes().forEach(t=>{ac(e.node(t))}),e.edges().forEach(t=>{var n;const r=e.edge(t);(n=r.points)===null||n===void 0||n.forEach(o=>ac(o)),r.hasOwnProperty("y")&&ac(r)})},ac=e=>{e!=null&&e.y&&(e.y=-e.y)},ad=e=>{e.nodes().forEach(t=>{hs(e.node(t))}),e.edges().forEach(t=>{var n;const r=e.edge(t);(n=r.points)===null||n===void 0||n.forEach(o=>hs(o)),r.hasOwnProperty("x")&&hs(r)})},hs=e=>{const t=e.x;e.x=e.y,e.y=t};var vs={adjust:od,undo:id},sd={}.toString,ud=function(e,t){return sd.call(e)==="[object "+t+"]"},cd=ud,Df=function(e){return Array.isArray?Array.isArray(e):cd(e,"Array")},sc=function(e){if(Df(e))return e.reduce(function(t,n){return Math.max(t,n)},e[0])},Of=e=>{const t={},n=e.nodes().filter(f=>{var l;return!(!((l=e.children(f))===null||l===void 0)&&l.length)}),r=n.map(f=>e.node(f).rank),o=sc(r),i=[];for(let f=0;f<o+1;f++)i.push([]);const a=f=>{var l;if(t.hasOwnProperty(f))return;t[f]=!0;const d=e.node(f);isNaN(d.rank)||i[d.rank].push(f),(l=e.successors(f))===null||l===void 0||l.forEach(h=>a(h))},s=n.sort((f,l)=>e.node(f).rank-e.node(l).rank),c=s.filter(f=>e.node(f).fixorder!==void 0).sort((f,l)=>e.node(f).fixorder-e.node(l).fixorder);return c==null||c.forEach(f=>{isNaN(e.node(f).rank)||i[e.node(f).rank].push(f),t[f]=!0}),s==null||s.forEach(a),i};const ld=(e,t,n)=>{const r=sf(n,n.map((f,l)=>l)),i=t.map(f=>{var l;const d=(l=e.outEdges(f))===null||l===void 0?void 0:l.map(h=>({pos:r[h.w]||0,weight:e.edge(h).weight}));return d==null?void 0:d.sort((h,v)=>h.pos-v.pos)}).flat().filter(f=>f!==void 0);let a=1;for(;a<n.length;)a<<=1;const s=2*a-1;a-=1;const u=Array(s).fill(0,0,s);let c=0;return i==null||i.forEach(f=>{if(f){let l=f.pos+a;u[l]+=f.weight;let d=0;for(;l>0;)l%2&&(d+=u[l+1]),l=l-1>>1,u[l]+=f.weight;c+=f.weight*d}}),c};var Lf=(e,t)=>{let n=0;for(let r=1;r<(t==null?void 0:t.length);r+=1)n+=ld(e,t[r-1],t[r]);return n};const dd=(e,t,n)=>{const r=Oa(e),o=new Ri({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{var a;const s=e.node(i),u=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(o.setNode(i),o.setParent(i,u||r),(a=e[n](i))===null||a===void 0||a.forEach(c=>{const f=c.v===i?c.w:c.v,l=o.edgeFromArgs(f,i),d=l!==void 0?l.weight:0;o.setEdge(f,i,{weight:e.edge(c).weight+d})}),s.hasOwnProperty("minRank")&&o.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),o},Oa=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t};var hd=dd,Mf=(e,t,n)=>{const r={};let o;n==null||n.forEach(i=>{let a=e.parent(i),s,u;for(;a;){if(s=e.parent(a),s?(u=r[s],r[s]=a):(u=o,o=a),u&&u!==a){t.setEdge(u,a);return}a=s}})},vd=(e,t)=>t.map(n=>{const r=e.inEdges(n);if(!(r!=null&&r.length))return{v:n};{const o={sum:0,weight:0};return r==null||r.forEach(i=>{const a=e.edge(i),s=e.node(i.v);o.sum+=a.weight*s.order,o.weight+=a.weight}),{v:n,barycenter:o.sum/o.weight,weight:o.weight}}});const Gf=(e,t)=>{var n,r,o;const i={};e==null||e.forEach((s,u)=>{i[s.v]={i:u,indegree:0,in:[],out:[],vs:[s.v]};const c=i[s.v];s.barycenter!==void 0&&(c.barycenter=s.barycenter,c.weight=s.weight)}),(n=t.edges())===null||n===void 0||n.forEach(s=>{const u=i[s.v],c=i[s.w];u!==void 0&&c!==void 0&&(c.indegree++,u.out.push(i[s.w]))});const a=(o=(r=Object.values(i)).filter)===null||o===void 0?void 0:o.call(r,s=>!s.indegree);return pd(a)},pd=e=>{var t,n;const r=[],o=u=>c=>{c.merged||(c.barycenter===void 0||u.barycenter===void 0||c.barycenter>=u.barycenter)&&md(u,c)},i=u=>c=>{c.in.push(u),--c.indegree===0&&e.push(c)};for(;e!=null&&e.length;){const u=e.pop();r.push(u),(t=u.in.reverse())===null||t===void 0||t.forEach(c=>o(u)(c)),(n=u.out)===null||n===void 0||n.forEach(c=>i(u)(c))}const a=r.filter(u=>!u.merged),s=["vs","i","barycenter","weight"];return a.map(u=>{const c={};return s==null||s.forEach(f=>{u[f]!==void 0&&(c[f]=u[f])}),c})},md=(e,t)=>{var n;let r=0,o=0;e.weight&&(r+=e.barycenter*e.weight,o+=e.weight),t.weight&&(r+=t.barycenter*t.weight,o+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=r/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0};var gd=Gf;const yd=(e,t,n,r)=>{const o=uf(e,d=>{const h=d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder);return r?!h&&d.hasOwnProperty("barycenter"):h||d.hasOwnProperty("barycenter")}),i=o.lhs,a=o.rhs.sort((d,h)=>-d.i- -h.i),s=[];let u=0,c=0,f=0;i==null||i.sort(ps(!!t,!!n)),f=Pf(s,a,f),i==null||i.forEach(d=>{var h;f+=(h=d.vs)===null||h===void 0?void 0:h.length,s.push(d.vs),u+=d.barycenter*d.weight,c+=d.weight,f=Pf(s,a,f)});const l={vs:s.flat()};return c&&(l.barycenter=u/c,l.weight=c),l},Pf=(e,t,n)=>{let r=n,o;for(;t.length&&(o=t[t.length-1]).i<=r;)t.pop(),e==null||e.push(o.vs),r++;return r},ps=(e,t)=>(n,r)=>{if(n.fixorder!==void 0&&r.fixorder!==void 0)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(t&&n.order!==void 0&&r.order!==void 0){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return e?r.i-n.i:n.i-r.i};var Ed=yd;const ms=(e,t,n,r,o,i)=>{var a,s,u,c;let f=e.children(t);const l=e.node(t),d=l?l.borderLeft:void 0,h=l?l.borderRight:void 0,v={};d&&(f=f==null?void 0:f.filter(y=>y!==d&&y!==h));const m=vd(e,f||[]);m==null||m.forEach(y=>{var b;if(!((b=e.children(y.v))===null||b===void 0)&&b.length){const w=ms(e,y.v,n,r,i);v[y.v]=w,w.hasOwnProperty("barycenter")&&La(y,w)}});const g=gd(m,n);bd(g,v),(a=g.filter(y=>y.vs.length>0))===null||a===void 0||a.forEach(y=>{const b=e.node(y.vs[0]);b&&(y.fixorder=b.fixorder,y.order=b.order)});const E=Ed(g,r,o,i);if(d&&(E.vs=[d,E.vs,h].flat(),!((s=e.predecessors(d))===null||s===void 0)&&s.length)){const y=e.node(((u=e.predecessors(d))===null||u===void 0?void 0:u[0])||""),b=e.node(((c=e.predecessors(h))===null||c===void 0?void 0:c[0])||"");E.hasOwnProperty("barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+y.order+b.order)/(E.weight+2),E.weight+=2}return E},bd=(e,t)=>{e==null||e.forEach(n=>{var r;const o=(r=n.vs)===null||r===void 0?void 0:r.map(i=>t[i]?t[i].vs:i);n.vs=o.flat()})},La=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)};var Ma=ms;const xd=(e,t)=>{const n=Qu(e),r=[],o=[];for(let f=1;f<n+1;f++)r.push(f);for(let f=n-1;f>-1;f--)o.push(f);const i=ua(e,r,"inEdges"),a=ua(e,o,"outEdges");let s=Of(e);Yi(e,s);let u=Number.POSITIVE_INFINITY,c;for(let f=0,l=0;l<4;++f,++l){uc(f%2?i:a,f%4>=2,!1,t),s=fs(e);const d=Lf(e,s);d<u&&(l=0,c=Lt(s),u=d)}s=Of(e),Yi(e,s);for(let f=0,l=0;l<4;++f,++l){uc(f%2?i:a,f%4>=2,!0,t),s=fs(e);const d=Lf(e,s);d<u&&(l=0,c=Lt(s),u=d)}Yi(e,c)},ua=(e,t,n)=>t.map(r=>hd(e,r,n)),uc=(e,t,n,r)=>{const o=new Ri;e==null||e.forEach(i=>{var a;const s=i.graph().root,u=Ma(i,s,o,t,n,r);for(let c=0;c<((a=u.vs)===null||a===void 0?void 0:a.length);c++){const f=i.node(u.vs[c]);f&&(f.order=c)}Mf(i,o,u.vs)})},Yi=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((r,o)=>{e.node(r).order=o})})};var cc=xd,Js=function(e){if(Df(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])};class fc extends Qo{}const eu=(e,t)=>{const n={},r=(o,i)=>{let a=0,s=0;const u=o.length,c=i==null?void 0:i[(i==null?void 0:i.length)-1];return i==null||i.forEach((f,l)=>{var d;const h=nu(e,f),v=h?e.node(h).order:u;(h||f===c)&&((d=i.slice(s,l+1))===null||d===void 0||d.forEach(m=>{var g;(g=e.predecessors(m))===null||g===void 0||g.forEach(E=>{var y;const b=e.node(E),w=b.order;(w<a||v<w)&&!(b.dummy&&(!((y=e.node(m))===null||y===void 0)&&y.dummy))&&lc(n,E,m)})}),s=l+1,a=v)}),i};return t!=null&&t.length&&t.reduce(r),n},tu=(e,t)=>{const n={};function r(s,u,c,f,l){var d,h;let v;for(let m=u;m<c;m++)v=s[m],!((d=e.node(v))===null||d===void 0)&&d.dummy&&((h=e.predecessors(v))===null||h===void 0||h.forEach(g=>{const E=e.node(g);E.dummy&&(E.order<f||E.order>l)&&lc(n,g,v)}))}function o(s){return JSON.stringify(s.slice(1))}function i(s,u){const c=o(s);u.get(c)||(r(...s),u.set(c,!0))}const a=(s,u)=>{let c=-1,f,l=0;const d=new Map;return u==null||u.forEach((h,v)=>{var m;if(((m=e.node(h))===null||m===void 0?void 0:m.dummy)==="border"){const g=e.predecessors(h)||[];g.length&&(f=e.node(g[0]).order,i([u,l,v,c,f],d),l=v,c=f)}i([u,l,u.length,f,s.length],d)}),u};return t!=null&&t.length&&t.reduce(a),n},nu=(e,t)=>{var n,r;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(r=e.predecessors(t))===null||r===void 0?void 0:r.find(o=>e.node(o).dummy)},lc=(e,t,n)=>{let r=t,o=n;if(r>o){const a=r;r=o,o=a}let i=e[r];i||(e[r]=i={}),i[o]=!0},Ff=(e,t,n)=>{let r=t,o=n;if(r>o){const i=t;r=o,o=i}return!!e[r]},dc=(e,t,n,r)=>{const o={},i={},a={};return t==null||t.forEach(s=>{s==null||s.forEach((u,c)=>{o[u]=u,i[u]=u,a[u]=c})}),t==null||t.forEach(s=>{let u=-1;s==null||s.forEach(c=>{let f=r(c);if(f.length){f=f.sort((d,h)=>a[d]-a[h]);const l=(f.length-1)/2;for(let d=Math.floor(l),h=Math.ceil(l);d<=h;++d){const v=f[d];i[c]===c&&u<a[v]&&!Ff(n,c,v)&&(i[v]=c,i[c]=o[c]=o[v],u=a[v])}}})}),{root:o,align:i}},hc=(e,t,n,r,o)=>{var i;const a={},s=zf(e,t,n,o),u=o?"borderLeft":"borderRight",c=(d,h)=>{let v=s.nodes(),m=v.pop();const g={};for(;m;)g[m]?d(m):(g[m]=!0,v.push(m),v=v.concat(h(m))),m=v.pop()},f=d=>{a[d]=(s.inEdges(d)||[]).reduce((h,v)=>Math.max(h,(a[v.v]||0)+s.edge(v)),0)},l=d=>{const h=(s.outEdges(d)||[]).reduce((m,g)=>Math.min(m,(a[g.w]||0)-s.edge(g)),Number.POSITIVE_INFINITY),v=e.node(d);h!==Number.POSITIVE_INFINITY&&v.borderType!==u&&(a[d]=Math.max(a[d],h))};return c(f,s.predecessors.bind(s)),c(l,s.successors.bind(s)),(i=Object.values(r))===null||i===void 0||i.forEach(d=>{a[d]=a[n[d]]}),a},zf=(e,t,n,r)=>{const o=new fc,i=e.graph(),a=Bf(i.nodesep,i.edgesep,r);return t==null||t.forEach(s=>{let u;s==null||s.forEach(c=>{const f=n[c];if(o.setNode(f),u){const l=n[u],d=o.edgeFromArgs(l,f);o.setEdge(l,f,Math.max(a(e,c,u),d||0))}u=c})}),o},ru=(e,t)=>js(Object.values(t),n=>{var r;let o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return(r=Object.keys(n))===null||r===void 0||r.forEach(a=>{const s=n[a],u=Uf(e,a)/2;o=Math.max(s+u,o),i=Math.min(s-u,i)}),o-i});function ou(e,t){const n=Object.values(t),r=Js(n),o=sc(n);["u","d"].forEach(i=>{["l","r"].forEach(a=>{const s=i+a,u=e[s];let c;if(u===t)return;const f=Object.values(u);c=a==="l"?r-Js(f):o-sc(f),c&&(e[s]={},Object.keys(u).forEach(l=>{e[s][l]=u[l]+c}))})})}const vc=(e,t)=>{const n={};return Object.keys(e.ul).forEach(r=>{if(t)n[r]=e[t.toLowerCase()][r];else{const o=Object.values(e).map(i=>i[r]);n[r]=(o[0]+o[1])/2}}),n},wd=e=>{const t=buildLayerMatrix(e),n=Object.assign(eu(e,t),tu(e,t)),r={};let o;["u","d"].forEach(a=>{o=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(s=>{s==="r"&&(o=o.map(l=>Object.values(l).reverse()));const u=(a==="u"?e.predecessors:e.successors).bind(e),c=dc(e,o,n,u),f=hc(e,o,c.root,c.align,s==="r");s==="r"&&Object.keys(f).forEach(l=>{f[l]=-f[l]}),r[a+s]=f})});const i=ru(e,r);return ou(r,i),vc(r,e.graph().align)},Bf=(e,t,n)=>(r,o,i)=>{const a=r.node(o),s=r.node(i);let u=0,c;if(u+=a.width/2,a.hasOwnProperty("labelpos"))switch((a.labelpos||"").toLowerCase()){case"l":c=-a.width/2;break;case"r":c=a.width/2;break}if(c&&(u+=n?c:-c),c=0,u+=(a.dummy?t:e)/2,u+=(s.dummy?t:e)/2,u+=s.width/2,s.labelpos)switch((s.labelpos||"").toLowerCase()){case"l":c=s.width/2;break;case"r":c=-s.width/2;break}return c&&(u+=n?c:-c),c=0,u},Uf=(e,t)=>e.node(t).width||0,pc=e=>{const t=fs(e),n=e.graph().ranksep;let r=0;t==null||t.forEach(o=>{const i=o.map(s=>e.node(s).height),a=Math.max(...i,0);o==null||o.forEach(s=>{e.node(s).y=r+a/2}),r+=a+n})},$f=e=>{const t=fs(e),n=Object.assign(eu(e,t),tu(e,t)),r={};let o=[];["u","d"].forEach(a=>{o=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(s=>{s==="r"&&(o=o.map(l=>Object.values(l).reverse()));const u=(a==="u"?e.predecessors:e.successors).bind(e),c=dc(e,o,n,u),f=hc(e,o,c.root,c.align,s==="r");s==="r"&&Object.keys(f).forEach(l=>f[l]=-f[l]),r[a+s]=f})});const i=ru(e,r);return i&&ou(r,i),vc(r,e.graph().align)};var mc=e=>{var t;const n=af(e);pc(n);const r=$f(n);(t=Object.keys(r))===null||t===void 0||t.forEach(o=>{n.node(o).x=r[o]})},Wf=(e,t)=>{const r=e.nodes().filter(a=>{var s;return!(!((s=e.children(a))===null||s===void 0)&&s.length)}).map(a=>e.node(a).rank),o=Math.max(...r),i=[];for(let a=0;a<o+1;a++)i[a]=[];t==null||t.forEach(a=>{const s=e.node(a);!s||s!=null&&s.dummy||isNaN(s.rank)||(s.fixorder=i[s.rank].length,i[s.rank].push(a))})};const gc=(e,t)=>{const n=t&&t.debugTiming?qu:Ju;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{Hf(e,t.prevGraph)});const r=n("  buildLayoutGraph",()=>Es(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{ca(r)});try{n("  runLayout",()=>{Xf(r,n,t)})}catch(o){if(o.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,o);return}throw o}n("  updateInputGraph",()=>{yc(e,r)})})},Xf=(e,t,n)=>{t("    removeSelfEdges",()=>{bc(e)}),t("    acyclic",()=>{cs.run(e)}),t("    nestingGraph.run",()=>{Nf.run(e)}),t("    rank",()=>{ed(af(e))}),t("    injectEdgeLabelProxies",()=>{bs(e)}),t("    removeEmptyRanks",()=>{Zo(e)}),t("    nestingGraph.cleanup",()=>{Nf.cleanup(e)}),t("    normalizeRanks",()=>{Zs(e)}),t("    assignRankMinMax",()=>{xs(e)}),t("    removeEdgeLabelProxies",()=>{fa(e)}),t("    normalize.run",()=>{no.run(e)}),t("    parentDummyChains",()=>{qs(e)}),t("    addBorderSegments",()=>{rd(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{Wf(e,n.nodeOrder)}),t("    order",()=>{cc(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{xc(e)}),t("    adjustCoordinateSystem",()=>{vs.adjust(e)}),t("    position",()=>{mc(e)}),t("    positionSelfEdges",()=>{ka(e)}),t("    removeBorderNodes",()=>{ws(e)}),t("    normalize.undo",()=>{no.undo(e)}),t("    fixupEdgeLabelCoords",()=>{au(e)}),t("    undoCoordinateSystem",()=>{vs.undo(e)}),t("    translateGraph",()=>{la(e)}),t("    assignNodeIntersects",()=>{da(e)}),t("    reversePoints",()=>{su(e)}),t("    acyclic.undo",()=>{cs.undo(e)})},Hf=(e,t)=>{e.nodes().forEach(n=>{const r=e.node(n),o=t.node(n);o!==void 0?(r.fixorder=o._order,delete o._order):delete r.fixorder})},yc=(e,t)=>{e.nodes().forEach(n=>{var r;const o=e.node(n);if(o){const i=t.node(n);o.x=i.x,o.y=i.y,o._order=i.order,o._rank=i.rank,!((r=t.children(n))===null||r===void 0)&&r.length&&(o.width=i.width,o.height=i.height)}}),e.edges().forEach(n=>{const r=e.edge(n),o=t.edge(n);r.points=o?o.points:[],o&&o.hasOwnProperty("x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},Zf=["nodesep","edgesep","ranksep","marginx","marginy"],jf={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},gs=["acyclicer","ranker","rankdir","align"],Ec=["width","height","layer","fixorder"],ys={width:0,height:0},Yf=["minlen","weight","width","height","labeloffset"],iu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ti=["labelpos"],Es=e=>{const t=new Ri({multigraph:!0,compound:!0}),n=wc(e.graph()),r={};return gs==null||gs.forEach(o=>{n[o]!==void 0&&(r[o]=n[o])}),t.setGraph(Object.assign({},jf,Ki(n,Zf),r)),e.nodes().forEach(o=>{const i=wc(e.node(o)),a=Object.assign(Object.assign({},ys),i),s=Ki(a,Ec);t.setNode(o,s),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{const i=wc(e.edge(o)),a={};ti==null||ti.forEach(s=>{i[s]!==void 0&&(a[s]=i[s])}),t.setEdgeObj(o,Object.assign({},iu,Ki(i,Yf),a))}),t},ca=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const r=e.node(n);isNaN(r.layer)||r.layer||(r.layer=0)}),e.edges().forEach(n=>{var r;const o=e.edge(n);o.minlen*=2,((r=o.labelpos)===null||r===void 0?void 0:r.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})},bs=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const r=e.node(t.v),o=e.node(t.w),i={e:t,rank:(o.rank-r.rank)/2+r.rank};Ra(e,"edge-proxy",i,"_ep")}})},xs=e=>{let t=0;e.nodes().forEach(n=>{var r,o;const i=e.node(n);i.borderTop&&(i.minRank=(r=e.node(i.borderTop))===null||r===void 0?void 0:r.rank,i.maxRank=(o=e.node(i.borderBottom))===null||o===void 0?void 0:o.rank,t=Math.max(t,i.maxRank||-1/0))}),e.graph().maxRank=t},fa=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},la=e=>{let t,n=0,r,o=0;const i=e.graph(),a=i.marginx||0,s=i.marginy||0,u=c=>{if(!c)return;const f=c.x,l=c.y,d=c.width,h=c.height;!isNaN(f)&&!isNaN(d)&&(t===void 0&&(t=f-d/2),t=Math.min(t,f-d/2),n=Math.max(n,f+d/2)),!isNaN(l)&&!isNaN(h)&&(r===void 0&&(r=l-h/2),r=Math.min(r,l-h/2),o=Math.max(o,l+h/2))};e.nodes().forEach(c=>{u(e.node(c))}),e.edges().forEach(c=>{const f=e.edge(c);f!=null&&f.hasOwnProperty("x")&&u(f)}),t-=a,r-=s,e.nodes().forEach(c=>{const f=e.node(c);f&&(f.x-=t,f.y-=r)}),e.edges().forEach(c=>{var f;const l=e.edge(c);(f=l.points)===null||f===void 0||f.forEach(d=>{d.x-=t,d.y-=r}),l.hasOwnProperty("x")&&(l.x-=t),l.hasOwnProperty("y")&&(l.y-=r)}),i.width=n-t+a,i.height=o-r+s},da=e=>{e.edges().forEach(t=>{const n=e.edge(t),r=e.node(t.v),o=e.node(t.w);let i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=o,a=r),n.points.unshift(Ca(r,i)),n.points.push(Ca(o,a))})},au=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},su=e=>{e.edges().forEach(t=>{var n;const r=e.edge(t);r.reversed&&((n=r.points)===null||n===void 0||n.reverse())})},ws=e=>{e.nodes().forEach(t=>{var n,r,o;if(!((n=e.children(t))===null||n===void 0)&&n.length){const i=e.node(t),a=e.node(i.borderTop),s=e.node(i.borderBottom),u=e.node(i.borderLeft[((r=i.borderLeft)===null||r===void 0?void 0:r.length)-1]),c=e.node(i.borderRight[((o=i.borderRight)===null||o===void 0?void 0:o.length)-1]);i.width=Math.abs((c==null?void 0:c.x)-(u==null?void 0:u.x))||10,i.height=Math.abs((s==null?void 0:s.y)-(a==null?void 0:a.y))||10,i.x=((u==null?void 0:u.x)||0)+i.width/2,i.y=((a==null?void 0:a.y)||0)+i.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},bc=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},xc=e=>{const t=fs(e);t==null||t.forEach(n=>{let r=0;n==null||n.forEach((o,i)=>{var a;const s=e.node(o);s.order=i+r,(a=s.selfEdges)===null||a===void 0||a.forEach(u=>{Ra(e,"selfedge",{width:u.label.width,height:u.label.height,rank:s.rank,order:i+ ++r,e:u.e,label:u.label},"_se")}),delete s.selfEdges})})},ka=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const r=e.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,s=r.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{y:i,x:o+a},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})},Ki=(e,t)=>{const n={};return t==null||t.forEach(r=>{e[r]!==void 0&&(n[r]=+e[r])}),n},wc=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t};var Sd=gc,Kf={layout:Sd,util:{time:qu,notime:Ju}};class uu extends ve{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const r=this,{nodes:o}=r,i=o.find(a=>a.id===n);return i?i.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,r,o;const i=this,{nodes:a,nodeSize:s,rankdir:u,combos:c,begin:f,radial:l,comboEdges:d=[],vedges:h=[]}=i;if(!a)return;const v=i.edges||[],m=new Ri({multigraph:!0,compound:!0});i.nodeMap={};const g={};a.forEach(k=>{i.nodeMap[k.id]=k,k.comboId&&(g[k.comboId]=g[k.comboId]||[],g[k.comboId].push(k.id))});let E=[];const y={};!((t=i.nodeOrder)===null||t===void 0)&&t.length?(i.nodeOrder.forEach(k=>{y[k]=!0,E.push(i.nodeMap[k])}),a.forEach(k=>{y[k.id]||E.push(k)})):E=a;let b;s?Tt(s)?b=()=>s:b=()=>[s,s]:b=k=>k.size?Tt(k.size)?k.size:xt(k.size)?[k.size.width||40,k.size.height||40]:[k.size,k.size]:[40,40];const w=ft(i.ranksep,50,i.ranksepFunc),I=ft(i.nodesep,50,i.nodesepFunc);let X=I,ge=w;(u==="LR"||u==="RL")&&(X=w,ge=I),m.setDefaultEdgeLabel(()=>({})),m.setGraph(i);const re={};this.sortByCombo&&c&&c.forEach(k=>{if(re[k.id]=k,k.collapsed){const xe=b(k),Ve=ge(k),qe=X(k),Ut=xe[0]+2*qe,ut=xe[1]+2*Ve;m.setNode(k.id,{width:Ut,height:ut})}k.parentId&&(re[k.parentId]||m.setNode(k.parentId,{}),m.setParent(k.id,k.parentId))}),E.filter(k=>k.layout!==!1).forEach(k=>{const xe=b(k),Ve=ge(k),qe=X(k),Ut=xe[0]+2*qe,ut=xe[1]+2*Ve,Xt=k.layer;ye(Xt)?m.setNode(k.id,{width:Ut,height:ut,layer:Xt}):m.setNode(k.id,{width:Ut,height:ut}),this.sortByCombo&&k.comboId&&(re[k.comboId]||(re[k.comboId]={id:k.comboId},m.setNode(k.comboId,{})),m.setParent(k.id,k.comboId))}),v.forEach(k=>{const xe=ot(k,"source"),Ve=ot(k,"target");this.layoutNode(xe)&&this.layoutNode(Ve)&&m.setEdge(xe,Ve,{weight:k.weight||1})}),(n=d==null?void 0:d.concat(h||[]))===null||n===void 0||n.forEach(k=>{var xe,Ve;const{source:qe,target:Ut}=k,ut=!((xe=re[qe])===null||xe===void 0)&&xe.collapsed?[qe]:g[qe]||[qe],Xt=!((Ve=re[Ut])===null||Ve===void 0)&&Ve.collapsed?[Ut]:g[Ut]||[Ut];ut.forEach(Ot=>{Xt.forEach(gn=>{m.setEdge(Ot,gn,{weight:k.weight||1})})})});let Q;!((r=i.preset)===null||r===void 0)&&r.nodes&&(Q=new Ri({multigraph:!0,compound:!0}),i.preset.nodes.forEach(k=>{Q==null||Q.setNode(k.id,k)})),Kf.layout(m,{prevGraph:Q,edgeLabelSpace:i.edgeLabelSpace,keepNodeOrder:!!i.nodeOrder,nodeOrder:i.nodeOrder});const ee=[0,0];if(f){let k=1/0,xe=1/0;m.nodes().forEach(Ve=>{const qe=m.node(Ve);k>qe.x&&(k=qe.x),xe>qe.y&&(xe=qe.y)}),m.edges().forEach(Ve=>{var qe;(qe=m.edge(Ve).points)===null||qe===void 0||qe.forEach(ut=>{k>ut.x&&(k=ut.x),xe>ut.y&&(xe=ut.y)})}),ee[0]=f[0]-k,ee[1]=f[1]-xe}const be=u==="LR"||u==="RL";if(l){const{focusNode:k,ranksep:xe,getRadialPos:Ve}=this,qe=an(k)?k:k==null?void 0:k.id,Ut=qe?(o=m.node(qe))===null||o===void 0?void 0:o._rank:0,ut=[],Xt=be?"y":"x",Ot=be?"height":"width";let gn=1/0,Vn=-1/0;m.nodes().forEach(Je=>{const Rt=m.node(Je);if(!i.nodeMap[Je])return;const fr=I(i.nodeMap[Je]);if(Ut===0)ut[Rt._rank]||(ut[Rt._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ut[Rt._rank].nodes.push(Je),ut[Rt._rank].totalWidth+=fr*2+Rt[Ot],ut[Rt._rank].maxSize<Math.max(Rt.width,Rt.height)&&(ut[Rt._rank].maxSize=Math.max(Rt.width,Rt.height));else{const Wn=Rt._rank-Ut;if(Wn===0)ut[Wn]||(ut[Wn]={nodes:[],totalWidth:0,maxSize:-1/0}),ut[Wn].nodes.push(Je),ut[Wn].totalWidth+=fr*2+Rt[Ot],ut[Wn].maxSize<Math.max(Rt.width,Rt.height)&&(ut[Wn].maxSize=Math.max(Rt.width,Rt.height));else{const lr=Math.abs(Wn);ut[lr]||(ut[lr]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ut[lr].totalWidth+=fr*2+Rt[Ot],ut[lr].maxSize<Math.max(Rt.width,Rt.height)&&(ut[lr].maxSize=Math.max(Rt.width,Rt.height)),Wn<0?ut[lr].left.push(Je):ut[lr].right.push(Je)}}const yn=Rt[Xt]-Rt[Ot]/2-fr,Sr=Rt[Xt]+Rt[Ot]/2+fr;yn<gn&&(gn=yn),Sr>Vn&&(Vn=Sr)});let Cr=xe||50;const Fr={},nt=(Vn-gn)/.9,zn=[(gn+Vn-nt)*.5,(gn+Vn+nt)*.5],Zr=(Je,Rt,fr=-1/0,yn=[0,1])=>{let Sr=fr;return Je.forEach(Wn=>{const lr=m.node(Wn);Fr[Wn]=Rt;const{x:vo,y:ao}=Ve(lr[Xt],zn,nt,Rt,yn);if(!i.nodeMap[Wn])return;i.nodeMap[Wn].x=vo+ee[0],i.nodeMap[Wn].y=ao+ee[1],i.nodeMap[Wn]._order=lr._order;const Io=w(i.nodeMap[Wn]);Sr<Io&&(Sr=Io)}),Sr};let Kn=!0;const yr=0;ut.forEach(Je=>{var Rt,fr,yn,Sr,Wn,lr,vo;if(!(!((Rt=Je==null?void 0:Je.nodes)===null||Rt===void 0)&&Rt.length)&&!(!((fr=Je==null?void 0:Je.left)===null||fr===void 0)&&fr.length)&&!(!((yn=Je==null?void 0:Je.right)===null||yn===void 0)&&yn.length))return;if(Kn&&Je.nodes.length===1){const Io=Je.nodes[0];if(!i.nodeMap[Io])return;i.nodeMap[Io].x=ee[0],i.nodeMap[Io].y=ee[1],Fr[Je.nodes[0]]=0,Cr=w(i.nodeMap[Io]),Kn=!1;return}Cr=Math.max(Cr,Je.totalWidth/(2*Math.PI));let ao=-1/0;if(Ut===0||!((Sr=Je.nodes)===null||Sr===void 0)&&Sr.length)ao=Zr(Je.nodes,Cr,ao,[0,1]);else{const Io=((Wn=Je.left)===null||Wn===void 0?void 0:Wn.length)/(((lr=Je.left)===null||lr===void 0?void 0:lr.length)+((vo=Je.right)===null||vo===void 0?void 0:vo.length));ao=Zr(Je.left,Cr,ao,[0,Io]),ao=Zr(Je.right,Cr,ao,[Io+.05,1])}Cr+=ao,Kn=!1,yr-Je.maxSize}),m.edges().forEach(Je=>{var Rt,fr,yn;const Sr=m.edge(Je),Wn=v.findIndex(lr=>{const vo=ot(lr,"source"),ao=ot(lr,"target");return vo===Je.v&&ao===Je.w});if(!(Wn<=-1)&&i.edgeLabelSpace&&i.controlPoints&&v[Wn].type!=="loop"){const lr=Xt==="x"?"y":"x",vo=(Rt=Sr==null?void 0:Sr.points)===null||Rt===void 0?void 0:Rt.slice(1,Sr.points.length-1),ao=[],Io=(fr=m.node(Je.v))===null||fr===void 0?void 0:fr[lr],Uc=Io-((yn=m.node(Je.w))===null||yn===void 0?void 0:yn[lr]),No=Fr[Je.v],Ls=No-Fr[Je.w];vo==null||vo.forEach(Ms=>{const Lu=(Ms[lr]-Io)/Uc*Ls+No,ja=Ve(Ms[Xt],zn,nt,Lu);ao.push({x:ja.x+ee[0],y:ja.y+ee[1]})}),v[Wn].controlPoints=ao}})}else{const k=new Set,Ve=u==="BT"||u==="RL"?(Xt,Ot)=>Ot-Xt:(Xt,Ot)=>Xt-Ot;m.nodes().forEach(Xt=>{const Ot=m.node(Xt);if(!Ot)return;let gn=this.nodeMap[Xt];gn||(gn=c==null?void 0:c.find(Vn=>Vn.id===Xt)),gn&&(gn.x=Ot.x+ee[0],gn.y=Ot.y+ee[1],gn._order=Ot._order,k.add(be?gn.x:gn.y))});const qe=Array.from(k).sort(Ve),Ut=be?(Xt,Ot)=>Xt.x!==Ot.x:(Xt,Ot)=>Xt.y!==Ot.y,ut=be?(Xt,Ot,gn)=>{const Vn=Math.max(Ot.y,gn.y),Cr=Math.min(Ot.y,gn.y);return Xt.filter(Fr=>Fr.y<=Vn&&Fr.y>=Cr)}:(Xt,Ot,gn)=>{const Vn=Math.max(Ot.x,gn.x),Cr=Math.min(Ot.x,gn.x);return Xt.filter(Fr=>Fr.x<=Vn&&Fr.x>=Cr)};m.edges().forEach(Xt=>{var Ot;const gn=m.edge(Xt),Vn=v.findIndex(Cr=>{const Fr=ot(Cr,"source"),nt=ot(Cr,"target");return Fr===Xt.v&&nt===Xt.w});if(!(Vn<=-1)&&i.edgeLabelSpace&&i.controlPoints&&v[Vn].type!=="loop"){(Ot=gn==null?void 0:gn.points)===null||Ot===void 0||Ot.forEach(nt=>{nt.x+=ee[0],nt.y+=ee[1]});const Cr=i.nodeMap[Xt.v],Fr=i.nodeMap[Xt.w];v[Vn].controlPoints=Qf(gn==null?void 0:gn.points,Cr,Fr,qe,be,Ut,ut)}})}return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:a,edges:v}}getRadialPos(t,n,r,o,i=[0,1]){let a=(t-n[0])/r;a=a*(i[1]-i[0])+i[0];const s=a*2*Math.PI;return{x:Math.cos(s)*o,y:Math.sin(s)*o}}getType(){return"dagre"}}const Qf=(e,t,n,r,o,i,a)=>{let s=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:u,y:c}=t,{x:f,y:l}=n;if(o&&(u=t.y,c=t.x,f=n.y,l=n.x),l!==c&&u!==f){const d=r.indexOf(c),h=r[d+1];if(h){const g=s[0],E=o?{x:(c+h)/2,y:(g==null?void 0:g.y)||f}:{x:(g==null?void 0:g.x)||f,y:(c+h)/2};(!g||i(g,E))&&s.unshift(E)}const v=r.indexOf(l),m=Math.abs(v-d);if(m===1)s=a(s,t,n),s.length||s.push(o?{x:(c+l)/2,y:u}:{x:u,y:(c+l)/2});else if(m>1){const g=r[v-1];if(g){const E=s[s.length-1],y=o?{x:(l+g)/2,y:(E==null?void 0:E.y)||f}:{x:(E==null?void 0:E.x)||u,y:(l+g)/2};(!E||i(E,y))&&s.push(y)}}}}return s},cu={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function Oi(e={},t=cu){var n,r,o,i;const a=JSON.parse(JSON.stringify(t)),s=((n=e==null?void 0:e.graph)===null||n===void 0?void 0:n.meta)||{},u=((r=e==null?void 0:e.subScene)===null||r===void 0?void 0:r.meta)||{},c=((o=e==null?void 0:e.nodeSize)===null||o===void 0?void 0:o.meta)||{},f=((i=e==null?void 0:e.nodeSize)===null||i===void 0?void 0:i.node)||{},l=a.nodeSize.bridge;return{graph:{meta:Object.assign(a.graph.meta,s)},subScene:{meta:Object.assign(a.subScene.meta,u)},nodeSize:{meta:Object.assign(a.nodeSize.meta,c),node:Object.assign(a.nodeSize.node,f),bridge:l}}}function qf(e){return`\u25EC${e}\u25EC`}const Ga=qf("ROOT"),Td=qf("BRIDGE_GRAPH");var yo,Pa,_s,fu;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(yo||(yo={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(Pa||(Pa={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(_s||(_s={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(fu||(fu={}));var lu=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof B.g!="undefined"?B.g:typeof self!="undefined"?self:{};function _c(e,t){return e(t={exports:{}},t.exports),t.exports}var Id=function(){this.__data__=[],this.size=0},Fa=function(e,t){return e===t||e!=e&&t!=t},du=function(e,t){for(var n=e.length;n--;)if(Fa(e[n][0],t))return n;return-1},Nd=Array.prototype.splice,Ad=function(e){var t=this.__data__,n=du(t,e);return!(n<0)&&(n==t.length-1?t.pop():Nd.call(t,n,1),--this.size,!0)},Sc=function(e){var t=this.__data__,n=du(t,e);return n<0?void 0:t[n][1]},hu=function(e){return du(this.__data__,e)>-1},vu=function(e,t){var n=this.__data__,r=du(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Li(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Li.prototype.clear=Id,Li.prototype.delete=Ad,Li.prototype.get=Sc,Li.prototype.has=hu,Li.prototype.set=vu;var za=Li,pu=function(){this.__data__=new za,this.size=0},mu=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},gu=function(e){return this.__data__.get(e)},Tc=function(e){return this.__data__.has(e)},Ss=typeof lu=="object"&&lu&&lu.Object===Object&&lu,yu=typeof self=="object"&&self&&self.Object===Object&&self,ko=Ss||yu||Function("return this")(),Eo=ko.Symbol,Ba=Object.prototype,Ts=Ba.hasOwnProperty,Is=Ba.toString,Mi=Eo?Eo.toStringTag:void 0,Jf=function(e){var t=Ts.call(e,Mi),n=e[Mi];try{e[Mi]=void 0;var r=!0}catch(i){}var o=Is.call(e);return r&&(t?e[Mi]=n:delete e[Mi]),o},Ns=Object.prototype.toString,ha=function(e){return Ns.call(e)},Ic=Eo?Eo.toStringTag:void 0,pi=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Ic&&Ic in Object(e)?Jf(e):ha(e)},Go=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},el,As=function(e){if(!Go(e))return!1;var t=pi(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},mi=ko["__core-js_shared__"],Nc=(el=/[^.]+$/.exec(mi&&mi.keys&&mi.keys.IE_PROTO||""))?"Symbol(src)_1."+el:"",tl=function(e){return!!Nc&&Nc in e},nl=Function.prototype.toString,va=function(e){if(e!=null){try{return nl.call(e)}catch(t){}try{return e+""}catch(t){}}return""},rl=/^\[object .+?Constructor\]$/,Rd=Function.prototype,gi=Object.prototype,ol=Rd.toString,Ua=gi.hasOwnProperty,Qi=RegExp("^"+ol.call(Ua).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),il=function(e){return!(!Go(e)||tl(e))&&(As(e)?Qi:rl).test(va(e))},Ac=function(e,t){return e==null?void 0:e[t]},yi=function(e,t){var n=Ac(e,t);return il(n)?n:void 0},$a=yi(ko,"Map"),ro=yi(Object,"create"),qi=function(){this.__data__=ro?ro(null):{},this.size=0},Mr=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Po=Object.prototype.hasOwnProperty,al=function(e){var t=this.__data__;if(ro){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Po.call(t,e)?t[e]:void 0},Cd=Object.prototype.hasOwnProperty,Dd=function(e){var t=this.__data__;return ro?t[e]!==void 0:Cd.call(t,e)},Od=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ro&&t===void 0?"__lodash_hash_undefined__":t,this};function Va(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Va.prototype.clear=qi,Va.prototype.delete=Mr,Va.prototype.get=al,Va.prototype.has=Dd,Va.prototype.set=Od;var Rc=Va,Ld=function(){this.size=0,this.__data__={hash:new Rc,map:new($a||za),string:new Rc}},Md=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},Eu=function(e,t){var n=e.__data__;return Md(t)?n[typeof t=="string"?"string":"hash"]:n.map},kd=function(e){var t=Eu(this,e).delete(e);return this.size-=t?1:0,t},Gd=function(e){return Eu(this,e).get(e)},sl=function(e){return Eu(this,e).has(e)},ul=function(e,t){var n=Eu(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function pa(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pa.prototype.clear=Ld,pa.prototype.delete=kd,pa.prototype.get=Gd,pa.prototype.has=sl,pa.prototype.set=ul;var bu=pa,Pd=function(e,t){var n=this.__data__;if(n instanceof za){var r=n.__data__;if(!$a||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new bu(r)}return n.set(e,t),this.size=n.size,this};function ma(e){var t=this.__data__=new za(e);this.size=t.size}ma.prototype.clear=pu,ma.prototype.delete=mu,ma.prototype.get=gu,ma.prototype.has=Tc,ma.prototype.set=Pd;var Wa=ma,p=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e},_=function(){try{var e=yi(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),O=function(e,t,n){t=="__proto__"&&_?_(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},J=Object.prototype.hasOwnProperty,ue=function(e,t,n){var r=e[t];J.call(e,t)&&Fa(r,n)&&(n!==void 0||t in e)||O(e,t,n)},K=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;u===void 0&&(u=e[s]),o?O(n,s,u):ue(n,s,u)}return n},te=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},he=function(e){return e!=null&&typeof e=="object"},we=function(e){return he(e)&&pi(e)=="[object Arguments]"},Re=Object.prototype,_e=Re.hasOwnProperty,Le=Re.propertyIsEnumerable,Pe=we(function(){return arguments}())?we:function(e){return he(e)&&_e.call(e,"callee")&&!Le.call(e,"callee")},fe=Array.isArray,ke=function(){return!1},V=_c(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?ko.Buffer:void 0,i=(o?o.isBuffer:void 0)||ke;e.exports=i}),ne=/^(?:0|[1-9]\d*)$/,Se=function(e,t){var n=typeof e;return!!(t=t==null?9007199254740991:t)&&(n=="number"||n!="symbol"&&ne.test(e))&&e>-1&&e%1==0&&e<t},$e=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},oe={};oe["[object Float32Array]"]=oe["[object Float64Array]"]=oe["[object Int8Array]"]=oe["[object Int16Array]"]=oe["[object Int32Array]"]=oe["[object Uint8Array]"]=oe["[object Uint8ClampedArray]"]=oe["[object Uint16Array]"]=oe["[object Uint32Array]"]=!0,oe["[object Arguments]"]=oe["[object Array]"]=oe["[object ArrayBuffer]"]=oe["[object Boolean]"]=oe["[object DataView]"]=oe["[object Date]"]=oe["[object Error]"]=oe["[object Function]"]=oe["[object Map]"]=oe["[object Number]"]=oe["[object Object]"]=oe["[object RegExp]"]=oe["[object Set]"]=oe["[object String]"]=oe["[object WeakMap]"]=!1;var je=function(e){return he(e)&&$e(e.length)&&!!oe[pi(e)]},pe=function(e){return function(t){return e(t)}},De=_c(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&Ss.process,i=function(){try{var a=r&&r.require&&r.require("util").types;return a||o&&o.binding&&o.binding("util")}catch(s){}}();e.exports=i}),me=De&&De.isTypedArray,Oe=me?pe(me):je,vt=Object.prototype.hasOwnProperty,Dt=function(e,t){var n=fe(e),r=!n&&Pe(e),o=!n&&!r&&V(e),i=!n&&!r&&!o&&Oe(e),a=n||r||o||i,s=a?te(e.length,String):[],u=s.length;for(var c in e)!t&&!vt.call(e,c)||a&&(c=="length"||o&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Se(c,u))||s.push(c);return s},ze=Object.prototype,Ne=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||ze)},de=function(e,t){return function(n){return e(t(n))}},Nt=de(Object.keys,Object),Zt=Object.prototype.hasOwnProperty,et=function(e){if(!Ne(e))return Nt(e);var t=[];for(var n in Object(e))Zt.call(e,n)&&n!="constructor"&&t.push(n);return t},kt=function(e){return e!=null&&$e(e.length)&&!As(e)},St=function(e){return kt(e)?Dt(e):et(e)},Qt=function(e,t){return e&&K(t,St(t),e)},Nn=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},kr=Object.prototype.hasOwnProperty,Kr=function(e){if(!Go(e))return Nn(e);var t=Ne(e),n=[];for(var r in e)(r!="constructor"||!t&&kr.call(e,r))&&n.push(r);return n},jt=function(e){return kt(e)?Dt(e,!0):Kr(e)},Hr=function(e,t){return e&&K(t,jt(t),e)},tr=_c(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?ko.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(a,s){if(s)return a.slice();var u=a.length,c=i?i(u):new a.constructor(u);return a.copy(c),c}}),Rr=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Gr=function(e,t){for(var n=-1,r=e==null?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i},Pr=function(){return[]},oo=Object.prototype.propertyIsEnumerable,io=Object.getOwnPropertySymbols,mr=io?function(e){return e==null?[]:(e=Object(e),Gr(io(e),function(t){return oo.call(e,t)}))}:Pr,Yt=function(e,t){return K(e,mr(e),t)},Qr=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},xn=de(Object.getPrototypeOf,Object),gt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Qr(t,mr(e)),e=xn(e);return t}:Pr,fn=function(e,t){return K(e,gt(e),t)},hn=function(e,t,n){var r=t(e);return fe(e)?r:Qr(r,n(e))},gr=function(e){return hn(e,St,mr)},Ei=function(e){return hn(e,jt,gt)},ki=yi(ko,"DataView"),D=yi(ko,"Promise"),q=yi(ko,"Set"),j=yi(ko,"WeakMap"),Qe=va(ki),on=va($a),R=va(D),x=va(q),M=va(j),U=pi;(ki&&U(new ki(new ArrayBuffer(1)))!="[object DataView]"||$a&&U(new $a)!="[object Map]"||D&&U(D.resolve())!="[object Promise]"||q&&U(new q)!="[object Set]"||j&&U(new j)!="[object WeakMap]")&&(U=function(e){var t=pi(e),n=t=="[object Object]"?e.constructor:void 0,r=n?va(n):"";if(r)switch(r){case Qe:return"[object DataView]";case on:return"[object Map]";case R:return"[object Promise]";case x:return"[object Set]";case M:return"[object WeakMap]"}return t});var W=U,F=Object.prototype.hasOwnProperty,G=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&F.call(e,"index")&&(n.index=e.index,n.input=e.input),n},z=ko.Uint8Array,A=function(e){var t=new e.constructor(e.byteLength);return new z(t).set(new z(e)),t},L=function(e,t){var n=t?A(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},N=/\w*$/,$=function(e){var t=new e.constructor(e.source,N.exec(e));return t.lastIndex=e.lastIndex,t},H=Eo?Eo.prototype:void 0,ae=H?H.valueOf:void 0,le=function(e){return ae?Object(ae.call(e)):{}},ie=function(e,t){var n=t?A(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Ae=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return A(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return L(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ie(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return $(e);case"[object Set]":return new r;case"[object Symbol]":return le(e)}},st=Object.create,Wt=function(){function e(){}return function(t){if(!Go(t))return{};if(st)return st(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),tt=function(e){return typeof e.constructor!="function"||Ne(e)?{}:Wt(xn(e))},bt=function(e){return he(e)&&W(e)=="[object Map]"},Gt=De&&De.isMap,An=Gt?pe(Gt):bt,_r=function(e){return he(e)&&W(e)=="[object Set]"},bo=De&&De.isSet,Cc=bo?pe(bo):_r,Ln={};Ln["[object Arguments]"]=Ln["[object Array]"]=Ln["[object ArrayBuffer]"]=Ln["[object DataView]"]=Ln["[object Boolean]"]=Ln["[object Date]"]=Ln["[object Float32Array]"]=Ln["[object Float64Array]"]=Ln["[object Int8Array]"]=Ln["[object Int16Array]"]=Ln["[object Int32Array]"]=Ln["[object Map]"]=Ln["[object Number]"]=Ln["[object Object]"]=Ln["[object RegExp]"]=Ln["[object Set]"]=Ln["[object String]"]=Ln["[object Symbol]"]=Ln["[object Uint8Array]"]=Ln["[object Uint8ClampedArray]"]=Ln["[object Uint16Array]"]=Ln["[object Uint32Array]"]=!0,Ln["[object Error]"]=Ln["[object Function]"]=Ln["[object WeakMap]"]=!1;var Dc=function e(t,n,r,o,i,a){var s,u=1&n,c=2&n,f=4&n;if(r&&(s=i?r(t,o,i,a):r(t)),s!==void 0)return s;if(!Go(t))return t;var l=fe(t);if(l){if(s=G(t),!u)return Rr(t,s)}else{var d=W(t),h=d=="[object Function]"||d=="[object GeneratorFunction]";if(V(t))return tr(t,u);if(d=="[object Object]"||d=="[object Arguments]"||h&&!i){if(s=c||h?{}:tt(t),!u)return c?fn(t,Hr(s,t)):Yt(t,Qt(s,t))}else{if(!Ln[d])return i?t:{};s=Ae(t,d,u)}}a||(a=new Wa);var v=a.get(t);if(v)return v;a.set(t,s),Cc(t)?t.forEach(function(g){s.add(e(g,n,r,g,t,a))}):An(t)&&t.forEach(function(g,E){s.set(E,e(g,n,r,E,t,a))});var m=l?void 0:(f?c?Ei:gr:c?jt:St)(t);return p(m||t,function(g,E){m&&(g=t[E=g]),ue(s,E,e(g,n,r,E,t,a))}),s},ni=function(e){return Dc(e,4)},xu=function(e){return function(){return e}},Fd=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(n(i[u],u,i)===!1)break}return t}}(),zd=function(e,t){return e&&Fd(e,t,St)},cl=function(e,t){return function(n,r){if(n==null)return n;if(!kt(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}(zd),Rs=function(e){return e},Dh=function(e){return typeof e=="function"?e:Rs},Oh=function(e,t){return(fe(e)?p:cl)(e,Dh(t))},Lh=Oh,Zp=function(e,t){var n=[];return cl(e,function(r,o,i){t(r,o,i)&&n.push(r)}),n},jp=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Yp=function(e){return this.__data__.has(e)};function fl(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new bu;++t<n;)this.add(e[t])}fl.prototype.add=fl.prototype.push=jp,fl.prototype.has=Yp;var Mh=fl,Kp=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},kh=function(e,t){return e.has(t)},Gh=function(e,t,n,r,o,i){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(e),f=i.get(t);if(c&&f)return c==t&&f==e;var l=-1,d=!0,h=2&n?new Mh:void 0;for(i.set(e,t),i.set(t,e);++l<s;){var v=e[l],m=t[l];if(r)var g=a?r(m,v,l,t,e,i):r(v,m,l,e,t,i);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!Kp(t,function(E,y){if(!kh(h,y)&&(v===E||o(v,E,n,r,i)))return h.push(y)})){d=!1;break}}else if(v!==m&&!o(v,m,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d},Qp=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n},Bd=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n},Ph=Eo?Eo.prototype:void 0,Ud=Ph?Ph.valueOf:void 0,qp=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new z(e),new z(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Fa(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Qp;case"[object Set]":var u=1&r;if(s||(s=Bd),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var f=Gh(s(e),s(t),r,o,i,a);return a.delete(e),f;case"[object Symbol]":if(Ud)return Ud.call(e)==Ud.call(t)}return!1},Jp=Object.prototype.hasOwnProperty,e0=function(e,t,n,r,o,i){var a=1&n,s=gr(e),u=s.length;if(u!=gr(t).length&&!a)return!1;for(var c=u;c--;){var f=s[c];if(!(a?f in t:Jp.call(t,f)))return!1}var l=i.get(e),d=i.get(t);if(l&&d)return l==t&&d==e;var h=!0;i.set(e,t),i.set(t,e);for(var v=a;++c<u;){var m=e[f=s[c]],g=t[f];if(r)var E=a?r(g,m,f,t,e,i):r(m,g,f,e,t,i);if(!(E===void 0?m===g||o(m,g,n,r,i):E)){h=!1;break}v||(v=f=="constructor")}if(h&&!v){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||typeof y=="function"&&y instanceof y&&typeof b=="function"&&b instanceof b||(h=!1)}return i.delete(e),i.delete(t),h},Fh=Object.prototype.hasOwnProperty,t0=function(e,t,n,r,o,i){var a=fe(e),s=fe(t),u=a?"[object Array]":W(e),c=s?"[object Array]":W(t),f=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",l=(c=c=="[object Arguments]"?"[object Object]":c)=="[object Object]",d=u==c;if(d&&V(e)){if(!V(t))return!1;a=!0,f=!1}if(d&&!f)return i||(i=new Wa),a||Oe(e)?Gh(e,t,n,r,o,i):qp(e,t,u,n,r,o,i);if(!(1&n)){var h=f&&Fh.call(e,"__wrapped__"),v=l&&Fh.call(t,"__wrapped__");if(h||v){var m=h?e.value():e,g=v?t.value():t;return i||(i=new Wa),o(m,g,n,r,i)}}return!!d&&(i||(i=new Wa),e0(e,t,n,r,o,i))},zh=function e(t,n,r,o,i){return t===n||(t==null||n==null||!he(t)&&!he(n)?t!=t&&n!=n:t0(t,n,r,o,e,i))},n0=function(e,t,n,r){var o=n.length,i=o,a=!r;if(e==null)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var u=(s=n[o])[0],c=e[u],f=s[1];if(a&&s[2]){if(c===void 0&&!(u in e))return!1}else{var l=new Wa;if(r)var d=r(c,f,u,e,t,l);if(!(d===void 0?zh(f,c,3,r,l):d))return!1}}return!0},Bh=function(e){return e==e&&!Go(e)},r0=function(e){for(var t=St(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Bh(o)]}return t},Uh=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},o0=function(e){var t=r0(e);return t.length==1&&t[0][2]?Uh(t[0][0],t[0][1]):function(n){return n===e||n0(n,e,t)}},Cs=function(e){return typeof e=="symbol"||he(e)&&pi(e)=="[object Symbol]"},i0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a0=/^\w*$/,$d=function(e,t){if(fe(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Cs(e))||a0.test(e)||!i0.test(e)||t!=null&&e in Object(t)};function Vd(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Vd.Cache||bu),n}Vd.Cache=bu;var s0=Vd,u0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c0=/\\(\\)?/g,f0=function(e){var t=s0(e,function(r){return n.size===500&&n.clear(),r}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(u0,function(n,r,o,i){t.push(o?i.replace(c0,"$1"):r||n)}),t}),wu=function(e,t){for(var n=-1,r=e==null?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},$h=Eo?Eo.prototype:void 0,Vh=$h?$h.toString:void 0,l0=function e(t){if(typeof t=="string")return t;if(fe(t))return wu(t,e)+"";if(Cs(t))return Vh?Vh.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},Wh=function(e){return e==null?"":l0(e)},ll=function(e,t){return fe(e)?e:$d(e,t)?[e]:f0(Wh(e))},Oc=function(e){if(typeof e=="string"||Cs(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},dl=function(e,t){for(var n=0,r=(t=ll(t,e)).length;e!=null&&n<r;)e=e[Oc(t[n++])];return n&&n==r?e:void 0},d0=function(e,t,n){var r=e==null?void 0:dl(e,t);return r===void 0?n:r},h0=function(e,t){return e!=null&&t in Object(e)},Xh=function(e,t,n){for(var r=-1,o=(t=ll(t,e)).length,i=!1;++r<o;){var a=Oc(t[r]);if(!(i=e!=null&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=e==null?0:e.length)&&$e(o)&&Se(a,o)&&(fe(e)||Pe(e))},Hh=function(e,t){return e!=null&&Xh(e,t,h0)},v0=function(e,t){return $d(e)&&Bh(t)?Uh(Oc(e),t):function(n){var r=d0(n,e);return r===void 0&&r===t?Hh(n,e):zh(t,r,3)}},Zh=function(e){return function(t){return t==null?void 0:t[e]}},p0=function(e){return function(t){return dl(t,e)}},m0=function(e){return $d(e)?Zh(Oc(e)):p0(e)},ga=function(e){return typeof e=="function"?e:e==null?Rs:typeof e=="object"?fe(e)?v0(e[0],e[1]):o0(e):m0(e)},jh=function(e,t){return(fe(e)?Gr:Zp)(e,ga(t))},g0=Object.prototype.hasOwnProperty,y0=function(e,t){return e!=null&&g0.call(e,t)},Yh=function(e,t){return e!=null&&Xh(e,t,y0)},E0=Object.prototype.hasOwnProperty,b0=function(e){if(e==null)return!0;if(kt(e)&&(fe(e)||typeof e=="string"||typeof e.splice=="function"||V(e)||Oe(e)||Pe(e)))return!e.length;var t=W(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(Ne(e))return!et(e).length;for(var n in e)if(E0.call(e,n))return!1;return!0},Kh=function(e){return e===void 0},Qh=function(e,t){var n=-1,r=kt(e)?Array(e.length):[];return cl(e,function(o,i,a){r[++n]=t(o,i,a)}),r},qh=function(e,t){return(fe(e)?wu:Qh)(e,ga(t))},x0=function(e,t,n,r){var o=-1,i=e==null?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n},w0=function(e,t,n,r,o){return o(e,function(i,a,s){n=r?(r=!1,i):t(n,i,a,s)}),n},Jh=function(e,t,n){var r=fe(e)?x0:w0,o=arguments.length<3;return r(e,ga(t),n,o,cl)},_0=function(e){return typeof e=="string"||!fe(e)&&he(e)&&pi(e)=="[object String]"},S0=Zh("length"),T0=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),I0=function(e){return T0.test(e)},N0="[\\ud800-\\udfff]",Wd="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Xd="\\ud83c[\\udffb-\\udfff]",ev="[^\\ud800-\\udfff]",tv="(?:\\ud83c[\\udde6-\\uddff]){2}",nv="[\\ud800-\\udbff][\\udc00-\\udfff]",rv="(?:"+Wd+"|"+Xd+")?",A0="[\\ufe0e\\ufe0f]?"+rv+("(?:\\u200d(?:"+[ev,tv,nv].join("|")+")[\\ufe0e\\ufe0f]?"+rv+")*"),R0="(?:"+[ev+Wd+"?",Wd,tv,nv,N0].join("|")+")",ov=RegExp(Xd+"(?="+Xd+")|"+R0+A0,"g"),C0=function(e){for(var t=ov.lastIndex=0;ov.test(e);)++t;return t},D0=function(e){return I0(e)?C0(e):S0(e)},O0=function(e){if(e==null)return 0;if(kt(e))return _0(e)?D0(e):e.length;var t=W(e);return t=="[object Map]"||t=="[object Set]"?e.size:et(e).length},L0=function(e,t,n){var r=fe(e),o=r||V(e)||Oe(e);if(t=ga(t),n==null){var i=e&&e.constructor;n=o?r?new i:[]:Go(e)&&As(i)?Wt(xn(e)):{}}return(o?p:zd)(e,function(a,s,u){return t(n,a,s,u)}),n},iv=Eo?Eo.isConcatSpreadable:void 0,M0=function(e){return fe(e)||Pe(e)||!!(iv&&e&&e[iv])},Hd=function e(t,n,r,o,i){var a=-1,s=t.length;for(r||(r=M0),i||(i=[]);++a<s;){var u=t[a];n>0&&r(u)?n>1?e(u,n-1,r,o,i):Qr(i,u):o||(i[i.length]=u)}return i},k0=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},av=Math.max,sv=function(e,t,n){return t=av(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=av(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),k0(e,this,s)}},G0=_?function(e,t){return _(e,"toString",{configurable:!0,enumerable:!1,value:xu(t),writable:!0})}:Rs,P0=Date.now,uv=function(e){var t=0,n=0;return function(){var r=P0(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(G0),hl=function(e,t){return uv(sv(e,t,Rs),e+"")},cv=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1},F0=function(e){return e!=e},z0=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1},B0=function(e,t,n){return t==t?z0(e,t,n):cv(e,F0,n)},U0=function(e,t){return!!(e!=null&&e.length)&&B0(e,t,0)>-1},$0=function(e,t,n){for(var r=-1,o=e==null?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1},V0=function(){},W0=q&&1/Bd(new q([,-0]))[1]==1/0?function(e){return new q(e)}:V0,X0=function(e,t,n){var r=-1,o=U0,i=e.length,a=!0,s=[],u=s;if(n)a=!1,o=$0;else if(i>=200){var c=t?null:W0(e);if(c)return Bd(c);a=!1,o=kh,u=new Mh}else u=t?[]:s;e:for(;++r<i;){var f=e[r],l=t?t(f):f;if(f=n||f!==0?f:0,a&&l==l){for(var d=u.length;d--;)if(u[d]===l)continue e;t&&u.push(l),s.push(f)}else o(u,l,n)||(u!==s&&u.push(l),s.push(f))}return s},fv=function(e){return he(e)&&kt(e)},H0=hl(function(e){return X0(Hd(e,1,fv,!0))}),Z0=function(e,t){return wu(t,function(n){return e[n]})},vl,lv=function(e){return e==null?[]:Z0(e,St(e))};try{vl={clone:ni,constant:xu,each:Lh,filter:jh,has:Yh,isArray:fe,isEmpty:b0,isFunction:As,isUndefined:Kh,keys:St,map:qh,reduce:Jh,size:O0,transform:L0,union:H0,values:lv}}catch(e){}vl||(vl=window._);var it=vl,Zd=Gn;function Gn(e){this._isDirected=!it.has(e,"directed")||e.directed,this._isMultigraph=!!it.has(e,"multigraph")&&e.multigraph,this._isCompound=!!it.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=it.constant(void 0),this._defaultEdgeLabelFn=it.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function dv(e,t){e[t]?e[t]++:e[t]=1}function hv(e,t){--e[t]||delete e[t]}function Lc(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}return o+""+i+""+(it.isUndefined(r)?"\0":r)}function j0(e,t,n,r){var o=""+t,i=""+n;if(!e&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};return r&&(s.name=r),s}function jd(e,t){return Lc(e,t.v,t.w,t.name)}Gn.prototype._nodeCount=0,Gn.prototype._edgeCount=0,Gn.prototype.isDirected=function(){return this._isDirected},Gn.prototype.isMultigraph=function(){return this._isMultigraph},Gn.prototype.isCompound=function(){return this._isCompound},Gn.prototype.setGraph=function(e){return this._label=e,this},Gn.prototype.graph=function(){return this._label},Gn.prototype.setDefaultNodeLabel=function(e){return it.isFunction(e)||(e=it.constant(e)),this._defaultNodeLabelFn=e,this},Gn.prototype.nodeCount=function(){return this._nodeCount},Gn.prototype.nodes=function(){return it.keys(this._nodes)},Gn.prototype.sources=function(){var e=this;return it.filter(this.nodes(),function(t){return it.isEmpty(e._in[t])})},Gn.prototype.sinks=function(){var e=this;return it.filter(this.nodes(),function(t){return it.isEmpty(e._out[t])})},Gn.prototype.setNodes=function(e,t){var n=arguments,r=this;return it.each(e,function(o){n.length>1?r.setNode(o,t):r.setNode(o)}),this},Gn.prototype.setNode=function(e,t){return it.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Gn.prototype.node=function(e){return this._nodes[e]},Gn.prototype.hasNode=function(e){return it.has(this._nodes,e)},Gn.prototype.removeNode=function(e){var t=this;if(it.has(this._nodes,e)){var n=function(r){t.removeEdge(t._edgeObjs[r])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],it.each(this.children(e),function(r){t.setParent(r)}),delete this._children[e]),it.each(it.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],it.each(it.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Gn.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(it.isUndefined(t))t="\0";else{for(var n=t+="";!it.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Gn.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Gn.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Gn.prototype.children=function(e){if(it.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return it.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Gn.prototype.predecessors=function(e){var t=this._preds[e];if(t)return it.keys(t)},Gn.prototype.successors=function(e){var t=this._sucs[e];if(t)return it.keys(t)},Gn.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return it.union(t,this.successors(e))},Gn.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Gn.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;it.each(this._nodes,function(i,a){e(a)&&t.setNode(a,i)}),it.each(this._edgeObjs,function(i){t.hasNode(i.v)&&t.hasNode(i.w)&&t.setEdge(i,n.edge(i))});var r={};function o(i){var a=n.parent(i);return a===void 0||t.hasNode(a)?(r[i]=a,a):a in r?r[a]:o(a)}return this._isCompound&&it.each(t.nodes(),function(i){t.setParent(i,o(i))}),t},Gn.prototype.setDefaultEdgeLabel=function(e){return it.isFunction(e)||(e=it.constant(e)),this._defaultEdgeLabelFn=e,this},Gn.prototype.edgeCount=function(){return this._edgeCount},Gn.prototype.edges=function(){return it.values(this._edgeObjs)},Gn.prototype.setPath=function(e,t){var n=this,r=arguments;return it.reduce(e,function(o,i){return r.length>1?n.setEdge(o,i,t):n.setEdge(o,i),i}),this},Gn.prototype.setEdge=function(){var e,t,n,r,o=!1,i=arguments[0];typeof i=="object"&&i!==null&&"v"in i?(e=i.v,t=i.w,n=i.name,arguments.length===2&&(r=arguments[1],o=!0)):(e=i,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),e=""+e,t=""+t,it.isUndefined(n)||(n=""+n);var a=Lc(this._isDirected,e,t,n);if(it.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=r),this;if(!it.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=o?r:this._defaultEdgeLabelFn(e,t,n);var s=j0(this._isDirected,e,t,n);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,dv(this._preds[t],e),dv(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this},Gn.prototype.edge=function(e,t,n){var r=arguments.length===1?jd(this._isDirected,arguments[0]):Lc(this._isDirected,e,t,n);return this._edgeLabels[r]},Gn.prototype.hasEdge=function(e,t,n){var r=arguments.length===1?jd(this._isDirected,arguments[0]):Lc(this._isDirected,e,t,n);return it.has(this._edgeLabels,r)},Gn.prototype.removeEdge=function(e,t,n){var r=arguments.length===1?jd(this._isDirected,arguments[0]):Lc(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],hv(this._preds[t],e),hv(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},Gn.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var r=it.values(n);return t?it.filter(r,function(o){return o.v===t}):r}},Gn.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var r=it.values(n);return t?it.filter(r,function(o){return o.w===t}):r}},Gn.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var vv={Graph:Zd,version:"2.1.8"},Y0={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:K0(e),edges:Q0(e)};return it.isUndefined(e.graph())||(t.value=it.clone(e.graph())),t},read:function(e){var t=new Zd(e.options).setGraph(e.value);return it.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),it.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function K0(e){return it.map(e.nodes(),function(t){var n=e.node(t),r=e.parent(t),o={v:t};return it.isUndefined(n)||(o.value=n),it.isUndefined(r)||(o.parent=r),o})}function Q0(e){return it.map(e.edges(),function(t){var n=e.edge(t),r={v:t.v,w:t.w};return it.isUndefined(t.name)||(r.name=t.name),it.isUndefined(n)||(r.value=n),r})}var q0=function(e){var t,n={},r=[];function o(i){it.has(n,i)||(n[i]=!0,t.push(i),it.each(e.successors(i),o),it.each(e.predecessors(i),o))}return it.each(e.nodes(),function(i){t=[],o(i),t.length&&r.push(t)}),r},pv=bi;function bi(){this._arr=[],this._keyIndices={}}bi.prototype.size=function(){return this._arr.length},bi.prototype.keys=function(){return this._arr.map(function(e){return e.key})},bi.prototype.has=function(e){return it.has(this._keyIndices,e)},bi.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},bi.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},bi.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!it.has(n,e)){var r=this._arr,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this._decrease(o),!0}return!1},bi.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},bi.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},bi.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},bi.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;e!==0&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},bi.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],i=n[t];n[e]=i,n[t]=o,r[i.key]=e,r[o.key]=t};var mv=function(e,t,n,r){return function(o,i,a,s){var u,c,f={},l=new pv,d=function(h){var v=h.v!==u?h.v:h.w,m=f[v],g=a(h),E=c.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+g);E<m.distance&&(m.distance=E,m.predecessor=u,l.decrease(v,E))};for(o.nodes().forEach(function(h){var v=h===i?0:Number.POSITIVE_INFINITY;f[h]={distance:v},l.add(h,v)});l.size()>0&&(u=l.removeMin(),(c=f[u]).distance!==Number.POSITIVE_INFINITY);)s(u).forEach(d);return f}(e,String(t),n||J0,r||function(o){return e.outEdges(o)})},J0=it.constant(1),em=function(e,t,n){return it.transform(e.nodes(),function(r,o){r[o]=mv(e,o,t,n)},{})},gv=function(e){var t=0,n=[],r={},o=[];function i(a){var s=r[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(f){it.has(r,f)?r[f].onStack&&(s.lowlink=Math.min(s.lowlink,r[f].index)):(i(f),s.lowlink=Math.min(s.lowlink,r[f].lowlink))}),s.lowlink===s.index){var u,c=[];do u=n.pop(),r[u].onStack=!1,c.push(u);while(a!==u);o.push(c)}}return e.nodes().forEach(function(a){it.has(r,a)||i(a)}),o},tm=function(e){return it.filter(gv(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},nm=function(e,t,n){return function(r,o,i){var a={},s=r.nodes();return s.forEach(function(u){a[u]={},a[u][u]={distance:0},s.forEach(function(c){u!==c&&(a[u][c]={distance:Number.POSITIVE_INFINITY})}),i(u).forEach(function(c){var f=c.v===u?c.w:c.v,l=o(c);a[u][f]={distance:l,predecessor:u}})}),s.forEach(function(u){var c=a[u];s.forEach(function(f){var l=a[f];s.forEach(function(d){var h=l[u],v=c[d],m=l[d],g=h.distance+v.distance;g<m.distance&&(m.distance=g,m.predecessor=v.predecessor)})})}),a}(e,t||rm,n||function(r){return e.outEdges(r)})},rm=it.constant(1),Yd=yv;function yv(e){var t={},n={},r=[];if(it.each(e.sinks(),function o(i){if(it.has(n,i))throw new pl;it.has(t,i)||(n[i]=!0,t[i]=!0,it.each(e.predecessors(i),o),delete n[i],r.push(i))}),it.size(t)!==e.nodeCount())throw new pl;return r}function pl(){}yv.CycleException=pl,pl.prototype=new Error;var Ev=function(e,t,n){it.isArray(t)||(t=[t]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return it.each(t,function(a){if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);bv(e,a,n==="post",i,r,o)}),o};function bv(e,t,n,r,o,i){it.has(r,t)||(r[t]=!0,n||i.push(t),it.each(o(t),function(a){bv(e,a,n,r,o,i)}),n&&i.push(t))}var ml,om={Graph:vv.Graph,json:Y0,alg:{components:q0,dijkstra:mv,dijkstraAll:em,findCycles:tm,floydWarshall:nm,isAcyclic:function(e){try{Yd(e)}catch(t){if(t instanceof Yd.CycleException)return!1;throw t}return!0},postorder:function(e,t){return Ev(e,t,"post")},preorder:function(e,t){return Ev(e,t,"pre")},prim:function(e,t){var n,r=new Zd,o={},i=new pv;function a(u){var c=u.v===n?u.w:u.v,f=i.priority(c);if(f!==void 0){var l=t(u);l<f&&(o[c]=n,i.decrease(c,l))}}if(e.nodeCount()===0)return r;it.each(e.nodes(),function(u){i.add(u,Number.POSITIVE_INFINITY),r.setNode(u)}),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){if(n=i.removeMin(),it.has(o,n))r.setEdge(n,o[n]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(n).forEach(a)}return r},tarjan:gv,topsort:Yd},version:vv.version};try{ml=om}catch(e){}ml||(ml=window.graphlib);var Gi=ml,im=function(e){return Dc(e,5)},Mc=function(e,t,n){if(!Go(n))return!1;var r=typeof t;return!!(r=="number"?kt(n)&&Se(t,n.length):r=="string"&&t in n)&&Fa(n[t],e)},xv=Object.prototype,am=xv.hasOwnProperty,sm=hl(function(e,t){e=Object(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&Mc(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=jt(i),s=-1,u=a.length;++s<u;){var c=a[s],f=e[c];(f===void 0||Fa(f,xv[c])&&!am.call(e,c))&&(e[c]=i[c])}return e}),um=function(e){return function(t,n,r){var o=Object(t);if(!kt(t)){var i=ga(n);t=St(t),n=function(s){return i(o[s],s,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}},cm=/^\s+|\s+$/g,fm=/^[-+]0x[0-9a-f]+$/i,lm=/^0b[01]+$/i,dm=/^0o[0-7]+$/i,hm=parseInt,vm=function(e){if(typeof e=="number")return e;if(Cs(e))return NaN;if(Go(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Go(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(cm,"");var n=lm.test(e);return n||dm.test(e)?hm(e.slice(2),n?2:8):fm.test(e)?NaN:+e},gl=function(e){return e?(e=vm(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},pm=function(e){var t=gl(e),n=t%1;return t==t?n?t-n:t:0},mm=Math.max,gm=um(function(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:pm(n);return o<0&&(o=mm(r+o,0)),cv(e,ga(t),o)}),wv=function(e){return e!=null&&e.length?Hd(e,1):[]},ym=function(e,t){return e==null?e:Fd(e,Dh(t),jt)},Em=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},bm=function(e,t){var n={};return t=ga(t),zd(e,function(r,o,i){O(n,o,t(r,o,i))}),n},Kd=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(a!=null&&(s===void 0?a==a&&!Cs(a):n(a,s)))var s=a,u=i}return u},xm=function(e,t){return e>t},wm=function(e){return e&&e.length?Kd(e,Rs,xm):void 0},Qd=function(e,t,n){(n!==void 0&&!Fa(e[t],n)||n===void 0&&!(t in e))&&O(e,t,n)},_m=Function.prototype,Sm=Object.prototype,_v=_m.toString,Tm=Sm.hasOwnProperty,Im=_v.call(Object),Nm=function(e){if(!he(e)||pi(e)!="[object Object]")return!1;var t=xn(e);if(t===null)return!0;var n=Tm.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&_v.call(n)==Im},qd=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},Am=function(e){return K(e,jt(e))},Rm=function(e,t,n,r,o,i,a){var s=qd(e,n),u=qd(t,n),c=a.get(u);if(c)Qd(e,n,c);else{var f=i?i(s,u,n+"",e,t,a):void 0,l=f===void 0;if(l){var d=fe(u),h=!d&&V(u),v=!d&&!h&&Oe(u);f=u,d||h||v?fe(s)?f=s:fv(s)?f=Rr(s):h?(l=!1,f=tr(u,!0)):v?(l=!1,f=ie(u,!0)):f=[]:Nm(u)||Pe(u)?(f=s,Pe(s)?f=Am(s):Go(s)&&!As(s)||(f=tt(u))):l=!1}l&&(a.set(u,f),o(f,u,r,i,a),a.delete(u)),Qd(e,n,f)}},Cm=function e(t,n,r,o,i){t!==n&&Fd(n,function(a,s){if(i||(i=new Wa),Go(a))Rm(t,n,s,r,e,o,i);else{var u=o?o(qd(t,s),a,s+"",t,n,i):void 0;u===void 0&&(u=a),Qd(t,s,u)}},jt)},Dm=function(e){return hl(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,a&&Mc(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}(function(e,t,n){Cm(e,t,n)}),Sv=function(e,t){return e<t},Om=function(e){return e&&e.length?Kd(e,Rs,Sv):void 0},Lm=function(e,t){return e&&e.length?Kd(e,ga(t),Sv):void 0},Mm=function(){return ko.Date.now()},km=function(e,t,n,r){if(!Go(e))return e;for(var o=-1,i=(t=ll(t,e)).length,a=i-1,s=e;s!=null&&++o<i;){var u=Oc(t[o]),c=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(o!=a){var f=s[u];(c=r?r(f,u,s):void 0)===void 0&&(c=Go(f)?f:Se(t[o+1])?[]:{})}ue(s,u,c),s=s[u]}return e},Gm=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=dl(e,a);n(s,a)&&km(i,ll(a,e),s)}return i},Pm=function(e,t){return Gm(e,t,function(n,r){return Hh(e,r)})},Fm=function(e){return uv(sv(e,void 0,wv),e+"")}(function(e,t){return e==null?{}:Pm(e,t)}),zm=Math.ceil,Bm=Math.max,Um=function(e,t,n,r){for(var o=-1,i=Bm(zm((t-e)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=e,e+=n;return a},$m=function(e){return function(t,n,r){return r&&typeof r!="number"&&Mc(t,n,r)&&(n=r=void 0),t=gl(t),n===void 0?(n=t,t=0):n=gl(n),r=r===void 0?t<n?1:-1:gl(r),Um(t,n,r,e)}}(),Vm=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Wm=function(e,t){if(e!==t){var n=e!==void 0,r=e===null,o=e==e,i=Cs(e),a=t!==void 0,s=t===null,u=t==t,c=Cs(t);if(!s&&!c&&!i&&e>t||i&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!o)return 1;if(!r&&!i&&!c&&e<t||c&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!u)return-1}return 0},Xm=function(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var u=Wm(o[r],i[r]);if(u)return r>=s?u:u*(n[r]=="desc"?-1:1)}return e.index-t.index},Hm=function(e,t,n){t=t.length?wu(t,function(i){return fe(i)?function(a){return dl(a,i.length===1?i[0]:i)}:i}):[Rs];var r=-1;t=wu(t,pe(ga));var o=Qh(e,function(i,a,s){return{criteria:wu(t,function(u){return u(i)}),index:++r,value:i}});return Vm(o,function(i,a){return Xm(i,a,n)})},Zm=hl(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Mc(e,t[0],t[1])?t=[]:n>2&&Mc(t[0],t[1],t[2])&&(t=[t[0]]),Hm(e,Hd(t,1),[])}),jm=0,Ym=function(e){var t=++jm;return Wh(e)+t},Km=function(e,t,n){for(var r=-1,o=e.length,i=t.length,a={};++r<o;){var s=r<i?t[r]:void 0;n(a,e[r],s)}return a},yl,Qm=function(e,t){return Km(e||[],t||[],ue)};try{yl={cloneDeep:im,constant:xu,defaults:sm,each:Lh,filter:jh,find:gm,flatten:wv,forEach:Oh,forIn:ym,has:Yh,isUndefined:Kh,last:Em,map:qh,mapValues:bm,max:wm,merge:Dm,min:Om,minBy:Lm,now:Mm,pick:Fm,range:$m,reduce:Jh,sortBy:Zm,uniqueId:Ym,values:lv,zipObject:Qm}}catch(e){}yl||(yl=window._);var P=yl,qm=El;function El(){var e={};e._next=e._prev=e,this._sentinel=e}function Tv(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Jm(e,t){if(e!=="_next"&&e!=="_prev")return t}El.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Tv(t),t},El.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Tv(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},El.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,Jm)),n=n._prev;return"["+e.join(", ")+"]"};var eg=Gi.Graph,tg=function(e,t){if(e.nodeCount()<=1)return[];var n=function(o,i){var a=new eg,s=0,u=0;P.forEach(o.nodes(),function(l){a.setNode(l,{v:l,in:0,out:0})}),P.forEach(o.edges(),function(l){var d=a.edge(l.v,l.w)||0,h=i(l),v=d+h;a.setEdge(l.v,l.w,v),u=Math.max(u,a.node(l.v).out+=h),s=Math.max(s,a.node(l.w).in+=h)});var c=P.range(u+s+3).map(function(){return new qm}),f=s+1;return P.forEach(a.nodes(),function(l){eh(c,f,a.node(l))}),{graph:a,buckets:c,zeroIdx:f}}(e,t||ng),r=function(o,i,a){for(var s,u=[],c=i[i.length-1],f=i[0];o.nodeCount();){for(;s=f.dequeue();)Jd(o,i,a,s);for(;s=c.dequeue();)Jd(o,i,a,s);if(o.nodeCount()){for(var l=i.length-2;l>0;--l)if(s=i[l].dequeue()){u=u.concat(Jd(o,i,a,s,!0));break}}}return u}(n.graph,n.buckets,n.zeroIdx);return P.flatten(P.map(r,function(o){return e.outEdges(o.v,o.w)}),!0)},ng=P.constant(1);function Jd(e,t,n,r,o){var i=o?[]:void 0;return P.forEach(e.inEdges(r.v),function(a){var s=e.edge(a),u=e.node(a.v);o&&i.push({v:a.v,w:a.w}),u.out-=s,eh(t,n,u)}),P.forEach(e.outEdges(r.v),function(a){var s=e.edge(a),u=a.w,c=e.node(u);c.in-=s,eh(t,n,c)}),e.removeNode(r.v),i}function eh(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Iv={run:function(e){var t=e.graph().acyclicer==="greedy"?tg(e,function(n){return function(r){return n.edge(r).weight}}(e)):function(n){var r=[],o={},i={};function a(s){P.has(i,s)||(i[s]=!0,o[s]=!0,P.forEach(n.outEdges(s),function(u){P.has(o,u.w)?r.push(u):a(u.w)}),delete o[s])}return P.forEach(n.nodes(),a),r}(e);P.forEach(t,function(n){var r=e.edge(n);e.removeEdge(n),r.forwardName=n.name,r.reversed=!0,e.setEdge(n.w,n.v,r,P.uniqueId("rev"))})},undo:function(e){P.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}},Nv=Gi.Graph,xo={addDummyNode:Av,simplify:function(e){var t=new Nv().setGraph(e.graph());return P.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),P.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},asNonCompoundGraph:function(e){var t=new Nv({multigraph:e.isMultigraph()}).setGraph(e.graph());return P.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),P.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t},successorWeights:function(e){var t=P.map(e.nodes(),function(n){var r={};return P.forEach(e.outEdges(n),function(o){r[o.w]=(r[o.w]||0)+e.edge(o).weight}),r});return P.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=P.map(e.nodes(),function(n){var r={};return P.forEach(e.inEdges(n),function(o){r[o.v]=(r[o.v]||0)+e.edge(o).weight}),r});return P.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,i=e.y,a=t.x-o,s=t.y-i,u=e.width/2,c=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a),{x:o+n,y:i+r}},buildLayerMatrix:function(e){var t=P.map(P.range(Rv(e)+1),function(){return[]});return P.forEach(e.nodes(),function(n){var r=e.node(n),o=r.rank;P.isUndefined(o)||(t[o][r.order]=n)}),t},normalizeRanks:function(e){var t=P.min(P.map(e.nodes(),function(n){return e.node(n).rank}));P.forEach(e.nodes(),function(n){var r=e.node(n);P.has(r,"rank")&&(r.rank-=t)})},removeEmptyRanks:function(e){var t=P.min(P.map(e.nodes(),function(i){return e.node(i).rank})),n=[];P.forEach(e.nodes(),function(i){var a=e.node(i).rank-t;n[a]||(n[a]=[]),n[a].push(i)});var r=0,o=e.graph().nodeRankFactor;P.forEach(n,function(i,a){P.isUndefined(i)&&a%o!=0?--r:r&&P.forEach(i,function(s){e.node(s).rank+=r})})},addBorderNode:function(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),Av(e,"border",o,t)},maxRank:Rv,partition:function(e,t){var n={lhs:[],rhs:[]};return P.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n},time:function(e,t){var n=P.now();try{return t()}finally{console.log(e+" time: "+(P.now()-n)+"ms")}},notime:function(e,t){return t()}};function Av(e,t,n,r){var o;do o=P.uniqueId(r);while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function Rv(e){return P.max(P.map(e.nodes(),function(t){var n=e.node(t).rank;if(!P.isUndefined(n))return n}))}var Cv={run:function(e){e.graph().dummyChains=[],P.forEach(e.edges(),function(t){(function(n,r){var o,i,a,s=r.v,u=n.node(s).rank,c=r.w,f=n.node(c).rank,l=r.name,d=n.edge(r),h=d.labelRank;if(f!==u+1){for(n.removeEdge(r),a=0,++u;u<f;++a,++u)d.points=[],i={width:0,height:0,edgeLabel:d,edgeObj:r,rank:u},o=xo.addDummyNode(n,"edge",i,"_d"),u===h&&(i.width=d.width,i.height=d.height,i.dummy="edge-label",i.labelpos=d.labelpos),n.setEdge(s,o,{weight:d.weight},l),a===0&&n.graph().dummyChains.push(o),s=o;n.setEdge(s,c,{weight:d.weight},l)}})(e,t)})},undo:function(e){P.forEach(e.graph().dummyChains,function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)})}},Dv=function(e){var t={};P.forEach(e.sources(),function n(r){var o=e.node(r);if(P.has(t,r))return o.rank;t[r]=!0;var i=P.min(P.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return i!==Number.POSITIVE_INFINITY&&i!=null||(i=0),o.rank=i})},Ov=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen},rg=Gi.Graph,bl=Ov,Lv=function(e){var t,n,r=new rg({directed:!1}),o=e.nodes()[0],i=e.nodeCount();for(r.setNode(o,{});og(r,e)<i;)t=ig(r,e),n=r.hasNode(t.v)?bl(e,t):-bl(e,t),ag(r,e,n);return r};function og(e,t){return P.forEach(e.nodes(),function n(r){P.forEach(t.nodeEdges(r),function(o){var i=o.v,a=r===i?o.w:i;e.hasNode(a)||bl(t,o)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}),e.nodeCount()}function ig(e,t){return P.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return bl(t,n)})}function ag(e,t,n){P.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var sg=Ov,ug=Dv,cg=Gi.alg.preorder,fg=Gi.alg.postorder,lg=xo.simplify,dg=Ds;function Ds(e){e=lg(e),ug(e);var t,n=Lv(e);for(nh(n),th(n,e);t=Gv(n);)Fv(n,e,t,Pv(n,e,t))}function th(e,t){var n=fg(e,e.nodes());n=n.slice(0,n.length-1),P.forEach(n,function(r){(function(o,i,a){var s=o.node(a).parent;o.edge(a,s).cutvalue=Mv(o,i,a)})(e,t,r)})}function Mv(e,t,n){var r=e.node(n).parent,o=!0,i=t.edge(n,r),a=0;return i||(o=!1,i=t.edge(r,n)),a=i.weight,P.forEach(t.nodeEdges(n),function(s){var u,c,f=s.v===n,l=f?s.w:s.v;if(l!==r){var d=f===o,h=t.edge(s).weight;if(a+=d?h:-h,u=n,c=l,e.hasEdge(u,c)){var v=e.edge(n,l).cutvalue;a+=d?-v:v}}}),a}function nh(e,t){arguments.length<2&&(t=e.nodes()[0]),kv(e,{},1,t)}function kv(e,t,n,r,o){var i=n,a=e.node(r);return t[r]=!0,P.forEach(e.neighbors(r),function(s){P.has(t,s)||(n=kv(e,t,n,s,r))}),a.low=i,a.lim=n++,o?a.parent=o:delete a.parent,n}function Gv(e){return P.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Pv(e,t,n){var r=n.v,o=n.w;t.hasEdge(r,o)||(r=n.w,o=n.v);var i=e.node(r),a=e.node(o),s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);var c=P.filter(t.edges(),function(f){return u===zv(e,e.node(f.v),s)&&u!==zv(e,e.node(f.w),s)});return P.minBy(c,function(f){return sg(t,f)})}function Fv(e,t,n,r){var o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),nh(e),th(e,t),function(a,s){var u=P.find(a.nodes(),function(f){return!s.node(f).parent}),c=cg(a,u);c=c.slice(1),P.forEach(c,function(f){var l=a.node(f).parent,d=s.edge(f,l),h=!1;d||(d=s.edge(l,f),h=!0),s.node(f).rank=s.node(l).rank+(h?d.minlen:-d.minlen)})}(e,t)}function zv(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}Ds.initLowLimValues=nh,Ds.initCutValues=th,Ds.calcCutValue=Mv,Ds.leaveEdge=Gv,Ds.enterEdge=Pv,Ds.exchangeEdges=Fv;var Bv=Dv,hg=function(e){switch(e.graph().ranker){case"network-simplex":Uv(e);break;case"tight-tree":(function(t){Bv(t),Lv(t)})(e);break;case"longest-path":vg(e);break;default:Uv(e)}},vg=Bv;function Uv(e){dg(e)}var pg=function(e){var t=function(n){var r={},o=0;function i(a){var s=o;P.forEach(n.children(a),i),r[a]={low:s,lim:o++}}return P.forEach(n.children(),i),r}(e);P.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,i=function(l,d,h,v){var m,g,E=[],y=[],b=Math.min(d[h].low,d[v].low),w=Math.max(d[h].lim,d[v].lim);m=h;do m=l.parent(m),E.push(m);while(m&&(d[m].low>b||w>d[m].lim));for(g=m,m=v;(m=l.parent(m))!==g;)y.push(m);return{path:E.concat(y.reverse()),lca:g}}(e,t,o.v,o.w),a=i.path,s=i.lca,u=0,c=a[u],f=!0;n!==o.w;){if(r=e.node(n),f){for(;(c=a[u])!==s&&e.node(c).maxRank<r.rank;)u++;c===s&&(f=!1)}if(!f){for(;u<a.length-1&&e.node(c=a[u+1]).minRank<=r.rank;)u++;c=a[u]}e.setParent(n,c),n=e.successors(n)[0]}})},$v={run:function(e){var t=xo.addDummyNode(e,"root",{},"_root"),n=function(a){var s={};function u(c,f){var l=a.children(c);l&&l.length&&P.forEach(l,function(d){u(d,f+1)}),s[c]=f}return P.forEach(a.children(),function(c){u(c,1)}),s}(e),r=P.max(P.values(n))-1,o=2*r+1;e.graph().nestingRoot=t,P.forEach(e.edges(),function(a){e.edge(a).minlen*=o});var i=function(a){return P.reduce(a.edges(),function(s,u){return s+a.edge(u).weight},0)}(e)+1;P.forEach(e.children(),function(a){Vv(e,t,o,i,r,n,a)}),e.graph().nodeRankFactor=o},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,P.forEach(e.edges(),function(n){e.edge(n).nestingEdge&&e.removeEdge(n)})}};function Vv(e,t,n,r,o,i,a){var s=e.children(a);if(s.length){var u=xo.addBorderNode(e,"_bt"),c=xo.addBorderNode(e,"_bb"),f=e.node(a);e.setParent(u,a),f.borderTop=u,e.setParent(c,a),f.borderBottom=c,P.forEach(s,function(l){Vv(e,t,n,r,o,i,l);var d=e.node(l),h=d.borderTop?d.borderTop:l,v=d.borderBottom?d.borderBottom:l,m=d.borderTop?r:2*r,g=h!==v?1:o-i[a]+1;e.setEdge(u,h,{weight:m,minlen:g,nestingEdge:!0}),e.setEdge(v,c,{weight:m,minlen:g,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:o+i[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:n})}var mg=function(e){P.forEach(e.children(),function t(n){var r=e.children(n),o=e.node(n);if(r.length&&P.forEach(r,t),P.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,a=o.maxRank+1;i<a;++i)Wv(e,"borderLeft","_bl",n,o,i),Wv(e,"borderRight","_br",n,o,i)}})};function Wv(e,t,n,r,o,i){var a={width:0,height:0,rank:i,borderType:t},s=o[t][i-1],u=xo.addDummyNode(e,"border",a,n);o[t][i]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})}var Xv={adjust:function(e){var t=e.graph().rankdir.toLowerCase();t!=="lr"&&t!=="rl"||Hv(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();t!=="bt"&&t!=="rl"||function(n){P.forEach(n.nodes(),function(r){rh(n.node(r))}),P.forEach(n.edges(),function(r){var o=n.edge(r);P.forEach(o.points,rh),P.has(o,"y")&&rh(o)})}(e),t!=="lr"&&t!=="rl"||(function(n){P.forEach(n.nodes(),function(r){oh(n.node(r))}),P.forEach(n.edges(),function(r){var o=n.edge(r);P.forEach(o.points,oh),P.has(o,"x")&&oh(o)})}(e),Hv(e))}};function Hv(e){P.forEach(e.nodes(),function(t){Zv(e.node(t))}),P.forEach(e.edges(),function(t){Zv(e.edge(t))})}function Zv(e){var t=e.width;e.width=e.height,e.height=t}function rh(e){e.y=-e.y}function oh(e){var t=e.x;e.x=e.y,e.y=t}var gg=function(e){var t={},n=P.filter(e.nodes(),function(s){return!e.children(s).length}),r=P.max(P.map(n,function(s){return e.node(s).rank})),o=P.map(P.range(r+1),function(){return[]});function i(s){if(!P.has(t,s)){t[s]=!0;var u=e.node(s);o[u.rank].push(s),P.forEach(e.successors(s),i)}}var a=P.sortBy(n,function(s){return e.node(s).rank});return P.forEach(a,i),o},yg=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=Eg(e,t[r-1],t[r]);return n};function Eg(e,t,n){for(var r=P.zipObject(n,P.map(n,function(c,f){return f})),o=P.flatten(P.map(t,function(c){return P.sortBy(P.map(e.outEdges(c),function(f){return{pos:r[f.w],weight:e.edge(f).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var a=2*i-1;i-=1;var s=P.map(new Array(a),function(){return 0}),u=0;return P.forEach(o.forEach(function(c){var f=c.pos+i;s[f]+=c.weight;for(var l=0;f>0;)f%2&&(l+=s[f+1]),s[f=f-1>>1]+=c.weight;u+=c.weight*l})),u}var bg=function(e,t){return P.map(t,function(n){var r=e.inEdges(n);if(r.length){var o=P.reduce(r,function(i,a){var s=e.edge(a),u=e.node(a.v);return{sum:i.sum+s.weight*u.order,weight:i.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}return{v:n}})},xg=function(e,t){var n={};return P.forEach(e,function(r,o){var i=n[r.v]={indegree:0,in:[],out:[],vs:[r.v],i:o};P.isUndefined(r.barycenter)||(i.barycenter=r.barycenter,i.weight=r.weight)}),P.forEach(t.edges(),function(r){var o=n[r.v],i=n[r.w];P.isUndefined(o)||P.isUndefined(i)||(i.indegree++,o.out.push(n[r.w]))}),function(r){var o=[];function i(u){return function(c){c.merged||(P.isUndefined(c.barycenter)||P.isUndefined(u.barycenter)||c.barycenter>=u.barycenter)&&function(f,l){var d=0,h=0;f.weight&&(d+=f.barycenter*f.weight,h+=f.weight),l.weight&&(d+=l.barycenter*l.weight,h+=l.weight),f.vs=l.vs.concat(f.vs),f.barycenter=d/h,f.weight=h,f.i=Math.min(l.i,f.i),l.merged=!0}(u,c)}}function a(u){return function(c){c.in.push(u),--c.indegree==0&&r.push(c)}}for(;r.length;){var s=r.pop();o.push(s),P.forEach(s.in.reverse(),i(s)),P.forEach(s.out,a(s))}return P.map(P.filter(o,function(u){return!u.merged}),function(u){return P.pick(u,["vs","i","barycenter","weight"])})}(P.filter(n,function(r){return!r.indegree}))},wg=function(e,t){var n=xo.partition(e,function(l){return P.has(l,"barycenter")}),r=n.lhs,o=P.sortBy(n.rhs,function(l){return-l.i}),i=[],a=0,s=0,u=0;r.sort((c=!!t,function(l,d){return l.barycenter<d.barycenter?-1:l.barycenter>d.barycenter?1:c?d.i-l.i:l.i-d.i})),u=jv(i,o,u),P.forEach(r,function(l){u+=l.vs.length,i.push(l.vs),a+=l.barycenter*l.weight,s+=l.weight,u=jv(i,o,u)});var c,f={vs:P.flatten(i,!0)};return s&&(f.barycenter=a/s,f.weight=s),f};function jv(e,t,n){for(var r;t.length&&(r=P.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}var _g=function e(t,n,r,o){var i=t.children(n),a=t.node(n),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,c={};s&&(i=P.filter(i,function(m){return m!==s&&m!==u}));var f=bg(t,i);P.forEach(f,function(m){if(t.children(m.v).length){var g=e(t,m.v,r,o);c[m.v]=g,P.has(g,"barycenter")&&(E=m,y=g,P.isUndefined(E.barycenter)?(E.barycenter=y.barycenter,E.weight=y.weight):(E.barycenter=(E.barycenter*E.weight+y.barycenter*y.weight)/(E.weight+y.weight),E.weight+=y.weight))}var E,y});var l=xg(f,r);(function(m,g){P.forEach(m,function(E){E.vs=P.flatten(E.vs.map(function(y){return g[y]?g[y].vs:y}),!0)})})(l,c);var d=wg(l,o);if(s&&(d.vs=P.flatten([s,d.vs,u],!0),t.predecessors(s).length)){var h=t.node(t.predecessors(s)[0]),v=t.node(t.predecessors(u)[0]);P.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+v.order)/(d.weight+2),d.weight+=2}return d},Sg=Gi.Graph,Tg=function(e,t,n){var r=function(i){for(var a;i.hasNode(a=P.uniqueId("_root")););return a}(e),o=new Sg({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(i){return e.node(i)});return P.forEach(e.nodes(),function(i){var a=e.node(i),s=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(o.setNode(i),o.setParent(i,s||r),P.forEach(e[n](i),function(u){var c=u.v===i?u.w:u.v,f=o.edge(c,i),l=P.isUndefined(f)?0:f.weight;o.setEdge(c,i,{weight:e.edge(u).weight+l})}),P.has(a,"minRank")&&o.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),o},Ig=function(e,t,n){var r,o={};P.forEach(n,function(i){for(var a,s,u=e.parent(i);u;){if((a=e.parent(u))?(s=o[a],o[a]=u):(s=r,r=u),s&&s!==u)return void t.setEdge(s,u);u=a}})},Ng=Gi.Graph,Ag=function(e){var t=xo.maxRank(e),n=Yv(e,P.range(1,t+1),"inEdges"),r=Yv(e,P.range(t-1,-1,-1),"outEdges"),o=gg(e);Kv(e,o);for(var i,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){Rg(s%2?n:r,s%4>=2),o=xo.buildLayerMatrix(e);var c=yg(e,o);c<a&&(u=0,i=P.cloneDeep(o),a=c)}Kv(e,i)};function Yv(e,t,n){return P.map(t,function(r){return Tg(e,r,n)})}function Rg(e,t){var n=new Ng;P.forEach(e,function(r){var o=r.graph().root,i=_g(r,o,n,t);P.forEach(i.vs,function(a,s){r.node(a).order=s}),Ig(r,n,i.vs)})}function Kv(e,t){P.forEach(t,function(n){P.forEach(n,function(r,o){e.node(r).order=o})})}var Cg=Gi.Graph,Dg=function(e){var t,n=xo.buildLayerMatrix(e),r=P.merge(Og(e,n),Lg(e,n)),o={};P.forEach(["u","d"],function(a){t=a==="u"?n:P.values(n).reverse(),P.forEach(["l","r"],function(s){s==="r"&&(t=P.map(t,function(l){return P.values(l).reverse()}));var u=(a==="u"?e.predecessors:e.successors).bind(e),c=kg(e,t,r,u),f=Gg(e,t,c.root,c.align,s==="r");s==="r"&&(f=P.mapValues(f,function(l){return-l})),o[a+s]=f})});var i=Pg(e,o);return Fg(o,i),zg(o,e.graph().align)};function Og(e,t){var n={};return P.reduce(t,function(r,o){var i=0,a=0,s=r.length,u=P.last(o);return P.forEach(o,function(c,f){var l=function(h,v){if(h.node(v).dummy)return P.find(h.predecessors(v),function(m){return h.node(m).dummy})}(e,c),d=l?e.node(l).order:s;(l||c===u)&&(P.forEach(o.slice(a,f+1),function(h){P.forEach(e.predecessors(h),function(v){var m=e.node(v),g=m.order;!(g<i||d<g)||m.dummy&&e.node(h).dummy||Qv(n,v,h)})}),a=f+1,i=d)}),o}),n}function Lg(e,t){var n={};function r(o,i,a,s,u){var c;P.forEach(P.range(i,a),function(f){c=o[f],e.node(c).dummy&&P.forEach(e.predecessors(c),function(l){var d=e.node(l);d.dummy&&(d.order<s||d.order>u)&&Qv(n,l,c)})})}return P.reduce(t,function(o,i){var a,s=-1,u=0;return P.forEach(i,function(c,f){if(e.node(c).dummy==="border"){var l=e.predecessors(c);l.length&&(a=e.node(l[0]).order,r(i,u,f,s,a),u=f,s=a)}r(i,u,i.length,a,o.length)}),i}),n}function Qv(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function Mg(e,t,n){if(t>n){var r=t;t=n,n=r}return P.has(e[t],n)}function kg(e,t,n,r){var o={},i={},a={};return P.forEach(t,function(s){P.forEach(s,function(u,c){o[u]=u,i[u]=u,a[u]=c})}),P.forEach(t,function(s){var u=-1;P.forEach(s,function(c){var f=r(c);if(f.length)for(var l=((f=P.sortBy(f,function(m){return a[m]})).length-1)/2,d=Math.floor(l),h=Math.ceil(l);d<=h;++d){var v=f[d];i[c]===c&&u<a[v]&&!Mg(n,c,v)&&(i[v]=c,i[c]=o[c]=o[v],u=a[v])}})}),{root:o,align:i}}function Gg(e,t,n,r,o){var i={},a=function(c,f,l,d){var h=new Cg,v=c.graph(),m=function(g,E,y){return function(b,w,I){var X,ge=b.node(w),re=b.node(I),Q=0;if(Q+=ge.width/2,P.has(ge,"labelpos"))switch(ge.labelpos.toLowerCase()){case"l":X=-ge.width/2;break;case"r":X=ge.width/2}if(X&&(Q+=y?X:-X),X=0,Q+=(ge.dummy?E:g)/2,Q+=(re.dummy?E:g)/2,Q+=re.width/2,P.has(re,"labelpos"))switch(re.labelpos.toLowerCase()){case"l":X=re.width/2;break;case"r":X=-re.width/2}return X&&(Q+=y?X:-X),X=0,Q}}(v.nodesep,v.edgesep,d);return P.forEach(f,function(g){var E;P.forEach(g,function(y){var b=l[y];if(h.setNode(b),E){var w=l[E],I=h.edge(w,b);h.setEdge(w,b,Math.max(m(c,y,E),I||0))}E=y})}),h}(e,t,n,o),s=o?"borderLeft":"borderRight";function u(c,f){for(var l=a.nodes(),d=l.pop(),h={};d;)h[d]?c(d):(h[d]=!0,l.push(d),l=l.concat(f(d))),d=l.pop()}return u(function(c){i[c]=a.inEdges(c).reduce(function(f,l){return Math.max(f,i[l.v]+a.edge(l))},0)},a.predecessors.bind(a)),u(function(c){var f=a.outEdges(c).reduce(function(d,h){return Math.min(d,i[h.w]-a.edge(h))},Number.POSITIVE_INFINITY),l=e.node(c);f!==Number.POSITIVE_INFINITY&&l.borderType!==s&&(i[c]=Math.max(i[c],f))},a.successors.bind(a)),P.forEach(r,function(c){i[c]=i[n[c]]}),i}function Pg(e,t){return P.minBy(P.values(t),function(n){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return P.forIn(n,function(i,a){var s=function(u,c){return u.node(c).width}(e,a)/2;r=Math.max(i+s,r),o=Math.min(i-s,o)}),r-o})}function Fg(e,t){var n=P.values(t),r=P.min(n),o=P.max(n);P.forEach(["u","d"],function(i){P.forEach(["l","r"],function(a){var s,u=i+a,c=e[u];if(c!==t){var f=P.values(c);(s=a==="l"?r-P.min(f):o-P.max(f))&&(e[u]=P.mapValues(c,function(l){return l+s}))}})})}function zg(e,t){return P.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var o=P.sortBy(P.map(e,r));return(o[1]+o[2])/2})}var Bg=Dg,Ug=function(e){(function(t){var n=xo.buildLayerMatrix(t),r=t.graph().ranksep,o=0;P.forEach(n,function(i){var a=P.max(P.map(i,function(s){return t.node(s).height}));P.forEach(i,function(s){t.node(s).y=o+a/2}),o+=a+r})})(e=xo.asNonCompoundGraph(e)),P.forEach(Bg(e),function(t,n){e.node(n).x=t})},$g=xo.normalizeRanks,Vg=xo.removeEmptyRanks,Xa=xo,Wg=Gi.Graph,Xg=function(e,t){var n=t&&t.debugTiming?Xa.time:Xa.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return function(o){var i=new Wg({multigraph:!0,compound:!0}),a=ah(o.graph());return i.setGraph(P.merge({},Zg,ih(a,Hg),P.pick(a,jg))),P.forEach(o.nodes(),function(s){var u=ah(o.node(s));i.setNode(s,P.defaults(ih(u,Yg),Kg)),i.setParent(s,o.parent(s))}),P.forEach(o.edges(),function(s){var u=ah(o.edge(s));i.setEdge(s,P.merge({},qg,ih(u,Qg),P.pick(u,Jg)))}),i}(e)});n("  runLayout",function(){(function(o,i){i("    makeSpaceForEdgeLabels",function(){(function(a){var s=a.graph();s.ranksep/=2,P.forEach(a.edges(),function(u){var c=a.edge(u);c.minlen*=2,c.labelpos.toLowerCase()!=="c"&&(s.rankdir==="TB"||s.rankdir==="BT"?c.width+=c.labeloffset:c.height+=c.labeloffset)})})(o)}),i("    removeSelfEdges",function(){(function(a){P.forEach(a.edges(),function(s){if(s.v===s.w){var u=a.node(s.v);u.selfEdges||(u.selfEdges=[]),u.selfEdges.push({e:s,label:a.edge(s)}),a.removeEdge(s)}})})(o)}),i("    acyclic",function(){Iv.run(o)}),i("    nestingGraph.run",function(){$v.run(o)}),i("    rank",function(){hg(Xa.asNonCompoundGraph(o))}),i("    injectEdgeLabelProxies",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);if(u.width&&u.height){var c=a.node(s.v),f={rank:(a.node(s.w).rank-c.rank)/2+c.rank,e:s};Xa.addDummyNode(a,"edge-proxy",f,"_ep")}})})(o)}),i("    removeEmptyRanks",function(){Vg(o)}),i("    nestingGraph.cleanup",function(){$v.cleanup(o)}),i("    normalizeRanks",function(){$g(o)}),i("    assignRankMinMax",function(){(function(a){var s=0;P.forEach(a.nodes(),function(u){var c=a.node(u);c.borderTop&&(c.minRank=a.node(c.borderTop).rank,c.maxRank=a.node(c.borderBottom).rank,s=P.max(s,c.maxRank))}),a.graph().maxRank=s})(o)}),i("    removeEdgeLabelProxies",function(){(function(a){P.forEach(a.nodes(),function(s){var u=a.node(s);u.dummy==="edge-proxy"&&(a.edge(u.e).labelRank=u.rank,a.removeNode(s))})})(o)}),i("    normalize.run",function(){Cv.run(o)}),i("    parentDummyChains",function(){pg(o)}),i("    addBorderSegments",function(){mg(o)}),i("    order",function(){Ag(o)}),i("    insertSelfEdges",function(){(function(a){var s=Xa.buildLayerMatrix(a);P.forEach(s,function(u){var c=0;P.forEach(u,function(f,l){var d=a.node(f);d.order=l+c,P.forEach(d.selfEdges,function(h){Xa.addDummyNode(a,"selfedge",{width:h.label.width,height:h.label.height,rank:d.rank,order:l+ ++c,e:h.e,label:h.label},"_se")}),delete d.selfEdges})})})(o)}),i("    adjustCoordinateSystem",function(){Xv.adjust(o)}),i("    position",function(){Ug(o)}),i("    positionSelfEdges",function(){(function(a){P.forEach(a.nodes(),function(s){var u=a.node(s);if(u.dummy==="selfedge"){var c=a.node(u.e.v),f=c.x+c.width/2,l=c.y,d=u.x-f,h=c.height/2;a.setEdge(u.e,u.label),a.removeNode(s),u.label.points=[{x:f+2*d/3,y:l-h},{x:f+5*d/6,y:l-h},{x:f+d,y:l},{x:f+5*d/6,y:l+h},{x:f+2*d/3,y:l+h}],u.label.x=u.x,u.label.y=u.y}})})(o)}),i("    removeBorderNodes",function(){(function(a){P.forEach(a.nodes(),function(s){if(a.children(s).length){var u=a.node(s),c=a.node(u.borderTop),f=a.node(u.borderBottom),l=a.node(P.last(u.borderLeft)),d=a.node(P.last(u.borderRight));u.width=Math.abs(d.x-l.x),u.height=Math.abs(f.y-c.y),u.x=l.x+u.width/2,u.y=c.y+u.height/2}}),P.forEach(a.nodes(),function(s){a.node(s).dummy==="border"&&a.removeNode(s)})})(o)}),i("    normalize.undo",function(){Cv.undo(o)}),i("    fixupEdgeLabelCoords",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);if(P.has(u,"x"))switch(u.labelpos!=="l"&&u.labelpos!=="r"||(u.width-=u.labeloffset),u.labelpos){case"l":u.x-=u.width/2+u.labeloffset;break;case"r":u.x+=u.width/2+u.labeloffset}})})(o)}),i("    undoCoordinateSystem",function(){Xv.undo(o)}),i("    translateGraph",function(){(function(a){var s=Number.POSITIVE_INFINITY,u=0,c=Number.POSITIVE_INFINITY,f=0,l=a.graph(),d=l.marginx||0,h=l.marginy||0;function v(m){var g=m.x,E=m.y,y=m.width,b=m.height;s=Math.min(s,g-y/2),u=Math.max(u,g+y/2),c=Math.min(c,E-b/2),f=Math.max(f,E+b/2)}P.forEach(a.nodes(),function(m){v(a.node(m))}),P.forEach(a.edges(),function(m){var g=a.edge(m);P.has(g,"x")&&v(g)}),s-=d,c-=h,P.forEach(a.nodes(),function(m){var g=a.node(m);g.x-=s,g.y-=c}),P.forEach(a.edges(),function(m){var g=a.edge(m);P.forEach(g.points,function(E){E.x-=s,E.y-=c}),P.has(g,"x")&&(g.x-=s),P.has(g,"y")&&(g.y-=c)}),l.width=u-s+d,l.height=f-c+h})(o)}),i("    assignNodeIntersects",function(){(function(a){P.forEach(a.edges(),function(s){var u,c,f=a.edge(s),l=a.node(s.v),d=a.node(s.w);f.points?(u=f.points[0],c=f.points[f.points.length-1]):(f.points=[],u=d,c=l),f.points.unshift(Xa.intersectRect(l,u)),f.points.push(Xa.intersectRect(d,c))})})(o)}),i("    reversePoints",function(){(function(a){P.forEach(a.edges(),function(s){var u=a.edge(s);u.reversed&&u.points.reverse()})})(o)}),i("    acyclic.undo",function(){Iv.undo(o)})})(r,n)}),n("  updateInputGraph",function(){(function(o,i){P.forEach(o.nodes(),function(a){var s=o.node(a),u=i.node(a);s&&(s.x=u.x,s.y=u.y,i.children(a).length&&(s.width=u.width,s.height=u.height))}),P.forEach(o.edges(),function(a){var s=o.edge(a),u=i.edge(a);s.points=u.points,P.has(u,"x")&&(s.x=u.x,s.y=u.y)}),o.graph().width=i.graph().width,o.graph().height=i.graph().height})(e,r)})})},Hg=["nodesep","edgesep","ranksep","marginx","marginy"],Zg={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},jg=["acyclicer","ranker","rankdir","align"],Yg=["width","height"],Kg={width:0,height:0},Qg=["minlen","weight","width","height","labeloffset"],qg={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Jg=["labelpos"];function ih(e,t){return P.mapValues(P.pick(e,t),Number)}function ah(e){var t={};return P.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var ey=Gi.Graph,qv={graphlib:Gi,layout:Xg,debug:{debugOrdering:function(e){var t=xo.buildLayerMatrix(e),n=new ey({compound:!0,multigraph:!0}).setGraph({});return P.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),P.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),P.forEach(t,function(r,o){var i="layer"+o;n.setNode(i,{rank:"same"}),P.reduce(r,function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}},util:{time:xo.time,notime:xo.notime},version:"0.8.5"},ty=qv.graphlib,ny=qv.layout;class ry{constructor(t){this.cardinality=1,this.include=Pa.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=yo.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class oy{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function iy(e){const t=new oy;return e.nodes.map(n=>new ry(n)).forEach(n=>{t.nodes[n.name]=n,n.inputs.forEach(r=>{(function(o,i,a){a.name!==i.name&&o.edges.push(Object.assign(Object.assign({},a.attr),{v:a.name,w:i.name}))})(t,n,r)})}),t}class ay{constructor(t,n={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=Pa.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=yo.META,this.path=[],this.name=t,this.metaGraph=sh(t,_s.META,n)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(t=>this.metaGraph.node(t))}leaves(){let t,n=[],r=[this];for(;r.length;){let o=r.shift();o.isGroupNode?(t=o.metaGraph,t.nodes().forEach(i=>r.push(t.node(i)))):n.push(o.name)}return n}}class sy{constructor(t,n){this.v=t,this.w=n,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,n){this.baseEdgeList.push(t)}}function Jv(e,t={}){return new ay(e,t)}function ep(e,t){return new sy(e,t)}function sh(e,t,n){const r=n||{},o=new ty.Graph(r);return o.setGraph({name:e,rankdir:r.rankdir,type:t,align:r.align}),o}class uy{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=Jv(Ga,this.graphOptions),this.index[Ga]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,n){this.index[t]=n}getBridgeGraph(t){const n=this.index[t];if(!n)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in n))return null;const r=n;if(r.bridgeGraph)return r.bridgeGraph;const o=sh(Td,_s.BRIDGE,this.graphOptions);if(r.bridgeGraph=o,!n.parentNode||!("metaGraph"in n.parentNode))return o;const i=n.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach(a=>{a.edges().filter(s=>s.v===t||s.w===t).forEach(s=>{const u=s.w===t;a.edge(s).baseEdgeList.forEach(c=>{const[f,l]=u?[c.w,s.v]:[c.v,s.w],d=this.getChildName(t,f),h={v:u?l:d,w:u?d:l};let v=o.edge(h);v||(v=ep(h.v,h.w),v.inbound=u,o.setEdge(h.v,h.w,v)),v.addBaseEdge(c,this)})})}),o}getChildName(t,n){let r=this.index[n];for(;r;){if(r.parentNode&&r.parentNode.name===t)return r.name;r=r.parentNode}throw Error("Could not find immediate child for descendant: "+n)}getPredecessors(t){const n=this.index[t];if(!n)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(n,!0)}getSuccessors(t){const n=this.index[t];if(!n)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(n,!1)}getOneWayEdges(t,n){const r=[];if(!t.parentNode||!t.parentNode.isGroupNode)return r;const o=t.parentNode,i=o.metaGraph,a=this.getBridgeGraph(o.name);return tp(i,t,n,r),tp(a,t,n,r),r}}function cy(e,t){const{rankDirection:n,align:r}=t,o=new uy({rankdir:n,align:r});return function(i,a){Object.keys(a.nodes).forEach(s=>{const u=a.nodes[s],c=u.path;let f=i.root;f.depth=Math.max(c.length,f.depth);for(let l=0;l<c.length&&(f.depth=Math.max(f.depth,c.length-l),f.cardinality+=u.cardinality,l!==c.length-1);l++){const d=c[l];let h=i.node(d);h||(h=Jv(d,i.graphOptions),h.path=u.path.slice(0,l+1),h.parentNode=f,i.setNode(d,h),f.metaGraph.setNode(d,h)),f=h}i.setNode(u.name,u),u.parentNode=f,f.metaGraph.setNode(u.name,u)})}(o,e),function(i,a){const s=i.getNodeMap();let u=[],c=[];const f=(l,d)=>{let h=0;for(;l;)d[h++]=l.name,l=l.parentNode;return h-1};a.edges.forEach(l=>{u=[],c=[];let d=f(a.nodes[l.v],u),h=f(a.nodes[l.w],c);for(;u[d]===c[h];)if(d--,h--,d<0||h<0)throw Error("No difference found between ancestor paths.");const v=s[u[d+1]],m=u[d],g=c[h];let E=v.metaGraph.edge(m,g);E||(E=ep(m,g),v.metaGraph.setEdge(m,g,E)),E.addBaseEdge(l,i)})}(o,e),o}function tp(e,t,n,r){(n?e.inEdges(t.name):e.outEdges(t.name)).forEach(o=>{const i=e.edge(o);r.push(i)})}class fy{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new rp(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(t){if(t in this.hasSubHierarchy)return;this.hasSubHierarchy[t]=!0;const n=this.index[t];if(n.node.type!==yo.META)return;const r=n,o=r.node.metaGraph,i=r.coreGraph;o.nodes().forEach(f=>{const l=this.getOrCreateRenderNodeByName(f);i.setNode(f,l)}),o.edges().forEach(f=>{const l=o.edge(f),d=new np(l);i.setEdge(f.v,f.w,d)});const a=r.node.parentNode;if(!a)return;const s=this.getRenderNodeByName(a.name),u=(f,...l)=>l.concat([f?"IN":"OUT"]).join("~~"),c=this.hierarchy.getBridgeGraph(t);c.edges().forEach(f=>{const l=c.edge(f),d=!!o.node(f.w),[h,v]=d?[f.w,f.v]:[f.v,f.w],m=I=>{const X=d?{v:I,w:t}:{v:t,w:I};return s.coreGraph.edge(X)};let g=m(v);g||(g=m(u(d,v,a.name)));const E=u(d,t),y=u(d,v,t);let b=i.node(y);if(!b){let I=i.node(E);if(!I){const ge={name:E,type:yo.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:Pa.UNSPECIFIED,inbound:d,attr:{}};I=new xl(ge),this.index[E]=I,i.setNode(E,I)}const X={name:y,type:yo.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:Pa.UNSPECIFIED,inbound:d,attr:{}};b=new xl(X),this.index[y]=b,i.setNode(y,b),i.setParent(y,E),I.node.cardinality++}const w=new np(l);w.adjoiningMetaEdge=g,d?i.setEdge(y,h,w):i.setEdge(h,y,w)})}getOrCreateRenderNodeByName(t){if(!t)return null;if(t in this.index)return this.index[t];const n=this.getNodeByName(t);return n?(this.index[t]=n.isGroupNode?new rp(n,this.hierarchy.graphOptions):new xl(n),this.index[t]):null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class xl{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class np{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class rp extends xl{constructor(t,n){super(t);const r=t.metaGraph.graph();n.compound=!0,this.coreGraph=sh(r.name,_s.CORE,n)}}function op(e,t){e.node.isGroupNode&&function(n,r){const o=Oi(r);n.coreGraph.nodes().map(i=>n.coreGraph.node(i)).forEach(i=>{var a,s,u,c,f,l;const{height:d,width:h}=i;switch(i.node.type){case yo.NODE:Object.assign(i,o.nodeSize.node),i.height=d||o.nodeSize.node.height,i.width=h||o.nodeSize.node.width;break;case yo.BRIDGE:Object.assign(i,o.nodeSize.bridge);break;case yo.META:i.expanded?op(i,r):(Object.assign(i,o.nodeSize.meta),i.height=o.nodeSize.meta.height,i.width=o.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+i.node.type)}if(!i.expanded){const v=i.attr;(function(m,g=!1){if(m.coreBox.width=m.width,m.coreBox.height=m.height,!g){const E=`${m.displayName}`.length,y=3;m.width=Math.max(m.coreBox.width,E*y)}})(i,r&&(i.node.type===0&&!!(!((s=(a=r==null?void 0:r.nodeSize)===null||a===void 0?void 0:a.meta)===null||s===void 0)&&s.width)||i.node.type===1&&(!!(!((c=(u=r==null?void 0:r.nodeSize)===null||u===void 0?void 0:u.node)===null||c===void 0)&&c.width)||!!v.width)||i.node.type===2&&!!(!((l=(f=r==null?void 0:r.nodeSize)===null||f===void 0?void 0:f.bridge)===null||l===void 0)&&l.width)))}})}(e,t),e.node.type===yo.META&&function(n,r){const o=Oi(r),i=o.subScene.meta;Object.assign(n,i);const{nodeSep:a,rankSep:s,edgeSep:u,align:c}=o.graph.meta,f={nodesep:a,ranksep:s,edgesep:u,align:c};Object.assign(n.coreBox,function(h,v){const{ranksep:m,nodesep:g,edgesep:E,align:y}=v;Object.assign(h.graph(),{ranksep:m,nodesep:g,edgesep:E,align:y});const b=[];if(h.nodes().forEach(re=>{h.node(re).node.type!==yo.BRIDGE&&b.push(re)}),!b.length)return{width:0,height:0};ny(h);let w=1/0,I=1/0,X=-1/0,ge=-1/0;return b.forEach(re=>{const Q=h.node(re),ee=.5*Q.width,be=Q.x-ee,k=Q.x+ee;w=be<w?be:w,X=k>X?k:X;const xe=.5*Q.height,Ve=Q.y-xe,qe=Q.y+xe;I=Ve<I?Ve:I,ge=qe>ge?qe:ge}),h.edges().forEach(re=>{const Q=h.edge(re),ee=h.node(Q.metaEdge.v),be=h.node(Q.metaEdge.w);if(Q.points.length===3&&function(Ve){let qe=ip(Ve[0],Ve[1]);for(let Ut=1;Ut<Ve.length-1;Ut++){const ut=ip(Ve[Ut],Ve[Ut+1]);if(Math.abs(ut-qe)>1)return!1;qe=ut}return!0}(Q.points)){if(ee!=null){const Ve=ee.expanded?ee.x:uh(ee);Q.points[0].x=Ve}if(be!=null){const Ve=be.expanded?be.x:uh(be);Q.points[2].x=Ve}Q.points=[Q.points[0],Q.points[1]]}const k=Q.points[Q.points.length-2];be!=null&&(Q.points[Q.points.length-1]=ap(k,be));const xe=Q.points[1];ee!=null&&(Q.points[0]=ap(xe,ee)),Q.points.forEach(Ve=>{w=Ve.x<w?Ve.x:w,X=Ve.x>X?Ve.x:X,I=Ve.y<I?Ve.y:I,ge=Ve.y>ge?Ve.y:ge})}),h.nodes().forEach(re=>{const Q=h.node(re);Q.x-=w,Q.y-=I}),h.edges().forEach(re=>{h.edge(re).points.forEach(Q=>{Q.x-=w,Q.y-=I})}),{width:X-w,height:ge-I}}(n.coreGraph,f));let l=0;n.coreGraph.nodeCount()>0&&l++;const d=l<=1?0:l;n.coreBox.width+=d+d,n.coreBox.height=i.labelHeight+n.coreBox.height,n.width=n.coreBox.width+i.paddingLeft+i.paddingRight,n.height=n.paddingTop+n.coreBox.height+n.paddingBottom}(e,t)}function ip(e,t){const n=t.x-e.x,r=t.y-e.y;return 180*Math.atan(r/n)/Math.PI}function uh(e){return e.expanded?e.x:e.x-e.width/2+0+e.coreBox.width/2}function ap(e,t){const n=t.expanded?t.x:uh(t),r=t.y,o=e.x-n,i=e.y-r;let a,s,u=t.expanded?t.width:t.coreBox.width,c=t.expanded?t.height:t.coreBox.height;return Math.abs(i)*u/2>Math.abs(o)*c/2?(i<0&&(c=-c),a=i===0?0:c/2*o/i,s=c/2):(o<0&&(u=-u),a=u/2,s=o===0?0:u/2*i/o),{x:n+a,y:r+s}}function ly(e,t,n){var r,o,i,a;const s=e.nodes.filter((l,d,h)=>h.findIndex(v=>v.id===l.id)!==d).map(l=>l.id);if(s.length)throw new Error(`Duplicated ids found: ${s.join(", ")}`);const u=function(l){const d={nodes:[]},h=l.compound,v=Object.keys(h||{}),m=new Map,g=(y,b=[])=>{if(m.has(y))return m.get(y);for(let w=0;w<v.length;w++){let I=v[w];if(h&&h[I].indexOf(y)!==-1)return b.unshift(I),g(I,b)}return b.length===0&&m.set(y,b),b},E=y=>l.edges.filter(b=>b.w===y).map(b=>({name:b.v}));return l.nodes.forEach(y=>{const b=y.id,w=[...g(b),b];let I=E(b);d.nodes.push({name:b,path:w,inputs:I,width:y.width,height:y.height,attr:Object.assign({},y)})}),d}(e),c=function(l,d){const h=(m,g)=>{for(let E of g.values())if(E.includes(m))return!0;return!1},v=(m,g=[])=>{if(Object.keys(m).length===0)return[...new Set(g)];const E=new Map(Object.keys(m).map(b=>[b,m[b]])),y={};for(let[b,w]of E)h(b,E)?y[b]=w:g=g.concat(b,w);return v(y,g)};return v(l).filter(m=>d.includes(m))}(e.compound||{},(t==null?void 0:t.expanded)||[]),f=function(l,d){return function(h){return new fy(h)}(cy(iy(l),d))}(u,{rankDirection:((o=(r=n==null?void 0:n.graph)===null||r===void 0?void 0:r.meta)===null||o===void 0?void 0:o.rankDir)||(t==null?void 0:t.rankDirection)||cu.graph.meta.rankDir,align:((a=(i=n==null?void 0:n.graph)===null||i===void 0?void 0:i.meta)===null||a===void 0?void 0:a.align)||cu.graph.meta.align});return function(l,d){d.forEach(h=>{const v=l.getRenderInfoNodes().find(E=>E.displayName===h);let m=v&&v.node&&v.node.name||"";const g=l.getRenderNodeByName(m);if(!g)throw new Error(`No nodes found: ${m}`);g.expanded=!0,l.buildSubHierarchy(m)})}(f,c),op(f.root,n),up(f.root)}function dy(e,t=!1){const n=JSON.parse(JSON.stringify(e)),r={nodes:[n],edges:[...n.edges]};return n.nodes.forEach(function o(i){(i.type===0||i.type===1)&&r.nodes.push(i),i.type===0&&(r.edges=r.edges.concat(i.edges)),Array.isArray(i.nodes)&&i.nodes.forEach(o)}),t&&r.nodes.forEach(o=>{const i=r.nodes.find(a=>a.id===o.parentNodeName);if(i){const a=i.x-i.width/2+i.paddingLeft,s=i.y-i.height/2+i.labelHeight+i.paddingTop;i.id!==Ga&&(o.x+=a,o.y+=s),o.type===0&&o.edges.forEach(u=>{u.points.forEach(c=>{c.x+=o.x-o.width/2+o.paddingLeft,c.y+=o.y-o.height/2+o.labelHeight+o.paddingTop})})}}),r}function sp(e,t,n,r){var o,i;let a=[];const s=((o=n.find(l=>l.id===e))===null||o===void 0?void 0:o.path)||[],u=((i=n.find(l=>l.id===t))===null||i===void 0?void 0:i.path)||[],c=[Ga,...s].slice(0,s.length).reverse(),f=[Ga,...u].slice(0,u.length);return c.forEach(l=>{const d=n.find(h=>h.id===l);a=a.concat(d.edges.filter(h=>h.baseEdgeList.some(v=>v.v===((r==null?void 0:r.v)||e)&&v.w===((r==null?void 0:r.w)||t))))}),f.filter(l=>!c.includes(l)).forEach(l=>{const d=n.find(h=>h.id===l);a=a.concat(d.edges.filter(h=>h.baseEdgeList.some(v=>v.v===((r==null?void 0:r.v)||e)&&v.w===((r==null?void 0:r.w)||t))))}),a}function up(e){const t=e.coreGraph.nodes().map(r=>e.coreGraph.node(r));return Object.assign(Object.assign({},cp(e)),{expanded:e.expanded,nodes:e.expanded?(n=t,n.map(r=>r.node.type===yo.META?up(r):cp(r))):[],edges:e.expanded?hy(e):[]});var n}function cp(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}function hy(e){return e.coreGraph.edges().map(t=>({renderInfoEdge:e.coreGraph.edge(t),edge:t})).filter(({renderInfoEdge:t})=>t.metaEdge).map(({edge:t,renderInfoEdge:n})=>{const r=function(o,i){const a=i.points.map(s=>Object.assign({},s));if(i.adjoiningMetaEdge){const s=i.adjoiningMetaEdge.points,u=i.metaEdge.inbound,c=u?s[s.length-1]:s[0],f=a[u?0:a.length-1],l=o.x-o.width/2,d=o.y-o.height/2,h=c.x-l,v=c.y-d,m=-o.paddingLeft,g=-(o.paddingTop+o.labelHeight);f.x=h+m,f.y=v+g}return a}(e,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:t.w,v:t.v,points:r,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:e.node.name}})}class vy extends ve{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.edgesep=5,this.ranksep=50,this.controlPoints=!0,this.anchorPoint=!0,this.nodes=[],this.edges=[],this.combos=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}}init(t){const n=t.hiddenNodes||[],r=t.hiddenEdges||[],o=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(n)),this.edges=this.getDataByOrder((t.edges||[]).concat(r)),this.combos=(t.combos||[]).concat(o.map(i=>Object.assign(Object.assign({},i),{collapsed:!0})))}execute(){const t=this,{nodes:n,edges:r}=t;if(!n)return;const{graphDef:o,graphOption:i,graphSettings:a}=t.getLayoutConfig(),s=ly(o,i,a),u=dy(s,!0);return this.updatePosition(u),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}getNodePath(t){const n=this,{nodes:r,combos:o}=n,i=r.find(s=>s.id===t),a=(s,u=[])=>{const c=o.find(f=>f.id===s);return c?(u.unshift(s),c.parentId?a(c.parentId,u):u):u};return i&&i.comboId?a(i.comboId,[t]):[t]}getLayoutConfig(){var t,n,r;const o=this,{nodes:i,edges:a,combos:s,nodeSize:u,rankdir:c,align:f,edgesep:l,nodesep:d,ranksep:h,settings:v}=o,m=(s||[]).reduce((xe,Ve)=>{const qe=i.filter(ut=>ut.comboId===Ve.id).map(ut=>ut.id),Ut=(s||[]).filter(ut=>ut.parentId===Ve.id).map(ut=>ut.id);return(qe.length||Ut.length)&&(xe[Ve.id]=[...qe,...Ut]),xe},{});let g;u?Tt(u)?g=()=>u:g=()=>[u,u]:g=xe=>xe&&xe.size?Tt(xe.size)?xe.size:xt(xe.size)?[xe.size.width||40,xe.size.height||40]:[xe.size,xe.size]:[40,40];const E=xe=>xe&&xe.size?Tt(xe.size)?xe.size:[xe.size,xe.size]:[80,40],[y,b]=E(s==null?void 0:s[0]),w=(n=(t=o.graphSettings)===null||t===void 0?void 0:t.subScene)===null||n===void 0?void 0:n.meta,[I,X,ge,re]=((r=s.find(xe=>!xe.collapsed))===null||r===void 0?void 0:r.padding)||[20,20,20,20],Q={compound:m,nodes:[...(i||[]).map(xe=>{const Ve=g(xe),qe=Ve[0],Ut=Ve[1];return Object.assign(Object.assign({},xe),{width:qe,height:Ut})})],edges:[...(a||[]).map(xe=>Object.assign(Object.assign({},xe),{v:xe.source,w:xe.target}))]},ee={expanded:(s||[]).filter(xe=>!xe.collapsed).map(xe=>xe.id)},be={graph:{meta:{align:f,rankDir:c,nodeSep:d,edgeSep:l,rankSep:h}},subScene:{meta:{paddingTop:I||(w==null?void 0:w.paddingTop)||20,paddingRight:X||(w==null?void 0:w.paddingRight)||20,paddingBottom:ge||(w==null?void 0:w.paddingBottom)||20,paddingLeft:re||(w==null?void 0:w.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:y,height:b}}},k=Oi(v,Object.assign({},Oi(be,cu)));return o.graphSettings=k,{graphDef:Q,graphOption:ee,graphSettings:k}}updatePosition(t){const{nodes:n,edges:r}=t;this.updateNodePosition(n,r),this.updateEdgePosition(n,r)}getBegin(t,n){const r=this,{begin:o}=r,i=[0,0];if(o){let a=1/0,s=1/0;t.forEach(u=>{a>u.x&&(a=u.x),s>u.y&&(s=u.y)}),n.forEach(u=>{u.points.forEach(c=>{a>c.x&&(a=c.x),s>c.y&&(s=c.y)})}),i[0]=o[0]-a,i[1]=o[1]-s}return i}updateNodePosition(t,n){const r=this,{combos:o,nodes:i,edges:a,anchorPoint:s,graphSettings:u}=r,c=this.getBegin(t,n);t.forEach(f=>{var l;const{x:d,y:h,id:v,type:m,coreBox:g}=f;if(m===fu.META&&v!==Ga){const E=o.findIndex(b=>b.id===v),y=(l=u==null?void 0:u.subScene)===null||l===void 0?void 0:l.meta;o[E].offsetX=d+c[0],o[E].offsetY=h+c[1],o[E].fixSize=[g.width,g.height],o[E].fixCollapseSize=[g.width,g.height],f.expanded?o[E].padding=[y==null?void 0:y.paddingTop,y==null?void 0:y.paddingRight,y==null?void 0:y.paddingBottom,y==null?void 0:y.paddingLeft]:o[E].padding=[0,0,0,0]}else if(m===fu.OP){const E=i.findIndex(y=>y.id===v);if(i[E].x=d+c[0],i[E].y=h+c[1],s){const y=[],b=n.filter(I=>I.v===v),w=n.filter(I=>I.w===v);b.length>0&&b.forEach(I=>{const X=I.points[0],ge=(X.x-d)/f.width+.5,re=(X.y-h)/f.height+.5;y.push([ge,re]),I.baseEdgeList.forEach(Q=>{const ee=a.find(be=>be.source===Q.v&&be.target===Q.w);ee&&(ee.sourceAnchor=y.length-1)})}),w.length>0&&w.forEach(I=>{const X=I.points[I.points.length-1],ge=(X.x-d)/f.width+.5,re=(X.y-h)/f.height+.5;y.push([ge,re]),I.baseEdgeList.forEach(Q=>{const ee=a.find(be=>be.source===Q.v&&be.target===Q.w);ee&&(ee.targetAnchor=y.length-1)})}),i[E].anchorPoints=y.length>0?y:i[E].anchorPoints||[]}}})}updateEdgePosition(t,n){const r=this,{combos:o,edges:i,controlPoints:a}=r,s=this.getBegin(t,n);a&&(o.forEach(u=>{u.inEdges=[],u.outEdges=[]}),i.forEach(u=>{var c,f,l,d;let h=t.find(E=>E.id===u.source),v=t.find(E=>E.id===u.target),m=[],g=[];if(h&&v)g=sp(h==null?void 0:h.id,v==null?void 0:v.id,t);else if(!h||!v){const E=r.getNodePath(u.source),y=r.getNodePath(u.target),b=E.reverse().slice(h?0:1).find(I=>t.find(X=>X.id===I)),w=y.reverse().slice(v?0:1).find(I=>t.find(X=>X.id===I));h=t.find(I=>I.id===b),v=t.find(I=>I.id===w),g=sp(h==null?void 0:h.id,v==null?void 0:v.id,t,{v:u.source,w:u.target})}if(m=g.reduce((E,y)=>[...E,...y.points.map(b=>Object.assign(Object.assign({},b),{x:b.x+s[0],y:b.y+s[1]}))],[]),m=m.slice(1,-1),u.controlPoints=m,(v==null?void 0:v.type)===yo.META){const E=o.findIndex(y=>y.id===(v==null?void 0:v.id));if(!o[E]||!((c=o[E].inEdges)===null||c===void 0)&&c.some(y=>y.source===h.id&&y.target===v.id))return;(f=o[E].inEdges)===null||f===void 0||f.push({source:h.id,target:v.id,controlPoints:m})}if((h==null?void 0:h.type)===yo.META){const E=o.findIndex(y=>y.id===(h==null?void 0:h.id));if(!o[E]||!((l=o[E].outEdges)===null||l===void 0)&&l.some(y=>y.source===h.id&&y.target===v.id))return;(d=o[E].outEdges)===null||d===void 0||d.push({source:h.id,target:v.id,controlPoints:m})}}))}getType(){return"dagreCompound"}getDataByOrder(t){return t.every(n=>n.layoutOrder!==void 0)||t.forEach((n,r)=>{n.layoutOrder=r}),t.sort((n,r)=>n.layoutOrder-r.layoutOrder)}}var py=B(91621),my=B.n(py),gy=B(58853),fp=B.n(gy),yy=B(38888),lp=B.n(yy),Ey=B(21140),wl=B.n(Ey),by=B(63466),_l=B.n(by);const xy=Object.prototype.toString;function ri(e){const t=xy.call(e);return t.endsWith("Array]")&&!t.includes("Big")}function wy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ri(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var n=t.fromIndex,r=n===void 0?0:n,o=t.toIndex,i=o===void 0?e.length:o;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>e.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<i;s++)e[s]>a&&(a=e[s]);return a}function _y(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ri(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var n=t.fromIndex,r=n===void 0?0:n,o=t.toIndex,i=o===void 0?e.length:o;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>e.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<i;s++)e[s]<a&&(a=e[s]);return a}function dp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ri(e)){if(e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(t.output!==void 0){if(!ri(t.output))throw new TypeError("output option must be an array if specified");n=t.output}else n=new Array(e.length);var r=_y(e),o=wy(e);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=t.min,a=i===void 0?t.autoMinMax?r:0:i,s=t.max,u=s===void 0?t.autoMinMax?o:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var c=(u-a)/(o-r),f=0;f<e.length;f++)n[f]=(e[f]-r)*c+a;return n}var Sl=" ".repeat(2),hp=" ".repeat(4);function Sy(){return vp(this)}function vp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxRows,r=n===void 0?15:n,o=t.maxColumns,i=o===void 0?10:o,a=t.maxNumSize,s=a===void 0?8:a,u=t.padMinus,c=u===void 0?"auto":u;return"".concat(e.constructor.name,` {
`).concat(Sl,`[
`).concat(hp).concat(Ty(e,r,i,s,c),`
`).concat(Sl,`]
`).concat(Sl,"rows: ").concat(e.rows,`
`).concat(Sl,"columns: ").concat(e.columns,`
}`)}function Ty(e,t,n,r,o){var i=e.rows,a=e.columns,s=Math.min(i,t),u=Math.min(a,n),c=[];if(o==="auto"){o=!1;e:for(var f=0;f<s;f++)for(var l=0;l<u;l++)if(e.get(f,l)<0){o=!0;break e}}for(var d=0;d<s;d++){for(var h=[],v=0;v<u;v++)h.push(Iy(e.get(d,v),r,o));c.push("".concat(h.join(" ")))}return u!==a&&(c[c.length-1]+=" ... ".concat(a-n," more columns")),s!==i&&c.push("... ".concat(i-t," more rows")),c.join(`
`.concat(hp))}function Iy(e,t,n){return(e>=0&&n?" ".concat(pp(e,t-1)):pp(e,t)).padEnd(t)}function pp(e,t){var n=e.toString();if(n.length<=t)return n;var r=e.toFixed(t);if(r.length>t&&(r=e.toFixed(Math.max(0,t-(r.length-t)))),r.length<=t&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;var o=e.toExponential(t);return o.length>t&&(o=e.toExponential(Math.max(0,t-(o.length-t)))),o.slice(0)}function Ny(e,t){e.prototype.add=function(r){return typeof r=="number"?this.addS(r):this.addM(r)},e.prototype.addS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)+r);return this},e.prototype.addM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)+r.get(o,i));return this},e.add=function(r,o){var i=new t(r);return i.add(o)},e.prototype.sub=function(r){return typeof r=="number"?this.subS(r):this.subM(r)},e.prototype.subS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)-r);return this},e.prototype.subM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)-r.get(o,i));return this},e.sub=function(r,o){var i=new t(r);return i.sub(o)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(r){return typeof r=="number"?this.mulS(r):this.mulM(r)},e.prototype.mulS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)*r);return this},e.prototype.mulM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)*r.get(o,i));return this},e.mul=function(r,o){var i=new t(r);return i.mul(o)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(r){return typeof r=="number"?this.divS(r):this.divM(r)},e.prototype.divS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)/r);return this},e.prototype.divM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)/r.get(o,i));return this},e.div=function(r,o){var i=new t(r);return i.div(o)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(r){return typeof r=="number"?this.modS(r):this.modM(r)},e.prototype.modS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)%r);return this},e.prototype.modM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)%r.get(o,i));return this},e.mod=function(r,o){var i=new t(r);return i.mod(o)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(r){return typeof r=="number"?this.andS(r):this.andM(r)},e.prototype.andS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)&r);return this},e.prototype.andM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)&r.get(o,i));return this},e.and=function(r,o){var i=new t(r);return i.and(o)},e.prototype.or=function(r){return typeof r=="number"?this.orS(r):this.orM(r)},e.prototype.orS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)|r);return this},e.prototype.orM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)|r.get(o,i));return this},e.or=function(r,o){var i=new t(r);return i.or(o)},e.prototype.xor=function(r){return typeof r=="number"?this.xorS(r):this.xorM(r)},e.prototype.xorS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)^r);return this},e.prototype.xorM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)^r.get(o,i));return this},e.xor=function(r,o){var i=new t(r);return i.xor(o)},e.prototype.leftShift=function(r){return typeof r=="number"?this.leftShiftS(r):this.leftShiftM(r)},e.prototype.leftShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)<<r);return this},e.prototype.leftShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)<<r.get(o,i));return this},e.leftShift=function(r,o){var i=new t(r);return i.leftShift(o)},e.prototype.signPropagatingRightShift=function(r){return typeof r=="number"?this.signPropagatingRightShiftS(r):this.signPropagatingRightShiftM(r)},e.prototype.signPropagatingRightShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>r);return this},e.prototype.signPropagatingRightShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>r.get(o,i));return this},e.signPropagatingRightShift=function(r,o){var i=new t(r);return i.signPropagatingRightShift(o)},e.prototype.rightShift=function(r){return typeof r=="number"?this.rightShiftS(r):this.rightShiftM(r)},e.prototype.rightShiftS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>>r);return this},e.prototype.rightShiftM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,this.get(o,i)>>>r.get(o,i));return this},e.rightShift=function(r,o){var i=new t(r);return i.rightShift(o)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,~this.get(r,o));return this},e.not=function(r){var o=new t(r);return o.not()},e.prototype.abs=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.abs(this.get(r,o)));return this},e.abs=function(r){var o=new t(r);return o.abs()},e.prototype.acos=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.acos(this.get(r,o)));return this},e.acos=function(r){var o=new t(r);return o.acos()},e.prototype.acosh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.acosh(this.get(r,o)));return this},e.acosh=function(r){var o=new t(r);return o.acosh()},e.prototype.asin=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.asin(this.get(r,o)));return this},e.asin=function(r){var o=new t(r);return o.asin()},e.prototype.asinh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.asinh(this.get(r,o)));return this},e.asinh=function(r){var o=new t(r);return o.asinh()},e.prototype.atan=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.atan(this.get(r,o)));return this},e.atan=function(r){var o=new t(r);return o.atan()},e.prototype.atanh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.atanh(this.get(r,o)));return this},e.atanh=function(r){var o=new t(r);return o.atanh()},e.prototype.cbrt=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cbrt(this.get(r,o)));return this},e.cbrt=function(r){var o=new t(r);return o.cbrt()},e.prototype.ceil=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.ceil(this.get(r,o)));return this},e.ceil=function(r){var o=new t(r);return o.ceil()},e.prototype.clz32=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.clz32(this.get(r,o)));return this},e.clz32=function(r){var o=new t(r);return o.clz32()},e.prototype.cos=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cos(this.get(r,o)));return this},e.cos=function(r){var o=new t(r);return o.cos()},e.prototype.cosh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.cosh(this.get(r,o)));return this},e.cosh=function(r){var o=new t(r);return o.cosh()},e.prototype.exp=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.exp(this.get(r,o)));return this},e.exp=function(r){var o=new t(r);return o.exp()},e.prototype.expm1=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.expm1(this.get(r,o)));return this},e.expm1=function(r){var o=new t(r);return o.expm1()},e.prototype.floor=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.floor(this.get(r,o)));return this},e.floor=function(r){var o=new t(r);return o.floor()},e.prototype.fround=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.fround(this.get(r,o)));return this},e.fround=function(r){var o=new t(r);return o.fround()},e.prototype.log=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log(this.get(r,o)));return this},e.log=function(r){var o=new t(r);return o.log()},e.prototype.log1p=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log1p(this.get(r,o)));return this},e.log1p=function(r){var o=new t(r);return o.log1p()},e.prototype.log10=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log10(this.get(r,o)));return this},e.log10=function(r){var o=new t(r);return o.log10()},e.prototype.log2=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.log2(this.get(r,o)));return this},e.log2=function(r){var o=new t(r);return o.log2()},e.prototype.round=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.round(this.get(r,o)));return this},e.round=function(r){var o=new t(r);return o.round()},e.prototype.sign=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sign(this.get(r,o)));return this},e.sign=function(r){var o=new t(r);return o.sign()},e.prototype.sin=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sin(this.get(r,o)));return this},e.sin=function(r){var o=new t(r);return o.sin()},e.prototype.sinh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sinh(this.get(r,o)));return this},e.sinh=function(r){var o=new t(r);return o.sinh()},e.prototype.sqrt=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.sqrt(this.get(r,o)));return this},e.sqrt=function(r){var o=new t(r);return o.sqrt()},e.prototype.tan=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.tan(this.get(r,o)));return this},e.tan=function(r){var o=new t(r);return o.tan()},e.prototype.tanh=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.tanh(this.get(r,o)));return this},e.tanh=function(r){var o=new t(r);return o.tanh()},e.prototype.trunc=function(){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,Math.trunc(this.get(r,o)));return this},e.trunc=function(r){var o=new t(r);return o.trunc()},e.pow=function(r,o){var i=new t(r);return i.pow(o)},e.prototype.pow=function(r){return typeof r=="number"?this.powS(r):this.powM(r)},e.prototype.powS=function(r){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,Math.pow(this.get(o,i),r));return this},e.prototype.powM=function(r){if(r=t.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.set(o,i,Math.pow(this.get(o,i),r.get(o,i)));return this}}function Pi(e,t,n){var r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function Fi(e,t,n){var r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function _u(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function Su(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function Ay(e,t){if(!ri(t))throw new TypeError("row indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.rows)throw new RangeError("row indices are out of range")}function Ry(e,t){if(!ri(t))throw new TypeError("column indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.columns)throw new RangeError("column indices are out of range")}function mp(e,t,n,r,o){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Il("startRow",t),Il("endRow",n),Il("startColumn",r),Il("endColumn",o),t>n||r>o||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||o<0||o>=e.columns)throw new RangeError("Submatrix indices are out of range")}function Tl(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],r=0;r<e;r++)n.push(t);return n}function Il(e,t){if(typeof t!="number")throw new TypeError("".concat(e," must be a number"))}function Tu(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}function Cy(e){for(var t=Tl(e.rows),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}function Dy(e){for(var t=Tl(e.columns),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}function Oy(e){for(var t=0,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t+=e.get(n,r);return t}function Ly(e){for(var t=Tl(e.rows,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}function My(e){for(var t=Tl(e.columns,1),n=0;n<e.rows;++n)for(var r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}function ky(e){for(var t=1,n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)t*=e.get(n,r);return t}function Gy(e,t,n){for(var r=e.rows,o=e.columns,i=[],a=0;a<r;a++){for(var s=0,u=0,c=0,f=0;f<o;f++)c=e.get(a,f)-n[a],s+=c,u+=c*c;t?i.push((u-s*s/o)/(o-1)):i.push((u-s*s/o)/o)}return i}function Py(e,t,n){for(var r=e.rows,o=e.columns,i=[],a=0;a<o;a++){for(var s=0,u=0,c=0,f=0;f<r;f++)c=e.get(f,a)-n[a],s+=c,u+=c*c;t?i.push((u-s*s/r)/(r-1)):i.push((u-s*s/r)/r)}return i}function Fy(e,t,n){for(var r=e.rows,o=e.columns,i=r*o,a=0,s=0,u=0,c=0;c<r;c++)for(var f=0;f<o;f++)u=e.get(c,f)-n,a+=u,s+=u*u;return t?(s-a*a/i)/(i-1):(s-a*a/i)/i}function zy(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}function By(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}function Uy(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}function $y(e){for(var t=[],n=0;n<e.rows;n++){for(var r=0,o=0;o<e.columns;o++)r+=Math.pow(e.get(n,o),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}function Vy(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}function Wy(e){for(var t=[],n=0;n<e.columns;n++){for(var r=0,o=0;o<e.rows;o++)r+=Math.pow(e.get(o,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}function Xy(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}function Hy(e){for(var t=e.size-1,n=0,r=0;r<e.columns;r++)for(var o=0;o<e.rows;o++)n+=Math.pow(e.get(o,r),2)/t;return Math.sqrt(n)}function Zy(e,t){for(var n=0;n<e.rows;n++)for(var r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}var ho=function(){function e(){wl()(this,e)}return _l()(e,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(n){if(typeof n!="function")throw new TypeError("callback must be a function");for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.call(this,r,o);return this}},{key:"to1DArray",value:function(){for(var n=[],r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.push(this.get(r,o));return n}},{key:"to2DArray",value:function(){for(var n=[],r=0;r<this.rows;r++){n.push([]);for(var o=0;o<this.columns;o++)n[r].push(this.get(r,o))}return n}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var n=0;n<this.rows;n++)for(var r=0;r<=n;r++)if(this.get(n,r)!==this.get(r,n))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var n=0,r=0,o=-1,i=!0,a=!1;n<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(n,r)===0?r++:this.get(n,r)===1&&r>o?(a=!0,o=r):(i=!1,a=!0);n++}return i}},{key:"isReducedEchelonForm",value:function(){for(var n=0,r=0,o=-1,i=!0,a=!1;n<this.rows&&i;){for(r=0,a=!1;r<this.columns&&a===!1;)this.get(n,r)===0?r++:this.get(n,r)===1&&r>o?(a=!0,o=r):(i=!1,a=!0);for(var s=r+1;s<this.rows;s++)this.get(n,s)!==0&&(i=!1);n++}return i}},{key:"echelonForm",value:function(){for(var n=this.clone(),r=0,o=0;r<n.rows&&o<n.columns;){for(var i=r,a=r;a<n.rows;a++)n.get(a,o)>n.get(i,o)&&(i=a);if(n.get(i,o)===0)o++;else{n.swapRows(r,i);for(var s=n.get(r,o),u=o;u<n.columns;u++)n.set(r,u,n.get(r,u)/s);for(var c=r+1;c<n.rows;c++){var f=n.get(c,o)/n.get(r,o);n.set(c,o,0);for(var l=o+1;l<n.columns;l++)n.set(c,l,n.get(c,l)-n.get(r,l)*f)}r++,o++}}return n}},{key:"reducedEchelonForm",value:function(){for(var n=this.echelonForm(),r=n.columns,o=n.rows,i=o-1;i>=0;)if(n.maxRow(i)===0)i--;else{for(var a=0,s=!1;a<o&&s===!1;)n.get(i,a)===1?s=!0:a++;for(var u=0;u<i;u++)for(var c=n.get(u,a),f=a;f<r;f++){var l=n.get(u,f)-c*n.get(i,f);n.set(u,f,l)}i--}return n}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ge()(n)!=="object")throw new TypeError("options must be an object");var r=n.rows,o=r===void 0?1:r,i=n.columns,a=i===void 0?1:i;if(!Number.isInteger(o)||o<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");for(var s=new qt(this.rows*o,this.columns*a),u=0;u<o;u++)for(var c=0;c<a;c++)s.setSubMatrix(this,this.rows*u,this.columns*c);return s}},{key:"fill",value:function(n){for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,n);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(n){Pi(this,n);for(var r=[],o=0;o<this.columns;o++)r.push(this.get(n,o));return r}},{key:"getRowVector",value:function(n){return qt.rowVector(this.getRow(n))}},{key:"setRow",value:function(n,r){Pi(this,n),r=_u(this,r);for(var o=0;o<this.columns;o++)this.set(n,o,r[o]);return this}},{key:"swapRows",value:function(n,r){Pi(this,n),Pi(this,r);for(var o=0;o<this.columns;o++){var i=this.get(n,o);this.set(n,o,this.get(r,o)),this.set(r,o,i)}return this}},{key:"getColumn",value:function(n){Fi(this,n);for(var r=[],o=0;o<this.rows;o++)r.push(this.get(o,n));return r}},{key:"getColumnVector",value:function(n){return qt.columnVector(this.getColumn(n))}},{key:"setColumn",value:function(n,r){Fi(this,n),r=Su(this,r);for(var o=0;o<this.rows;o++)this.set(o,n,r[o]);return this}},{key:"swapColumns",value:function(n,r){Fi(this,n),Fi(this,r);for(var o=0;o<this.rows;o++){var i=this.get(o,n);this.set(o,n,this.get(o,r)),this.set(o,r,i)}return this}},{key:"addRowVector",value:function(n){n=_u(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)+n[o]);return this}},{key:"subRowVector",value:function(n){n=_u(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)-n[o]);return this}},{key:"mulRowVector",value:function(n){n=_u(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)*n[o]);return this}},{key:"divRowVector",value:function(n){n=_u(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)/n[o]);return this}},{key:"addColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)+n[r]);return this}},{key:"subColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)-n[r]);return this}},{key:"mulColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)*n[r]);return this}},{key:"divColumnVector",value:function(n){n=Su(this,n);for(var r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)this.set(r,o,this.get(r,o)/n[r]);return this}},{key:"mulRow",value:function(n,r){Pi(this,n);for(var o=0;o<this.columns;o++)this.set(n,o,this.get(n,o)*r);return this}},{key:"mulColumn",value:function(n,r){Fi(this,n);for(var o=0;o<this.rows;o++)this.set(o,n,this.get(o,n)*r);return this}},{key:"max",value:function(n){if(this.isEmpty())return NaN;switch(n){case"row":{for(var r=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.get(o,i)>r[o]&&(r[o]=this.get(o,i));return r}case"column":{for(var a=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),s=0;s<this.rows;s++)for(var u=0;u<this.columns;u++)this.get(s,u)>a[u]&&(a[u]=this.get(s,u));return a}case void 0:{for(var c=this.get(0,0),f=0;f<this.rows;f++)for(var l=0;l<this.columns;l++)this.get(f,l)>c&&(c=this.get(f,l));return c}default:throw new Error("invalid option: ".concat(n))}}},{key:"maxIndex",value:function(){Tu(this);for(var n=this.get(0,0),r=[0,0],o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.get(o,i)>n&&(n=this.get(o,i),r[0]=o,r[1]=i);return r}},{key:"min",value:function(n){if(this.isEmpty())return NaN;switch(n){case"row":{for(var r=new Array(this.rows).fill(Number.POSITIVE_INFINITY),o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.get(o,i)<r[o]&&(r[o]=this.get(o,i));return r}case"column":{for(var a=new Array(this.columns).fill(Number.POSITIVE_INFINITY),s=0;s<this.rows;s++)for(var u=0;u<this.columns;u++)this.get(s,u)<a[u]&&(a[u]=this.get(s,u));return a}case void 0:{for(var c=this.get(0,0),f=0;f<this.rows;f++)for(var l=0;l<this.columns;l++)this.get(f,l)<c&&(c=this.get(f,l));return c}default:throw new Error("invalid option: ".concat(n))}}},{key:"minIndex",value:function(){Tu(this);for(var n=this.get(0,0),r=[0,0],o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)this.get(o,i)<n&&(n=this.get(o,i),r[0]=o,r[1]=i);return r}},{key:"maxRow",value:function(n){if(Pi(this,n),this.isEmpty())return NaN;for(var r=this.get(n,0),o=1;o<this.columns;o++)this.get(n,o)>r&&(r=this.get(n,o));return r}},{key:"maxRowIndex",value:function(n){Pi(this,n),Tu(this);for(var r=this.get(n,0),o=[n,0],i=1;i<this.columns;i++)this.get(n,i)>r&&(r=this.get(n,i),o[1]=i);return o}},{key:"minRow",value:function(n){if(Pi(this,n),this.isEmpty())return NaN;for(var r=this.get(n,0),o=1;o<this.columns;o++)this.get(n,o)<r&&(r=this.get(n,o));return r}},{key:"minRowIndex",value:function(n){Pi(this,n),Tu(this);for(var r=this.get(n,0),o=[n,0],i=1;i<this.columns;i++)this.get(n,i)<r&&(r=this.get(n,i),o[1]=i);return o}},{key:"maxColumn",value:function(n){if(Fi(this,n),this.isEmpty())return NaN;for(var r=this.get(0,n),o=1;o<this.rows;o++)this.get(o,n)>r&&(r=this.get(o,n));return r}},{key:"maxColumnIndex",value:function(n){Fi(this,n),Tu(this);for(var r=this.get(0,n),o=[0,n],i=1;i<this.rows;i++)this.get(i,n)>r&&(r=this.get(i,n),o[0]=i);return o}},{key:"minColumn",value:function(n){if(Fi(this,n),this.isEmpty())return NaN;for(var r=this.get(0,n),o=1;o<this.rows;o++)this.get(o,n)<r&&(r=this.get(o,n));return r}},{key:"minColumnIndex",value:function(n){Fi(this,n),Tu(this);for(var r=this.get(0,n),o=[0,n],i=1;i<this.rows;i++)this.get(i,n)<r&&(r=this.get(i,n),o[0]=i);return o}},{key:"diag",value:function(){for(var n=Math.min(this.rows,this.columns),r=[],o=0;o<n;o++)r.push(this.get(o,o));return r}},{key:"norm",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",r=0;if(n==="max")return this.max();if(n==="frobenius"){for(var o=0;o<this.rows;o++)for(var i=0;i<this.columns;i++)r=r+this.get(o,i)*this.get(o,i);return Math.sqrt(r)}else throw new RangeError("unknown norm type: ".concat(n))}},{key:"cumulativeSum",value:function(){for(var n=0,r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n+=this.get(r,o),this.set(r,o,n);return this}},{key:"dot",value:function(n){e.isMatrix(n)&&(n=n.to1DArray());var r=this.to1DArray();if(r.length!==n.length)throw new RangeError("vectors do not have the same size");for(var o=0,i=0;i<r.length;i++)o+=r[i]*n[i];return o}},{key:"mmul",value:function(n){n=qt.checkMatrix(n);for(var r=this.rows,o=this.columns,i=n.columns,a=new qt(r,i),s=new Float64Array(o),u=0;u<i;u++){for(var c=0;c<o;c++)s[c]=n.get(c,u);for(var f=0;f<r;f++){for(var l=0,d=0;d<o;d++)l+=this.get(f,d)*s[d];a.set(f,u,l)}}return a}},{key:"strassen2x2",value:function(n){n=qt.checkMatrix(n);var r=new qt(2,2),o=this.get(0,0),i=n.get(0,0),a=this.get(0,1),s=n.get(0,1),u=this.get(1,0),c=n.get(1,0),f=this.get(1,1),l=n.get(1,1),d=(o+f)*(i+l),h=(u+f)*i,v=o*(s-l),m=f*(c-i),g=(o+a)*l,E=(u-o)*(i+s),y=(a-f)*(c+l),b=d+m-g+y,w=v+g,I=h+m,X=d-h+v+E;return r.set(0,0,b),r.set(0,1,w),r.set(1,0,I),r.set(1,1,X),r}},{key:"strassen3x3",value:function(n){n=qt.checkMatrix(n);var r=new qt(3,3),o=this.get(0,0),i=this.get(0,1),a=this.get(0,2),s=this.get(1,0),u=this.get(1,1),c=this.get(1,2),f=this.get(2,0),l=this.get(2,1),d=this.get(2,2),h=n.get(0,0),v=n.get(0,1),m=n.get(0,2),g=n.get(1,0),E=n.get(1,1),y=n.get(1,2),b=n.get(2,0),w=n.get(2,1),I=n.get(2,2),X=(o+i+a-s-u-l-d)*E,ge=(o-s)*(-v+E),re=u*(-h+v+g-E-y-b+I),Q=(-o+s+u)*(h-v+E),ee=(s+u)*(-h+v),be=o*h,k=(-o+f+l)*(h-m+y),xe=(-o+f)*(m-y),Ve=(f+l)*(-h+m),qe=(o+i+a-u-c-f-l)*y,Ut=l*(-h+m+g-E-y-b+w),ut=(-a+l+d)*(E+b-w),Xt=(a-d)*(E-w),Ot=a*b,gn=(l+d)*(-b+w),Vn=(-a+u+c)*(y+b-I),Cr=(a-c)*(y-I),Fr=(u+c)*(-b+I),nt=i*g,zn=c*w,Zr=s*m,Kn=f*v,yr=d*I,Je=be+Ot+nt,Rt=X+Q+ee+be+ut+Ot+gn,fr=be+k+Ve+qe+Ot+Vn+Fr,yn=ge+re+Q+be+Ot+Vn+Cr,Sr=ge+Q+ee+be+zn,Wn=Ot+Vn+Cr+Fr+Zr,lr=be+k+xe+Ut+ut+Xt+Ot,vo=ut+Xt+Ot+gn+Kn,ao=be+k+xe+Ve+yr;return r.set(0,0,Je),r.set(0,1,Rt),r.set(0,2,fr),r.set(1,0,yn),r.set(1,1,Sr),r.set(1,2,Wn),r.set(2,0,lr),r.set(2,1,vo),r.set(2,2,ao),r}},{key:"mmulStrassen",value:function(n){n=qt.checkMatrix(n);var r=this.clone(),o=r.rows,i=r.columns,a=n.rows,s=n.columns;i!==a&&console.warn("Multiplying ".concat(o," x ").concat(i," and ").concat(a," x ").concat(s," matrix: dimensions do not match."));function u(d,h,v){var m=d.rows,g=d.columns;if(m===h&&g===v)return d;var E=e.zeros(h,v);return E=E.setSubMatrix(d,0,0),E}var c=Math.max(o,a),f=Math.max(i,s);r=u(r,c,f),n=u(n,c,f);function l(d,h,v,m){if(v<=512||m<=512)return d.mmul(h);v%2===1&&m%2===1?(d=u(d,v+1,m+1),h=u(h,v+1,m+1)):v%2===1?(d=u(d,v+1,m),h=u(h,v+1,m)):m%2===1&&(d=u(d,v,m+1),h=u(h,v,m+1));var g=parseInt(d.rows/2,10),E=parseInt(d.columns/2,10),y=d.subMatrix(0,g-1,0,E-1),b=h.subMatrix(0,g-1,0,E-1),w=d.subMatrix(0,g-1,E,d.columns-1),I=h.subMatrix(0,g-1,E,h.columns-1),X=d.subMatrix(g,d.rows-1,0,E-1),ge=h.subMatrix(g,h.rows-1,0,E-1),re=d.subMatrix(g,d.rows-1,E,d.columns-1),Q=h.subMatrix(g,h.rows-1,E,h.columns-1),ee=l(e.add(y,re),e.add(b,Q),g,E),be=l(e.add(X,re),b,g,E),k=l(y,e.sub(I,Q),g,E),xe=l(re,e.sub(ge,b),g,E),Ve=l(e.add(y,w),Q,g,E),qe=l(e.sub(X,y),e.add(b,I),g,E),Ut=l(e.sub(w,re),e.add(ge,Q),g,E),ut=e.add(ee,xe);ut.sub(Ve),ut.add(Ut);var Xt=e.add(k,Ve),Ot=e.add(be,xe),gn=e.sub(ee,be);gn.add(k),gn.add(qe);var Vn=e.zeros(2*ut.rows,2*ut.columns);return Vn=Vn.setSubMatrix(ut,0,0),Vn=Vn.setSubMatrix(Xt,ut.rows,0),Vn=Vn.setSubMatrix(Ot,0,ut.columns),Vn=Vn.setSubMatrix(gn,ut.rows,ut.columns),Vn.subMatrix(0,v-1,0,m-1)}return l(r,n,c,f)}},{key:"scaleRows",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ge()(n)!=="object")throw new TypeError("options must be an object");var r=n.min,o=r===void 0?0:r,i=n.max,a=i===void 0?1:i;if(!Number.isFinite(o))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(o>=a)throw new RangeError("min must be smaller than max");for(var s=new qt(this.rows,this.columns),u=0;u<this.rows;u++){var c=this.getRow(u);c.length>0&&dp(c,{min:o,max:a,output:c}),s.setRow(u,c)}return s}},{key:"scaleColumns",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ge()(n)!=="object")throw new TypeError("options must be an object");var r=n.min,o=r===void 0?0:r,i=n.max,a=i===void 0?1:i;if(!Number.isFinite(o))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(o>=a)throw new RangeError("min must be smaller than max");for(var s=new qt(this.rows,this.columns),u=0;u<this.columns;u++){var c=this.getColumn(u);c.length&&dp(c,{min:o,max:a,output:c}),s.setColumn(u,c)}return s}},{key:"flipRows",value:function(){for(var n=Math.ceil(this.columns/2),r=0;r<this.rows;r++)for(var o=0;o<n;o++){var i=this.get(r,o),a=this.get(r,this.columns-1-o);this.set(r,o,a),this.set(r,this.columns-1-o,i)}return this}},{key:"flipColumns",value:function(){for(var n=Math.ceil(this.rows/2),r=0;r<this.columns;r++)for(var o=0;o<n;o++){var i=this.get(o,r),a=this.get(this.rows-1-o,r);this.set(o,r,a),this.set(this.rows-1-o,r,i)}return this}},{key:"kroneckerProduct",value:function(n){n=qt.checkMatrix(n);for(var r=this.rows,o=this.columns,i=n.rows,a=n.columns,s=new qt(r*i,o*a),u=0;u<r;u++)for(var c=0;c<o;c++)for(var f=0;f<i;f++)for(var l=0;l<a;l++)s.set(i*u+f,a*c+l,this.get(u,c)*n.get(f,l));return s}},{key:"kroneckerSum",value:function(n){if(n=qt.checkMatrix(n),!this.isSquare()||!n.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var r=this.rows,o=n.rows,i=this.kroneckerProduct(qt.eye(o,o)),a=qt.eye(r,r).kroneckerProduct(n);return i.add(a)}},{key:"transpose",value:function(){for(var n=new qt(this.columns,this.rows),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.set(o,r,this.get(r,o));return n}},{key:"sortRows",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gp,r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(n));return this}},{key:"sortColumns",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gp,r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(n));return this}},{key:"subMatrix",value:function(n,r,o,i){mp(this,n,r,o,i);for(var a=new qt(r-n+1,i-o+1),s=n;s<=r;s++)for(var u=o;u<=i;u++)a.set(s-n,u-o,this.get(s,u));return a}},{key:"subMatrixRow",value:function(n,r,o){if(r===void 0&&(r=0),o===void 0&&(o=this.columns-1),r>o||r<0||r>=this.columns||o<0||o>=this.columns)throw new RangeError("Argument out of range");for(var i=new qt(n.length,o-r+1),a=0;a<n.length;a++)for(var s=r;s<=o;s++){if(n[a]<0||n[a]>=this.rows)throw new RangeError("Row index out of range: ".concat(n[a]));i.set(a,s-r,this.get(n[a],s))}return i}},{key:"subMatrixColumn",value:function(n,r,o){if(r===void 0&&(r=0),o===void 0&&(o=this.rows-1),r>o||r<0||r>=this.rows||o<0||o>=this.rows)throw new RangeError("Argument out of range");for(var i=new qt(o-r+1,n.length),a=0;a<n.length;a++)for(var s=r;s<=o;s++){if(n[a]<0||n[a]>=this.columns)throw new RangeError("Column index out of range: ".concat(n[a]));i.set(s-r,a,this.get(s,n[a]))}return i}},{key:"setSubMatrix",value:function(n,r,o){if(n=qt.checkMatrix(n),n.isEmpty())return this;var i=r+n.rows-1,a=o+n.columns-1;mp(this,r,i,o,a);for(var s=0;s<n.rows;s++)for(var u=0;u<n.columns;u++)this.set(r+s,o+u,n.get(s,u));return this}},{key:"selection",value:function(n,r){Ay(this,n),Ry(this,r);for(var o=new qt(n.length,r.length),i=0;i<n.length;i++)for(var a=n[i],s=0;s<r.length;s++){var u=r[s];o.set(i,s,this.get(a,u))}return o}},{key:"trace",value:function(){for(var n=Math.min(this.rows,this.columns),r=0,o=0;o<n;o++)r+=this.get(o,o);return r}},{key:"clone",value:function(){for(var n=new qt(this.rows,this.columns),r=0;r<this.rows;r++)for(var o=0;o<this.columns;o++)n.set(r,o,this.get(r,o));return n}},{key:"sum",value:function(n){switch(n){case"row":return Cy(this);case"column":return Dy(this);case void 0:return Oy(this);default:throw new Error("invalid option: ".concat(n))}}},{key:"product",value:function(n){switch(n){case"row":return Ly(this);case"column":return My(this);case void 0:return ky(this);default:throw new Error("invalid option: ".concat(n))}}},{key:"mean",value:function(n){var r=this.sum(n);switch(n){case"row":{for(var o=0;o<this.rows;o++)r[o]/=this.columns;return r}case"column":{for(var i=0;i<this.columns;i++)r[i]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error("invalid option: ".concat(n))}}},{key:"variance",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ge()(n)==="object"&&(r=n,n=void 0),Ge()(r)!=="object")throw new TypeError("options must be an object");var o=r,i=o.unbiased,a=i===void 0?!0:i,s=o.mean,u=s===void 0?this.mean(n):s;if(typeof a!="boolean")throw new TypeError("unbiased must be a boolean");switch(n){case"row":{if(!ri(u))throw new TypeError("mean must be an array");return Gy(this,a,u)}case"column":{if(!ri(u))throw new TypeError("mean must be an array");return Py(this,a,u)}case void 0:{if(typeof u!="number")throw new TypeError("mean must be a number");return Fy(this,a,u)}default:throw new Error("invalid option: ".concat(n))}}},{key:"standardDeviation",value:function(n,r){Ge()(n)==="object"&&(r=n,n=void 0);var o=this.variance(n,r);if(n===void 0)return Math.sqrt(o);for(var i=0;i<o.length;i++)o[i]=Math.sqrt(o[i]);return o}},{key:"center",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ge()(n)==="object"&&(r=n,n=void 0),Ge()(r)!=="object")throw new TypeError("options must be an object");var o=r,i=o.center,a=i===void 0?this.mean(n):i;switch(n){case"row":{if(!ri(a))throw new TypeError("center must be an array");return zy(this,a),this}case"column":{if(!ri(a))throw new TypeError("center must be an array");return By(this,a),this}case void 0:{if(typeof a!="number")throw new TypeError("center must be a number");return Uy(this,a),this}default:throw new Error("invalid option: ".concat(n))}}},{key:"scale",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ge()(n)==="object"&&(r=n,n=void 0),Ge()(r)!=="object")throw new TypeError("options must be an object");var o=r.scale;switch(n){case"row":{if(o===void 0)o=$y(this);else if(!ri(o))throw new TypeError("scale must be an array");return Vy(this,o),this}case"column":{if(o===void 0)o=Wy(this);else if(!ri(o))throw new TypeError("scale must be an array");return Xy(this,o),this}case void 0:{if(o===void 0)o=Hy(this);else if(typeof o!="number")throw new TypeError("scale must be a number");return Zy(this,o),this}default:throw new Error("invalid option: ".concat(n))}}},{key:"toString",value:function(n){return vp(this,n)}}],[{key:"from1DArray",value:function(n,r,o){var i=n*r;if(i!==o.length)throw new RangeError("data length does not match given dimensions");for(var a=new qt(n,r),s=0;s<n;s++)for(var u=0;u<r;u++)a.set(s,u,o[s*r+u]);return a}},{key:"rowVector",value:function(n){for(var r=new qt(1,n.length),o=0;o<n.length;o++)r.set(0,o,n[o]);return r}},{key:"columnVector",value:function(n){for(var r=new qt(n.length,1),o=0;o<n.length;o++)r.set(o,0,n[o]);return r}},{key:"zeros",value:function(n,r){return new qt(n,r)}},{key:"ones",value:function(n,r){return new qt(n,r).fill(1)}},{key:"rand",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ge()(o)!=="object")throw new TypeError("options must be an object");for(var i=o.random,a=i===void 0?Math.random:i,s=new qt(n,r),u=0;u<n;u++)for(var c=0;c<r;c++)s.set(u,c,a());return s}},{key:"randInt",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ge()(o)!=="object")throw new TypeError("options must be an object");var i=o.min,a=i===void 0?0:i,s=o.max,u=s===void 0?1e3:s,c=o.random,f=c===void 0?Math.random:c;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(a>=u)throw new RangeError("min must be smaller than max");for(var l=u-a,d=new qt(n,r),h=0;h<n;h++)for(var v=0;v<r;v++){var m=a+Math.round(f()*l);d.set(h,v,m)}return d}},{key:"eye",value:function(n,r,o){r===void 0&&(r=n),o===void 0&&(o=1);for(var i=Math.min(n,r),a=this.zeros(n,r),s=0;s<i;s++)a.set(s,s,o);return a}},{key:"diag",value:function(n,r,o){var i=n.length;r===void 0&&(r=i),o===void 0&&(o=r);for(var a=Math.min(i,r,o),s=this.zeros(r,o),u=0;u<a;u++)s.set(u,u,n[u]);return s}},{key:"min",value:function(n,r){n=this.checkMatrix(n),r=this.checkMatrix(r);for(var o=n.rows,i=n.columns,a=new qt(o,i),s=0;s<o;s++)for(var u=0;u<i;u++)a.set(s,u,Math.min(n.get(s,u),r.get(s,u)));return a}},{key:"max",value:function(n,r){n=this.checkMatrix(n),r=this.checkMatrix(r);for(var o=n.rows,i=n.columns,a=new this(o,i),s=0;s<o;s++)for(var u=0;u<i;u++)a.set(s,u,Math.max(n.get(s,u),r.get(s,u)));return a}},{key:"checkMatrix",value:function(n){return e.isMatrix(n)?n:new qt(n)}},{key:"isMatrix",value:function(n){return n!=null&&n.klass==="Matrix"}}]),e}();ho.prototype.klass="Matrix",typeof Symbol!="undefined"&&(ho.prototype[Symbol.for("nodejs.util.inspect.custom")]=Sy);function gp(e,t){return e-t}function jy(e){return e.every(function(t){return typeof t=="number"})}ho.random=ho.rand,ho.randomInt=ho.randInt,ho.diagonal=ho.diag,ho.prototype.diagonal=ho.prototype.diag,ho.identity=ho.eye,ho.prototype.negate=ho.prototype.neg,ho.prototype.tensorProduct=ho.prototype.kroneckerProduct;var qt=function(e){fp()(n,e);var t=lp()(n);function n(r,o){var i;if(wl()(this,n),i=t.call(this),n.isMatrix(r))return my()(i,r.clone());if(Number.isInteger(r)&&r>=0)if(i.data=[],Number.isInteger(o)&&o>=0)for(var a=0;a<r;a++)i.data.push(new Float64Array(o));else throw new TypeError("nColumns must be a positive integer");else if(ri(r)){var s=r;if(r=s.length,o=r?s[0].length:0,typeof o!="number")throw new TypeError("Data must be a 2D array with at least one element");i.data=[];for(var u=0;u<r;u++){if(s[u].length!==o)throw new RangeError("Inconsistent array dimensions");if(!jy(s[u]))throw new TypeError("Input data contains non-numeric values");i.data.push(Float64Array.from(s[u]))}}else throw new TypeError("First argument must be a positive number or an array");return i.rows=r,i.columns=o,i}return _l()(n,[{key:"set",value:function(o,i,a){return this.data[o][i]=a,this}},{key:"get",value:function(o,i){return this.data[o][i]}},{key:"removeRow",value:function(o){return Pi(this,o),this.data.splice(o,1),this.rows-=1,this}},{key:"addRow",value:function(o,i){return i===void 0&&(i=o,o=this.rows),Pi(this,o,!0),i=Float64Array.from(_u(this,i)),this.data.splice(o,0,i),this.rows+=1,this}},{key:"removeColumn",value:function(o){Fi(this,o);for(var i=0;i<this.rows;i++){for(var a=new Float64Array(this.columns-1),s=0;s<o;s++)a[s]=this.data[i][s];for(var u=o+1;u<this.columns;u++)a[u-1]=this.data[i][u];this.data[i]=a}return this.columns-=1,this}},{key:"addColumn",value:function(o,i){typeof i=="undefined"&&(i=o,o=this.columns),Fi(this,o,!0),i=Su(this,i);for(var a=0;a<this.rows;a++){for(var s=new Float64Array(this.columns+1),u=0;u<o;u++)s[u]=this.data[a][u];for(s[u++]=i[a];u<this.columns+1;u++)s[u]=this.data[a][u-1];this.data[a]=s}return this.columns+=1,this}}]),n}(ho);Ny(ho,qt);var Yy=function(e){fp()(n,e);var t=lp()(n);function n(r){var o;return wl()(this,n),o=t.call(this),o.data=r,o.rows=r.length,o.columns=r[0].length,o}return _l()(n,[{key:"set",value:function(o,i,a){return this.data[o][i]=a,this}},{key:"get",value:function(o,i){return this.data[o][i]}}]),n}(ho);function Iu(e,t){var n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):t!==0?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}var yp=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(wl()(this,e),t=Yy.checkMatrix(t),t.isEmpty())throw new Error("Matrix must be non-empty");var r=t.rows,o=t.columns,i=n.computeLeftSingularVectors,a=i===void 0?!0:i,s=n.computeRightSingularVectors,u=s===void 0?!0:s,c=n.autoTranspose,f=c===void 0?!1:c,l=!!a,d=!!u,h=!1,v;if(r<o)if(!f)v=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{v=t.transpose(),r=v.rows,o=v.columns,h=!0;var m=l;l=d,d=m}else v=t.clone();for(var g=Math.min(r,o),E=Math.min(r+1,o),y=new Float64Array(E),b=new qt(r,g),w=new qt(o,o),I=new Float64Array(o),X=new Float64Array(r),ge=new Float64Array(E),re=0;re<E;re++)ge[re]=re;for(var Q=Math.min(r-1,o),ee=Math.max(0,Math.min(o-2,r)),be=Math.max(Q,ee),k=0;k<be;k++){if(k<Q){y[k]=0;for(var xe=k;xe<r;xe++)y[k]=Iu(y[k],v.get(xe,k));if(y[k]!==0){v.get(k,k)<0&&(y[k]=-y[k]);for(var Ve=k;Ve<r;Ve++)v.set(Ve,k,v.get(Ve,k)/y[k]);v.set(k,k,v.get(k,k)+1)}y[k]=-y[k]}for(var qe=k+1;qe<o;qe++){if(k<Q&&y[k]!==0){for(var Ut=0,ut=k;ut<r;ut++)Ut+=v.get(ut,k)*v.get(ut,qe);Ut=-Ut/v.get(k,k);for(var Xt=k;Xt<r;Xt++)v.set(Xt,qe,v.get(Xt,qe)+Ut*v.get(Xt,k))}I[qe]=v.get(k,qe)}if(l&&k<Q)for(var Ot=k;Ot<r;Ot++)b.set(Ot,k,v.get(Ot,k));if(k<ee){I[k]=0;for(var gn=k+1;gn<o;gn++)I[k]=Iu(I[k],I[gn]);if(I[k]!==0){I[k+1]<0&&(I[k]=0-I[k]);for(var Vn=k+1;Vn<o;Vn++)I[Vn]/=I[k];I[k+1]+=1}if(I[k]=-I[k],k+1<r&&I[k]!==0){for(var Cr=k+1;Cr<r;Cr++)X[Cr]=0;for(var Fr=k+1;Fr<r;Fr++)for(var nt=k+1;nt<o;nt++)X[Fr]+=I[nt]*v.get(Fr,nt);for(var zn=k+1;zn<o;zn++)for(var Zr=-I[zn]/I[k+1],Kn=k+1;Kn<r;Kn++)v.set(Kn,zn,v.get(Kn,zn)+Zr*X[Kn])}if(d)for(var yr=k+1;yr<o;yr++)w.set(yr,k,I[yr])}}var Je=Math.min(o,r+1);if(Q<o&&(y[Q]=v.get(Q,Q)),r<Je&&(y[Je-1]=0),ee+1<Je&&(I[ee]=v.get(ee,Je-1)),I[Je-1]=0,l){for(var Rt=Q;Rt<g;Rt++){for(var fr=0;fr<r;fr++)b.set(fr,Rt,0);b.set(Rt,Rt,1)}for(var yn=Q-1;yn>=0;yn--)if(y[yn]!==0){for(var Sr=yn+1;Sr<g;Sr++){for(var Wn=0,lr=yn;lr<r;lr++)Wn+=b.get(lr,yn)*b.get(lr,Sr);Wn=-Wn/b.get(yn,yn);for(var vo=yn;vo<r;vo++)b.set(vo,Sr,b.get(vo,Sr)+Wn*b.get(vo,yn))}for(var ao=yn;ao<r;ao++)b.set(ao,yn,-b.get(ao,yn));b.set(yn,yn,1+b.get(yn,yn));for(var Io=0;Io<yn-1;Io++)b.set(Io,yn,0)}else{for(var Uc=0;Uc<r;Uc++)b.set(Uc,yn,0);b.set(yn,yn,1)}}if(d)for(var No=o-1;No>=0;No--){if(No<ee&&I[No]!==0)for(var Ls=No+1;Ls<o;Ls++){for(var Ms=0,Lu=No+1;Lu<o;Lu++)Ms+=w.get(Lu,No)*w.get(Lu,Ls);Ms=-Ms/w.get(No+1,No);for(var ja=No+1;ja<o;ja++)w.set(ja,Ls,w.get(ja,Ls)+Ms*w.get(ja,No))}for(var mh=0;mh<o;mh++)w.set(mh,No,0);w.set(No,No,1)}for(var Wp=Je-1,gh=0,Xp=Number.EPSILON;Je>0;){var $t=void 0,$c=void 0;for($t=Je-2;$t>=-1&&$t!==-1;$t--){var pb=Number.MIN_VALUE+Xp*Math.abs(y[$t]+Math.abs(y[$t+1]));if(Math.abs(I[$t])<=pb||Number.isNaN(I[$t])){I[$t]=0;break}}if($t===Je-2)$c=4;else{var oi=void 0;for(oi=Je-1;oi>=$t&&oi!==$t;oi--){var mb=(oi!==Je?Math.abs(I[oi]):0)+(oi!==$t+1?Math.abs(I[oi-1]):0);if(Math.abs(y[oi])<=Xp*mb){y[oi]=0;break}}oi===$t?$c=3:oi===Je-1?$c=1:($c=2,$t=oi)}switch($t++,$c){case 1:{var yh=I[Je-2];I[Je-2]=0;for(var wi=Je-2;wi>=$t;wi--){var Vc=Iu(y[wi],yh),Eh=y[wi]/Vc,bh=yh/Vc;if(y[wi]=Vc,wi!==$t&&(yh=-bh*I[wi-1],I[wi-1]=Eh*I[wi-1]),d)for(var Ya=0;Ya<o;Ya++)Vc=Eh*w.get(Ya,wi)+bh*w.get(Ya,Je-1),w.set(Ya,Je-1,-bh*w.get(Ya,wi)+Eh*w.get(Ya,Je-1)),w.set(Ya,wi,Vc)}break}case 2:{var xh=I[$t-1];I[$t-1]=0;for(var Ui=$t;Ui<Je;Ui++){var Wc=Iu(y[Ui],xh),wh=y[Ui]/Wc,_h=xh/Wc;if(y[Ui]=Wc,xh=-_h*I[Ui],I[Ui]=wh*I[Ui],l)for(var Ka=0;Ka<r;Ka++)Wc=wh*b.get(Ka,Ui)+_h*b.get(Ka,$t-1),b.set(Ka,$t-1,-_h*b.get(Ka,Ui)+wh*b.get(Ka,$t-1)),b.set(Ka,Ui,Wc)}break}case 3:{var Xc=Math.max(Math.abs(y[Je-1]),Math.abs(y[Je-2]),Math.abs(I[Je-2]),Math.abs(y[$t]),Math.abs(I[$t])),Mu=y[Je-1]/Xc,Hp=y[Je-2]/Xc,Gl=I[Je-2]/Xc,Sh=y[$t]/Xc,gb=I[$t]/Xc,ks=((Hp+Mu)*(Hp-Mu)+Gl*Gl)/2,Pl=Mu*Gl*(Mu*Gl),Hc=0;(ks!==0||Pl!==0)&&(ks<0?Hc=0-Math.sqrt(ks*ks+Pl):Hc=Math.sqrt(ks*ks+Pl),Hc=Pl/(ks+Hc));for(var Gs=(Sh+Mu)*(Sh-Mu)+Hc,ku=Sh*gb,Hn=$t;Hn<Je-1;Hn++){var Wo=Iu(Gs,ku);Wo===0&&(Wo=Number.MIN_VALUE);var $i=Gs/Wo,Vi=ku/Wo;if(Hn!==$t&&(I[Hn-1]=Wo),Gs=$i*y[Hn]+Vi*I[Hn],I[Hn]=$i*I[Hn]-Vi*y[Hn],ku=Vi*y[Hn+1],y[Hn+1]=$i*y[Hn+1],d)for(var Qa=0;Qa<o;Qa++)Wo=$i*w.get(Qa,Hn)+Vi*w.get(Qa,Hn+1),w.set(Qa,Hn+1,-Vi*w.get(Qa,Hn)+$i*w.get(Qa,Hn+1)),w.set(Qa,Hn,Wo);if(Wo=Iu(Gs,ku),Wo===0&&(Wo=Number.MIN_VALUE),$i=Gs/Wo,Vi=ku/Wo,y[Hn]=Wo,Gs=$i*I[Hn]+Vi*y[Hn+1],y[Hn+1]=-Vi*I[Hn]+$i*y[Hn+1],ku=Vi*I[Hn+1],I[Hn+1]=$i*I[Hn+1],l&&Hn<r-1)for(var qa=0;qa<r;qa++)Wo=$i*b.get(qa,Hn)+Vi*b.get(qa,Hn+1),b.set(qa,Hn+1,-Vi*b.get(qa,Hn)+$i*b.get(qa,Hn+1)),b.set(qa,Hn,Wo)}I[Je-2]=Gs,gh=gh+1;break}case 4:{if(y[$t]<=0&&(y[$t]=y[$t]<0?-y[$t]:0,d))for(var Fl=0;Fl<=Wp;Fl++)w.set(Fl,$t,-w.get(Fl,$t));for(;$t<Wp&&!(y[$t]>=y[$t+1]);){var Zc=y[$t];if(y[$t]=y[$t+1],y[$t+1]=Zc,d&&$t<o-1)for(var Gu=0;Gu<o;Gu++)Zc=w.get(Gu,$t+1),w.set(Gu,$t+1,w.get(Gu,$t)),w.set(Gu,$t,Zc);if(l&&$t<r-1)for(var Pu=0;Pu<r;Pu++)Zc=b.get(Pu,$t+1),b.set(Pu,$t+1,b.get(Pu,$t)),b.set(Pu,$t,Zc);$t++}gh=0,Je--;break}}}if(h){var yb=w;w=b,b=yb}this.m=r,this.n=o,this.s=y,this.U=b,this.V=w}return _l()(e,[{key:"solve",value:function(n){for(var r=n,o=this.threshold,i=this.s.length,a=qt.zeros(i,i),s=0;s<i;s++)Math.abs(this.s[s])<=o?a.set(s,s,0):a.set(s,s,1/this.s[s]);for(var u=this.U,c=this.rightSingularVectors,f=c.mmul(a),l=c.rows,d=u.rows,h=qt.zeros(l,d),v=0;v<l;v++)for(var m=0;m<d;m++){for(var g=0,E=0;E<i;E++)g+=f.get(v,E)*u.get(m,E);h.set(v,m,g)}return h.mmul(r)}},{key:"solveForDiagonal",value:function(n){return this.solve(qt.diag(n))}},{key:"inverse",value:function(){for(var n=this.V,r=this.threshold,o=n.rows,i=n.columns,a=new qt(o,this.s.length),s=0;s<o;s++)for(var u=0;u<i;u++)Math.abs(this.s[u])>r&&a.set(s,u,n.get(s,u)/this.s[u]);for(var c=this.U,f=c.rows,l=c.columns,d=new qt(o,f),h=0;h<o;h++)for(var v=0;v<f;v++){for(var m=0,g=0;g<l;g++)m+=a.get(h,g)*c.get(v,g);d.set(h,v,m)}return d}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var n=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,o=this.s,i=0,a=o.length;i<a;i++)o[i]>n&&r++;return r}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return qt.diag(this.s)}}]),e}();class Ky{constructor(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}layout(){const t=this,{dimension:n,distances:r,linkDistance:o}=t;try{const i=qt.mul(qt.pow(r,2),-.5),a=i.mean("row"),s=i.mean("column"),u=i.mean();i.add(u).subRowVector(a).subColumnVector(s);const c=new yp(i),f=qt.sqrt(c.diagonalMatrix).diagonal();return c.leftSingularVectors.toJSON().map(l=>qt.mul([l],[f]).toJSON()[0].splice(0,n))}catch(i){const a=[];for(let s=0;s<r.length;s++){const u=Math.random()*o,c=Math.random()*o;a.push([u,c])}return a}}}const Qy=800;class qy{constructor(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}layout(){const t=this,n=t.positions,r=[],o=t.iterations,i=t.width/10;t.maxDisplace=i,t.disp=r;for(let a=0;a<o;a++)n.forEach((s,u)=>{r[u]={x:0,y:0}}),t.getRepulsion(),t.updatePositions();return n}getRepulsion(){const t=this,n=t.positions,r=t.nodes,o=t.disp,i=t.k,a=t.radii||[];n.forEach((s,u)=>{o[u]={x:0,y:0},n.forEach((c,f)=>{if(u===f||a[u]!==a[f])return;let l=s[0]-c[0],d=s[1]-c[1],h=Math.sqrt(l*l+d*d);if(h===0){h=1;const v=u>f?1:-1;l=.01*v,d=.01*v}if(h<t.nodeSizeFunc(r[u])/2+t.nodeSizeFunc(r[f])/2){const v=i*i/h;o[u].x+=l/h*v,o[u].y+=d/h*v}})})}updatePositions(){const t=this,n=t.positions,r=t.disp,o=t.speed,i=t.strictRadial,a=t.focusID,s=t.maxDisplace||t.width/10;i&&r.forEach((c,f)=>{const l=n[f][0]-n[a][0],d=n[f][1]-n[a][1],h=Math.sqrt(l*l+d*d);let v=d/h,m=-l/h;const g=Math.sqrt(c.x*c.x+c.y*c.y);let E=Math.acos((v*c.x+m*c.y)/g);E>Math.PI/2&&(E-=Math.PI/2,v*=-1,m*=-1);const y=Math.cos(E)*g;c.x=v*y,c.y=m*y});const u=t.radii;n.forEach((c,f)=>{if(f===a)return;const l=Math.sqrt(r[f].x*r[f].x+r[f].y*r[f].y);if(l>0&&f!==a){const d=Math.min(s*(o/Qy),l);if(c[0]+=r[f].x/l*d,c[1]+=r[f].y/l*d,i){let h=c[0]-n[a][0],v=c[1]-n[a][1];const m=Math.sqrt(h*h+v*v);h=h/m*u[f],v=v/m*u[f],c[0]=n[a][0]+h,c[1]=n[a][1]+v}}})}}function Jy(e){const t=e.length,n=e[0].length,r=[];for(let o=0;o<t;o++){const i=[];for(let a=0;a<n;a++)e[o][a]!==0?i.push(1/(e[o][a]*e[o][a])):i.push(0);r.push(i)}return r}function eE(e,t){let n=-1;return e.forEach((r,o)=>{r.id===t&&(n=o)}),n}function Ep(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}class tE extends ve{constructor(t){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const t=this,n=t.nodes,r=t.edges||[];if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const o=t.center;if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i=t.linkDistance;let a=null;if(an(t.focusNode)){let be=!1;for(let k=0;k<n.length;k++)n[k].id===t.focusNode&&(a=n[k],t.focusNode=a,be=!0,k=n.length);be||(a=null)}else a=t.focusNode;a||(a=n[0],t.focusNode=a);let s=eE(n,a.id);s<0&&(s=0),t.focusIndex=s;const u=pt({nodes:n,edges:r},!1),c=Et(u),f=t.maxToFocus(c,s);t.handleInfinity(c,s,f+1),t.distances=c;const l=c[s],d=t.width||500,h=t.height||500;let v=d-o[0]>o[0]?o[0]:d-o[0],m=h-o[1]>o[1]?o[1]:h-o[1];v===0&&(v=d/2),m===0&&(m=h/2);const g=m>v?v:m,E=Math.max(...l),y=[];l.forEach((be,k)=>{t.unitRadius||(t.unitRadius=g/E),y[k]=be*t.unitRadius}),t.radii=y;const b=t.eIdealDisMatrix();t.eIdealDistances=b;const w=Jy(b);t.weights=w;let X=new Ky({linkDistance:i,distances:b}).layout();X.forEach(be=>{vn(be[0])&&(be[0]=Math.random()*i),vn(be[1])&&(be[1]=Math.random()*i)}),t.positions=X,X.forEach((be,k)=>{n[k].x=be[0]+o[0],n[k].y=be[1]+o[1]}),X.forEach(be=>{be[0]-=X[s][0],be[1]-=X[s][1]}),t.run();const ge=t.preventOverlap,re=t.nodeSize;let Q;const ee=t.strictRadial;if(ge){const be=t.nodeSpacing;let k;ye(be)?k=()=>be:lt(be)?k=be:k=()=>0,re?Tt(re)?Q=qe=>(re[0]>re[1]?re[0]:re[1])+k(qe):Q=qe=>re+k(qe):Q=qe=>qe.size?Tt(qe.size)?(qe.size[0]>qe.size[1]?qe.size[0]:qe.size[1])+k(qe):xt(qe.size)?(qe.size.width>qe.size.height?qe.size.width:qe.size.height)+k(qe):qe.size+k(qe):10+k(qe);const xe={nodes:n,nodeSizeFunc:Q,adjMatrix:u,positions:X,radii:y,height:h,width:d,strictRadial:ee,focusID:s,iterations:t.maxPreventOverlapIteration||200,k:X.length/4.5};X=new qy(xe).layout()}return X.forEach((be,k)=>{n[k].x=be[0]+o[0],n[k].y=be[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}run(){const t=this,n=t.maxIteration,r=t.positions||[],o=t.weights||[],i=t.eIdealDistances||[],a=t.radii||[];for(let s=0;s<=n;s++){const u=s/n;t.oneIteration(u,r,a,i,o)}}oneIteration(t,n,r,o,i){const a=this,s=1-t,u=a.focusIndex;n.forEach((c,f)=>{const l=Ep(c,[0,0]),d=l===0?0:1/l;if(f===u)return;let h=0,v=0,m=0;n.forEach((E,y)=>{if(f===y)return;const b=Ep(c,E),w=b===0?0:1/b,I=o[y][f];m+=i[f][y],h+=i[f][y]*(E[0]+I*(c[0]-E[0])*w),v+=i[f][y]*(E[1]+I*(c[1]-E[1])*w)});const g=r[f]===0?0:1/r[f];m*=s,m+=t*g*g,h*=s,h+=t*g*c[0]*d,c[0]=h/m,v*=s,v+=t*g*c[1]*d,c[1]=v/m})}eIdealDisMatrix(){const t=this,n=t.nodes;if(!n)return[];const r=t.distances,o=t.linkDistance,i=t.radii||[],a=t.unitRadius||50,s=[];return r&&r.forEach((u,c)=>{const f=[];u.forEach((l,d)=>{if(c===d)f.push(0);else if(i[c]===i[d])if(t.sortBy==="data")f.push(l*(Math.abs(c-d)*t.sortStrength)/(i[c]/a));else if(t.sortBy){let h=n[c][t.sortBy]||0,v=n[d][t.sortBy]||0;an(h)&&(h=h.charCodeAt(0)),an(v)&&(v=v.charCodeAt(0)),f.push(l*(Math.abs(h-v)*t.sortStrength)/(i[c]/a))}else f.push(l*o/(i[c]/a));else{const h=(o+a)/2;f.push(l*h)}}),s.push(f)}),s}handleInfinity(t,n,r){const o=t.length;for(let i=0;i<o;i++)if(t[n][i]===1/0){t[n][i]=r,t[i][n]=r;for(let a=0;a<o;a++)t[i][a]!==1/0&&t[n][a]===1/0&&(t[n][a]=r+t[i][a],t[a][n]=r+t[i][a])}for(let i=0;i<o;i++)if(i!==n){for(let a=0;a<o;a++)if(t[i][a]===1/0){let s=Math.abs(t[n][i]-t[n][a]);s=s===0?1:s,t[i][a]=s}}}maxToFocus(t,n){let r=0;for(let o=0;o<t[n].length;o++)t[n][o]!==1/0&&(r=t[n][o]>r?t[n][o]:r);return r}getType(){return"radial"}}class bp extends ve{constructor(t){super(),this.nodeSize=30,this.minNodeSpacing=10,this.nodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){var t,n;const r=this,{nodes:o,edges:i}=r,a=o.length;if(a===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(a===1){o[0].x=s[0],o[0].y=s[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const{nodeSize:u,nodeSpacing:c}=r,f=[];let l,d=0;Tt(u)?l=Math.max(u[0],u[1]):l=u,Tt(c)?d=Math.max(c[0],c[1]):ye(c)&&(d=c),o.forEach(b=>{f.push(b);let w=l;Tt(b.size)?w=Math.max(b.size[0],b.size[1]):ye(b.size)?w=b.size:xt(b.size)&&(w=Math.max(b.size.width,b.size.height)),l=Math.max(l,w),lt(c)&&(d=Math.max(c(b),d))}),r.clockwise=r.counterclockwise!==void 0?!r.counterclockwise:r.clockwise;const h={},v={};if(f.forEach((b,w)=>{h[b.id]=b,v[b.id]=w}),(r.sortBy==="degree"||!an(r.sortBy)||f[0][r.sortBy]===void 0)&&(r.sortBy="degree",!ye(o[0].degree))){const b=wt(o.length,v,i);f.forEach((w,I)=>{w.degree=b[I].all})}f.sort((b,w)=>w[r.sortBy]-b[r.sortBy]),r.maxValueNode=f[0],r.maxLevelDiff=r.maxLevelDiff||r.maxValueNode[r.sortBy]/4;const m=[[]];let g=m[0];f.forEach(b=>{if(g.length>0){const w=Math.abs(g[0][r.sortBy]-b[r.sortBy]);r.maxLevelDiff&&w>=r.maxLevelDiff&&(g=[],m.push(g))}g.push(b)});let E=l+(d||r.minNodeSpacing);if(!r.preventOverlap){const b=m.length>0&&m[0].length>1,I=(Math.min(r.width,r.height)/2-E)/(m.length+(b?1:0));E=Math.min(E,I)}let y=0;if(m.forEach(b=>{let w=r.sweep;w===void 0&&(w=2*Math.PI-2*Math.PI/b.length);const I=b.dTheta=w/Math.max(1,b.length-1);if(b.length>1&&r.preventOverlap){const X=Math.cos(I)-Math.cos(0),ge=Math.sin(I)-Math.sin(0),re=Math.sqrt(E*E/(X*X+ge*ge));y=Math.max(re,y)}b.r=y,y+=E}),r.equidistant){let b=0,w=0;for(let I=0;I<m.length;I++){const ge=m[I].r-w;b=Math.max(b,ge)}w=0,m.forEach((I,X)=>{X===0&&(w=I.r),I.r=w,w+=b})}return m.forEach(b=>{const w=b.dTheta,I=b.r;b.forEach((X,ge)=>{const re=r.startAngle+(r.clockwise?1:-1)*w*ge;X.x=s[0]+I*Math.cos(re),X.y=s[1]+I*Math.sin(re)})}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:i}}getType(){return"concentric"}}class xp extends ve{constructor(t){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const t=this,{nodes:n,edges:r=[]}=t,o=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=o[0],n[0].y=o[1],t.onLayoutEnd&&t.onLayoutEnd();return}const i=t.linkDistance,a=pt({nodes:n,edges:r},!1),s=Et(a);t.handleInfinity(s);const u=Ht(s,i);t.scaledDistances=u;const c=t.runMDS();return t.positions=c,c.forEach((f,l)=>{n[l].x=f[0]+o[0],n[l].y=f[1]+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:r}}runMDS(){const t=this,n=2,r=t.scaledDistances,o=qt.mul(qt.pow(r,2),-.5),i=o.mean("row"),a=o.mean("column"),s=o.mean();o.add(s).subRowVector(i).subColumnVector(a);const u=new yp(o),c=qt.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(f=>qt.mul([f],[c]).toJSON()[0].splice(0,n))}handleInfinity(t){let n=-999999;t.forEach(r=>{r.forEach(o=>{o!==1/0&&n<o&&(n=o)})}),t.forEach((r,o)=>{r.forEach((i,a)=>{i===1/0&&(t[o][a]=n)})})}getType(){return"mds"}}const nE=800;class rE extends ve{constructor(t){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.animate=!0,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}}execute(){var t,n;const r=this,o=r.nodes;if(r.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(r.timeInterval),!o||o.length===0){(t=r.onLayoutEnd)===null||t===void 0||t.call(r);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const i=r.center;if(o.length===1){o[0].x=i[0],o[0].y=i[1],(n=r.onLayoutEnd)===null||n===void 0||n.call(r);return}const a={},s={};return o.forEach((u,c)=>{ye(u.x)||(u.x=Math.random()*this.width),ye(u.y)||(u.y=Math.random()*this.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,r.run()}run(){var t;const n=this,r=n.nodes;if(!r)return;const{edges:o,maxIteration:i,workerEnabled:a,clustering:s,animate:u}=n,c={};if(s&&r.forEach(f=>{c[f.cluster]===void 0&&(c[f.cluster]={name:f.cluster,cx:0,cy:0,count:0})}),a||!u){for(let f=0;f<i;f++)n.runOneStep(c);(t=n.onLayoutEnd)===null||t===void 0||t.call(n)}else{if(typeof window=="undefined")return;let f=0;this.timeInterval=window.setInterval(()=>{var l;n.runOneStep(c),f++,f>=i&&((l=n.onLayoutEnd)===null||l===void 0||l.call(n),window.clearInterval(n.timeInterval))},0)}return{nodes:r,edges:o}}runOneStep(t){var n;const r=this,o=r.nodes;if(!o)return;const{edges:i,center:a,gravity:s,speed:u,clustering:c}=r,f=r.height*r.width,l=Math.sqrt(f)/10,d=f/(o.length+1),h=Math.sqrt(d),v=[];if(o.forEach((m,g)=>{v[g]={x:0,y:0}}),r.applyCalculate(o,i,v,h,d),c){for(const g in t)t[g].cx=0,t[g].cy=0,t[g].count=0;o.forEach(g=>{const E=t[g.cluster];ye(g.x)&&(E.cx+=g.x),ye(g.y)&&(E.cy+=g.y),E.count++});for(const g in t)t[g].cx/=t[g].count,t[g].cy/=t[g].count;const m=r.clusterGravity||s;o.forEach((g,E)=>{if(!ye(g.x)||!ye(g.y))return;const y=t[g.cluster],b=Math.sqrt((g.x-y.cx)*(g.x-y.cx)+(g.y-y.cy)*(g.y-y.cy)),w=h*m;v[E].x-=w*(g.x-y.cx)/b,v[E].y-=w*(g.y-y.cy)/b})}o.forEach((m,g)=>{if(!ye(m.x)||!ye(m.y))return;const E=.01*h*s;v[g].x-=E*(m.x-a[0]),v[g].y-=E*(m.y-a[1])}),o.forEach((m,g)=>{if(ye(m.fx)&&ye(m.fy)){m.x=m.fx,m.y=m.fy;return}if(!ye(m.x)||!ye(m.y))return;const E=Math.sqrt(v[g].x*v[g].x+v[g].y*v[g].y);if(E>0){const y=Math.min(l*(u/nE),E);m.x+=v[g].x/E*y,m.y+=v[g].y/E*y}}),(n=r.tick)===null||n===void 0||n.call(r)}applyCalculate(t,n,r,o,i){const a=this;a.calRepulsive(t,r,i),n&&a.calAttractive(n,r,o)}calRepulsive(t,n,r){t.forEach((o,i)=>{n[i]={x:0,y:0},t.forEach((a,s)=>{if(i===s||!ye(o.x)||!ye(a.x)||!ye(o.y)||!ye(a.y))return;let u=o.x-a.x,c=o.y-a.y,f=u*u+c*c;if(f===0){f=1;const d=i>s?1:-1;u=.01*d,c=.01*d}const l=r/f;n[i].x+=u*l,n[i].y+=c*l})})}calAttractive(t,n,r){t.forEach(o=>{const i=ot(o,"source"),a=ot(o,"target");if(!i||!a)return;const s=this.nodeIdxMap[i],u=this.nodeIdxMap[a];if(s===u)return;const c=this.nodeMap[i],f=this.nodeMap[a];if(!ye(f.x)||!ye(c.x)||!ye(f.y)||!ye(c.y))return;const l=f.x-c.x,d=f.y-c.y,h=Math.sqrt(l*l+d*d),v=h*h/r;n[u].x-=l/h*v,n[u].y-=d/h*v,n[s].x+=l/h*v,n[s].y+=d/h*v})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"fruchterman"}}function wp(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){n(c);return}s.done?t(u):Promise.resolve(u).then(r,o)}function Ha(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(u){wp(i,r,o,a,s,"next",u)}function s(u){wp(i,r,o,a,s,"throw",u)}a(void 0)})}}var Ze=B(36458);function zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var oE=B(10859);function _p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,oE.Z)(r.key),r)}}function Bi(e,t,n){return t&&_p(e.prototype,t),n&&_p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var iE=B(73806),Nl=B.n(iE),aE=B(59933),sE=B.n(aE),uE=B(24669),cE=B.n(uE),fE=B(86170),Fo=B.n(fE),Eb=null,lE=1;function Sp(){return lE++}var bb=null,xb=null,Te;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Te||(Te={}));var dE=function(){function e(){zi(this,e),this.config=void 0}return Bi(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(n){this.config=n}}]),e}(),wb=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),kc;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(kc||(kc={}));var Tp;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(Tp||(Tp={}));var Nu;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(Nu||(Nu={}));var Gc;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(Gc||(Gc={}));var hE="__DefineValuePlaceholder__";function vE(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Ip(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Np(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ip(Object(n),!0).forEach(function(r){(0,Ze.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ip(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pE=function(){function e(t,n){zi(this,e),this.engine=t,this.configService=n,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return Bi(e,[{key:"init",value:function(){var n=this.configService.get(),r=n.canvas,o=n.engineOptions;this.initPromise=this.engine.init(Np({canvas:r||vE(),antialiasing:!1},o))}},{key:"setBundle",value:function(n){this.compiledBundle=JSON.parse(JSON.stringify(n))}},{key:"setDispatch",value:function(n){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=n),this}},{key:"setMaxIteration",value:function(n){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=n),this}},{key:"setBinding",value:function(n,r){var o=this;if(typeof n=="string"){var i=sE()(r)||Nl()(r)||cE()(r);if(this.compiledBundle&&this.compiledBundle.context){var a=this.compiledBundle.context.defines.find(function(u){return u.name===n});if(a)return a.value=r,this;var s=this.compiledBundle.context.uniforms.find(function(u){return u.name===n});s&&(i?(s.data=r,s.isReferer=!1,s.storageClass===Nu.Uniform?this.model&&this.model.updateUniform(n,r):this.model&&this.model.updateBuffer(n,r)):(s.isReferer=!0,s.data=r))}}else Object.keys(n).forEach(function(u){o.setBinding(u,n[u])});return this}},{key:"execute",value:function(){var t=Ha(Fo().mark(function r(){var o=this,i,a,s=arguments;return Fo().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){c.next=6;break}return this.compiledBundle.context&&(i>1?this.compiledBundle.context.maxIteration=i:this.compiledBundle.context.maxIteration++),c.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(f){var l=f.isReferer;return l}).forEach(function(f){var l=f.data,d=f.name;o.model.confirmInput(l.model,d)}),a=0;a<i;a++)this.model.run();return this.engine.endFrame(),c.abrupt("return",this);case 12:case"end":return c.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"getOutput",value:function(){var t=Ha(Fo().mark(function r(){return Fo().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",this.model.readData());case 1:case"end":return i.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"compile",value:function(){var t=Ha(Fo().mark(function r(){var o,i,a;return Fo().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initPromise;case 2:return o=Np({},this.compiledBundle.context),i=this.engine.supportWebGPU?this.engine.useWGSL?Gc.WGSL:Gc.GLSL450:Gc.GLSL100,a=this.compiledBundle.shaders[i],o.defines.filter(function(c){return c.runtime}).forEach(function(c){var f="".concat(hE).concat(c.name);a=a.replace(f,"".concat(c.value))}),o.shader=a,o.uniforms.forEach(function(c){if(!c.data&&c.storageClass===Nu.StorageBuffer){var f=1;c.type===kc.FloatArray?f=1:c.type===kc.Vector4FloatArray&&(f=4),c.data=new Float32Array(o.output.length*f).fill(0)}}),this.compiledBundle.context=o,u.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=u.sent;case 12:case"end":return u.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()}]),e}(),mE=B(32101),gE=B.n(mE),yE=function(){function e(t,n){zi(this,e),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,i=n.stride,a=n.normalized,s=n.size,u=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return Bi(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),ya,Pc,Ea,xi,Fc,Za,zc,Al,Ji,Os,To,ea,ta,Rl,EE=(ya={},(0,Ze.Z)(ya,Te.POINTS,"points"),(0,Ze.Z)(ya,Te.LINES,"lines"),(0,Ze.Z)(ya,Te.LINE_LOOP,"line loop"),(0,Ze.Z)(ya,Te.LINE_STRIP,"line strip"),(0,Ze.Z)(ya,Te.TRIANGLES,"triangles"),(0,Ze.Z)(ya,Te.TRIANGLE_FAN,"triangle fan"),(0,Ze.Z)(ya,Te.TRIANGLE_STRIP,"triangle strip"),ya),Ap=(Pc={},(0,Ze.Z)(Pc,Te.STATIC_DRAW,"static"),(0,Ze.Z)(Pc,Te.DYNAMIC_DRAW,"dynamic"),(0,Ze.Z)(Pc,Te.STREAM_DRAW,"stream"),Pc),ch=(Ea={},(0,Ze.Z)(Ea,Te.BYTE,"int8"),(0,Ze.Z)(Ea,Te.UNSIGNED_INT,"int16"),(0,Ze.Z)(Ea,Te.INT,"int32"),(0,Ze.Z)(Ea,Te.UNSIGNED_BYTE,"uint8"),(0,Ze.Z)(Ea,Te.UNSIGNED_SHORT,"uint16"),(0,Ze.Z)(Ea,Te.UNSIGNED_INT,"uint32"),(0,Ze.Z)(Ea,Te.FLOAT,"float"),Ea),bE=(xi={},(0,Ze.Z)(xi,Te.ALPHA,"alpha"),(0,Ze.Z)(xi,Te.LUMINANCE,"luminance"),(0,Ze.Z)(xi,Te.LUMINANCE_ALPHA,"luminance alpha"),(0,Ze.Z)(xi,Te.RGB,"rgb"),(0,Ze.Z)(xi,Te.RGBA,"rgba"),(0,Ze.Z)(xi,Te.RGBA4,"rgba4"),(0,Ze.Z)(xi,Te.RGB5_A1,"rgb5 a1"),(0,Ze.Z)(xi,Te.RGB565,"rgb565"),(0,Ze.Z)(xi,Te.DEPTH_COMPONENT,"depth"),(0,Ze.Z)(xi,Te.DEPTH_STENCIL,"depth stencil"),xi),xE=(Fc={},(0,Ze.Z)(Fc,Te.DONT_CARE,"dont care"),(0,Ze.Z)(Fc,Te.NICEST,"nice"),(0,Ze.Z)(Fc,Te.FASTEST,"fast"),Fc),Rp=(Za={},(0,Ze.Z)(Za,Te.NEAREST,"nearest"),(0,Ze.Z)(Za,Te.LINEAR,"linear"),(0,Ze.Z)(Za,Te.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Ze.Z)(Za,Te.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Ze.Z)(Za,Te.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Ze.Z)(Za,Te.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Za),Cp=(zc={},(0,Ze.Z)(zc,Te.REPEAT,"repeat"),(0,Ze.Z)(zc,Te.CLAMP_TO_EDGE,"clamp"),(0,Ze.Z)(zc,Te.MIRRORED_REPEAT,"mirror"),zc),wE=(Al={},(0,Ze.Z)(Al,Te.NONE,"none"),(0,Ze.Z)(Al,Te.BROWSER_DEFAULT_WEBGL,"browser"),Al),_E=(Ji={},(0,Ze.Z)(Ji,Te.NEVER,"never"),(0,Ze.Z)(Ji,Te.ALWAYS,"always"),(0,Ze.Z)(Ji,Te.LESS,"less"),(0,Ze.Z)(Ji,Te.LEQUAL,"lequal"),(0,Ze.Z)(Ji,Te.GREATER,"greater"),(0,Ze.Z)(Ji,Te.GEQUAL,"gequal"),(0,Ze.Z)(Ji,Te.EQUAL,"equal"),(0,Ze.Z)(Ji,Te.NOTEQUAL,"notequal"),Ji),Dp=(Os={},(0,Ze.Z)(Os,Te.FUNC_ADD,"add"),(0,Ze.Z)(Os,Te.MIN_EXT,"min"),(0,Ze.Z)(Os,Te.MAX_EXT,"max"),(0,Ze.Z)(Os,Te.FUNC_SUBTRACT,"subtract"),(0,Ze.Z)(Os,Te.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Os),Cl=(To={},(0,Ze.Z)(To,Te.ZERO,"zero"),(0,Ze.Z)(To,Te.ONE,"one"),(0,Ze.Z)(To,Te.SRC_COLOR,"src color"),(0,Ze.Z)(To,Te.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Ze.Z)(To,Te.SRC_ALPHA,"src alpha"),(0,Ze.Z)(To,Te.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Ze.Z)(To,Te.DST_COLOR,"dst color"),(0,Ze.Z)(To,Te.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Ze.Z)(To,Te.DST_ALPHA,"dst alpha"),(0,Ze.Z)(To,Te.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Ze.Z)(To,Te.CONSTANT_COLOR,"constant color"),(0,Ze.Z)(To,Te.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Ze.Z)(To,Te.CONSTANT_ALPHA,"constant alpha"),(0,Ze.Z)(To,Te.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Ze.Z)(To,Te.SRC_ALPHA_SATURATE,"src alpha saturate"),To),SE=(ea={},(0,Ze.Z)(ea,Te.NEVER,"never"),(0,Ze.Z)(ea,Te.ALWAYS,"always"),(0,Ze.Z)(ea,Te.LESS,"less"),(0,Ze.Z)(ea,Te.LEQUAL,"lequal"),(0,Ze.Z)(ea,Te.GREATER,"greater"),(0,Ze.Z)(ea,Te.GEQUAL,"gequal"),(0,Ze.Z)(ea,Te.EQUAL,"equal"),(0,Ze.Z)(ea,Te.NOTEQUAL,"notequal"),ea),Au=(ta={},(0,Ze.Z)(ta,Te.ZERO,"zero"),(0,Ze.Z)(ta,Te.KEEP,"keep"),(0,Ze.Z)(ta,Te.REPLACE,"replace"),(0,Ze.Z)(ta,Te.INVERT,"invert"),(0,Ze.Z)(ta,Te.INCR,"increment"),(0,Ze.Z)(ta,Te.DECR,"decrement"),(0,Ze.Z)(ta,Te.INCR_WRAP,"increment wrap"),(0,Ze.Z)(ta,Te.DECR_WRAP,"decrement wrap"),ta),TE=(Rl={},(0,Ze.Z)(Rl,Te.FRONT,"front"),(0,Ze.Z)(Rl,Te.BACK,"back"),Rl),IE=function(){function e(t,n){zi(this,e),this.buffer=void 0;var r=n.data,o=n.usage,i=n.type;this.buffer=t.buffer({data:r,usage:Ap[o||Te.STATIC_DRAW],type:ch[i||Te.UNSIGNED_BYTE]})}return Bi(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(n){var r=n.data,o=n.offset;this.buffer.subdata(r,o)}}]),e}(),NE=B(68193);function AE(e){if(Array.isArray(e))return(0,NE.Z)(e)}function RE(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}var CE=B(37987);function DE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OE(e){return AE(e)||RE(e)||(0,CE.Z)(e)||DE()}function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Lp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Op(Object(n),!0).forEach(function(r){(0,Ze.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var LE=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Mp=0,Dl=!1,ME=function(){function e(t,n){var r=this;zi(this,e),this.reGl=t,this.context=n,this.entity=Sp(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach(function(c){var f=c.name,l=c.type,d=c.data,h=c.isReferer,v=c.storageClass;if(v===Nu.StorageBuffer){if(h)r.textureCache[f]={data:void 0},o["".concat(f,"Size")]=function(){return d.compiledBundle.context.output.textureSize};else{r.textureCache[f]=r.calcDataTexture(f,l,d);var m=r.textureCache[f],g=m.textureWidth,E=m.isOutput;o["".concat(f,"Size")]=[g,g],E&&(r.outputTextureName=f,r.context.needPingpong&&(r.outputTextureName="".concat(f,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(f,l,d)))}o[f]=function(){return Dl&&console.log("[".concat(r.entity,"]: ").concat(f," ").concat(r.textureCache[f].id)),r.textureCache[f].texture}}else if(v===Nu.Uniform){if(d&&(Array.isArray(d)||Nl()(d))&&d.length>16)throw new Error("invalid data type ".concat(l));o[f]=function(){return c.data}}});var i=this.getOuputDataTexture(),a=i.textureWidth,s=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var u={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:o,vert:LE,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(u)}return Bi(e,[{key:"run",value:function(){var n=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){n.computeCommand()}),Dl&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var t=Ha(Fo().mark(function r(){var o=this,i,a,s,u,c,f,l,d;return Fo().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){i=o.reGl.read()}),!i){v.next=6;break}if(a=this.getOuputDataTexture(),s=a.originalDataLength,u=a.elementsPerTexel,c=a.typedArrayConstructor,f=c===void 0?Float32Array:c,l=[],u!==4)for(d=0;d<i.length;d+=4)u===1?l.push(i[d]):u===2?l.push(i[d],i[d+1]):l.push(i[d],i[d+1],i[d+2]);else l=i;return v.abrupt("return",new f(l.slice(0,s)));case 6:return v.abrupt("return",new Float32Array);case 7:case"end":return v.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"confirmInput",value:function(n,r){var o;this.entity===n.entity?(this.dynamicPingpong=!0,o=this):o=n,this.textureCache[r].id=o.getOuputDataTexture().id,this.textureCache[r].texture=o.getOuputDataTexture().texture,Dl&&console.log("[".concat(this.entity,"]: confirm input ").concat(r," from model ").concat(o.entity,", ").concat(o.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=this.context.uniforms.find(function(c){var f=c.name;return f===n});if(i){var a=this.calcDataTexture(n,i.type,r),s=a.texture,u=a.data;this.textureCache[n].data=u,this.textureCache[n].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var n=this.context.output.name;this.textureCache[n].id=this.getOuputDataTexture().id,this.textureCache[n].texture=this.getOuputDataTexture().texture}var r=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=r,Dl&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var n=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=n}},{key:"cloneDataTexture",value:function(n){var r=n.data,o=n.textureWidth;return Lp(Lp({},n),{},{id:Mp++,texture:this.reGl.texture({width:o,height:o,data:r,type:"float"})})}},{key:"calcDataTexture",value:function(n,r,o){var i=1;r===kc.Vector4FloatArray&&(i=4);for(var a=[],s=0;s<o.length;s+=i)i===1?a.push(o[s],0,0,0):i===2?a.push(o[s],o[s+1],0,0):i===3?a.push(o[s],o[s+1],o[s+2],0):i===4&&a.push(o[s],o[s+1],o[s+2],o[s+3]);var u=o.length,c=Math.ceil(u/i),f=Math.ceil(Math.sqrt(c)),l=f*f;c<l&&a.push.apply(a,OE(new Array((l-c)*4).fill(0)));var d=this.reGl.texture({width:f,height:f,data:a,type:"float"});return{id:Mp++,data:a,originalDataLength:u,typedArrayConstructor:Nl()(o)?o.constructor:void 0,textureWidth:f,texture:d,texelCount:c,elementsPerTexel:i,isOutput:n===this.context.output.name}}}]),e}(),kE=function(){function e(t,n){zi(this,e),this.elements=void 0;var r=n.data,o=n.usage,i=n.type,a=n.count;this.elements=t.elements({data:r,usage:Ap[o||Te.STATIC_DRAW],type:ch[i||Te.UNSIGNED_BYTE],count:a})}return Bi(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var r=n.data;this.elements.subdata(r)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}(),GE=function(){function e(t,n){zi(this,e),this.framebuffer=void 0;var r=n.width,o=n.height,i=n.color,a=n.colors,s=n.depth,u=n.stencil,c={width:r,height:o};Array.isArray(a)&&(c.colors=a.map(function(f){return f.get()})),i&&typeof i!="boolean"&&(c.color=i.get()),this.framebuffer=t.framebuffer(c)}return Bi(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var r=n.width,o=n.height;this.framebuffer.resize(r,o)}}]),e}(),PE=B(44794),FE=B(69143),zE=B.n(FE);function fh(e){var t={};return Object.keys(e).forEach(function(n){lh(n,e[n],t,"")}),t}function lh(e,t,n,r){if(t===null||typeof t=="number"||typeof t=="boolean"||Array.isArray(t)&&typeof t[0]=="number"||Nl()(t)||t===""||t.resize!==void 0){n["".concat(r&&r+".").concat(e)]=t;return}zE()(t)&&Object.keys(t).forEach(function(o){lh(o,t[o],n,"".concat(r&&r+".").concat(e))}),Array.isArray(t)&&t.forEach(function(o,i){Object.keys(o).forEach(function(a){lh(a,o[a],n,"".concat(r&&r+".").concat(e,"[").concat(i,"]"))})})}function kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ru(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kp(Object(n),!0).forEach(function(r){(0,Ze.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var BE=function(){function e(t,n){zi(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var r=n.vs,o=n.fs,i=n.defines,a=n.attributes,s=n.uniforms,u=n.primitive,c=n.count,f=n.elements,l=n.depth,d=n.blend,h=n.stencil,v=n.cull,m=n.instances,g=n.scissor,E=n.viewport,y={};s&&(this.uniforms=fh(s),Object.keys(s).forEach(function(X){y[X]=t.prop(X)}));var b={};Object.keys(a).forEach(function(X){b[X]=a[X].get()});var w=i&&this.generateDefines(i)||"",I={attributes:b,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(w,`
`).concat(o),uniforms:y,vert:`
`.concat(w,`
`).concat(r),primitive:EE[u===void 0?Te.TRIANGLES:u]};m&&(I.instances=m),c&&(I.count=c),f&&(I.elements=f.get()),g&&(I.scissor=g),E&&(I.viewport=E),this.initDepthDrawParams({depth:l},I),this.initBlendDrawParams({blend:d},I),this.initStencilDrawParams({stencil:h},I),this.initCullDrawParams({cull:v},I),this.drawCommand=t(I)}return Bi(e,[{key:"addUniforms",value:function(n){this.uniforms=Ru(Ru({},this.uniforms),fh(n))}},{key:"draw",value:function(n){var r=Ru(Ru({},this.uniforms),fh(n.uniforms||{})),o={};Object.keys(r).forEach(function(i){var a=(0,PE.Z)(r[i]);a==="boolean"||a==="number"||Array.isArray(r[i])||r[i].BYTES_PER_ELEMENT?o[i]=r[i]:a==="string"||(o[i]=r[i].get())}),this.drawCommand(o)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(n,r){var o=n.depth;o&&(r.depth={enable:o.enable===void 0?!0:!!o.enable,mask:o.mask===void 0?!0:!!o.mask,func:_E[o.func||Te.LESS],range:o.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,r){var o=n.blend;if(o){var i=o.enable,a=o.func,s=o.equation,u=o.color,c=u===void 0?[0,0,0,0]:u;r.blend={enable:!!i,func:{srcRGB:Cl[a&&a.srcRGB||Te.SRC_ALPHA],srcAlpha:Cl[a&&a.srcAlpha||Te.SRC_ALPHA],dstRGB:Cl[a&&a.dstRGB||Te.ONE_MINUS_SRC_ALPHA],dstAlpha:Cl[a&&a.dstAlpha||Te.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Dp[s&&s.rgb||Te.FUNC_ADD],alpha:Dp[s&&s.alpha||Te.FUNC_ADD]},color:c}}}},{key:"initStencilDrawParams",value:function(n,r){var o=n.stencil;if(o){var i=o.enable,a=o.mask,s=a===void 0?-1:a,u=o.func,c=u===void 0?{cmp:Te.ALWAYS,ref:0,mask:-1}:u,f=o.opFront,l=f===void 0?{fail:Te.KEEP,zfail:Te.KEEP,zpass:Te.KEEP}:f,d=o.opBack,h=d===void 0?{fail:Te.KEEP,zfail:Te.KEEP,zpass:Te.KEEP}:d;r.stencil={enable:!!i,mask:s,func:Ru(Ru({},c),{},{cmp:SE[c.cmp]}),opFront:{fail:Au[l.fail],zfail:Au[l.zfail],zpass:Au[l.zpass]},opBack:{fail:Au[h.fail],zfail:Au[h.zfail],zpass:Au[h.zpass]}}}}},{key:"initCullDrawParams",value:function(n,r){var o=n.cull;if(o){var i=o.enable,a=o.face,s=a===void 0?Te.BACK:a;r.cull={enable:!!i,face:TE[s]}}}},{key:"generateDefines",value:function(n){return Object.keys(n).map(function(r){return"#define ".concat(r," ").concat(Number(n[r]))}).join(`
`)}}]),e}(),UE=function(){function e(t,n){zi(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,i=o===void 0?Te.UNSIGNED_BYTE:o,a=n.width,s=n.height,u=n.flipY,c=u===void 0?!1:u,f=n.format,l=f===void 0?Te.RGBA:f,d=n.mipmap,h=d===void 0?!1:d,v=n.wrapS,m=v===void 0?Te.CLAMP_TO_EDGE:v,g=n.wrapT,E=g===void 0?Te.CLAMP_TO_EDGE:g,y=n.aniso,b=y===void 0?0:y,w=n.alignment,I=w===void 0?1:w,X=n.premultiplyAlpha,ge=X===void 0?!1:X,re=n.mag,Q=re===void 0?Te.NEAREST:re,ee=n.min,be=ee===void 0?Te.NEAREST:ee,k=n.colorSpace,xe=k===void 0?Te.BROWSER_DEFAULT_WEBGL:k;this.width=a,this.height=s;var Ve={width:a,height:s,type:ch[i],format:bE[l],wrapS:Cp[m],wrapT:Cp[E],mag:Rp[Q],min:Rp[be],alignment:I,flipY:c,colorSpace:wE[xe],premultiplyAlpha:ge,aniso:b};r&&(Ve.data=r),typeof h=="number"?Ve.mipmap=xE[h]:typeof h=="boolean"&&(Ve.mipmap=h),this.texture=t.texture(Ve)}return Bi(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var r=n.width,o=n.height;this.texture.resize(r,o),this.width=r,this.height=o}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),$E=function(){function e(){var t=this;zi(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var n=Ha(Fo().mark(function r(o){return Fo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!o.uniforms){a.next=3;break}return a.next=3,Promise.all(Object.keys(o.uniforms).map(function(){var s=Ha(Fo().mark(function u(c){var f;return Fo().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(o.uniforms[c]&&o.uniforms[c].load!==void 0)){d.next=5;break}return d.next=3,o.uniforms[c].load();case 3:f=d.sent,o.uniforms[c]=f;case 5:case"end":return d.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()));case 3:return a.abrupt("return",new BE(t.gl,o));case 4:case"end":return a.stop()}},r)}));return function(r){return n.apply(this,arguments)}}(),this.createAttribute=function(n){return new yE(t.gl,n)},this.createBuffer=function(n){return new IE(t.gl,n)},this.createElements=function(n){return new kE(t.gl,n)},this.createTexture2D=function(n){return new UE(t.gl,n)},this.createFramebuffer=function(n){return new GE(t.gl,n)},this.useFramebuffer=function(n,r){t.gl({framebuffer:n?n.get():null})(r)},this.createComputeModel=function(){var n=Ha(Fo().mark(function r(o){return Fo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new ME(t.gl,o));case 1:case"end":return a.stop()}},r)}));return function(r){return n.apply(this,arguments)}}(),this.clear=function(n){var r=n.color,o=n.depth,i=n.stencil,a=n.framebuffer,s=a===void 0?null:a,u={color:r,depth:o,stencil:i};u.framebuffer=s===null?s:s.get(),t.gl.clear(u)},this.setScissor=function(n){t.gl&&t.gl._gl&&(n.enable&&n.box?(t.gl._gl.enable(Te.SCISSOR_TEST),t.gl._gl.scissor(n.box.x,n.box.y,n.box.width,n.box.height)):t.gl._gl.disable(Te.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(n){var r=n.x,o=n.y,i=n.width,a=n.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(r,o,i,a),t.gl._refresh())},this.readPixels=function(n){var r=n.framebuffer,o=n.x,i=n.y,a=n.width,s=n.height,u={x:o,y:i,width:a,height:s};return r&&(u.framebuffer=r.get()),t.gl.read(u)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}return Bi(e,[{key:"init",value:function(){var t=Ha(Fo().mark(function r(o){return Fo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.inited){a.next=2;break}return a.abrupt("return");case 2:return this.$canvas=o.canvas,a.next=5,new Promise(function(s,u){gE()({canvas:o.canvas,attributes:{alpha:!0,antialias:o.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(f,l){(f||!l)&&u(f),s(l)}})});case 5:this.gl=a.sent,this.inited=!0;case 7:case"end":return a.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}(),Ol=function(){function e(){zi(this,e),this.engine=void 0,this.configService=new dE}return Bi(e,[{key:"setConfig",value:function(n){this.configService.set(n)}},{key:"setEngine",value:function(n){this.engine=n}},{key:"createEntity",value:function(){return Sp()}},{key:"createKernel",value:function(n){var r=new pE(this.engine,this.configService);return typeof n=="string"?r.setBundle(JSON.parse(n)):r.setBundle(n),r.init(),r}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=new e;return r.setConfig(n),r.setEngine(new $E),r}}]),e}();const Cu=(e,t)=>{let n;return e?ye(e)?n=()=>e:n=e:n=()=>t||1,n},VE=(e,t)=>{const n=[],r=[],o={};let i=0;for(i=0;i<e.length;i++){const s=e[i];o[s.id]=i,n.push(s.x),n.push(s.y),n.push(0),n.push(0),r.push([])}for(i=0;i<t.length;i++){const s=t[i],u=ot(s,"source"),c=ot(s,"target");!isNaN(o[u])&&!isNaN(o[c])&&(r[o[u]].push(o[c]),r[o[c]].push(o[u]))}let a=0;for(i=0;i<e.length;i++){const s=n.length,u=r[i],c=u.length;n[i*4+2]=s,n[i*4+3]=c,a=Math.max(a,c);for(let f=0;f<c;++f){const l=u[f];n.push(+l)}}for(;n.length%4!==0;)n.push(0);return{maxEdgePerVetex:a,array:new Float32Array(n)}},WE=(e,t,n,r)=>{const o=[],i=[],a={};let s=0;for(s=0;s<e.length;s++){const c=e[s];a[c.id]=s,o.push(c.x),o.push(c.y),o.push(0),o.push(0),i.push([])}for(s=0;s<t.length;s++){const c=t[s],f=ot(c,"source"),l=ot(c,"target");i[a[f]].push(a[l]),i[a[f]].push(n(c)),i[a[f]].push(r(c)),i[a[f]].push(0),i[a[l]].push(a[f]),i[a[l]].push(n(c)),i[a[l]].push(r(c)),i[a[l]].push(0)}let u=0;for(s=0;s<e.length;s++){const c=o.length,f=i[s],l=f.length;o[s*4+2]=c+1048576*l/4,o[s*4+3]=0,u=Math.max(u,l/4);for(let d=0;d<l;++d){const h=f[d];o.push(+h)}}for(;o.length%4!==0;)o.push(0);return{maxEdgePerVetex:u,array:new Float32Array(o)}},XE=(e,t)=>{const n=[],r=e.length,o={};return t.forEach(i=>{e.forEach((a,s)=>{if(o[i[a]]===void 0&&(o[i[a]]=Object.keys(o).length),n.push(o[i[a]]),s===r-1)for(;n.length%4!==0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(o).length}},Gp=e=>{const t=[],n=e.length,r=e[0].length;for(let o=0;o<r;o++)e.forEach((i,a)=>{if(t.push(i[o]),a===n-1)for(;t.length%4!==0;)t.push(0)});return new Float32Array(t)},_b=null,HE='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Sb=null,ZE='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var Ll=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{c(r.next(f))}catch(l){a(l)}}function u(f){try{c(r.throw(f))}catch(l){a(l)}}function c(f){f.done?i(f.value):o(f.value).then(s,u)}c((r=r.apply(e,t||[])).next())})};class jE extends ve{constructor(t){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return Ll(this,void 0,void 0,function*(){const t=this,n=t.nodes;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}const o={},i={};n.forEach((a,s)=>{ye(a.x)||(a.x=Math.random()*this.width),ye(a.y)||(a.y=Math.random()*this.height),o[a.id]=a,i[a.id]=s}),t.nodeMap=o,t.nodeIdxMap=i,yield t.run()})}executeWithWorker(t,n){return Ll(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.center;if(!o||o.length===0)return;if(o.length===1){o[0].x=i[0],o[0].y=i[1];return}const a={},s={};o.forEach((u,c)=>{ye(u.x)||(u.x=Math.random()*this.width),ye(u.y)||(u.y=Math.random()*this.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,yield r.run(t,n)})}run(t,n){return Ll(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.edges,a=r.maxIteration,s=r.center,u=r.height*r.width;let c=Math.sqrt(u)/10;const f=u/(o.length+1),l=Math.sqrt(f),d=r.speed,h=r.clustering,{array:v,count:m}=XE([r.clusterField],o);o.forEach((ee,be)=>{let k=0,xe=0;ye(ee.fx)&&ye(ee.fy)&&(k=ee.fx||.001,xe=ee.fy||.001),v[4*be+1]=k,v[4*be+2]=xe});const g=o.length,{maxEdgePerVetex:E,array:y}=VE(o,i),b=r.workerEnabled;let w;b?w=Ol.create({canvas:t,engineOptions:{supportCompute:!0}}):w=Ol.create({engineOptions:{supportCompute:!0}});const I=r.onLayoutEnd,X=[];for(let ee=0;ee<m;ee++)X.push(0,0,0,0);const ge=w.createKernel(HE).setDispatch([g,1,1]).setBinding({u_Data:y,u_K:l,u_K2:f,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:d,u_MaxDisplace:c,u_Clustering:h?1:0,u_Center:s,u_AttributeArray:v,u_ClusterCenters:X,MAX_EDGE_PER_VERTEX:E,VERTEX_COUNT:g});let re;h&&(re=w.createKernel(ZE).setDispatch([m,1,1]).setBinding({u_Data:y,u_NodeAttributes:v,u_ClusterCenters:X,VERTEX_COUNT:g,CLUSTER_COUNT:m})),yield(()=>Ll(this,void 0,void 0,function*(){for(let be=0;be<a;be++)yield ge.execute(),h&&(re.setBinding({u_Data:ge}),yield re.execute(),ge.setBinding({u_ClusterCenters:re})),ge.setBinding({u_MaxDisplace:c*=.99});const ee=yield ge.getOutput();t?n.postMessage({type:qn.GPUEND,vertexEdgeData:ee}):o.forEach((be,k)=>{const xe=ee[4*k],Ve=ee[4*k+1];be.x=xe,be.y=Ve}),I&&I()}))()})}getType(){return"fruchterman-gpu"}}const Tb=null,YE='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Ib=null,KE='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var dh=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{c(r.next(f))}catch(l){a(l)}}function u(f){try{c(r.throw(f))}catch(l){a(l)}}function c(f){f.done?i(f.value):o(f.value).then(s,u)}c((r=r.apply(e,t||[])).next())})};class QE extends ve{constructor(t){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return dh(this,void 0,void 0,function*(){const t=this,n=t.nodes;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}const o={},i={};n.forEach((a,s)=>{ye(a.x)||(a.x=Math.random()*t.width),ye(a.y)||(a.y=Math.random()*t.height),o[a.id]=a,i[a.id]=s}),t.nodeMap=o,t.nodeIdxMap=i,t.nodeStrength=Cu(t.nodeStrength,1),t.edgeStrength=Cu(t.edgeStrength,1),yield t.run()})}executeWithWorker(t,n){const r=this,o=r.nodes,i=r.center;if(!o||o.length===0)return;if(o.length===1){o[0].x=i[0],o[0].y=i[1];return}const a={},s={};o.forEach((u,c)=>{ye(u.x)||(u.x=Math.random()*r.width),ye(u.y)||(u.y=Math.random()*r.height),a[u.id]=u,s[u.id]=c}),r.nodeMap=a,r.nodeIdxMap=s,r.nodeStrength=Cu(r.nodeStrength,1),r.edgeStrength=Cu(r.edgeStrength,1),r.run(t,n)}run(t,n){return dh(this,void 0,void 0,function*(){const r=this,o=r.nodes,i=r.edges,a=r.maxIteration;!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const s=o.length;r.linkDistance=Cu(r.linkDistance),r.edgeStrength=Cu(r.edgeStrength);const{maxEdgePerVetex:u,array:c}=WE(o,i,r.linkDistance,r.edgeStrength);r.degrees=wt(o.length,r.nodeIdxMap,i).map(k=>k.all);const f=[],l=[],d=[],h=[],v=[],m=[],g=[];r.getMass||(r.getMass=k=>r.degrees[r.nodeIdxMap[k.id]]||1);const E=r.gravity,y=r.center;o.forEach((k,xe)=>{f.push(r.getMass(k)),l.push(r.nodeStrength(k)),r.degrees[xe]||(r.degrees[xe]=0);let Ve=[y[0],y[1],E];if(r.getCenter){const qe=r.getCenter(k,r.degrees[xe]);qe&&ye(qe[0])&&ye(qe[1])&&ye(qe[2])&&(Ve=qe)}d.push(Ve[0]),h.push(Ve[1]),v.push(Ve[2]),ye(k.fx)&&ye(k.fy)?(m.push(k.fx||.001),g.push(k.fy||.001)):(m.push(0),g.push(0))});const b=Gp([f,r.degrees,l,m]),w=Gp([d,h,v,g]),I=r.workerEnabled;let X;I?X=Ol.create({canvas:t,engineOptions:{supportCompute:!0}}):X=Ol.create({engineOptions:{supportCompute:!0}});const ge=r.onLayoutEnd,re=[];c.forEach(k=>{re.push(k)});for(let k=0;k<4;k++)re.push(0);const Q=X.createKernel(YE).setDispatch([s,1,1]).setBinding({u_Data:c,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:b,u_NodeAttributeArray2:w,MAX_EDGE_PER_VERTEX:u,VERTEX_COUNT:s,u_AveMovement:re,u_interval:r.interval}),ee=X.createKernel(KE).setDispatch([1,1,1]).setBinding({u_Data:c,VERTEX_COUNT:s,u_AveMovement:[0,0,0,0]});yield(()=>dh(this,void 0,void 0,function*(){for(let xe=0;xe<a;xe++){yield Q.execute(),ee.setBinding({u_Data:Q}),yield ee.execute();const Ve=Math.max(.02,r.interval-xe*.002);Q.setBinding({u_interval:Ve,u_AveMovement:ee})}const k=yield Q.getOutput();t?n.postMessage({type:qn.GPUEND,vertexEdgeData:k}):o.forEach((xe,Ve)=>{const qe=k[4*Ve],Ut=k[4*Ve+1];xe.x=qe,xe.y=Ut}),ge&&ge()}))()})}getType(){return"gForce-gpu"}}class qE extends ve{constructor(t){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const t=this,n=t.nodes,r=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){const t=this,n=t.nodes,r=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const o=t.center,i=t.velocityDecay,a=t.comboMap;t.previousLayouted||t.initPos(a);for(let c=0;c<r;c++){const f=[];n.forEach((l,d)=>{f[d]={x:0,y:0}}),t.applyCalculate(f),t.applyComboCenterForce(f),n.forEach((l,d)=>{!ye(l.x)||!ye(l.y)||(l.x+=f[d].x*i,l.y+=f[d].y*i)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}const s=[0,0];n.forEach(c=>{!ye(c.x)||!ye(c.y)||(s[0]+=c.x,s[1]+=c.y)}),s[0]/=n.length,s[1]/=n.length;const u=[o[0]-s[0],o[1]-s[1]];n.forEach((c,f)=>{!ye(c.x)||!ye(c.y)||(c.x+=u[0],c.y+=u[1])}),t.combos.forEach(c=>{const f=a[c.id];f&&f.empty&&(c.x=f.cx||c.x,c.y=f.cy||c.y)}),t.previousLayouted=!0}initVals(){const t=this,n=t.edges,r=t.nodes,o=t.combos,i={},a={},s={};r.forEach((ee,be)=>{a[ee.id]=ee,s[ee.id]=be}),t.nodeMap=a,t.indexMap=s;const u={};o.forEach(ee=>{u[ee.id]=ee}),t.oriComboMap=u,t.comboMap=t.getComboMap();const c=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||c,t.preventNodeOverlap=t.preventNodeOverlap||c;const f=t.collideStrength;f&&(t.comboCollideStrength=f,t.nodeCollideStrength=f),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(let ee=0;ee<n.length;++ee){const be=ot(n[ee],"source"),k=ot(n[ee],"target");i[be]?i[be]++:i[be]=1,i[k]?i[k]++:i[k]=1}const l=[];for(let ee=0;ee<n.length;++ee){const be=ot(n[ee],"source"),k=ot(n[ee],"target");l[ee]=i[be]/(i[be]+i[k])}this.bias=l;const d=t.nodeSize,h=t.nodeSpacing;let v,m;if(ye(h)?m=()=>h:lt(h)?m=h:m=()=>0,this.nodeSpacing=m,!d)v=ee=>ee.size?Tt(ee.size)?(ee.size[0]>ee.size[1]?ee.size[0]:ee.size[1])/2:xt(ee.size)?(ee.size.width>ee.size.height?ee.size.width:ee.size.height)/2:ee.size/2:10;else if(lt(d))v=ee=>d(ee);else if(Tt(d)){const be=(d[0]>d[1]?d[0]:d[1])/2;v=k=>be}else{const ee=d/2;v=be=>ee}this.nodeSize=v;const g=t.comboSpacing;let E;ye(g)?E=()=>g:lt(g)?E=g:E=()=>0,this.comboSpacing=E;const y=t.comboPadding;let b;ye(y)?b=()=>y:Tt(y)?b=()=>Math.max.apply(null,y):lt(y)?b=y:b=()=>0,this.comboPadding=b;let w=this.linkDistance,I;w||(w=10),ye(w)?I=ee=>w:I=w,this.linkDistance=I;let X=this.edgeStrength,ge;X||(X=1),ye(X)?ge=ee=>X:ge=X,this.edgeStrength=ge;let re=this.nodeStrength,Q;re||(re=30),ye(re)?Q=ee=>re:Q=re,this.nodeStrength=Q}initPos(t){this.nodes.forEach((o,i)=>{const a=o.comboId,s=t[a];a&&s?(o.x=s.cx+100/(i+1),o.y=s.cy+100/(i+1)):(o.x=100/(i+1),o.y=100/(i+1))})}getComboMap(){const t=this,n=t.nodeMap,r=t.comboTrees,o=t.oriComboMap,i={};return(r||[]).forEach(a=>{const s=[];pn(a,u=>{if(u.itemType==="node"||!o[u.id])return!0;if(i[u.id]===void 0){const l={id:u.id,name:u.id,cx:0,cy:0,count:0,depth:t.oriComboMap[u.id].depth||0,children:[]};i[u.id]=l}const c=u.children;c&&c.forEach(l=>{if(!i[l.id]&&!n[l.id])return!0;s.push(l)});const f=i[u.id];if(f.cx=0,f.cy=0,s.length===0){f.empty=!0;const l=o[u.id];f.cx=l.x,f.cy=l.y}return s.forEach(l=>{if(f.count++,l.itemType!=="node"){const h=i[l.id];ye(h.cx)&&(f.cx+=h.cx),ye(h.cy)&&(f.cy+=h.cy);return}const d=n[l.id];d&&(ye(d.x)&&(f.cx+=d.x),ye(d.y)&&(f.cy+=d.y))}),f.cx/=f.count||1,f.cy/=f.count||1,f.children=s,!0})}),i}applyComboCenterForce(t){const n=this,r=n.gravity,o=n.comboGravity||r,i=this.alpha,a=n.comboTrees,s=n.indexMap,u=n.nodeMap,c=n.comboMap;(a||[]).forEach(f=>{pn(f,l=>{if(l.itemType==="node"||!c[l.id])return!0;const h=c[l.id],v=(h.depth+1)/10*.5,m=h.cx,g=h.cy;return h.cx=0,h.cy=0,h.children.forEach(E=>{if(E.itemType!=="node"){const re=c[E.id];re&&ye(re.cx)&&(h.cx+=re.cx),re&&ye(re.cy)&&(h.cy+=re.cy);return}const y=u[E.id],b=y.x-m||.005,w=y.y-g||.005,I=Math.sqrt(b*b+w*w),X=s[y.id],ge=o*i/I*v;t[X].x-=b*ge,t[X].y-=w*ge,ye(y.x)&&(h.cx+=y.x),ye(y.y)&&(h.cy+=y.y)}),h.cx/=h.count||1,h.cy/=h.count||1,!0})})}applyCalculate(t){const n=this,r=n.comboMap,o=n.nodes,i={};o.forEach((s,u)=>{o.forEach((c,f)=>{if(u<f)return;const l=s.x-c.x||.005,d=s.y-c.y||.005;let h=l*l+d*d;const v=Math.sqrt(h);h<1&&(h=v),i[`${s.id}-${c.id}`]={vx:l,vy:d,vl2:h,vl:v},i[`${c.id}-${s.id}`]={vl2:h,vl:v,vx:-l,vy:-d}})}),n.updateComboSizes(r),n.calRepulsive(t,i),n.calAttractive(t,i),n.preventComboOverlap&&n.comboNonOverlapping(t,r)}updateComboSizes(t){const n=this,r=n.comboTrees,o=n.nodeMap,i=n.nodeSize,a=n.comboSpacing,s=n.comboPadding;(r||[]).forEach(u=>{const c=[];pn(u,f=>{if(f.itemType==="node")return!0;const l=t[f.id];if(!l)return!1;const d=f.children;d&&d.forEach(m=>{!t[m.id]&&!o[m.id]||c.push(m)}),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,c.forEach(m=>{if(m.itemType!=="node")return!0;const g=o[m.id];if(!g)return!0;const E=i(g),y=g.x-E,b=g.y-E,w=g.x+E,I=g.y+E;l.minX>y&&(l.minX=y),l.minY>b&&(l.minY=b),l.maxX<w&&(l.maxX=w),l.maxY<I&&(l.maxY=I)});let h=n.oriComboMap[f.id].size||10;Tt(h)&&(h=h[0]);const v=Math.max(l.maxX-l.minX,l.maxY-l.minY,h);return l.r=v/2+a(l)/2+s(l),!0})})}comboNonOverlapping(t,n){const r=this,o=r.comboTree,i=r.comboCollideStrength,a=r.indexMap,s=r.nodeMap;pn(o,u=>{if(!n[u.id]&&!s[u.id]&&u.id!=="comboTreeRoot")return!1;const c=u.children;return c&&c.length>1&&c.forEach((f,l)=>{if(f.itemType==="node")return!1;const d=n[f.id];d&&c.forEach((h,v)=>{if(l<=v||h.itemType==="node")return!1;const m=n[h.id];if(!m)return!1;const g=d.cx-m.cx||.005,E=d.cy-m.cy||.005,y=g*g+E*E,b=d.r||1,w=m.r||1,I=b+w,X=w*w,ge=b*b;if(y<I*I){const re=f.children;if(!re||re.length===0)return!1;const Q=h.children;if(!Q||Q.length===0)return!1;const ee=Math.sqrt(y),be=(I-ee)/ee*i,k=g*be,xe=E*be,Ve=X/(ge+X),qe=1-Ve;re.forEach(Ut=>{if(Ut.itemType!=="node")return!1;if(!s[Ut.id])return;const ut=a[Ut.id];Q.forEach(Xt=>{if(Xt.itemType!=="node"||!s[Xt.id])return!1;const Ot=a[Xt.id];t[ut].x+=k*Ve,t[ut].y+=xe*Ve,t[Ot].x-=k*qe,t[Ot].y-=xe*qe})})}})}),!0})}calRepulsive(t,n){const r=this,o=r.nodes,i=r.width*r.optimizeRangeFactor,a=r.nodeStrength,s=r.alpha,u=r.nodeCollideStrength,c=r.preventNodeOverlap,f=r.nodeSize,l=r.nodeSpacing,d=r.depthRepulsiveForceScale,h=r.center;o.forEach((v,m)=>{if(!(!v.x||!v.y)){if(h){const g=r.gravity,E=v.x-h[0]||.005,y=v.y-h[1]||.005,b=Math.sqrt(E*E+y*y);t[m].x-=E*g*s/b,t[m].y-=y*g*s/b}o.forEach((g,E)=>{if(m===E||!g.x||!g.y)return;const{vl2:y,vl:b}=n[`${v.id}-${g.id}`];if(b>i)return;const{vx:w,vy:I}=n[`${v.id}-${g.id}`];let X=Math.log(Math.abs(g.depth-v.depth)/10)+1||1;X=X<1?1:X,g.comboId!==v.comboId&&(X+=1);const ge=X?Math.pow(d,X):1,re=a(g)*s/y*ge;if(t[m].x+=w*re,t[m].y+=I*re,m<E&&c){const Q=f(v)+l(v)||1,ee=f(g)+l(g)||1,be=Q+ee;if(y<be*be){const k=(be-b)/b*u,xe=ee*ee;let Ve=xe/(Q*Q+xe);const qe=w*k,Ut=I*k;t[m].x+=qe*Ve,t[m].y+=Ut*Ve,Ve=1-Ve,t[E].x-=qe*Ve,t[E].y-=Ut*Ve}}})}})}calAttractive(t,n){const r=this,o=r.edges,i=r.linkDistance,a=r.alpha,s=r.edgeStrength,u=r.bias,c=r.depthAttractiveForceScale;o.forEach((f,l)=>{const d=ot(f,"source"),h=ot(f,"target");if(!d||!h||d===h)return;const v=r.indexMap[d],m=r.indexMap[h],g=r.nodeMap[d],E=r.nodeMap[h];if(!g||!E)return;let y=g.depth===E.depth?0:Math.log(Math.abs(g.depth-E.depth)/10);g.comboId===E.comboId&&(y=y/2);let b=y?Math.pow(c,y):1;if(g.comboId!==E.comboId&&b===1?b=c/2:g.comboId===E.comboId&&(b=2),!ye(E.x)||!ye(g.x)||!ye(E.y)||!ye(g.y))return;const{vl:w,vx:I,vy:X}=n[`${h}-${d}`],ge=(w-i(f))/w*a*s(f)*b,re=I*ge,Q=X*ge,ee=u[l];t[m].x-=re*ee,t[m].y-=Q*ee,t[v].x+=re*(1-ee),t[v].y+=Q*(1-ee)})}getType(){return"comboForce"}}class JE extends ve{constructor(t){super(),this.center=[0,0],this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.comboPadding=10,this.comboTrees=[],this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,n=t.nodes,r=t.center;if(!n||n.length===0){t.onLayoutEnd&&t.onLayoutEnd();return}if(n.length===1){n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd();return}t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}run(){var t;const n=this,{nodes:r,edges:o,combos:i,comboEdges:a,center:s}=n,u={};r.forEach(E=>{u[E.id]=E});const c={};i.forEach(E=>{c[E.id]=E});const f=n.getInnerGraphs(u),l=[],d=[],h={};let v=!0;this.comboTrees.forEach(E=>{const y=f[E.id],b=Object.assign(Object.assign({},E),{x:y.x||c[E.id].x,y:y.y||c[E.id].y,fx:y.fx||c[E.id].fx,fy:y.fy||c[E.id].fy,mass:y.mass||c[E.id].mass,size:y.size});d.push(b),!isNaN(b.x)&&b.x!==0&&!isNaN(b.y)&&b.y!==0?v=!1:(b.x=Math.random()*100,b.y=Math.random()*100),l.push(E.id),pn(E,w=>(w.id!==E.id&&(h[w.id]=E.id),!0))}),r.forEach(E=>{if(E.comboId&&c[E.comboId])return;const y=Object.assign({},E);d.push(y),!isNaN(y.x)&&y.x!==0&&!isNaN(y.y)&&y.y!==0?v=!1:(y.x=Math.random()*100,y.y=Math.random()*100),l.push(E.id)});const m=[];if(o.concat(a).forEach(E=>{const y=h[E.source]||E.source,b=h[E.target]||E.target;y!==b&&l.includes(y)&&l.includes(b)&&m.push({source:y,target:b})}),d!=null&&d.length){if(d.length===1)d[0].x=s[0],d[0].y=s[1];else{const E={nodes:d,edges:m},y=this.outerLayout||new We({gravity:1,factor:4,linkDistance:(w,I,X)=>{var ge,re;const Q=((((ge=I.size)===null||ge===void 0?void 0:ge[0])||30)+(((re=X.size)===null||re===void 0?void 0:re[0])||30))/2;return Math.min(Q*1.5,700)}}),b=(t=y.getType)===null||t===void 0?void 0:t.call(y);y.updateCfg({center:s,kg:5,preventOverlap:!0,animate:!1}),v&&nr[b]&&(d.length<100?new xp:new Xe).layout(E),y.layout(E)}d.forEach(E=>{const y=f[E.id];if(!y){const b=u[E.id];b&&(b.x=E.x,b.y=E.y);return}y.visited=!0,y.x=E.x,y.y=E.y,y.nodes.forEach(b=>{b.x+=E.x,b.y+=E.y})})}const g=Object.keys(f);for(let E=g.length-1;E>=0;E--){const y=g[E],b=f[y];b&&(b.nodes.forEach(w=>{b.visited||(w.x+=b.x||0,w.y+=b.y||0),u[w.id]&&(u[w.id].x=w.x,u[w.id].y=w.y)}),c[y]&&(c[y].x=b.x,c[y].y=b.y))}return{nodes:r,edges:o,combos:i,comboEdges:a}}getInnerGraphs(t){const n=this,{comboTrees:r,nodeSize:o,edges:i,comboPadding:a,spacing:s}=n,u={},c=this.innerLayout||new bp({type:"concentric",sortBy:"id"});return c.center=[0,0],c.preventOverlap=!0,c.nodeSpacing=s,(r||[]).forEach(f=>{pn(f,l=>{var d;let h=(a==null?void 0:a(l))||10;if(Tt(h)&&(h=Math.max(...h)),!((d=l.children)===null||d===void 0)&&d.length){const v=l.children.map(Q=>{if(Q.itemType==="combo")return u[Q.id];const ee=t[Q.id]||{};return Object.assign(Object.assign({},ee),Q)}),m=v.map(Q=>Q.id),g={nodes:v,edges:i.filter(Q=>m.includes(Q.source)&&m.includes(Q.target))};let E=1/0;v.forEach(Q=>{var ee;Q.size||(Q.size=((ee=u[Q.id])===null||ee===void 0?void 0:ee.size)||(o==null?void 0:o(Q))||[30,30]),ye(Q.size)&&(Q.size=[Q.size,Q.size]),E>Q.size[0]&&(E=Q.size[0]),E>Q.size[1]&&(E=Q.size[1])}),c.layout(g);const{minX:y,minY:b,maxX:w,maxY:I}=dr(v),X={x:(w+y)/2,y:(I+b)/2};g.nodes.forEach(Q=>{Q.x-=X.x,Q.y-=X.y});const ge=Math.max(w-y,E)+h*2,re=Math.max(I-b,E)+h*2;u[l.id]={id:l.id,nodes:v,size:[ge,re]}}else if(l.itemType==="combo"){const v=h?[h*2,h*2]:[30,30];u[l.id]={id:l.id,nodes:[],size:v}}return!0})}),u}initVals(){const t=this,n=t.nodeSize,r=t.spacing;let o,i;if(ye(r)?i=()=>r:lt(r)?i=r:i=()=>0,this.spacing=i,!n)o=u=>{const c=i(u);return u.size?Tt(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+c)/2:xt(u.size)?((u.size.width>u.size.height?u.size.width:u.size.height)+c)/2:(u.size+c)/2:10+c/2};else if(lt(n))o=u=>{const c=n(u),f=i(u);return Tt(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+f)/2:((c||10)+f)/2};else if(Tt(n)){const c=(n[0]>n[1]?n[0]:n[1])/2;o=f=>c+i(f)/2}else{const u=n/2;o=c=>u+i(c)/2}this.nodeSize=o;const a=t.comboPadding;let s;ye(a)?s=()=>a:Tt(a)?s=()=>Math.max.apply(null,a):lt(a)?s=a:s=()=>0,this.comboPadding=s}getType(){return"comboCombined"}}class hh{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const n=this.rx-t.rx,r=this.ry-t.ry;return Math.hypot(n,r)}setPos(t,n){this.rx=t,this.ry=n}resetForce(){this.fx=0,this.fy=0}addForce(t){const n=t.rx-this.rx,r=t.ry-this.ry;let o=Math.hypot(n,r);o=o<1e-4?1e-4:o;const i=this.g*(this.degree+1)*(t.degree+1)/o;this.fx+=i*n/o,this.fy+=i*r/o}in(t){return t.contains(this.rx,this.ry)}add(t){const n=this.mass+t.mass,r=(this.rx*this.mass+t.rx*t.mass)/n,o=(this.ry*this.mass+t.ry*t.mass)/n,i=this.degree+t.degree,a={rx:r,ry:o,mass:n,degree:i};return new hh(a)}}class Du{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,n){const r=this.length/2;return t<=this.xmid+r&&t>=this.xmid-r&&n<=this.ymid+r&&n>=this.ymid-r}NW(){const t=this.xmid-this.length/4,n=this.ymid+this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}NE(){const t=this.xmid+this.length/4,n=this.ymid+this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}SW(){const t=this.xmid-this.length/4,n=this.ymid-this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}SE(){const t=this.xmid+this.length/4,n=this.ymid-this.length/4,r=this.length/2,o={xmid:t,ymid:n,length:r};return new Du(o)}}class Ou{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,t!=null&&(this.quad=t)}insert(t){if(this.body==null){this.body=t;return}this._isExternal()?(this.quad&&(this.NW=new Ou(this.quad.NW()),this.NE=new Ou(this.quad.NE()),this.SW=new Ou(this.quad.SW()),this.SE=new Ou(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t))}_putBody(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(t){if(!(this.body==null||t===this.body))if(this._isExternal())t.addForce(this.body);else{const n=this.quad?this.quad.getLength():0,r=this.body.distanceTo(t);n/r<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}class eb extends ve{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,{nodes:n,onLayoutEnd:r,prune:o}=t;let i=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);const a=[],s=n.length;for(let u=0;u<s;u+=1){const c=n[u];let f=10,l=10;ye(c.size)&&(f=c.size,l=c.size),Tt(c.size)?(isNaN(c.size[0])||(f=c.size[0]),isNaN(c.size[1])||(l=c.size[1])):xt(c.size)&&(f=c.size.width,l=c.size.height),t.getWidth&&!isNaN(t.getWidth(c))&&(l=t.getWidth(c)),t.getHeight&&!isNaN(t.getHeight(c))&&(f=t.getHeight(c));const d=Math.max(f,l);a.push(d)}t.barnesHut===void 0&&s>250&&(t.barnesHut=!0),t.prune===void 0&&s>100&&(t.prune=!0),this.maxIteration===0&&!t.prune?(i=250,s<=200&&s>100?i=1e3:s>200&&(i=1200),this.maxIteration=i):this.maxIteration===0&&o&&(i=100,s<=200&&s>100?i=500:s>200&&(i=950),this.maxIteration=i),t.kr||(t.kr=50,s>100&&s<=500?t.kr=20:s>500&&(t.kr=1)),t.kg||(t.kg=20,s>100&&s<=500?t.kg=10:s>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(a),r()}updateNodesByForces(t){const n=this,{edges:r,maxIteration:o}=n;let i=n.nodes;const a=r.filter(v=>{const m=ot(v,"source"),g=ot(v,"target");return m!==g}),s=i.length,u=a.length,c=[],f={},l={},d=[];for(let v=0;v<s;v+=1)f[i[v].id]=v,c[v]=0,(i[v].x===void 0||isNaN(i[v].x))&&(i[v].x=Math.random()*1e3),(i[v].y===void 0||isNaN(i[v].y))&&(i[v].y=Math.random()*1e3),d.push({x:i[v].x,y:i[v].y});for(let v=0;v<u;v+=1){let m,g,E=0,y=0;for(let b=0;b<s;b+=1){const w=ot(a[v],"source"),I=ot(a[v],"target");i[b].id===w?(m=i[b],E=b):i[b].id===I&&(g=i[b],y=b),l[v]={sourceIdx:E,targetIdx:y}}m&&(c[f[m.id]]+=1),g&&(c[f[g.id]]+=1)}let h=o;if(i=this.iterate(h,f,l,u,c,t),n.prune){for(let v=0;v<u;v+=1)c[l[v].sourceIdx]<=1?(i[l[v].sourceIdx].x=i[l[v].targetIdx].x,i[l[v].sourceIdx].y=i[l[v].targetIdx].y):c[l[v].targetIdx]<=1&&(i[l[v].targetIdx].x=i[l[v].sourceIdx].x,i[l[v].targetIdx].y=i[l[v].sourceIdx].y);n.prune=!1,n.barnesHut=!1,h=100,i=this.iterate(h,f,l,u,c,t)}return i}iterate(t,n,r,o,i,a){const s=this;let{nodes:u}=s;const{kr:c,preventOverlap:f}=s,{barnesHut:l}=s,d=u.length;let h=0;const v=100;let m=t;const g=50;let E=[];const y=[],b=[];for(let w=0;w<d;w+=1)if(E[2*w]=0,E[2*w+1]=0,l){const I={id:w,rx:u[w].x,ry:u[w].y,mass:1,g:c,degree:i[w]};b[w]=new hh(I)}for(;m>0;){for(let I=0;I<d;I+=1)y[2*I]=E[2*I],y[2*I+1]=E[2*I+1],E[2*I]=0,E[2*I+1]=0;E=this.getAttrForces(m,g,o,n,r,i,a,E),l&&(f&&m>g||!f)?E=this.getOptRepGraForces(E,b,i):E=this.getRepGraForces(m,g,E,v,a,i);const w=this.updatePos(E,y,h,i);u=w.nodes,h=w.sg,m--,s.tick&&s.tick()}return u}getAttrForces(t,n,r,o,i,a,s,u){const c=this,{nodes:f,preventOverlap:l,dissuadeHubs:d,mode:h,prune:v}=c;for(let m=0;m<r;m+=1){const g=f[i[m].sourceIdx],E=i[m].sourceIdx,y=f[i[m].targetIdx],b=i[m].targetIdx;if(v&&(a[E]<=1||a[b]<=1))continue;const w=[y.x-g.x,y.y-g.y];let I=Math.hypot(w[0],w[1]);I=I<1e-4?1e-4:I,w[0]=w[0]/I,w[1]=w[1]/I,l&&t<n&&(I=I-s[E]-s[b]);let X=I,ge=X;h==="linlog"&&(X=Math.log(1+I),ge=X),d&&(X=I/a[E],ge=I/a[b]),l&&t<n&&I<=0?(X=0,ge=0):l&&t<n&&I>0&&(X=I,ge=I),u[2*o[g.id]]+=X*w[0],u[2*o[y.id]]-=ge*w[0],u[2*o[g.id]+1]+=X*w[1],u[2*o[y.id]+1]-=ge*w[1]}return u}getRepGraForces(t,n,r,o,i,a){const s=this,{nodes:u,preventOverlap:c,kr:f,kg:l,center:d,prune:h}=s,v=u.length;for(let m=0;m<v;m+=1){for(let b=m+1;b<v;b+=1){if(h&&(a[m]<=1||a[b]<=1))continue;const w=[u[b].x-u[m].x,u[b].y-u[m].y];let I=Math.hypot(w[0],w[1]);I=I<1e-4?1e-4:I,w[0]=w[0]/I,w[1]=w[1]/I,c&&t<n&&(I=I-i[m]-i[b]);let X=f*(a[m]+1)*(a[b]+1)/I;c&&t<n&&I<0?X=o*(a[m]+1)*(a[b]+1):c&&t<n&&I===0?X=0:c&&t<n&&I>0&&(X=f*(a[m]+1)*(a[b]+1)/I),r[2*m]-=X*w[0],r[2*b]+=X*w[0],r[2*m+1]-=X*w[1],r[2*b+1]+=X*w[1]}const g=[u[m].x-d[0],u[m].y-d[1]],E=Math.hypot(g[0],g[1]);g[0]=g[0]/E,g[1]=g[1]/E;const y=l*(a[m]+1);r[2*m]-=y*g[0],r[2*m+1]-=y*g[1]}return r}getOptRepGraForces(t,n,r){const o=this,{nodes:i,kg:a,center:s,prune:u}=o,c=i.length;let f=9e10,l=-9e10,d=9e10,h=-9e10;for(let y=0;y<c;y+=1)u&&r[y]<=1||(n[y].setPos(i[y].x,i[y].y),i[y].x>=l&&(l=i[y].x),i[y].x<=f&&(f=i[y].x),i[y].y>=h&&(h=i[y].y),i[y].y<=d&&(d=i[y].y));const v=Math.max(l-f,h-d),m={xmid:(l+f)/2,ymid:(h+d)/2,length:v,massCenter:s,mass:c},g=new Du(m),E=new Ou(g);for(let y=0;y<c;y+=1)u&&r[y]<=1||n[y].in(g)&&E.insert(n[y]);for(let y=0;y<c;y+=1){if(u&&r[y]<=1)continue;n[y].resetForce(),E.updateForce(n[y]),t[2*y]-=n[y].fx,t[2*y+1]-=n[y].fy;const b=[i[y].x-s[0],i[y].y-s[1]];let w=Math.hypot(b[0],b[1]);w=w<1e-4?1e-4:w,b[0]=b[0]/w,b[1]=b[1]/w;const I=a*(r[y]+1);t[2*y]-=I*b[0],t[2*y+1]-=I*b[1]}return t}updatePos(t,n,r,o){const i=this,{nodes:a,ks:s,tao:u,prune:c,ksmax:f}=i,l=a.length,d=[],h=[];let v=0,m=0;for(let E=0;E<l;E+=1){if(c&&o[E]<=1)continue;const y=[t[2*E]-n[2*E],t[2*E+1]-n[2*E+1]],b=Math.hypot(y[0],y[1]),w=[t[2*E]+n[2*E],t[2*E+1]+n[2*E+1]],I=Math.hypot(w[0],w[1]);d[E]=b,h[E]=I/2,v+=(o[E]+1)*d[E],m+=(o[E]+1)*h[E]}const g=r;r=u*m/v,g!==0&&(r=r>1.5*g?1.5*g:r);for(let E=0;E<l;E+=1){if(c&&o[E]<=1||ye(a[E].fx)&&ye(a[E].fy))continue;let y=s*r/(1+r*Math.sqrt(d[E])),b=Math.hypot(t[2*E],t[2*E+1]);b=b<1e-4?1e-4:b;const w=f/b;y=y>w?w:y;const I=y*t[2*E],X=y*t[2*E+1];a[E].x+=I,a[E].y+=X}return{nodes:a,sg:r}}}class ba{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(t,n,r){this.cells=[],this.CELL_W=r.CELL_W||ba.DEFAULT_CELL_W,this.CELL_H=r.CELL_H||ba.DEFAULT_CELL_H,this.columnNum=Math.ceil(t/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),ba.MIN_DIST=Math.pow(t,2)+Math.pow(n,2);for(let o=0;o<this.columnNum;o++){const i=[];for(let a=0;a<this.rowNum;a++){const s={dx:o,dy:a,x:o*this.CELL_W,y:a*this.CELL_H,occupied:!1};i.push(s)}this.cells.push(i)}}findGridByNodeId(t){var n,r;for(let o=0;o<this.columnNum;o++)for(let i=0;i<this.rowNum;i++)if(this.cells[o][i].node&&((r=(n=this.cells[o][i])===null||n===void 0?void 0:n.node)===null||r===void 0?void 0:r.id)===t)return{column:o,row:i};return null}sqdist(t,n){return Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)}occupyNearest(t){let n=ba.MIN_DIST,r,o=null;for(let i=0;i<this.columnNum;i++)for(let a=0;a<this.rowNum;a++)!this.cells[i][a].occupied&&(r=this.sqdist(t,this.cells[i][a]))<n&&(n=r,o=this.cells[i][a]);return o&&(o.occupied=!0),o}insertColumn(t,n){if(!(n<=0)){for(let r=0;r<n;r++){this.cells[r+this.columnNum]=[];for(let o=0;o<this.rowNum;o++)this.cells[r+this.columnNum][o]={dx:r,dy:o,x:r*this.CELL_W,y:o*this.CELL_H,occupied:!1,node:null}}for(let r=this.columnNum-1;r>t;r--)for(let o=0;o<this.rowNum;o++)this.cells[r+n][o]=Object.assign(Object.assign({},this.cells[r][o]),{x:(r+n)*this.CELL_W,y:o*this.CELL_H}),this.cells[r][o]={x:r*this.CELL_W,y:o*this.CELL_H,occupied:!0,node:null};for(let r=0;r<this.additionColumn.length;r++)this.additionColumn[r]>=t&&(this.additionColumn[r]+=n);for(let r=0;r<n;r++)this.additionColumn.push(t+r+1);this.columnNum+=n}}insertRow(t,n){if(!(n<=0)){for(let r=0;r<n;r++)for(let o=0;o<this.columnNum;o++)this.cells[o][r+this.rowNum]={dx:o,dy:r,x:o*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null};for(let r=0;r<this.columnNum;r++)for(let o=this.rowNum-1;o>t;o--)this.cells[r][o+n]=Object.assign(Object.assign({},this.cells[r][o]),{dx:r,dy:o+n,x:r*this.CELL_W,y:(o+n)*this.CELL_H}),this.cells[r][o]={dx:r,dy:o,x:r*this.CELL_W,y:o*this.CELL_H,occupied:!1,node:null};for(let r=0;r<this.additionRow.length;r++)this.additionRow[r]>=t&&(this.additionRow[r]+=n);for(let r=0;r<n;r++)this.additionRow.push(t+r+1);this.rowNum+=n}}getNodes(){const t=[];for(let n=0;n<this.columnNum;n++)for(let r=0;r<this.rowNum;r++)this.cells[n][r].node&&t.push(this.cells[n][r]);return t}}ba.MIN_DIST=50,ba.DEFAULT_CELL_W=80,ba.DEFAULT_CELL_H=80;function tb(e,t){if(!e.nodes||e.nodes.length===0)return e;const n=t.width,r=t.height,o=t.nodeMinGap;let i=1e4,a=1e4;e.nodes.forEach(u=>{const c=u.size[0]||50,f=u.size[1]||50;i=Math.min(c,i),a=Math.min(f,a)});const s=new ba;s.init(n,r,{CELL_H:a,CELL_W:i}),e.nodes.forEach(u=>{const c=s.occupyNearest(u);c&&(c.node={id:u.id,size:u.size},u.x=c.x,u.y=c.y,u.dx=c.dx,u.dy=c.dy)});for(let u=0;u<e.nodes.length;u++){const c=e.nodes[u],f=s.findGridByNodeId(c.id);if(!f)throw new Error("can not find node cell");const{column:l,row:d}=f;if(c.size[0]+o>i){const h=Math.ceil((c.size[0]+o)/i)-1;let v=h;for(let m=0;m<h&&(s.additionColumn.indexOf(l+m+1)>-1&&!s.cells[l+m+1][d].node);m++)v--;s.insertColumn(l,v)}if(c.size[1]+o>a){const h=Math.ceil((c.size[1]+o)/a)-1;let v=h;for(let m=0;m<h&&(s.additionRow.indexOf(d+m+1)>-1&&!s.cells[l][d+m+1].node);m++)v--;s.insertRow(d,v)}}for(let u=0;u<s.columnNum;u++)for(let c=0;c<s.rowNum;c++){const f=s.cells[u][c];if(f.node){const l=e.nodes.find(d=>{var h;return d.id===((h=f==null?void 0:f.node)===null||h===void 0?void 0:h.id)});l&&(l.x=f.x+l.size[0]/2,l.y=f.y+l.size[1]/2)}}}const Pp=1200,Fp=800,Ml=1e7,Bc=10,zp=3.141592653589793,vh=1.5707963267948966,nb=zp*.375,rb=zp*.625,kl=new Map,ob=10,ib=10;let ph=.8;const Bp=.1,ab=.5;function sb(e,t,n){const r=e.x-e.size[0]/2,o=e.y-e.size[1]/2,i=e.x+e.size[0]/2,a=e.y+e.size[1]/2,s=t.x-t.size[0]/2,u=t.y-t.size[1]/2,c=t.x+t.size[0]/2,f=t.y+t.size[1]/2,l=e.x,d=e.y,h=t.x,v=t.y,m=h-l,g=Math.atan2(m,v-d);let E=0,y=0,b=0,w=0;g>vh?(y=o-f,E=s-i,b=parseFloat(y?(y/Math.cos(g)).toFixed(2):E.toFixed(2)),w=parseFloat(E?(E/Math.sin(g)).toFixed(2):y.toFixed(2))):0<g&&g<=vh?(y=u-a,E=s-i,y>E?b=w=parseFloat(y?(y/Math.cos(g)).toFixed(2):E.toFixed(2)):b=w=parseFloat(E?(E/Math.sin(g)).toFixed(2):y.toFixed(2))):g<-vh?(y=o-f,E=-(c-r),y>E?b=w=parseFloat(y?(y/Math.cos(g)).toFixed(2):E.toFixed(2)):b=w=parseFloat(E?(E/Math.sin(g)).toFixed(2):y.toFixed(2))):(y=u-a,Math.abs(m)>(i-r)/2?E=r-c:E=m,y>E?b=w=parseFloat(y?(y/Math.cos(g)).toFixed(2):E.toFixed(2)):b=w=parseFloat(E&&g!==0?(E/Math.sin(g)).toFixed(2):y.toFixed(2)));const I=parseFloat(g.toFixed(2));let X=n;return n&&(X=nb<I&&I<rb),{distance:Math.abs(b<w?b:w),isHoriz:X}}function Up(e,t){const r=(kl.get(e.id)||[]).find(ge=>ge.source===t.id||ge.target===t.id),o=e.size[0]*e.size[1],i=t.size[0]*t.size[1],a=o>i?t:e,s=o>i?e:t,u=a.x-a.size[0]/2,c=a.y-a.size[1]/2,f=a.x+a.size[0]/2,l=a.y+a.size[1]/2,d=s.x-s.size[0]/2,h=s.y-s.size[1]/2,v=s.x+s.size[0]/2,m=s.y+s.size[1]/2,g=a.x,E=a.y,y=s.x,b=s.y,w=f>=d&&v>=u&&l>=h&&m>=c;let I=0,X=0;if(w){X=Math.sqrt(Math.pow(y-g,2)+Math.pow(b-E,2));const ge=u>d?u:d,re=c>h?c:h,Q=f<v?f:v,ee=l<m?l:m,be=Q-ge,k=ee-re,xe=be*k;X===0&&(X=1e-7),I=Bc*1/X*100+xe,I*=Ml}else{let ge=!1;const re=sb(a,s,ge);X=re.distance,ge=re.isHoriz,X<=Bc?X!==0?r?I+=Bc+Ml*1/X:I+=Bc+Ml*Bc/X:I+=Ml:(I+=X,r&&(I+=X*X))}return I}function $p(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];(r.x<0||r.y<0||r.x>Pp||r.y>Fp)&&(t+=1e12);for(let o=n+1;o<e.length;o++)t+=Up(r,e[o])}return t}function ub(e,t,n,r){const o=new Map;n.forEach((u,c)=>{o.set(u.id,u)});const i=r.filter(u=>u.source===e.id||u.target===e.id)||[],a=[];i.forEach(u=>{const c=u.source===e.id?u.target:u.source,f=o.get(c);f&&a.push(f)});let s=!0;for(let u=0;u<a.length;u++){const c=a[u],f=Math.atan((e.y-c.y)/(c.x-e.y))*180,l=Math.atan((t.y-c.y)/(c.x-t.y))*180,d=f<30||f>150,h=l<30||l>150,v=f>70&&f<110,m=l>70&&l<110;if(d&&!h||f*l<0){s=!1;break}else if(v&&!m||f*l<0){s=!1;break}else if((c.x-e.x)*(c.x-t.x)<0){s=!1;break}else if((c.y-e.y)*(c.y-t.y)<0){s=!1;break}}return s}function cb(e,t){let n=!1;const r=1,o=ob*r,i=ib*r,a=[o,-o,0,0],s=[0,0,i,-i];for(let u=0;u<e.length;++u){const c=e[u];let f=Vp(c,e);for(let l=0;l<a.length;l++)if(ub(c,{x:c.x+a[l],y:c.y+s[l]},e,t)){c.x+=a[l],c.y+=s[l];const h=Vp(c,e),v=Math.random();h<f||v<ph&&v>Bp?(f=h,n=!0):(c.x-=a[l],c.y-=s[l])}}return ph>Bp&&(ph*=ab),n?$p(e):0}function Vp(e,t){let n=0;(e.x<0||e.y<0||e.x+e.size[0]+20>Pp||e.y+e.size[1]+20>Fp)&&(n+=1e12);for(let r=0;r<t.length;++r)e.id!==t[r].id&&(n+=Up(e,t[r]));return n}function fb(e,t){if(e.length===0)return{nodes:e,edges:t};e.forEach(u=>{const c=t.filter(f=>f.source===u.id||f.target===u.id);kl.set(u,c)}),e.sort((u,c)=>{var f,l;return((f=kl.get(u.id))===null||f===void 0?void 0:f.length)-((l=kl.get(c.id))===null||l===void 0?void 0:l.length)});let n=$p(e),r=20,o=1,i=0;const a=50;let s=0;for(;r>0&&(s++,!(s>=a));){const u=cb(e,t);u!==0&&(i=u),o=i-n,n=i,o===0?--r:r=20}return e.forEach(u=>{u.x=u.x-u.size[0]/2,u.y=u.y-u.size[1]/2}),{nodes:e,edges:t}}var lb=fb;function db(e,t){const{nodes:n,edges:r}=e,o=t.width,i=t.height;if(!(n!=null&&n.length))return Promise.resolve();const a=[];n.forEach(v=>{if(r.filter(g=>g.source===v.id||g.target===v.id).length>1){const g=Object.assign({},v);delete g.size,a.push(g)}});const s=[];r.forEach(v=>{const m=a.find(E=>E.id===v.source),g=a.find(E=>E.id===v.target);m&&g&&s.push(v)});const u=new uu({type:"dagre",ranksep:t.nodeMinGap,nodesep:t.nodeMinGap}),{nodes:c}=u.layout({nodes:a,edges:s});n.forEach(v=>{const m=(c||[]).find(g=>g.id===v.id);v.x=(m==null?void 0:m.x)||o/2,v.y=(m==null?void 0:m.y)||i/2});const f=JSON.parse(JSON.stringify(n)),l=JSON.parse(JSON.stringify(r)),d=C().nodes(f).force("link",zt(l).id(v=>v.id).distance(v=>s.find(g=>g.source===v.source&&g.target===v.target)?30:20)).force("charge",Ie()).force("center",Me(o/2,i/2)).force("x",Tn(o/2)).force("y",dn(i/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(v=>{d.on("end",()=>{n.forEach(I=>{const X=f.find(ge=>ge.id===I.id);X&&(I.x=X.x,I.y=X.y)});const m=Math.min(...n.map(I=>I.x)),g=Math.max(...n.map(I=>I.x)),E=Math.min(...n.map(I=>I.y)),y=Math.max(...n.map(I=>I.y)),b=o/(g-m),w=i/(y-E);n.forEach(I=>{I.x!==void 0&&b<1&&(I.x=(I.x-m)*b),I.y!==void 0&&w<1&&(I.y=(I.y-E)*w)}),n.forEach(I=>{I.sizeTemp=I.size,I.size=[10,10]}),lb(n,r),n.forEach(I=>{I.size=I.sizeTemp||[],delete I.sizeTemp}),tb({nodes:n,edges:r},t),v()})})}class hb extends ve{constructor(t){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},t&&this.updateCfg(t)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const t=this,n=t.nodes,r=t.edges;return n==null||n.forEach(o=>{o.size||(o.size=[50,50])}),db({nodes:n,edges:r},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{t.onLayoutEnd&&t.onLayoutEnd()})}getType(){return"er"}}class vb extends ve{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const t=this,n=t.nodes,r=.9,o=t.center;return!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),n&&n.forEach(i=>{i.x=(Math.random()-.5)*r*t.width+o[0],i.y=(Math.random()-.5)*r*t.height+o[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:n,edges:this.edges}}getType(){return"random"}}class Nb{constructor(t){const n=getLayoutByName(t.type);this.layoutInstance=new n(t)}layout(t){return this.layoutInstance.layout(t)}updateCfg(t){this.layoutInstance.updateCfg(t)}init(t){this.correctLayers(t.nodes),this.layoutInstance.init(t)}correctLayers(t){if(!(t!=null&&t.length))return;let n=1/0;const r=[];if(t.forEach(o=>{isString(o.layer)&&(o.layer=parseInt(o.layer,10)),!(o.layer===void 0||isNaN(o.layer))&&(r.push(o),o.layer<n&&(n=o.layer))}),n<=0){const o=Math.abs(n)+1;r.forEach(i=>i.layer+=o)}}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const Ab={force:Jn,fruchterman:rE,forceAtlas2:eb,gForce:We,force2:tn,dagre:uu,dagreCompound:vy,circular:Yn,radial:tE,concentric:bp,grid:Xe,mds:xp,comboForce:qE,comboCombined:JE,random:vb,"gForce-gpu":QE,"fruchterman-gpu":jE,er:hb}},95812:function(at,At,B){"use strict";B.d(At,{z2:function(){return xt}});var Z=B(5671);class an extends Z.NB{}(function(wt){function Ye(Et){const pt=[],Ht=Z.Lu.getForeignObjectMarkup();return Et?pt.push({tagName:Et,selector:"body"},Ht):pt.push(Ht),pt}wt.config({view:"react-shape-view",markup:Ye(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(Et){if(Et.markup==null){const pt=Et.primer;if(pt){Et.markup=Ye(pt);let Ht={};switch(pt){case"circle":Ht={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":Ht={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"};break;default:break}Et.attrs=Z.QK.merge({},{body:Object.assign({refWidth:null,refHeight:null},Ht)},Et.attrs||{})}}return Et}}),Z.NB.registry.register("react-shape",wt,!0)})(an||(an={}));var Ce=B(87363),rt=B.n(Ce),ln=B(61533),Tt=B(86850),ye;(function(wt){let Ye=!1,Et;const pt=(Pn,sr)=>{const mn=sr.payload;switch(sr.type){case"add":{const nn=Pn.findIndex(ur=>ur.id===mn.id);return nn>=0?(Pn[nn]=mn,[...Pn]):[...Pn,mn]}case"remove":{const nn=Pn.findIndex(ur=>ur.id===mn.id);if(nn>=0){const ur=[...Pn];return ur.splice(nn,1),ur}break}default:break}return Pn};function Ht(Pn,sr){Ye&&Et({type:"add",payload:{id:Pn,portal:sr}})}wt.connect=Ht;function wn(Pn){Ye&&Et({type:"remove",payload:{id:Pn}})}wt.disconnect=wn;function pn(){return Ye}wt.isActive=pn;function dr(){return()=>{Ye=!0;const[Pn,sr]=(0,Ce.useReducer)(pt,[]);return Et=sr,rt().createElement(rt().Fragment,{children:Pn.map(mn=>mn.portal)})}}wt.getProvider=dr})(ye||(ye={}));var vn=function(wt,Ye){var Et={};for(var pt in wt)Object.prototype.hasOwnProperty.call(wt,pt)&&Ye.indexOf(pt)<0&&(Et[pt]=wt[pt]);if(wt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ht=0,pt=Object.getOwnPropertySymbols(wt);Ht<pt.length;Ht++)Ye.indexOf(pt[Ht])<0&&Object.prototype.propertyIsEnumerable.call(wt,pt[Ht])&&(Et[pt[Ht]]=wt[pt[Ht]]);return Et};const Zn={};function xt(wt){const{shape:Ye,component:Et,effect:pt,inherit:Ht}=wt,wn=vn(wt,["shape","component","effect","inherit"]);if(!Ye)throw new Error("should specify shape in config");Zn[Ye]={component:Et,effect:pt},Z.kJ.registerNode(Ye,Object.assign({inherit:Ht||"react-shape"},wn),!0)}class Lt extends rt().PureComponent{constructor(Ye){super(Ye),this.state={tick:0}}componentDidMount(){const{node:Ye}=this.props;Ye.on("change:*",({key:Et})=>{const pt=Zn[Ye.shape];if(pt){const{effect:Ht}=pt;(!Ht||Ht.includes(Et))&&this.setState({tick:this.state.tick+1})}})}clone(Ye){const{node:Et,graph:pt}=this.props;return typeof Ye.type=="string"?rt().cloneElement(Ye):rt().cloneElement(Ye,{node:Et,graph:pt})}render(){const{node:Ye}=this.props,Et=Zn[Ye.shape];if(!Et)return null;const{component:pt}=Et;if(rt().isValidElement(pt))return this.clone(pt);const Ht=pt;return this.clone(rt().createElement(Ht,null))}}class ot extends Z.DK{targetId(){return`${this.graph.view.cid}:${this.cell.id}`}getComponentContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(Ye){const Et=super.confirmUpdate(Ye);return this.handleAction(Et,ot.action,()=>{this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const Ye=this.getComponentContainer(),Et=this.cell;if(Ye){const pt=rt().createElement(Lt,{node:Et,graph:this.graph});if(ye.isActive()){const Ht=(0,ln.createPortal)(pt,Ye);ye.connect(this.targetId(),Ht)}else this.root=(0,Tt.createRoot)(Ye),this.root.render(pt)}}unmountReactComponent(){this.getComponentContainer()&&this.root&&(this.root.unmount(),this.root=void 0)}onMouseDown(Ye,Et,pt){const Ht=Ye.target;if(Ht.tagName.toLowerCase()==="input"){const pn=Ht.getAttribute("type");if(pn==null||["text","password","number","email","search","tel","url"].includes(pn))return}super.onMouseDown(Ye,Et,pt)}unmount(){return ye.isActive()&&ye.disconnect(this.targetId()),this.unmountReactComponent(),super.unmount(),this}}(function(wt){wt.action="react",wt.config({bootstrap:[wt.action],actions:{component:wt.action}}),Z.DK.registry.register("react-shape-view",wt,!0)})(ot||(ot={}))},32101:function(at){(function(At,B){at.exports=B()})(this,function(){"use strict";var At=function(p){return p instanceof Uint8Array||p instanceof Uint16Array||p instanceof Uint32Array||p instanceof Int8Array||p instanceof Int16Array||p instanceof Int32Array||p instanceof Float32Array||p instanceof Float64Array||p instanceof Uint8ClampedArray},B=function(p,_){for(var O=Object.keys(_),J=0;J<O.length;++J)p[O[J]]=_[O[J]];return p},Z=`
`;function an(p){return typeof atob!="undefined"?atob(p):"base64:"+p}function Ce(p){var _=new Error("(regl) "+p);throw console.error(_),_}function rt(p,_){p||Ce(_)}function ln(p){return p?": "+p:""}function Tt(p,_,O){p in _||Ce("unknown parameter ("+p+")"+ln(O)+". possible values: "+Object.keys(_).join())}function ye(p,_){At(p)||Ce("invalid parameter type"+ln(_)+". must be a typed array")}function vn(p,_){switch(_){case"number":return typeof p=="number";case"object":return typeof p=="object";case"string":return typeof p=="string";case"boolean":return typeof p=="boolean";case"function":return typeof p=="function";case"undefined":return typeof p=="undefined";case"symbol":return typeof p=="symbol"}}function Zn(p,_,O){vn(p,_)||Ce("invalid parameter type"+ln(O)+". expected "+_+", got "+typeof p)}function xt(p,_){p>=0&&(p|0)===p||Ce("invalid parameter type, ("+p+")"+ln(_)+". must be a nonnegative integer")}function Lt(p,_,O){_.indexOf(p)<0&&Ce("invalid value"+ln(O)+". must be one of: "+_)}var ot=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function wt(p){Object.keys(p).forEach(function(_){ot.indexOf(_)<0&&Ce('invalid regl constructor argument "'+_+'". must be one of '+ot)})}function Ye(p,_){for(p=p+"";p.length<_;)p=" "+p;return p}function Et(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function pt(p,_){this.number=p,this.line=_,this.errors=[]}function Ht(p,_,O){this.file=p,this.line=_,this.message=O}function wn(){var p=new Error,_=(p.stack||p).toString(),O=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(_);if(O)return O[1];var J=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(_);return J?J[1]:"unknown"}function pn(){var p=new Error,_=(p.stack||p).toString(),O=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(_);if(O)return O[1];var J=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(_);return J?J[1]:"unknown"}function dr(p,_){var O=p.split(`
`),J=1,ue=0,K={unknown:new Et,0:new Et};K.unknown.name=K[0].name=_||wn(),K.unknown.lines.push(new pt(0,""));for(var te=0;te<O.length;++te){var he=O[te],we=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(he);if(we)switch(we[1]){case"line":var Re=/(\d+)(\s+\d+)?/.exec(we[2]);Re&&(J=Re[1]|0,Re[2]&&(ue=Re[2]|0,ue in K||(K[ue]=new Et)));break;case"define":var _e=/SHADER_NAME(_B64)?\s+(.*)$/.exec(we[2]);_e&&(K[ue].name=_e[1]?an(_e[2]):_e[2]);break}K[ue].lines.push(new pt(J++,he))}return Object.keys(K).forEach(function(Le){var Pe=K[Le];Pe.lines.forEach(function(fe){Pe.index[fe.number]=fe})}),K}function Pn(p){var _=[];return p.split(`
`).forEach(function(O){if(!(O.length<5)){var J=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(O);J?_.push(new Ht(J[1]|0,J[2]|0,J[3].trim())):O.length>0&&_.push(new Ht("unknown",0,O))}}),_}function sr(p,_){_.forEach(function(O){var J=p[O.file];if(J){var ue=J.index[O.line];if(ue){ue.errors.push(O),J.hasErrors=!0;return}}p.unknown.hasErrors=!0,p.unknown.lines[0].errors.push(O)})}function mn(p,_,O,J,ue){if(!p.getShaderParameter(_,p.COMPILE_STATUS)){var K=p.getShaderInfoLog(_),te=J===p.FRAGMENT_SHADER?"fragment":"vertex";se(O,"string",te+" shader source must be a string",ue);var he=dr(O,ue),we=Pn(K);sr(he,we),Object.keys(he).forEach(function(Re){var _e=he[Re];if(!_e.hasErrors)return;var Le=[""],Pe=[""];function fe(ke,V){Le.push(ke),Pe.push(V||"")}fe("file number "+Re+": "+_e.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),_e.lines.forEach(function(ke){if(ke.errors.length>0){fe(Ye(ke.number,4)+"|  ","background-color:yellow; font-weight:bold"),fe(ke.line+Z,"color:red; background-color:yellow; font-weight:bold");var V=0;ke.errors.forEach(function(ne){var Se=ne.message,$e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Se);if($e){var oe=$e[1];switch(Se=$e[2],oe){case"assign":oe="=";break}V=Math.max(ke.line.indexOf(oe,V),0)}else V=0;fe(Ye("| ",6)),fe(Ye("^^^",V+3)+Z,"font-weight:bold"),fe(Ye("| ",6)),fe(Se+Z,"font-weight:bold")}),fe(Ye("| ",6)+Z)}else fe(Ye(ke.number,4)+"|  "),fe(ke.line+Z,"color:red")}),typeof document!="undefined"&&!window.chrome?(Pe[0]=Le.join("%c"),console.log.apply(console,Pe)):console.log(Le.join(""))}),rt.raise("Error compiling "+te+" shader, "+he[0].name)}}function nn(p,_,O,J,ue){if(!p.getProgramParameter(_,p.LINK_STATUS)){var K=p.getProgramInfoLog(_),te=dr(O,ue),he=dr(J,ue),we='Error linking program with vertex shader, "'+he[0].name+'", and fragment shader "'+te[0].name+'"';typeof document!="undefined"?console.log("%c"+we+Z+"%c"+K,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(we+Z+K),rt.raise(we)}}function ur(p){p._commandRef=wn()}function lt(p,_,O,J){ur(p);function ue(we){return we?J.id(we):0}p._fragId=ue(p.static.frag),p._vertId=ue(p.static.vert);function K(we,Re){Object.keys(Re).forEach(function(_e){we[J.id(_e)]=!0})}var te=p._uniformSet={};K(te,_.static),K(te,_.dynamic);var he=p._attributeSet={};K(he,O.static),K(he,O.dynamic),p._hasCount="count"in p.static||"count"in p.dynamic||"elements"in p.static||"elements"in p.dynamic}function ft(p,_){var O=pn();Ce(p+" in command "+(_||wn())+(O==="unknown"?"":" called from "+O))}function He(p,_,O){p||ft(_,O||wn())}function Fe(p,_,O,J){p in _||ft("unknown parameter ("+p+")"+ln(O)+". possible values: "+Object.keys(_).join(),J||wn())}function se(p,_,O,J){vn(p,_)||ft("invalid parameter type"+ln(O)+". expected "+_+", got "+typeof p,J||wn())}function Y(p){p()}function ce(p,_,O){p.texture?Lt(p.texture._texture.internalformat,_,"unsupported texture format for attachment"):Lt(p.renderbuffer._renderbuffer.format,O,"unsupported renderbuffer format for attachment")}var ve=33071,Xe=9728,Ke=9984,We=9985,dt=9986,ct=9987,Ft=5120,Jt=5121,Rn=5122,Tr=5123,rn=5124,Er=5125,Dr=5126,br=32819,zr=32820,Br=33635,Or=34042,po=36193,or={};or[Ft]=or[Jt]=1,or[Rn]=or[Tr]=or[po]=or[Br]=or[br]=or[zr]=2,or[rn]=or[Er]=or[Dr]=or[Or]=4;function Lr(p,_){return p===zr||p===br||p===Br?2:p===Or?4:or[p]*_}function so(p){return!(p&p-1)&&!!p}function Ao(p,_,O){var J,ue=_.width,K=_.height,te=_.channels;rt(ue>0&&ue<=O.maxTextureSize&&K>0&&K<=O.maxTextureSize,"invalid texture shape"),(p.wrapS!==ve||p.wrapT!==ve)&&rt(so(ue)&&so(K),"incompatible wrap mode for texture, both width and height must be power of 2"),_.mipmask===1?ue!==1&&K!==1&&rt(p.minFilter!==Ke&&p.minFilter!==dt&&p.minFilter!==We&&p.minFilter!==ct,"min filter requires mipmap"):(rt(so(ue)&&so(K),"texture must be a square power of 2 to support mipmapping"),rt(_.mipmask===(ue<<1)-1,"missing or incomplete mipmap data")),_.type===Dr&&(O.extensions.indexOf("oes_texture_float_linear")<0&&rt(p.minFilter===Xe&&p.magFilter===Xe,"filter not supported, must enable oes_texture_float_linear"),rt(!p.genMipmaps,"mipmap generation not supported with float textures"));var he=_.images;for(J=0;J<16;++J)if(he[J]){var we=ue>>J,Re=K>>J;rt(_.mipmask&1<<J,"missing mipmap data");var _e=he[J];if(rt(_e.width===we&&_e.height===Re,"invalid shape for mip images"),rt(_e.format===_.format&&_e.internalformat===_.internalformat&&_e.type===_.type,"incompatible type for mip image"),!_e.compressed)if(_e.data){var Le=Math.ceil(Lr(_e.type,te)*we/_e.unpackAlignment)*_e.unpackAlignment;rt(_e.data.byteLength===Le*Re,"invalid data for image, buffer size is inconsistent with image format")}else _e.element||_e.copy}else p.genMipmaps||rt((_.mipmask&1<<J)===0,"extra mipmap data");_.compressed&&rt(!p.genMipmaps,"mipmap generation for compressed images not supported")}function qr(p,_,O,J){var ue=p.width,K=p.height,te=p.channels;rt(ue>0&&ue<=J.maxTextureSize&&K>0&&K<=J.maxTextureSize,"invalid texture shape"),rt(ue===K,"cube map must be square"),rt(_.wrapS===ve&&_.wrapT===ve,"wrap mode not supported by cube map");for(var he=0;he<O.length;++he){var we=O[he];rt(we.width===ue&&we.height===K,"inconsistent cube map face shape"),_.genMipmaps&&(rt(!we.compressed,"can not generate mipmap for compressed textures"),rt(we.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Re=we.images,_e=0;_e<16;++_e){var Le=Re[_e];if(Le){var Pe=ue>>_e,fe=K>>_e;rt(we.mipmask&1<<_e,"missing mipmap data"),rt(Le.width===Pe&&Le.height===fe,"invalid shape for mip images"),rt(Le.format===p.format&&Le.internalformat===p.internalformat&&Le.type===p.type,"incompatible type for mip image"),Le.compressed||(Le.data?rt(Le.data.byteLength===Pe*fe*Math.max(Lr(Le.type,te),Le.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Le.element||Le.copy)}}}}var T=B(rt,{optional:Y,raise:Ce,commandRaise:ft,command:He,parameter:Tt,commandParameter:Fe,constructor:wt,type:Zn,commandType:se,isTypedArray:ye,nni:xt,oneOf:Lt,shaderError:mn,linkError:nn,callSite:pn,saveCommandRef:ur,saveDrawInfo:lt,framebufferFormat:ce,guessCommand:wn,texture2D:Ao,textureCube:qr}),lo=0,$n=0,Jr=5,Ur=6;function xr(p,_){this.id=lo++,this.type=p,this.data=_}function Ee(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ue(p){if(p.length===0)return[];var _=p.charAt(0),O=p.charAt(p.length-1);if(p.length>1&&_===O&&(_==='"'||_==="'"))return['"'+Ee(p.substr(1,p.length-2))+'"'];var J=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(p);if(J)return Ue(p.substr(0,J.index)).concat(Ue(J[1])).concat(Ue(p.substr(J.index+J[0].length)));var ue=p.split(".");if(ue.length===1)return['"'+Ee(p)+'"'];for(var K=[],te=0;te<ue.length;++te)K=K.concat(Ue(ue[te]));return K}function _t(p){return"["+Ue(p).join("][")+"]"}function en(p,_){return new xr(p,_t(_+""))}function tn(p){return typeof p=="function"&&!p._reglType||p instanceof xr}function It(p,_){if(typeof p=="function")return new xr($n,p);if(typeof p=="number"||typeof p=="boolean")return new xr(Jr,p);if(Array.isArray(p))return new xr(Ur,p.map((O,J)=>It(O,_+"["+J+"]")));if(p instanceof xr)return p;T(!1,"invalid option type in uniform "+_)}var Kt={DynamicVariable:xr,define:en,isDynamic:tn,unbox:It,accessor:_t},En={next:typeof requestAnimationFrame=="function"?function(p){return requestAnimationFrame(p)}:function(p){return setTimeout(p,16)},cancel:typeof cancelAnimationFrame=="function"?function(p){return cancelAnimationFrame(p)}:clearTimeout},Cn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function jn(){var p={"":0},_=[""];return{id:function(O){var J=p[O];return J||(J=p[O]=_.length,_.push(O),J)},str:function(O){return _[O]}}}function Vt(p,_,O){var J=document.createElement("canvas");B(J.style,{border:0,margin:0,padding:0,top:0,left:0}),p.appendChild(J),p===document.body&&(J.style.position="absolute",B(p.style,{margin:0,padding:0}));function ue(){var he=window.innerWidth,we=window.innerHeight;if(p!==document.body){var Re=p.getBoundingClientRect();he=Re.right-Re.left,we=Re.bottom-Re.top}J.width=O*he,J.height=O*we,B(J.style,{width:he+"px",height:we+"px"})}var K;p!==document.body&&typeof ResizeObserver=="function"?(K=new ResizeObserver(function(){setTimeout(ue)}),K.observe(p)):window.addEventListener("resize",ue,!1);function te(){K?K.disconnect():window.removeEventListener("resize",ue),p.removeChild(J)}return ue(),{canvas:J,onDestroy:te}}function _n(p,_){function O(J){try{return p.getContext(J,_)}catch(ue){return null}}return O("webgl")||O("experimental-webgl")||O("webgl-experimental")}function Sn(p){return typeof p.nodeName=="string"&&typeof p.appendChild=="function"&&typeof p.getBoundingClientRect=="function"}function wr(p){return typeof p.drawArrays=="function"||typeof p.drawElements=="function"}function Ir(p){return typeof p=="string"?p.split():(T(Array.isArray(p),"invalid extension array"),p)}function uo(p){return typeof p=="string"?(T(typeof document!="undefined","not supported outside of DOM"),document.querySelector(p)):p}function Nr(p){var _=p||{},O,J,ue,K,te={},he=[],we=[],Re=typeof window=="undefined"?1:window.devicePixelRatio,_e=!1,Le=function(ke){ke&&T.raise(ke)},Pe=function(){};if(typeof _=="string"?(T(typeof document!="undefined","selector queries only supported in DOM enviroments"),O=document.querySelector(_),T(O,"invalid query string for element")):typeof _=="object"?Sn(_)?O=_:wr(_)?(K=_,ue=K.canvas):(T.constructor(_),"gl"in _?K=_.gl:"canvas"in _?ue=uo(_.canvas):"container"in _&&(J=uo(_.container)),"attributes"in _&&(te=_.attributes,T.type(te,"object","invalid context attributes")),"extensions"in _&&(he=Ir(_.extensions)),"optionalExtensions"in _&&(we=Ir(_.optionalExtensions)),"onDone"in _&&(T.type(_.onDone,"function","invalid or missing onDone callback"),Le=_.onDone),"profile"in _&&(_e=!!_.profile),"pixelRatio"in _&&(Re=+_.pixelRatio,T(Re>0,"invalid pixel ratio"))):T.raise("invalid arguments to regl"),O&&(O.nodeName.toLowerCase()==="canvas"?ue=O:J=O),!K){if(!ue){T(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var fe=Vt(J||document.body,Le,Re);if(!fe)return null;ue=fe.canvas,Pe=fe.onDestroy}te.premultipliedAlpha===void 0&&(te.premultipliedAlpha=!0),K=_n(ue,te)}return K?{gl:K,canvas:ue,container:J,extensions:he,optionalExtensions:we,pixelRatio:Re,profile:_e,onDone:Le,onDestroy:Pe}:(Pe(),Le("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function wo(p,_){var O={};function J(te){T.type(te,"string","extension name must be string");var he=te.toLowerCase(),we;try{we=O[he]=p.getExtension(he)}catch(Re){}return!!we}for(var ue=0;ue<_.extensions.length;++ue){var K=_.extensions[ue];if(!J(K))return _.onDestroy(),_.onDone('"'+K+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return _.optionalExtensions.forEach(J),{extensions:O,restore:function(){Object.keys(O).forEach(function(te){if(O[te]&&!J(te))throw new Error("(regl): error restoring extension "+te)})}}}function Ct(p,_){for(var O=Array(p),J=0;J<p;++J)O[J]=_(J);return O}var jr=5120,$r=5121,eo=5122,to=5123,Yr=5124,_o=5125,Ro=5126;function ii(p){for(var _=16;_<=1<<28;_*=16)if(p<=_)return _;return 0}function Xo(p){var _,O;return _=(p>65535)<<4,p>>>=_,O=(p>255)<<3,p>>>=O,_|=O,O=(p>15)<<2,p>>>=O,_|=O,O=(p>3)<<1,p>>>=O,_|=O,_|p>>1}function Yo(){var p=Ct(8,function(){return[]});function _(K){var te=ii(K),he=p[Xo(te)>>2];return he.length>0?he.pop():new ArrayBuffer(te)}function O(K){p[Xo(K.byteLength)>>2].push(K)}function J(K,te){var he=null;switch(K){case jr:he=new Int8Array(_(te),0,te);break;case $r:he=new Uint8Array(_(te),0,te);break;case eo:he=new Int16Array(_(2*te),0,te);break;case to:he=new Uint16Array(_(2*te),0,te);break;case Yr:he=new Int32Array(_(4*te),0,te);break;case _o:he=new Uint32Array(_(4*te),0,te);break;case Ro:he=new Float32Array(_(4*te),0,te);break;default:return null}return he.length!==te?he.subarray(0,te):he}function ue(K){O(K.buffer)}return{alloc:_,free:O,allocType:J,freeType:ue}}var Qn=Yo();Qn.zero=Yo();var ai=3408,zo=3410,si=3411,ui=3412,Wi=3413,Xi=3414,Hi=3415,Co=33901,Bo=33902,_i=3379,Ja=3386,S=34921,C=36347,Ie=36348,Me=35661,Be=35660,Ge=34930,ht=36349,yt=34076,zt=34024,sn=7936,Mn=7937,un=7938,Tn=35724,dn=34047,bn=36063,qn=34852,nr=3553,Jn=34067,ir=34069,Xn=33984,Ar=6408,cr=5126,Dn=5121,Yn=36160,hr=36053,kn=36064,er=16384,Bn=function(p,_){var O=1;_.ext_texture_filter_anisotropic&&(O=p.getParameter(dn));var J=1,ue=1;_.webgl_draw_buffers&&(J=p.getParameter(qn),ue=p.getParameter(bn));var K=!!_.oes_texture_float;if(K){var te=p.createTexture();p.bindTexture(nr,te),p.texImage2D(nr,0,Ar,1,1,0,Ar,cr,null);var he=p.createFramebuffer();if(p.bindFramebuffer(Yn,he),p.framebufferTexture2D(Yn,kn,nr,te,0),p.bindTexture(nr,null),p.checkFramebufferStatus(Yn)!==hr)K=!1;else{p.viewport(0,0,1,1),p.clearColor(1,0,0,1),p.clear(er);var we=Qn.allocType(cr,4);p.readPixels(0,0,1,1,Ar,cr,we),p.getError()?K=!1:(p.deleteFramebuffer(he),p.deleteTexture(te),K=we[0]===1),Qn.freeType(we)}}var Re=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),_e=!0;if(!Re){var Le=p.createTexture(),Pe=Qn.allocType(Dn,36);p.activeTexture(Xn),p.bindTexture(Jn,Le),p.texImage2D(ir,0,Ar,3,3,0,Ar,Dn,Pe),Qn.freeType(Pe),p.bindTexture(Jn,null),p.deleteTexture(Le),_e=!p.getError()}return{colorBits:[p.getParameter(zo),p.getParameter(si),p.getParameter(ui),p.getParameter(Wi)],depthBits:p.getParameter(Xi),stencilBits:p.getParameter(Hi),subpixelBits:p.getParameter(ai),extensions:Object.keys(_).filter(function(fe){return!!_[fe]}),maxAnisotropic:O,maxDrawbuffers:J,maxColorAttachments:ue,pointSizeDims:p.getParameter(Co),lineWidthDims:p.getParameter(Bo),maxViewportDims:p.getParameter(Ja),maxCombinedTextureUnits:p.getParameter(Me),maxCubeMapSize:p.getParameter(yt),maxRenderbufferSize:p.getParameter(zt),maxTextureUnits:p.getParameter(Ge),maxTextureSize:p.getParameter(_i),maxAttributes:p.getParameter(S),maxVertexUniforms:p.getParameter(C),maxVertexTextureUnits:p.getParameter(Be),maxVaryingVectors:p.getParameter(Ie),maxFragmentUniforms:p.getParameter(ht),glsl:p.getParameter(Tn),renderer:p.getParameter(Mn),vendor:p.getParameter(sn),version:p.getParameter(un),readFloat:K,npotTextureCube:_e}};function Bt(p){return!!p&&typeof p=="object"&&Array.isArray(p.shape)&&Array.isArray(p.stride)&&typeof p.offset=="number"&&p.shape.length===p.stride.length&&(Array.isArray(p.data)||At(p.data))}var cn=function(p){return Object.keys(p).map(function(_){return p[_]})},Un={shape:Pt,flatten:Mt};function ar(p,_,O){for(var J=0;J<_;++J)O[J]=p[J]}function mo(p,_,O,J){for(var ue=0,K=0;K<_;++K)for(var te=p[K],he=0;he<O;++he)J[ue++]=te[he]}function Do(p,_,O,J,ue,K){for(var te=K,he=0;he<_;++he)for(var we=p[he],Re=0;Re<O;++Re)for(var _e=we[Re],Le=0;Le<J;++Le)ue[te++]=_e[Le]}function Oo(p,_,O,J,ue){for(var K=1,te=O+1;te<_.length;++te)K*=_[te];var he=_[O];if(_.length-O===4){var we=_[O+1],Re=_[O+2],_e=_[O+3];for(te=0;te<he;++te)Do(p[te],we,Re,_e,J,ue),ue+=K}else for(te=0;te<he;++te)Oo(p[te],_,O+1,J,ue),ue+=K}function Mt(p,_,O,J){var ue=1;if(_.length)for(var K=0;K<_.length;++K)ue*=_[K];else ue=0;var te=J||Qn.allocType(O,ue);switch(_.length){case 0:break;case 1:ar(p,_[0],te);break;case 2:mo(p,_[0],_[1],te);break;case 3:Do(p,_[0],_[1],_[2],te,0);break;default:Oo(p,_,0,te,0)}return te}function Pt(p){for(var _=[],O=p;O.length;O=O[0])_.push(O.length);return _}var In={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},mt=5120,Fn=5122,Vr=5124,co=5121,go=5123,Ho=5125,Ko=5126,Qo=5126,fo={int8:mt,int16:Fn,int32:Vr,uint8:co,uint16:go,uint32:Ho,float:Ko,float32:Qo},Ps=35048,xa=35040,na={dynamic:Ps,stream:xa,static:35044},qo=Un.flatten,wa=Un.shape,vr=35044,Jo=35040,Si=5121,es=5126,ci=[];ci[5120]=1,ci[5122]=2,ci[5124]=4,ci[5121]=1,ci[5123]=2,ci[5125]=4,ci[5126]=4;function Ti(p){return In[Object.prototype.toString.call(p)]|0}function fi(p,_){for(var O=0;O<_.length;++O)p[O]=_[O]}function ra(p,_,O,J,ue,K,te){for(var he=0,we=0;we<O;++we)for(var Re=0;Re<J;++Re)p[he++]=_[ue*we+K*Re+te]}function _a(p,_,O,J){var ue=0,K={};function te(V){this.id=ue++,this.buffer=p.createBuffer(),this.type=V,this.usage=vr,this.byteLength=0,this.dimension=1,this.dtype=Si,this.persistentData=null,O.profile&&(this.stats={size:0})}te.prototype.bind=function(){p.bindBuffer(this.type,this.buffer)},te.prototype.destroy=function(){Pe(this)};var he=[];function we(V,ne){var Se=he.pop();return Se||(Se=new te(V)),Se.bind(),Le(Se,ne,Jo,0,1,!1),Se}function Re(V){he.push(V)}function _e(V,ne,Se){V.byteLength=ne.byteLength,p.bufferData(V.type,ne,Se)}function Le(V,ne,Se,$e,oe,je){var pe;if(V.usage=Se,Array.isArray(ne)){if(V.dtype=$e||es,ne.length>0){var De;if(Array.isArray(ne[0])){pe=wa(ne);for(var me=1,Oe=1;Oe<pe.length;++Oe)me*=pe[Oe];V.dimension=me,De=qo(ne,pe,V.dtype),_e(V,De,Se),je?V.persistentData=De:Qn.freeType(De)}else if(typeof ne[0]=="number"){V.dimension=oe;var vt=Qn.allocType(V.dtype,ne.length);fi(vt,ne),_e(V,vt,Se),je?V.persistentData=vt:Qn.freeType(vt)}else At(ne[0])?(V.dimension=ne[0].length,V.dtype=$e||Ti(ne[0])||es,De=qo(ne,[ne.length,ne[0].length],V.dtype),_e(V,De,Se),je?V.persistentData=De:Qn.freeType(De)):T.raise("invalid buffer data")}}else if(At(ne))V.dtype=$e||Ti(ne),V.dimension=oe,_e(V,ne,Se),je&&(V.persistentData=new Uint8Array(new Uint8Array(ne.buffer)));else if(Bt(ne)){pe=ne.shape;var Dt=ne.stride,ze=ne.offset,Ne=0,de=0,Nt=0,Zt=0;pe.length===1?(Ne=pe[0],de=1,Nt=Dt[0],Zt=0):pe.length===2?(Ne=pe[0],de=pe[1],Nt=Dt[0],Zt=Dt[1]):T.raise("invalid shape"),V.dtype=$e||Ti(ne.data)||es,V.dimension=de;var et=Qn.allocType(V.dtype,Ne*de);ra(et,ne.data,Ne,de,Nt,Zt,ze),_e(V,et,Se),je?V.persistentData=et:Qn.freeType(et)}else ne instanceof ArrayBuffer?(V.dtype=Si,V.dimension=oe,_e(V,ne,Se),je&&(V.persistentData=new Uint8Array(new Uint8Array(ne)))):T.raise("invalid buffer data")}function Pe(V){_.bufferCount--,J(V);var ne=V.buffer;T(ne,"buffer must not be deleted already"),p.deleteBuffer(ne),V.buffer=null,delete K[V.id]}function fe(V,ne,Se,$e){_.bufferCount++;var oe=new te(ne);K[oe.id]=oe;function je(me){var Oe=vr,vt=null,Dt=0,ze=0,Ne=1;return Array.isArray(me)||At(me)||Bt(me)||me instanceof ArrayBuffer?vt=me:typeof me=="number"?Dt=me|0:me&&(T.type(me,"object","buffer arguments must be an object, a number or an array"),"data"in me&&(T(vt===null||Array.isArray(vt)||At(vt)||Bt(vt),"invalid data for buffer"),vt=me.data),"usage"in me&&(T.parameter(me.usage,na,"invalid buffer usage"),Oe=na[me.usage]),"type"in me&&(T.parameter(me.type,fo,"invalid buffer type"),ze=fo[me.type]),"dimension"in me&&(T.type(me.dimension,"number","invalid dimension"),Ne=me.dimension|0),"length"in me&&(T.nni(Dt,"buffer length must be a nonnegative integer"),Dt=me.length|0)),oe.bind(),vt?Le(oe,vt,Oe,ze,Ne,$e):(Dt&&p.bufferData(oe.type,Dt,Oe),oe.dtype=ze||Si,oe.usage=Oe,oe.dimension=Ne,oe.byteLength=Dt),O.profile&&(oe.stats.size=oe.byteLength*ci[oe.dtype]),je}function pe(me,Oe){T(Oe+me.byteLength<=oe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+me.byteLength+" starting from offset "+Oe+" to a buffer of size "+oe.byteLength),p.bufferSubData(oe.type,Oe,me)}function De(me,Oe){var vt=(Oe||0)|0,Dt;if(oe.bind(),At(me)||me instanceof ArrayBuffer)pe(me,vt);else if(Array.isArray(me)){if(me.length>0)if(typeof me[0]=="number"){var ze=Qn.allocType(oe.dtype,me.length);fi(ze,me),pe(ze,vt),Qn.freeType(ze)}else if(Array.isArray(me[0])||At(me[0])){Dt=wa(me);var Ne=qo(me,Dt,oe.dtype);pe(Ne,vt),Qn.freeType(Ne)}else T.raise("invalid buffer data")}else if(Bt(me)){Dt=me.shape;var de=me.stride,Nt=0,Zt=0,et=0,kt=0;Dt.length===1?(Nt=Dt[0],Zt=1,et=de[0],kt=0):Dt.length===2?(Nt=Dt[0],Zt=Dt[1],et=de[0],kt=de[1]):T.raise("invalid shape");var St=Array.isArray(me.data)?oe.dtype:Ti(me.data),Qt=Qn.allocType(St,Nt*Zt);ra(Qt,me.data,Nt,Zt,et,kt,me.offset),pe(Qt,vt),Qn.freeType(Qt)}else T.raise("invalid data for buffer subdata");return je}return Se||je(V),je._reglType="buffer",je._buffer=oe,je.subdata=De,O.profile&&(je.stats=oe.stats),je.destroy=function(){Pe(oe)},je}function ke(){cn(K).forEach(function(V){V.buffer=p.createBuffer(),p.bindBuffer(V.type,V.buffer),p.bufferData(V.type,V.persistentData||V.byteLength,V.usage)})}return O.profile&&(_.getTotalBufferSize=function(){var V=0;return Object.keys(K).forEach(function(ne){V+=K[ne].stats.size}),V}),{create:fe,createStream:we,destroyStream:Re,clear:function(){cn(K).forEach(Pe),he.forEach(Pe)},getBuffer:function(V){return V&&V._buffer instanceof te?V._buffer:null},restore:ke,_initBuffer:Le}}var Fs=0,zs=0,Uo=1,Fu=1,li=4,Ii=4,di={points:Fs,point:zs,lines:Uo,line:Fu,triangles:li,triangle:Ii,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Bs=0,zu=1,hi=4,Sa=5120,Ni=5121,Ta=5122,ei=5123,Us=5124,vi=5125,ts=34963,Bu=35040,$s=35044;function oa(p,_,O,J){var ue={},K=0,te={uint8:Ni,uint16:ei};_.oes_element_index_uint&&(te.uint32=vi);function he(ke){this.id=K++,ue[this.id]=this,this.buffer=ke,this.primType=hi,this.vertCount=0,this.type=0}he.prototype.bind=function(){this.buffer.bind()};var we=[];function Re(ke){var V=we.pop();return V||(V=new he(O.create(null,ts,!0,!1)._buffer)),Le(V,ke,Bu,-1,-1,0,0),V}function _e(ke){we.push(ke)}function Le(ke,V,ne,Se,$e,oe,je){ke.buffer.bind();var pe;if(V){var De=je;!je&&(!At(V)||Bt(V)&&!At(V.data))&&(De=_.oes_element_index_uint?vi:ei),O._initBuffer(ke.buffer,V,ne,De,3)}else p.bufferData(ts,oe,ne),ke.buffer.dtype=pe||Ni,ke.buffer.usage=ne,ke.buffer.dimension=3,ke.buffer.byteLength=oe;if(pe=je,!je){switch(ke.buffer.dtype){case Ni:case Sa:pe=Ni;break;case ei:case Ta:pe=ei;break;case vi:case Us:pe=vi;break;default:T.raise("unsupported type for element array")}ke.buffer.dtype=pe}ke.type=pe,T(pe!==vi||!!_.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var me=$e;me<0&&(me=ke.buffer.byteLength,pe===ei?me>>=1:pe===vi&&(me>>=2)),ke.vertCount=me;var Oe=Se;if(Se<0){Oe=hi;var vt=ke.buffer.dimension;vt===1&&(Oe=Bs),vt===2&&(Oe=zu),vt===3&&(Oe=hi)}ke.primType=Oe}function Pe(ke){J.elementsCount--,T(ke.buffer!==null,"must not double destroy elements"),delete ue[ke.id],ke.buffer.destroy(),ke.buffer=null}function fe(ke,V){var ne=O.create(null,ts,!0),Se=new he(ne._buffer);J.elementsCount++;function $e(oe){if(!oe)ne(),Se.primType=hi,Se.vertCount=0,Se.type=Ni;else if(typeof oe=="number")ne(oe),Se.primType=hi,Se.vertCount=oe|0,Se.type=Ni;else{var je=null,pe=$s,De=-1,me=-1,Oe=0,vt=0;Array.isArray(oe)||At(oe)||Bt(oe)?je=oe:(T.type(oe,"object","invalid arguments for elements"),"data"in oe&&(je=oe.data,T(Array.isArray(je)||At(je)||Bt(je),"invalid data for element buffer")),"usage"in oe&&(T.parameter(oe.usage,na,"invalid element buffer usage"),pe=na[oe.usage]),"primitive"in oe&&(T.parameter(oe.primitive,di,"invalid element buffer primitive"),De=di[oe.primitive]),"count"in oe&&(T(typeof oe.count=="number"&&oe.count>=0,"invalid vertex count for elements"),me=oe.count|0),"type"in oe&&(T.parameter(oe.type,te,"invalid buffer type"),vt=te[oe.type]),"length"in oe?Oe=oe.length|0:(Oe=me,vt===ei||vt===Ta?Oe*=2:(vt===vi||vt===Us)&&(Oe*=4))),Le(Se,je,pe,De,me,Oe,vt)}return $e}return $e(ke),$e._reglType="elements",$e._elements=Se,$e.subdata=function(oe,je){return ne.subdata(oe,je),$e},$e.destroy=function(){Pe(Se)},$e}return{create:fe,createStream:Re,destroyStream:_e,getElements:function(ke){return typeof ke=="function"&&ke._elements instanceof he?ke._elements:null},clear:function(){cn(ue).forEach(Pe)}}}var ns=new Float32Array(1),Vs=new Uint32Array(ns.buffer),Ia=5123;function rs(p){for(var _=Qn.allocType(Ia,p.length),O=0;O<p.length;++O)if(isNaN(p[O]))_[O]=65535;else if(p[O]===1/0)_[O]=31744;else if(p[O]===-1/0)_[O]=64512;else{ns[0]=p[O];var J=Vs[0],ue=J>>>31<<15,K=(J<<1>>>24)-127,te=J>>13&1024-1;if(K<-24)_[O]=ue;else if(K<-14){var he=-14-K;_[O]=ue+(te+1024>>he)}else K>15?_[O]=ue+31744:_[O]=ue+(K+15<<10)+te}return _}function pr(p){return Array.isArray(p)||At(p)}var os=function(p){return!(p&p-1)&&!!p},Na=34467,$o=3553,is=34067,ia=34069,Vo=6408,aa=6406,Zi=6407,ji=6409,Ai=6410,rr=32854,On=32855,Wr=36194,Xr=32819,Lo=32820,Mo=33635,Uu=34042,Ws=6402,Xs=34041,$u=35904,Vu=35906,Aa=36193,Wu=33776,Xu=33777,Hu=33778,Zu=33779,jc=35986,Yc=35987,Kc=34798,Qc=35840,qc=35841,ju=35842,Jc=35843,ef=36196,as=5121,tf=5123,nf=5125,Hs=5126,Th=10242,Ih=10243,zl=10497,Yu=33071,Bl=33648,Ul=10240,$l=10241,ss=9728,Vl=9729,us=9984,rf=9985,of=9986,Ku=9987,Nh=33170,cs=4352,Ri=4353,Wl=4354,Ra=34046,Xl=3317,af=37440,sf=37441,Ah=37443,Hl=37444,Ca=33984,fs=[us,of,rf,Ku],Zs=[0,ji,Ai,Zi,Vo],Zo={};Zo[ji]=Zo[aa]=Zo[Ws]=1,Zo[Xs]=Zo[Ai]=2,Zo[Zi]=Zo[$u]=3,Zo[Vo]=Zo[Vu]=4;function sa(p){return"[object "+p+"]"}var Qu=sa("HTMLCanvasElement"),uf=sa("OffscreenCanvas"),qu=sa("CanvasRenderingContext2D"),Ju=sa("ImageBitmap"),js=sa("HTMLImageElement"),cf=sa("HTMLVideoElement"),Zl=Object.keys(In).concat([Qu,uf,qu,Ju,js,cf]),ls=[];ls[as]=1,ls[Hs]=4,ls[Aa]=2,ls[tf]=2,ls[nf]=4;var no=[];no[rr]=2,no[On]=2,no[Wr]=2,no[Xs]=4,no[Wu]=.5,no[Xu]=.5,no[Hu]=1,no[Zu]=1,no[jc]=.5,no[Yc]=1,no[Kc]=1,no[Qc]=.5,no[qc]=.25,no[ju]=.5,no[Jc]=.25,no[ef]=.5;function Ys(p){return Array.isArray(p)&&(p.length===0||typeof p[0]=="number")}function ec(p){if(!Array.isArray(p))return!1;var _=p.length;return!(_===0||!pr(p[0]))}function So(p){return Object.prototype.toString.call(p)}function jl(p){return So(p)===Qu}function tc(p){return So(p)===uf}function Yl(p){return So(p)===qu}function ff(p){return So(p)===Ju}function Kl(p){return So(p)===js}function lf(p){return So(p)===cf}function Ks(p){if(!p)return!1;var _=So(p);return Zl.indexOf(_)>=0?!0:Ys(p)||ec(p)||Bt(p)}function Ql(p){return In[Object.prototype.toString.call(p)]|0}function ql(p,_){var O=_.length;switch(p.type){case as:case tf:case nf:case Hs:var J=Qn.allocType(p.type,O);J.set(_),p.data=J;break;case Aa:p.data=rs(_);break;default:T.raise("unsupported texture type, must specify a typed array")}}function df(p,_){return Qn.allocType(p.type===Aa?Hs:p.type,_)}function hf(p,_){p.type===Aa?(p.data=rs(_),Qn.freeType(_)):p.data=_}function vf(p,_,O,J,ue,K){for(var te=p.width,he=p.height,we=p.channels,Re=te*he*we,_e=df(p,Re),Le=0,Pe=0;Pe<he;++Pe)for(var fe=0;fe<te;++fe)for(var ke=0;ke<we;++ke)_e[Le++]=_[O*fe+J*Pe+ue*ke+K];hf(p,_e)}function Qs(p,_,O,J,ue,K){var te;if(typeof no[p]!="undefined"?te=no[p]:te=Zo[p]*ls[_],K&&(te*=6),ue){for(var he=0,we=O;we>=1;)he+=te*we*we,we/=2;return he}else return te*O*J}function Jl(p,_,O,J,ue,K,te){var he={"don't care":cs,"dont care":cs,nice:Wl,fast:Ri},we={repeat:zl,clamp:Yu,mirror:Bl},Re={nearest:ss,linear:Vl},_e=B({mipmap:Ku,"nearest mipmap nearest":us,"linear mipmap nearest":rf,"nearest mipmap linear":of,"linear mipmap linear":Ku},Re),Le={none:0,browser:Hl},Pe={uint8:as,rgba4:Xr,rgb565:Mo,"rgb5 a1":Lo},fe={alpha:aa,luminance:ji,"luminance alpha":Ai,rgb:Zi,rgba:Vo,rgba4:rr,"rgb5 a1":On,rgb565:Wr},ke={};_.ext_srgb&&(fe.srgb=$u,fe.srgba=Vu),_.oes_texture_float&&(Pe.float32=Pe.float=Hs),_.oes_texture_half_float&&(Pe.float16=Pe["half float"]=Aa),_.webgl_depth_texture&&(B(fe,{depth:Ws,"depth stencil":Xs}),B(Pe,{uint16:tf,uint32:nf,"depth stencil":Uu})),_.webgl_compressed_texture_s3tc&&B(ke,{"rgb s3tc dxt1":Wu,"rgba s3tc dxt1":Xu,"rgba s3tc dxt3":Hu,"rgba s3tc dxt5":Zu}),_.webgl_compressed_texture_atc&&B(ke,{"rgb atc":jc,"rgba atc explicit alpha":Yc,"rgba atc interpolated alpha":Kc}),_.webgl_compressed_texture_pvrtc&&B(ke,{"rgb pvrtc 4bppv1":Qc,"rgb pvrtc 2bppv1":qc,"rgba pvrtc 4bppv1":ju,"rgba pvrtc 2bppv1":Jc}),_.webgl_compressed_texture_etc1&&(ke["rgb etc1"]=ef);var V=Array.prototype.slice.call(p.getParameter(Na));Object.keys(ke).forEach(function(D){var q=ke[D];V.indexOf(q)>=0&&(fe[D]=q)});var ne=Object.keys(fe);O.textureFormats=ne;var Se=[];Object.keys(fe).forEach(function(D){var q=fe[D];Se[q]=D});var $e=[];Object.keys(Pe).forEach(function(D){var q=Pe[D];$e[q]=D});var oe=[];Object.keys(Re).forEach(function(D){var q=Re[D];oe[q]=D});var je=[];Object.keys(_e).forEach(function(D){var q=_e[D];je[q]=D});var pe=[];Object.keys(we).forEach(function(D){var q=we[D];pe[q]=D});var De=ne.reduce(function(D,q){var j=fe[q];return j===ji||j===aa||j===ji||j===Ai||j===Ws||j===Xs||_.ext_srgb&&(j===$u||j===Vu)?D[j]=j:j===On||q.indexOf("rgba")>=0?D[j]=Vo:D[j]=Zi,D},{});function me(){this.internalformat=Vo,this.format=Vo,this.type=as,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Hl,this.width=0,this.height=0,this.channels=0}function Oe(D,q){D.internalformat=q.internalformat,D.format=q.format,D.type=q.type,D.compressed=q.compressed,D.premultiplyAlpha=q.premultiplyAlpha,D.flipY=q.flipY,D.unpackAlignment=q.unpackAlignment,D.colorSpace=q.colorSpace,D.width=q.width,D.height=q.height,D.channels=q.channels}function vt(D,q){if(!(typeof q!="object"||!q)){if("premultiplyAlpha"in q&&(T.type(q.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),D.premultiplyAlpha=q.premultiplyAlpha),"flipY"in q&&(T.type(q.flipY,"boolean","invalid texture flip"),D.flipY=q.flipY),"alignment"in q&&(T.oneOf(q.alignment,[1,2,4,8],"invalid texture unpack alignment"),D.unpackAlignment=q.alignment),"colorSpace"in q&&(T.parameter(q.colorSpace,Le,"invalid colorSpace"),D.colorSpace=Le[q.colorSpace]),"type"in q){var j=q.type;T(_.oes_texture_float||!(j==="float"||j==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),T(_.oes_texture_half_float||!(j==="half float"||j==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),T(_.webgl_depth_texture||!(j==="uint16"||j==="uint32"||j==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),T.parameter(j,Pe,"invalid texture type"),D.type=Pe[j]}var Qe=D.width,on=D.height,R=D.channels,x=!1;"shape"in q?(T(Array.isArray(q.shape)&&q.shape.length>=2,"shape must be an array"),Qe=q.shape[0],on=q.shape[1],q.shape.length===3&&(R=q.shape[2],T(R>0&&R<=4,"invalid number of channels"),x=!0),T(Qe>=0&&Qe<=O.maxTextureSize,"invalid width"),T(on>=0&&on<=O.maxTextureSize,"invalid height")):("radius"in q&&(Qe=on=q.radius,T(Qe>=0&&Qe<=O.maxTextureSize,"invalid radius")),"width"in q&&(Qe=q.width,T(Qe>=0&&Qe<=O.maxTextureSize,"invalid width")),"height"in q&&(on=q.height,T(on>=0&&on<=O.maxTextureSize,"invalid height")),"channels"in q&&(R=q.channels,T(R>0&&R<=4,"invalid number of channels"),x=!0)),D.width=Qe|0,D.height=on|0,D.channels=R|0;var M=!1;if("format"in q){var U=q.format;T(_.webgl_depth_texture||!(U==="depth"||U==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),T.parameter(U,fe,"invalid texture format");var W=D.internalformat=fe[U];D.format=De[W],U in Pe&&("type"in q||(D.type=Pe[U])),U in ke&&(D.compressed=!0),M=!0}!x&&M?D.channels=Zo[D.format]:x&&!M?D.channels!==Zs[D.format]&&(D.format=D.internalformat=Zs[D.channels]):M&&x&&T(D.channels===Zo[D.format],"number of channels inconsistent with specified format")}}function Dt(D){p.pixelStorei(af,D.flipY),p.pixelStorei(sf,D.premultiplyAlpha),p.pixelStorei(Ah,D.colorSpace),p.pixelStorei(Xl,D.unpackAlignment)}function ze(){me.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ne(D,q){var j=null;if(Ks(q)?j=q:q&&(T.type(q,"object","invalid pixel data type"),vt(D,q),"x"in q&&(D.xOffset=q.x|0),"y"in q&&(D.yOffset=q.y|0),Ks(q.data)&&(j=q.data)),T(!D.compressed||j instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),q.copy){T(!j,"can not specify copy and data field for the same texture");var Qe=ue.viewportWidth,on=ue.viewportHeight;D.width=D.width||Qe-D.xOffset,D.height=D.height||on-D.yOffset,D.needsCopy=!0,T(D.xOffset>=0&&D.xOffset<Qe&&D.yOffset>=0&&D.yOffset<on&&D.width>0&&D.width<=Qe&&D.height>0&&D.height<=on,"copy texture read out of bounds")}else if(!j)D.width=D.width||1,D.height=D.height||1,D.channels=D.channels||4;else if(At(j))D.channels=D.channels||4,D.data=j,!("type"in q)&&D.type===as&&(D.type=Ql(j));else if(Ys(j))D.channels=D.channels||4,ql(D,j),D.alignment=1,D.needsFree=!0;else if(Bt(j)){var R=j.data;!Array.isArray(R)&&D.type===as&&(D.type=Ql(R));var x=j.shape,M=j.stride,U,W,F,G,z,A;x.length===3?(F=x[2],A=M[2]):(T(x.length===2,"invalid ndarray pixel data, must be 2 or 3D"),F=1,A=1),U=x[0],W=x[1],G=M[0],z=M[1],D.alignment=1,D.width=U,D.height=W,D.channels=F,D.format=D.internalformat=Zs[F],D.needsFree=!0,vf(D,R,G,z,A,j.offset)}else if(jl(j)||tc(j)||Yl(j))jl(j)||tc(j)?D.element=j:D.element=j.canvas,D.width=D.element.width,D.height=D.element.height,D.channels=4;else if(ff(j))D.element=j,D.width=j.width,D.height=j.height,D.channels=4;else if(Kl(j))D.element=j,D.width=j.naturalWidth,D.height=j.naturalHeight,D.channels=4;else if(lf(j))D.element=j,D.width=j.videoWidth,D.height=j.videoHeight,D.channels=4;else if(ec(j)){var L=D.width||j[0].length,N=D.height||j.length,$=D.channels;pr(j[0][0])?$=$||j[0][0].length:$=$||1;for(var H=Un.shape(j),ae=1,le=0;le<H.length;++le)ae*=H[le];var ie=df(D,ae);Un.flatten(j,H,"",ie),hf(D,ie),D.alignment=1,D.width=L,D.height=N,D.channels=$,D.format=D.internalformat=Zs[$],D.needsFree=!0}D.type===Hs?T(O.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):D.type===Aa&&T(O.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function de(D,q,j){var Qe=D.element,on=D.data,R=D.internalformat,x=D.format,M=D.type,U=D.width,W=D.height;Dt(D),Qe?p.texImage2D(q,j,x,x,M,Qe):D.compressed?p.compressedTexImage2D(q,j,R,U,W,0,on):D.needsCopy?(J(),p.copyTexImage2D(q,j,x,D.xOffset,D.yOffset,U,W,0)):p.texImage2D(q,j,x,U,W,0,x,M,on||null)}function Nt(D,q,j,Qe,on){var R=D.element,x=D.data,M=D.internalformat,U=D.format,W=D.type,F=D.width,G=D.height;Dt(D),R?p.texSubImage2D(q,on,j,Qe,U,W,R):D.compressed?p.compressedTexSubImage2D(q,on,j,Qe,M,F,G,x):D.needsCopy?(J(),p.copyTexSubImage2D(q,on,j,Qe,D.xOffset,D.yOffset,F,G)):p.texSubImage2D(q,on,j,Qe,F,G,U,W,x)}var Zt=[];function et(){return Zt.pop()||new ze}function kt(D){D.needsFree&&Qn.freeType(D.data),ze.call(D),Zt.push(D)}function St(){me.call(this),this.genMipmaps=!1,this.mipmapHint=cs,this.mipmask=0,this.images=Array(16)}function Qt(D,q,j){var Qe=D.images[0]=et();D.mipmask=1,Qe.width=D.width=q,Qe.height=D.height=j,Qe.channels=D.channels=4}function Nn(D,q){var j=null;if(Ks(q))j=D.images[0]=et(),Oe(j,D),Ne(j,q),D.mipmask=1;else if(vt(D,q),Array.isArray(q.mipmap))for(var Qe=q.mipmap,on=0;on<Qe.length;++on)j=D.images[on]=et(),Oe(j,D),j.width>>=on,j.height>>=on,Ne(j,Qe[on]),D.mipmask|=1<<on;else j=D.images[0]=et(),Oe(j,D),Ne(j,q),D.mipmask=1;Oe(D,D.images[0]),D.compressed&&(D.internalformat===Wu||D.internalformat===Xu||D.internalformat===Hu||D.internalformat===Zu)&&T(D.width%4===0&&D.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function kr(D,q){for(var j=D.images,Qe=0;Qe<j.length;++Qe){if(!j[Qe])return;de(j[Qe],q,Qe)}}var Kr=[];function jt(){var D=Kr.pop()||new St;me.call(D),D.mipmask=0;for(var q=0;q<16;++q)D.images[q]=null;return D}function Hr(D){for(var q=D.images,j=0;j<q.length;++j)q[j]&&kt(q[j]),q[j]=null;Kr.push(D)}function tr(){this.minFilter=ss,this.magFilter=ss,this.wrapS=Yu,this.wrapT=Yu,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=cs}function Rr(D,q){if("min"in q){var j=q.min;T.parameter(j,_e),D.minFilter=_e[j],fs.indexOf(D.minFilter)>=0&&!("faces"in q)&&(D.genMipmaps=!0)}if("mag"in q){var Qe=q.mag;T.parameter(Qe,Re),D.magFilter=Re[Qe]}var on=D.wrapS,R=D.wrapT;if("wrap"in q){var x=q.wrap;typeof x=="string"?(T.parameter(x,we),on=R=we[x]):Array.isArray(x)&&(T.parameter(x[0],we),T.parameter(x[1],we),on=we[x[0]],R=we[x[1]])}else{if("wrapS"in q){var M=q.wrapS;T.parameter(M,we),on=we[M]}if("wrapT"in q){var U=q.wrapT;T.parameter(U,we),R=we[U]}}if(D.wrapS=on,D.wrapT=R,"anisotropic"in q){var W=q.anisotropic;T(typeof W=="number"&&W>=1&&W<=O.maxAnisotropic,"aniso samples must be between 1 and "),D.anisotropic=q.anisotropic}if("mipmap"in q){var F=!1;switch(typeof q.mipmap){case"string":T.parameter(q.mipmap,he,"invalid mipmap hint"),D.mipmapHint=he[q.mipmap],D.genMipmaps=!0,F=!0;break;case"boolean":F=D.genMipmaps=q.mipmap;break;case"object":T(Array.isArray(q.mipmap),"invalid mipmap type"),D.genMipmaps=!1,F=!0;break;default:T.raise("invalid mipmap type")}F&&!("min"in q)&&(D.minFilter=us)}}function Gr(D,q){p.texParameteri(q,$l,D.minFilter),p.texParameteri(q,Ul,D.magFilter),p.texParameteri(q,Th,D.wrapS),p.texParameteri(q,Ih,D.wrapT),_.ext_texture_filter_anisotropic&&p.texParameteri(q,Ra,D.anisotropic),D.genMipmaps&&(p.hint(Nh,D.mipmapHint),p.generateMipmap(q))}var Pr=0,oo={},io=O.maxTextureUnits,mr=Array(io).map(function(){return null});function Yt(D){me.call(this),this.mipmask=0,this.internalformat=Vo,this.id=Pr++,this.refCount=1,this.target=D,this.texture=p.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new tr,te.profile&&(this.stats={size:0})}function Qr(D){p.activeTexture(Ca),p.bindTexture(D.target,D.texture)}function xn(){var D=mr[0];D?p.bindTexture(D.target,D.texture):p.bindTexture($o,null)}function gt(D){var q=D.texture;T(q,"must not double destroy texture");var j=D.unit,Qe=D.target;j>=0&&(p.activeTexture(Ca+j),p.bindTexture(Qe,null),mr[j]=null),p.deleteTexture(q),D.texture=null,D.params=null,D.pixels=null,D.refCount=0,delete oo[D.id],K.textureCount--}B(Yt.prototype,{bind:function(){var D=this;D.bindCount+=1;var q=D.unit;if(q<0){for(var j=0;j<io;++j){var Qe=mr[j];if(Qe){if(Qe.bindCount>0)continue;Qe.unit=-1}mr[j]=D,q=j;break}q>=io&&T.raise("insufficient number of texture units"),te.profile&&K.maxTextureUnits<q+1&&(K.maxTextureUnits=q+1),D.unit=q,p.activeTexture(Ca+q),p.bindTexture(D.target,D.texture)}return q},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&gt(this)}});function fn(D,q){var j=new Yt($o);oo[j.id]=j,K.textureCount++;function Qe(x,M){var U=j.texInfo;tr.call(U);var W=jt();return typeof x=="number"?typeof M=="number"?Qt(W,x|0,M|0):Qt(W,x|0,x|0):x?(T.type(x,"object","invalid arguments to regl.texture"),Rr(U,x),Nn(W,x)):Qt(W,1,1),U.genMipmaps&&(W.mipmask=(W.width<<1)-1),j.mipmask=W.mipmask,Oe(j,W),T.texture2D(U,W,O),j.internalformat=W.internalformat,Qe.width=W.width,Qe.height=W.height,Qr(j),kr(W,$o),Gr(U,$o),xn(),Hr(W),te.profile&&(j.stats.size=Qs(j.internalformat,j.type,W.width,W.height,U.genMipmaps,!1)),Qe.format=Se[j.internalformat],Qe.type=$e[j.type],Qe.mag=oe[U.magFilter],Qe.min=je[U.minFilter],Qe.wrapS=pe[U.wrapS],Qe.wrapT=pe[U.wrapT],Qe}function on(x,M,U,W){T(!!x,"must specify image data");var F=M|0,G=U|0,z=W|0,A=et();return Oe(A,j),A.width=0,A.height=0,Ne(A,x),A.width=A.width||(j.width>>z)-F,A.height=A.height||(j.height>>z)-G,T(j.type===A.type&&j.format===A.format&&j.internalformat===A.internalformat,"incompatible format for texture.subimage"),T(F>=0&&G>=0&&F+A.width<=j.width&&G+A.height<=j.height,"texture.subimage write out of bounds"),T(j.mipmask&1<<z,"missing mipmap data"),T(A.data||A.element||A.needsCopy,"missing image data"),Qr(j),Nt(A,$o,F,G,z),xn(),kt(A),Qe}function R(x,M){var U=x|0,W=M|0||U;if(U===j.width&&W===j.height)return Qe;Qe.width=j.width=U,Qe.height=j.height=W,Qr(j);for(var F=0;j.mipmask>>F;++F){var G=U>>F,z=W>>F;if(!G||!z)break;p.texImage2D($o,F,j.format,G,z,0,j.format,j.type,null)}return xn(),te.profile&&(j.stats.size=Qs(j.internalformat,j.type,U,W,!1,!1)),Qe}return Qe(D,q),Qe.subimage=on,Qe.resize=R,Qe._reglType="texture2d",Qe._texture=j,te.profile&&(Qe.stats=j.stats),Qe.destroy=function(){j.decRef()},Qe}function hn(D,q,j,Qe,on,R){var x=new Yt(is);oo[x.id]=x,K.cubeCount++;var M=new Array(6);function U(G,z,A,L,N,$){var H,ae=x.texInfo;for(tr.call(ae),H=0;H<6;++H)M[H]=jt();if(typeof G=="number"||!G){var le=G|0||1;for(H=0;H<6;++H)Qt(M[H],le,le)}else if(typeof G=="object")if(z)Nn(M[0],G),Nn(M[1],z),Nn(M[2],A),Nn(M[3],L),Nn(M[4],N),Nn(M[5],$);else if(Rr(ae,G),vt(x,G),"faces"in G){var ie=G.faces;for(T(Array.isArray(ie)&&ie.length===6,"cube faces must be a length 6 array"),H=0;H<6;++H)T(typeof ie[H]=="object"&&!!ie[H],"invalid input for cube map face"),Oe(M[H],x),Nn(M[H],ie[H])}else for(H=0;H<6;++H)Nn(M[H],G);else T.raise("invalid arguments to cube map");for(Oe(x,M[0]),O.npotTextureCube||T(os(x.width)&&os(x.height),"your browser does not support non power or two texture dimensions"),ae.genMipmaps?x.mipmask=(M[0].width<<1)-1:x.mipmask=M[0].mipmask,T.textureCube(x,ae,M,O),x.internalformat=M[0].internalformat,U.width=M[0].width,U.height=M[0].height,Qr(x),H=0;H<6;++H)kr(M[H],ia+H);for(Gr(ae,is),xn(),te.profile&&(x.stats.size=Qs(x.internalformat,x.type,U.width,U.height,ae.genMipmaps,!0)),U.format=Se[x.internalformat],U.type=$e[x.type],U.mag=oe[ae.magFilter],U.min=je[ae.minFilter],U.wrapS=pe[ae.wrapS],U.wrapT=pe[ae.wrapT],H=0;H<6;++H)Hr(M[H]);return U}function W(G,z,A,L,N){T(!!z,"must specify image data"),T(typeof G=="number"&&G===(G|0)&&G>=0&&G<6,"invalid face");var $=A|0,H=L|0,ae=N|0,le=et();return Oe(le,x),le.width=0,le.height=0,Ne(le,z),le.width=le.width||(x.width>>ae)-$,le.height=le.height||(x.height>>ae)-H,T(x.type===le.type&&x.format===le.format&&x.internalformat===le.internalformat,"incompatible format for texture.subimage"),T($>=0&&H>=0&&$+le.width<=x.width&&H+le.height<=x.height,"texture.subimage write out of bounds"),T(x.mipmask&1<<ae,"missing mipmap data"),T(le.data||le.element||le.needsCopy,"missing image data"),Qr(x),Nt(le,ia+G,$,H,ae),xn(),kt(le),U}function F(G){var z=G|0;if(z!==x.width){U.width=x.width=z,U.height=x.height=z,Qr(x);for(var A=0;A<6;++A)for(var L=0;x.mipmask>>L;++L)p.texImage2D(ia+A,L,x.format,z>>L,z>>L,0,x.format,x.type,null);return xn(),te.profile&&(x.stats.size=Qs(x.internalformat,x.type,U.width,U.height,!1,!0)),U}}return U(D,q,j,Qe,on,R),U.subimage=W,U.resize=F,U._reglType="textureCube",U._texture=x,te.profile&&(U.stats=x.stats),U.destroy=function(){x.decRef()},U}function gr(){for(var D=0;D<io;++D)p.activeTexture(Ca+D),p.bindTexture($o,null),mr[D]=null;cn(oo).forEach(gt),K.cubeCount=0,K.textureCount=0}te.profile&&(K.getTotalTextureSize=function(){var D=0;return Object.keys(oo).forEach(function(q){D+=oo[q].stats.size}),D});function Ei(){for(var D=0;D<io;++D){var q=mr[D];q&&(q.bindCount=0,q.unit=-1,mr[D]=null)}cn(oo).forEach(function(j){j.texture=p.createTexture(),p.bindTexture(j.target,j.texture);for(var Qe=0;Qe<32;++Qe)if(j.mipmask&1<<Qe)if(j.target===$o)p.texImage2D($o,Qe,j.internalformat,j.width>>Qe,j.height>>Qe,0,j.internalformat,j.type,null);else for(var on=0;on<6;++on)p.texImage2D(ia+on,Qe,j.internalformat,j.width>>Qe,j.height>>Qe,0,j.internalformat,j.type,null);Gr(j.texInfo,j.target)})}function ki(){for(var D=0;D<io;++D){var q=mr[D];q&&(q.bindCount=0,q.unit=-1,mr[D]=null),p.activeTexture(Ca+D),p.bindTexture($o,null),p.bindTexture(is,null)}}return{create2D:fn,createCube:hn,clear:gr,getTexture:function(D){return null},restore:Ei,refresh:ki}}var Ci=36161,ds=32854,pf=32855,mf=36194,gf=33189,yf=36168,Ef=34041,nc=35907,bf=34836,xf=34842,wf=34843,jo=[];jo[ds]=2,jo[pf]=2,jo[mf]=2,jo[gf]=2,jo[yf]=1,jo[Ef]=4,jo[nc]=4,jo[bf]=16,jo[xf]=8,jo[wf]=6;function _f(p,_,O){return jo[p]*_*O}var ed=function(p,_,O,J,ue){var K={rgba4:ds,rgb565:mf,"rgb5 a1":pf,depth:gf,stencil:yf,"depth stencil":Ef};_.ext_srgb&&(K.srgba=nc),_.ext_color_buffer_half_float&&(K.rgba16f=xf,K.rgb16f=wf),_.webgl_color_buffer_float&&(K.rgba32f=bf);var te=[];Object.keys(K).forEach(function(fe){var ke=K[fe];te[ke]=fe});var he=0,we={};function Re(fe){this.id=he++,this.refCount=1,this.renderbuffer=fe,this.format=ds,this.width=0,this.height=0,ue.profile&&(this.stats={size:0})}Re.prototype.decRef=function(){--this.refCount<=0&&_e(this)};function _e(fe){var ke=fe.renderbuffer;T(ke,"must not double destroy renderbuffer"),p.bindRenderbuffer(Ci,null),p.deleteRenderbuffer(ke),fe.renderbuffer=null,fe.refCount=0,delete we[fe.id],J.renderbufferCount--}function Le(fe,ke){var V=new Re(p.createRenderbuffer());we[V.id]=V,J.renderbufferCount++;function ne($e,oe){var je=0,pe=0,De=ds;if(typeof $e=="object"&&$e){var me=$e;if("shape"in me){var Oe=me.shape;T(Array.isArray(Oe)&&Oe.length>=2,"invalid renderbuffer shape"),je=Oe[0]|0,pe=Oe[1]|0}else"radius"in me&&(je=pe=me.radius|0),"width"in me&&(je=me.width|0),"height"in me&&(pe=me.height|0);"format"in me&&(T.parameter(me.format,K,"invalid renderbuffer format"),De=K[me.format])}else typeof $e=="number"?(je=$e|0,typeof oe=="number"?pe=oe|0:pe=je):$e?T.raise("invalid arguments to renderbuffer constructor"):je=pe=1;if(T(je>0&&pe>0&&je<=O.maxRenderbufferSize&&pe<=O.maxRenderbufferSize,"invalid renderbuffer size"),!(je===V.width&&pe===V.height&&De===V.format))return ne.width=V.width=je,ne.height=V.height=pe,V.format=De,p.bindRenderbuffer(Ci,V.renderbuffer),p.renderbufferStorage(Ci,De,je,pe),T(p.getError()===0,"invalid render buffer format"),ue.profile&&(V.stats.size=_f(V.format,V.width,V.height)),ne.format=te[V.format],ne}function Se($e,oe){var je=$e|0,pe=oe|0||je;return je===V.width&&pe===V.height||(T(je>0&&pe>0&&je<=O.maxRenderbufferSize&&pe<=O.maxRenderbufferSize,"invalid renderbuffer size"),ne.width=V.width=je,ne.height=V.height=pe,p.bindRenderbuffer(Ci,V.renderbuffer),p.renderbufferStorage(Ci,V.format,je,pe),T(p.getError()===0,"invalid render buffer format"),ue.profile&&(V.stats.size=_f(V.format,V.width,V.height))),ne}return ne(fe,ke),ne.resize=Se,ne._reglType="renderbuffer",ne._renderbuffer=V,ue.profile&&(ne.stats=V.stats),ne.destroy=function(){V.decRef()},ne}ue.profile&&(J.getTotalRenderbufferSize=function(){var fe=0;return Object.keys(we).forEach(function(ke){fe+=we[ke].stats.size}),fe});function Pe(){cn(we).forEach(function(fe){fe.renderbuffer=p.createRenderbuffer(),p.bindRenderbuffer(Ci,fe.renderbuffer),p.renderbufferStorage(Ci,fe.format,fe.width,fe.height)}),p.bindRenderbuffer(Ci,null)}return{create:Le,clear:function(){cn(we).forEach(_e)},restore:Pe}},Di=36160,rc=36161,Da=3553,qs=34069,Sf=36064,oc=36096,Tf=36128,If=33306,td=36053,Nf=36054,nd=36055,Af=36057,rd=36061,od=36193,id=5121,Rf=5126,ic=6407,Cf=6408,ac=6402,ad=[ic,Cf],hs=[];hs[Cf]=4,hs[ic]=3;var vs=[];vs[id]=1,vs[Rf]=4,vs[od]=2;var sd=32854,ud=32855,cd=36194,Df=33189,sc=36168,fd=34041,Of=35907,ld=34836,Rh=34842,Lf=34843,dd=[sd,ud,cd,Of,Rh,Lf,ld],Oa={};Oa[td]="complete",Oa[Nf]="incomplete attachment",Oa[Af]="incomplete dimensions",Oa[nd]="incomplete, missing attachment",Oa[rd]="unsupported";function hd(p,_,O,J,ue,K){var te={cur:null,next:null,dirty:!1,setFBO:null},he=["rgba"],we=["rgba4","rgb565","rgb5 a1"];_.ext_srgb&&we.push("srgba"),_.ext_color_buffer_half_float&&we.push("rgba16f","rgb16f"),_.webgl_color_buffer_float&&we.push("rgba32f");var Re=["uint8"];_.oes_texture_half_float&&Re.push("half float","float16"),_.oes_texture_float&&Re.push("float","float32");function _e(ze,Ne,de){this.target=ze,this.texture=Ne,this.renderbuffer=de;var Nt=0,Zt=0;Ne?(Nt=Ne.width,Zt=Ne.height):de&&(Nt=de.width,Zt=de.height),this.width=Nt,this.height=Zt}function Le(ze){ze&&(ze.texture&&ze.texture._texture.decRef(),ze.renderbuffer&&ze.renderbuffer._renderbuffer.decRef())}function Pe(ze,Ne,de){if(ze)if(ze.texture){var Nt=ze.texture._texture,Zt=Math.max(1,Nt.width),et=Math.max(1,Nt.height);T(Zt===Ne&&et===de,"inconsistent width/height for supplied texture"),Nt.refCount+=1}else{var kt=ze.renderbuffer._renderbuffer;T(kt.width===Ne&&kt.height===de,"inconsistent width/height for renderbuffer"),kt.refCount+=1}}function fe(ze,Ne){Ne&&(Ne.texture?p.framebufferTexture2D(Di,ze,Ne.target,Ne.texture._texture.texture,0):p.framebufferRenderbuffer(Di,ze,rc,Ne.renderbuffer._renderbuffer.renderbuffer))}function ke(ze){var Ne=Da,de=null,Nt=null,Zt=ze;typeof ze=="object"&&(Zt=ze.data,"target"in ze&&(Ne=ze.target|0)),T.type(Zt,"function","invalid attachment data");var et=Zt._reglType;return et==="texture2d"?(de=Zt,T(Ne===Da)):et==="textureCube"?(de=Zt,T(Ne>=qs&&Ne<qs+6,"invalid cube map target")):et==="renderbuffer"?(Nt=Zt,Ne=rc):T.raise("invalid regl object for attachment"),new _e(Ne,de,Nt)}function V(ze,Ne,de,Nt,Zt){if(de){var et=J.create2D({width:ze,height:Ne,format:Nt,type:Zt});return et._texture.refCount=0,new _e(Da,et,null)}else{var kt=ue.create({width:ze,height:Ne,format:Nt});return kt._renderbuffer.refCount=0,new _e(rc,null,kt)}}function ne(ze){return ze&&(ze.texture||ze.renderbuffer)}function Se(ze,Ne,de){ze&&(ze.texture?ze.texture.resize(Ne,de):ze.renderbuffer&&ze.renderbuffer.resize(Ne,de),ze.width=Ne,ze.height=de)}var $e=0,oe={};function je(){this.id=$e++,oe[this.id]=this,this.framebuffer=p.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function pe(ze){ze.colorAttachments.forEach(Le),Le(ze.depthAttachment),Le(ze.stencilAttachment),Le(ze.depthStencilAttachment)}function De(ze){var Ne=ze.framebuffer;T(Ne,"must not double destroy framebuffer"),p.deleteFramebuffer(Ne),ze.framebuffer=null,K.framebufferCount--,delete oe[ze.id]}function me(ze){var Ne;p.bindFramebuffer(Di,ze.framebuffer);var de=ze.colorAttachments;for(Ne=0;Ne<de.length;++Ne)fe(Sf+Ne,de[Ne]);for(Ne=de.length;Ne<O.maxColorAttachments;++Ne)p.framebufferTexture2D(Di,Sf+Ne,Da,null,0);p.framebufferTexture2D(Di,If,Da,null,0),p.framebufferTexture2D(Di,oc,Da,null,0),p.framebufferTexture2D(Di,Tf,Da,null,0),fe(oc,ze.depthAttachment),fe(Tf,ze.stencilAttachment),fe(If,ze.depthStencilAttachment);var Nt=p.checkFramebufferStatus(Di);!p.isContextLost()&&Nt!==td&&T.raise("framebuffer configuration not supported, status = "+Oa[Nt]),p.bindFramebuffer(Di,te.next?te.next.framebuffer:null),te.cur=te.next,p.getError()}function Oe(ze,Ne){var de=new je;K.framebufferCount++;function Nt(et,kt){var St;T(te.next!==de,"can not update framebuffer which is currently in use");var Qt=0,Nn=0,kr=!0,Kr=!0,jt=null,Hr=!0,tr="rgba",Rr="uint8",Gr=1,Pr=null,oo=null,io=null,mr=!1;if(typeof et=="number")Qt=et|0,Nn=kt|0||Qt;else if(!et)Qt=Nn=1;else{T.type(et,"object","invalid arguments for framebuffer");var Yt=et;if("shape"in Yt){var Qr=Yt.shape;T(Array.isArray(Qr)&&Qr.length>=2,"invalid shape for framebuffer"),Qt=Qr[0],Nn=Qr[1]}else"radius"in Yt&&(Qt=Nn=Yt.radius),"width"in Yt&&(Qt=Yt.width),"height"in Yt&&(Nn=Yt.height);("color"in Yt||"colors"in Yt)&&(jt=Yt.color||Yt.colors,Array.isArray(jt)&&T(jt.length===1||_.webgl_draw_buffers,"multiple render targets not supported")),jt||("colorCount"in Yt&&(Gr=Yt.colorCount|0,T(Gr>0,"invalid color buffer count")),"colorTexture"in Yt&&(Hr=!!Yt.colorTexture,tr="rgba4"),"colorType"in Yt&&(Rr=Yt.colorType,Hr?(T(_.oes_texture_float||!(Rr==="float"||Rr==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),T(_.oes_texture_half_float||!(Rr==="half float"||Rr==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Rr==="half float"||Rr==="float16"?(T(_.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),tr="rgba16f"):(Rr==="float"||Rr==="float32")&&(T(_.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),tr="rgba32f"),T.oneOf(Rr,Re,"invalid color type")),"colorFormat"in Yt&&(tr=Yt.colorFormat,he.indexOf(tr)>=0?Hr=!0:we.indexOf(tr)>=0?Hr=!1:Hr?T.oneOf(Yt.colorFormat,he,"invalid color format for texture"):T.oneOf(Yt.colorFormat,we,"invalid color format for renderbuffer"))),("depthTexture"in Yt||"depthStencilTexture"in Yt)&&(mr=!!(Yt.depthTexture||Yt.depthStencilTexture),T(!mr||_.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Yt&&(typeof Yt.depth=="boolean"?kr=Yt.depth:(Pr=Yt.depth,Kr=!1)),"stencil"in Yt&&(typeof Yt.stencil=="boolean"?Kr=Yt.stencil:(oo=Yt.stencil,kr=!1)),"depthStencil"in Yt&&(typeof Yt.depthStencil=="boolean"?kr=Kr=Yt.depthStencil:(io=Yt.depthStencil,kr=!1,Kr=!1))}var xn=null,gt=null,fn=null,hn=null;if(Array.isArray(jt))xn=jt.map(ke);else if(jt)xn=[ke(jt)];else for(xn=new Array(Gr),St=0;St<Gr;++St)xn[St]=V(Qt,Nn,Hr,tr,Rr);T(_.webgl_draw_buffers||xn.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),T(xn.length<=O.maxColorAttachments,"too many color attachments, not supported"),Qt=Qt||xn[0].width,Nn=Nn||xn[0].height,Pr?gt=ke(Pr):kr&&!Kr&&(gt=V(Qt,Nn,mr,"depth","uint32")),oo?fn=ke(oo):Kr&&!kr&&(fn=V(Qt,Nn,!1,"stencil","uint8")),io?hn=ke(io):!Pr&&!oo&&Kr&&kr&&(hn=V(Qt,Nn,mr,"depth stencil","depth stencil")),T(!!Pr+!!oo+!!io<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var gr=null;for(St=0;St<xn.length;++St)if(Pe(xn[St],Qt,Nn),T(!xn[St]||xn[St].texture&&ad.indexOf(xn[St].texture._texture.format)>=0||xn[St].renderbuffer&&dd.indexOf(xn[St].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+St+" is invalid"),xn[St]&&xn[St].texture){var Ei=hs[xn[St].texture._texture.format]*vs[xn[St].texture._texture.type];gr===null?gr=Ei:T(gr===Ei,"all color attachments much have the same number of bits per pixel.")}return Pe(gt,Qt,Nn),T(!gt||gt.texture&&gt.texture._texture.format===ac||gt.renderbuffer&&gt.renderbuffer._renderbuffer.format===Df,"invalid depth attachment for framebuffer object"),Pe(fn,Qt,Nn),T(!fn||fn.renderbuffer&&fn.renderbuffer._renderbuffer.format===sc,"invalid stencil attachment for framebuffer object"),Pe(hn,Qt,Nn),T(!hn||hn.texture&&hn.texture._texture.format===fd||hn.renderbuffer&&hn.renderbuffer._renderbuffer.format===fd,"invalid depth-stencil attachment for framebuffer object"),pe(de),de.width=Qt,de.height=Nn,de.colorAttachments=xn,de.depthAttachment=gt,de.stencilAttachment=fn,de.depthStencilAttachment=hn,Nt.color=xn.map(ne),Nt.depth=ne(gt),Nt.stencil=ne(fn),Nt.depthStencil=ne(hn),Nt.width=de.width,Nt.height=de.height,me(de),Nt}function Zt(et,kt){T(te.next!==de,"can not resize a framebuffer which is currently in use");var St=Math.max(et|0,1),Qt=Math.max(kt|0||St,1);if(St===de.width&&Qt===de.height)return Nt;for(var Nn=de.colorAttachments,kr=0;kr<Nn.length;++kr)Se(Nn[kr],St,Qt);return Se(de.depthAttachment,St,Qt),Se(de.stencilAttachment,St,Qt),Se(de.depthStencilAttachment,St,Qt),de.width=Nt.width=St,de.height=Nt.height=Qt,me(de),Nt}return Nt(ze,Ne),B(Nt,{resize:Zt,_reglType:"framebuffer",_framebuffer:de,destroy:function(){De(de),pe(de)},use:function(et){te.setFBO({framebuffer:Nt},et)}})}function vt(ze){var Ne=Array(6);function de(Zt){var et;T(Ne.indexOf(te.next)<0,"can not update framebuffer which is currently in use");var kt={color:null},St=0,Qt=null,Nn="rgba",kr="uint8",Kr=1;if(typeof Zt=="number")St=Zt|0;else if(!Zt)St=1;else{T.type(Zt,"object","invalid arguments for framebuffer");var jt=Zt;if("shape"in jt){var Hr=jt.shape;T(Array.isArray(Hr)&&Hr.length>=2,"invalid shape for framebuffer"),T(Hr[0]===Hr[1],"cube framebuffer must be square"),St=Hr[0]}else"radius"in jt&&(St=jt.radius|0),"width"in jt?(St=jt.width|0,"height"in jt&&T(jt.height===St,"must be square")):"height"in jt&&(St=jt.height|0);("color"in jt||"colors"in jt)&&(Qt=jt.color||jt.colors,Array.isArray(Qt)&&T(Qt.length===1||_.webgl_draw_buffers,"multiple render targets not supported")),Qt||("colorCount"in jt&&(Kr=jt.colorCount|0,T(Kr>0,"invalid color buffer count")),"colorType"in jt&&(T.oneOf(jt.colorType,Re,"invalid color type"),kr=jt.colorType),"colorFormat"in jt&&(Nn=jt.colorFormat,T.oneOf(jt.colorFormat,he,"invalid color format for texture"))),"depth"in jt&&(kt.depth=jt.depth),"stencil"in jt&&(kt.stencil=jt.stencil),"depthStencil"in jt&&(kt.depthStencil=jt.depthStencil)}var tr;if(Qt)if(Array.isArray(Qt))for(tr=[],et=0;et<Qt.length;++et)tr[et]=Qt[et];else tr=[Qt];else{tr=Array(Kr);var Rr={radius:St,format:Nn,type:kr};for(et=0;et<Kr;++et)tr[et]=J.createCube(Rr)}for(kt.color=Array(tr.length),et=0;et<tr.length;++et){var Gr=tr[et];T(typeof Gr=="function"&&Gr._reglType==="textureCube","invalid cube map"),St=St||Gr.width,T(Gr.width===St&&Gr.height===St,"invalid cube map shape"),kt.color[et]={target:qs,data:tr[et]}}for(et=0;et<6;++et){for(var Pr=0;Pr<tr.length;++Pr)kt.color[Pr].target=qs+et;et>0&&(kt.depth=Ne[0].depth,kt.stencil=Ne[0].stencil,kt.depthStencil=Ne[0].depthStencil),Ne[et]?Ne[et](kt):Ne[et]=Oe(kt)}return B(de,{width:St,height:St,color:tr})}function Nt(Zt){var et,kt=Zt|0;if(T(kt>0&&kt<=O.maxCubeMapSize,"invalid radius for cube fbo"),kt===de.width)return de;var St=de.color;for(et=0;et<St.length;++et)St[et].resize(kt);for(et=0;et<6;++et)Ne[et].resize(kt);return de.width=de.height=kt,de}return de(ze),B(de,{faces:Ne,resize:Nt,_reglType:"framebufferCube",destroy:function(){Ne.forEach(function(Zt){Zt.destroy()})}})}function Dt(){te.cur=null,te.next=null,te.dirty=!0,cn(oe).forEach(function(ze){ze.framebuffer=p.createFramebuffer(),me(ze)})}return B(te,{getFramebuffer:function(ze){if(typeof ze=="function"&&ze._reglType==="framebuffer"){var Ne=ze._framebuffer;if(Ne instanceof je)return Ne}return null},create:Oe,createCube:vt,clear:function(){cn(oe).forEach(De)},restore:Dt})}var Ch=5126,Mf=34962;function kf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ch,this.offset=0,this.stride=0,this.divisor=0}function vd(p,_,O,J,ue){for(var K=O.maxAttributes,te=new Array(K),he=0;he<K;++he)te[he]=new kf;var we=0,Re={},_e={Record:kf,scope:{},state:te,currentVAO:null,targetVAO:null,restore:Pe()?oe:function(){},createVAO:je,getVAO:ke,destroyBuffer:Le,setVAO:Pe()?V:ne,clear:Pe()?Se:function(){}};function Le(pe){for(var De=0;De<te.length;++De){var me=te[De];me.buffer===pe&&(p.disableVertexAttribArray(De),me.buffer=null)}}function Pe(){return _.oes_vertex_array_object}function fe(){return _.angle_instanced_arrays}function ke(pe){return typeof pe=="function"&&pe._vao?pe._vao:null}function V(pe){if(pe!==_e.currentVAO){var De=Pe();pe?De.bindVertexArrayOES(pe.vao):De.bindVertexArrayOES(null),_e.currentVAO=pe}}function ne(pe){if(pe!==_e.currentVAO){if(pe)pe.bindAttrs();else for(var De=fe(),me=0;me<te.length;++me){var Oe=te[me];Oe.buffer?(p.enableVertexAttribArray(me),p.vertexAttribPointer(me,Oe.size,Oe.type,Oe.normalized,Oe.stride,Oe.offfset),De&&Oe.divisor&&De.vertexAttribDivisorANGLE(me,Oe.divisor)):(p.disableVertexAttribArray(me),p.vertexAttrib4f(me,Oe.x,Oe.y,Oe.z,Oe.w))}_e.currentVAO=pe}}function Se(){cn(Re).forEach(function(pe){pe.destroy()})}function $e(){this.id=++we,this.attributes=[];var pe=Pe();pe?this.vao=pe.createVertexArrayOES():this.vao=null,Re[this.id]=this,this.buffers=[]}$e.prototype.bindAttrs=function(){for(var pe=fe(),De=this.attributes,me=0;me<De.length;++me){var Oe=De[me];Oe.buffer?(p.enableVertexAttribArray(me),p.bindBuffer(Mf,Oe.buffer.buffer),p.vertexAttribPointer(me,Oe.size,Oe.type,Oe.normalized,Oe.stride,Oe.offset),pe&&Oe.divisor&&pe.vertexAttribDivisorANGLE(me,Oe.divisor)):(p.disableVertexAttribArray(me),p.vertexAttrib4f(me,Oe.x,Oe.y,Oe.z,Oe.w))}for(var vt=De.length;vt<K;++vt)p.disableVertexAttribArray(vt)},$e.prototype.refresh=function(){var pe=Pe();pe&&(pe.bindVertexArrayOES(this.vao),this.bindAttrs(),_e.currentVAO=this)},$e.prototype.destroy=function(){if(this.vao){var pe=Pe();this===_e.currentVAO&&(_e.currentVAO=null,pe.bindVertexArrayOES(null)),pe.deleteVertexArrayOES(this.vao),this.vao=null}Re[this.id]&&(delete Re[this.id],J.vaoCount-=1)};function oe(){var pe=Pe();pe&&cn(Re).forEach(function(De){De.refresh()})}function je(pe){var De=new $e;J.vaoCount+=1;function me(Oe){T(Array.isArray(Oe),"arguments to vertex array constructor must be an array"),T(Oe.length<K,"too many attributes"),T(Oe.length>0,"must specify at least one attribute");var vt={},Dt=De.attributes;Dt.length=Oe.length;for(var ze=0;ze<Oe.length;++ze){var Ne=Oe[ze],de=Dt[ze]=new kf,Nt=Ne.data||Ne;if(Array.isArray(Nt)||At(Nt)||Bt(Nt)){var Zt;De.buffers[ze]&&(Zt=De.buffers[ze],At(Nt)&&Zt._buffer.byteLength>=Nt.byteLength?Zt.subdata(Nt):(Zt.destroy(),De.buffers[ze]=null)),De.buffers[ze]||(Zt=De.buffers[ze]=ue.create(Ne,Mf,!1,!0)),de.buffer=ue.getBuffer(Zt),de.size=de.buffer.dimension|0,de.normalized=!1,de.type=de.buffer.dtype,de.offset=0,de.stride=0,de.divisor=0,de.state=1,vt[ze]=1}else ue.getBuffer(Ne)?(de.buffer=ue.getBuffer(Ne),de.size=de.buffer.dimension|0,de.normalized=!1,de.type=de.buffer.dtype,de.offset=0,de.stride=0,de.divisor=0,de.state=1):ue.getBuffer(Ne.buffer)?(de.buffer=ue.getBuffer(Ne.buffer),de.size=(+Ne.size||de.buffer.dimension)|0,de.normalized=!!Ne.normalized||!1,"type"in Ne?(T.parameter(Ne.type,fo,"invalid buffer type"),de.type=fo[Ne.type]):de.type=de.buffer.dtype,de.offset=(Ne.offset||0)|0,de.stride=(Ne.stride||0)|0,de.divisor=(Ne.divisor||0)|0,de.state=1,T(de.size>=1&&de.size<=4,"size must be between 1 and 4"),T(de.offset>=0,"invalid offset"),T(de.stride>=0&&de.stride<=255,"stride must be between 0 and 255"),T(de.divisor>=0,"divisor must be positive"),T(!de.divisor||!!_.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ne?(T(ze>0,"first attribute must not be a constant"),de.x=+Ne.x||0,de.y=+Ne.y||0,de.z=+Ne.z||0,de.w=+Ne.w||0,de.state=2):T(!1,"invalid attribute spec for location "+ze)}for(var et=0;et<De.buffers.length;++et)!vt[et]&&De.buffers[et]&&(De.buffers[et].destroy(),De.buffers[et]=null);return De.refresh(),me}return me.destroy=function(){for(var Oe=0;Oe<De.buffers.length;++Oe)De.buffers[Oe]&&De.buffers[Oe].destroy();De.buffers.length=0,De.destroy()},me._vao=De,me._reglType="vao",me(pe)}return _e}var Gf=35632,pd=35633,md=35718,gd=35721;function yd(p,_,O,J){var ue={},K={};function te(V,ne,Se,$e){this.name=V,this.id=ne,this.location=Se,this.info=$e}function he(V,ne){for(var Se=0;Se<V.length;++Se)if(V[Se].id===ne.id){V[Se].location=ne.location;return}V.push(ne)}function we(V,ne,Se){var $e=V===Gf?ue:K,oe=$e[ne];if(!oe){var je=_.str(ne);oe=p.createShader(V),p.shaderSource(oe,je),p.compileShader(oe),T.shaderError(p,oe,je,V,Se),$e[ne]=oe}return oe}var Re={},_e=[],Le=0;function Pe(V,ne){this.id=Le++,this.fragId=V,this.vertId=ne,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,J.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function fe(V,ne,Se){var $e,oe,je=we(Gf,V.fragId),pe=we(pd,V.vertId),De=V.program=p.createProgram();if(p.attachShader(De,je),p.attachShader(De,pe),Se)for($e=0;$e<Se.length;++$e){var me=Se[$e];p.bindAttribLocation(De,me[0],me[1])}p.linkProgram(De),T.linkError(p,De,_.str(V.fragId),_.str(V.vertId),ne);var Oe=p.getProgramParameter(De,md);J.profile&&(V.stats.uniformsCount=Oe);var vt=V.uniforms;for($e=0;$e<Oe;++$e)if(oe=p.getActiveUniform(De,$e),oe)if(oe.size>1)for(var Dt=0;Dt<oe.size;++Dt){var ze=oe.name.replace("[0]","["+Dt+"]");he(vt,new te(ze,_.id(ze),p.getUniformLocation(De,ze),oe))}else he(vt,new te(oe.name,_.id(oe.name),p.getUniformLocation(De,oe.name),oe));var Ne=p.getProgramParameter(De,gd);J.profile&&(V.stats.attributesCount=Ne);var de=V.attributes;for($e=0;$e<Ne;++$e)oe=p.getActiveAttrib(De,$e),oe&&he(de,new te(oe.name,_.id(oe.name),p.getAttribLocation(De,oe.name),oe))}J.profile&&(O.getMaxUniformsCount=function(){var V=0;return _e.forEach(function(ne){ne.stats.uniformsCount>V&&(V=ne.stats.uniformsCount)}),V},O.getMaxAttributesCount=function(){var V=0;return _e.forEach(function(ne){ne.stats.attributesCount>V&&(V=ne.stats.attributesCount)}),V});function ke(){ue={},K={};for(var V=0;V<_e.length;++V)fe(_e[V],null,_e[V].attributes.map(function(ne){return[ne.location,ne.name]}))}return{clear:function(){var V=p.deleteShader.bind(p);cn(ue).forEach(V),ue={},cn(K).forEach(V),K={},_e.forEach(function(ne){p.deleteProgram(ne.program)}),_e.length=0,Re={},O.shaderCount=0},program:function(V,ne,Se,$e){T.command(V>=0,"missing vertex shader",Se),T.command(ne>=0,"missing fragment shader",Se);var oe=Re[ne];oe||(oe=Re[ne]={});var je=oe[V];if(je&&(je.refCount++,!$e))return je;var pe=new Pe(ne,V);return O.shaderCount++,fe(pe,Se,$e),je||(oe[V]=pe),_e.push(pe),B(pe,{destroy:function(){if(pe.refCount--,pe.refCount<=0){p.deleteProgram(pe.program);var De=_e.indexOf(pe);_e.splice(De,1),O.shaderCount--}oe[pe.vertId].refCount<=0&&(p.deleteShader(K[pe.vertId]),delete K[pe.vertId],delete Re[pe.fragId][pe.vertId]),Object.keys(Re[pe.fragId]).length||(p.deleteShader(ue[pe.fragId]),delete ue[pe.fragId],delete Re[pe.fragId])}})},restore:ke,shader:we,frag:-1,vert:-1}}var Pf=6408,ps=5121,Ed=3333,ms=5126;function bd(p,_,O,J,ue,K,te){function he(_e){var Le;_.next===null?(T(ue.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Le=ps):(T(_.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Le=_.next.colorAttachments[0].texture._texture.type,K.oes_texture_float?(T(Le===ps||Le===ms,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Le===ms&&T(te.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):T(Le===ps,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Pe=0,fe=0,ke=J.framebufferWidth,V=J.framebufferHeight,ne=null;At(_e)?ne=_e:_e&&(T.type(_e,"object","invalid arguments to regl.read()"),Pe=_e.x|0,fe=_e.y|0,T(Pe>=0&&Pe<J.framebufferWidth,"invalid x offset for regl.read"),T(fe>=0&&fe<J.framebufferHeight,"invalid y offset for regl.read"),ke=(_e.width||J.framebufferWidth-Pe)|0,V=(_e.height||J.framebufferHeight-fe)|0,ne=_e.data||null),ne&&(Le===ps?T(ne instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Le===ms&&T(ne instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),T(ke>0&&ke+Pe<=J.framebufferWidth,"invalid width for read pixels"),T(V>0&&V+fe<=J.framebufferHeight,"invalid height for read pixels"),O();var Se=ke*V*4;return ne||(Le===ps?ne=new Uint8Array(Se):Le===ms&&(ne=ne||new Float32Array(Se))),T.isTypedArray(ne,"data buffer for regl.read() must be a typedarray"),T(ne.byteLength>=Se,"data buffer for regl.read() too small"),p.pixelStorei(Ed,4),p.readPixels(Pe,fe,ke,V,Pf,Le,ne),ne}function we(_e){var Le;return _.setFBO({framebuffer:_e.framebuffer},function(){Le=he(_e)}),Le}function Re(_e){return!_e||!("framebuffer"in _e)?he(_e):we(_e)}return Re}function La(p){return Array.prototype.slice.call(p)}function Ma(p){return La(p).join("")}function xd(){var p=0,_=[],O=[];function J(Le){for(var Pe=0;Pe<O.length;++Pe)if(O[Pe]===Le)return _[Pe];var fe="g"+p++;return _.push(fe),O.push(Le),fe}function ue(){var Le=[];function Pe(){Le.push.apply(Le,La(arguments))}var fe=[];function ke(){var V="v"+p++;return fe.push(V),arguments.length>0&&(Le.push(V,"="),Le.push.apply(Le,La(arguments)),Le.push(";")),V}return B(Pe,{def:ke,toString:function(){return Ma([fe.length>0?"var "+fe.join(",")+";":"",Ma(Le)])}})}function K(){var Le=ue(),Pe=ue(),fe=Le.toString,ke=Pe.toString;function V(ne,Se){Pe(ne,Se,"=",Le.def(ne,Se),";")}return B(function(){Le.apply(Le,La(arguments))},{def:Le.def,entry:Le,exit:Pe,save:V,set:function(ne,Se,$e){V(ne,Se),Le(ne,Se,"=",$e,";")},toString:function(){return fe()+ke()}})}function te(){var Le=Ma(arguments),Pe=K(),fe=K(),ke=Pe.toString,V=fe.toString;return B(Pe,{then:function(){return Pe.apply(Pe,La(arguments)),this},else:function(){return fe.apply(fe,La(arguments)),this},toString:function(){var ne=V();return ne&&(ne="else{"+ne+"}"),Ma(["if(",Le,"){",ke(),"}",ne])}})}var he=ue(),we={};function Re(Le,Pe){var fe=[];function ke(){var oe="a"+fe.length;return fe.push(oe),oe}Pe=Pe||0;for(var V=0;V<Pe;++V)ke();var ne=K(),Se=ne.toString,$e=we[Le]=B(ne,{arg:ke,toString:function(){return Ma(["function(",fe.join(),"){",Se(),"}"])}});return $e}function _e(){var Le=['"use strict";',he,"return {"];Object.keys(we).forEach(function(ke){Le.push('"',ke,'":',we[ke].toString(),",")}),Le.push("}");var Pe=Ma(Le).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),fe=Function.apply(null,_.concat(Pe));return fe.apply(null,O)}return{global:he,link:J,block:ue,proc:Re,scope:K,cond:te,compile:_e}}var ua="xyzw".split(""),uc=5121,Yi=1,cc=2,Js=0,fc=1,eu=2,tu=3,nu=4,lc=5,Ff=6,dc="dither",hc="blend.enable",zf="blend.color",ru="blend.equation",ou="blend.func",vc="depth.enable",wd="depth.func",Bf="depth.range",Uf="depth.mask",pc="colorMask",$f="cull.enable",_d="cull.face",mc="frontFace",Vf="lineWidth",Wf="polygonOffset.enable",gc="polygonOffset.offset",Xf="sample.alpha",Hf="sample.enable",yc="sample.coverage",Zf="stencil.enable",jf="stencil.mask",gs="stencil.func",Ec="stencil.opFront",ys="stencil.opBack",Yf="scissor.enable",iu="scissor.box",ti="viewport",Es="profile",ca="framebuffer",bs="vert",xs="frag",fa="elements",la="primitive",da="count",au="offset",su="instances",ws="vao",bc="Width",xc="Height",ka=ca+bc,Ki=ca+xc,wc=ti+bc,Sd=ti+xc,Kf="drawingBuffer",uu=Kf+bc,Qf=Kf+xc,cu=[ou,ru,gs,Ec,ys,yc,ti,iu,gc],Oi=34962,qf=34963,Ga=35632,Td=35633,yo=3553,Pa=34067,_s=2884,fu=3042,lu=3024,_c=2960,Id=2929,Fa=3089,du=32823,Nd=32926,Ad=32928,Sc=5126,hu=35664,vu=35665,Li=35666,za=5124,pu=35667,mu=35668,gu=35669,Tc=35670,Ss=35671,yu=35672,ko=35673,Eo=35674,Ba=35675,Ts=35676,Is=35678,Mi=35680,Jf=4,Ns=1028,ha=1029,Ic=2304,pi=2305,Go=32775,el=32776,As=519,mi=7680,Nc=0,tl=1,nl=32774,va=513,rl=36160,Rd=36064,gi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ol=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ua={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Qi={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},il={frag:Ga,vert:Td},Ac={cw:Ic,ccw:pi};function yi(p){return Array.isArray(p)||At(p)||Bt(p)}function $a(p){return p.sort(function(_,O){return _===ti?-1:O===ti?1:_<O?-1:1})}function ro(p,_,O,J){this.thisDep=p,this.contextDep=_,this.propDep=O,this.append=J}function qi(p){return p&&!(p.thisDep||p.contextDep||p.propDep)}function Mr(p){return new ro(!1,!1,!1,p)}function Po(p,_){var O=p.type;if(O===Js){var J=p.data.length;return new ro(!0,J>=1,J>=2,_)}else if(O===nu){var ue=p.data;return new ro(ue.thisDep,ue.contextDep,ue.propDep,_)}else{if(O===lc)return new ro(!1,!1,!1,_);if(O===Ff){for(var K=!1,te=!1,he=!1,we=0;we<p.data.length;++we){var Re=p.data[we];if(Re.type===fc)he=!0;else if(Re.type===eu)te=!0;else if(Re.type===tu)K=!0;else if(Re.type===Js){K=!0;var _e=Re.data;_e>=1&&(te=!0),_e>=2&&(he=!0)}else Re.type===nu&&(K=K||Re.data.thisDep,te=te||Re.data.contextDep,he=he||Re.data.propDep)}return new ro(K,te,he,_)}else return new ro(O===tu,O===eu,O===fc,_)}}var al=new ro(!1,!1,!1,function(){});function Cd(p,_,O,J,ue,K,te,he,we,Re,_e,Le,Pe,fe,ke){var V=Re.Record,ne={add:32774,subtract:32778,"reverse subtract":32779};O.ext_blend_minmax&&(ne.min=Go,ne.max=el);var Se=O.angle_instanced_arrays,$e=O.webgl_draw_buffers,oe={dirty:!0,profile:ke.profile},je={},pe=[],De={},me={};function Oe(R){return R.replace(".","_")}function vt(R,x,M){var U=Oe(R);pe.push(R),je[U]=oe[U]=!!M,De[U]=x}function Dt(R,x,M){var U=Oe(R);pe.push(R),Array.isArray(M)?(oe[U]=M.slice(),je[U]=M.slice()):oe[U]=je[U]=M,me[U]=x}vt(dc,lu),vt(hc,fu),Dt(zf,"blendColor",[0,0,0,0]),Dt(ru,"blendEquationSeparate",[nl,nl]),Dt(ou,"blendFuncSeparate",[tl,Nc,tl,Nc]),vt(vc,Id,!0),Dt(wd,"depthFunc",va),Dt(Bf,"depthRange",[0,1]),Dt(Uf,"depthMask",!0),Dt(pc,pc,[!0,!0,!0,!0]),vt($f,_s),Dt(_d,"cullFace",ha),Dt(mc,mc,pi),Dt(Vf,Vf,1),vt(Wf,du),Dt(gc,"polygonOffset",[0,0]),vt(Xf,Nd),vt(Hf,Ad),Dt(yc,"sampleCoverage",[1,!1]),vt(Zf,_c),Dt(jf,"stencilMask",-1),Dt(gs,"stencilFunc",[As,0,-1]),Dt(Ec,"stencilOpSeparate",[Ns,mi,mi,mi]),Dt(ys,"stencilOpSeparate",[ha,mi,mi,mi]),vt(Yf,Fa),Dt(iu,"scissor",[0,0,p.drawingBufferWidth,p.drawingBufferHeight]),Dt(ti,ti,[0,0,p.drawingBufferWidth,p.drawingBufferHeight]);var ze={gl:p,context:Pe,strings:_,next:je,current:oe,draw:Le,elements:K,buffer:ue,shader:_e,attributes:Re.state,vao:Re,uniforms:we,framebuffer:he,extensions:O,timer:fe,isBufferArgs:yi},Ne={primTypes:di,compareFuncs:Ua,blendFuncs:gi,blendEquations:ne,stencilOps:Qi,glTypes:fo,orientationType:Ac};T.optional(function(){ze.isArrayLike=pr}),$e&&(Ne.backBuffer=[ha],Ne.drawBuffer=Ct(J.maxDrawbuffers,function(R){return R===0?[0]:Ct(R,function(x){return Rd+x})}));var de=0;function Nt(){var R=xd(),x=R.link,M=R.global;R.id=de++,R.batchId="0";var U=x(ze),W=R.shared={props:"a0"};Object.keys(ze).forEach(function(L){W[L]=M.def(U,".",L)}),T.optional(function(){R.CHECK=x(T),R.commandStr=T.guessCommand(),R.command=x(R.commandStr),R.assert=function(L,N,$){L("if(!(",N,"))",this.CHECK,".commandRaise(",x($),",",this.command,");")},Ne.invalidBlendCombinations=ol});var F=R.next={},G=R.current={};Object.keys(me).forEach(function(L){Array.isArray(oe[L])&&(F[L]=M.def(W.next,".",L),G[L]=M.def(W.current,".",L))});var z=R.constants={};Object.keys(Ne).forEach(function(L){z[L]=M.def(JSON.stringify(Ne[L]))}),R.invoke=function(L,N){switch(N.type){case Js:var $=["this",W.context,W.props,R.batchId];return L.def(x(N.data),".call(",$.slice(0,Math.max(N.data.length+1,4)),")");case fc:return L.def(W.props,N.data);case eu:return L.def(W.context,N.data);case tu:return L.def("this",N.data);case nu:return N.data.append(R,L),N.data.ref;case lc:return N.data.toString();case Ff:return N.data.map(function(H){return R.invoke(L,H)})}},R.attribCache={};var A={};return R.scopeAttrib=function(L){var N=_.id(L);if(N in A)return A[N];var $=Re.scope[N];$||($=Re.scope[N]=new V);var H=A[N]=x($);return H},R}function Zt(R){var x=R.static,M=R.dynamic,U;if(Es in x){var W=!!x[Es];U=Mr(function(G,z){return W}),U.enable=W}else if(Es in M){var F=M[Es];U=Po(F,function(G,z){return G.invoke(z,F)})}return U}function et(R,x){var M=R.static,U=R.dynamic;if(ca in M){var W=M[ca];return W?(W=he.getFramebuffer(W),T.command(W,"invalid framebuffer object"),Mr(function(G,z){var A=G.link(W),L=G.shared;z.set(L.framebuffer,".next",A);var N=L.context;return z.set(N,"."+ka,A+".width"),z.set(N,"."+Ki,A+".height"),A})):Mr(function(G,z){var A=G.shared;z.set(A.framebuffer,".next","null");var L=A.context;return z.set(L,"."+ka,L+"."+uu),z.set(L,"."+Ki,L+"."+Qf),"null"})}else if(ca in U){var F=U[ca];return Po(F,function(G,z){var A=G.invoke(z,F),L=G.shared,N=L.framebuffer,$=z.def(N,".getFramebuffer(",A,")");T.optional(function(){G.assert(z,"!"+A+"||"+$,"invalid framebuffer object")}),z.set(N,".next",$);var H=L.context;return z.set(H,"."+ka,$+"?"+$+".width:"+H+"."+uu),z.set(H,"."+Ki,$+"?"+$+".height:"+H+"."+Qf),$})}else return null}function kt(R,x,M){var U=R.static,W=R.dynamic;function F(A){if(A in U){var L=U[A];T.commandType(L,"object","invalid "+A,M.commandStr);var N=!0,$=L.x|0,H=L.y|0,ae,le;return"width"in L?(ae=L.width|0,T.command(ae>=0,"invalid "+A,M.commandStr)):N=!1,"height"in L?(le=L.height|0,T.command(le>=0,"invalid "+A,M.commandStr)):N=!1,new ro(!N&&x&&x.thisDep,!N&&x&&x.contextDep,!N&&x&&x.propDep,function(st,Wt){var tt=st.shared.context,bt=ae;"width"in L||(bt=Wt.def(tt,".",ka,"-",$));var Gt=le;return"height"in L||(Gt=Wt.def(tt,".",Ki,"-",H)),[$,H,bt,Gt]})}else if(A in W){var ie=W[A],Ae=Po(ie,function(st,Wt){var tt=st.invoke(Wt,ie);T.optional(function(){st.assert(Wt,tt+"&&typeof "+tt+'==="object"',"invalid "+A)});var bt=st.shared.context,Gt=Wt.def(tt,".x|0"),An=Wt.def(tt,".y|0"),_r=Wt.def('"width" in ',tt,"?",tt,".width|0:","(",bt,".",ka,"-",Gt,")"),bo=Wt.def('"height" in ',tt,"?",tt,".height|0:","(",bt,".",Ki,"-",An,")");return T.optional(function(){st.assert(Wt,_r+">=0&&"+bo+">=0","invalid "+A)}),[Gt,An,_r,bo]});return x&&(Ae.thisDep=Ae.thisDep||x.thisDep,Ae.contextDep=Ae.contextDep||x.contextDep,Ae.propDep=Ae.propDep||x.propDep),Ae}else return x?new ro(x.thisDep,x.contextDep,x.propDep,function(st,Wt){var tt=st.shared.context;return[0,0,Wt.def(tt,".",ka),Wt.def(tt,".",Ki)]}):null}var G=F(ti);if(G){var z=G;G=new ro(G.thisDep,G.contextDep,G.propDep,function(A,L){var N=z.append(A,L),$=A.shared.context;return L.set($,"."+wc,N[2]),L.set($,"."+Sd,N[3]),N})}return{viewport:G,scissor_box:F(iu)}}function St(R,x){var M=R.static,U=typeof M[xs]=="string"&&typeof M[bs]=="string";if(U){if(Object.keys(x.dynamic).length>0)return null;var W=x.static,F=Object.keys(W);if(F.length>0&&typeof W[F[0]]=="number"){for(var G=[],z=0;z<F.length;++z)T(typeof W[F[z]]=="number","must specify all vertex attribute locations when using vaos"),G.push([W[F[z]]|0,F[z]]);return G}}return null}function Qt(R,x,M){var U=R.static,W=R.dynamic;function F(N){if(N in U){var $=_.id(U[N]);T.optional(function(){_e.shader(il[N],$,T.guessCommand())});var H=Mr(function(){return $});return H.id=$,H}else if(N in W){var ae=W[N];return Po(ae,function(le,ie){var Ae=le.invoke(ie,ae),st=ie.def(le.shared.strings,".id(",Ae,")");return T.optional(function(){ie(le.shared.shader,".shader(",il[N],",",st,",",le.command,");")}),st})}return null}var G=F(xs),z=F(bs),A=null,L;return qi(G)&&qi(z)?(A=_e.program(z.id,G.id,null,M),L=Mr(function(N,$){return N.link(A)})):L=new ro(G&&G.thisDep||z&&z.thisDep,G&&G.contextDep||z&&z.contextDep,G&&G.propDep||z&&z.propDep,function(N,$){var H=N.shared.shader,ae;G?ae=G.append(N,$):ae=$.def(H,".",xs);var le;z?le=z.append(N,$):le=$.def(H,".",bs);var ie=H+".program("+le+","+ae;return T.optional(function(){ie+=","+N.command}),$.def(ie+")")}),{frag:G,vert:z,progVar:L,program:A}}function Nn(R,x){var M=R.static,U=R.dynamic;function W(){if(fa in M){var N=M[fa];yi(N)?N=K.getElements(K.create(N,!0)):N&&(N=K.getElements(N),T.command(N,"invalid elements",x.commandStr));var $=Mr(function(ae,le){if(N){var ie=ae.link(N);return ae.ELEMENTS=ie,ie}return ae.ELEMENTS=null,null});return $.value=N,$}else if(fa in U){var H=U[fa];return Po(H,function(ae,le){var ie=ae.shared,Ae=ie.isBufferArgs,st=ie.elements,Wt=ae.invoke(le,H),tt=le.def("null"),bt=le.def(Ae,"(",Wt,")"),Gt=ae.cond(bt).then(tt,"=",st,".createStream(",Wt,");").else(tt,"=",st,".getElements(",Wt,");");return T.optional(function(){ae.assert(Gt.else,"!"+Wt+"||"+tt,"invalid elements")}),le.entry(Gt),le.exit(ae.cond(bt).then(st,".destroyStream(",tt,");")),ae.ELEMENTS=tt,tt})}return null}var F=W();function G(){if(la in M){var N=M[la];return T.commandParameter(N,di,"invalid primitve",x.commandStr),Mr(function(H,ae){return di[N]})}else if(la in U){var $=U[la];return Po($,function(H,ae){var le=H.constants.primTypes,ie=H.invoke(ae,$);return T.optional(function(){H.assert(ae,ie+" in "+le,"invalid primitive, must be one of "+Object.keys(di))}),ae.def(le,"[",ie,"]")})}else if(F)return qi(F)?F.value?Mr(function(H,ae){return ae.def(H.ELEMENTS,".primType")}):Mr(function(){return Jf}):new ro(F.thisDep,F.contextDep,F.propDep,function(H,ae){var le=H.ELEMENTS;return ae.def(le,"?",le,".primType:",Jf)});return null}function z(N,$){if(N in M){var H=M[N]|0;return T.command(!$||H>=0,"invalid "+N,x.commandStr),Mr(function(le,ie){return $&&(le.OFFSET=H),H})}else if(N in U){var ae=U[N];return Po(ae,function(le,ie){var Ae=le.invoke(ie,ae);return $&&(le.OFFSET=Ae,T.optional(function(){le.assert(ie,Ae+">=0","invalid "+N)})),Ae})}else if($&&F)return Mr(function(le,ie){return le.OFFSET="0",0});return null}var A=z(au,!0);function L(){if(da in M){var N=M[da]|0;return T.command(typeof N=="number"&&N>=0,"invalid vertex count",x.commandStr),Mr(function(){return N})}else if(da in U){var $=U[da];return Po($,function(le,ie){var Ae=le.invoke(ie,$);return T.optional(function(){le.assert(ie,"typeof "+Ae+'==="number"&&'+Ae+">=0&&"+Ae+"===("+Ae+"|0)","invalid vertex count")}),Ae})}else if(F)if(qi(F)){if(F)return A?new ro(A.thisDep,A.contextDep,A.propDep,function(le,ie){var Ae=ie.def(le.ELEMENTS,".vertCount-",le.OFFSET);return T.optional(function(){le.assert(ie,Ae+">=0","invalid vertex offset/element buffer too small")}),Ae}):Mr(function(le,ie){return ie.def(le.ELEMENTS,".vertCount")});var H=Mr(function(){return-1});return T.optional(function(){H.MISSING=!0}),H}else{var ae=new ro(F.thisDep||A.thisDep,F.contextDep||A.contextDep,F.propDep||A.propDep,function(le,ie){var Ae=le.ELEMENTS;return le.OFFSET?ie.def(Ae,"?",Ae,".vertCount-",le.OFFSET,":-1"):ie.def(Ae,"?",Ae,".vertCount:-1")});return T.optional(function(){ae.DYNAMIC=!0}),ae}return null}return{elements:F,primitive:G(),count:L(),instances:z(su,!1),offset:A}}function kr(R,x){var M=R.static,U=R.dynamic,W={};return pe.forEach(function(F){var G=Oe(F);function z(A,L){if(F in M){var N=A(M[F]);W[G]=Mr(function(){return N})}else if(F in U){var $=U[F];W[G]=Po($,function(H,ae){return L(H,ae,H.invoke(ae,$))})}}switch(F){case $f:case hc:case dc:case Zf:case vc:case Yf:case Wf:case Xf:case Hf:case Uf:return z(function(A){return T.commandType(A,"boolean",F,x.commandStr),A},function(A,L,N){return T.optional(function(){A.assert(L,"typeof "+N+'==="boolean"',"invalid flag "+F,A.commandStr)}),N});case wd:return z(function(A){return T.commandParameter(A,Ua,"invalid "+F,x.commandStr),Ua[A]},function(A,L,N){var $=A.constants.compareFuncs;return T.optional(function(){A.assert(L,N+" in "+$,"invalid "+F+", must be one of "+Object.keys(Ua))}),L.def($,"[",N,"]")});case Bf:return z(function(A){return T.command(pr(A)&&A.length===2&&typeof A[0]=="number"&&typeof A[1]=="number"&&A[0]<=A[1],"depth range is 2d array",x.commandStr),A},function(A,L,N){T.optional(function(){A.assert(L,A.shared.isArrayLike+"("+N+")&&"+N+".length===2&&typeof "+N+'[0]==="number"&&typeof '+N+'[1]==="number"&&'+N+"[0]<="+N+"[1]","depth range must be a 2d array")});var $=L.def("+",N,"[0]"),H=L.def("+",N,"[1]");return[$,H]});case ou:return z(function(A){T.commandType(A,"object","blend.func",x.commandStr);var L="srcRGB"in A?A.srcRGB:A.src,N="srcAlpha"in A?A.srcAlpha:A.src,$="dstRGB"in A?A.dstRGB:A.dst,H="dstAlpha"in A?A.dstAlpha:A.dst;return T.commandParameter(L,gi,G+".srcRGB",x.commandStr),T.commandParameter(N,gi,G+".srcAlpha",x.commandStr),T.commandParameter($,gi,G+".dstRGB",x.commandStr),T.commandParameter(H,gi,G+".dstAlpha",x.commandStr),T.command(ol.indexOf(L+", "+$)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+L+", "+$+")",x.commandStr),[gi[L],gi[$],gi[N],gi[H]]},function(A,L,N){var $=A.constants.blendFuncs;T.optional(function(){A.assert(L,N+"&&typeof "+N+'==="object"',"invalid blend func, must be an object")});function H(tt,bt){var Gt=L.def('"',tt,bt,'" in ',N,"?",N,".",tt,bt,":",N,".",tt);return T.optional(function(){A.assert(L,Gt+" in "+$,"invalid "+F+"."+tt+bt+", must be one of "+Object.keys(gi))}),Gt}var ae=H("src","RGB"),le=H("dst","RGB");T.optional(function(){var tt=A.constants.invalidBlendCombinations;A.assert(L,tt+".indexOf("+ae+'+", "+'+le+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ie=L.def($,"[",ae,"]"),Ae=L.def($,"[",H("src","Alpha"),"]"),st=L.def($,"[",le,"]"),Wt=L.def($,"[",H("dst","Alpha"),"]");return[ie,st,Ae,Wt]});case ru:return z(function(A){if(typeof A=="string")return T.commandParameter(A,ne,"invalid "+F,x.commandStr),[ne[A],ne[A]];if(typeof A=="object")return T.commandParameter(A.rgb,ne,F+".rgb",x.commandStr),T.commandParameter(A.alpha,ne,F+".alpha",x.commandStr),[ne[A.rgb],ne[A.alpha]];T.commandRaise("invalid blend.equation",x.commandStr)},function(A,L,N){var $=A.constants.blendEquations,H=L.def(),ae=L.def(),le=A.cond("typeof ",N,'==="string"');return T.optional(function(){function ie(Ae,st,Wt){A.assert(Ae,Wt+" in "+$,"invalid "+st+", must be one of "+Object.keys(ne))}ie(le.then,F,N),A.assert(le.else,N+"&&typeof "+N+'==="object"',"invalid "+F),ie(le.else,F+".rgb",N+".rgb"),ie(le.else,F+".alpha",N+".alpha")}),le.then(H,"=",ae,"=",$,"[",N,"];"),le.else(H,"=",$,"[",N,".rgb];",ae,"=",$,"[",N,".alpha];"),L(le),[H,ae]});case zf:return z(function(A){return T.command(pr(A)&&A.length===4,"blend.color must be a 4d array",x.commandStr),Ct(4,function(L){return+A[L]})},function(A,L,N){return T.optional(function(){A.assert(L,A.shared.isArrayLike+"("+N+")&&"+N+".length===4","blend.color must be a 4d array")}),Ct(4,function($){return L.def("+",N,"[",$,"]")})});case jf:return z(function(A){return T.commandType(A,"number",G,x.commandStr),A|0},function(A,L,N){return T.optional(function(){A.assert(L,"typeof "+N+'==="number"',"invalid stencil.mask")}),L.def(N,"|0")});case gs:return z(function(A){T.commandType(A,"object",G,x.commandStr);var L=A.cmp||"keep",N=A.ref||0,$="mask"in A?A.mask:-1;return T.commandParameter(L,Ua,F+".cmp",x.commandStr),T.commandType(N,"number",F+".ref",x.commandStr),T.commandType($,"number",F+".mask",x.commandStr),[Ua[L],N,$]},function(A,L,N){var $=A.constants.compareFuncs;T.optional(function(){function ie(){A.assert(L,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ie(N+"&&typeof ",N,'==="object"'),ie('!("cmp" in ',N,")||(",N,".cmp in ",$,")")});var H=L.def('"cmp" in ',N,"?",$,"[",N,".cmp]",":",mi),ae=L.def(N,".ref|0"),le=L.def('"mask" in ',N,"?",N,".mask|0:-1");return[H,ae,le]});case Ec:case ys:return z(function(A){T.commandType(A,"object",G,x.commandStr);var L=A.fail||"keep",N=A.zfail||"keep",$=A.zpass||"keep";return T.commandParameter(L,Qi,F+".fail",x.commandStr),T.commandParameter(N,Qi,F+".zfail",x.commandStr),T.commandParameter($,Qi,F+".zpass",x.commandStr),[F===ys?ha:Ns,Qi[L],Qi[N],Qi[$]]},function(A,L,N){var $=A.constants.stencilOps;T.optional(function(){A.assert(L,N+"&&typeof "+N+'==="object"',"invalid "+F)});function H(ae){return T.optional(function(){A.assert(L,'!("'+ae+'" in '+N+")||("+N+"."+ae+" in "+$+")","invalid "+F+"."+ae+", must be one of "+Object.keys(Qi))}),L.def('"',ae,'" in ',N,"?",$,"[",N,".",ae,"]:",mi)}return[F===ys?ha:Ns,H("fail"),H("zfail"),H("zpass")]});case gc:return z(function(A){T.commandType(A,"object",G,x.commandStr);var L=A.factor|0,N=A.units|0;return T.commandType(L,"number",G+".factor",x.commandStr),T.commandType(N,"number",G+".units",x.commandStr),[L,N]},function(A,L,N){T.optional(function(){A.assert(L,N+"&&typeof "+N+'==="object"',"invalid "+F)});var $=L.def(N,".factor|0"),H=L.def(N,".units|0");return[$,H]});case _d:return z(function(A){var L=0;return A==="front"?L=Ns:A==="back"&&(L=ha),T.command(!!L,G,x.commandStr),L},function(A,L,N){return T.optional(function(){A.assert(L,N+'==="front"||'+N+'==="back"',"invalid cull.face")}),L.def(N,'==="front"?',Ns,":",ha)});case Vf:return z(function(A){return T.command(typeof A=="number"&&A>=J.lineWidthDims[0]&&A<=J.lineWidthDims[1],"invalid line width, must be a positive number between "+J.lineWidthDims[0]+" and "+J.lineWidthDims[1],x.commandStr),A},function(A,L,N){return T.optional(function(){A.assert(L,"typeof "+N+'==="number"&&'+N+">="+J.lineWidthDims[0]+"&&"+N+"<="+J.lineWidthDims[1],"invalid line width")}),N});case mc:return z(function(A){return T.commandParameter(A,Ac,G,x.commandStr),Ac[A]},function(A,L,N){return T.optional(function(){A.assert(L,N+'==="cw"||'+N+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),L.def(N+'==="cw"?'+Ic+":"+pi)});case pc:return z(function(A){return T.command(pr(A)&&A.length===4,"color.mask must be length 4 array",x.commandStr),A.map(function(L){return!!L})},function(A,L,N){return T.optional(function(){A.assert(L,A.shared.isArrayLike+"("+N+")&&"+N+".length===4","invalid color.mask")}),Ct(4,function($){return"!!"+N+"["+$+"]"})});case yc:return z(function(A){T.command(typeof A=="object"&&A,G,x.commandStr);var L="value"in A?A.value:1,N=!!A.invert;return T.command(typeof L=="number"&&L>=0&&L<=1,"sample.coverage.value must be a number between 0 and 1",x.commandStr),[L,N]},function(A,L,N){T.optional(function(){A.assert(L,N+"&&typeof "+N+'==="object"',"invalid sample.coverage")});var $=L.def('"value" in ',N,"?+",N,".value:1"),H=L.def("!!",N,".invert");return[$,H]})}}),W}function Kr(R,x){var M=R.static,U=R.dynamic,W={};return Object.keys(M).forEach(function(F){var G=M[F],z;if(typeof G=="number"||typeof G=="boolean")z=Mr(function(){return G});else if(typeof G=="function"){var A=G._reglType;A==="texture2d"||A==="textureCube"?z=Mr(function(L){return L.link(G)}):A==="framebuffer"||A==="framebufferCube"?(T.command(G.color.length>0,'missing color attachment for framebuffer sent to uniform "'+F+'"',x.commandStr),z=Mr(function(L){return L.link(G.color[0])})):T.commandRaise('invalid data for uniform "'+F+'"',x.commandStr)}else pr(G)?z=Mr(function(L){var N=L.global.def("[",Ct(G.length,function($){return T.command(typeof G[$]=="number"||typeof G[$]=="boolean","invalid uniform "+F,L.commandStr),G[$]}),"]");return N}):T.commandRaise('invalid or missing data for uniform "'+F+'"',x.commandStr);z.value=G,W[F]=z}),Object.keys(U).forEach(function(F){var G=U[F];W[F]=Po(G,function(z,A){return z.invoke(A,G)})}),W}function jt(R,x){var M=R.static,U=R.dynamic,W={};return Object.keys(M).forEach(function(F){var G=M[F],z=_.id(F),A=new V;if(yi(G))A.state=Yi,A.buffer=ue.getBuffer(ue.create(G,Oi,!1,!0)),A.type=0;else{var L=ue.getBuffer(G);if(L)A.state=Yi,A.buffer=L,A.type=0;else if(T.command(typeof G=="object"&&G,"invalid data for attribute "+F,x.commandStr),"constant"in G){var N=G.constant;A.buffer="null",A.state=cc,typeof N=="number"?A.x=N:(T.command(pr(N)&&N.length>0&&N.length<=4,"invalid constant for attribute "+F,x.commandStr),ua.forEach(function(st,Wt){Wt<N.length&&(A[st]=N[Wt])}))}else{yi(G.buffer)?L=ue.getBuffer(ue.create(G.buffer,Oi,!1,!0)):L=ue.getBuffer(G.buffer),T.command(!!L,'missing buffer for attribute "'+F+'"',x.commandStr);var $=G.offset|0;T.command($>=0,'invalid offset for attribute "'+F+'"',x.commandStr);var H=G.stride|0;T.command(H>=0&&H<256,'invalid stride for attribute "'+F+'", must be integer betweeen [0, 255]',x.commandStr);var ae=G.size|0;T.command(!("size"in G)||ae>0&&ae<=4,'invalid size for attribute "'+F+'", must be 1,2,3,4',x.commandStr);var le=!!G.normalized,ie=0;"type"in G&&(T.commandParameter(G.type,fo,"invalid type for attribute "+F,x.commandStr),ie=fo[G.type]);var Ae=G.divisor|0;"divisor"in G&&(T.command(Ae===0||Se,'cannot specify divisor for attribute "'+F+'", instancing not supported',x.commandStr),T.command(Ae>=0,'invalid divisor for attribute "'+F+'"',x.commandStr)),T.optional(function(){var st=x.commandStr,Wt=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(G).forEach(function(tt){T.command(Wt.indexOf(tt)>=0,'unknown parameter "'+tt+'" for attribute pointer "'+F+'" (valid parameters are '+Wt+")",st)})}),A.buffer=L,A.state=Yi,A.size=ae,A.normalized=le,A.type=ie||L.dtype,A.offset=$,A.stride=H,A.divisor=Ae}}W[F]=Mr(function(st,Wt){var tt=st.attribCache;if(z in tt)return tt[z];var bt={isStream:!1};return Object.keys(A).forEach(function(Gt){bt[Gt]=A[Gt]}),A.buffer&&(bt.buffer=st.link(A.buffer),bt.type=bt.type||bt.buffer+".dtype"),tt[z]=bt,bt})}),Object.keys(U).forEach(function(F){var G=U[F];function z(A,L){var N=A.invoke(L,G),$=A.shared,H=A.constants,ae=$.isBufferArgs,le=$.buffer;T.optional(function(){A.assert(L,N+"&&(typeof "+N+'==="object"||typeof '+N+'==="function")&&('+ae+"("+N+")||"+le+".getBuffer("+N+")||"+le+".getBuffer("+N+".buffer)||"+ae+"("+N+'.buffer)||("constant" in '+N+"&&(typeof "+N+'.constant==="number"||'+$.isArrayLike+"("+N+".constant))))",'invalid dynamic attribute "'+F+'"')});var ie={isStream:L.def(!1)},Ae=new V;Ae.state=Yi,Object.keys(Ae).forEach(function(bt){ie[bt]=L.def(""+Ae[bt])});var st=ie.buffer,Wt=ie.type;L("if(",ae,"(",N,")){",ie.isStream,"=true;",st,"=",le,".createStream(",Oi,",",N,");",Wt,"=",st,".dtype;","}else{",st,"=",le,".getBuffer(",N,");","if(",st,"){",Wt,"=",st,".dtype;",'}else if("constant" in ',N,"){",ie.state,"=",cc,";","if(typeof "+N+'.constant === "number"){',ie[ua[0]],"=",N,".constant;",ua.slice(1).map(function(bt){return ie[bt]}).join("="),"=0;","}else{",ua.map(function(bt,Gt){return ie[bt]+"="+N+".constant.length>"+Gt+"?"+N+".constant["+Gt+"]:0;"}).join(""),"}}else{","if(",ae,"(",N,".buffer)){",st,"=",le,".createStream(",Oi,",",N,".buffer);","}else{",st,"=",le,".getBuffer(",N,".buffer);","}",Wt,'="type" in ',N,"?",H.glTypes,"[",N,".type]:",st,".dtype;",ie.normalized,"=!!",N,".normalized;");function tt(bt){L(ie[bt],"=",N,".",bt,"|0;")}return tt("size"),tt("offset"),tt("stride"),tt("divisor"),L("}}"),L.exit("if(",ie.isStream,"){",le,".destroyStream(",st,");","}"),ie}W[F]=Po(G,z)}),W}function Hr(R,x){var M=R.static,U=R.dynamic;if(ws in M){var W=M[ws];return W!==null&&Re.getVAO(W)===null&&(W=Re.createVAO(W)),Mr(function(G){return G.link(Re.getVAO(W))})}else if(ws in U){var F=U[ws];return Po(F,function(G,z){var A=G.invoke(z,F);return z.def(G.shared.vao+".getVAO("+A+")")})}return null}function tr(R){var x=R.static,M=R.dynamic,U={};return Object.keys(x).forEach(function(W){var F=x[W];U[W]=Mr(function(G,z){return typeof F=="number"||typeof F=="boolean"?""+F:G.link(F)})}),Object.keys(M).forEach(function(W){var F=M[W];U[W]=Po(F,function(G,z){return G.invoke(z,F)})}),U}function Rr(R,x,M,U,W){var F=R.static,G=R.dynamic;T.optional(function(){var tt=[ca,bs,xs,fa,la,au,da,su,Es,ws].concat(pe);function bt(Gt){Object.keys(Gt).forEach(function(An){T.command(tt.indexOf(An)>=0,'unknown parameter "'+An+'"',W.commandStr)})}bt(F),bt(G)});var z=St(R,x),A=et(R,W),L=kt(R,A,W),N=Nn(R,W),$=kr(R,W),H=Qt(R,W,z);function ae(tt){var bt=L[tt];bt&&($[tt]=bt)}ae(ti),ae(Oe(iu));var le=Object.keys($).length>0,ie={framebuffer:A,draw:N,shader:H,state:$,dirty:le,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ie.profile=Zt(R,W),ie.uniforms=Kr(M,W),ie.drawVAO=ie.scopeVAO=Hr(R,W),!ie.drawVAO&&H.program&&!z&&O.angle_instanced_arrays){var Ae=!0,st=H.program.attributes.map(function(tt){var bt=x.static[tt];return Ae=Ae&&!!bt,bt});if(Ae&&st.length>0){var Wt=Re.getVAO(Re.createVAO(st));ie.drawVAO=new ro(null,null,null,function(tt,bt){return tt.link(Wt)}),ie.useVAO=!0}}return z?ie.useVAO=!0:ie.attributes=jt(x,W),ie.context=tr(U,W),ie}function Gr(R,x,M){var U=R.shared,W=U.context,F=R.scope();Object.keys(M).forEach(function(G){x.save(W,"."+G);var z=M[G],A=z.append(R,x);Array.isArray(A)?F(W,".",G,"=[",A.join(),"];"):F(W,".",G,"=",A,";")}),x(F)}function Pr(R,x,M,U){var W=R.shared,F=W.gl,G=W.framebuffer,z;$e&&(z=x.def(W.extensions,".webgl_draw_buffers"));var A=R.constants,L=A.drawBuffer,N=A.backBuffer,$;M?$=M.append(R,x):$=x.def(G,".next"),U||x("if(",$,"!==",G,".cur){"),x("if(",$,"){",F,".bindFramebuffer(",rl,",",$,".framebuffer);"),$e&&x(z,".drawBuffersWEBGL(",L,"[",$,".colorAttachments.length]);"),x("}else{",F,".bindFramebuffer(",rl,",null);"),$e&&x(z,".drawBuffersWEBGL(",N,");"),x("}",G,".cur=",$,";"),U||x("}")}function oo(R,x,M){var U=R.shared,W=U.gl,F=R.current,G=R.next,z=U.current,A=U.next,L=R.cond(z,".dirty");pe.forEach(function(N){var $=Oe(N);if(!($ in M.state)){var H,ae;if($ in G){H=G[$],ae=F[$];var le=Ct(oe[$].length,function(Ae){return L.def(H,"[",Ae,"]")});L(R.cond(le.map(function(Ae,st){return Ae+"!=="+ae+"["+st+"]"}).join("||")).then(W,".",me[$],"(",le,");",le.map(function(Ae,st){return ae+"["+st+"]="+Ae}).join(";"),";"))}else{H=L.def(A,".",$);var ie=R.cond(H,"!==",z,".",$);L(ie),$ in De?ie(R.cond(H).then(W,".enable(",De[$],");").else(W,".disable(",De[$],");"),z,".",$,"=",H,";"):ie(W,".",me[$],"(",H,");",z,".",$,"=",H,";")}}}),Object.keys(M.state).length===0&&L(z,".dirty=false;"),x(L)}function io(R,x,M,U){var W=R.shared,F=R.current,G=W.current,z=W.gl;$a(Object.keys(M)).forEach(function(A){var L=M[A];if(!(U&&!U(L))){var N=L.append(R,x);if(De[A]){var $=De[A];qi(L)?N?x(z,".enable(",$,");"):x(z,".disable(",$,");"):x(R.cond(N).then(z,".enable(",$,");").else(z,".disable(",$,");")),x(G,".",A,"=",N,";")}else if(pr(N)){var H=F[A];x(z,".",me[A],"(",N,");",N.map(function(ae,le){return H+"["+le+"]="+ae}).join(";"),";")}else x(z,".",me[A],"(",N,");",G,".",A,"=",N,";")}})}function mr(R,x){Se&&(R.instancing=x.def(R.shared.extensions,".angle_instanced_arrays"))}function Yt(R,x,M,U,W){var F=R.shared,G=R.stats,z=F.current,A=F.timer,L=M.profile;function N(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var $,H;function ae(tt){$=x.def(),tt($,"=",N(),";"),typeof W=="string"?tt(G,".count+=",W,";"):tt(G,".count++;"),fe&&(U?(H=x.def(),tt(H,"=",A,".getNumPendingQueries();")):tt(A,".beginQuery(",G,");"))}function le(tt){tt(G,".cpuTime+=",N(),"-",$,";"),fe&&(U?tt(A,".pushScopeStats(",H,",",A,".getNumPendingQueries(),",G,");"):tt(A,".endQuery();"))}function ie(tt){var bt=x.def(z,".profile");x(z,".profile=",tt,";"),x.exit(z,".profile=",bt,";")}var Ae;if(L){if(qi(L)){L.enable?(ae(x),le(x.exit),ie("true")):ie("false");return}Ae=L.append(R,x),ie(Ae)}else Ae=x.def(z,".profile");var st=R.block();ae(st),x("if(",Ae,"){",st,"}");var Wt=R.block();le(Wt),x.exit("if(",Ae,"){",Wt,"}")}function Qr(R,x,M,U,W){var F=R.shared;function G(A){switch(A){case hu:case pu:case Ss:return 2;case vu:case mu:case yu:return 3;case Li:case gu:case ko:return 4;default:return 1}}function z(A,L,N){var $=F.gl,H=x.def(A,".location"),ae=x.def(F.attributes,"[",H,"]"),le=N.state,ie=N.buffer,Ae=[N.x,N.y,N.z,N.w],st=["buffer","normalized","offset","stride"];function Wt(){x("if(!",ae,".buffer){",$,".enableVertexAttribArray(",H,");}");var bt=N.type,Gt;if(N.size?Gt=x.def(N.size,"||",L):Gt=L,x("if(",ae,".type!==",bt,"||",ae,".size!==",Gt,"||",st.map(function(_r){return ae+"."+_r+"!=="+N[_r]}).join("||"),"){",$,".bindBuffer(",Oi,",",ie,".buffer);",$,".vertexAttribPointer(",[H,Gt,bt,N.normalized,N.stride,N.offset],");",ae,".type=",bt,";",ae,".size=",Gt,";",st.map(function(_r){return ae+"."+_r+"="+N[_r]+";"}).join(""),"}"),Se){var An=N.divisor;x("if(",ae,".divisor!==",An,"){",R.instancing,".vertexAttribDivisorANGLE(",[H,An],");",ae,".divisor=",An,";}")}}function tt(){x("if(",ae,".buffer){",$,".disableVertexAttribArray(",H,");",ae,".buffer=null;","}if(",ua.map(function(bt,Gt){return ae+"."+bt+"!=="+Ae[Gt]}).join("||"),"){",$,".vertexAttrib4f(",H,",",Ae,");",ua.map(function(bt,Gt){return ae+"."+bt+"="+Ae[Gt]+";"}).join(""),"}")}le===Yi?Wt():le===cc?tt():(x("if(",le,"===",Yi,"){"),Wt(),x("}else{"),tt(),x("}"))}U.forEach(function(A){var L=A.name,N=M.attributes[L],$;if(N){if(!W(N))return;$=N.append(R,x)}else{if(!W(al))return;var H=R.scopeAttrib(L);T.optional(function(){R.assert(x,H+".state","missing attribute "+L)}),$={},Object.keys(new V).forEach(function(ae){$[ae]=x.def(H,".",ae)})}z(R.link(A),G(A.info.type),$)})}function xn(R,x,M,U,W){for(var F=R.shared,G=F.gl,z,A=0;A<U.length;++A){var L=U[A],N=L.name,$=L.info.type,H=M.uniforms[N],ae=R.link(L),le=ae+".location",ie;if(H){if(!W(H))continue;if(qi(H)){var Ae=H.value;if(T.command(Ae!==null&&typeof Ae!="undefined",'missing uniform "'+N+'"',R.commandStr),$===Is||$===Mi){T.command(typeof Ae=="function"&&($===Is&&(Ae._reglType==="texture2d"||Ae._reglType==="framebuffer")||$===Mi&&(Ae._reglType==="textureCube"||Ae._reglType==="framebufferCube")),"invalid texture for uniform "+N,R.commandStr);var st=R.link(Ae._texture||Ae.color[0]._texture);x(G,".uniform1i(",le,",",st+".bind());"),x.exit(st,".unbind();")}else if($===Eo||$===Ba||$===Ts){T.optional(function(){T.command(pr(Ae),"invalid matrix for uniform "+N,R.commandStr),T.command($===Eo&&Ae.length===4||$===Ba&&Ae.length===9||$===Ts&&Ae.length===16,"invalid length for matrix uniform "+N,R.commandStr)});var Wt=R.global.def("new Float32Array(["+Array.prototype.slice.call(Ae)+"])"),tt=2;$===Ba?tt=3:$===Ts&&(tt=4),x(G,".uniformMatrix",tt,"fv(",le,",false,",Wt,");")}else{switch($){case Sc:T.commandType(Ae,"number","uniform "+N,R.commandStr),z="1f";break;case hu:T.command(pr(Ae)&&Ae.length===2,"uniform "+N,R.commandStr),z="2f";break;case vu:T.command(pr(Ae)&&Ae.length===3,"uniform "+N,R.commandStr),z="3f";break;case Li:T.command(pr(Ae)&&Ae.length===4,"uniform "+N,R.commandStr),z="4f";break;case Tc:T.commandType(Ae,"boolean","uniform "+N,R.commandStr),z="1i";break;case za:T.commandType(Ae,"number","uniform "+N,R.commandStr),z="1i";break;case Ss:T.command(pr(Ae)&&Ae.length===2,"uniform "+N,R.commandStr),z="2i";break;case pu:T.command(pr(Ae)&&Ae.length===2,"uniform "+N,R.commandStr),z="2i";break;case yu:T.command(pr(Ae)&&Ae.length===3,"uniform "+N,R.commandStr),z="3i";break;case mu:T.command(pr(Ae)&&Ae.length===3,"uniform "+N,R.commandStr),z="3i";break;case ko:T.command(pr(Ae)&&Ae.length===4,"uniform "+N,R.commandStr),z="4i";break;case gu:T.command(pr(Ae)&&Ae.length===4,"uniform "+N,R.commandStr),z="4i";break}x(G,".uniform",z,"(",le,",",pr(Ae)?Array.prototype.slice.call(Ae):Ae,");")}continue}else ie=H.append(R,x)}else{if(!W(al))continue;ie=x.def(F.uniforms,"[",_.id(N),"]")}$===Is?(T(!Array.isArray(ie),"must specify a scalar prop for textures"),x("if(",ie,"&&",ie,'._reglType==="framebuffer"){',ie,"=",ie,".color[0];","}")):$===Mi&&(T(!Array.isArray(ie),"must specify a scalar prop for cube maps"),x("if(",ie,"&&",ie,'._reglType==="framebufferCube"){',ie,"=",ie,".color[0];","}")),T.optional(function(){function bo(ni,xu){R.assert(x,ni,'bad data or missing for uniform "'+N+'".  '+xu)}function Cc(ni){T(!Array.isArray(ie),"must not specify an array type for uniform"),bo("typeof "+ie+'==="'+ni+'"',"invalid type, expected "+ni)}function Ln(ni,xu){Array.isArray(ie)?T(ie.length===ni,"must have length "+ni):bo(F.isArrayLike+"("+ie+")&&"+ie+".length==="+ni,"invalid vector, should have length "+ni,R.commandStr)}function Dc(ni){T(!Array.isArray(ie),"must not specify a value type"),bo("typeof "+ie+'==="function"&&'+ie+'._reglType==="texture'+(ni===yo?"2d":"Cube")+'"',"invalid texture type",R.commandStr)}switch($){case za:Cc("number");break;case pu:Ln(2,"number");break;case mu:Ln(3,"number");break;case gu:Ln(4,"number");break;case Sc:Cc("number");break;case hu:Ln(2,"number");break;case vu:Ln(3,"number");break;case Li:Ln(4,"number");break;case Tc:Cc("boolean");break;case Ss:Ln(2,"boolean");break;case yu:Ln(3,"boolean");break;case ko:Ln(4,"boolean");break;case Eo:Ln(4,"number");break;case Ba:Ln(9,"number");break;case Ts:Ln(16,"number");break;case Is:Dc(yo);break;case Mi:Dc(Pa);break}});var bt=1;switch($){case Is:case Mi:var Gt=x.def(ie,"._texture");x(G,".uniform1i(",le,",",Gt,".bind());"),x.exit(Gt,".unbind();");continue;case za:case Tc:z="1i";break;case pu:case Ss:z="2i",bt=2;break;case mu:case yu:z="3i",bt=3;break;case gu:case ko:z="4i",bt=4;break;case Sc:z="1f";break;case hu:z="2f",bt=2;break;case vu:z="3f",bt=3;break;case Li:z="4f",bt=4;break;case Eo:z="Matrix2fv";break;case Ba:z="Matrix3fv";break;case Ts:z="Matrix4fv";break}if(x(G,".uniform",z,"(",le,","),z.charAt(0)==="M"){var An=Math.pow($-Eo+2,2),_r=R.global.def("new Float32Array(",An,")");Array.isArray(ie)?x("false,(",Ct(An,function(bo){return _r+"["+bo+"]="+ie[bo]}),",",_r,")"):x("false,(Array.isArray(",ie,")||",ie," instanceof Float32Array)?",ie,":(",Ct(An,function(bo){return _r+"["+bo+"]="+ie+"["+bo+"]"}),",",_r,")")}else bt>1?x(Ct(bt,function(bo){return Array.isArray(ie)?ie[bo]:ie+"["+bo+"]"})):(T(!Array.isArray(ie),"uniform value must not be an array"),x(ie));x(");")}}function gt(R,x,M,U){var W=R.shared,F=W.gl,G=W.draw,z=U.draw;function A(){var Gt=z.elements,An,_r=x;return Gt?((Gt.contextDep&&U.contextDynamic||Gt.propDep)&&(_r=M),An=Gt.append(R,_r)):An=_r.def(G,".",fa),An&&_r("if("+An+")"+F+".bindBuffer("+qf+","+An+".buffer.buffer);"),An}function L(){var Gt=z.count,An,_r=x;return Gt?((Gt.contextDep&&U.contextDynamic||Gt.propDep)&&(_r=M),An=Gt.append(R,_r),T.optional(function(){Gt.MISSING&&R.assert(x,"false","missing vertex count"),Gt.DYNAMIC&&R.assert(_r,An+">=0","missing vertex count")})):(An=_r.def(G,".",da),T.optional(function(){R.assert(_r,An+">=0","missing vertex count")})),An}var N=A();function $(Gt){var An=z[Gt];return An?An.contextDep&&U.contextDynamic||An.propDep?An.append(R,M):An.append(R,x):x.def(G,".",Gt)}var H=$(la),ae=$(au),le=L();if(typeof le=="number"){if(le===0)return}else M("if(",le,"){"),M.exit("}");var ie,Ae;Se&&(ie=$(su),Ae=R.instancing);var st=N+".type",Wt=z.elements&&qi(z.elements);function tt(){function Gt(){M(Ae,".drawElementsInstancedANGLE(",[H,le,st,ae+"<<(("+st+"-"+uc+")>>1)",ie],");")}function An(){M(Ae,".drawArraysInstancedANGLE(",[H,ae,le,ie],");")}N?Wt?Gt():(M("if(",N,"){"),Gt(),M("}else{"),An(),M("}")):An()}function bt(){function Gt(){M(F+".drawElements("+[H,le,st,ae+"<<(("+st+"-"+uc+")>>1)"]+");")}function An(){M(F+".drawArrays("+[H,ae,le]+");")}N?Wt?Gt():(M("if(",N,"){"),Gt(),M("}else{"),An(),M("}")):An()}Se&&(typeof ie!="number"||ie>=0)?typeof ie=="string"?(M("if(",ie,">0){"),tt(),M("}else if(",ie,"<0){"),bt(),M("}")):tt():bt()}function fn(R,x,M,U,W){var F=Nt(),G=F.proc("body",W);return T.optional(function(){F.commandStr=x.commandStr,F.command=F.link(x.commandStr)}),Se&&(F.instancing=G.def(F.shared.extensions,".angle_instanced_arrays")),R(F,G,M,U),F.compile().body}function hn(R,x,M,U){mr(R,x),M.useVAO?M.drawVAO?x(R.shared.vao,".setVAO(",M.drawVAO.append(R,x),");"):x(R.shared.vao,".setVAO(",R.shared.vao,".targetVAO);"):(x(R.shared.vao,".setVAO(null);"),Qr(R,x,M,U.attributes,function(){return!0})),xn(R,x,M,U.uniforms,function(){return!0}),gt(R,x,x,M)}function gr(R,x){var M=R.proc("draw",1);mr(R,M),Gr(R,M,x.context),Pr(R,M,x.framebuffer),oo(R,M,x),io(R,M,x.state),Yt(R,M,x,!1,!0);var U=x.shader.progVar.append(R,M);if(M(R.shared.gl,".useProgram(",U,".program);"),x.shader.program)hn(R,M,x,x.shader.program);else{M(R.shared.vao,".setVAO(null);");var W=R.global.def("{}"),F=M.def(U,".id"),G=M.def(W,"[",F,"]");M(R.cond(G).then(G,".call(this,a0);").else(G,"=",W,"[",F,"]=",R.link(function(z){return fn(hn,R,x,z,1)}),"(",U,");",G,".call(this,a0);"))}Object.keys(x.state).length>0&&M(R.shared.current,".dirty=true;")}function Ei(R,x,M,U){R.batchId="a1",mr(R,x);function W(){return!0}Qr(R,x,M,U.attributes,W),xn(R,x,M,U.uniforms,W),gt(R,x,x,M)}function ki(R,x,M,U){mr(R,x);var W=M.contextDep,F=x.def(),G="a0",z="a1",A=x.def();R.shared.props=A,R.batchId=F;var L=R.scope(),N=R.scope();x(L.entry,"for(",F,"=0;",F,"<",z,";++",F,"){",A,"=",G,"[",F,"];",N,"}",L.exit);function $(st){return st.contextDep&&W||st.propDep}function H(st){return!$(st)}if(M.needsContext&&Gr(R,N,M.context),M.needsFramebuffer&&Pr(R,N,M.framebuffer),io(R,N,M.state,$),M.profile&&$(M.profile)&&Yt(R,N,M,!1,!0),U)M.useVAO?M.drawVAO?$(M.drawVAO)?N(R.shared.vao,".setVAO(",M.drawVAO.append(R,N),");"):L(R.shared.vao,".setVAO(",M.drawVAO.append(R,L),");"):L(R.shared.vao,".setVAO(",R.shared.vao,".targetVAO);"):(L(R.shared.vao,".setVAO(null);"),Qr(R,L,M,U.attributes,H),Qr(R,N,M,U.attributes,$)),xn(R,L,M,U.uniforms,H),xn(R,N,M,U.uniforms,$),gt(R,L,N,M);else{var ae=R.global.def("{}"),le=M.shader.progVar.append(R,N),ie=N.def(le,".id"),Ae=N.def(ae,"[",ie,"]");N(R.shared.gl,".useProgram(",le,".program);","if(!",Ae,"){",Ae,"=",ae,"[",ie,"]=",R.link(function(st){return fn(Ei,R,M,st,2)}),"(",le,");}",Ae,".call(this,a0[",F,"],",F,");")}}function D(R,x){var M=R.proc("batch",2);R.batchId="0",mr(R,M);var U=!1,W=!0;Object.keys(x.context).forEach(function(ae){U=U||x.context[ae].propDep}),U||(Gr(R,M,x.context),W=!1);var F=x.framebuffer,G=!1;F?(F.propDep?U=G=!0:F.contextDep&&U&&(G=!0),G||Pr(R,M,F)):Pr(R,M,null),x.state.viewport&&x.state.viewport.propDep&&(U=!0);function z(ae){return ae.contextDep&&U||ae.propDep}oo(R,M,x),io(R,M,x.state,function(ae){return!z(ae)}),(!x.profile||!z(x.profile))&&Yt(R,M,x,!1,"a1"),x.contextDep=U,x.needsContext=W,x.needsFramebuffer=G;var A=x.shader.progVar;if(A.contextDep&&U||A.propDep)ki(R,M,x,null);else{var L=A.append(R,M);if(M(R.shared.gl,".useProgram(",L,".program);"),x.shader.program)ki(R,M,x,x.shader.program);else{M(R.shared.vao,".setVAO(null);");var N=R.global.def("{}"),$=M.def(L,".id"),H=M.def(N,"[",$,"]");M(R.cond(H).then(H,".call(this,a0,a1);").else(H,"=",N,"[",$,"]=",R.link(function(ae){return fn(ki,R,x,ae,2)}),"(",L,");",H,".call(this,a0,a1);"))}}Object.keys(x.state).length>0&&M(R.shared.current,".dirty=true;")}function q(R,x){var M=R.proc("scope",3);R.batchId="a2";var U=R.shared,W=U.current;Gr(R,M,x.context),x.framebuffer&&x.framebuffer.append(R,M),$a(Object.keys(x.state)).forEach(function(G){var z=x.state[G],A=z.append(R,M);pr(A)?A.forEach(function(L,N){M.set(R.next[G],"["+N+"]",L)}):M.set(U.next,"."+G,A)}),Yt(R,M,x,!0,!0),[fa,au,da,su,la].forEach(function(G){var z=x.draw[G];z&&M.set(U.draw,"."+G,""+z.append(R,M))}),Object.keys(x.uniforms).forEach(function(G){var z=x.uniforms[G].append(R,M);Array.isArray(z)&&(z="["+z.join()+"]"),M.set(U.uniforms,"["+_.id(G)+"]",z)}),Object.keys(x.attributes).forEach(function(G){var z=x.attributes[G].append(R,M),A=R.scopeAttrib(G);Object.keys(new V).forEach(function(L){M.set(A,"."+L,z[L])})}),x.scopeVAO&&M.set(U.vao,".targetVAO",x.scopeVAO.append(R,M));function F(G){var z=x.shader[G];z&&M.set(U.shader,"."+G,z.append(R,M))}F(bs),F(xs),Object.keys(x.state).length>0&&(M(W,".dirty=true;"),M.exit(W,".dirty=true;")),M("a1(",R.shared.context,",a0,",R.batchId,");")}function j(R){if(!(typeof R!="object"||pr(R))){for(var x=Object.keys(R),M=0;M<x.length;++M)if(Kt.isDynamic(R[x[M]]))return!0;return!1}}function Qe(R,x,M){var U=x.static[M];if(!U||!j(U))return;var W=R.global,F=Object.keys(U),G=!1,z=!1,A=!1,L=R.global.def("{}");F.forEach(function($){var H=U[$];if(Kt.isDynamic(H)){typeof H=="function"&&(H=U[$]=Kt.unbox(H));var ae=Po(H,null);G=G||ae.thisDep,A=A||ae.propDep,z=z||ae.contextDep}else{switch(W(L,".",$,"="),typeof H){case"number":W(H);break;case"string":W('"',H,'"');break;case"object":Array.isArray(H)&&W("[",H.join(),"]");break;default:W(R.link(H));break}W(";")}});function N($,H){F.forEach(function(ae){var le=U[ae];if(Kt.isDynamic(le)){var ie=$.invoke(H,le);H(L,".",ae,"=",ie,";")}})}x.dynamic[M]=new Kt.DynamicVariable(nu,{thisDep:G,contextDep:z,propDep:A,ref:L,append:N}),delete x.static[M]}function on(R,x,M,U,W){var F=Nt();F.stats=F.link(W),Object.keys(x.static).forEach(function(z){Qe(F,x,z)}),cu.forEach(function(z){Qe(F,R,z)});var G=Rr(R,x,M,U,F);return gr(F,G),q(F,G),D(F,G),B(F.compile(),{destroy:function(){G.shader.program.destroy()}})}return{next:je,current:oe,procs:function(){var R=Nt(),x=R.proc("poll"),M=R.proc("refresh"),U=R.block();x(U),M(U);var W=R.shared,F=W.gl,G=W.next,z=W.current;U(z,".dirty=false;"),Pr(R,x),Pr(R,M,null,!0);var A;Se&&(A=R.link(Se)),O.oes_vertex_array_object&&M(R.link(O.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var L=0;L<J.maxAttributes;++L){var N=M.def(W.attributes,"[",L,"]"),$=R.cond(N,".buffer");$.then(F,".enableVertexAttribArray(",L,");",F,".bindBuffer(",Oi,",",N,".buffer.buffer);",F,".vertexAttribPointer(",L,",",N,".size,",N,".type,",N,".normalized,",N,".stride,",N,".offset);").else(F,".disableVertexAttribArray(",L,");",F,".vertexAttrib4f(",L,",",N,".x,",N,".y,",N,".z,",N,".w);",N,".buffer=null;"),M($),Se&&M(A,".vertexAttribDivisorANGLE(",L,",",N,".divisor);")}return M(R.shared.vao,".currentVAO=null;",R.shared.vao,".setVAO(",R.shared.vao,".targetVAO);"),Object.keys(De).forEach(function(H){var ae=De[H],le=U.def(G,".",H),ie=R.block();ie("if(",le,"){",F,".enable(",ae,")}else{",F,".disable(",ae,")}",z,".",H,"=",le,";"),M(ie),x("if(",le,"!==",z,".",H,"){",ie,"}")}),Object.keys(me).forEach(function(H){var ae=me[H],le=oe[H],ie,Ae,st=R.block();if(st(F,".",ae,"("),pr(le)){var Wt=le.length;ie=R.global.def(G,".",H),Ae=R.global.def(z,".",H),st(Ct(Wt,function(tt){return ie+"["+tt+"]"}),");",Ct(Wt,function(tt){return Ae+"["+tt+"]="+ie+"["+tt+"];"}).join("")),x("if(",Ct(Wt,function(tt){return ie+"["+tt+"]!=="+Ae+"["+tt+"]"}).join("||"),"){",st,"}")}else ie=U.def(G,".",H),Ae=U.def(z,".",H),st(ie,");",z,".",H,"=",ie,";"),x("if(",ie,"!==",Ae,"){",st,"}");M(st)}),R.compile()}(),compile:on}}function Dd(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Od=34918,Va=34919,Rc=35007,Ld=function(p,_){if(!_.ext_disjoint_timer_query)return null;var O=[];function J(){return O.pop()||_.ext_disjoint_timer_query.createQueryEXT()}function ue(Se){O.push(Se)}var K=[];function te(Se){var $e=J();_.ext_disjoint_timer_query.beginQueryEXT(Rc,$e),K.push($e),fe(K.length-1,K.length,Se)}function he(){_.ext_disjoint_timer_query.endQueryEXT(Rc)}function we(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Re=[];function _e(){return Re.pop()||new we}function Le(Se){Re.push(Se)}var Pe=[];function fe(Se,$e,oe){var je=_e();je.startQueryIndex=Se,je.endQueryIndex=$e,je.sum=0,je.stats=oe,Pe.push(je)}var ke=[],V=[];function ne(){var Se,$e,oe=K.length;if(oe!==0){V.length=Math.max(V.length,oe+1),ke.length=Math.max(ke.length,oe+1),ke[0]=0,V[0]=0;var je=0;for(Se=0,$e=0;$e<K.length;++$e){var pe=K[$e];_.ext_disjoint_timer_query.getQueryObjectEXT(pe,Va)?(je+=_.ext_disjoint_timer_query.getQueryObjectEXT(pe,Od),ue(pe)):K[Se++]=pe,ke[$e+1]=je,V[$e+1]=Se}for(K.length=Se,Se=0,$e=0;$e<Pe.length;++$e){var De=Pe[$e],me=De.startQueryIndex,Oe=De.endQueryIndex;De.sum+=ke[Oe]-ke[me];var vt=V[me],Dt=V[Oe];Dt===vt?(De.stats.gpuTime+=De.sum/1e6,Le(De)):(De.startQueryIndex=vt,De.endQueryIndex=Dt,Pe[Se++]=De)}Pe.length=Se}}return{beginQuery:te,endQuery:he,pushScopeStats:fe,update:ne,getNumPendingQueries:function(){return K.length},clear:function(){O.push.apply(O,K);for(var Se=0;Se<O.length;Se++)_.ext_disjoint_timer_query.deleteQueryEXT(O[Se]);K.length=0,O.length=0},restore:function(){K.length=0,O.length=0}}},Md=16384,Eu=256,kd=1024,Gd=34962,sl="webglcontextlost",ul="webglcontextrestored",pa=1,bu=2,Pd=3;function ma(p,_){for(var O=0;O<p.length;++O)if(p[O]===_)return O;return-1}function Wa(p){var _=Nr(p);if(!_)return null;var O=_.gl,J=O.getContextAttributes(),ue=O.isContextLost(),K=wo(O,_);if(!K)return null;var te=jn(),he=Dd(),we=K.extensions,Re=Ld(O,we),_e=Cn(),Le=O.drawingBufferWidth,Pe=O.drawingBufferHeight,fe={tick:0,time:0,viewportWidth:Le,viewportHeight:Pe,framebufferWidth:Le,framebufferHeight:Pe,drawingBufferWidth:Le,drawingBufferHeight:Pe,pixelRatio:_.pixelRatio},ke={},V={elements:null,primitive:4,count:-1,offset:0,instances:-1},ne=Bn(O,we),Se=_a(O,he,_,oe),$e=vd(O,we,ne,he,Se);function oe(gt){return $e.destroyBuffer(gt)}var je=oa(O,we,Se,he),pe=yd(O,te,he,_),De=Jl(O,we,ne,function(){vt.procs.poll()},fe,he,_),me=ed(O,we,ne,he,_),Oe=hd(O,we,ne,De,me,he),vt=Cd(O,te,we,ne,Se,je,De,Oe,ke,$e,pe,V,fe,Re,_),Dt=bd(O,Oe,vt.procs.poll,fe,J,we,ne),ze=vt.next,Ne=O.canvas,de=[],Nt=[],Zt=[],et=[_.onDestroy],kt=null;function St(){if(de.length===0){Re&&Re.update(),kt=null;return}kt=En.next(St),io();for(var gt=de.length-1;gt>=0;--gt){var fn=de[gt];fn&&fn(fe,null,0)}O.flush(),Re&&Re.update()}function Qt(){!kt&&de.length>0&&(kt=En.next(St))}function Nn(){kt&&(En.cancel(St),kt=null)}function kr(gt){gt.preventDefault(),ue=!0,Nn(),Nt.forEach(function(fn){fn()})}function Kr(gt){O.getError(),ue=!1,K.restore(),pe.restore(),Se.restore(),De.restore(),me.restore(),Oe.restore(),$e.restore(),Re&&Re.restore(),vt.procs.refresh(),Qt(),Zt.forEach(function(fn){fn()})}Ne&&(Ne.addEventListener(sl,kr,!1),Ne.addEventListener(ul,Kr,!1));function jt(){de.length=0,Nn(),Ne&&(Ne.removeEventListener(sl,kr),Ne.removeEventListener(ul,Kr)),pe.clear(),Oe.clear(),me.clear(),De.clear(),je.clear(),Se.clear(),$e.clear(),Re&&Re.clear(),et.forEach(function(gt){gt()})}function Hr(gt){T(!!gt,"invalid args to regl({...})"),T.type(gt,"object","invalid args to regl({...})");function fn(W){var F=B({},W);delete F.uniforms,delete F.attributes,delete F.context,delete F.vao,"stencil"in F&&F.stencil.op&&(F.stencil.opBack=F.stencil.opFront=F.stencil.op,delete F.stencil.op);function G(z){if(z in F){var A=F[z];delete F[z],Object.keys(A).forEach(function(L){F[z+"."+L]=A[L]})}}return G("blend"),G("depth"),G("cull"),G("stencil"),G("polygonOffset"),G("scissor"),G("sample"),"vao"in W&&(F.vao=W.vao),F}function hn(W,F){var G={},z={};return Object.keys(W).forEach(function(A){var L=W[A];if(Kt.isDynamic(L)){z[A]=Kt.unbox(L,A);return}else if(F&&Array.isArray(L)){for(var N=0;N<L.length;++N)if(Kt.isDynamic(L[N])){z[A]=Kt.unbox(L,A);return}}G[A]=L}),{dynamic:z,static:G}}var gr=hn(gt.context||{},!0),Ei=hn(gt.uniforms||{},!0),ki=hn(gt.attributes||{},!1),D=hn(fn(gt),!1),q={gpuTime:0,cpuTime:0,count:0},j=vt.compile(D,ki,Ei,gr,q),Qe=j.draw,on=j.batch,R=j.scope,x=[];function M(W){for(;x.length<W;)x.push(null);return x}function U(W,F){var G;if(ue&&T.raise("context lost"),typeof W=="function")return R.call(this,null,W,0);if(typeof F=="function")if(typeof W=="number")for(G=0;G<W;++G)R.call(this,null,F,G);else if(Array.isArray(W))for(G=0;G<W.length;++G)R.call(this,W[G],F,G);else return R.call(this,W,F,0);else if(typeof W=="number"){if(W>0)return on.call(this,M(W|0),W|0)}else if(Array.isArray(W)){if(W.length)return on.call(this,W,W.length)}else return Qe.call(this,W)}return B(U,{stats:q,destroy:function(){j.destroy()}})}var tr=Oe.setFBO=Hr({framebuffer:Kt.define.call(null,pa,"framebuffer")});function Rr(gt,fn){var hn=0;vt.procs.poll();var gr=fn.color;gr&&(O.clearColor(+gr[0]||0,+gr[1]||0,+gr[2]||0,+gr[3]||0),hn|=Md),"depth"in fn&&(O.clearDepth(+fn.depth),hn|=Eu),"stencil"in fn&&(O.clearStencil(fn.stencil|0),hn|=kd),T(!!hn,"called regl.clear with no buffer specified"),O.clear(hn)}function Gr(gt){if(T(typeof gt=="object"&&gt,"regl.clear() takes an object as input"),"framebuffer"in gt)if(gt.framebuffer&&gt.framebuffer_reglType==="framebufferCube")for(var fn=0;fn<6;++fn)tr(B({framebuffer:gt.framebuffer.faces[fn]},gt),Rr);else tr(gt,Rr);else Rr(null,gt)}function Pr(gt){T.type(gt,"function","regl.frame() callback must be a function"),de.push(gt);function fn(){var hn=ma(de,gt);T(hn>=0,"cannot cancel a frame twice");function gr(){var Ei=ma(de,gr);de[Ei]=de[de.length-1],de.length-=1,de.length<=0&&Nn()}de[hn]=gr}return Qt(),{cancel:fn}}function oo(){var gt=ze.viewport,fn=ze.scissor_box;gt[0]=gt[1]=fn[0]=fn[1]=0,fe.viewportWidth=fe.framebufferWidth=fe.drawingBufferWidth=gt[2]=fn[2]=O.drawingBufferWidth,fe.viewportHeight=fe.framebufferHeight=fe.drawingBufferHeight=gt[3]=fn[3]=O.drawingBufferHeight}function io(){fe.tick+=1,fe.time=Yt(),oo(),vt.procs.poll()}function mr(){De.refresh(),oo(),vt.procs.refresh(),Re&&Re.update()}function Yt(){return(Cn()-_e)/1e3}mr();function Qr(gt,fn){T.type(fn,"function","listener callback must be a function");var hn;switch(gt){case"frame":return Pr(fn);case"lost":hn=Nt;break;case"restore":hn=Zt;break;case"destroy":hn=et;break;default:T.raise("invalid event, must be one of frame,lost,restore,destroy")}return hn.push(fn),{cancel:function(){for(var gr=0;gr<hn.length;++gr)if(hn[gr]===fn){hn[gr]=hn[hn.length-1],hn.pop();return}}}}var xn=B(Hr,{clear:Gr,prop:Kt.define.bind(null,pa),context:Kt.define.bind(null,bu),this:Kt.define.bind(null,Pd),draw:Hr({}),buffer:function(gt){return Se.create(gt,Gd,!1,!1)},elements:function(gt){return je.create(gt,!1)},texture:De.create2D,cube:De.createCube,renderbuffer:me.create,framebuffer:Oe.create,framebufferCube:Oe.createCube,vao:$e.createVAO,attributes:J,frame:Pr,on:Qr,limits:ne,hasExtension:function(gt){return ne.extensions.indexOf(gt.toLowerCase())>=0},read:Dt,destroy:jt,_gl:O,_refresh:mr,poll:function(){io(),Re&&Re.update()},now:Yt,stats:he});return _.onDone(null,xn),xn}return Wa})},68608:function(at){function At(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},38888:function(at,At,B){var Z=B(44908),an=B(14614),Ce=B(91621);function rt(ln){var Tt=an();return function(){var vn=Z(ln),Zn;if(Tt){var xt=Z(this).constructor;Zn=Reflect.construct(vn,arguments,xt)}else Zn=vn.apply(this,arguments);return Ce(this,Zn)}}at.exports=rt,at.exports.__esModule=!0,at.exports.default=at.exports},44908:function(at){function At(B){return at.exports=At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(an){return an.__proto__||Object.getPrototypeOf(an)},at.exports.__esModule=!0,at.exports.default=at.exports,At(B)}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},58853:function(at,At,B){var Z=B(49154);function an(Ce,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");Ce.prototype=Object.create(rt&&rt.prototype,{constructor:{value:Ce,writable:!0,configurable:!0}}),Object.defineProperty(Ce,"prototype",{writable:!1}),rt&&Z(Ce,rt)}at.exports=an,at.exports.__esModule=!0,at.exports.default=at.exports},14614:function(at){function At(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(B){return!1}}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},91621:function(at,At,B){var Z=B(37635).default,an=B(68608);function Ce(rt,ln){if(ln&&(Z(ln)==="object"||typeof ln=="function"))return ln;if(ln!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return an(rt)}at.exports=Ce,at.exports.__esModule=!0,at.exports.default=at.exports},49154:function(at){function At(B,Z){return at.exports=At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ce,rt){return Ce.__proto__=rt,Ce},at.exports.__esModule=!0,at.exports.default=at.exports,At(B,Z)}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},45728:function(at,At,B){var Z=B(7202).default;function an(){"use strict";at.exports=an=function(){return Ce},at.exports.__esModule=!0,at.exports.default=at.exports;var Ce={},rt=Object.prototype,ln=rt.hasOwnProperty,Tt=Object.defineProperty||function(se,Y,ce){se[Y]=ce.value},ye=typeof Symbol=="function"?Symbol:{},vn=ye.iterator||"@@iterator",Zn=ye.asyncIterator||"@@asyncIterator",xt=ye.toStringTag||"@@toStringTag";function Lt(se,Y,ce){return Object.defineProperty(se,Y,{value:ce,enumerable:!0,configurable:!0,writable:!0}),se[Y]}try{Lt({},"")}catch(se){Lt=function(ce,ve,Xe){return ce[ve]=Xe}}function ot(se,Y,ce,ve){var Xe=Y&&Y.prototype instanceof Et?Y:Et,Ke=Object.create(Xe.prototype),We=new He(ve||[]);return Tt(Ke,"_invoke",{value:nn(se,ce,We)}),Ke}function wt(se,Y,ce){try{return{type:"normal",arg:se.call(Y,ce)}}catch(ve){return{type:"throw",arg:ve}}}Ce.wrap=ot;var Ye={};function Et(){}function pt(){}function Ht(){}var wn={};Lt(wn,vn,function(){return this});var pn=Object.getPrototypeOf,dr=pn&&pn(pn(Fe([])));dr&&dr!==rt&&ln.call(dr,vn)&&(wn=dr);var Pn=Ht.prototype=Et.prototype=Object.create(wn);function sr(se){["next","throw","return"].forEach(function(Y){Lt(se,Y,function(ce){return this._invoke(Y,ce)})})}function mn(se,Y){function ce(Xe,Ke,We,dt){var ct=wt(se[Xe],se,Ke);if(ct.type!=="throw"){var Ft=ct.arg,Jt=Ft.value;return Jt&&Z(Jt)=="object"&&ln.call(Jt,"__await")?Y.resolve(Jt.__await).then(function(Rn){ce("next",Rn,We,dt)},function(Rn){ce("throw",Rn,We,dt)}):Y.resolve(Jt).then(function(Rn){Ft.value=Rn,We(Ft)},function(Rn){return ce("throw",Rn,We,dt)})}dt(ct.arg)}var ve;Tt(this,"_invoke",{value:function(Ke,We){function dt(){return new Y(function(ct,Ft){ce(Ke,We,ct,Ft)})}return ve=ve?ve.then(dt,dt):dt()}})}function nn(se,Y,ce){var ve="suspendedStart";return function(Xe,Ke){if(ve==="executing")throw new Error("Generator is already running");if(ve==="completed"){if(Xe==="throw")throw Ke;return{value:void 0,done:!0}}for(ce.method=Xe,ce.arg=Ke;;){var We=ce.delegate;if(We){var dt=ur(We,ce);if(dt){if(dt===Ye)continue;return dt}}if(ce.method==="next")ce.sent=ce._sent=ce.arg;else if(ce.method==="throw"){if(ve==="suspendedStart")throw ve="completed",ce.arg;ce.dispatchException(ce.arg)}else ce.method==="return"&&ce.abrupt("return",ce.arg);ve="executing";var ct=wt(se,Y,ce);if(ct.type==="normal"){if(ve=ce.done?"completed":"suspendedYield",ct.arg===Ye)continue;return{value:ct.arg,done:ce.done}}ct.type==="throw"&&(ve="completed",ce.method="throw",ce.arg=ct.arg)}}}function ur(se,Y){var ce=Y.method,ve=se.iterator[ce];if(ve===void 0)return Y.delegate=null,ce==="throw"&&se.iterator.return&&(Y.method="return",Y.arg=void 0,ur(se,Y),Y.method==="throw")||ce!=="return"&&(Y.method="throw",Y.arg=new TypeError("The iterator does not provide a '"+ce+"' method")),Ye;var Xe=wt(ve,se.iterator,Y.arg);if(Xe.type==="throw")return Y.method="throw",Y.arg=Xe.arg,Y.delegate=null,Ye;var Ke=Xe.arg;return Ke?Ke.done?(Y[se.resultName]=Ke.value,Y.next=se.nextLoc,Y.method!=="return"&&(Y.method="next",Y.arg=void 0),Y.delegate=null,Ye):Ke:(Y.method="throw",Y.arg=new TypeError("iterator result is not an object"),Y.delegate=null,Ye)}function lt(se){var Y={tryLoc:se[0]};1 in se&&(Y.catchLoc=se[1]),2 in se&&(Y.finallyLoc=se[2],Y.afterLoc=se[3]),this.tryEntries.push(Y)}function ft(se){var Y=se.completion||{};Y.type="normal",delete Y.arg,se.completion=Y}function He(se){this.tryEntries=[{tryLoc:"root"}],se.forEach(lt,this),this.reset(!0)}function Fe(se){if(se||se===""){var Y=se[vn];if(Y)return Y.call(se);if(typeof se.next=="function")return se;if(!isNaN(se.length)){var ce=-1,ve=function Xe(){for(;++ce<se.length;)if(ln.call(se,ce))return Xe.value=se[ce],Xe.done=!1,Xe;return Xe.value=void 0,Xe.done=!0,Xe};return ve.next=ve}}throw new TypeError(Z(se)+" is not iterable")}return pt.prototype=Ht,Tt(Pn,"constructor",{value:Ht,configurable:!0}),Tt(Ht,"constructor",{value:pt,configurable:!0}),pt.displayName=Lt(Ht,xt,"GeneratorFunction"),Ce.isGeneratorFunction=function(se){var Y=typeof se=="function"&&se.constructor;return!!Y&&(Y===pt||(Y.displayName||Y.name)==="GeneratorFunction")},Ce.mark=function(se){return Object.setPrototypeOf?Object.setPrototypeOf(se,Ht):(se.__proto__=Ht,Lt(se,xt,"GeneratorFunction")),se.prototype=Object.create(Pn),se},Ce.awrap=function(se){return{__await:se}},sr(mn.prototype),Lt(mn.prototype,Zn,function(){return this}),Ce.AsyncIterator=mn,Ce.async=function(se,Y,ce,ve,Xe){Xe===void 0&&(Xe=Promise);var Ke=new mn(ot(se,Y,ce,ve),Xe);return Ce.isGeneratorFunction(Y)?Ke:Ke.next().then(function(We){return We.done?We.value:Ke.next()})},sr(Pn),Lt(Pn,xt,"Generator"),Lt(Pn,vn,function(){return this}),Lt(Pn,"toString",function(){return"[object Generator]"}),Ce.keys=function(se){var Y=Object(se),ce=[];for(var ve in Y)ce.push(ve);return ce.reverse(),function Xe(){for(;ce.length;){var Ke=ce.pop();if(Ke in Y)return Xe.value=Ke,Xe.done=!1,Xe}return Xe.done=!0,Xe}},Ce.values=Fe,He.prototype={constructor:He,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ft),!Y)for(var ce in this)ce.charAt(0)==="t"&&ln.call(this,ce)&&!isNaN(+ce.slice(1))&&(this[ce]=void 0)},stop:function(){this.done=!0;var Y=this.tryEntries[0].completion;if(Y.type==="throw")throw Y.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var ce=this;function ve(Ft,Jt){return We.type="throw",We.arg=Y,ce.next=Ft,Jt&&(ce.method="next",ce.arg=void 0),!!Jt}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var Ke=this.tryEntries[Xe],We=Ke.completion;if(Ke.tryLoc==="root")return ve("end");if(Ke.tryLoc<=this.prev){var dt=ln.call(Ke,"catchLoc"),ct=ln.call(Ke,"finallyLoc");if(dt&&ct){if(this.prev<Ke.catchLoc)return ve(Ke.catchLoc,!0);if(this.prev<Ke.finallyLoc)return ve(Ke.finallyLoc)}else if(dt){if(this.prev<Ke.catchLoc)return ve(Ke.catchLoc,!0)}else{if(!ct)throw new Error("try statement without catch or finally");if(this.prev<Ke.finallyLoc)return ve(Ke.finallyLoc)}}}},abrupt:function(Y,ce){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var Xe=this.tryEntries[ve];if(Xe.tryLoc<=this.prev&&ln.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var Ke=Xe;break}}Ke&&(Y==="break"||Y==="continue")&&Ke.tryLoc<=ce&&ce<=Ke.finallyLoc&&(Ke=null);var We=Ke?Ke.completion:{};return We.type=Y,We.arg=ce,Ke?(this.method="next",this.next=Ke.finallyLoc,Ye):this.complete(We)},complete:function(Y,ce){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&ce&&(this.next=ce),Ye},finish:function(Y){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var ve=this.tryEntries[ce];if(ve.finallyLoc===Y)return this.complete(ve.completion,ve.afterLoc),ft(ve),Ye}},catch:function(Y){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var ve=this.tryEntries[ce];if(ve.tryLoc===Y){var Xe=ve.completion;if(Xe.type==="throw"){var Ke=Xe.arg;ft(ve)}return Ke}}throw new Error("illegal catch attempt")},delegateYield:function(Y,ce,ve){return this.delegate={iterator:Fe(Y),resultName:ce,nextLoc:ve},this.method==="next"&&(this.arg=void 0),Ye}},Ce}at.exports=an,at.exports.__esModule=!0,at.exports.default=at.exports},7202:function(at){function At(B){"@babel/helpers - typeof";return at.exports=At=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},at.exports.__esModule=!0,at.exports.default=at.exports,At(B)}at.exports=At,at.exports.__esModule=!0,at.exports.default=at.exports},86170:function(at,At,B){var Z=B(45728)();at.exports=Z;try{regeneratorRuntime=Z}catch(an){typeof globalThis=="object"?globalThis.regeneratorRuntime=Z:Function("r","regeneratorRuntime = r")(Z)}}}]);
