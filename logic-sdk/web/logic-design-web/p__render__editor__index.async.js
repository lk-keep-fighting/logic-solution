"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[5315],{85250:function(V,x,e){e.r(x),e.d(x,{default:function(){return le}});var j=e(54306),r=e.n(j),y=e(87845),A={editorContainer:"editorContainer___czC1W"},T=e(21140),B=e.n(T),h=e(63466),E=e.n(h),O=e(58853),U=e.n(O),i=e(38888),Y=e.n(i),l=e(87363),w=e(15426),a=e(33130),k=function(u){U()(c,u);var f=Y()(c);function c(){return B()(this,c),f.apply(this,arguments)}return E()(c,[{key:"render",value:function(){var de,R="cxd",Z="zh-CN",m=this.props,D=m.pageSchmea,F=m.preview,p=m.isMobile,M=m.onChange;return(0,a.jsx)(w.ML,{value:D,isMobile:p,preview:F,onChange:M})}}]),c}(l.Component),_=k,q=e(60180),ee=e(81021),S=e(25232),ne=e(38451),te=e(52192),ae=e(43118),se=e(52001),L=e(50197),oe=e(90010),J=e.n(oe),ue=e(72341),g=e(70517),re=e(50561),ye=e(60909),Ee=e(62739),Se=e(80564),De=e(90257);g.Z.interceptors.response.use(function(u){return console.log("axios config"),console.log(u),u.data?u:Promise.reject(new Error(u.data.message))},function(u){if(console.log("axios error"),u.response.data){var f=u.response;return console.log("--\u300Bdata\u6709\u8FD4\u56DE\u503C\uFF0C\u5224\u5B9A\u4E3A\u4E1A\u52A1\u5F02\u5E38\uFF0C\u7EE7\u7EED\u8FD4\u56DEresponse\uFF01"),console.log(f),f}return Promise.reject(u)});var ie=function(f){var c="cxd",ce="zh-CN",de=(0,y.bS)("/set/page/amis/:id"),R=(0,y.UO)(),Z=R.pageId,m=(0,l.useState)({}),D=r()(m,2),F=D[0],p=D[1];(0,l.useEffect)(function(){(0,re.U)(Z).then(function(s){return p(s)})},[Z]);var M=(0,l.useState)(!1),N=r()(M,2),I=N[0],ge=N[1],me=(0,l.useState)(!1),W=r()(me,2),ve=W[0],P=W[1],he=(0,l.useState)(!1),G=r()(he,2),K=G[0],z=G[1],fe=(0,l.useState)(""),b=r()(fe,2),$=b[0],pe=b[1],Ce=(0,l.useState)(""),Q=r()(Ce,2),X=Q[0],H=Q[1],Fe=q.Z.Text;return(0,a.jsxs)("div",{className:A.editorContainer,children:[(0,a.jsxs)(ee.Z,{style:{margin:"5px",float:"right"},children:[(0,a.jsx)(S.ZP,{onClick:function(){return P(!0)},children:"\u5C0F\u52A9\u624B"},0),(0,a.jsx)(S.ZP,{onClick:function(){return ge(!I)},children:I?"\u7F16\u8F91":"\u9884\u89C8"},1),(0,a.jsx)(S.ZP,{type:"primary",onClick:function(n){J()(JSON.stringify(F))},children:"\u590D\u5236\u914D\u7F6E"},2)]}),(0,a.jsx)(ne.Z,{style:{margin:"0px"}}),(0,a.jsx)(_,{pageSchmea:F,preview:I,onChange:function(n){return p(n)},style:{height:"100vh"}}),(0,a.jsxs)(te.Z,{open:ve,confirmLoading:K,title:"\u914D\u7F6E\u751F\u6210\u5C0F\u52A9\u624B(Beta)",cancelText:"\u53D6\u6D88",okText:"\u4F7F\u7528\u914D\u7F6E",width:800,onOk:function(){P(!1),p(JSON.parse(X))},onCancel:function(){return P(!1)},children:[(0,a.jsx)(ae.Z.TextArea,{style:{margin:"5px"},placeholder:'\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\uFF0C\u5982"\u751F\u6210\u4E00\u4E2A\u4EFB\u52A1\u7BA1\u7406\u754C\u9762\uFF0C\u4EFB\u52A1\u4FE1\u606F\u5305\u542B\u4EFB\u52A1\u53F7id\u3001\u65F6\u95F4time\u3001\u8D1F\u8D23\u4EBAmgr_user',onChange:function(n){return pe(n.target.value)}}),(0,a.jsx)(S.ZP,{loading:K,onClick:function(){if($.length==0){se.ZP.warning("\u8BF7\u8F93\u5165\u4E00\u6BB5\u9700\u6C42\u63D0\u793A");return}P(!0),z(!0),g.Z.post("/openai/v1/chat/completions",{headers:{Authorization:"Bearer ***REMOVED***"},data:{model:"gpt-3.5-turbo",messages:[{role:"system",content:"\u4F60\u662F\u4E00\u4E2Aamis\u914D\u7F6E\u6587\u4EF6\u751F\u6210\u5668\uFF0C\u5E2E\u6211\u751F\u6210json\u914D\u7F6E\u6587\u4EF6"},{role:"user",content:$}]}}).then(function(n){var v=n.choices[0].message.content;z(!1);var d=v.indexOf("```"),o=v.lastIndexOf("```"),C=v.substring(d+7,o);console.log(C),H(C)})},icon:(0,a.jsx)(ue.Z,{}),type:"primary",style:{width:"100%",marginTop:"5px",marginBottom:"5px"},children:"\u751F\u6210\u914D\u7F6E\u2193"}),(0,a.jsx)(L.ML,{value:X,onChange:function(n){return H(n)},height:300,language:"json",options:{fetcher:function(n){var v=n.url,d=n.method,o=n.data,C=n.responseType,t=n.config,xe=n.headers;return t=t||{},t.withCredentials=!0,C&&(t.responseType=C),t.cancelExecutor&&(t.cancelToken=new g.Z.CancelToken(t.cancelExecutor)),t.headers=xe||{},d!=="post"&&d!=="put"&&d!=="patch"?(o&&(t.params=o),g.Z[d](v,t)):(o&&o instanceof FormData?(t.headers=t.headers||{},t.headers["Content-Type"]="multipart/form-data"):o&&typeof o!="string"&&!(o instanceof Blob)&&!(o instanceof ArrayBuffer)&&(o=JSON.stringify(o),t.headers=t.headers||{},t.headers["Content-Type"]="application/json"),g.Z[d](v,o,t))},isCancel:function(n){return g.Z.isCancel(n)},copy:function(n){J()(n),L.Am.success("\u5185\u5BB9\u5DF2\u590D\u5236\u5230\u7C98\u8D34\u677F")},theme:c}})]})]})},le=ie},50561:function(V,x,e){e.d(x,{U:function(){return B}});var j=e(25359),r=e.n(j),y=e(49811),A=e.n(y),T=e(70517);function B(E){return h.apply(this,arguments)}function h(){return h=A()(r()().mark(function E(O){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,T.Z.get("/setting/pages/".concat(O,".json"));case 2:return i.abrupt("return",i.sent.data);case 3:case"end":return i.stop()}},E)})),h.apply(this,arguments)}}}]);
