"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[874],{38882:function(R,y,r){r.r(y);var I=r(54306),_=r.n(I),B=r(19435),i=r(43702),c=r(52615),d=r(87363),w=r.n(d),U=r(98306),g=r(48364),O=r(33130),p=function(){var f=(0,U.UO)(),m=f.id,v=(0,d.useState)(),P=_()(v,2),h=P[0],M=P[1],E=(0,d.useState)(!1),b=_()(E,2),D=b[0],l=b[1],L=(0,d.useCallback)(function(e){e.id=m,l(!0),M(e),(0,g.az)(e.id,e.version,JSON.stringify(e)).then(function(t){l(!1),i.ZP.success("\u4FDD\u5B58\u6210\u529F"),console.log("save logic"),console.log(e)}).catch(function(t){l(!1),console.log("err"),console.log(t),i.ZP.error("\u4FDD\u5B58\u5931\u8D25")})},[]);return(0,d.useEffect)(function(){l(!0),(0,g.YH)(m).then(function(e){var t=e;t.id=m,M(t),l(!1)}).catch(function(e){l(!1),console.log("err"),console.log(e)})},[]),(0,O.jsx)("div",{children:(0,O.jsx)(c.Z,{spinning:D,children:(0,O.jsx)(B.A,{config:h,onSave:L})})})};y.default=p},48364:function(R,y,r){r.d(y,{Uh:function(){return l},YH:function(){return C},az:function(){return m},b9:function(){return b},gC:function(){return M},m9:function(){return P}});var I=r(25359),_=r.n(I),B=r(49811),i=r.n(B),c=r(70517),d=r(5726),w=r.n(d);function U(e){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",axios.post("/api/ide/pub/logic/dev-to-test".concat(t)));case 1:case"end":return n.stop()}},e)})),g.apply(this,arguments)}function O(e){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",axios.get("/api/ide/logic/".concat(t)));case 1:case"end":return n.stop()}},e)})),p.apply(this,arguments)}function C(e){return f.apply(this,arguments)}function f(){return f=i()(_()().mark(function e(t){return _()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",c.Z.get("/api/ide/logic/".concat(t,"/config")).then(function(s){var a;return(a=s.data)===null||a===void 0?void 0:a.data}));case 1:case"end":return n.stop()}},e)})),f.apply(this,arguments)}function m(e,t,u){return v.apply(this,arguments)}function v(){return v=i()(_()().mark(function e(t,u,n){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",c.Z.put("/api/ide/logic/edit/".concat(t),{version:u,configJson:n,updateTime:w()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return a.stop()}},e)})),v.apply(this,arguments)}function P(e){return h.apply(this,arguments)}function h(){return h=i()(_()().mark(function e(t){return _()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",c.Z.get("/api/ide/logic-instance/".concat(t)).then(function(s){var a=s.data.data;return a}));case 1:case"end":return n.stop()}},e)})),h.apply(this,arguments)}function M(e){return E.apply(this,arguments)}function E(){return E=i()(_()().mark(function e(t){return _()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",c.Z.post("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[t.logicId],type:"="},{dataIndex:"bizId",values:[t.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"serverTime",desc:!0}]}).then(function(s){var a=s.data.data.records;return a&&a.map(function(o){o.itemLogs&&(o.itemLogs=JSON.parse(o.itemLogs))}),a}));case 1:case"end":return n.stop()}},e)})),E.apply(this,arguments)}function b(e,t){return D.apply(this,arguments)}function D(){return D=i()(_()().mark(function e(t,u){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",c.Z.post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[t],type:"="},{dataIndex:"version",values:[u],type:"="}]}).then(function(a){var o=a.data.data.records[0].configJson,T=JSON.parse(o);return T}));case 1:case"end":return s.stop()}},e)})),D.apply(this,arguments)}function l(e,t){return L.apply(this,arguments)}function L(){return L=i()(_()().mark(function e(t,u){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",c.Z.post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[t],type:"="},{dataIndex:"version",values:[u],type:"="}]}).then(function(a){var o=a.data.data.records[0],T=o.configJson;return o.configJson=JSON.parse(T),o}));case 1:case"end":return s.stop()}},e)})),L.apply(this,arguments)}}}]);
