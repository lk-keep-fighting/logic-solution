"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[701],{44668:function(G,D,t){t.d(D,{Z:function(){return p}});var y=t(56159),s=t(87363),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},j=x,I=t(45288),P=function(v,g){return s.createElement(I.Z,(0,y.Z)({},v,{ref:g,icon:j}))},p=s.forwardRef(P)},23542:function(G,D,t){t.d(D,{Z:function(){return F}});var y=t(57213),s=t.n(y),x=t(788),j=t(63466),I=t(21140),P=t(52510),p=t(54306),L=t.n(p),v=t(97944),g=t(83195),A=t(75904),U=t(47503),h=t(87363),W=t.n(h),d=t(84191),N=t(49425),c=t(94744),r=t(33130),X=null,K=function(i){var e=(0,v.Ik)(),V=(0,h.useContext)(g.r),n=V.logic;(0,h.useEffect)(function(){if(n){var f,o,u,l,O=c.y.getJsonByParams((f=n.variables)!==null&&f!==void 0?f:[]),H=(0,d.k)("_var",O),E=c.y.getJsonByParams((o=n.params)!==null&&o!==void 0?o:[]),$=(0,d.k)("_par",E),w=c.y.getJsonByParams((u=n.returns)!==null&&u!==void 0?u:[]),q=(0,d.k)("_ret",w),tt=c.y.getJsonByParams((l=n.envs)!==null&&l!==void 0?l:[]),et=(0,d.k)("_env",tt);e==null||e.languages.typescript.javascriptDefaults.addExtraLib(H,"var.ts"),e==null||e.languages.typescript.javascriptDefaults.addExtraLib($,"input.ts"),e==null||e.languages.typescript.javascriptDefaults.addExtraLib(q,"return.ts"),e==null||e.languages.typescript.javascriptDefaults.addExtraLib(et,"env.ts"),e==null||e.languages.typescript.javascriptDefaults.addExtraLib("let _lastRet:{}","lastRet.ts")}return function(){var z;console.log("effect dispose"),e==null||(z=e.current)===null||z===void 0||z.dispose()}},[n==null?void 0:n.params,n==null?void 0:n.variables,n==null?void 0:n.returns,n==null?void 0:n.envs]);var b=(0,h.useState)(!1),m=L()(b,2),M=m[0],C=m[1];return(0,r.jsx)("div",{style:{width:"100%"},children:M?(0,r.jsx)(U.Z,{title:"js\u7F16\u8F91\u5668",centered:!0,width:1200,bodyStyle:{height:"80vh"},open:M,footer:null,onCancel:function(){return C(!1)},children:(0,r.jsx)(v.ML,s()(s()({theme:"vs-dark",defaultValue:i.value,defaultLanguage:i.language,options:{minimap:{enabled:!1}}},i),{},{height:"100%"}))}):(0,r.jsxs)("div",{children:[(0,r.jsx)(v.ML,s()({className:"editorByLoader",theme:"vs-dark",defaultValue:i.value,defaultLanguage:i.language,onMount:function(o){var u;(u=o.getAction("editor.action.formatDocument"))===null||u===void 0||u.run(),o.setValue(o.getValue())},options:{minimap:{enabled:!1}},height:500},i)),(0,r.jsx)(A.ZP,{size:"small",type:"text",icon:(0,r.jsx)(N.Z,{}),style:{position:"absolute",top:0,right:0,margin:"10px",color:"whitesmoke"},onClick:function(){return C(!0)}})]})})},B=W().memo(K),Y=null,Z=function(i){return(0,r.jsx)(B,s()(s()({},i),{},{language:"json"}))},a=Z,Q=null,k=function(i){return(0,r.jsx)(B,s()(s()({},i),{},{language:"javascript"}))},S=k,R=t(16414),T=function(i){return(0,h.useEffect)(function(){v._m.config({monaco:R})},[]),(0,r.jsx)(x.ZP,s()({widgets:{json:a,js:S}},i))},J=T,F=T||J},62963:function(G,D,t){t.r(D),t.d(D,{default:function(){return Q}});var y=t(25359),s=t.n(y),x=t(49811),j=t.n(x),I=t(54306),P=t.n(I),p=t(43702),L=t(40767),v=t(46464),g=t(75904),A=t(58856),U=t(60986),h=t(77682),W=t(98306),d=t(87363),N=t.n(d),c=t(61719),r=t(31120),X=t(47068),K=t(44668),B=t(39220),Y=t(23542),Z=t(788),a=t(33130);function Q(k){var S=(0,d.useState)([]),R=P()(S,2),T=R[0],J=R[1],F=(0,d.useState)(!1),_=P()(F,2),i=_[0],e=_[1],V=(0,d.useState)(!1),n=P()(V,2),b=n[0],m=n[1],M=(0,Z.cI)(),C=(0,d.useCallback)(function(){m(!0),(0,c.XY)().then(function(o){J(o.result.items),m(!1)}).catch(function(o){p.ZP.error(o.message),m(!1)})},[]),f=[{key:"btn",title:"\u64CD\u4F5C",dataIndex:"id",width:"100px",render:function(u,l){return(0,a.jsxs)(L.Z,{children:[(0,a.jsx)(W.rU,{to:"/assets/logic/i/".concat(l.id,"/edit"),target:"_blank",children:(0,a.jsx)(r.Z,{})}),(0,a.jsx)(X.Z,{style:{color:"red"},onClick:function(){v.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u6B64\u4E1A\u52A1\u903B\u8F91\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){(0,c.dS)(l.id).then(function(E){C()})}})}})]})}},{key:"name",title:"\u4E1A\u52A1\u903B\u8F91\u540D\u79F0",width:"200px",dataIndex:"name"},{key:"module",title:"\u6A21\u5757\u540D",width:"200px",dataIndex:"module"},{key:"path",title:"path",dataIndex:"id",render:function(u,l){return(0,a.jsxs)("span",{children:["/logic/v1/run-api/".concat(l.id),(0,a.jsx)(g.ZP,{icon:(0,a.jsx)(K.Z,{}),type:"text",onClick:function(){navigator.clipboard.writeText("/logic/v1/run-api/".concat(l.id))}})]})}},{key:"id",title:"ID",dataIndex:"id"}];return(0,d.useEffect)(function(){C()},[]),(0,a.jsx)(A.Z,{children:(0,a.jsxs)(A.Z.Content,{children:[(0,a.jsx)(U.Z,{style:{marginBottom:"5px"},children:(0,a.jsx)(g.ZP,{type:"primary",icon:(0,a.jsx)(B.Z,{}),style:{margin:"5px"},onClick:function(){return e(!0)},children:"\u65B0\u5EFA\u7F16\u6392"})}),(0,a.jsx)(h.Z,{loading:b,columns:f,dataSource:T}),(0,a.jsx)(v.Z,{open:i,footer:!1,title:"\u65B0\u5EFA\u7F16\u6392",onCancel:function(){return e(!1)},children:(0,a.jsx)(Y.Z,{style:{margin:"10px"},form:M,schema:{type:"object",properties:{id:{title:"\u552F\u4E00\u7F16\u53F7",type:"string",widget:"input"},module:{title:"\u6A21\u5757\u540D",type:"string",widget:"input"},name:{title:"\u4E1A\u52A1\u540D\u79F0",type:"string",widget:"input"}}},footer:function(){return(0,a.jsx)(g.ZP,{type:"primary",style:{width:"200px"},onClick:j()(s()().mark(function u(){var l,O;return s()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return l=M.getValues(),m(!0),e(!1),E.next=5,(0,c._5)(l);case 5:O=E.sent,m(!1),C();case 8:case"end":return E.stop()}},u)})),children:"\u4FDD\u5B58"})}})})]})})}}}]);
