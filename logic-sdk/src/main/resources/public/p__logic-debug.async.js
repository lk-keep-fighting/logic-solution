"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[2262],{48669:function(Q,E,e){e.r(E),e.d(E,{default:function(){return ee}});var Z=e(54306),u=e.n(Z),A=e(25359),v=e.n(A),h=e(49811),P=e.n(h),z=e(19435),O=e(48364),C=e(56159),g=e(87363),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},R=b,w=e(45288),F=function(l,i){return g.createElement(w.Z,(0,C.Z)({},l,{ref:i,icon:R}))},I=g.forwardRef(F),U={icon:function(l,i){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:l}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:i}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:l}}]}},name:"check-circle",theme:"twotone"},S=U,$=function(l,i){return g.createElement(w.Z,(0,C.Z)({},l,{ref:i,icon:S}))},D=g.forwardRef($),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z"}}]},name:"frown",theme:"outlined"},x=J,k=function(l,i){return g.createElement(w.Z,(0,C.Z)({},l,{ref:i,icon:x}))},j=g.forwardRef(k),t=e(52615),a=e(75904),d=e(22983),n=e(40767),s=e(50720),r=e(70517),p=e(98306),c=e(33130),V=function(){var _=P()(v()().mark(function l(i){var m;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.Z.get("/setting/node-form/".concat(i,".json"));case 2:return m=o.sent,console.log(m.data),o.abrupt("return",m.data);case 5:case"end":return o.stop()}},l)}));return function(i){return _.apply(this,arguments)}}(),X=function(){var _=P()(v()().mark(function l(i){var m;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.Z.get("/setting/node-log/".concat(i,".json")).catch(function(K){return K});case 2:if(m=o.sent,console.log(m.data),!m.data){o.next=8;break}return o.abrupt("return",m.data);case 8:return o.next=10,r.Z.get("/setting/node-log/_def.json");case 10:return o.abrupt("return",o.sent.data);case 11:case"end":return o.stop()}},l)}));return function(i){return _.apply(this,arguments)}}(),q=function(){var l=(0,p.UO)(),i=l.id,m=(0,g.useState)(),M=u()(m,2),o=M[0],K=M[1],ne=(0,g.useState)(!1),W=u()(ne,2),te=W[0],L=W[1],re=(0,g.useState)([]),G=u()(re,2),ae=G[0],H=G[1],se=(0,g.useState)(),Y=u()(se,2),f=Y[0],N=Y[1];return(0,g.useEffect)(function(){L(!0),i&&(0,O.m9)(i).then(function(y){y&&(N(y),L(!0),(0,O.b9)(y.logicId,y.version).then(function(T){var B=T;B.id=i,K(B),L(!1)}).catch(function(T){L(!1),console.log("err"),console.log(T)}))})},[i]),(0,g.useEffect)(function(){f&&(0,O.gC)(f).then(function(y){y&&H(y)})},[f]),(0,c.jsx)("div",{children:(0,c.jsx)(t.Z,{spinning:te,children:(0,c.jsx)(z.O,{btns:[(0,c.jsxs)(a.ZP,{onClick:function(){L(!0),(0,O.m9)(i).then(function(T){T&&(N(T),(0,O.gC)(T).then(function(B){B&&H(B),L(!1)})),L(!1)})},children:[(0,c.jsx)(I,{}),"\u5237\u65B0\u8BF7\u6C42"]}),(0,c.jsx)(d.Z,{type:"vertical"}),(0,c.jsxs)("span",{children:["\u662F\u5426\u5B8C\u6210\uFF1A",f!=null&&f.isOver?(0,c.jsx)(D,{twoToneColor:"#52c41a"}):(0,c.jsx)(j,{twoToneColor:"red"})]}),(0,c.jsx)(d.Z,{type:"vertical"}),(0,c.jsxs)(n.Z,{children:[(0,c.jsx)(s.Z.Paragraph,{style:{color:"red"},children:"\u6267\u884C\u7248\u672C:"}),(0,c.jsx)(s.Z.Paragraph,{copyable:{tooltips:["\u70B9\u51FB\u590D\u5236","\u590D\u5236\u6210\u529F!"]},children:f==null?void 0:f.version})]})],nextId:f==null?void 0:f.nextId,config:o,logicIns:f,configSchemaProvider:V,itemLogSchemaProvider:X,debugLogs:ae})})})},ee=q},48364:function(Q,E,e){e.d(E,{Uh:function(){return k},YH:function(){return R},az:function(){return F},b9:function(){return J},gC:function(){return $},m9:function(){return U}});var Z=e(25359),u=e.n(Z),A=e(49811),v=e.n(A),h=e(70517),P=e(5726),z=e.n(P);function O(t){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function t(a){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",axios.post("/api/ide/pub/logic/dev-to-test".concat(a)));case 1:case"end":return n.stop()}},t)})),C.apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function t(a){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",axios.get("/api/ide/logic/".concat(a)));case 1:case"end":return n.stop()}},t)})),b.apply(this,arguments)}function R(t){return w.apply(this,arguments)}function w(){return w=v()(u()().mark(function t(a){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",h.Z.get("/api/ide/logic/".concat(a,"/config")).then(function(s){var r;return(r=s.data)===null||r===void 0?void 0:r.data}));case 1:case"end":return n.stop()}},t)})),w.apply(this,arguments)}function F(t,a,d){return I.apply(this,arguments)}function I(){return I=v()(u()().mark(function t(a,d,n){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",h.Z.put("/api/ide/logic/edit/".concat(a),{version:d,configJson:n,updateTime:z()().format("YYYY-MM-DD HH:mm:ss")}));case 1:case"end":return r.stop()}},t)})),I.apply(this,arguments)}function U(t){return S.apply(this,arguments)}function S(){return S=v()(u()().mark(function t(a){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",h.Z.get("/api/ide/logic-instance/".concat(a)).then(function(s){var r=s.data.data;return r}));case 1:case"end":return n.stop()}},t)})),S.apply(this,arguments)}function $(t){return D.apply(this,arguments)}function D(){return D=v()(u()().mark(function t(a){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",h.Z.post("/api/ide/logic-logs",{filters:[{dataIndex:"logicId",values:[a.logicId],type:"="},{dataIndex:"bizId",values:[a.bizId],type:"="}],pageSize:1e3,orderBy:[{dataIndex:"serverTime",desc:!0}]}).then(function(s){var r=s.data.data.records;return r&&r.map(function(p){p.itemLogs&&(p.itemLogs=JSON.parse(p.itemLogs))}),r}));case 1:case"end":return n.stop()}},t)})),D.apply(this,arguments)}function J(t,a){return x.apply(this,arguments)}function x(){return x=v()(u()().mark(function t(a,d){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",h.Z.post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[a],type:"="},{dataIndex:"version",values:[d],type:"="}]}).then(function(r){var p=r.data.data.records[0].configJson,c=JSON.parse(p);return c}));case 1:case"end":return s.stop()}},t)})),x.apply(this,arguments)}function k(t,a){return j.apply(this,arguments)}function j(){return j=v()(u()().mark(function t(a,d){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",h.Z.post("/api/ide/logic-baks",{filters:[{dataIndex:"id",values:[a],type:"="},{dataIndex:"version",values:[d],type:"="}]}).then(function(r){var p=r.data.data.records[0],c=p.configJson;return p.configJson=JSON.parse(c),p}));case 1:case"end":return s.stop()}},t)})),j.apply(this,arguments)}}}]);
