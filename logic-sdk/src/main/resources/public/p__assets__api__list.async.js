"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[403],{31120:function(b,Z,t){t.d(Z,{Z:function(){return R}});var S=t(56159),r=t(87363),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},E=J,M=t(45288),A=function(h,L){return r.createElement(M.Z,(0,S.Z)({},h,{ref:L,icon:E}))},R=r.forwardRef(A)},23542:function(b,Z,t){t.d(Z,{Z:function(){return d}});var S=t(57213),r=t.n(S),J=t(788),E=t(63466),M=t(21140),A=t(52510),R=t(54306),O=t.n(R),h=t(97944),L=t(83195),G=t(75904),H=t(47503),j=t(87363),C=t.n(j),m=t(84191),q=t(49425),p=t(94744),u=t(33130),z=null,N=function(e){var n=(0,h.Ik)(),v=(0,j.useContext)(L.r),a=v.logic;(0,j.useEffect)(function(){if(a){var y,l,c,I,Y=p.y.getJsonByParams((y=a.variables)!==null&&y!==void 0?y:[]),g=(0,m.k)("_var",Y),T=p.y.getJsonByParams((l=a.params)!==null&&l!==void 0?l:[]),f=(0,m.k)("_par",T),w=p.y.getJsonByParams((c=a.returns)!==null&&c!==void 0?c:[]),$=(0,m.k)("_ret",w),x=p.y.getJsonByParams((I=a.envs)!==null&&I!==void 0?I:[]),et=(0,m.k)("_env",x);n==null||n.languages.typescript.javascriptDefaults.addExtraLib(g,"var.ts"),n==null||n.languages.typescript.javascriptDefaults.addExtraLib(f,"input.ts"),n==null||n.languages.typescript.javascriptDefaults.addExtraLib($,"return.ts"),n==null||n.languages.typescript.javascriptDefaults.addExtraLib(et,"env.ts"),n==null||n.languages.typescript.javascriptDefaults.addExtraLib("let _lastRet:{}","lastRet.ts")}return function(){var k;console.log("effect dispose"),n==null||(k=n.current)===null||k===void 0||k.dispose()}},[a==null?void 0:a.params,a==null?void 0:a.variables,a==null?void 0:a.returns,a==null?void 0:a.envs]);var X=(0,j.useState)(!1),F=O()(X,2),W=F[0],D=F[1];return(0,u.jsx)("div",{style:{width:"100%"},children:W?(0,u.jsx)(H.Z,{title:"js\u7F16\u8F91\u5668",centered:!0,width:1200,bodyStyle:{height:"80vh"},open:W,footer:null,onCancel:function(){return D(!1)},children:(0,u.jsx)(h.ML,r()(r()({theme:"vs-dark",defaultValue:e.value,defaultLanguage:e.language,options:{minimap:{enabled:!1}}},e),{},{height:"100%"}))}):(0,u.jsxs)("div",{children:[(0,u.jsx)(h.ML,r()({className:"editorByLoader",theme:"vs-dark",defaultValue:e.value,defaultLanguage:e.language,onMount:function(l){var c;(c=l.getAction("editor.action.formatDocument"))===null||c===void 0||c.run(),l.setValue(l.getValue())},options:{minimap:{enabled:!1}},height:500},e)),(0,u.jsx)(G.ZP,{size:"small",type:"text",icon:(0,u.jsx)(q.Z,{}),style:{position:"absolute",top:0,right:0,margin:"10px",color:"whitesmoke"},onClick:function(){return D(!0)}})]})})},P=C().memo(N),_=null,B=function(e){return(0,u.jsx)(P,r()(r()({},e),{},{language:"json"}))},U=B,tt=null,K=function(e){return(0,u.jsx)(P,r()(r()({},e),{},{language:"javascript"}))},Q=K,i=t(16414),V=function(e){return(0,j.useEffect)(function(){h._m.config({monaco:i})},[]),(0,u.jsx)(J.ZP,r()({widgets:{json:U,js:Q}},e))},o=V,d=V||o},27284:function(b,Z,t){t.r(Z),t.d(Z,{default:function(){return V}});var S=t(25359),r=t.n(S),J=t(49811),E=t.n(J),M=t(54306),A=t.n(M),R=t(43702),O=t(40767),h=t(46464),L=t(58856),G=t(77682),H=t(75904),j=t(98306),C=t(87363),m=t(70517);function q(o){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function o(d){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",axios.post("/api/form/apis/query",{ids:[d]}).then(function(n){var v=n.data.result.items[0].configJson;return JSON.parse(v)}));case 1:case"end":return e.stop()}},o)})),p.apply(this,arguments)}function u(o,d){return z.apply(this,arguments)}function z(){return z=E()(r()().mark(function o(d,s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",m.Z.post("/api/form/apis/add",{id:d,name:s}).then(function(v){var a=v.data.result;return a}));case 1:case"end":return n.stop()}},o)})),z.apply(this,arguments)}function N(o){return P.apply(this,arguments)}function P(){return P=E()(r()().mark(function o(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.Z.delete("/api/form/apis/delete/".concat(d)).then(function(n){return n.data.result}));case 1:case"end":return e.stop()}},o)})),P.apply(this,arguments)}function _(){return B.apply(this,arguments)}function B(){return B=E()(r()().mark(function o(){var d,s,e=arguments;return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return d=e.length>0&&e[0]!==void 0?e[0]:1,s=e.length>1&&e[1]!==void 0?e[1]:10,v.abrupt("return",m.Z.post("/api/form/apis/query",{page:d,pageSize:s}).then(function(a){return a.data}));case 3:case"end":return v.stop()}},o)})),B.apply(this,arguments)}var U=t(31120),tt=t(47068),K=t(23542),Q=t(788),i=t(33130);function V(o){var d=(0,C.useState)([]),s=A()(d,2),e=s[0],n=s[1],v=(0,C.useState)(!1),a=A()(v,2),X=a[0],F=a[1],W=(0,C.useState)(!1),D=A()(W,2),y=D[0],l=D[1],c=(0,Q.cI)(),I=(0,C.useCallback)(function(){l(!0),_().then(function(g){n(g.result.items),l(!1)}).catch(function(g){R.ZP.error(g.message),l(!1)})},[]),Y=[{key:"btn",title:"\u64CD\u4F5C",dataIndex:"id",width:"100px",render:function(T,f){return(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(U.Z,{}),(0,i.jsx)(tt.Z,{style:{color:"red"},onClick:function(){h.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u6B64Api\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){N(f.id).then(function(x){I()})}})}})]})}},{key:"system",title:"\u7CFB\u7EDF\u540D",width:"200px",dataIndex:"system"},{key:"path",title:"\u8DEF\u5F84",width:"300px",dataIndex:"path"},{key:"method",title:"method",width:"100px",dataIndex:"method"},{key:"swagger_id",title:"\u5173\u8054swagger",width:"200px",dataIndex:"swagger_id",render:function(T,f){return(0,i.jsx)(O.Z,{children:(0,i.jsx)(j.rU,{to:"/assets/swagger/i/".concat(f.swaggerId,"/ui"),target:"_blank",children:f.swagger_id})})}},{key:"id",title:"ID",dataIndex:"id"}];return(0,C.useEffect)(function(){I()},[]),(0,i.jsx)(L.Z,{children:(0,i.jsxs)(L.Z.Content,{children:[(0,i.jsx)(G.Z,{loading:y,columns:Y,dataSource:e}),(0,i.jsx)(h.Z,{open:X,footer:!1,title:"\u65B0\u5EFA\u7F16\u6392",onCancel:function(){return F(!1)},children:(0,i.jsx)(K.Z,{style:{margin:"10px"},form:c,schema:{type:"object",properties:{id:{title:"\u552F\u4E00\u7F16\u53F7",type:"string",widget:"input"},name:{title:"\u4E1A\u52A1\u540D\u79F0",type:"string",widget:"input"}}},footer:function(){return(0,i.jsx)(H.ZP,{type:"primary",style:{width:"200px"},onClick:E()(r()().mark(function T(){var f,w;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return f=c.getValues(),l(!0),F(!1),x.next=5,u(f.id,f.name);case 5:w=x.sent,l(!1),I();case 8:case"end":return x.stop()}},T)})),children:"\u4FDD\u5B58"})}})})]})})}}}]);
