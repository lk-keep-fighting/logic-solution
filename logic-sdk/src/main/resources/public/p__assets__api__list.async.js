"use strict";(self.webpackChunkxuanwu_logic_web_design=self.webpackChunkxuanwu_logic_web_design||[]).push([[403],{23542:function(tt,L,t){t.d(L,{Z:function(){return l}});var V=t(57213),r=t.n(V),W=t(788),A=t(63466),k=t(21140),R=t(52510),w=t(54306),F=t.n(w),x=t(97944),B=t(83195),z=t(75904),G=t(47503),j=t(87363),C=t.n(j),g=t(84191),b=t(49425),m=t(94744),u=t(33130),D=null,N=function(e){var n=(0,x.Ik)(),v=(0,j.useContext)(B.r),a=v.logic;(0,j.useEffect)(function(){if(a){var p,d,c,E,X=m.y.getJsonByParams((p=a.variables)!==null&&p!==void 0?p:[]),h=(0,g.k)("_var",X),J=m.y.getJsonByParams((d=a.params)!==null&&d!==void 0?d:[]),f=(0,g.k)("_par",J),M=m.y.getJsonByParams((c=a.returns)!==null&&c!==void 0?c:[]),Y=(0,g.k)("_ret",M),y=m.y.getJsonByParams((E=a.envs)!==null&&E!==void 0?E:[]),et=(0,g.k)("_env",y);n==null||n.languages.typescript.javascriptDefaults.addExtraLib(h,"var.ts"),n==null||n.languages.typescript.javascriptDefaults.addExtraLib(f,"input.ts"),n==null||n.languages.typescript.javascriptDefaults.addExtraLib(Y,"return.ts"),n==null||n.languages.typescript.javascriptDefaults.addExtraLib(et,"env.ts"),n==null||n.languages.typescript.javascriptDefaults.addExtraLib("let _lastRet:{}","lastRet.ts")}return function(){var $;console.log("effect dispose"),n==null||($=n.current)===null||$===void 0||$.dispose()}},[a==null?void 0:a.params,a==null?void 0:a.variables,a==null?void 0:a.returns,a==null?void 0:a.envs]);var Q=(0,j.useState)(!1),S=F()(Q,2),O=S[0],Z=S[1];return(0,u.jsx)("div",{style:{width:"100%"},children:O?(0,u.jsx)(G.Z,{title:"js\u7F16\u8F91\u5668",centered:!0,width:1200,bodyStyle:{height:"80vh"},open:O,footer:null,onCancel:function(){return Z(!1)},children:(0,u.jsx)(x.ML,r()(r()({theme:"vs-dark",defaultValue:e.value,defaultLanguage:e.language,options:{minimap:{enabled:!1}}},e),{},{height:"100%"}))}):(0,u.jsxs)("div",{children:[(0,u.jsx)(x.ML,r()({className:"editorByLoader",theme:"vs-dark",defaultValue:e.value,defaultLanguage:e.language,onMount:function(d){var c;(c=d.getAction("editor.action.formatDocument"))===null||c===void 0||c.run(),d.setValue(d.getValue())},options:{minimap:{enabled:!1}},height:500},e)),(0,u.jsx)(z.ZP,{size:"small",type:"text",icon:(0,u.jsx)(b.Z,{}),style:{position:"absolute",top:0,right:0,margin:"10px",color:"whitesmoke"},onClick:function(){return Z(!0)}})]})})},I=C().memo(N),q=null,P=function(e){return(0,u.jsx)(I,r()(r()({},e),{},{language:"json"}))},H=P,_=null,U=function(e){return(0,u.jsx)(I,r()(r()({},e),{},{language:"javascript"}))},K=U,i=t(16414),T=function(e){return(0,j.useEffect)(function(){x._m.config({monaco:i})},[]),(0,u.jsx)(W.ZP,r()({widgets:{json:H,js:K}},e))},o=T,l=T||o},27284:function(tt,L,t){t.r(L),t.d(L,{default:function(){return T}});var V=t(25359),r=t.n(V),W=t(49811),A=t.n(W),k=t(54306),R=t.n(k),w=t(43702),F=t(40767),x=t(46464),B=t(58856),z=t(77682),G=t(75904),j=t(98306),C=t(87363),g=t(70517);function b(o){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function o(l){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",axios.post("/api/form/apis/query",{ids:[l]}).then(function(n){var v=n.data.result.items[0].configJson;return JSON.parse(v)}));case 1:case"end":return e.stop()}},o)})),m.apply(this,arguments)}function u(o,l){return D.apply(this,arguments)}function D(){return D=A()(r()().mark(function o(l,s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",g.Z.post("/api/form/apis/add",{id:l,name:s}).then(function(v){var a=v.data.result;return a}));case 1:case"end":return n.stop()}},o)})),D.apply(this,arguments)}function N(o){return I.apply(this,arguments)}function I(){return I=A()(r()().mark(function o(l){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.Z.delete("/api/form/apis/delete/".concat(l)).then(function(n){return n.data.result}));case 1:case"end":return e.stop()}},o)})),I.apply(this,arguments)}function q(){return P.apply(this,arguments)}function P(){return P=A()(r()().mark(function o(){var l,s,e=arguments;return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=e.length>0&&e[0]!==void 0?e[0]:1,s=e.length>1&&e[1]!==void 0?e[1]:10,v.abrupt("return",g.Z.post("/api/form/apis/query",{page:l,pageSize:s}).then(function(a){return a.data}));case 3:case"end":return v.stop()}},o)})),P.apply(this,arguments)}var H=t(31120),_=t(47068),U=t(23542),K=t(788),i=t(33130);function T(o){var l=(0,C.useState)([]),s=R()(l,2),e=s[0],n=s[1],v=(0,C.useState)(!1),a=R()(v,2),Q=a[0],S=a[1],O=(0,C.useState)(!1),Z=R()(O,2),p=Z[0],d=Z[1],c=(0,K.cI)(),E=(0,C.useCallback)(function(){d(!0),q().then(function(h){n(h.result.items),d(!1)}).catch(function(h){w.ZP.error(h.message),d(!1)})},[]),X=[{key:"btn",title:"\u64CD\u4F5C",dataIndex:"id",width:"100px",render:function(J,f){return(0,i.jsxs)(F.Z,{children:[(0,i.jsx)(H.Z,{}),(0,i.jsx)(_.Z,{style:{color:"red"},onClick:function(){x.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u6B64Api\u5417\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onOk:function(){N(f.id).then(function(y){E()})}})}})]})}},{key:"system",title:"\u7CFB\u7EDF\u540D",width:"200px",dataIndex:"system"},{key:"path",title:"\u8DEF\u5F84",width:"300px",dataIndex:"path"},{key:"method",title:"method",width:"100px",dataIndex:"method"},{key:"swagger_id",title:"\u5173\u8054swagger",width:"200px",dataIndex:"swagger_id",render:function(J,f){return(0,i.jsx)(F.Z,{children:(0,i.jsx)(j.rU,{to:"/assets/swagger/i/".concat(f.swaggerId,"/ui"),target:"_blank",children:f.swagger_id})})}},{key:"id",title:"ID",dataIndex:"id"}];return(0,C.useEffect)(function(){E()},[]),(0,i.jsx)(B.Z,{children:(0,i.jsxs)(B.Z.Content,{children:[(0,i.jsx)(z.Z,{loading:p,columns:X,dataSource:e}),(0,i.jsx)(x.Z,{open:Q,footer:!1,title:"\u65B0\u5EFA\u7F16\u6392",onCancel:function(){return S(!1)},children:(0,i.jsx)(U.Z,{style:{margin:"10px"},form:c,schema:{type:"object",properties:{id:{title:"\u552F\u4E00\u7F16\u53F7",type:"string",widget:"input"},name:{title:"\u4E1A\u52A1\u540D\u79F0",type:"string",widget:"input"}}},footer:function(){return(0,i.jsx)(G.ZP,{type:"primary",style:{width:"200px"},onClick:A()(r()().mark(function J(){var f,M;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f=c.getValues(),d(!0),S(!1),y.next=5,u(f.id,f.name);case 5:M=y.sent,d(!1),E();case 8:case"end":return y.stop()}},J)})),children:"\u4FDD\u5B58"})}})})]})})}}}]);
