# 快速开始

<cite>
**本文档引用的文件**  
- [readme.md](file://readme.md)
- [pom.xml](file://pom.xml)
- [logic-runtime/pom.xml](file://logic-runtime/pom.xml)
- [logic-sdk/pom.xml](file://logic-sdk/pom.xml)
- [logic-ide/pom.xml](file://logic-ide/pom.xml)
- [test-suite/pom.xml](file://test-suite/pom.xml)
- [logic-runtime/src/main/java/com/aims/logic/runtime/service/LogicRunnerService.java](file://logic-runtime/src/main/java/com/aims/logic/runtime/service/LogicRunnerService.java)
- [doc/sql-scripts/full/v0.8.sql](file://doc/sql-scripts/full/v0.8.sql)
- [test-suite/src/test/java/com/aims/logic/testsuite/TestRun.java](file://test-suite/src/test/java/com/aims/logic/testsuite/TestRun.java)
- [test-suite/src/main/java/com/aims/logic/testsuite/TestSuiteApplication.java](file://test-suite/src/main/java/com/aims/logic/testsuite/TestSuiteApplication.java)
</cite>

## 目录
1. [简介](#简介)
2. [环境要求](#环境要求)
3. [项目结构](#项目结构)
4. [安装与编译](#安装与编译)
5. [数据库配置](#数据库配置)
6. [运行测试套件](#运行测试套件)
7. [LogicRunnerService API 使用](#logicrunnerservice-api-使用)
   - [无状态执行示例](#无状态执行示例)
   - [有状态业务实例示例](#有状态业务实例示例)
8. [Maven 依赖集成](#maven-依赖集成)
9. [常见问题排查](#常见问题排查)
10. [总结](#总结)

## 简介

Logic IDE 是一个基于 Java 17 和 Spring Boot 的可视化逻辑编排引擎，支持通过拖拽式界面设计业务流程，并提供强大的运行时执行能力。本指南将详细介绍如何快速搭建和使用 `logic-solution` 项目，包括环境准备、安装编译、数据库配置、运行测试套件以及核心 API 的使用方法。

**Section sources**
- [readme.md](file://readme.md)

## 环境要求

在开始之前，请确保您的开发环境满足以下要求：

- **JDK 17+**：项目基于 Java 17 构建，需要安装 JDK 17 或更高版本。
- **Maven 3.6+**：用于项目构建和依赖管理。
- **MySQL 5.7+ (可选)**：用于持久化逻辑实例和日志数据。
- **Redis (可选)**：用于分布式锁和缓存支持。

**Section sources**
- [readme.md](file://readme.md)

## 项目结构

`logic-solution` 是一个多模块 Maven 项目，采用清晰的分层架构：

```
logic-solution/
├── logic-runtime/     # 核心执行引擎
├── logic-sdk/         # SDK 和服务层
├── logic-ide/         # Web IDE 界面
└── test-suite/        # 完整示例和测试
```

**依赖关系**：
- `logic-sdk` 依赖 `logic-runtime` (核心执行引擎)
- `logic-ide` 依赖 `logic-sdk` (提供Web界面和API)
- `test-suite` 依赖 `logic-ide` (完整示例应用)

**Section sources**
- [pom.xml](file://pom.xml)

## 安装与编译

1. **克隆项目**：
   ```bash
   git clone https://github.com/liusir2606/logic-ide.git
   cd logic-solution
   ```

2. **编译项目**：
   ```bash
   mvn clean package
   ```

   如果您希望跳过测试以加快构建速度，可以使用：
   ```bash
   mvn clean package -DskipTests
   ```

**Section sources**
- [readme.md](file://readme.md)

## 数据库配置

1. **创建数据库**：
   在 MySQL 中创建一个名为 `logic_test_0_9` 的数据库。

2. **执行 SQL 脚本**：
   在业务数据库中执行 SQL 脚本，脚本目录位于 `doc/sql-scripts/full/v0.8.sql`。

   ```bash
   mysql -u root -p logic_test_0_9 < doc/sql-scripts/full/v0.8.sql
   ```

**Section sources**
- [readme.md](file://readme.md)
- [doc/sql-scripts/full/v0.8.sql](file://doc/sql-scripts/full/v0.8.sql)

## 运行测试套件

1. **进入测试套件目录**：
   ```bash
   cd test-suite
   ```

2. **运行测试套件**：
   ```bash
   mvn spring-boot:run
   ```

   应用启动后，访问 http://localhost:8888 查看管理界面。

**Section sources**
- [readme.md](file://readme.md)
- [test-suite/pom.xml](file://test-suite/pom.xml)
- [test-suite/src/main/java/com/aims/logic/testsuite/TestSuiteApplication.java](file://test-suite/src/main/java/com/aims/logic/testsuite/TestSuiteApplication.java)

## LogicRunnerService API 使用

`LogicRunnerService` 是核心执行服务，提供了无状态和有状态的逻辑执行接口。

### 无状态执行示例

```java
@Autowired
private LogicRunnerService logicService;

// 执行逻辑，传入参数
Map<String, Object> params = Map.of("input", "hello world");
LogicRunResult result = logicService.runByMap("my-logic-id", params);

// 获取结果
if (result.isSuccess()) {
    System.out.println("Result: " + result.getData());
}
```

### 有状态业务实例示例

```java
// 创建业务实例并执行
LogicRunResult result = logicService.runBizByMap("workflow-id", "biz-001", params);

// 后续从断点继续执行
LogicRunResult nextResult = logicService.runBizByMap("workflow-id", "biz-001", newParams);
```

**Section sources**
- [logic-runtime/src/main/java/com/aims/logic/runtime/service/LogicRunnerService.java](file://logic-runtime/src/main/java/com/aims/logic/runtime/service/LogicRunnerService.java)
- [test-suite/src/test/java/com/aims/logic/testsuite/TestRun.java](file://test-suite/src/test/java/com/aims/logic/testsuite/TestRun.java)

## Maven 依赖集成

在您的项目中添加以下 Maven 依赖：

```xml
<dependency>
    <groupId>com.aims.logic</groupId>
    <artifactId>logic-sdk</artifactId>
    <version>0.9.5.250925-SNAPSHOT</version>
</dependency>
```

**Section sources**
- [readme.md](file://readme.md)
- [logic-sdk/pom.xml](file://logic-sdk/pom.xml)

## 常见问题排查

### 数据库连接问题

- 确保 MySQL 服务已启动。
- 检查 `application.yaml` 中的数据库连接配置是否正确。
- 确认数据库用户名和密码正确。

### 端口冲突

- 默认情况下，应用运行在 8888 端口。如果该端口已被占用，可以在 `application.yaml` 中修改端口配置。

```yaml
server:
  port: 8889
```

**Section sources**
- [test-suite/src/main/resources/application.yaml](file://test-suite/src/main/resources/application.yaml)

## 总结

通过本指南，您已经成功搭建了 `logic-solution` 项目，并了解了如何使用 `LogicRunnerService` API 进行无状态和有状态的逻辑执行。希望本指南能帮助您快速上手并开始使用 Logic IDE。