# 快速入门

<cite>
**本文档中引用的文件**  
- [logic-ide/pom.xml](file://logic-ide/pom.xml)
- [logic-ide-service/pom.xml](file://logic-ide-service/pom.xml)
- [logic-runtime/pom.xml](file://logic-runtime/pom.xml)
- [logic-sdk/logic-configs/logics/java.demo.json](file://logic-sdk/logic-configs/logics/java.demo.json)
</cite>

## 目录
1. [简介](#简介)
2. [前置条件](#前置条件)
3. [项目克隆与结构](#项目克隆与结构)
4. [Maven多模块构建流程](#maven多模块构建流程)
5. [服务启动顺序与配置](#服务启动顺序与配置)
6. [最小化示例：创建、调试与执行逻辑流程](#最小化示例创建调试与执行逻辑流程)
7. [访问IDE界面](#访问ide界面)
8. [常见问题排查](#常见问题排查)

## 简介
本指南旨在帮助开发者在30分钟内完成 **logic-solution** 全栈系统的本地部署与首次运行。涵盖从环境准备、项目构建、服务启动到使用 `java.demo.json` 示例完成一个完整逻辑流程的创建、调试与执行全过程。内容聚焦于快速上手，避免深入技术细节。

## 前置条件
在开始之前，请确保您的开发环境已安装以下软件：

- **JDK 17**：本项目基于Java 17开发，不兼容其他版本。
- **Maven 3.6 或更高版本**：用于构建和管理Maven多模块项目。
- **Git**：用于克隆项目仓库。

可通过以下命令验证环境：
```bash
java -version
mvn -v
git --version
```

## 项目克隆与结构
1. 克隆项目仓库：
```bash
git clone https://github.com/aims/xuanwu-logic/logic-ide/logic-solution.git
cd logic-solution
```

2. 项目主要模块结构如下：
```
logic-solution/
├── logic-ide/               # 前端IDE服务（Spring Boot + Web界面）
├── logic-ide-service/       # IDE后端服务，提供API接口
├── logic-runtime/           # 核心运行时引擎，负责逻辑执行
├── logic-sdk/               # SDK与配置文件，包含示例逻辑
└── pom.xml                  # 根POM，定义多模块结构
```

**Section sources**
- [logic-ide/pom.xml](file://logic-ide/pom.xml)
- [logic-ide-service/pom.xml](file://logic-ide-service/pom.xml)
- [logic-runtime/pom.xml](file://logic-runtime/pom.xml)

## Maven多模块构建流程
在项目根目录执行以下Maven命令进行全量构建：

```bash
mvn clean install -DskipTests
```

**说明**：
- `clean`：清理之前构建的产物。
- `install`：编译、测试并安装所有模块到本地Maven仓库。由于模块间存在依赖关系（如`logic-ide-service`依赖`logic-ide`），根POM会自动按正确顺序构建。
- `-DskipTests`：跳过测试以加快构建速度，适用于首次快速体验。

构建成功后，各模块的可执行JAR包将生成在各自的 `target/` 目录下。

**Section sources**
- [logic-ide/pom.xml](file://logic-ide/pom.xml)
- [logic-ide-service/pom.xml](file://logic-ide-service/pom.xml)
- [logic-runtime/pom.xml](file://logic-runtime/pom.xml)

## 服务启动顺序与配置
为确保系统正常运行，必须按照以下顺序启动服务：

### 1. 启动 logic-ide-service
此服务是IDE的后端，必须首先启动。

```bash
cd logic-ide-service
mvn spring-boot:run
```

或使用生成的JAR包：
```bash
java -jar target/logic-ide-service-0.0.1-SNAPSHOT.jar
```

**默认配置**：
- 端口：`8081`
- 依赖：无（但需确保`logic-ide`模块已构建成功）

### 2. 启动 logic-runtime
此服务是逻辑执行引擎。

```bash
cd ../logic-runtime
mvn spring-boot:run
```

或使用JAR包：
```bash
java -jar target/logic-runtime-*.jar
```

**默认配置**：
- 端口：`8082`
- 依赖：`logic-ide-service`（用于获取逻辑配置）

### 3. 启动 logic-ide
此服务提供Web前端界面。

```bash
cd ../logic-ide
mvn spring-boot:run
```

或使用JAR包：
```bash
java -jar target/logic-ide-*.jar
```

**默认配置**：
- 端口：`8080`
- 依赖：`logic-ide-service`（端口8081）和 `logic-runtime`（端口8082）

**重要**：请严格按照此顺序启动，否则前端可能无法连接到后端服务。

**Section sources**
- [logic-ide-service/pom.xml](file://logic-ide-service/pom.xml)
- [logic-runtime/pom.xml](file://logic-runtime/pom.xml)
- [logic-ide/pom.xml](file://logic-ide/pom.xml)

## 最小化示例：创建、调试与执行逻辑流程
本示例使用 `logic-sdk` 模块中的 `java.demo.json` 配置文件，演示一个简单的Java方法调用流程。

### 1. 示例逻辑说明
`java.demo.json` 定义了一个名为 `java.demo` 的逻辑流程，其结构如下：
- **开始节点** (`start`)：流程入口。
- **Java节点1**：调用 `com.aims.logic.sdk.testTran.insertData(id)` 方法，返回 `{\"id\":\"1111\"}`。
- **Java节点2**：调用同一方法，返回 `{\"id\":\"33\"}`。

该流程无分支，顺序执行两个Java方法调用。

### 2. 创建与部署
1. 确保 `logic-ide-service` 和 `logic-runtime` 已启动。
2. `java.demo.json` 文件位于 `logic-sdk/logic-configs/logics/` 目录下，系统启动时会自动加载此目录下的逻辑配置。
3. 当 `logic-ide-service` 启动时，它会读取并注册这些逻辑定义。

### 3. 调试与执行
1. 启动 `logic-ide` 服务后，通过浏览器访问IDE界面（见下一节）。
2. 在IDE中，您应该能看到名为 `java.demo` 的逻辑流程。
3. 点击“调试”按钮，系统将执行该流程。
4. 执行结果将在调试日志中显示，您将看到两个Java节点的执行输出。

此过程无需手动编码，仅通过配置文件即可完成逻辑的定义与执行。

**Section sources**
- [logic-sdk/logic-configs/logics/java.demo.json](file://logic-sdk/logic-configs/logics/java.demo.json)

## 访问IDE界面
当所有服务启动成功后，打开您的浏览器，访问以下URL：

```
http://localhost:8080
```

您将看到 **logic-ide** 的Web界面。登录后，即可在项目列表中找到 `java.demo` 逻辑，并进行查看、调试和执行操作。

## 常见问题排查
- **构建失败**：检查Maven和JDK版本，确保网络可以访问 `nexus.aimstek.cn` 仓库。
- **服务启动失败**：检查端口是否被占用（8080, 8081, 8082），或查看日志中的具体错误信息。
- **IDE无法加载逻辑**：确认 `logic-ide-service` 和 `logic-runtime` 已先于 `logic-ide` 启动，并且它们之间的网络连接正常。
- **找不到java.demo**：确认 `logic-sdk/logic-configs/logics/java.demo.json` 文件存在且格式正确。